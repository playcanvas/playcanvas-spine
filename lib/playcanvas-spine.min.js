/* Copyright 2015-2018 PlayCanvas Ltd */

var spine,__extends=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();!function(D){var L,t,v,e,r,n,Y=function(){function t(t,e,n){if(null==t)throw new Error("name cannot be null.");if(null==e)throw new Error("timelines cannot be null.");this.name=t,this.timelines=e,this.duration=n}return t.prototype.apply=function(t,e,n,r,i,a,s,o){if(null==t)throw new Error("skeleton cannot be null.");r&&0!=this.duration&&(n%=this.duration,0<e&&(e%=this.duration));for(var h=this.timelines,l=0,u=h.length;l<u;l++)h[l].apply(t,e,n,i,a,s,o)},t.binarySearch=function(t,e,n){void 0===n&&(n=1);var r=0,i=t.length/n-2;if(0==i)return n;for(var a=i>>>1;;){if(t[(a+1)*n]<=e?r=a+1:i=a,r==i)return(r+1)*n;a=r+i>>>1}},t.linearSearch=function(t,e,n){for(var r=0,i=t.length-n;r<=i;r+=n)if(t[r]>e)return r;return-1},t}();D.Animation=Y,(t=L=D.MixPose||(D.MixPose={}))[t.setup=0]="setup",t[t.current=1]="current",t[t.currentLayered=2]="currentLayered",(e=v=D.MixDirection||(D.MixDirection={}))[e.in=0]="in",e[e.out=1]="out",(n=r=D.TimelineType||(D.TimelineType={}))[n.rotate=0]="rotate",n[n.translate=1]="translate",n[n.scale=2]="scale",n[n.shear=3]="shear",n[n.attachment=4]="attachment",n[n.color=5]="color",n[n.deform=6]="deform",n[n.event=7]="event",n[n.drawOrder=8]="drawOrder",n[n.ikConstraint=9]="ikConstraint",n[n.transformConstraint=10]="transformConstraint",n[n.pathConstraintPosition=11]="pathConstraintPosition",n[n.pathConstraintSpacing=12]="pathConstraintSpacing",n[n.pathConstraintMix=13]="pathConstraintMix",n[n.twoColor=14]="twoColor";var i=function(){function y(t){if(t<=0)throw new Error("frameCount must be > 0: "+t);this.curves=D.Utils.newFloatArray((t-1)*y.BEZIER_SIZE)}return y.prototype.getFrameCount=function(){return this.curves.length/y.BEZIER_SIZE+1},y.prototype.setLinear=function(t){this.curves[t*y.BEZIER_SIZE]=y.LINEAR},y.prototype.setStepped=function(t){this.curves[t*y.BEZIER_SIZE]=y.STEPPED},y.prototype.getCurveType=function(t){var e=t*y.BEZIER_SIZE;if(e==this.curves.length)return y.LINEAR;var n=this.curves[e];return n==y.LINEAR?y.LINEAR:n==y.STEPPED?y.STEPPED:y.BEZIER},y.prototype.setCurve=function(t,e,n,r,i){var a=.03*(2*-e+r),s=.03*(2*-n+i),o=.006*(3*(e-r)+1),h=.006*(3*(n-i)+1),l=2*a+o,u=2*s+h,c=.3*e+a+.16666667*o,p=.3*n+s+.16666667*h,f=t*y.BEZIER_SIZE,d=this.curves;d[f++]=y.BEZIER;for(var m=c,g=p,v=f+y.BEZIER_SIZE-1;f<v;f+=2)d[f]=m,d[f+1]=g,c+=l,p+=u,l+=o,u+=h,m+=c,g+=p},y.prototype.getCurvePercent=function(t,e){e=D.MathUtils.clamp(e,0,1);var n=this.curves,r=t*y.BEZIER_SIZE,i=n[r];if(i==y.LINEAR)return e;if(i==y.STEPPED)return 0;for(var a=0,s=++r,o=r+y.BEZIER_SIZE-1;r<o;r+=2)if(e<=(a=n[r])){var h=void 0,l=void 0;return(l=r==s?h=0:(h=n[r-2],n[r-1]))+(n[r+1]-l)*(e-h)/(a-h)}var u=n[r-1];return u+(1-u)*(e-a)/(1-a)},y.LINEAR=0,y.STEPPED=1,y.BEZIER=2,y.BEZIER_SIZE=19,y}(),a=function(n){function g(t){var e=n.call(this,t)||this;return e.frames=D.Utils.newFloatArray(t<<1),e}return __extends(g,n),g.prototype.getPropertyId=function(){return(r.rotate<<24)+this.boneIndex},g.prototype.setFrame=function(t,e,n){t<<=1,this.frames[t]=e,this.frames[t+g.ROTATION]=n},g.prototype.apply=function(t,e,n,r,i,a,s){var o=this.frames,h=t.bones[this.boneIndex];if(n<o[0])switch(a){case L.setup:return void(h.rotation=h.data.rotation);case L.current:var l=h.data.rotation-h.rotation;l-=360*(16384-(16384.499999999996-l/360|0)),h.rotation+=l*i}else if(n>=o[o.length-g.ENTRIES])if(a==L.setup)h.rotation=h.data.rotation+o[o.length+g.PREV_ROTATION]*i;else{var u=h.data.rotation+o[o.length+g.PREV_ROTATION]-h.rotation;u-=360*(16384-(16384.499999999996-u/360|0)),h.rotation+=u*i}else{var c=Y.binarySearch(o,n,g.ENTRIES),p=o[c+g.PREV_ROTATION],f=o[c],d=this.getCurvePercent((c>>1)-1,1-(n-f)/(o[c+g.PREV_TIME]-f)),m=o[c+g.ROTATION]-p;m=p+(m-=360*(16384-(16384.499999999996-m/360|0)))*d,a==L.setup?(m-=360*(16384-(16384.499999999996-m/360|0)),h.rotation=h.data.rotation+m*i):(m=h.data.rotation+m-h.rotation,m-=360*(16384-(16384.499999999996-m/360|0)),h.rotation+=m*i)}},g.ENTRIES=2,g.PREV_TIME=-2,g.PREV_ROTATION=-1,g.ROTATION=1,g}(D.CurveTimeline=i);D.RotateTimeline=a;var s=function(n){function d(t){var e=n.call(this,t)||this;return e.frames=D.Utils.newFloatArray(t*d.ENTRIES),e}return __extends(d,n),d.prototype.getPropertyId=function(){return(r.translate<<24)+this.boneIndex},d.prototype.setFrame=function(t,e,n,r){t*=d.ENTRIES,this.frames[t]=e,this.frames[t+d.X]=n,this.frames[t+d.Y]=r},d.prototype.apply=function(t,e,n,r,i,a,s){var o=this.frames,h=t.bones[this.boneIndex];if(n<o[0])switch(a){case L.setup:return h.x=h.data.x,void(h.y=h.data.y);case L.current:h.x+=(h.data.x-h.x)*i,h.y+=(h.data.y-h.y)*i}else{var l=0,u=0;if(n>=o[o.length-d.ENTRIES])l=o[o.length+d.PREV_X],u=o[o.length+d.PREV_Y];else{var c=Y.binarySearch(o,n,d.ENTRIES);l=o[c+d.PREV_X],u=o[c+d.PREV_Y];var p=o[c],f=this.getCurvePercent(c/d.ENTRIES-1,1-(n-p)/(o[c+d.PREV_TIME]-p));l+=(o[c+d.X]-l)*f,u+=(o[c+d.Y]-u)*f}a==L.setup?(h.x=h.data.x+l*i,h.y=h.data.y+u*i):(h.x+=(h.data.x+l-h.x)*i,h.y+=(h.data.y+u-h.y)*i)}},d.ENTRIES=3,d.PREV_TIME=-3,d.PREV_X=-2,d.PREV_Y=-1,d.X=1,d.Y=2,d}(i),o=function(e){function g(t){return e.call(this,t)||this}return __extends(g,e),g.prototype.getPropertyId=function(){return(r.scale<<24)+this.boneIndex},g.prototype.apply=function(t,e,n,r,i,a,s){var o=this.frames,h=t.bones[this.boneIndex];if(n<o[0])switch(a){case L.setup:return h.scaleX=h.data.scaleX,void(h.scaleY=h.data.scaleY);case L.current:h.scaleX+=(h.data.scaleX-h.scaleX)*i,h.scaleY+=(h.data.scaleY-h.scaleY)*i}else{var l=0,u=0;if(n>=o[o.length-g.ENTRIES])l=o[o.length+g.PREV_X]*h.data.scaleX,u=o[o.length+g.PREV_Y]*h.data.scaleY;else{var c=Y.binarySearch(o,n,g.ENTRIES);l=o[c+g.PREV_X],u=o[c+g.PREV_Y];var p=o[c],f=this.getCurvePercent(c/g.ENTRIES-1,1-(n-p)/(o[c+g.PREV_TIME]-p));l=(l+(o[c+g.X]-l)*f)*h.data.scaleX,u=(u+(o[c+g.Y]-u)*f)*h.data.scaleY}if(1==i)h.scaleX=l,h.scaleY=u;else{var d=0,m=0;m=a==L.setup?(d=h.data.scaleX,h.data.scaleY):(d=h.scaleX,h.scaleY),s==v.out?(l=Math.abs(l)*D.MathUtils.signum(d),u=Math.abs(u)*D.MathUtils.signum(m)):(d=Math.abs(d)*D.MathUtils.signum(l),m=Math.abs(m)*D.MathUtils.signum(u)),h.scaleX=d+(l-d)*i,h.scaleY=m+(u-m)*i}}},g}(D.TranslateTimeline=s);D.ScaleTimeline=o;var h=function(e){function d(t){return e.call(this,t)||this}return __extends(d,e),d.prototype.getPropertyId=function(){return(r.shear<<24)+this.boneIndex},d.prototype.apply=function(t,e,n,r,i,a,s){var o=this.frames,h=t.bones[this.boneIndex];if(n<o[0])switch(a){case L.setup:return h.shearX=h.data.shearX,void(h.shearY=h.data.shearY);case L.current:h.shearX+=(h.data.shearX-h.shearX)*i,h.shearY+=(h.data.shearY-h.shearY)*i}else{var l=0,u=0;if(n>=o[o.length-d.ENTRIES])l=o[o.length+d.PREV_X],u=o[o.length+d.PREV_Y];else{var c=Y.binarySearch(o,n,d.ENTRIES);l=o[c+d.PREV_X],u=o[c+d.PREV_Y];var p=o[c],f=this.getCurvePercent(c/d.ENTRIES-1,1-(n-p)/(o[c+d.PREV_TIME]-p));l+=(o[c+d.X]-l)*f,u+=(o[c+d.Y]-u)*f}a==L.setup?(h.shearX=h.data.shearX+l*i,h.shearY=h.data.shearY+u*i):(h.shearX+=(h.data.shearX+l-h.shearX)*i,h.shearY+=(h.data.shearY+u-h.shearY)*i)}},d}(s);D.ShearTimeline=h;var l=function(n){function x(t){var e=n.call(this,t)||this;return e.frames=D.Utils.newFloatArray(t*x.ENTRIES),e}return __extends(x,n),x.prototype.getPropertyId=function(){return(r.color<<24)+this.slotIndex},x.prototype.setFrame=function(t,e,n,r,i,a){t*=x.ENTRIES,this.frames[t]=e,this.frames[t+x.R]=n,this.frames[t+x.G]=r,this.frames[t+x.B]=i,this.frames[t+x.A]=a},x.prototype.apply=function(t,e,n,r,i,a,s){var o=t.slots[this.slotIndex],h=this.frames;if(n<h[0])switch(a){case L.setup:return void o.color.setFromColor(o.data.color);case L.current:var l=o.color,u=o.data.color;l.add((u.r-l.r)*i,(u.g-l.g)*i,(u.b-l.b)*i,(u.a-l.a)*i)}else{var c=0,p=0,f=0,d=0;if(n>=h[h.length-x.ENTRIES]){var m=h.length;c=h[m+x.PREV_R],p=h[m+x.PREV_G],f=h[m+x.PREV_B],d=h[m+x.PREV_A]}else{var g=Y.binarySearch(h,n,x.ENTRIES);c=h[g+x.PREV_R],p=h[g+x.PREV_G],f=h[g+x.PREV_B],d=h[g+x.PREV_A];var v=h[g],y=this.getCurvePercent(g/x.ENTRIES-1,1-(n-v)/(h[g+x.PREV_TIME]-v));c+=(h[g+x.R]-c)*y,p+=(h[g+x.G]-p)*y,f+=(h[g+x.B]-f)*y,d+=(h[g+x.A]-d)*y}if(1==i)o.color.set(c,p,f,d);else{l=o.color;a==L.setup&&l.setFromColor(o.data.color),l.add((c-l.r)*i,(p-l.g)*i,(f-l.b)*i,(d-l.a)*i)}}},x.ENTRIES=5,x.PREV_TIME=-5,x.PREV_R=-4,x.PREV_G=-3,x.PREV_B=-2,x.PREV_A=-1,x.R=1,x.G=2,x.B=3,x.A=4,x}(i);D.ColorTimeline=l;var u=function(n){function T(t){var e=n.call(this,t)||this;return e.frames=D.Utils.newFloatArray(t*T.ENTRIES),e}return __extends(T,n),T.prototype.getPropertyId=function(){return(r.twoColor<<24)+this.slotIndex},T.prototype.setFrame=function(t,e,n,r,i,a,s,o,h){t*=T.ENTRIES,this.frames[t]=e,this.frames[t+T.R]=n,this.frames[t+T.G]=r,this.frames[t+T.B]=i,this.frames[t+T.A]=a,this.frames[t+T.R2]=s,this.frames[t+T.G2]=o,this.frames[t+T.B2]=h},T.prototype.apply=function(t,e,n,r,i,a,s){var o=t.slots[this.slotIndex],h=this.frames;if(n<h[0])switch(a){case L.setup:return o.color.setFromColor(o.data.color),void o.darkColor.setFromColor(o.data.darkColor);case L.current:var l=o.color,u=o.darkColor,c=o.data.color,p=o.data.darkColor;l.add((c.r-l.r)*i,(c.g-l.g)*i,(c.b-l.b)*i,(c.a-l.a)*i),u.add((p.r-u.r)*i,(p.g-u.g)*i,(p.b-u.b)*i,0)}else{var f=0,d=0,m=0,g=0,v=0,y=0,x=0;if(n>=h[h.length-T.ENTRIES]){var w=h.length;f=h[w+T.PREV_R],d=h[w+T.PREV_G],m=h[w+T.PREV_B],g=h[w+T.PREV_A],v=h[w+T.PREV_R2],y=h[w+T.PREV_G2],x=h[w+T.PREV_B2]}else{var M=Y.binarySearch(h,n,T.ENTRIES);f=h[M+T.PREV_R],d=h[M+T.PREV_G],m=h[M+T.PREV_B],g=h[M+T.PREV_A],v=h[M+T.PREV_R2],y=h[M+T.PREV_G2],x=h[M+T.PREV_B2];var E=h[M],A=this.getCurvePercent(M/T.ENTRIES-1,1-(n-E)/(h[M+T.PREV_TIME]-E));f+=(h[M+T.R]-f)*A,d+=(h[M+T.G]-d)*A,m+=(h[M+T.B]-m)*A,g+=(h[M+T.A]-g)*A,v+=(h[M+T.R2]-v)*A,y+=(h[M+T.G2]-y)*A,x+=(h[M+T.B2]-x)*A}if(1==i)o.color.set(f,d,m,g),o.darkColor.set(v,y,x,1);else{l=o.color,u=o.darkColor;a==L.setup&&(l.setFromColor(o.data.color),u.setFromColor(o.data.darkColor)),l.add((f-l.r)*i,(d-l.g)*i,(m-l.b)*i,(g-l.a)*i),u.add((v-u.r)*i,(y-u.g)*i,(x-u.b)*i,0)}}},T.ENTRIES=8,T.PREV_TIME=-8,T.PREV_R=-7,T.PREV_G=-6,T.PREV_B=-5,T.PREV_A=-4,T.PREV_R2=-3,T.PREV_G2=-2,T.PREV_B2=-1,T.R=1,T.G=2,T.B=3,T.A=4,T.R2=5,T.G2=6,T.B2=7,T}(i);D.TwoColorTimeline=u;var c=function(){function t(t){this.frames=D.Utils.newFloatArray(t),this.attachmentNames=new Array(t)}return t.prototype.getPropertyId=function(){return(r.attachment<<24)+this.slotIndex},t.prototype.getFrameCount=function(){return this.frames.length},t.prototype.setFrame=function(t,e,n){this.frames[t]=e,this.attachmentNames[t]=n},t.prototype.apply=function(t,e,n,r,i,a,s){var o=t.slots[this.slotIndex];if(s!=v.out||a!=L.setup){var h=this.frames;if(n<h[0]){if(a==L.setup){var l=o.data.attachmentName;o.setAttachment(null==l?null:t.getAttachment(this.slotIndex,l))}}else{var u=0;u=n>=h[h.length-1]?h.length-1:Y.binarySearch(h,n,1)-1;var c=this.attachmentNames[u];t.slots[this.slotIndex].setAttachment(null==c?null:t.getAttachment(this.slotIndex,c))}}else{var p=o.data.attachmentName;o.setAttachment(null==p?null:t.getAttachment(this.slotIndex,p))}},t}();D.AttachmentTimeline=c;var p=null,f=function(n){function t(t){var e=n.call(this,t)||this;return e.frames=D.Utils.newFloatArray(t),e.frameVertices=new Array(t),null==p&&(p=D.Utils.newFloatArray(64)),e}return __extends(t,n),t.prototype.getPropertyId=function(){return(r.deform<<27)+ +this.attachment.id+this.slotIndex},t.prototype.setFrame=function(t,e,n){this.frames[t]=e,this.frameVertices[t]=n},t.prototype.apply=function(t,e,n,r,i,a,s){var o=t.slots[this.slotIndex],h=o.getAttachment();if(h instanceof D.VertexAttachment&&h.applyDeform(this.attachment)){var l=o.attachmentVertices;0==l.length&&(i=1);var u=this.frameVertices,c=u[0].length,p=this.frames;if(n<p[0]){var f=h;switch(a){case L.setup:return void(l.length=0);case L.current:if(1==i){l.length=0;break}var d=D.Utils.setArraySize(l,c);if(null==f.bones)for(var m=f.vertices,g=0;g<c;g++)d[g]+=(m[g]-d[g])*i;else{i=1-i;for(g=0;g<c;g++)d[g]*=i}}}else{var v=D.Utils.setArraySize(l,c);if(n>=p[p.length-1]){var y=u[p.length-1];if(1==i)D.Utils.arrayCopy(y,0,v,0,c);else if(a==L.setup){if(null==(f=h).bones)for(var x=f.vertices,w=0;w<c;w++){var M=x[w];v[w]=M+(y[w]-M)*i}else for(var E=0;E<c;E++)v[E]=y[E]*i}else for(var A=0;A<c;A++)v[A]+=(y[A]-v[A])*i}else{var T=Y.binarySearch(p,n),b=u[T-1],R=u[T],I=p[T],S=this.getCurvePercent(T-1,1-(n-I)/(p[T-1]-I));if(1==i)for(var C=0;C<c;C++){var P=b[C];v[C]=P+(R[C]-P)*S}else if(a==L.setup){if(null==(f=h).bones)for(var _=f.vertices,V=0;V<c;V++){P=b[V],M=_[V];v[V]=M+(P+(R[V]-P)*S-M)*i}else for(var k=0;k<c;k++){P=b[k];v[k]=(P+(R[k]-P)*S)*i}}else for(var N=0;N<c;N++){P=b[N];v[N]+=(P+(R[N]-P)*S-v[N])*i}}}}},t}(i);D.DeformTimeline=f;var d=function(){function t(t){this.frames=D.Utils.newFloatArray(t),this.events=new Array(t)}return t.prototype.getPropertyId=function(){return r.event<<24},t.prototype.getFrameCount=function(){return this.frames.length},t.prototype.setFrame=function(t,e){this.frames[t]=e.time,this.events[t]=e},t.prototype.apply=function(t,e,n,r,i,a,s){if(null!=r){var o=this.frames,h=this.frames.length;if(n<e)this.apply(t,e,Number.MAX_VALUE,r,i,a,s),e=-1;else if(e>=o[h-1])return;if(!(n<o[0])){var l=0;if(e<o[0])l=0;else for(var u=o[l=Y.binarySearch(o,e)];0<l&&o[l-1]==u;)l--;for(;l<h&&n>=o[l];l++)r.push(this.events[l])}}},t}();D.EventTimeline=d;var m=function(){function t(t){this.frames=D.Utils.newFloatArray(t),this.drawOrders=new Array(t)}return t.prototype.getPropertyId=function(){return r.drawOrder<<24},t.prototype.getFrameCount=function(){return this.frames.length},t.prototype.setFrame=function(t,e,n){this.frames[t]=e,this.drawOrders[t]=n},t.prototype.apply=function(t,e,n,r,i,a,s){var o=t.drawOrder,h=t.slots;if(s!=v.out||a!=L.setup){var l=this.frames;if(n<l[0])a==L.setup&&D.Utils.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);else{var u=0;u=n>=l[l.length-1]?l.length-1:Y.binarySearch(l,n)-1;var c=this.drawOrders[u];if(null==c)D.Utils.arrayCopy(h,0,o,0,h.length);else for(var p=0,f=c.length;p<f;p++)o[p]=h[c[p]]}}else D.Utils.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length)},t}();D.DrawOrderTimeline=m;var g=function(n){function f(t){var e=n.call(this,t)||this;return e.frames=D.Utils.newFloatArray(t*f.ENTRIES),e}return __extends(f,n),f.prototype.getPropertyId=function(){return(r.ikConstraint<<24)+this.ikConstraintIndex},f.prototype.setFrame=function(t,e,n,r){t*=f.ENTRIES,this.frames[t]=e,this.frames[t+f.MIX]=n,this.frames[t+f.BEND_DIRECTION]=r},f.prototype.apply=function(t,e,n,r,i,a,s){var o=this.frames,h=t.ikConstraints[this.ikConstraintIndex];if(n<o[0])switch(a){case L.setup:return h.mix=h.data.mix,void(h.bendDirection=h.data.bendDirection);case L.current:h.mix+=(h.data.mix-h.mix)*i,h.bendDirection=h.data.bendDirection}else if(n>=o[o.length-f.ENTRIES])a==L.setup?(h.mix=h.data.mix+(o[o.length+f.PREV_MIX]-h.data.mix)*i,h.bendDirection=s==v.out?h.data.bendDirection:o[o.length+f.PREV_BEND_DIRECTION]):(h.mix+=(o[o.length+f.PREV_MIX]-h.mix)*i,s==v.in&&(h.bendDirection=o[o.length+f.PREV_BEND_DIRECTION]));else{var l=Y.binarySearch(o,n,f.ENTRIES),u=o[l+f.PREV_MIX],c=o[l],p=this.getCurvePercent(l/f.ENTRIES-1,1-(n-c)/(o[l+f.PREV_TIME]-c));a==L.setup?(h.mix=h.data.mix+(u+(o[l+f.MIX]-u)*p-h.data.mix)*i,h.bendDirection=s==v.out?h.data.bendDirection:o[l+f.PREV_BEND_DIRECTION]):(h.mix+=(u+(o[l+f.MIX]-u)*p-h.mix)*i,s==v.in&&(h.bendDirection=o[l+f.PREV_BEND_DIRECTION]))}},f.ENTRIES=3,f.PREV_TIME=-3,f.PREV_MIX=-2,f.PREV_BEND_DIRECTION=-1,f.MIX=1,f.BEND_DIRECTION=2,f}(i);D.IkConstraintTimeline=g;var y=function(n){function y(t){var e=n.call(this,t)||this;return e.frames=D.Utils.newFloatArray(t*y.ENTRIES),e}return __extends(y,n),y.prototype.getPropertyId=function(){return(r.transformConstraint<<24)+this.transformConstraintIndex},y.prototype.setFrame=function(t,e,n,r,i,a){t*=y.ENTRIES,this.frames[t]=e,this.frames[t+y.ROTATE]=n,this.frames[t+y.TRANSLATE]=r,this.frames[t+y.SCALE]=i,this.frames[t+y.SHEAR]=a},y.prototype.apply=function(t,e,n,r,i,a,s){var o=this.frames,h=t.transformConstraints[this.transformConstraintIndex];if(n<o[0]){var l=h.data;switch(a){case L.setup:return h.rotateMix=l.rotateMix,h.translateMix=l.translateMix,h.scaleMix=l.scaleMix,void(h.shearMix=l.shearMix);case L.current:h.rotateMix+=(l.rotateMix-h.rotateMix)*i,h.translateMix+=(l.translateMix-h.translateMix)*i,h.scaleMix+=(l.scaleMix-h.scaleMix)*i,h.shearMix+=(l.shearMix-h.shearMix)*i}}else{var u=0,c=0,p=0,f=0;if(n>=o[o.length-y.ENTRIES]){var d=o.length;u=o[d+y.PREV_ROTATE],c=o[d+y.PREV_TRANSLATE],p=o[d+y.PREV_SCALE],f=o[d+y.PREV_SHEAR]}else{var m=Y.binarySearch(o,n,y.ENTRIES);u=o[m+y.PREV_ROTATE],c=o[m+y.PREV_TRANSLATE],p=o[m+y.PREV_SCALE],f=o[m+y.PREV_SHEAR];var g=o[m],v=this.getCurvePercent(m/y.ENTRIES-1,1-(n-g)/(o[m+y.PREV_TIME]-g));u+=(o[m+y.ROTATE]-u)*v,c+=(o[m+y.TRANSLATE]-c)*v,p+=(o[m+y.SCALE]-p)*v,f+=(o[m+y.SHEAR]-f)*v}if(a==L.setup){l=h.data;h.rotateMix=l.rotateMix+(u-l.rotateMix)*i,h.translateMix=l.translateMix+(c-l.translateMix)*i,h.scaleMix=l.scaleMix+(p-l.scaleMix)*i,h.shearMix=l.shearMix+(f-l.shearMix)*i}else h.rotateMix+=(u-h.rotateMix)*i,h.translateMix+=(c-h.translateMix)*i,h.scaleMix+=(p-h.scaleMix)*i,h.shearMix+=(f-h.shearMix)*i}},y.ENTRIES=5,y.PREV_TIME=-5,y.PREV_ROTATE=-4,y.PREV_TRANSLATE=-3,y.PREV_SCALE=-2,y.PREV_SHEAR=-1,y.ROTATE=1,y.TRANSLATE=2,y.SCALE=3,y.SHEAR=4,y}(i);D.TransformConstraintTimeline=y;var x=function(n){function f(t){var e=n.call(this,t)||this;return e.frames=D.Utils.newFloatArray(t*f.ENTRIES),e}return __extends(f,n),f.prototype.getPropertyId=function(){return(r.pathConstraintPosition<<24)+this.pathConstraintIndex},f.prototype.setFrame=function(t,e,n){t*=f.ENTRIES,this.frames[t]=e,this.frames[t+f.VALUE]=n},f.prototype.apply=function(t,e,n,r,i,a,s){var o=this.frames,h=t.pathConstraints[this.pathConstraintIndex];if(n<o[0])switch(a){case L.setup:return void(h.position=h.data.position);case L.current:h.position+=(h.data.position-h.position)*i}else{var l=0;if(n>=o[o.length-f.ENTRIES])l=o[o.length+f.PREV_VALUE];else{var u=Y.binarySearch(o,n,f.ENTRIES);l=o[u+f.PREV_VALUE];var c=o[u],p=this.getCurvePercent(u/f.ENTRIES-1,1-(n-c)/(o[u+f.PREV_TIME]-c));l+=(o[u+f.VALUE]-l)*p}a==L.setup?h.position=h.data.position+(l-h.data.position)*i:h.position+=(l-h.position)*i}},f.ENTRIES=2,f.PREV_TIME=-2,f.PREV_VALUE=-1,f.VALUE=1,f}(i),w=function(e){function f(t){return e.call(this,t)||this}return __extends(f,e),f.prototype.getPropertyId=function(){return(r.pathConstraintSpacing<<24)+this.pathConstraintIndex},f.prototype.apply=function(t,e,n,r,i,a,s){var o=this.frames,h=t.pathConstraints[this.pathConstraintIndex];if(n<o[0])switch(a){case L.setup:return void(h.spacing=h.data.spacing);case L.current:h.spacing+=(h.data.spacing-h.spacing)*i}else{var l=0;if(n>=o[o.length-f.ENTRIES])l=o[o.length+f.PREV_VALUE];else{var u=Y.binarySearch(o,n,f.ENTRIES);l=o[u+f.PREV_VALUE];var c=o[u],p=this.getCurvePercent(u/f.ENTRIES-1,1-(n-c)/(o[u+f.PREV_TIME]-c));l+=(o[u+f.VALUE]-l)*p}a==L.setup?h.spacing=h.data.spacing+(l-h.data.spacing)*i:h.spacing+=(l-h.spacing)*i}},f}(D.PathConstraintPositionTimeline=x);D.PathConstraintSpacingTimeline=w;var M=function(n){function d(t){var e=n.call(this,t)||this;return e.frames=D.Utils.newFloatArray(t*d.ENTRIES),e}return __extends(d,n),d.prototype.getPropertyId=function(){return(r.pathConstraintMix<<24)+this.pathConstraintIndex},d.prototype.setFrame=function(t,e,n,r){t*=d.ENTRIES,this.frames[t]=e,this.frames[t+d.ROTATE]=n,this.frames[t+d.TRANSLATE]=r},d.prototype.apply=function(t,e,n,r,i,a,s){var o=this.frames,h=t.pathConstraints[this.pathConstraintIndex];if(n<o[0])switch(a){case L.setup:return h.rotateMix=h.data.rotateMix,void(h.translateMix=h.data.translateMix);case L.current:h.rotateMix+=(h.data.rotateMix-h.rotateMix)*i,h.translateMix+=(h.data.translateMix-h.translateMix)*i}else{var l=0,u=0;if(n>=o[o.length-d.ENTRIES])l=o[o.length+d.PREV_ROTATE],u=o[o.length+d.PREV_TRANSLATE];else{var c=Y.binarySearch(o,n,d.ENTRIES);l=o[c+d.PREV_ROTATE],u=o[c+d.PREV_TRANSLATE];var p=o[c],f=this.getCurvePercent(c/d.ENTRIES-1,1-(n-p)/(o[c+d.PREV_TIME]-p));l+=(o[c+d.ROTATE]-l)*f,u+=(o[c+d.TRANSLATE]-u)*f}a==L.setup?(h.rotateMix=h.data.rotateMix+(l-h.data.rotateMix)*i,h.translateMix=h.data.translateMix+(u-h.data.translateMix)*i):(h.rotateMix+=(l-h.rotateMix)*i,h.translateMix+=(u-h.translateMix)*i)}},d.ENTRIES=3,d.PREV_TIME=-3,d.PREV_ROTATE=-2,d.PREV_TRANSLATE=-1,d.ROTATE=1,d.TRANSLATE=2,d}(i);D.PathConstraintMixTimeline=M}(spine||(spine={})),function(T){var d=function(){function A(t){this.tracks=new Array,this.events=new Array,this.listeners=new Array,this.queue=new n(this),this.propertyIDs=new T.IntSet,this.mixingTo=new Array,this.animationsChanged=!1,this.timeScale=1,this.trackEntryPool=new T.Pool(function(){return new e}),this.data=t}return A.prototype.update=function(t){t*=this.timeScale;for(var e=this.tracks,n=0,r=e.length;n<r;n++){var i=e[n];if(null!=i){i.animationLast=i.nextAnimationLast,i.trackLast=i.nextTrackLast;var a=t*i.timeScale;if(0<i.delay){if(i.delay-=a,0<i.delay)continue;a=-i.delay,i.delay=0}var s=i.next;if(null!=s){var o=i.trackLast-s.delay;if(0<=o){for(s.delay=0,s.trackTime=o+t*s.timeScale,i.trackTime+=a,this.setCurrent(n,s,!0);null!=s.mixingFrom;)s.mixTime+=a,s=s.mixingFrom;continue}}else if(i.trackLast>=i.trackEnd&&null==i.mixingFrom){e[n]=null,this.queue.end(i),this.disposeNext(i);continue}if(null!=i.mixingFrom&&this.updateMixingFrom(i,t)){var h=i.mixingFrom;for(i.mixingFrom=null;null!=h;)this.queue.end(h),h=h.mixingFrom}i.trackTime+=a}}this.queue.drain()},A.prototype.updateMixingFrom=function(t,e){var n=t.mixingFrom;if(null==n)return!0;var r=this.updateMixingFrom(n,e);return n.animationLast=n.nextAnimationLast,n.trackLast=n.nextTrackLast,0<t.mixTime&&(t.mixTime>=t.mixDuration||0==t.timeScale)?(0!=n.totalAlpha&&0!=t.mixDuration||(t.mixingFrom=n.mixingFrom,t.interruptAlpha=n.interruptAlpha,this.queue.end(n)),r):(n.trackTime+=e*n.timeScale,t.mixTime+=e*t.timeScale,!1)},A.prototype.apply=function(t){if(null==t)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var e=this.events,n=this.tracks,r=!1,i=0,a=n.length;i<a;i++){var s=n[i];if(!(null==s||0<s.delay)){r=!0;var o=0==i?T.MixPose.current:T.MixPose.currentLayered,h=s.alpha;null!=s.mixingFrom?h*=this.applyMixingFrom(s,t,o):s.trackTime>=s.trackEnd&&null==s.next&&(h=0);var l=s.animationLast,u=s.getAnimationTime(),c=s.animation.timelines.length,p=s.animation.timelines;if(1==h)for(var f=0;f<c;f++)p[f].apply(t,l,u,e,1,T.MixPose.setup,T.MixDirection.in);else{var d=s.timelineData,m=0==s.timelinesRotation.length;m&&T.Utils.setArraySize(s.timelinesRotation,c<<1,null);var g=s.timelinesRotation;for(f=0;f<c;f++){var v=p[f],y=d[f]>=A.FIRST?T.MixPose.setup:o;v instanceof T.RotateTimeline?this.applyRotateTimeline(v,t,u,h,y,g,f<<1,m):(T.Utils.webkit602BugfixHelper(h,y),v.apply(t,l,u,e,h,y,T.MixDirection.in))}}this.queueEvents(s,u),e.length=0,s.nextAnimationLast=u,s.nextTrackLast=s.trackTime}}return this.queue.drain(),r},A.prototype.applyMixingFrom=function(t,e,n){var r=t.mixingFrom;null!=r.mixingFrom&&this.applyMixingFrom(r,e,n);var i=0;0==t.mixDuration?(i=1,n=T.MixPose.setup):1<(i=t.mixTime/t.mixDuration)&&(i=1);var a=i<r.eventThreshold?this.events:null,s=i<r.attachmentThreshold,o=i<r.drawOrderThreshold,h=r.animationLast,l=r.getAnimationTime(),u=r.animation.timelines.length,c=r.animation.timelines,p=r.timelineData,f=r.timelineDipMix,d=0==r.timelinesRotation.length;d&&T.Utils.setArraySize(r.timelinesRotation,u<<1,null);for(var m,g=r.timelinesRotation,v=r.alpha*t.interruptAlpha,y=v*(1-i),x=0,w=r.totalAlpha=0;w<u;w++){var M=c[w];switch(p[w]){case A.SUBSEQUENT:if(!s&&M instanceof T.AttachmentTimeline)continue;if(!o&&M instanceof T.DrawOrderTimeline)continue;m=n,x=y;break;case A.FIRST:m=T.MixPose.setup,x=y;break;case A.DIP:m=T.MixPose.setup,x=v;break;default:m=T.MixPose.setup,x=v;var E=f[w];x*=Math.max(0,1-E.mixTime/E.mixDuration)}r.totalAlpha+=x,M instanceof T.RotateTimeline?this.applyRotateTimeline(M,e,l,x,m,g,w<<1,d):(T.Utils.webkit602BugfixHelper(x,m),M.apply(e,h,l,a,x,m,T.MixDirection.out))}return 0<t.mixDuration&&this.queueEvents(r,l),this.events.length=0,r.nextAnimationLast=l,r.nextTrackLast=r.trackTime,i},A.prototype.applyRotateTimeline=function(t,e,n,r,i,a,s,o){if(o&&(a[s]=0),1!=r){var h=t,l=h.frames,u=e.bones[h.boneIndex];if(n<l[0])i==T.MixPose.setup&&(u.rotation=u.data.rotation);else{var c=0;if(n>=l[l.length-T.RotateTimeline.ENTRIES])c=u.data.rotation+l[l.length+T.RotateTimeline.PREV_ROTATION];else{var p=T.Animation.binarySearch(l,n,T.RotateTimeline.ENTRIES),f=l[p+T.RotateTimeline.PREV_ROTATION],d=l[p],m=h.getCurvePercent((p>>1)-1,1-(n-d)/(l[p+T.RotateTimeline.PREV_TIME]-d));c=l[p+T.RotateTimeline.ROTATION]-f,c=f+(c-=360*(16384-(16384.499999999996-c/360|0)))*m+u.data.rotation,c-=360*(16384-(16384.499999999996-c/360|0))}var g=i==T.MixPose.setup?u.data.rotation:u.rotation,v=0,y=c-g;if(0==y)v=a[s];else{y-=360*(16384-(16384.499999999996-y/360|0));var x=0,w=0;w=o?(x=0,y):(x=a[s],a[s+1]);var M=0<y,E=0<=x;T.MathUtils.signum(w)!=T.MathUtils.signum(y)&&Math.abs(w)<=90&&(180<Math.abs(x)&&(x+=360*T.MathUtils.signum(x)),E=M),v=y+x-x%360,E!=M&&(v+=360*T.MathUtils.signum(x)),a[s]=v}a[s+1]=y,g+=v*r,u.rotation=g-360*(16384-(16384.499999999996-g/360|0))}}else t.apply(e,0,n,null,1,i,T.MixDirection.in)},A.prototype.queueEvents=function(t,e){for(var n=t.animationStart,r=t.animationEnd,i=r-n,a=t.trackLast%i,s=this.events,o=0,h=s.length;o<h;o++){var l=s[o];if(l.time<a)break;l.time>r||this.queue.event(t,l)}for((t.loop?0==i||a>t.trackTime%i:r<=e&&t.animationLast<r)&&this.queue.complete(t);o<h;o++){s[o].time<n||this.queue.event(t,s[o])}},A.prototype.clearTracks=function(){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var e=0,n=this.tracks.length;e<n;e++)this.clearTrack(e);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()},A.prototype.clearTrack=function(t){if(!(t>=this.tracks.length)){var e=this.tracks[t];if(null!=e){this.queue.end(e),this.disposeNext(e);for(var n=e;;){var r=n.mixingFrom;if(null==r)break;this.queue.end(r),n.mixingFrom=null,n=r}this.tracks[e.trackIndex]=null,this.queue.drain()}}},A.prototype.setCurrent=function(t,e,n){var r=this.expandToIndex(t);this.tracks[t]=e,null!=r&&(n&&this.queue.interrupt(r),e.mixingFrom=r,e.mixTime=0,null!=r.mixingFrom&&0<r.mixDuration&&(e.interruptAlpha*=Math.min(1,r.mixTime/r.mixDuration)),r.timelinesRotation.length=0),this.queue.start(e)},A.prototype.setAnimation=function(t,e,n){var r=this.data.skeletonData.findAnimation(e);if(null==r)throw new Error("Animation not found: "+e);return this.setAnimationWith(t,r,n)},A.prototype.setAnimationWith=function(t,e,n){if(null==e)throw new Error("animation cannot be null.");var r=!0,i=this.expandToIndex(t);null!=i&&(-1==i.nextTrackLast?(this.tracks[t]=i.mixingFrom,this.queue.interrupt(i),this.queue.end(i),this.disposeNext(i),i=i.mixingFrom,r=!1):this.disposeNext(i));var a=this.trackEntry(t,e,n,i);return this.setCurrent(t,a,r),this.queue.drain(),a},A.prototype.addAnimation=function(t,e,n,r){var i=this.data.skeletonData.findAnimation(e);if(null==i)throw new Error("Animation not found: "+e);return this.addAnimationWith(t,i,n,r)},A.prototype.addAnimationWith=function(t,e,n,r){if(null==e)throw new Error("animation cannot be null.");var i=this.expandToIndex(t);if(null!=i)for(;null!=i.next;)i=i.next;var a=this.trackEntry(t,e,n,i);if(null==i)this.setCurrent(t,a,!0),this.queue.drain();else if(i.next=a,r<=0){var s=i.animationEnd-i.animationStart;0!=s?(i.loop?r+=s*(1+(i.trackTime/s|0)):r+=s,r-=this.data.getMix(i.animation,e)):r=0}return a.delay=r,a},A.prototype.setEmptyAnimation=function(t,e){var n=this.setAnimationWith(t,A.emptyAnimation,!1);return n.mixDuration=e,n.trackEnd=e,n},A.prototype.addEmptyAnimation=function(t,e,n){n<=0&&(n-=e);var r=this.addAnimationWith(t,A.emptyAnimation,!1,n);return r.mixDuration=e,r.trackEnd=e,r},A.prototype.setEmptyAnimations=function(t){var e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var n=0,r=this.tracks.length;n<r;n++){var i=this.tracks[n];null!=i&&this.setEmptyAnimation(i.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()},A.prototype.expandToIndex=function(t){return t<this.tracks.length?this.tracks[t]:(T.Utils.ensureArrayCapacity(this.tracks,t-this.tracks.length+1,null),this.tracks.length=t+1,null)},A.prototype.trackEntry=function(t,e,n,r){var i=this.trackEntryPool.obtain();return i.trackIndex=t,i.animation=e,i.loop=n,i.eventThreshold=0,i.attachmentThreshold=0,i.drawOrderThreshold=0,i.animationStart=0,i.animationEnd=e.duration,i.animationLast=-1,i.nextAnimationLast=-1,i.delay=0,i.trackTime=0,i.trackLast=-1,i.nextTrackLast=-1,i.trackEnd=Number.MAX_VALUE,i.timeScale=1,i.alpha=1,i.interruptAlpha=1,i.mixTime=0,i.mixDuration=null==r?0:this.data.getMix(r.animation,e),i},A.prototype.disposeNext=function(t){for(var e=t.next;null!=e;)this.queue.dispose(e),e=e.next;t.next=null},A.prototype._animationsChanged=function(){this.animationsChanged=!1;var t=this.propertyIDs;t.clear();for(var e=this.mixingTo,n=0,r=this.tracks.length;n<r;n++){var i=this.tracks[n];null!=i&&i.setTimelineData(null,e,t)}},A.prototype.getCurrent=function(t){return t>=this.tracks.length?null:this.tracks[t]},A.prototype.addListener=function(t){if(null==t)throw new Error("listener cannot be null.");this.listeners.push(t)},A.prototype.removeListener=function(t){var e=this.listeners.indexOf(t);0<=e&&this.listeners.splice(e,1)},A.prototype.clearListeners=function(){this.listeners.length=0},A.prototype.clearListenerNotifications=function(){this.queue.clear()},A.emptyAnimation=new T.Animation("<empty>",[],0),A.SUBSEQUENT=0,A.FIRST=1,A.DIP=2,A.DIP_MIX=3,A}();T.AnimationState=d;var e=function(){function t(){this.timelineData=new Array,this.timelineDipMix=new Array,this.timelinesRotation=new Array}return t.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.animation=null,this.listener=null,this.timelineData.length=0,this.timelineDipMix.length=0,this.timelinesRotation.length=0},t.prototype.setTimelineData=function(t,e,n){null!=t&&e.push(t);var r=null!=this.mixingFrom?this.mixingFrom.setTimelineData(this,e,n):this;null!=t&&e.pop();var i=e,a=e.length-1,s=this.animation.timelines,o=this.animation.timelines.length,h=T.Utils.setArraySize(this.timelineData,o);this.timelineDipMix.length=0;var l=T.Utils.setArraySize(this.timelineDipMix,o);t:for(var u=0;u<o;u++){var c=s[u].getPropertyId();if(n.add(c))if(null!=t&&t.hasTimeline(c)){for(var p=a;0<=p;p--){var f=i[p];if(!f.hasTimeline(c)&&0<f.mixDuration){h[u]=d.DIP_MIX,l[u]=f;continue t}}h[u]=d.DIP}else h[u]=d.FIRST;else h[u]=d.SUBSEQUENT}return r},t.prototype.hasTimeline=function(t){for(var e=this.animation.timelines,n=0,r=e.length;n<r;n++)if(e[n].getPropertyId()==t)return!0;return!1},t.prototype.getAnimationTime=function(){if(this.loop){var t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},t.prototype.setAnimationLast=function(t){this.animationLast=t,this.nextAnimationLast=t},t.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},t.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},t}();T.TrackEntry=e;var o,t,n=function(){function t(t){this.objects=[],this.drainDisabled=!1,this.animState=t}return t.prototype.start=function(t){this.objects.push(o.start),this.objects.push(t),this.animState.animationsChanged=!0},t.prototype.interrupt=function(t){this.objects.push(o.interrupt),this.objects.push(t)},t.prototype.end=function(t){this.objects.push(o.end),this.objects.push(t),this.animState.animationsChanged=!0},t.prototype.dispose=function(t){this.objects.push(o.dispose),this.objects.push(t)},t.prototype.complete=function(t){this.objects.push(o.complete),this.objects.push(t)},t.prototype.event=function(t,e){this.objects.push(o.event),this.objects.push(t),this.objects.push(e)},t.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var t=this.objects,e=this.animState.listeners,n=0;n<t.length;n+=2){var r=t[n],i=t[n+1];switch(r){case o.start:null!=i.listener&&i.listener.start&&i.listener.start(i);for(var a=0;a<e.length;a++)e[a].start&&e[a].start(i);break;case o.interrupt:null!=i.listener&&i.listener.interrupt&&i.listener.interrupt(i);for(a=0;a<e.length;a++)e[a].interrupt&&e[a].interrupt(i);break;case o.end:null!=i.listener&&i.listener.end&&i.listener.end(i);for(a=0;a<e.length;a++)e[a].end&&e[a].end(i);case o.dispose:null!=i.listener&&i.listener.dispose&&i.listener.dispose(i);for(a=0;a<e.length;a++)e[a].dispose&&e[a].dispose(i);this.animState.trackEntryPool.free(i);break;case o.complete:null!=i.listener&&i.listener.complete&&i.listener.complete(i);for(a=0;a<e.length;a++)e[a].complete&&e[a].complete(i);break;case o.event:var s=t[2+n++];null!=i.listener&&i.listener.event&&i.listener.event(i,s);for(a=0;a<e.length;a++)e[a].event&&e[a].event(i,s)}}this.clear(),this.drainDisabled=!1}},t.prototype.clear=function(){this.objects.length=0},t}();T.EventQueue=n,(t=o=T.EventType||(T.EventType={}))[t.start=0]="start",t[t.interrupt=1]="interrupt",t[t.end=2]="end",t[t.dispose=3]="dispose",t[t.complete=4]="complete",t[t.event=5]="event";var r=function(){function t(){}return t.prototype.start=function(t){},t.prototype.interrupt=function(t){},t.prototype.end=function(t){},t.prototype.dispose=function(t){},t.prototype.complete=function(t){},t.prototype.event=function(t,e){},t}();T.AnimationStateAdapter2=r}(spine||(spine={})),function(t){var e=function(){function t(t){if(this.animationToMixTime={},this.defaultMix=0,null==t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}return t.prototype.setMix=function(t,e,n){var r=this.skeletonData.findAnimation(t);if(null==r)throw new Error("Animation not found: "+t);var i=this.skeletonData.findAnimation(e);if(null==i)throw new Error("Animation not found: "+e);this.setMixWith(r,i,n)},t.prototype.setMixWith=function(t,e,n){if(null==t)throw new Error("from cannot be null.");if(null==e)throw new Error("to cannot be null.");var r=t.name+"."+e.name;this.animationToMixTime[r]=n},t.prototype.getMix=function(t,e){var n=t.name+"."+e.name,r=this.animationToMixTime[n];return void 0===r?this.defaultMix:r},t}();t.AnimationStateData=e}(spine||(spine={})),function(f){var t=function(){function t(t,e){void 0===e&&(e=""),this.assets={},this.errors={},this.toLoad=0,this.loaded=0,this.textureLoader=t,this.pathPrefix=e}return t.downloadText=function(t,e,n){var r=new XMLHttpRequest;r.open("GET",t,!0),r.onload=function(){200==r.status?e(r.responseText):n(r.status,r.responseText)},r.onerror=function(){n(r.status,r.responseText)},r.send()},t.downloadBinary=function(t,e,n){var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status?e(new Uint8Array(r.response)):n(r.status,r.responseText)},r.onerror=function(){n(r.status,r.responseText)},r.send()},t.prototype.loadText=function(n,e,r){var i=this;void 0===e&&(e=null),void 0===r&&(r=null),n=this.pathPrefix+n,this.toLoad++,t.downloadText(n,function(t){i.assets[n]=t,e&&e(n,t),i.toLoad--,i.loaded++},function(t,e){i.errors[n]="Couldn't load text "+n+": status "+status+", "+e,r&&r(n,"Couldn't load text "+n+": status "+status+", "+e),i.toLoad--,i.loaded++})},t.prototype.loadTexture=function(n,r,e){var i=this;void 0===r&&(r=null),void 0===e&&(e=null),n=this.pathPrefix+n,this.toLoad++;var a=new Image;a.crossOrigin="anonymous",a.onload=function(t){var e=i.textureLoader(a);i.assets[n]=e,i.toLoad--,i.loaded++,r&&r(n,a)},a.onerror=function(t){i.errors[n]="Couldn't load image "+n,i.toLoad--,i.loaded++,e&&e(n,"Couldn't load image "+n)},a.src=n},t.prototype.loadTextureData=function(n,t,r,e){var i=this;void 0===r&&(r=null),void 0===e&&(e=null),n=this.pathPrefix+n,this.toLoad++;var a=new Image;a.onload=function(t){var e=i.textureLoader(a);i.assets[n]=e,i.toLoad--,i.loaded++,r&&r(n,a)},a.onerror=function(t){i.errors[n]="Couldn't load image "+n,i.toLoad--,i.loaded++,e&&e(n,"Couldn't load image "+n)},a.src=t},t.prototype.loadTextureAtlas=function(h,l,u){var c=this;void 0===l&&(l=null),void 0===u&&(u=null);var p=0<=h.lastIndexOf("/")?h.substring(0,h.lastIndexOf("/")):"";h=this.pathPrefix+h,this.toLoad++,t.downloadText(h,function(a){var s={count:0},o=new Array;try{new f.TextureAtlas(a,function(t){o.push(p+"/"+t);var e=document.createElement("img");return e.width=16,e.height=16,new f.FakeTexture(e)})}catch(t){var e=t;return c.errors[h]="Couldn't load texture atlas "+h+": "+e.message,u&&u(h,"Couldn't load texture atlas "+h+": "+e.message),c.toLoad--,void c.loaded++}for(var t=function(t){var i=!1;c.loadTexture(t,function(t,e){if(s.count++,s.count==o.length)if(i)c.errors[h]="Couldn't load texture atlas page "+t+"} of atlas "+h,u&&u(h,"Couldn't load texture atlas page "+t+" of atlas "+h),c.toLoad--,c.loaded++;else try{var n=new f.TextureAtlas(a,function(t){return c.get(p+"/"+t)});c.assets[h]=n,l&&l(h,n),c.toLoad--,c.loaded++}catch(t){var r=t;c.errors[h]="Couldn't load texture atlas "+h+": "+r.message,u&&u(h,"Couldn't load texture atlas "+h+": "+r.message),c.toLoad--,c.loaded++}},function(t,e){i=!0,s.count++,s.count==o.length&&(c.errors[h]="Couldn't load texture atlas page "+t+"} of atlas "+h,u&&u(h,"Couldn't load texture atlas page "+t+" of atlas "+h),c.toLoad--,c.loaded++)})},n=0,r=o;n<r.length;n++){t(r[n])}},function(t,e){c.errors[h]="Couldn't load texture atlas "+h+": status "+status+", "+e,u&&u(h,"Couldn't load texture atlas "+h+": status "+status+", "+e),c.toLoad--,c.loaded++})},t.prototype.get=function(t){return t=this.pathPrefix+t,this.assets[t]},t.prototype.remove=function(t){t=this.pathPrefix+t;var e=this.assets[t];e.dispose&&e.dispose(),this.assets[t]=null},t.prototype.removeAll=function(){for(var t in this.assets){var e=this.assets[t];e.dispose&&e.dispose()}this.assets={}},t.prototype.isLoadingComplete=function(){return 0==this.toLoad},t.prototype.getToLoad=function(){return this.toLoad},t.prototype.getLoaded=function(){return this.loaded},t.prototype.dispose=function(){this.removeAll()},t.prototype.hasErrors=function(){return 0<Object.keys(this.errors).length},t.prototype.getErrors=function(){return this.errors},t}();f.AssetManager=t}(spine||(spine={})),function(a){var t=function(){function t(t){this.atlas=t}return t.prototype.newRegionAttachment=function(t,e,n){var r=this.atlas.findRegion(n);if(null==r)throw new Error("Region not found in atlas: "+n+" (region attachment: "+e+")");r.renderObject=r;var i=new a.RegionAttachment(e);return i.setRegion(r),i},t.prototype.newMeshAttachment=function(t,e,n){var r=this.atlas.findRegion(n);if(null==r)throw new Error("Region not found in atlas: "+n+" (mesh attachment: "+e+")");r.renderObject=r;var i=new a.MeshAttachment(e);return i.region=r,i},t.prototype.newBoundingBoxAttachment=function(t,e){return new a.BoundingBoxAttachment(e)},t.prototype.newPathAttachment=function(t,e){return new a.PathAttachment(e)},t.prototype.newPointAttachment=function(t,e){return new a.PointAttachment(e)},t.prototype.newClippingAttachment=function(t,e){return new a.ClippingAttachment(e)},t}();a.AtlasAttachmentLoader=t}(spine||(spine={})),function(t){var e;(e=t.BlendMode||(t.BlendMode={}))[e.Normal=0]="Normal",e[e.Additive=1]="Additive",e[e.Multiply=2]="Multiply",e[e.Screen=3]="Screen"}(spine||(spine={})),function(C){var t=function(){function t(t,e,n){if(this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.a=0,this.b=0,this.worldX=0,this.c=0,this.d=0,this.worldY=0,this.sorted=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=n,this.setToSetupPose()}return t.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},t.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},t.prototype.updateWorldTransformWith=function(t,e,n,r,i,a,s){this.ax=t,this.ay=e,this.arotation=n,this.ascaleX=r,this.ascaleY=i,this.ashearX=a,this.ashearY=s,this.appliedValid=!0;var o=this.parent;if(null==o){var h=n+90+s,l=C.MathUtils.cosDeg(n+a)*r,u=C.MathUtils.cosDeg(h)*i,c=C.MathUtils.sinDeg(n+a)*r,p=C.MathUtils.sinDeg(h)*i,f=this.skeleton;return f.flipX&&(t=-t,l=-l,u=-u),f.flipY&&(e=-e,c=-c,p=-p),this.a=l,this.b=u,this.c=c,this.d=p,this.worldX=t+f.x,void(this.worldY=e+f.y)}var d=o.a,m=o.b,g=o.c,v=o.d;switch(this.worldX=d*t+m*e+o.worldX,this.worldY=g*t+v*e+o.worldY,this.data.transformMode){case C.TransformMode.Normal:h=n+90+s,l=C.MathUtils.cosDeg(n+a)*r,u=C.MathUtils.cosDeg(h)*i,c=C.MathUtils.sinDeg(n+a)*r,p=C.MathUtils.sinDeg(h)*i;return this.a=d*l+m*c,this.b=d*u+m*p,this.c=g*l+v*c,void(this.d=g*u+v*p);case C.TransformMode.OnlyTranslation:h=n+90+s;this.a=C.MathUtils.cosDeg(n+a)*r,this.b=C.MathUtils.cosDeg(h)*i,this.c=C.MathUtils.sinDeg(n+a)*r,this.d=C.MathUtils.sinDeg(h)*i;break;case C.TransformMode.NoRotationOrReflection:var y=0,x=n+a-(y=1e-4<(M=d*d+g*g)?(m=g*(M=Math.abs(d*v-m*g)/M),v=d*M,Math.atan2(g,d)*C.MathUtils.radDeg):(g=d=0,90-Math.atan2(v,m)*C.MathUtils.radDeg)),w=n+s-y+90;l=C.MathUtils.cosDeg(x)*r,u=C.MathUtils.cosDeg(w)*i,c=C.MathUtils.sinDeg(x)*r,p=C.MathUtils.sinDeg(w)*i;this.a=d*l-m*c,this.b=d*u-m*p,this.c=g*l+v*c,this.d=g*u+v*p;break;case C.TransformMode.NoScale:case C.TransformMode.NoScaleOrReflection:var M,E=C.MathUtils.cosDeg(n),A=C.MathUtils.sinDeg(n),T=d*E+m*A,b=g*E+v*A;1e-5<(M=Math.sqrt(T*T+b*b))&&(M=1/M),T*=M,b*=M,M=Math.sqrt(T*T+b*b);var R=Math.PI/2+Math.atan2(b,T),I=Math.cos(R)*M,S=Math.sin(R)*M;l=C.MathUtils.cosDeg(a)*r,u=C.MathUtils.cosDeg(90+s)*i,c=C.MathUtils.sinDeg(a)*r,p=C.MathUtils.sinDeg(90+s)*i;return(this.data.transformMode!=C.TransformMode.NoScaleOrReflection?d*v-m*g<0:this.skeleton.flipX!=this.skeleton.flipY)&&(I=-I,S=-S),this.a=T*l+I*c,this.b=T*u+I*p,this.c=b*l+S*c,void(this.d=b*u+S*p)}this.skeleton.flipX&&(this.a=-this.a,this.b=-this.b),this.skeleton.flipY&&(this.c=-this.c,this.d=-this.d)},t.prototype.setToSetupPose=function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY},t.prototype.getWorldRotationX=function(){return Math.atan2(this.c,this.a)*C.MathUtils.radDeg},t.prototype.getWorldRotationY=function(){return Math.atan2(this.d,this.b)*C.MathUtils.radDeg},t.prototype.getWorldScaleX=function(){return Math.sqrt(this.a*this.a+this.c*this.c)},t.prototype.getWorldScaleY=function(){return Math.sqrt(this.b*this.b+this.d*this.d)},t.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var t=this.parent;if(null==t)return this.ax=this.worldX,this.ay=this.worldY,this.arotation=Math.atan2(this.c,this.a)*C.MathUtils.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,void(this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*C.MathUtils.radDeg);var e=t.a,n=t.b,r=t.c,i=t.d,a=1/(e*i-n*r),s=this.worldX-t.worldX,o=this.worldY-t.worldY;this.ax=s*i*a-o*n*a,this.ay=o*e*a-s*r*a;var h=a*i,l=a*e,u=a*n,c=a*r,p=h*this.a-u*this.c,f=h*this.b-u*this.d,d=l*this.c-c*this.a,m=l*this.d-c*this.b;if(this.ashearX=0,this.ascaleX=Math.sqrt(p*p+d*d),1e-4<this.ascaleX){var g=p*m-f*d;this.ascaleY=g/this.ascaleX,this.ashearY=Math.atan2(p*f+d*m,g)*C.MathUtils.radDeg,this.arotation=Math.atan2(d,p)*C.MathUtils.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(f*f+m*m),this.ashearY=0,this.arotation=90-Math.atan2(m,f)*C.MathUtils.radDeg},t.prototype.worldToLocal=function(t){var e=this.a,n=this.b,r=this.c,i=this.d,a=1/(e*i-n*r),s=t.x-this.worldX,o=t.y-this.worldY;return t.x=s*i*a-o*n*a,t.y=o*e*a-s*r*a,t},t.prototype.localToWorld=function(t){var e=t.x,n=t.y;return t.x=e*this.a+n*this.b+this.worldX,t.y=e*this.c+n*this.d+this.worldY,t},t.prototype.worldToLocalRotation=function(t){var e=C.MathUtils.sinDeg(t),n=C.MathUtils.cosDeg(t);return Math.atan2(this.a*e-this.c*n,this.d*n-this.b*e)*C.MathUtils.radDeg},t.prototype.localToWorldRotation=function(t){var e=C.MathUtils.sinDeg(t),n=C.MathUtils.cosDeg(t);return Math.atan2(n*this.c+e*this.d,n*this.a+e*this.b)*C.MathUtils.radDeg},t.prototype.rotateWorld=function(t){var e=this.a,n=this.b,r=this.c,i=this.d,a=C.MathUtils.cosDeg(t),s=C.MathUtils.sinDeg(t);this.a=a*e-s*r,this.b=a*n-s*i,this.c=s*e+a*r,this.d=s*n+a*i,this.appliedValid=!1},t}();C.Bone=t}(spine||(spine={})),function(t){var r,e,n=function(t,e,n){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=r.Normal,t<0)throw new Error("index must be >= 0.");if(null==e)throw new Error("name cannot be null.");this.index=t,this.name=e,this.parent=n};t.BoneData=n,(e=r=t.TransformMode||(t.TransformMode={}))[e.Normal=0]="Normal",e[e.OnlyTranslation=1]="OnlyTranslation",e[e.NoRotationOrReflection=2]="NoRotationOrReflection",e[e.NoScale=3]="NoScale",e[e.NoScaleOrReflection=4]="NoScaleOrReflection"}(spine||(spine={})),function(t){var e=function(t,e){if(null==e)throw new Error("data cannot be null.");this.time=t,this.data=e};(spine||(spine={})).Event=e}(),function(t){var e=function(t){this.name=t};(spine||(spine={})).EventData=e}(),function(nt){var t=function(){function t(t,e){if(this.mix=1,this.bendDirection=0,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.bendDirection=t.bendDirection,this.bones=new Array;for(var n=0;n<t.bones.length;n++)this.bones.push(e.findBone(t.bones[n].name));this.target=e.findBone(t.target.name)}return t.prototype.getOrder=function(){return this.data.order},t.prototype.apply=function(){this.update()},t.prototype.update=function(){var t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.mix)}},t.prototype.apply1=function(t,e,n,r){t.appliedValid||t.updateAppliedTransform();var i=t.parent,a=1/(i.a*i.d-i.b*i.c),s=e-i.worldX,o=n-i.worldY,h=(s*i.d-o*i.b)*a-t.ax,l=(o*i.a-s*i.c)*a-t.ay,u=Math.atan2(l,h)*nt.MathUtils.radDeg-t.ashearX-t.arotation;t.ascaleX<0&&(u+=180),180<u?u-=360:u<-180&&(u+=360),t.updateWorldTransformWith(t.ax,t.ay,t.arotation+u*r,t.ascaleX,t.ascaleY,t.ashearX,t.ashearY)},t.prototype.apply2=function(t,e,n,r,i,a){if(0!=a){t.appliedValid||t.updateAppliedTransform(),e.appliedValid||e.updateAppliedTransform();var s=t.ax,o=t.ay,h=t.ascaleX,l=t.ascaleY,u=e.ascaleX,c=0,p=0,f=0;f=h<0?(h=-h,c=180,-1):(c=0,1),l<0&&(l=-l,f=-f),p=u<0?(u=-u,180):0;var d=e.ax,m=0,g=0,v=0,y=t.a,x=t.b,w=t.c,M=t.d,E=Math.abs(h-l)<=1e-4;v=E?(g=y*d+x*(m=e.ay)+t.worldX,w*d+M*m+t.worldY):(m=0,g=y*d+t.worldX,w*d+t.worldY);var A=t.parent;y=A.a,x=A.b,w=A.c;var T=1/(y*(M=A.d)-x*w),b=n-A.worldX,R=r-A.worldY,I=(b*M-R*x)*T-s,S=(R*y-b*w)*T-o,C=((b=g-A.worldX)*M-(R=v-A.worldY)*x)*T-s,P=(R*y-b*w)*T-o,_=Math.sqrt(C*C+P*P),V=e.data.length*u,k=0,N=0;t:if(E){var D=(I*I+S*S-_*_-(V*=h)*V)/(2*_*V);D<-1?D=-1:1<D&&(D=1),N=Math.acos(D)*i,y=_+V*D,x=V*Math.sin(N),k=Math.atan2(S*y-I*x,I*y+S*x)}else{var L=(y=h*V)*y,Y=(x=l*V)*x,U=I*I+S*S,X=Math.atan2(S,I),F=-2*Y*_,O=Y-L;if(0<=(M=F*F-4*O*(w=Y*_*_+L*U-L*Y))){var B=Math.sqrt(M);F<0&&(B=-B);var W=(B=-(F+B)/2)/O,q=w/B,j=Math.abs(W)<Math.abs(q)?W:q;if(j*j<=U){R=Math.sqrt(U-j*j)*i,k=X-Math.atan2(R,j),N=Math.atan2(R/l,(j-_)/h);break t}}var G=nt.MathUtils.PI,z=_-y,Z=z*z,H=0,J=0,Q=_+y,K=Q*Q,$=0;-1<=(w=-y*_/(L-Y))&&w<=1&&(w=Math.acos(w),(M=(b=y*Math.cos(w)+_)*b+(R=x*Math.sin(w))*R)<Z&&(G=w,Z=M,z=b,H=R),K<M&&(J=w,K=M,Q=b,$=R)),N=U<=(Z+K)/2?(k=X-Math.atan2(H*i,z),G*i):(k=X-Math.atan2($*i,Q),J*i)}var tt=Math.atan2(m,d)*f,et=t.arotation;180<(k=(k-tt)*nt.MathUtils.radDeg+c-et)?k-=360:k<-180&&(k+=360),t.updateWorldTransformWith(s,o,et+k*a,t.ascaleX,t.ascaleY,0,0),et=e.arotation,180<(N=((N+tt)*nt.MathUtils.radDeg-e.ashearX)*f+p-et)?N-=360:N<-180&&(N+=360),e.updateWorldTransformWith(d,m,et+N*a,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)}else e.updateWorldTransform()},t}();nt.IkConstraint=t}(spine||(spine={})),function(t){var e=function(t){this.order=0,this.bones=new Array,this.bendDirection=1,this.mix=1,this.name=t};(spine||(spine={})).IkConstraintData=e}(),function(H){var t=function(){function Z(t,e){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(var n=0,r=t.bones.length;n<r;n++)this.bones.push(e.findBone(t.bones[n].name));this.target=e.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix}return Z.prototype.apply=function(){this.update()},Z.prototype.update=function(){var t=this.target.getAttachment();if(t instanceof H.PathAttachment){var e=this.rotateMix,n=this.translateMix,r=0<e;if(0<n||r){var i=this.data,a=i.spacingMode,s=a==H.SpacingMode.Length,o=i.rotateMode,h=o==H.RotateMode.Tangent,l=o==H.RotateMode.ChainScale,u=this.bones.length,c=h?u:u+1,p=this.bones,f=H.Utils.setArraySize(this.spaces,c),d=null,m=this.spacing;if(l||s){l&&(d=H.Utils.setArraySize(this.lengths,u));for(var g=0,v=c-1;g<v;){var y=(S=p[g]).data.length;if(y<Z.epsilon)l&&(d[g]=0),f[++g]=0;else{var x=y*S.a,w=y*S.c,M=Math.sqrt(x*x+w*w);l&&(d[g]=M),f[++g]=(s?y+m:m)*M/y}}}else for(g=1;g<c;g++)f[g]=m;var E=this.computeWorldPositions(t,c,h,i.positionMode==H.PositionMode.Percent,a==H.SpacingMode.Percent),A=E[0],T=E[1],b=i.offsetRotation,R=!1;if(0==b)R=o==H.RotateMode.Chain;else R=!1,b*=0<(I=this.target.bone).a*I.d-I.b*I.c?H.MathUtils.degRad:-H.MathUtils.degRad;g=0;for(var I=3;g<u;g++,I+=3){var S;(S=p[g]).worldX+=(A-S.worldX)*n,S.worldY+=(T-S.worldY)*n;var C=(x=E[I])-A,P=(w=E[I+1])-T;if(l){var _=d[g];if(0!=_){var V=(Math.sqrt(C*C+P*P)/_-1)*e+1;S.a*=V,S.c*=V}}if(A=x,T=w,r){var k=S.a,N=S.b,D=S.c,L=S.d,Y=0,U=0,X=0;if(Y=h?E[I-1]:0==f[g+1]?E[I+2]:Math.atan2(P,C),Y-=Math.atan2(D,k),R){U=Math.cos(Y),X=Math.sin(Y);var F=S.data.length;A+=(F*(U*k-X*D)-C)*e,T+=(F*(X*k+U*D)-P)*e}else Y+=b;Y>H.MathUtils.PI?Y-=H.MathUtils.PI2:Y<-H.MathUtils.PI&&(Y+=H.MathUtils.PI2),Y*=e,U=Math.cos(Y),X=Math.sin(Y),S.a=U*k-X*D,S.b=U*N-X*L,S.c=X*k+U*D,S.d=X*N+U*L}S.appliedValid=!1}}}},Z.prototype.computeWorldPositions=function(t,e,n,r,i){var a=this.target,s=this.position,o=this.spaces,h=H.Utils.setArraySize(this.positions,3*e+2),l=null,u=t.closed,c=t.worldVerticesLength,p=c/6,f=Z.NONE;if(!t.constantSpeed){var d=t.lengths,m=d[p-=u?1:2];if(r&&(s*=m),i)for(var g=0;g<e;g++)o[g]*=m;l=H.Utils.setArraySize(this.world,8);g=0;for(var v=0,y=0;g<e;g++,v+=3){var x=s+=W=o[g];if(u)(x%=m)<0&&(x+=m),y=0;else{if(x<0){f!=Z.BEFORE&&(f=Z.BEFORE,t.computeWorldVertices(a,2,4,l,0,2)),this.addBeforePosition(x,l,0,h,v);continue}if(m<x){f!=Z.AFTER&&(f=Z.AFTER,t.computeWorldVertices(a,c-6,4,l,0,2)),this.addAfterPosition(x-m,l,0,h,v);continue}}for(;;y++){var w=d[y];if(!(w<x)){if(0==y)x/=w;else x=(x-(z=d[y-1]))/(w-z);break}}y!=f&&(f=y,u&&y==p?(t.computeWorldVertices(a,c-4,4,l,0,2),t.computeWorldVertices(a,0,4,l,4,2)):t.computeWorldVertices(a,6*y+2,8,l,0,2)),this.addCurvePosition(x,l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],h,v,n||0<g&&0==W)}return h}u?(c+=2,l=H.Utils.setArraySize(this.world,c),t.computeWorldVertices(a,2,c-4,l,0,2),t.computeWorldVertices(a,0,2,l,c-4,2),l[c-2]=l[0],l[c-1]=l[1]):(p--,c-=4,l=H.Utils.setArraySize(this.world,c),t.computeWorldVertices(a,2,c,l,0,2));for(var M=H.Utils.setArraySize(this.curves,p),E=0,A=l[0],T=l[1],b=0,R=0,I=0,S=0,C=0,P=0,_=0,V=0,k=0,N=0,D=0,L=0,Y=0,U=0,X=(g=0,2);g<p;g++,X+=6)b=l[X],R=l[X+1],I=l[X+2],S=l[X+3],D=2*(_=.1875*(A-2*b+I))+(k=.09375*(3*(b-I)-A+(C=l[X+4]))),L=2*(V=.1875*(T-2*R+S))+(N=.09375*(3*(R-S)-T+(P=l[X+5]))),Y=.75*(b-A)+_+.16666667*k,U=.75*(R-T)+V+.16666667*N,E+=Math.sqrt(Y*Y+U*U),Y+=D,U+=L,D+=k,L+=N,E+=Math.sqrt(Y*Y+U*U),Y+=D,U+=L,E+=Math.sqrt(Y*Y+U*U),Y+=D+k,U+=L+N,E+=Math.sqrt(Y*Y+U*U),M[g]=E,A=C,T=P;if(r&&(s*=E),i)for(g=0;g<e;g++)o[g]*=E;for(var F=this.segments,O=0,B=(g=0,v=0,y=0,0);g<e;g++,v+=3){var W;x=s+=W=o[g];if(u)(x%=E)<0&&(x+=E),y=0;else{if(x<0){this.addBeforePosition(x,l,0,h,v);continue}if(E<x){this.addAfterPosition(x-E,l,c-4,h,v);continue}}for(;;y++){var q=M[y];if(!(q<x)){if(0==y)x/=q;else x=(x-(z=M[y-1]))/(q-z);break}}if(y!=f){var j=6*(f=y);for(A=l[j],T=l[j+1],b=l[j+2],R=l[j+3],I=l[j+4],S=l[j+5],D=2*(_=.03*(A-2*b+I))+(k=.006*(3*(b-I)-A+(C=l[j+6]))),L=2*(V=.03*(T-2*R+S))+(N=.006*(3*(R-S)-T+(P=l[j+7]))),Y=.3*(b-A)+_+.16666667*k,U=.3*(R-T)+V+.16666667*N,O=Math.sqrt(Y*Y+U*U),F[0]=O,j=1;j<8;j++)Y+=D,U+=L,D+=k,L+=N,O+=Math.sqrt(Y*Y+U*U),F[j]=O;Y+=D,U+=L,O+=Math.sqrt(Y*Y+U*U),F[8]=O,Y+=D+k,U+=L+N,O+=Math.sqrt(Y*Y+U*U),F[9]=O,B=0}for(x*=O;;B++){var G=F[B];if(!(G<x)){var z;if(0==B)x/=G;else x=B+(x-(z=F[B-1]))/(G-z);break}}this.addCurvePosition(.1*x,A,T,b,R,I,S,C,P,h,v,n||0<g&&0==W)}return h},Z.prototype.addBeforePosition=function(t,e,n,r,i){var a=e[n],s=e[n+1],o=e[n+2]-a,h=e[n+3]-s,l=Math.atan2(h,o);r[i]=a+t*Math.cos(l),r[i+1]=s+t*Math.sin(l),r[i+2]=l},Z.prototype.addAfterPosition=function(t,e,n,r,i){var a=e[n+2],s=e[n+3],o=a-e[n],h=s-e[n+1],l=Math.atan2(h,o);r[i]=a+t*Math.cos(l),r[i+1]=s+t*Math.sin(l),r[i+2]=l},Z.prototype.addCurvePosition=function(t,e,n,r,i,a,s,o,h,l,u,c){(0==t||isNaN(t))&&(t=1e-4);var p=t*t,f=p*t,d=1-t,m=d*d,g=m*d,v=d*t,y=3*v,x=d*y,w=y*t,M=e*g+r*x+a*w+o*f,E=n*g+i*x+s*w+h*f;l[u]=M,l[u+1]=E,c&&(l[u+2]=Math.atan2(E-(n*m+i*v*2+s*p),M-(e*m+r*v*2+a*p)))},Z.prototype.getOrder=function(){return this.data.order},Z.NONE=-1,Z.BEFORE=-2,Z.AFTER=-3,Z.epsilon=1e-5,Z}();H.PathConstraint=t}(spine||(spine={})),function(t){var e,n,r,i=function(t){this.order=0,this.bones=new Array,this.name=t};t.PathConstraintData=i,(e=t.PositionMode||(t.PositionMode={}))[e.Fixed=0]="Fixed",e[e.Percent=1]="Percent",(n=t.SpacingMode||(t.SpacingMode={}))[n.Length=0]="Length",n[n.Fixed=1]="Fixed",n[n.Percent=2]="Percent",(r=t.RotateMode||(t.RotateMode={}))[r.Tangent=0]="Tangent",r[r.Chain=1]="Chain",r[r.ChainScale=2]="ChainScale"}(spine||(spine={})),function(t){var i=function(){function t(t){this.toLoad=new Array,this.assets={},this.clientId=t}return t.prototype.loaded=function(){var t=0;for(var e in this.assets)t++;return t},t}(),e=function(){function t(t){void 0===t&&(t=""),this.clientAssets={},this.queuedAssets={},this.rawAssets={},this.errors={},this.pathPrefix=t}return t.prototype.queueAsset=function(t,e,n){var r=this.clientAssets[t];return null==r&&(r=new i(t),this.clientAssets[t]=r),null!==e&&(r.textureLoader=e),r.toLoad.push(n),this.queuedAssets[n]!==n&&(this.queuedAssets[n]=n,!0)},t.prototype.loadText=function(t,e){var n=this;if(e=this.pathPrefix+e,this.queueAsset(t,null,e)){var r=new XMLHttpRequest;r.onreadystatechange=function(){r.readyState==XMLHttpRequest.DONE&&(200<=r.status&&r.status<300?n.rawAssets[e]=r.responseText:n.errors[e]="Couldn't load text "+e+": status "+r.status+", "+r.responseText)},r.open("GET",e,!0),r.send()}},t.prototype.loadJson=function(t,e){var n=this;if(e=this.pathPrefix+e,this.queueAsset(t,null,e)){var r=new XMLHttpRequest;r.onreadystatechange=function(){r.readyState==XMLHttpRequest.DONE&&(200<=r.status&&r.status<300?n.rawAssets[e]=JSON.parse(r.responseText):n.errors[e]="Couldn't load text "+e+": status "+r.status+", "+r.responseText)},r.open("GET",e,!0),r.send()}},t.prototype.loadTexture=function(t,e,n){var r=this;if(n=this.pathPrefix+n,this.queueAsset(t,e,n)){var i=new Image;i.src=n,i.crossOrigin="anonymous",i.onload=function(t){r.rawAssets[n]=i},i.onerror=function(t){r.errors[n]="Couldn't load image "+n}}},t.prototype.get=function(t,e){e=this.pathPrefix+e;var n=this.clientAssets[t];return null==n||n.assets[e]},t.prototype.updateClientAssets=function(t){for(var e=0;e<t.toLoad.length;e++){var n=t.toLoad[e],r=t.assets[n];if(null==r){var i=this.rawAssets[n];if(null==i)continue;i instanceof HTMLImageElement?t.assets[n]=t.textureLoader(i):t.assets[n]=i}}},t.prototype.isLoadingComplete=function(t){var e=this.clientAssets[t];return null==e||(this.updateClientAssets(e),e.toLoad.length==e.loaded())},t.prototype.dispose=function(){},t.prototype.hasErrors=function(){return 0<Object.keys(this.errors).length},t.prototype.getErrors=function(){return this.errors},t}();t.SharedAssetManager=e}(spine||(spine={})),function(x){var t=function(){function t(t){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.flipX=!1,this.flipY=!1,this.x=0,this.y=0,null==t)throw new Error("data cannot be null.");this.data=t,this.bones=new Array;for(var e=0;e<t.bones.length;e++){var n=t.bones[e],r=void 0;if(null==n.parent)r=new x.Bone(n,this,null);else{var i=this.bones[n.parent.index];r=new x.Bone(n,this,i),i.children.push(r)}this.bones.push(r)}this.slots=new Array,this.drawOrder=new Array;for(e=0;e<t.slots.length;e++){var a=t.slots[e],s=(r=this.bones[a.boneData.index],new x.Slot(a,r));this.slots.push(s),this.drawOrder.push(s)}this.ikConstraints=new Array;for(e=0;e<t.ikConstraints.length;e++){var o=t.ikConstraints[e];this.ikConstraints.push(new x.IkConstraint(o,this))}this.transformConstraints=new Array;for(e=0;e<t.transformConstraints.length;e++){var h=t.transformConstraints[e];this.transformConstraints.push(new x.TransformConstraint(h,this))}this.pathConstraints=new Array;for(e=0;e<t.pathConstraints.length;e++){var l=t.pathConstraints[e];this.pathConstraints.push(new x.PathConstraint(l,this))}this.color=new x.Color(1,1,1,1),this.updateCache()}return t.prototype.updateCache=function(){this._updateCache.length=0,this.updateCacheReset.length=0;for(var t=this.bones,e=0,n=t.length;e<n;e++)t[e].sorted=!1;var r=this.ikConstraints,i=this.transformConstraints,a=this.pathConstraints,s=r.length,o=i.length,h=a.length,l=s+o+h;t:for(e=0;e<l;e++){for(var u=0;u<s;u++){if((c=r[u]).data.order==e){this.sortIkConstraint(c);continue t}}for(u=0;u<o;u++){if((c=i[u]).data.order==e){this.sortTransformConstraint(c);continue t}}for(u=0;u<h;u++){var c;if((c=a[u]).data.order==e){this.sortPathConstraint(c);continue t}}}for(e=0,n=t.length;e<n;e++)this.sortBone(t[e])},t.prototype.sortIkConstraint=function(t){var e=t.target;this.sortBone(e);var n=t.bones,r=n[0];if(this.sortBone(r),1<n.length){var i=n[n.length-1];-1<this._updateCache.indexOf(i)||this.updateCacheReset.push(i)}this._updateCache.push(t),this.sortReset(r.children),n[n.length-1].sorted=!0},t.prototype.sortPathConstraint=function(t){var e=t.target,n=e.data.index,r=e.bone;null!=this.skin&&this.sortPathConstraintAttachment(this.skin,n,r),null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,n,r);for(var i=0,a=this.data.skins.length;i<a;i++)this.sortPathConstraintAttachment(this.data.skins[i],n,r);var s=e.getAttachment();s instanceof x.PathAttachment&&this.sortPathConstraintAttachmentWith(s,r);var o=t.bones,h=o.length;for(i=0;i<h;i++)this.sortBone(o[i]);this._updateCache.push(t);for(i=0;i<h;i++)this.sortReset(o[i].children);for(i=0;i<h;i++)o[i].sorted=!0},t.prototype.sortTransformConstraint=function(t){this.sortBone(t.target);var e=t.bones,n=e.length;if(t.data.local)for(var r=0;r<n;r++){var i=e[r];this.sortBone(i.parent),-1<this._updateCache.indexOf(i)||this.updateCacheReset.push(i)}else for(r=0;r<n;r++)this.sortBone(e[r]);this._updateCache.push(t);for(var a=0;a<n;a++)this.sortReset(e[a].children);for(a=0;a<n;a++)e[a].sorted=!0},t.prototype.sortPathConstraintAttachment=function(t,e,n){var r=t.attachments[e];if(r)for(var i in r)this.sortPathConstraintAttachmentWith(r[i],n)},t.prototype.sortPathConstraintAttachmentWith=function(t,e){if(t instanceof x.PathAttachment){var n=t.bones;if(null==n)this.sortBone(e);else for(var r=this.bones,i=0;i<n.length;)for(var a=n[i++],s=i+a;i<s;i++){var o=n[i];this.sortBone(r[o])}}},t.prototype.sortBone=function(t){if(!t.sorted){var e=t.parent;null!=e&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}},t.prototype.sortReset=function(t){for(var e=0,n=t.length;e<n;e++){var r=t[e];r.sorted&&this.sortReset(r.children),r.sorted=!1}},t.prototype.updateWorldTransform=function(){for(var t=this.updateCacheReset,e=0,n=t.length;e<n;e++){var r=t[e];r.ax=r.x,r.ay=r.y,r.arotation=r.rotation,r.ascaleX=r.scaleX,r.ascaleY=r.scaleY,r.ashearX=r.shearX,r.ashearY=r.shearY,r.appliedValid=!0}var i=this._updateCache;for(e=0,n=i.length;e<n;e++)i[e].update()},t.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},t.prototype.setBonesToSetupPose=function(){for(var t=this.bones,e=0,n=t.length;e<n;e++)t[e].setToSetupPose();var r=this.ikConstraints;for(e=0,n=r.length;e<n;e++){(o=r[e]).bendDirection=o.data.bendDirection,o.mix=o.data.mix}var i=this.transformConstraints;for(e=0,n=i.length;e<n;e++){var a=(o=i[e]).data;o.rotateMix=a.rotateMix,o.translateMix=a.translateMix,o.scaleMix=a.scaleMix,o.shearMix=a.shearMix}var s=this.pathConstraints;for(e=0,n=s.length;e<n;e++){var o;a=(o=s[e]).data;o.position=a.position,o.spacing=a.spacing,o.rotateMix=a.rotateMix,o.translateMix=a.translateMix}},t.prototype.setSlotsToSetupPose=function(){var t=this.slots;x.Utils.arrayCopy(t,0,this.drawOrder,0,t.length);for(var e=0,n=t.length;e<n;e++)t[e].setToSetupPose()},t.prototype.getRootBone=function(){return 0==this.bones.length?null:this.bones[0]},t.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,r=e.length;n<r;n++){var i=e[n];if(i.data.name==t)return i}return null},t.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,r=e.length;n<r;n++)if(e[n].data.name==t)return n;return-1},t.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,r=e.length;n<r;n++){var i=e[n];if(i.data.name==t)return i}return null},t.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,r=e.length;n<r;n++)if(e[n].data.name==t)return n;return-1},t.prototype.setSkinByName=function(t){var e=this.data.findSkin(t);if(null==e)throw new Error("Skin not found: "+t);this.setSkin(e)},t.prototype.setSkin=function(t){if(null!=t)if(null!=this.skin)t.attachAll(this,this.skin);else for(var e=this.slots,n=0,r=e.length;n<r;n++){var i=e[n],a=i.data.attachmentName;if(null!=a){var s=t.getAttachment(n,a);null!=s&&i.setAttachment(s)}}this.skin=t},t.prototype.getAttachmentByName=function(t,e){return this.getAttachment(this.data.findSlotIndex(t),e)},t.prototype.getAttachment=function(t,e){if(null==e)throw new Error("attachmentName cannot be null.");if(null!=this.skin){var n=this.skin.getAttachment(t,e);if(null!=n)return n}return null!=this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null},t.prototype.setAttachment=function(t,e){if(null==t)throw new Error("slotName cannot be null.");for(var n=this.slots,r=0,i=n.length;r<i;r++){var a=n[r];if(a.data.name==t){var s=null;if(null!=e&&null==(s=this.getAttachment(r,e)))throw new Error("Attachment not found: "+e+", for slot: "+t);return void a.setAttachment(s)}}throw new Error("Slot not found: "+t)},t.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,n=0,r=e.length;n<r;n++){var i=e[n];if(i.data.name==t)return i}return null},t.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,n=0,r=e.length;n<r;n++){var i=e[n];if(i.data.name==t)return i}return null},t.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,n=0,r=e.length;n<r;n++){var i=e[n];if(i.data.name==t)return i}return null},t.prototype.getBounds=function(t,e,n){if(null==t)throw new Error("offset cannot be null.");if(null==e)throw new Error("size cannot be null.");for(var r=this.drawOrder,i=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY,h=0,l=r.length;h<l;h++){var u=r[h],c=0,p=null,f=u.getAttachment();if(f instanceof x.RegionAttachment)c=8,p=x.Utils.setArraySize(n,c,0),f.computeWorldVertices(u.bone,p,0,2);else if(f instanceof x.MeshAttachment){var d=f;c=d.worldVerticesLength,p=x.Utils.setArraySize(n,c,0),d.computeWorldVertices(u,0,c,p,0,2)}if(null!=p)for(var m=0,g=p.length;m<g;m+=2){var v=p[m],y=p[m+1];i=Math.min(i,v),a=Math.min(a,y),s=Math.max(s,v),o=Math.max(o,y)}}t.set(i,a),e.set(s-i,o-a)},t.prototype.update=function(t){this.time+=t},t}();x.Skeleton=t}(spine||(spine={})),function(p){var t=function(){function t(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new p.Pool(function(){return p.Utils.newFloatArray(16)})}return t.prototype.update=function(t,e){if(null==t)throw new Error("skeleton cannot be null.");var n=this.boundingBoxes,r=this.polygons,i=this.polygonPool,a=t.slots,s=a.length;n.length=0,i.freeAll(r);for(var o=r.length=0;o<s;o++){var h=a[o],l=h.getAttachment();if(l instanceof p.BoundingBoxAttachment){var u=l;n.push(u);var c=i.obtain();c.length!=u.worldVerticesLength&&(c=p.Utils.newFloatArray(u.worldVerticesLength)),r.push(c),u.computeWorldVertices(h,0,u.worldVerticesLength,c,0,2)}}e?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},t.prototype.aabbCompute=function(){for(var t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,r=Number.NEGATIVE_INFINITY,i=this.polygons,a=0,s=i.length;a<s;a++)for(var o=i[a],h=o,l=0,u=o.length;l<u;l+=2){var c=h[l],p=h[l+1];t=Math.min(t,c),e=Math.min(e,p),n=Math.max(n,c),r=Math.max(r,p)}this.minX=t,this.minY=e,this.maxX=n,this.maxY=r},t.prototype.aabbContainsPoint=function(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY},t.prototype.aabbIntersectsSegment=function(t,e,n,r){var i=this.minX,a=this.minY,s=this.maxX,o=this.maxY;if(t<=i&&n<=i||e<=a&&r<=a||s<=t&&s<=n||o<=e&&o<=r)return!1;var h=(r-e)/(n-t),l=h*(i-t)+e;if(a<l&&l<o)return!0;if(a<(l=h*(s-t)+e)&&l<o)return!0;var u=(a-e)/h+t;return i<u&&u<s||i<(u=(o-e)/h+t)&&u<s},t.prototype.aabbIntersectsSkeleton=function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},t.prototype.containsPoint=function(t,e){for(var n=this.polygons,r=0,i=n.length;r<i;r++)if(this.containsPointPolygon(n[r],t,e))return this.boundingBoxes[r];return null},t.prototype.containsPointPolygon=function(t,e,n){for(var r=t,i=t.length,a=i-2,s=!1,o=0;o<i;o+=2){var h=r[o+1],l=r[a+1];if(h<n&&n<=l||l<n&&n<=h){var u=r[o];u+(n-h)/(l-h)*(r[a]-u)<e&&(s=!s)}a=o}return s},t.prototype.intersectsSegment=function(t,e,n,r){for(var i=this.polygons,a=0,s=i.length;a<s;a++)if(this.intersectsSegmentPolygon(i[a],t,e,n,r))return this.boundingBoxes[a];return null},t.prototype.intersectsSegmentPolygon=function(t,e,n,r,i){for(var a=t,s=t.length,o=e-r,h=n-i,l=e*i-n*r,u=a[s-2],c=a[s-1],p=0;p<s;p+=2){var f=a[p],d=a[p+1],m=u*d-c*f,g=u-f,v=c-d,y=o*v-h*g,x=(l*g-o*m)/y;if((u<=x&&x<=f||f<=x&&x<=u)&&(e<=x&&x<=r||r<=x&&x<=e)){var w=(l*v-h*m)/y;if((c<=w&&w<=d||d<=w&&w<=c)&&(n<=w&&w<=i||i<=w&&w<=n))return!0}u=f,c=d}return!1},t.prototype.getPolygon=function(t){if(null==t)throw new Error("boundingBox cannot be null.");var e=this.boundingBoxes.indexOf(t);return-1==e?null:this.polygons[e]},t.prototype.getWidth=function(){return this.maxX-this.minX},t.prototype.getHeight=function(){return this.maxY-this.minY},t}();p.SkeletonBounds=t}(spine||(spine={})),function(H){var t=function(){function l(){this.triangulator=new H.Triangulator,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array}return l.prototype.clipStart=function(t,e){if(null!=this.clipAttachment)return 0;var n=(this.clipAttachment=e).worldVerticesLength,r=H.Utils.setArraySize(this.clippingPolygon,n);e.computeWorldVertices(t,0,n,r,0,2);var i=this.clippingPolygon;l.makeClockwise(i);for(var a=this.clippingPolygons=this.triangulator.decompose(i,this.triangulator.triangulate(i)),s=0,o=a.length;s<o;s++){var h=a[s];l.makeClockwise(h),h.push(h[0]),h.push(h[1])}return a.length},l.prototype.clipEndWithSlot=function(t){null!=this.clipAttachment&&this.clipAttachment.endSlot==t.data&&this.clipEnd()},l.prototype.clipEnd=function(){null!=this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)},l.prototype.isClipping=function(){return null!=this.clipAttachment},l.prototype.clipTriangles=function(t,e,n,r,i,a,s,o){var h=this.clipOutput,l=this.clippedVertices,u=this.clippedTriangles,c=this.clippingPolygons,p=this.clippingPolygons.length,f=o?12:8,d=0;l.length=0;t:for(var m=u.length=0;m<r;m+=3)for(var g=n[m]<<1,v=t[g],y=t[g+1],x=i[g],w=i[g+1],M=t[g=n[m+1]<<1],E=t[g+1],A=i[g],T=i[g+1],b=t[g=n[m+2]<<1],R=t[g+1],I=i[g],S=i[g+1],C=0;C<p;C++){var P=l.length;if(!this.clip(v,y,M,E,b,R,c[C],h)){(X=H.Utils.setArraySize(l,P+3*f))[P]=v,X[P+1]=y,X[P+2]=a.r,X[P+3]=a.g,X[P+4]=a.b,X[P+5]=a.a,o?(X[P+6]=x,X[P+7]=w,X[P+8]=s.r,X[P+9]=s.g,X[P+10]=s.b,X[P+11]=s.a,X[P+12]=M,X[P+13]=E,X[P+14]=a.r,X[P+15]=a.g,X[P+16]=a.b,X[P+17]=a.a,X[P+18]=A,X[P+19]=T,X[P+20]=s.r,X[P+21]=s.g,X[P+22]=s.b,X[P+23]=s.a,X[P+24]=b,X[P+25]=R,X[P+26]=a.r,X[P+27]=a.g,X[P+28]=a.b,X[P+29]=a.a,X[P+30]=I,X[P+31]=S,X[P+32]=s.r,X[P+33]=s.g,X[P+34]=s.b,X[P+35]=s.a):(X[P+6]=x,X[P+7]=w,X[P+8]=M,X[P+9]=E,X[P+10]=a.r,X[P+11]=a.g,X[P+12]=a.b,X[P+13]=a.a,X[P+14]=A,X[P+15]=T,X[P+16]=b,X[P+17]=R,X[P+18]=a.r,X[P+19]=a.g,X[P+20]=a.b,X[P+21]=a.a,X[P+22]=I,X[P+23]=S),P=u.length,(Z=H.Utils.setArraySize(u,P+3))[P]=d,Z[P+1]=d+1,Z[P+2]=d+2,d+=3;continue t}var _=h.length;if(0!=_){for(var V=E-R,k=b-M,N=v-b,D=R-y,L=1/(V*N+k*(y-R)),Y=_>>1,U=this.clipOutput,X=H.Utils.setArraySize(l,P+Y*f),F=0;F<_;F+=2){var O=U[F],B=U[F+1];X[P]=O,X[P+1]=B,X[P+2]=a.r,X[P+3]=a.g,X[P+4]=a.b,X[P+5]=a.a;var W=O-b,q=B-R,j=(V*W+k*q)*L,G=(D*W+N*q)*L,z=1-j-G;X[P+6]=x*j+A*G+I*z,X[P+7]=w*j+T*G+S*z,o&&(X[P+8]=s.r,X[P+9]=s.g,X[P+10]=s.b,X[P+11]=s.a),P+=f}P=u.length;var Z=H.Utils.setArraySize(u,P+3*(Y-2));Y--;for(F=1;F<Y;F++)Z[P]=d,Z[P+1]=d+F,Z[P+2]=d+F+1,P+=3;d+=Y+1}}},l.prototype.clip=function(t,e,n,r,i,a,s,o){var h=o,l=!1,u=null;2<=s.length%4?(u=o,o=this.scratch):u=this.scratch,u.length=0,u.push(t),u.push(e),u.push(n),u.push(r),u.push(i),u.push(a),u.push(t),u.push(e),o.length=0;for(var c=s,p=s.length-4,f=0;;f+=2){for(var d=c[f],m=c[f+1],g=c[f+2],v=c[f+3],y=d-g,x=m-v,w=u,M=u.length-2,E=o.length,A=0;A<M;A+=2){var T=w[A],b=w[A+1],R=w[A+2],I=w[A+3],S=0<y*(I-v)-x*(R-g);if(0<y*(b-v)-x*(T-g)){if(S){o.push(R),o.push(I);continue}var C=((_=R-T)*(m-b)-(P=I-b)*(d-T))/(P*(g-d)-_*(v-m));o.push(d+(g-d)*C),o.push(m+(v-m)*C)}else if(S){var P,_;C=((_=R-T)*(m-b)-(P=I-b)*(d-T))/(P*(g-d)-_*(v-m));o.push(d+(g-d)*C),o.push(m+(v-m)*C),o.push(R),o.push(I)}l=!0}if(E==o.length)return!(h.length=0);if(o.push(o[0]),o.push(o[1]),f==p)break;var V=o;(o=u).length=0,u=V}if(h!=o){f=h.length=0;for(var k=o.length-2;f<k;f++)h[f]=o[f]}else h.length=h.length-2;return l},l.makeClockwise=function(t){for(var e=t,n=t.length,r=e[n-2]*e[1]-e[0]*e[n-1],i=0,a=0,s=0,o=0,h=n-3;o<h;o+=2)i=e[o],a=e[o+1],s=e[o+2],r+=i*e[o+3]-s*a;if(!(r<0)){o=0;var l=n-2;for(h=n>>1;o<h;o+=2){var u=e[o],c=e[o+1],p=l-o;e[o]=e[p],e[o+1]=e[p+1],e[p]=u,e[p+1]=c}}},l}();H.SkeletonClipping=t}(spine||(spine={})),function(t){var e=function(){function t(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}return t.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name==t)return i}return null},t.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,r=e.length;n<r;n++)if(e[n].name==t)return n;return-1},t.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name==t)return i}return null},t.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,r=e.length;n<r;n++)if(e[n].name==t)return n;return-1},t.prototype.findSkin=function(t){if(null==t)throw new Error("skinName cannot be null.");for(var e=this.skins,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name==t)return i}return null},t.prototype.findEvent=function(t){if(null==t)throw new Error("eventDataName cannot be null.");for(var e=this.events,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name==t)return i}return null},t.prototype.findAnimation=function(t){if(null==t)throw new Error("animationName cannot be null.");for(var e=this.animations,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name==t)return i}return null},t.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name==t)return i}return null},t.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name==t)return i}return null},t.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name==t)return i}return null},t.prototype.findPathConstraintIndex=function(t){if(null==t)throw new Error("pathConstraintName cannot be null.");for(var e=this.pathConstraints,n=0,r=e.length;n<r;n++)if(e[n].name==t)return n;return-1},t}();t.SkeletonData=e}(spine||(spine={})),function($){var t=function(){function k(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return k.prototype.readSkeletonData=function(t){var e=this.scale,n=new $.SkeletonData,r="string"==typeof t?JSON.parse(t):t,i=r.skeleton;if(null!=i&&(n.hash=i.hash,n.version=i.spine,n.width=i.width,n.height=i.height,n.fps=i.fps,n.imagesPath=i.images),r.bones)for(var a=0;a<r.bones.length;a++){var s=r.bones[a],o=null,h=this.getValue(s,"parent",null);if(null!=h&&null==(o=n.findBone(h)))throw new Error("Parent bone not found: "+h);(p=new $.BoneData(n.bones.length,s.name,o)).length=this.getValue(s,"length",0)*e,p.x=this.getValue(s,"x",0)*e,p.y=this.getValue(s,"y",0)*e,p.rotation=this.getValue(s,"rotation",0),p.scaleX=this.getValue(s,"scaleX",1),p.scaleY=this.getValue(s,"scaleY",1),p.shearX=this.getValue(s,"shearX",0),p.shearY=this.getValue(s,"shearY",0),p.transformMode=k.transformModeFromString(this.getValue(s,"transform","normal")),n.bones.push(p)}if(r.slots)for(a=0;a<r.slots.length;a++){var l=(A=r.slots[a]).name,u=A.bone,c=n.findBone(u);if(null==c)throw new Error("Slot bone not found: "+u);var p=new $.SlotData(n.slots.length,l,c),f=this.getValue(A,"color",null);null!=f&&p.color.setFromString(f);var d=this.getValue(A,"dark",null);null!=d&&(p.darkColor=new $.Color(1,1,1,1),p.darkColor.setFromString(d)),p.attachmentName=this.getValue(A,"attachment",null),p.blendMode=k.blendModeFromString(this.getValue(A,"blend","normal")),n.slots.push(p)}if(r.ik)for(a=0;a<r.ik.length;a++){var m=r.ik[a];(p=new $.IkConstraintData(m.name)).order=this.getValue(m,"order",0);for(var g=0;g<m.bones.length;g++){u=m.bones[g];if(null==(y=n.findBone(u)))throw new Error("IK bone not found: "+u);p.bones.push(y)}var v=m.target;if(p.target=n.findBone(v),null==p.target)throw new Error("IK target bone not found: "+v);p.bendDirection=this.getValue(m,"bendPositive",!0)?1:-1,p.mix=this.getValue(m,"mix",1),n.ikConstraints.push(p)}if(r.transform)for(a=0;a<r.transform.length;a++){m=r.transform[a];(p=new $.TransformConstraintData(m.name)).order=this.getValue(m,"order",0);for(g=0;g<m.bones.length;g++){u=m.bones[g];if(null==(y=n.findBone(u)))throw new Error("Transform constraint bone not found: "+u);p.bones.push(y)}v=m.target;if(p.target=n.findBone(v),null==p.target)throw new Error("Transform constraint target bone not found: "+v);p.local=this.getValue(m,"local",!1),p.relative=this.getValue(m,"relative",!1),p.offsetRotation=this.getValue(m,"rotation",0),p.offsetX=this.getValue(m,"x",0)*e,p.offsetY=this.getValue(m,"y",0)*e,p.offsetScaleX=this.getValue(m,"scaleX",0),p.offsetScaleY=this.getValue(m,"scaleY",0),p.offsetShearY=this.getValue(m,"shearY",0),p.rotateMix=this.getValue(m,"rotateMix",1),p.translateMix=this.getValue(m,"translateMix",1),p.scaleMix=this.getValue(m,"scaleMix",1),p.shearMix=this.getValue(m,"shearMix",1),n.transformConstraints.push(p)}if(r.path)for(a=0;a<r.path.length;a++){m=r.path[a];(p=new $.PathConstraintData(m.name)).order=this.getValue(m,"order",0);for(g=0;g<m.bones.length;g++){var y;u=m.bones[g];if(null==(y=n.findBone(u)))throw new Error("Transform constraint bone not found: "+u);p.bones.push(y)}v=m.target;if(p.target=n.findSlot(v),null==p.target)throw new Error("Path target slot not found: "+v);p.positionMode=k.positionModeFromString(this.getValue(m,"positionMode","percent")),p.spacingMode=k.spacingModeFromString(this.getValue(m,"spacingMode","length")),p.rotateMode=k.rotateModeFromString(this.getValue(m,"rotateMode","tangent")),p.offsetRotation=this.getValue(m,"rotation",0),p.position=this.getValue(m,"position",0),p.positionMode==$.PositionMode.Fixed&&(p.position*=e),p.spacing=this.getValue(m,"spacing",0),p.spacingMode!=$.SpacingMode.Length&&p.spacingMode!=$.SpacingMode.Fixed||(p.spacing*=e),p.rotateMix=this.getValue(m,"rotateMix",1),p.translateMix=this.getValue(m,"translateMix",1),n.pathConstraints.push(p)}if(r.skins)for(var x in r.skins){var w=r.skins[x],M=new $.Skin(x);for(var l in w){var E=n.findSlotIndex(l);if(-1==E)throw new Error("Slot not found: "+l);var A=w[l];for(var T in A){var b=this.readAttachment(A[T],M,E,T,n);null!=b&&M.addAttachment(E,T,b)}}n.skins.push(M),"default"==M.name&&(n.defaultSkin=M)}a=0;for(var R=this.linkedMeshes.length;a<R;a++){var I=this.linkedMeshes[a];if(null==(M=null==I.skin?n.defaultSkin:n.findSkin(I.skin)))throw new Error("Skin not found: "+I.skin);var S=M.getAttachment(I.slotIndex,I.parent);if(null==S)throw new Error("Parent mesh not found: "+I.parent);I.mesh.setParentMesh(S),I.mesh.updateUVs()}if(this.linkedMeshes.length=0,r.events)for(var C in r.events){var P=r.events[C];(p=new $.EventData(C)).intValue=this.getValue(P,"int",0),p.floatValue=this.getValue(P,"float",0),p.stringValue=this.getValue(P,"string",""),n.events.push(p)}if(r.animations)for(var _ in r.animations){var V=r.animations[_];this.readAnimation(V,_,n)}return n},k.prototype.readAttachment=function(t,e,n,r,i){var a=this.scale;switch(r=this.getValue(t,"name",r),this.getValue(t,"type","region")){case"region":var s=this.getValue(t,"path",r),o=this.attachmentLoader.newRegionAttachment(e,r,s);return null==o?null:(o.path=s,o.x=this.getValue(t,"x",0)*a,o.y=this.getValue(t,"y",0)*a,o.scaleX=this.getValue(t,"scaleX",1),o.scaleY=this.getValue(t,"scaleY",1),o.rotation=this.getValue(t,"rotation",0),o.width=t.width*a,o.height=t.height*a,null!=(x=this.getValue(t,"color",null))&&o.color.setFromString(x),o.updateOffset(),o);case"boundingbox":var h=this.attachmentLoader.newBoundingBoxAttachment(e,r);return null==h?null:(this.readVertices(t,h,t.vertexCount<<1),null!=(x=this.getValue(t,"color",null))&&h.color.setFromString(x),h);case"mesh":case"linkedmesh":s=this.getValue(t,"path",r);var l=this.attachmentLoader.newMeshAttachment(e,r,s);if(null==l)return null;l.path=s,null!=(x=this.getValue(t,"color",null))&&l.color.setFromString(x);var u=this.getValue(t,"parent",null);if(null!=u)return l.inheritDeform=this.getValue(t,"deform",!0),this.linkedMeshes.push(new w(l,this.getValue(t,"skin",null),n,u)),l;var c=t.uvs;return this.readVertices(t,l,c.length),l.triangles=t.triangles,l.regionUVs=c,l.updateUVs(),l.hullLength=2*this.getValue(t,"hull",0),l;case"path":if(null==(s=this.attachmentLoader.newPathAttachment(e,r)))return null;s.closed=this.getValue(t,"closed",!1),s.constantSpeed=this.getValue(t,"constantSpeed",!0);var p=t.vertexCount;this.readVertices(t,s,p<<1);for(var f=$.Utils.newArray(p/3,0),d=0;d<t.lengths.length;d++)f[d]=t.lengths[d]*a;return s.lengths=f,null!=(x=this.getValue(t,"color",null))&&s.color.setFromString(x),s;case"point":var m=this.attachmentLoader.newPointAttachment(e,r);return null==m?null:(m.x=this.getValue(t,"x",0)*a,m.y=this.getValue(t,"y",0)*a,m.rotation=this.getValue(t,"rotation",0),null!=(x=this.getValue(t,"color",null))&&m.color.setFromString(x),m);case"clipping":var g=this.attachmentLoader.newClippingAttachment(e,r);if(null==g)return null;var v=this.getValue(t,"end",null);if(null!=v){var y=i.findSlot(v);if(null==y)throw new Error("Clipping end slot not found: "+v);g.endSlot=y}var x;p=t.vertexCount;return this.readVertices(t,g,p<<1),null!=(x=this.getValue(t,"color",null))&&g.color.setFromString(x),g}return null},k.prototype.readVertices=function(t,e,n){var r=this.scale;e.worldVerticesLength=n;var i=t.vertices;if(n!=i.length){var a=new Array,s=new Array;for(u=0,c=i.length;u<c;){var o=i[u++];s.push(o);for(var h=u+4*o;u<h;u+=4)s.push(i[u]),a.push(i[u+1]*r),a.push(i[u+2]*r),a.push(i[u+3])}e.bones=s,e.vertices=$.Utils.toFloatArray(a)}else{var l=$.Utils.toFloatArray(i);if(1!=r)for(var u=0,c=i.length;u<c;u++)l[u]*=r;e.vertices=l}},k.prototype.readAnimation=function(t,e,n){var r=this.scale,i=new Array,a=0;if(t.slots)for(var s in t.slots){var o=t.slots[s];if(-1==(Z=n.findSlotIndex(s)))throw new Error("Slot not found: "+s);for(var h in o){var l=o[h];if("attachment"==h){(x=new $.AttachmentTimeline(l.length)).slotIndex=Z;for(var u=0,c=0;c<l.length;c++){var p=l[c];x.setFrame(u++,p.time,p.name)}i.push(x),a=Math.max(a,x.frames[x.getFrameCount()-1])}else if("color"==h){(x=new $.ColorTimeline(l.length)).slotIndex=Z;for(u=0,c=0;c<l.length;c++){p=l[c];var f=new $.Color;f.setFromString(p.color),x.setFrame(u,p.time,f.r,f.g,f.b,f.a),this.readCurve(p,x,u),u++}i.push(x),a=Math.max(a,x.frames[(x.getFrameCount()-1)*$.ColorTimeline.ENTRIES])}else{if("twoColor"!=h)throw new Error("Invalid timeline type for a slot: "+h+" ("+s+")");(x=new $.TwoColorTimeline(l.length)).slotIndex=Z;for(u=0,c=0;c<l.length;c++){p=l[c];var d=new $.Color,m=new $.Color;d.setFromString(p.light),m.setFromString(p.dark),x.setFrame(u,p.time,d.r,d.g,d.b,d.a,m.r,m.g,m.b),this.readCurve(p,x,u),u++}i.push(x),a=Math.max(a,x.frames[(x.getFrameCount()-1)*$.TwoColorTimeline.ENTRIES])}}}if(t.bones)for(var g in t.bones){var v=t.bones[g],y=n.findBoneIndex(g);if(-1==y)throw new Error("Bone not found: "+g);for(var h in v){l=v[h];if("rotate"===h){(x=new $.RotateTimeline(l.length)).boneIndex=y;for(u=0,c=0;c<l.length;c++){p=l[c];x.setFrame(u,p.time,p.angle),this.readCurve(p,x,u),u++}i.push(x),a=Math.max(a,x.frames[(x.getFrameCount()-1)*$.RotateTimeline.ENTRIES])}else{if("translate"!==h&&"scale"!==h&&"shear"!==h)throw new Error("Invalid timeline type for a bone: "+h+" ("+g+")");var x=null,w=1;"scale"===h?x=new $.ScaleTimeline(l.length):"shear"===h?x=new $.ShearTimeline(l.length):(x=new $.TranslateTimeline(l.length),w=r),x.boneIndex=y;for(u=0,c=0;c<l.length;c++){p=l[c];var M=this.getValue(p,"x",0),E=this.getValue(p,"y",0);x.setFrame(u,p.time,M*w,E*w),this.readCurve(p,x,u),u++}i.push(x),a=Math.max(a,x.frames[(x.getFrameCount()-1)*$.TranslateTimeline.ENTRIES])}}}if(t.ik)for(var A in t.ik){var T=t.ik[A],b=n.findIkConstraint(A);(x=new $.IkConstraintTimeline(T.length)).ikConstraintIndex=n.ikConstraints.indexOf(b);for(u=0,c=0;c<T.length;c++){p=T[c];x.setFrame(u,p.time,this.getValue(p,"mix",1),this.getValue(p,"bendPositive",!0)?1:-1),this.readCurve(p,x,u),u++}i.push(x),a=Math.max(a,x.frames[(x.getFrameCount()-1)*$.IkConstraintTimeline.ENTRIES])}if(t.transform)for(var A in t.transform){T=t.transform[A],b=n.findTransformConstraint(A);(x=new $.TransformConstraintTimeline(T.length)).transformConstraintIndex=n.transformConstraints.indexOf(b);for(u=0,c=0;c<T.length;c++){p=T[c];x.setFrame(u,p.time,this.getValue(p,"rotateMix",1),this.getValue(p,"translateMix",1),this.getValue(p,"scaleMix",1),this.getValue(p,"shearMix",1)),this.readCurve(p,x,u),u++}i.push(x),a=Math.max(a,x.frames[(x.getFrameCount()-1)*$.TransformConstraintTimeline.ENTRIES])}if(t.paths)for(var A in t.paths){T=t.paths[A];var R=n.findPathConstraintIndex(A);if(-1==R)throw new Error("Path constraint not found: "+A);var I=n.pathConstraints[R];for(var h in T){l=T[h];if("position"===h||"spacing"===h){x=null,w=1;"spacing"===h?(x=new $.PathConstraintSpacingTimeline(l.length),I.spacingMode!=$.SpacingMode.Length&&I.spacingMode!=$.SpacingMode.Fixed||(w=r)):(x=new $.PathConstraintPositionTimeline(l.length),I.positionMode==$.PositionMode.Fixed&&(w=r)),x.pathConstraintIndex=R;for(u=0,c=0;c<l.length;c++){p=l[c];x.setFrame(u,p.time,this.getValue(p,h,0)*w),this.readCurve(p,x,u),u++}i.push(x),a=Math.max(a,x.frames[(x.getFrameCount()-1)*$.PathConstraintPositionTimeline.ENTRIES])}else if("mix"===h){(x=new $.PathConstraintMixTimeline(l.length)).pathConstraintIndex=R;for(u=0,c=0;c<l.length;c++){p=l[c];x.setFrame(u,p.time,this.getValue(p,"rotateMix",1),this.getValue(p,"translateMix",1)),this.readCurve(p,x,u),u++}i.push(x),a=Math.max(a,x.frames[(x.getFrameCount()-1)*$.PathConstraintMixTimeline.ENTRIES])}}}if(t.deform)for(var S in t.deform){var C=t.deform[S],P=n.findSkin(S);if(null==P)throw new Error("Skin not found: "+S);for(var s in C){o=C[s];if(-1==(Z=n.findSlotIndex(s)))throw new Error("Slot not found: "+o.name);for(var h in o){l=o[h];var _=P.getAttachment(Z,h);if(null==_)throw new Error("Deform attachment not found: "+l.name);var V=null!=_.bones,k=_.vertices,N=V?k.length/3*2:k.length;(x=new $.DeformTimeline(l.length)).slotIndex=Z,x.attachment=_;u=0;for(var D=0;D<l.length;D++){p=l[D];var L=void 0,Y=this.getValue(p,"vertices",null);if(null==Y)L=V?$.Utils.newFloatArray(N):k;else{L=$.Utils.newFloatArray(N);var U=this.getValue(p,"offset",0);if($.Utils.arrayCopy(Y,0,L,U,Y.length),1!=r)for(var X=(c=U)+Y.length;c<X;c++)L[c]*=r;if(!V)for(c=0;c<N;c++)L[c]+=k[c]}x.setFrame(u,p.time,L),this.readCurve(p,x,u),u++}i.push(x),a=Math.max(a,x.frames[x.getFrameCount()-1])}}}var F=t.drawOrder;if(null==F&&(F=t.draworder),null!=F){x=new $.DrawOrderTimeline(F.length);var O=n.slots.length;for(u=0,D=0;D<F.length;D++){var B=F[D],W=null,q=this.getValue(B,"offsets",null);if(null!=q){W=$.Utils.newArray(O,-1);var j=$.Utils.newArray(O-q.length,0),G=0,z=0;for(c=0;c<q.length;c++){var Z,H=q[c];if(-1==(Z=n.findSlotIndex(H.slot)))throw new Error("Slot not found: "+H.slot);for(;G!=Z;)j[z++]=G++;W[G+H.offset]=G++}for(;G<O;)j[z++]=G++;for(c=O-1;0<=c;c--)-1==W[c]&&(W[c]=j[--z])}x.setFrame(u++,B.time,W)}i.push(x),a=Math.max(a,x.frames[x.getFrameCount()-1])}if(t.events){for(x=new $.EventTimeline(t.events.length),u=0,c=0;c<t.events.length;c++){var J=t.events[c],Q=n.findEvent(J.name);if(null==Q)throw new Error("Event not found: "+J.name);var K=new $.Event($.Utils.toSinglePrecision(J.time),Q);K.intValue=this.getValue(J,"int",Q.intValue),K.floatValue=this.getValue(J,"float",Q.floatValue),K.stringValue=this.getValue(J,"string",Q.stringValue),x.setFrame(u++,K)}i.push(x),a=Math.max(a,x.frames[x.getFrameCount()-1])}if(isNaN(a))throw new Error("Error while parsing animation, duration is NaN");n.animations.push(new $.Animation(e,i,a))},k.prototype.readCurve=function(t,e,n){if(t.curve)if("stepped"===t.curve)e.setStepped(n);else if("[object Array]"===Object.prototype.toString.call(t.curve)){var r=t.curve;e.setCurve(n,r[0],r[1],r[2],r[3])}},k.prototype.getValue=function(t,e,n){return void 0!==t[e]?t[e]:n},k.blendModeFromString=function(t){if("normal"==(t=t.toLowerCase()))return $.BlendMode.Normal;if("additive"==t)return $.BlendMode.Additive;if("multiply"==t)return $.BlendMode.Multiply;if("screen"==t)return $.BlendMode.Screen;throw new Error("Unknown blend mode: "+t)},k.positionModeFromString=function(t){if("fixed"==(t=t.toLowerCase()))return $.PositionMode.Fixed;if("percent"==t)return $.PositionMode.Percent;throw new Error("Unknown position mode: "+t)},k.spacingModeFromString=function(t){if("length"==(t=t.toLowerCase()))return $.SpacingMode.Length;if("fixed"==t)return $.SpacingMode.Fixed;if("percent"==t)return $.SpacingMode.Percent;throw new Error("Unknown position mode: "+t)},k.rotateModeFromString=function(t){if("tangent"==(t=t.toLowerCase()))return $.RotateMode.Tangent;if("chain"==t)return $.RotateMode.Chain;if("chainscale"==t)return $.RotateMode.ChainScale;throw new Error("Unknown rotate mode: "+t)},k.transformModeFromString=function(t){if("normal"==(t=t.toLowerCase()))return $.TransformMode.Normal;if("onlytranslation"==t)return $.TransformMode.OnlyTranslation;if("norotationorreflection"==t)return $.TransformMode.NoRotationOrReflection;if("noscale"==t)return $.TransformMode.NoScale;if("noscaleorreflection"==t)return $.TransformMode.NoScaleOrReflection;throw new Error("Unknown transform mode: "+t)},k}();$.SkeletonJson=t;var w=function(t,e,n,r){this.mesh=t,this.skin=e,this.slotIndex=n,this.parent=r}}(spine||(spine={})),function(t){var e=function(){function t(t){if(this.attachments=new Array,null==t)throw new Error("name cannot be null.");this.name=t}return t.prototype.addAttachment=function(t,e,n){if(null==n)throw new Error("attachment cannot be null.");var r=this.attachments;t>=r.length&&(r.length=t+1),r[t]||(r[t]={}),r[t][e]=n},t.prototype.getAttachment=function(t,e){var n=this.attachments[t];return n?n[e]:null},t.prototype.attachAll=function(t,e){for(var n=0,r=0;r<t.slots.length;r++){var i=t.slots[r],a=i.getAttachment();if(a&&n<e.attachments.length){var s=e.attachments[n];for(var o in s){if(a==s[o]){var h=this.getAttachment(n,o);null!=h&&i.setAttachment(h);break}}}n++}},t}();t.Skin=e}(spine||(spine={})),function(n){var t=function(){function t(t,e){if(this.attachmentVertices=new Array,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("bone cannot be null.");this.data=t,this.bone=e,this.color=new n.Color,this.darkColor=null==t.darkColor?null:new n.Color,this.setToSetupPose()}return t.prototype.getAttachment=function(){return this.attachment},t.prototype.setAttachment=function(t){this.attachment!=t&&(this.attachment=t,this.attachmentTime=this.bone.skeleton.time,this.attachmentVertices.length=0)},t.prototype.setAttachmentTime=function(t){this.attachmentTime=this.bone.skeleton.time-t},t.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},t.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),null!=this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},t}();n.Slot=t}(spine||(spine={})),function(r){var t=function(t,e,n){if(this.color=new r.Color(1,1,1,1),t<0)throw new Error("index must be >= 0.");if(null==e)throw new Error("name cannot be null.");if(null==n)throw new Error("boneData cannot be null.");this.index=t,this.name=e,this.boneData=n};r.SlotData=t}(spine||(spine={})),function(t){var e,n,r,i,a=function(){function t(t){this._image=t}return t.prototype.getImage=function(){return this._image},t.filterFromString=function(t){switch(t.toLowerCase()){case"nearest":return e.Nearest;case"linear":return e.Linear;case"mipmap":return e.MipMap;case"mipmapnearestnearest":return e.MipMapNearestNearest;case"mipmaplinearnearest":return e.MipMapLinearNearest;case"mipmapnearestlinear":return e.MipMapNearestLinear;case"mipmaplinearlinear":return e.MipMapLinearLinear;default:throw new Error("Unknown texture filter "+t)}},t.wrapFromString=function(t){switch(t.toLowerCase()){case"mirroredtepeat":return r.MirroredRepeat;case"clamptoedge":return r.ClampToEdge;case"repeat":return r.Repeat;default:throw new Error("Unknown texture wrap "+t)}},t}();t.Texture=a,(n=e=t.TextureFilter||(t.TextureFilter={}))[n.Nearest=9728]="Nearest",n[n.Linear=9729]="Linear",n[n.MipMap=9987]="MipMap",n[n.MipMapNearestNearest=9984]="MipMapNearestNearest",n[n.MipMapLinearNearest=9985]="MipMapLinearNearest",n[n.MipMapNearestLinear=9986]="MipMapNearestLinear",n[n.MipMapLinearLinear=9987]="MipMapLinearLinear",(i=r=t.TextureWrap||(t.TextureWrap={}))[i.MirroredRepeat=33648]="MirroredRepeat",i[i.ClampToEdge=33071]="ClampToEdge",i[i.Repeat=10497]="Repeat";var s=function(){this.u=0,this.v=0,this.u2=0,this.v2=0,this.width=0,this.height=0,this.rotate=!1,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0};t.TextureRegion=s;var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.setFilters=function(t,e){},e.prototype.setWraps=function(t,e){},e.prototype.dispose=function(){},e}(t.Texture);t.FakeTexture=o}(spine||(spine={})),function(p){var t=function(){function t(t,e){this.pages=new Array,this.regions=new Array,this.load(t,e)}return t.prototype.load=function(t,e){if(null==e)throw new Error("textureLoader cannot be null.");for(var n=new f(t),r=new Array(4),i=null;;){var a=n.readLine();if(null==a)break;if(0==(a=a.trim()).length)i=null;else if(i){var s=new m;s.name=a,s.page=i,s.rotate="true"==n.readValue(),n.readTuple(r);var o=parseInt(r[0]),h=parseInt(r[1]);n.readTuple(r);var l=parseInt(r[0]),u=parseInt(r[1]);s.u=o/i.width,s.v=h/i.height,s.rotate?(s.u2=(o+u)/i.width,s.v2=(h+l)/i.height):(s.u2=(o+l)/i.width,s.v2=(h+u)/i.height),s.x=o,s.y=h,s.width=Math.abs(l),s.height=Math.abs(u),4==n.readTuple(r)&&4==n.readTuple(r)&&n.readTuple(r),s.originalWidth=parseInt(r[0]),s.originalHeight=parseInt(r[1]),n.readTuple(r),s.offsetX=parseInt(r[0]),s.offsetY=parseInt(r[1]),s.index=parseInt(n.readValue()),s.texture=i.texture,this.regions.push(s)}else{(i=new d).name=a,2==n.readTuple(r)&&(i.width=parseInt(r[0]),i.height=parseInt(r[1]),n.readTuple(r)),n.readTuple(r),i.minFilter=p.Texture.filterFromString(r[0]),i.magFilter=p.Texture.filterFromString(r[1]);var c=n.readValue();i.uWrap=p.TextureWrap.ClampToEdge,i.vWrap=p.TextureWrap.ClampToEdge,"x"==c?i.uWrap=p.TextureWrap.Repeat:"y"==c?i.vWrap=p.TextureWrap.Repeat:"xy"==c&&(i.uWrap=i.vWrap=p.TextureWrap.Repeat),i.texture=e(a),i.texture.setFilters(i.minFilter,i.magFilter),i.texture.setWraps(i.uWrap,i.vWrap),i.width=i.texture.getImage().width,i.height=i.texture.getImage().height,this.pages.push(i)}}},t.prototype.findRegion=function(t){for(var e=0;e<this.regions.length;e++)if(this.regions[e].name==t)return this.regions[e];return null},t.prototype.dispose=function(){for(var t=0;t<this.pages.length;t++)this.pages[t].texture.dispose()},t}();p.TextureAtlas=t;var f=function(){function t(t){this.index=0,this.lines=t.split(/\r\n|\r|\n/)}return t.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},t.prototype.readValue=function(){var t=this.readLine(),e=t.indexOf(":");if(-1==e)throw new Error("Invalid line: "+t);return t.substring(e+1).trim()},t.prototype.readTuple=function(t){var e=this.readLine(),n=e.indexOf(":");if(-1==n)throw new Error("Invalid line: "+e);for(var r=0,i=n+1;r<3;r++){var a=e.indexOf(",",i);if(-1==a)break;t[r]=e.substr(i,a-i).trim(),i=a+1}return t[r]=e.substring(i).trim(),r+1},t}(),d=function(){};p.TextureAtlasPage=d;var m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(p.TextureRegion);p.TextureAtlasRegion=m}(spine||(spine={})),function(S){var t=function(){function t(t,e){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new S.Vector2,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix,this.scaleMix=t.scaleMix,this.shearMix=t.shearMix,this.bones=new Array;for(var n=0;n<t.bones.length;n++)this.bones.push(e.findBone(t.bones[n].name));this.target=e.findBone(t.target.name)}return t.prototype.apply=function(){this.update()},t.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},t.prototype.applyAbsoluteWorld=function(){for(var t=this.rotateMix,e=this.translateMix,n=this.scaleMix,r=this.shearMix,i=this.target,a=i.a,s=i.b,o=i.c,h=i.d,l=0<a*h-s*o?S.MathUtils.degRad:-S.MathUtils.degRad,u=this.data.offsetRotation*l,c=this.data.offsetShearY*l,p=this.bones,f=0,d=p.length;f<d;f++){var m=p[f],g=!1;if(0!=t){var v=m.a,y=m.b,x=m.c,w=m.d;(R=Math.atan2(o,a)-Math.atan2(x,v)+u)>S.MathUtils.PI?R-=S.MathUtils.PI2:R<-S.MathUtils.PI&&(R+=S.MathUtils.PI2),R*=t;var M=Math.cos(R),E=Math.sin(R);m.a=M*v-E*x,m.b=M*y-E*w,m.c=E*v+M*x,m.d=E*y+M*w,g=!0}if(0!=e){var A=this.temp;i.localToWorld(A.set(this.data.offsetX,this.data.offsetY)),m.worldX+=(A.x-m.worldX)*e,m.worldY+=(A.y-m.worldY)*e,g=!0}if(0<n){var T=Math.sqrt(m.a*m.a+m.c*m.c),b=Math.sqrt(a*a+o*o);1e-5<T&&(T=(T+(b-T+this.data.offsetScaleX)*n)/T),m.a*=T,m.c*=T,T=Math.sqrt(m.b*m.b+m.d*m.d),b=Math.sqrt(s*s+h*h),1e-5<T&&(T=(T+(b-T+this.data.offsetScaleY)*n)/T),m.b*=T,m.d*=T,g=!0}if(0<r){y=m.b,w=m.d;var R,I=Math.atan2(w,y);(R=Math.atan2(h,s)-Math.atan2(o,a)-(I-Math.atan2(m.c,m.a)))>S.MathUtils.PI?R-=S.MathUtils.PI2:R<-S.MathUtils.PI&&(R+=S.MathUtils.PI2),R=I+(R+c)*r;T=Math.sqrt(y*y+w*w);m.b=Math.cos(R)*T,m.d=Math.sin(R)*T,g=!0}g&&(m.appliedValid=!1)}},t.prototype.applyRelativeWorld=function(){for(var t=this.rotateMix,e=this.translateMix,n=this.scaleMix,r=this.shearMix,i=this.target,a=i.a,s=i.b,o=i.c,h=i.d,l=0<a*h-s*o?S.MathUtils.degRad:-S.MathUtils.degRad,u=this.data.offsetRotation*l,c=this.data.offsetShearY*l,p=this.bones,f=0,d=p.length;f<d;f++){var m=p[f],g=!1;if(0!=t){var v=m.a,y=m.b,x=m.c,w=m.d;(b=Math.atan2(o,a)+u)>S.MathUtils.PI?b-=S.MathUtils.PI2:b<-S.MathUtils.PI&&(b+=S.MathUtils.PI2),b*=t;var M=Math.cos(b),E=Math.sin(b);m.a=M*v-E*x,m.b=M*y-E*w,m.c=E*v+M*x,m.d=E*y+M*w,g=!0}if(0!=e){var A=this.temp;i.localToWorld(A.set(this.data.offsetX,this.data.offsetY)),m.worldX+=A.x*e,m.worldY+=A.y*e,g=!0}if(0<n){var T=(Math.sqrt(a*a+o*o)-1+this.data.offsetScaleX)*n+1;m.a*=T,m.c*=T,T=(Math.sqrt(s*s+h*h)-1+this.data.offsetScaleY)*n+1,m.b*=T,m.d*=T,g=!0}if(0<r){var b;(b=Math.atan2(h,s)-Math.atan2(o,a))>S.MathUtils.PI?b-=S.MathUtils.PI2:b<-S.MathUtils.PI&&(b+=S.MathUtils.PI2);y=m.b,w=m.d;b=Math.atan2(w,y)+(b-S.MathUtils.PI/2+c)*r;T=Math.sqrt(y*y+w*w);m.b=Math.cos(b)*T,m.d=Math.sin(b)*T,g=!0}g&&(m.appliedValid=!1)}},t.prototype.applyAbsoluteLocal=function(){var t=this.rotateMix,e=this.translateMix,n=this.scaleMix,r=this.shearMix,i=this.target;i.appliedValid||i.updateAppliedTransform();for(var a=this.bones,s=0,o=a.length;s<o;s++){var h=a[s];h.appliedValid||h.updateAppliedTransform();var l=h.arotation;if(0!=t){var u=i.arotation-l+this.data.offsetRotation;l+=(u-=360*(16384-(16384.499999999996-u/360|0)))*t}var c=h.ax,p=h.ay;0!=e&&(c+=(i.ax-c+this.data.offsetX)*e,p+=(i.ay-p+this.data.offsetY)*e);var f=h.ascaleX,d=h.ascaleY;0<n&&(1e-5<f&&(f=(f+(i.ascaleX-f+this.data.offsetScaleX)*n)/f),1e-5<d&&(d=(d+(i.ascaleY-d+this.data.offsetScaleY)*n)/d));var m=h.ashearY;if(0<r){u=i.ashearY-m+this.data.offsetShearY;u-=360*(16384-(16384.499999999996-u/360|0)),h.shearY+=u*r}h.updateWorldTransformWith(c,p,l,f,d,h.ashearX,m)}},t.prototype.applyRelativeLocal=function(){var t=this.rotateMix,e=this.translateMix,n=this.scaleMix,r=this.shearMix,i=this.target;i.appliedValid||i.updateAppliedTransform();for(var a=this.bones,s=0,o=a.length;s<o;s++){var h=a[s];h.appliedValid||h.updateAppliedTransform();var l=h.arotation;0!=t&&(l+=(i.arotation+this.data.offsetRotation)*t);var u=h.ax,c=h.ay;0!=e&&(u+=(i.ax+this.data.offsetX)*e,c+=(i.ay+this.data.offsetY)*e);var p=h.ascaleX,f=h.ascaleY;0<n&&(1e-5<p&&(p*=(i.ascaleX-1+this.data.offsetScaleX)*n+1),1e-5<f&&(f*=(i.ascaleY-1+this.data.offsetScaleY)*n+1));var d=h.ashearY;0<r&&(d+=(i.ashearY+this.data.offsetShearY)*r),h.updateWorldTransformWith(u,c,l,p,f,h.ashearX,d)}},t.prototype.getOrder=function(){return this.data.order},t}();S.TransformConstraint=t}(spine||(spine={})),function(t){var e=function(t){if(this.order=0,this.bones=new Array,this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,this.relative=!1,this.local=!1,null==t)throw new Error("name cannot be null.");this.name=t};(spine||(spine={})).TransformConstraintData=e}(),function(t){var e=function(){function O(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new t.Pool(function(){return new Array}),this.polygonIndicesPool=new t.Pool(function(){return new Array})}return O.prototype.triangulate=function(t){for(var e=t,n=t.length>>1,r=this.indicesArray,i=r.length=0;i<n;i++)r[i]=i;for(var a=this.isConcaveArray,s=(i=a.length=0,n);i<s;++i)a[i]=O.isConcave(i,n,e,r);var o=this.triangles;for(o.length=0;3<n;){for(var h=n-1,l=(i=0,1);;){t:if(!a[i]){for(var u=r[h]<<1,c=r[i]<<1,p=r[l]<<1,f=e[u],d=e[u+1],m=e[c],g=e[c+1],v=e[p],y=e[p+1],x=(l+1)%n;x!=h;x=(x+1)%n)if(a[x]){var w=r[x]<<1,M=e[w],E=e[w+1];if(O.positiveArea(v,y,f,d,M,E)&&O.positiveArea(f,d,m,g,M,E)&&O.positiveArea(m,g,v,y,M,E))break t}break}if(0==l){do{if(!a[i])break;i--}while(0<i);break}h=i,l=((i=l)+1)%n}o.push(r[(n+i-1)%n]),o.push(r[i]),o.push(r[(i+1)%n]),r.splice(i,1),a.splice(i,1);var A=(--n+i-1)%n,T=i==n?0:i;a[A]=O.isConcave(A,n,e,r),a[T]=O.isConcave(T,n,e,r)}return 3==n&&(o.push(r[2]),o.push(r[0]),o.push(r[1])),o},O.prototype.decompose=function(t,e){var n=t,r=this.convexPolygons;this.polygonPool.freeAll(r),r.length=0;var i=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(i),i.length=0;var a=this.polygonIndicesPool.obtain();a.length=0;for(var s=this.polygonPool.obtain(),o=-1,h=s.length=0,l=0,u=e.length;l<u;l+=3){var c=e[l]<<1,p=e[l+1]<<1,f=e[l+2]<<1,d=n[c],m=n[c+1],g=n[p],v=n[p+1],y=n[f],x=n[f+1],w=!1;if(o==c){var M=s.length-4,E=O.winding(s[M],s[M+1],s[M+2],s[M+3],y,x),A=O.winding(y,x,s[0],s[1],s[2],s[3]);E==h&&A==h&&(s.push(y),s.push(x),a.push(f),w=!0)}w||(0<s.length?(r.push(s),i.push(a)):(this.polygonPool.free(s),this.polygonIndicesPool.free(a)),(s=this.polygonPool.obtain()).length=0,s.push(d),s.push(m),s.push(g),s.push(v),s.push(y),s.push(x),(a=this.polygonIndicesPool.obtain()).length=0,a.push(c),a.push(p),a.push(f),h=O.winding(d,m,g,v,y,x),o=c)}0<s.length&&(r.push(s),i.push(a));for(l=0,u=r.length;l<u;l++)if(0!=(a=i[l]).length)for(var T=a[0],b=a[a.length-1],R=(s=r[l])[M=s.length-4],I=s[M+1],S=s[M+2],C=s[M+3],P=s[0],_=s[1],V=s[2],k=s[3],N=O.winding(R,I,S,C,P,_),D=0;D<u;D++)if(D!=l){var L=i[D];if(3==L.length){var Y=L[0],U=L[1],X=L[2],F=r[D];y=F[F.length-2],x=F[F.length-1];if(Y==T&&U==b){E=O.winding(R,I,S,C,y,x),A=O.winding(y,x,P,_,V,k);E==N&&A==N&&(F.length=0,L.length=0,s.push(y),s.push(x),a.push(X),R=S,I=C,S=y,C=x,D=0)}}}for(l=r.length-1;0<=l;l--)0==(s=r[l]).length&&(r.splice(l,1),this.polygonPool.free(s),a=i[l],i.splice(l,1),this.polygonIndicesPool.free(a));return r},O.isConcave=function(t,e,n,r){var i=r[(e+t-1)%e]<<1,a=r[t]<<1,s=r[(t+1)%e]<<1;return!this.positiveArea(n[i],n[i+1],n[a],n[a+1],n[s],n[s+1])},O.positiveArea=function(t,e,n,r,i,a){return 0<=t*(a-r)+n*(e-a)+i*(r-e)},O.winding=function(t,e,n,r,i,a){var s=n-t,o=r-e;return 0<=i*o-a*s+s*e-t*o?1:-1},O}();t.Triangulator=e}(spine||(spine={})),function(t){var e=function(){function t(){this.array=new Array}return t.prototype.add=function(t){var e=this.contains(t);return this.array[0|t]=0|t,!e},t.prototype.contains=function(t){return null!=this.array[0|t]},t.prototype.remove=function(t){this.array[0|t]=void 0},t.prototype.clear=function(){this.array.length=0},t}();t.IntSet=e;var n=function(){function t(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),this.r=t,this.g=e,this.b=n,this.a=r}return t.prototype.set=function(t,e,n,r){return this.r=t,this.g=e,this.b=n,this.a=r,this.clamp(),this},t.prototype.setFromColor=function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this},t.prototype.setFromString=function(t){return t="#"==t.charAt(0)?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=(8!=t.length?255:parseInt(t.substr(6,2),16))/255,this},t.prototype.add=function(t,e,n,r){return this.r+=t,this.g+=e,this.b+=n,this.a+=r,this.clamp(),this},t.prototype.clamp=function(){return this.r<0?this.r=0:1<this.r&&(this.r=1),this.g<0?this.g=0:1<this.g&&(this.g=1),this.b<0?this.b=0:1<this.b&&(this.b=1),this.a<0?this.a=0:1<this.a&&(this.a=1),this},t.WHITE=new t(1,1,1,1),t.RED=new t(1,0,0,1),t.GREEN=new t(0,1,0,1),t.BLUE=new t(0,0,1,1),t.MAGENTA=new t(1,0,1,1),t}();t.Color=n;var r=function(){function n(){}return n.clamp=function(t,e,n){return t<e?e:n<t?n:t},n.cosDeg=function(t){return Math.cos(t*n.degRad)},n.sinDeg=function(t){return Math.sin(t*n.degRad)},n.signum=function(t){return 0<t?1:t<0?-1:0},n.toInt=function(t){return 0<t?Math.floor(t):Math.ceil(t)},n.cbrt=function(t){var e=Math.pow(Math.abs(t),1/3);return t<0?-e:e},n.randomTriangular=function(t,e){return n.randomTriangularWith(t,e,.5*(t+e))},n.randomTriangularWith=function(t,e,n){var r=Math.random(),i=e-t;return r<=(n-t)/i?t+Math.sqrt(r*i*(n-t)):e-Math.sqrt((1-r)*i*(e-n))},n.PI2=2*(n.PI=3.1415927),n.radDeg=n.radiansToDegrees=180/n.PI,n.degRad=n.degreesToRadians=n.PI/180,n}();t.MathUtils=r;var i=function(){function t(){}return t.prototype.apply=function(t,e,n){return t+(e-t)*this.applyInternal(n)},t}(),a=function(n){function t(t){var e=n.call(this)||this;return e.power=2,e.power=t,e}return __extends(t,n),t.prototype.applyInternal=function(t){return t<=.5?Math.pow(2*t,this.power)/2:Math.pow(2*(t-1),this.power)/(this.power%2==0?-2:2)+1},t}(t.Interpolation=i),s=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.applyInternal=function(t){return Math.pow(t-1,this.power)*(this.power%2==0?-1:1)+1},t}(t.Pow=a);t.PowOut=s;var o=function(){function r(){}return r.arrayCopy=function(t,e,n,r,i){for(var a=e,s=r;a<e+i;a++,s++)n[s]=t[a]},r.setArraySize=function(t,e,n){void 0===n&&(n=0);var r=t.length;if(r==e)return t;if(r<(t.length=e))for(var i=r;i<e;i++)t[i]=n;return t},r.ensureArrayCapacity=function(t,e,n){return void 0===n&&(n=0),t.length>=e?t:r.setArraySize(t,e,n)},r.newArray=function(t,e){for(var n=new Array(t),r=0;r<t;r++)n[r]=e;return n},r.newFloatArray=function(t){if(r.SUPPORTS_TYPED_ARRAYS)return new Float32Array(t);for(var e=new Array(t),n=0;n<e.length;n++)e[n]=0;return e},r.newShortArray=function(t){if(r.SUPPORTS_TYPED_ARRAYS)return new Int16Array(t);for(var e=new Array(t),n=0;n<e.length;n++)e[n]=0;return e},r.toFloatArray=function(t){return r.SUPPORTS_TYPED_ARRAYS?new Float32Array(t):t},r.toSinglePrecision=function(t){return r.SUPPORTS_TYPED_ARRAYS?Math.fround(t):t},r.webkit602BugfixHelper=function(t,e){},r.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array,r}();t.Utils=o;var h=function(){function t(){}return t.logBones=function(t){for(var e=0;e<t.bones.length;e++){var n=t.bones[e];console.log(n.data.name+", "+n.a+", "+n.b+", "+n.c+", "+n.d+", "+n.worldX+", "+n.worldY)}},t}();t.DebugUtils=h;var l=function(){function t(t){this.items=new Array,this.instantiator=t}return t.prototype.obtain=function(){return 0<this.items.length?this.items.pop():this.instantiator()},t.prototype.free=function(t){t.reset&&t.reset(),this.items.push(t)},t.prototype.freeAll=function(t){for(var e=0;e<t.length;e++)t[e].reset&&t[e].reset(),this.items[e]=t[e]},t.prototype.clear=function(){this.items.length=0},t}();t.Pool=l;var u=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.set=function(t,e){return this.x=t,this.y=e,this},t.prototype.length=function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},t.prototype.normalize=function(){var t=this.length();return 0!=t&&(this.x/=t,this.y/=t),this},t}();t.Vector2=u;var c=function(){function t(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}return t.prototype.update=function(){var t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,1<this.frameTime&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)},t}();t.TimeKeeper=c;var p=function(){function t(t){void 0===t&&(t=32),this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(t)}return t.prototype.hasEnoughData=function(){return this.addedValues>=this.values.length},t.prototype.addValue=function(t){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=t,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0},t.prototype.getMean=function(){if(this.hasEnoughData()){if(this.dirty){for(var t=0,e=0;e<this.values.length;e++)t+=this.values[e];this.mean=t/this.values.length,this.dirty=!1}return this.mean}return 0},t}();t.WindowedMean=p}(spine||(spine={})),function(){var e;Math.fround||(Math.fround=(e=new Float32Array(1),function(t){return e[0]=t,e[0]}))}(),function(t){var e=function(t){if(null==t)throw new Error("name cannot be null.");this.name=t},n=function(n){function r(t){var e=n.call(this,t)||this;return e.id=(65535&r.nextID++)<<11,e.worldVerticesLength=0,e}return __extends(r,n),r.prototype.computeWorldVertices=function(t,e,n,r,i,a){n=i+(n>>1)*a;var s=t.bone.skeleton,o=t.attachmentVertices,h=this.vertices,l=this.bones;if(null!=l){for(var u=0,c=0,p=0;p<e;p+=2){u+=(g=l[u])+1,c+=g}var f=s.bones;if(0==o.length)for(S=i,T=3*c;S<n;S+=a){var d=0,m=0,g=l[u++];for(g+=u;u<g;u++,T+=3){w=f[l[u]],C=h[T],P=h[T+1];var v=h[T+2];d+=(C*w.a+P*w.b+w.worldX)*v,m+=(C*w.c+P*w.d+w.worldY)*v}r[S]=d,r[S+1]=m}else for(var y=o,x=(S=i,T=3*c,c<<1);S<n;S+=a){d=0,m=0,g=l[u++];for(g+=u;u<g;u++,T+=3,x+=2){w=f[l[u]],C=h[T]+y[x],P=h[T+1]+y[x+1],v=h[T+2];d+=(C*w.a+P*w.b+w.worldX)*v,m+=(C*w.c+P*w.d+w.worldY)*v}r[S]=d,r[S+1]=m}}else{0<o.length&&(h=o);for(var w,M=(w=t.bone).worldX,E=w.worldY,A=w.a,T=w.b,b=w.c,R=w.d,I=e,S=i;S<n;I+=2,S+=a){var C=h[I],P=h[I+1];r[S]=C*A+P*T+M,r[S+1]=C*b+P*R+E}}},r.prototype.applyDeform=function(t){return this==t},r.nextID=0,r}(t.Attachment=e);t.VertexAttachment=n}(spine||(spine={})),function(t){var e;(e=t.AttachmentType||(t.AttachmentType={}))[e.Region=0]="Region",e[e.BoundingBox=1]="BoundingBox",e[e.Mesh=2]="Mesh",e[e.LinkedMesh=3]="LinkedMesh",e[e.Path=4]="Path",e[e.Point=5]="Point"}(spine||(spine={})),function(r){var t=function(n){function t(t){var e=n.call(this,t)||this;return e.color=new r.Color(1,1,1,1),e}return __extends(t,n),t}(r.VertexAttachment);r.BoundingBoxAttachment=t}(spine||(spine={})),function(r){var t=function(n){function t(t){var e=n.call(this,t)||this;return e.color=new r.Color(.2275,.2275,.8078,1),e}return __extends(t,n),t}(r.VertexAttachment);r.ClippingAttachment=t}(spine||(spine={})),function(h){var t=function(n){function t(t){var e=n.call(this,t)||this;return e.color=new h.Color(1,1,1,1),e.inheritDeform=!1,e.tempColor=new h.Color(0,0,0,0),e}return __extends(t,n),t.prototype.updateUVs=function(){var t=0,e=0,n=0,r=0;null==this.region?(t=e=0,n=r=1):(t=this.region.u,e=this.region.v,n=this.region.u2-t,r=this.region.v2-e);var i=this.regionUVs;null!=this.uvs&&this.uvs.length==i.length||(this.uvs=h.Utils.newFloatArray(i.length));var a=this.uvs;if(this.region.rotate)for(var s=0,o=a.length;s<o;s+=2)a[s]=t+i[s+1]*n,a[s+1]=e+r-i[s]*r;else for(s=0,o=a.length;s<o;s+=2)a[s]=t+i[s]*n,a[s+1]=e+i[s+1]*r},t.prototype.applyDeform=function(t){return this==t||this.inheritDeform&&this.parentMesh==t},t.prototype.getParentMesh=function(){return this.parentMesh},t.prototype.setParentMesh=function(t){null!=(this.parentMesh=t)&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)},t}(h.VertexAttachment);h.MeshAttachment=t}(spine||(spine={})),function(r){var t=function(n){function t(t){var e=n.call(this,t)||this;return e.closed=!1,e.constantSpeed=!1,e.color=new r.Color(1,1,1,1),e}return __extends(t,n),t}(r.VertexAttachment);r.PathAttachment=t}(spine||(spine={})),function(a){var t=function(n){function t(t){var e=n.call(this,t)||this;return e.color=new a.Color(.38,.94,0,1),e}return __extends(t,n),t.prototype.computeWorldPosition=function(t,e){return e.x=this.x*t.a+this.y*t.b+t.worldX,e.y=this.x*t.c+this.y*t.d+t.worldY,e},t.prototype.computeWorldRotation=function(t){var e=a.MathUtils.cosDeg(this.rotation),n=a.MathUtils.sinDeg(this.rotation),r=e*t.a+n*t.b,i=e*t.c+n*t.d;return Math.atan2(i,r)*a.MathUtils.radDeg},t}(a.VertexAttachment);a.PointAttachment=t}(spine||(spine={})),function(r){var t=function(n){function y(t){var e=n.call(this,t)||this;return e.x=0,e.y=0,e.scaleX=1,e.scaleY=1,e.rotation=0,e.width=0,e.height=0,e.color=new r.Color(1,1,1,1),e.offset=r.Utils.newFloatArray(8),e.uvs=r.Utils.newFloatArray(8),e.tempColor=new r.Color(1,1,1,1),e}return __extends(y,n),y.prototype.updateOffset=function(){var t=this.width/this.region.originalWidth*this.scaleX,e=this.height/this.region.originalHeight*this.scaleY,n=-this.width/2*this.scaleX+this.region.offsetX*t,r=-this.height/2*this.scaleY+this.region.offsetY*e,i=n+this.region.width*t,a=r+this.region.height*e,s=this.rotation*Math.PI/180,o=Math.cos(s),h=Math.sin(s),l=n*o+this.x,u=n*h,c=r*o+this.y,p=r*h,f=i*o+this.x,d=i*h,m=a*o+this.y,g=a*h,v=this.offset;v[y.OX1]=l-p,v[y.OY1]=c+u,v[y.OX2]=l-g,v[y.OY2]=m+u,v[y.OX3]=f-g,v[y.OY3]=m+d,v[y.OX4]=f-p,v[y.OY4]=c+d},y.prototype.setRegion=function(t){this.region=t;var e=this.uvs;t.rotate?(e[2]=t.u,e[3]=t.v2,e[4]=t.u,e[5]=t.v,e[6]=t.u2,e[7]=t.v,e[0]=t.u2,e[1]=t.v2):(e[0]=t.u,e[1]=t.v2,e[2]=t.u,e[3]=t.v,e[4]=t.u2,e[5]=t.v,e[6]=t.u2,e[7]=t.v2)},y.prototype.computeWorldVertices=function(t,e,n,r){var i=this.offset,a=t.worldX,s=t.worldY,o=t.a,h=t.b,l=t.c,u=t.d,c=0,p=0;c=i[y.OX1],p=i[y.OY1],e[n]=c*o+p*h+a,e[n+1]=c*l+p*u+s,n+=r,c=i[y.OX2],p=i[y.OY2],e[n]=c*o+p*h+a,e[n+1]=c*l+p*u+s,n+=r,c=i[y.OX3],p=i[y.OY3],e[n]=c*o+p*h+a,e[n+1]=c*l+p*u+s,n+=r,c=i[y.OX4],p=i[y.OY4],e[n]=c*o+p*h+a,e[n+1]=c*l+p*u+s},y.OX1=0,y.OY1=1,y.OX2=2,y.OY2=3,y.OX3=4,y.OY3=5,y.OX4=6,y.OY4=7,y.X1=0,y.Y1=1,y.C1R=2,y.C1G=3,y.C1B=4,y.C1A=5,y.U1=6,y.V1=7,y.X2=8,y.Y2=9,y.C2R=10,y.C2G=11,y.C2B=12,y.C2A=13,y.U2=14,y.V2=15,y.X3=16,y.Y3=17,y.C3R=18,y.C3G=19,y.C3B=20,y.C3A=21,y.U3=22,y.V3=23,y.X4=24,y.Y4=25,y.C4R=26,y.C4G=27,y.C4B=28,y.C4A=29,y.U4=30,y.V4=31,y}(r.Attachment);r.RegionAttachment=t}(spine||(spine={})),function(i){var t=function(){function t(t,e){this.jitterX=0,this.jitterY=0,this.jitterX=t,this.jitterY=e}return t.prototype.begin=function(t){},t.prototype.transform=function(t,e,n,r){t.x+=i.MathUtils.randomTriangular(-this.jitterX,this.jitterY),t.y+=i.MathUtils.randomTriangular(-this.jitterX,this.jitterY)},t.prototype.end=function(){},t}();i.JitterEffect=t}(spine||(spine={})),function(p){var t=function(){function c(t){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=t}return c.prototype.begin=function(t){this.worldX=t.x+this.centerX,this.worldY=t.y+this.centerY},c.prototype.transform=function(t,e,n,r){var i=this.angle*p.MathUtils.degreesToRadians,a=t.x-this.worldX,s=t.y-this.worldY,o=Math.sqrt(a*a+s*s);if(o<this.radius){var h=c.interpolation.apply(0,i,(this.radius-o)/this.radius),l=Math.cos(h),u=Math.sin(h);t.x=l*a-u*s+this.worldX,t.y=u*a+l*s+this.worldY}},c.prototype.end=function(){},c.interpolation=new p.PowOut(2),c}();p.SwirlEffect=t}(spine||(spine={})),pc.extend(pc,function(){var g=0,v=1,y=2,n={9728:pc.FILTER_NEAREST,9729:pc.FILTER_LINEAR,9987:pc.FILTER_LINEAR_MIPMAP_LINEAR,9984:pc.FILTER_NEAREST_MIPMAP_NEAREST,9985:pc.FILTER_LINEAR_MIPMAP_NEAREST,9986:pc.FILTER_NEAREST_MIPMAP_LINEAR,9987:pc.FILTER_LINEAR_MIPMAP_LINEAR},r={33648:pc.ADDRESS_MIRRORED_REPEAT,33071:pc.ADDRESS_CLAMP_TO_EDGE,10487:pc.ADDRESS_REPEAT},o=function(t){this._image={width:t.width,height:t.height},this.pcTexture=t};o.prototype={setFilters:function(t,e){this.pcTexture.minFilter=n[t],this.pcTexture.magFilter=n[e]},setWraps:function(t,e){this.pcTexture.addressU=r[t],this.pcTexture.addressV=r[e]},getImage:function(){return this._image}};var t=function(t,e,n,r){this._app=t,this._position=new pc.Vec3;var i=new spine.TextureAtlas(e,function(t){return new o(r[t])}),a=new spine.SkeletonJson(new spine.AtlasAttachmentLoader(i));a.scale*=.01;var s=a.readSkeletonData(n);this.skeleton=new spine.Skeleton(s),this.skeleton.updateWorldTransform(),this.stateData=new spine.AnimationStateData(this.skeleton.data),this.states=[new spine.AnimationState(this.stateData)],this._node=new pc.GraphNode,this._meshInstances=[],this._materials={},this._offset={},this._tint={},this._priority=0,this._layers=[pc.LAYERID_UI],this.init(),this.autoUpdate=!0,this._model=new pc.Model,this._model.graph=this._node,this._model.meshInstances=this._meshInstances,this._modelChanged=!0,this._reordered=!0,this._hidden=!1};t.prototype.destroy=function(){this._model&&this.removeFromLayers(),this._model=null,this._meshInstances=[],this.skeleton=null,this.stateData=null,this.state=null,this._materials={},this._node=null},t.prototype.hide=function(){if(!this._hidden){for(var t=0,e=this._meshInstances.length;t<e;t++)this._meshInstances[t].visible=!1;this._hidden=!0}},t.prototype.show=function(){if(this._hidden){for(var t=0,e=this._meshInstances.length;t<e;t++)this._meshInstances[t].visible=!0;this._hidden=!1}},t.prototype.init=function(){for(var t=this.skeleton.drawOrder,e=0,n=t.length;e<n;e++)this.initSlot(t[e]);this.rebuildMeshes()},t.prototype.initSlot=function(t){t.vertices=[],t.positions=[],t.options={},t.colorUniforms={},t.current={mesh:-1,vertices:0,offset:0},t._active={name:"",type:g},this.initAttachment(t)};var h=function(t,e){return e%2?1-t:t},l=function(t,e){return e%3==1?1:0};t.prototype.initAttachment=function(t){var e=t.attachment;if(e){var n=e.name;if(t._active.name=n,e instanceof spine.RegionAttachment)t._active.type=y,t.positions=new Array(12),t.options={normals:[0,1,0,0,1,0,0,1,0,0,1,0],uvs:e.uvs.map(h),colors:Array(16),indices:[0,3,2,2,1,0]};else if(e instanceof spine.MeshAttachment){t._active.type=v;var r=e.worldVerticesLength/2;t.positions=new Array(3*r),t.options={normals:new Array(3*r).map(l),uvs:e.uvs.map(h),colors:Array(4*r),indices:e.triangles}}var i=e.region.texture.pcTexture;if(i)if(i instanceof pc.StandardMaterial)this._materials[i.name]=i,t.material=i.name;else{var a=null;if(i.getSource()instanceof Image&&(a=i.getSource().getAttribute("src")),a){if(void 0===this._materials[a]){var s=new pc.StandardMaterial;s.shadingModel=pc.SPECULAR_BLINN,s.diffuse=new pc.Color(0,0,0),s.emissiveMap=i,s.emissiveMapChannel="rgb",s.emissiveVertexColor=!0,s.emissiveVertexColorChannel="rgb",s.opacityMap=i,s.opacityMapChannel="a",s.opacityVertexColor=!0,s.opacityVertexColorChannel="a",s.depthWrite=!1,s.cull=pc.CULLFACE_NONE,s.blendType=pc.BLEND_PREMULTIPLIED,s.update();var o=["gl_FragColor.rgb *= vVertexColor.a;","gl_FragColor.a = dAlpha;"].join("\n");s.chunks.outputAlphaPremulPS=o,this._materials[a]=s,this._offset[a]=0}t.material=a}}this._modelChanged=!0}},t.prototype.rebuildMeshes=function(){this.removeFromLayers(),this._meshes=[],this._meshInstances.length=0,this.createMeshes(),this.addToLayers()};var u=function(t,e){return e.attachment&&(t.curr.mat||(t.curr.mat=e.material),e.material===t.curr.mat?(t.curr.pos+=e.positions.length,t.curr.norm+=e.options.normals.length,t.curr.idx+=e.options.indices.length,t.curr.uv+=e.options.uvs.length,t.curr.col+=e.options.colors.length):(t.batches.push({mat:t.curr.mat,pos:t.curr.pos,norm:t.curr.norm,idx:t.curr.idx,uv:t.curr.uv,col:t.curr.col}),t.curr.mat=e.material,t.curr.pos=e.positions.length,t.curr.norm=e.options.normals.length,t.curr.idx=e.options.indices.length,t.curr.uv=e.options.uvs.length,t.curr.col=e.options.colors.length)),t},i=function(t,e,n,r){for(var i=0,a=t.length;i<a;i++)e[n+i]=t[i],r&&(e[n+i]+=r);return t.length},c=function(t,e){return e.attachment&&(t.curr.mat||(t.curr.mat=e.material),e.material!==t.curr.mat&&(t.meshes.push(pc.createMesh(t.gd,t.positions[t.batchIdx],t.options[t.batchIdx])),t.batchIdx++,t.curr.mat=e.material,t.curr.pos=0,t.curr.norm=0,t.curr.idx=0,t.curr.uv=0,t.curr.col=0),e.current.offset=t.curr.pos/3,e.current.vertices=e.positions.length/3,e.current.mesh=t.batchIdx,t.curr.idx+=i(e.options.indices,t.options[t.batchIdx].indices,t.curr.idx,e.current.offset),t.curr.pos+=i(e.positions,t.positions[t.batchIdx],t.curr.pos,0),t.curr.norm+=i(e.options.normals,t.options[t.batchIdx].normals,t.curr.norm,0),t.curr.uv+=i(e.options.uvs,t.options[t.batchIdx].uvs,t.curr.uv,0),t.curr.col+=i(e.options.colors,t.options[t.batchIdx].colors,t.curr.col,0)),t};return t.prototype.createMeshes=function(){var t=this.skeleton.drawOrder,e=t.reduce(u,{curr:{pos:0,norm:0,idx:0,uv:0,col:0},batches:[]});0<e.curr.pos&&e.batches.push(e.curr);var n,r=e.batches,i=[],a=[],s=r.length;if(0!=s){for(n=0;n<s;n++)i.push(Array(r[n].pos)),a.push({normals:Array(r[n].norm),uvs:new Float32Array(r[n].uv),indices:Array(r[n].idx),colors:Array(r[n].col)});var o=t.reduce(c,{meshes:this._meshes,gd:this._app.graphicsDevice,batchIdx:0,curr:{pos:0,norm:0,idx:0,uv:0,col:0},positions:i,options:a});for(this._meshes.push(pc.createMesh(o.gd,i[o.batchIdx],a[o.batchIdx])),n=0;n<s;n++){this._meshes[n].name=r[n].mat;var h=new pc.MeshInstance(this._node,this._meshes[n],this._materials[r[n].mat]);h.drawOrder=n+1e3*this.priority,h.visible=!this._hidden,this._meshInstances.push(h)}}},t.prototype.updateMeshes=function(){var t;for(t=0;t<this._meshes.length;t++)this._meshes[t].startUpdate();for(var e=this.skeleton.drawOrder,n=0,r=e.length;n<r;n++){var i=e[n];i.attachment&&0<=i.current.mesh&&this._meshes[i.current.mesh].updateVertices(i.positions,null,null,null,i.options.colors)}for(t=0;t<this._meshes.length;t++)this._meshes[t].finishUpdate()},t.prototype.updateSlot=function(t,e){var n=t.attachment,r=n.name,i=n instanceof spine.RegionAttachment?y:n instanceof spine.MeshAttachment?v:g;t._active.name===r&&t._active.type==i||this.initAttachment(t);var a,s,o=0,h=0;i===y?(n.computeWorldVertices(t.bone,t.vertices,0,2),s=8):i===v&&(n.computeWorldVertices(t,0,n.worldVerticesLength,t.vertices,0,2),s=n.worldVerticesLength);var l=this._tint[r],u=Math.round(255*t.color.r*(l?l.r:1)),c=Math.round(255*t.color.g*(l?l.g:1)),p=Math.round(255*t.color.b*(l?l.b:1)),f=Math.round(255*t.color.a*(l?l.a:1));for(a=0;a<s;a+=2,o+=3,h+=4)t.positions[o+0]=t.vertices[a+0],t.positions[o+1]=t.vertices[a+1],t.positions[o+2]=0,t.options.colors[h+0]=u,t.options.colors[h+1]=c,t.options.colors[h+2]=p,t.options.colors[h+3]=f;var d=t.positions.length/3,m=this._offset[e];t.current.offset===m&&t.current.vertices===d&&t.current.mesh===e||(this._reordered=!0),this._offset[e]+=d},t.prototype.update=function(t){if(!this._hidden){for(var e=0,n=this.states.length;e<n;e++)this.states[e].update(t);for(e=0,n=this.states.length;e<n;e++)this.states[e].apply(this.skeleton);for(var r in this.autoUpdate&&this.skeleton.updateWorldTransform(),this._materials)this._materials.hasOwnProperty(r)&&(this._offset[r]=0);var i,a=this.skeleton.drawOrder,s=0,o=(n=a.length)?a[0].material:"";for(e=0;e<n;e++){(i=a[e]).attachment?(o!==i.material&&(s++,o=i.material),this.updateSlot(i,s)):i._active.type!=g&&(i.current={mesh:-1,vertices:0,offset:0},i._active={name:"",type:g},this._modelChanged=!0)}this._modelChanged||this._reordered?(this.rebuildMeshes(),this._modelChanged=!1,this._reordered=!1):this.updateMeshes()}},t.prototype.setPosition=function(t){this._position.copy(t)},t.prototype.setTint=function(t,e){this._tint[t]=e},t.prototype.removeFromLayers=function(){if(this._model)for(var t=0;t<this._layers.length;t++){var e=this._layers[t],n=this._app.scene.layers.getLayerById(e);n&&n.removeMeshInstances(this._model.meshInstances)}},t.prototype.addToLayers=function(){if(this._model)for(var t=0;t<this._layers.length;t++){var e=this._layers[t],n=this._app.scene.layers.getLayerById(e);n&&n.addMeshInstances(this._model.meshInstances)}},Object.defineProperty(t.prototype,"state",{get:function(){return this.states[0]}}),Object.defineProperty(t.prototype,"priority",{get:function(){return this._priority},set:function(t){this._priority=t,this._reordered=!0}}),Object.defineProperty(t.prototype,"layers",{get:function(){return this._layers},set:function(t){this._model&&this.removeFromLayers(),this._layers=t||[],this._model&&this.addToLayers()}}),{Spine:t}}()),pc.extend(pc,function(){var r=function(t){this.id="spine",this.ComponentType=pc.SpineComponent,this.DataType=pc.SpineComponentData,this.schema=["enabled","atlasAsset","textureAssets","skeletonAsset","atlasData","textures","skeletonData","speed","spine"],this.on("remove",this.onRemove,this),pc.ComponentSystem.bind("update",this.onUpdate,this)};return r=pc.inherits(r,pc.ComponentSystem),pc.extend(r.prototype,{initializeComponentData:function(t,e,n){n=["enabled","atlasAsset","textureAssets","skeletonAsset","atlasData","textures","skeletonData","spine"],r._super.initializeComponentData.call(this,t,e,n)},removeComponent:function(t){var e=t.spine.data;e.spine&&e.spine.destroy()},onUpdate:function(t){var e=this.store;for(var n in e)if(e.hasOwnProperty(n)){var r=e[n],i=r.data;i.enabled&&r.entity.enabled&&i.spine&&(i.spine.setPosition(r.entity.getPosition()),i.spine.update(i.speed*t))}},onRemove:function(t,e){}}),{SpineComponentSystem:r}}()),pc.extend(pc,function(){var e=function(t,e){this.on("set_atlasAsset",this.onSetAsset,this),this.on("set_textureAssets",this.onSetAssets,this),this.on("set_skeletonAsset",this.onSetAsset,this),this.on("set_atlasData",this.onSetResource,this),this.on("set_textures",this.onSetResource,this),this.on("set_skeletonData",this.onSetResource,this)};return e=pc.inherits(e,pc.Component),pc.extend(e.prototype,{_createSpine:function(){this.data.spine&&(this.data.spine.destroy(),this.data.spine=null);for(var t={},e=0,n=this.textureAssets.length;e<n;e++){var r=this.system.app.assets.get(this.textureAssets[e]),i=pc.path.getBasename(r.file.url),a=i.indexOf("?");-1!==a&&(i=i.substring(0,a)),t[i]=r.resource}this.data.spine=new pc.Spine(this.system.app,this.atlasData,this.skeletonData,t),this.state=this.data.spine.state,this.states=this.data.spine.states,this.skeleton=this.data.spine.skeleton,this.entity.addChild(this.data.spine._node)},_onAssetReady:function(t){"texture"===t.type&&this.textures.push(t.resource),"json"===t.type&&(this.skeletonData=t.resource),"text"===t.type&&(this.atlasData=t.resource)},_onAssetAdd:function(t){t.off("change",this.onAssetChanged,this),t.on("change",this.onAssetChanged,this),t.off("remove",this.onAssetRemoved,this),t.on("remove",this.onAssetRemoved,this),t.ready(this._onAssetReady,this),this.system.app.assets.load(t)},onSetResource:function(){this.data.atlasData&&this.data.textures.length&&this.data.skeletonData&&this._createSpine()},onSetAsset:function(t,e,n){var r=this.system.app.assets,i=null;if(e&&(i=r.get(e))&&(i.off("change",this.onAssetChanged),i.off("remove",this.onAssetRemoved)),n){var a=n;n instanceof pc.Asset&&(a=n.id,this.data[t]=a),(i=r.get(a))?this._onAssetAdd(i):r.on("add:"+a)}},onSetAssets:function(t,e,n){var r,i,a=this.system.app.assets,s=null;if(e.length)for(r=0,i=e.length;r<i;r++)(s=a.get(e[r]))&&(s.off("change",this.onAssetChanged),s.off("remove",this.onAssetRemoved));if(n&&n.length){var o=n.map(function(t){return t instanceof pc.Asset?t.id:t});for(r=0,i=n.length;r<i;r++)(s=a.get(o[r]))?this._onAssetAdd(s):a.on("add:"+o[r])}},onAssetChanged:function(t,e,n,r){},onAssetRemoved:function(t){},onEnable:function(){e._super.onEnable.call(this);var t=this.data.spine;t&&t.addToLayers()},onDisable:function(){e._super.onDisable.call(this);var t=this.data.spine;t&&t.removeFromLayers()},hide:function(){this.data.spine&&this.data.spine.hide()},show:function(){this.data.spine&&this.data.spine.show()}}),{SpineComponent:e}}()),pc.extend(pc,function(){var t=function(){this.enabled=!0,this.atlasAsset=null,this.textureAssets=[],this.skeletonAsset=null,this.speed=1,this.spine=null,this.atlasData=null,this.textures=[],this.skeletonData=null};return{SpineComponentData:t=pc.inherits(t,pc.ComponentData)}}()),function(){if(pc.Mesh.prototype.startUpdate=function(){this._iterator=new pc.VertexIterator(this.vertexBuffer),this._counter=0},pc.Mesh.prototype.finishUpdate=function(){this._iterator.end(),this._iterator=null},pc.Mesh.prototype.updateVertices=function(t,e,n,r,i){var a=t.length/3;this._counter+=a;for(var s=0;s<a;s++)this._iterator.element[pc.SEMANTIC_POSITION].set(t[3*s],t[3*s+1],t[3*s+2]),e&&this._iterator.element[pc.SEMANTIC_NORMAL].set(e[3*s],e[3*s+1],e[3*s+2]),n&&this._iterator.element[pc.SEMANTIC_TANGENT].set(n[4*s],n[4*s+1],n[4*s+2],n[4*s+3]),r&&this._iterator.element[pc.SEMANTIC_TEXCOORD0].set(r[2*s],r[2*s+1]),i&&this._iterator.element[pc.SEMANTIC_COLOR].set(i[4*s],i[4*s+1],i[4*s+2],i[4*s+3]),this._iterator.next()},pc.Application.registerPlugin){pc.Application.registerPlugin("spine",function(t){new pc.SpineComponentSystem(t)})}else{var t=pc.Application.getApplication(),e=new pc.SpineComponentSystem(t);t.systems.add(e)}}();