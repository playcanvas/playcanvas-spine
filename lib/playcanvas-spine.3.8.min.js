/* Copyright 2015-2020 PlayCanvas Ltd */

var spine,__extends=this&&this.__extends||function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();!function(X){var B,t,g,e,n,r,W=(a.prototype.hasTimeline=function(t){return 1==this.timelineIds[t]},a.prototype.apply=function(t,e,n,r,a,i,s,o){if(null==t)throw new Error("skeleton cannot be null.");r&&0!=this.duration&&(n%=this.duration,0<e&&(e%=this.duration));for(var h=this.timelines,l=0,u=h.length;l<u;l++)h[l].apply(t,e,n,a,i,s,o)},a.binarySearch=function(t,e,n){void 0===n&&(n=1);var r=0,a=t.length/n-2;if(0==a)return n;for(var i=a>>>1;;){if(t[(i+1)*n]<=e?r=i+1:a=i,r==a)return(r+1)*n;i=r+a>>>1}},a.linearSearch=function(t,e,n){for(var r=0,a=t.length-n;r<=a;r+=n)if(t[r]>e)return r;return-1},a);function a(t,e,n){if(null==t)throw new Error("name cannot be null.");if(null==e)throw new Error("timelines cannot be null.");this.name=t,this.timelines=e,this.timelineIds=[];for(var r=0;r<e.length;r++)this.timelineIds[e[r].getPropertyId()]=!0;this.duration=n}X.Animation=W,(t=B=X.MixBlend||(X.MixBlend={}))[t.setup=0]="setup",t[t.first=1]="first",t[t.replace=2]="replace",t[t.add=3]="add",(e=g=X.MixDirection||(X.MixDirection={}))[e.mixIn=0]="mixIn",e[e.mixOut=1]="mixOut",(r=n=X.TimelineType||(X.TimelineType={}))[r.rotate=0]="rotate",r[r.translate=1]="translate",r[r.scale=2]="scale",r[r.shear=3]="shear",r[r.attachment=4]="attachment",r[r.color=5]="color",r[r.deform=6]="deform",r[r.event=7]="event",r[r.drawOrder=8]="drawOrder",r[r.ikConstraint=9]="ikConstraint",r[r.transformConstraint=10]="transformConstraint",r[r.pathConstraintPosition=11]="pathConstraintPosition",r[r.pathConstraintSpacing=12]="pathConstraintSpacing",r[r.pathConstraintMix=13]="pathConstraintMix",r[r.twoColor=14]="twoColor";var i=(y.prototype.getFrameCount=function(){return this.curves.length/y.BEZIER_SIZE+1},y.prototype.setLinear=function(t){this.curves[t*y.BEZIER_SIZE]=y.LINEAR},y.prototype.setStepped=function(t){this.curves[t*y.BEZIER_SIZE]=y.STEPPED},y.prototype.getCurveType=function(t){var e=t*y.BEZIER_SIZE;if(e==this.curves.length)return y.LINEAR;var n=this.curves[e];return n==y.LINEAR?y.LINEAR:n==y.STEPPED?y.STEPPED:y.BEZIER},y.prototype.setCurve=function(t,e,n,r,a){var i=.03*(2*-e+r),s=.03*(2*-n+a),o=.006*(3*(e-r)+1),h=.006*(3*(n-a)+1),l=2*i+o,u=2*s+h,c=.3*e+i+.16666667*o,d=.3*n+s+.16666667*h,p=t*y.BEZIER_SIZE,f=this.curves;f[p++]=y.BEZIER;for(var m=c,g=d,v=p+y.BEZIER_SIZE-1;p<v;p+=2)f[p]=m,f[p+1]=g,c+=l,d+=u,l+=o,u+=h,m+=c,g+=d},y.prototype.getCurvePercent=function(t,e){e=X.MathUtils.clamp(e,0,1);var n=this.curves,r=t*y.BEZIER_SIZE,a=n[r];if(a==y.LINEAR)return e;if(a==y.STEPPED)return 0;for(var i=0,s=++r,o=r+y.BEZIER_SIZE-1;r<o;r+=2)if(e<=(i=n[r])){var h=void 0,l=void 0;return(l=r==s?h=0:(h=n[r-2],n[r-1]))+(n[r+1]-l)*(e-h)/(i-h)}var u=n[r-1];return u+(1-u)*(e-i)/(1-i)},y.LINEAR=0,y.STEPPED=1,y.BEZIER=2,y.BEZIER_SIZE=19,y);function y(t){if(t<=0)throw new Error("frameCount must be > 0: "+t);this.curves=X.Utils.newFloatArray((t-1)*y.BEZIER_SIZE)}X.CurveTimeline=i;var s,o=(__extends(v,s=i),v.prototype.getPropertyId=function(){return(n.rotate<<24)+this.boneIndex},v.prototype.setFrame=function(t,e,n){t<<=1,this.frames[t]=e,this.frames[t+v.ROTATION]=n},v.prototype.apply=function(t,e,n,r,a,i,s){var o=this.frames,h=t.bones[this.boneIndex];if(h.active)if(n<o[0])switch(i){case B.setup:return void(h.rotation=h.data.rotation);case B.first:var l=h.data.rotation-h.rotation;h.rotation+=(l-360*(16384-(16384.499999999996-l/360|0)))*a}else if(n>=o[o.length-v.ENTRIES]){var u=o[o.length+v.PREV_ROTATION];switch(i){case B.setup:h.rotation=h.data.rotation+u*a;break;case B.first:case B.replace:u+=h.data.rotation-h.rotation,u-=360*(16384-(16384.499999999996-u/360|0));case B.add:h.rotation+=u*a}}else{var c=W.binarySearch(o,n,v.ENTRIES),d=o[c+v.PREV_ROTATION],p=o[c],f=this.getCurvePercent((c>>1)-1,1-(n-p)/(o[c+v.PREV_TIME]-p)),m=o[c+v.ROTATION]-d;switch(m=d+(m-360*(16384-(16384.499999999996-m/360|0)))*f,i){case B.setup:h.rotation=h.data.rotation+(m-360*(16384-(16384.499999999996-m/360|0)))*a;break;case B.first:case B.replace:m+=h.data.rotation-h.rotation;case B.add:h.rotation+=(m-360*(16384-(16384.499999999996-m/360|0)))*a}}},v.ENTRIES=2,v.PREV_TIME=-2,v.PREV_ROTATION=-1,v.ROTATION=1,v);function v(t){var e=s.call(this,t)||this;return e.frames=X.Utils.newFloatArray(t<<1),e}X.RotateTimeline=o;var h,l=(__extends(f,h=i),f.prototype.getPropertyId=function(){return(n.translate<<24)+this.boneIndex},f.prototype.setFrame=function(t,e,n,r){t*=f.ENTRIES,this.frames[t]=e,this.frames[t+f.X]=n,this.frames[t+f.Y]=r},f.prototype.apply=function(t,e,n,r,a,i,s){var o=this.frames,h=t.bones[this.boneIndex];if(h.active)if(n<o[0])switch(i){case B.setup:return h.x=h.data.x,void(h.y=h.data.y);case B.first:h.x+=(h.data.x-h.x)*a,h.y+=(h.data.y-h.y)*a}else{var l=0,u=0;if(n>=o[o.length-f.ENTRIES])l=o[o.length+f.PREV_X],u=o[o.length+f.PREV_Y];else{var c=W.binarySearch(o,n,f.ENTRIES);l=o[c+f.PREV_X],u=o[c+f.PREV_Y];var d=o[c],p=this.getCurvePercent(c/f.ENTRIES-1,1-(n-d)/(o[c+f.PREV_TIME]-d));l+=(o[c+f.X]-l)*p,u+=(o[c+f.Y]-u)*p}switch(i){case B.setup:h.x=h.data.x+l*a,h.y=h.data.y+u*a;break;case B.first:case B.replace:h.x+=(h.data.x+l-h.x)*a,h.y+=(h.data.y+u-h.y)*a;break;case B.add:h.x+=l*a,h.y+=u*a}}},f.ENTRIES=3,f.PREV_TIME=-3,f.PREV_X=-2,f.PREV_Y=-1,f.X=1,f.Y=2,f);function f(t){var e=h.call(this,t)||this;return e.frames=X.Utils.newFloatArray(t*f.ENTRIES),e}X.TranslateTimeline=l;var u,c=(__extends(x,u=l),x.prototype.getPropertyId=function(){return(n.scale<<24)+this.boneIndex},x.prototype.apply=function(t,e,n,r,a,i,s){var o=this.frames,h=t.bones[this.boneIndex];if(h.active)if(n<o[0])switch(i){case B.setup:return h.scaleX=h.data.scaleX,void(h.scaleY=h.data.scaleY);case B.first:h.scaleX+=(h.data.scaleX-h.scaleX)*a,h.scaleY+=(h.data.scaleY-h.scaleY)*a}else{var l=0,u=0;if(n>=o[o.length-x.ENTRIES])l=o[o.length+x.PREV_X]*h.data.scaleX,u=o[o.length+x.PREV_Y]*h.data.scaleY;else{var c=W.binarySearch(o,n,x.ENTRIES);l=o[c+x.PREV_X],u=o[c+x.PREV_Y];var d=o[c],p=this.getCurvePercent(c/x.ENTRIES-1,1-(n-d)/(o[c+x.PREV_TIME]-d));l=(l+(o[c+x.X]-l)*p)*h.data.scaleX,u=(u+(o[c+x.Y]-u)*p)*h.data.scaleY}if(1==a)i==B.add?(h.scaleX+=l-h.data.scaleX,h.scaleY+=u-h.data.scaleY):(h.scaleX=l,h.scaleY=u);else{var f=0,m=0;if(s==g.mixOut)switch(i){case B.setup:f=h.data.scaleX,m=h.data.scaleY,h.scaleX=f+(Math.abs(l)*X.MathUtils.signum(f)-f)*a,h.scaleY=m+(Math.abs(u)*X.MathUtils.signum(m)-m)*a;break;case B.first:case B.replace:f=h.scaleX,m=h.scaleY,h.scaleX=f+(Math.abs(l)*X.MathUtils.signum(f)-f)*a,h.scaleY=m+(Math.abs(u)*X.MathUtils.signum(m)-m)*a;break;case B.add:f=h.scaleX,m=h.scaleY,h.scaleX=f+(Math.abs(l)*X.MathUtils.signum(f)-h.data.scaleX)*a,h.scaleY=m+(Math.abs(u)*X.MathUtils.signum(m)-h.data.scaleY)*a}else switch(i){case B.setup:f=Math.abs(h.data.scaleX)*X.MathUtils.signum(l),m=Math.abs(h.data.scaleY)*X.MathUtils.signum(u),h.scaleX=f+(l-f)*a,h.scaleY=m+(u-m)*a;break;case B.first:case B.replace:f=Math.abs(h.scaleX)*X.MathUtils.signum(l),m=Math.abs(h.scaleY)*X.MathUtils.signum(u),h.scaleX=f+(l-f)*a,h.scaleY=m+(u-m)*a;break;case B.add:f=X.MathUtils.signum(l),m=X.MathUtils.signum(u),h.scaleX=Math.abs(h.scaleX)*f+(l-Math.abs(h.data.scaleX)*f)*a,h.scaleY=Math.abs(h.scaleY)*m+(u-Math.abs(h.data.scaleY)*m)*a}}}},x);function x(t){return u.call(this,t)||this}X.ScaleTimeline=c;var d,p=(__extends(m,d=l),m.prototype.getPropertyId=function(){return(n.shear<<24)+this.boneIndex},m.prototype.apply=function(t,e,n,r,a,i,s){var o=this.frames,h=t.bones[this.boneIndex];if(h.active)if(n<o[0])switch(i){case B.setup:return h.shearX=h.data.shearX,void(h.shearY=h.data.shearY);case B.first:h.shearX+=(h.data.shearX-h.shearX)*a,h.shearY+=(h.data.shearY-h.shearY)*a}else{var l=0,u=0;if(n>=o[o.length-m.ENTRIES])l=o[o.length+m.PREV_X],u=o[o.length+m.PREV_Y];else{var c=W.binarySearch(o,n,m.ENTRIES);l=o[c+m.PREV_X],u=o[c+m.PREV_Y];var d=o[c],p=this.getCurvePercent(c/m.ENTRIES-1,1-(n-d)/(o[c+m.PREV_TIME]-d));l+=(o[c+m.X]-l)*p,u+=(o[c+m.Y]-u)*p}switch(i){case B.setup:h.shearX=h.data.shearX+l*a,h.shearY=h.data.shearY+u*a;break;case B.first:case B.replace:h.shearX+=(h.data.shearX+l-h.shearX)*a,h.shearY+=(h.data.shearY+u-h.shearY)*a;break;case B.add:h.shearX+=l*a,h.shearY+=u*a}}},m);function m(t){return d.call(this,t)||this}X.ShearTimeline=p;var w,M=(__extends(E,w=i),E.prototype.getPropertyId=function(){return(n.color<<24)+this.slotIndex},E.prototype.setFrame=function(t,e,n,r,a,i){t*=E.ENTRIES,this.frames[t]=e,this.frames[t+E.R]=n,this.frames[t+E.G]=r,this.frames[t+E.B]=a,this.frames[t+E.A]=i},E.prototype.apply=function(t,e,n,r,a,i,s){var o=t.slots[this.slotIndex];if(o.bone.active){var h=this.frames;if(n<h[0])switch(i){case B.setup:return void o.color.setFromColor(o.data.color);case B.first:var l=o.color,u=o.data.color;l.add((u.r-l.r)*a,(u.g-l.g)*a,(u.b-l.b)*a,(u.a-l.a)*a)}else{var c=0,d=0,p=0,f=0;if(n>=h[h.length-E.ENTRIES]){var m=h.length;c=h[m+E.PREV_R],d=h[m+E.PREV_G],p=h[m+E.PREV_B],f=h[m+E.PREV_A]}else{var g=W.binarySearch(h,n,E.ENTRIES);c=h[g+E.PREV_R],d=h[g+E.PREV_G],p=h[g+E.PREV_B],f=h[g+E.PREV_A];var v=h[g],y=this.getCurvePercent(g/E.ENTRIES-1,1-(n-v)/(h[g+E.PREV_TIME]-v));c+=(h[g+E.R]-c)*y,d+=(h[g+E.G]-d)*y,p+=(h[g+E.B]-p)*y,f+=(h[g+E.A]-f)*y}1==a?o.color.set(c,d,p,f):(l=o.color,i==B.setup&&l.setFromColor(o.data.color),l.add((c-l.r)*a,(d-l.g)*a,(p-l.b)*a,(f-l.a)*a))}}},E.ENTRIES=5,E.PREV_TIME=-5,E.PREV_R=-4,E.PREV_G=-3,E.PREV_B=-2,E.PREV_A=-1,E.R=1,E.G=2,E.B=3,E.A=4,E);function E(t){var e=w.call(this,t)||this;return e.frames=X.Utils.newFloatArray(t*E.ENTRIES),e}X.ColorTimeline=M;var T,A=(__extends(b,T=i),b.prototype.getPropertyId=function(){return(n.twoColor<<24)+this.slotIndex},b.prototype.setFrame=function(t,e,n,r,a,i,s,o,h){t*=b.ENTRIES,this.frames[t]=e,this.frames[t+b.R]=n,this.frames[t+b.G]=r,this.frames[t+b.B]=a,this.frames[t+b.A]=i,this.frames[t+b.R2]=s,this.frames[t+b.G2]=o,this.frames[t+b.B2]=h},b.prototype.apply=function(t,e,n,r,a,i,s){var o=t.slots[this.slotIndex];if(o.bone.active){var h=this.frames;if(n<h[0])switch(i){case B.setup:return o.color.setFromColor(o.data.color),void o.darkColor.setFromColor(o.data.darkColor);case B.first:var l=o.color,u=o.darkColor,c=o.data.color,d=o.data.darkColor;l.add((c.r-l.r)*a,(c.g-l.g)*a,(c.b-l.b)*a,(c.a-l.a)*a),u.add((d.r-u.r)*a,(d.g-u.g)*a,(d.b-u.b)*a,0)}else{var p=0,f=0,m=0,g=0,v=0,y=0,x=0;if(n>=h[h.length-b.ENTRIES]){var w=h.length;p=h[w+b.PREV_R],f=h[w+b.PREV_G],m=h[w+b.PREV_B],g=h[w+b.PREV_A],v=h[w+b.PREV_R2],y=h[w+b.PREV_G2],x=h[w+b.PREV_B2]}else{var M=W.binarySearch(h,n,b.ENTRIES);p=h[M+b.PREV_R],f=h[M+b.PREV_G],m=h[M+b.PREV_B],g=h[M+b.PREV_A],v=h[M+b.PREV_R2],y=h[M+b.PREV_G2],x=h[M+b.PREV_B2];var E=h[M],T=this.getCurvePercent(M/b.ENTRIES-1,1-(n-E)/(h[M+b.PREV_TIME]-E));p+=(h[M+b.R]-p)*T,f+=(h[M+b.G]-f)*T,m+=(h[M+b.B]-m)*T,g+=(h[M+b.A]-g)*T,v+=(h[M+b.R2]-v)*T,y+=(h[M+b.G2]-y)*T,x+=(h[M+b.B2]-x)*T}1==a?(o.color.set(p,f,m,g),o.darkColor.set(v,y,x,1)):(l=o.color,u=o.darkColor,i==B.setup&&(l.setFromColor(o.data.color),u.setFromColor(o.data.darkColor)),l.add((p-l.r)*a,(f-l.g)*a,(m-l.b)*a,(g-l.a)*a),u.add((v-u.r)*a,(y-u.g)*a,(x-u.b)*a,0))}}},b.ENTRIES=8,b.PREV_TIME=-8,b.PREV_R=-7,b.PREV_G=-6,b.PREV_B=-5,b.PREV_A=-4,b.PREV_R2=-3,b.PREV_G2=-2,b.PREV_B2=-1,b.R=1,b.G=2,b.B=3,b.A=4,b.R2=5,b.G2=6,b.B2=7,b);function b(t){var e=T.call(this,t)||this;return e.frames=X.Utils.newFloatArray(t*b.ENTRIES),e}X.TwoColorTimeline=A;var I=(S.prototype.getPropertyId=function(){return(n.attachment<<24)+this.slotIndex},S.prototype.getFrameCount=function(){return this.frames.length},S.prototype.setFrame=function(t,e,n){this.frames[t]=e,this.attachmentNames[t]=n},S.prototype.apply=function(t,e,n,r,a,i,s){var o=t.slots[this.slotIndex];if(o.bone.active)if(s!=g.mixOut||i!=B.setup){var h=this.frames;if(n<h[0]){if(i==B.setup||i==B.first){var l=o.data.attachmentName;o.setAttachment(null==l?null:t.getAttachment(this.slotIndex,l))}}else{var u=0;u=n>=h[h.length-1]?h.length-1:W.binarySearch(h,n,1)-1;var c=this.attachmentNames[u];t.slots[this.slotIndex].setAttachment(null==c?null:t.getAttachment(this.slotIndex,c))}}else{var d=o.data.attachmentName;o.setAttachment(null==d?null:t.getAttachment(this.slotIndex,d))}},S);function S(t){this.frames=X.Utils.newFloatArray(t),this.attachmentNames=new Array(t)}X.AttachmentTimeline=I;var C,R=null,P=(__extends(_,C=i),_.prototype.getPropertyId=function(){return(n.deform<<27)+ +this.attachment.id+this.slotIndex},_.prototype.setFrame=function(t,e,n){this.frames[t]=e,this.frameVertices[t]=n},_.prototype.apply=function(t,e,n,r,a,i,s){var o=t.slots[this.slotIndex];if(o.bone.active){var h=o.getAttachment();if(h instanceof X.VertexAttachment&&h.deformAttachment==this.attachment){var l=o.deform;0==l.length&&(i=B.setup);var u=this.frameVertices,c=u[0].length,d=this.frames;if(n<d[0]){var p=h;switch(i){case B.setup:return void(l.length=0);case B.first:if(1==a){l.length=0;break}var f=X.Utils.setArraySize(l,c);if(null==p.bones)for(var m=p.vertices,g=0;g<c;g++)f[g]+=(m[g]-f[g])*a;else for(a=1-a,g=0;g<c;g++)f[g]*=a}}else{var v=X.Utils.setArraySize(l,c);if(n>=d[d.length-1]){var y=u[d.length-1];if(1==a)if(i==B.add)if(null==(p=h).bones){m=p.vertices;for(var x=0;x<c;x++)v[x]+=y[x]-m[x]}else for(var w=0;w<c;w++)v[w]+=y[w];else X.Utils.arrayCopy(y,0,v,0,c);else switch(i){case B.setup:if(null==h.bones){m=h.vertices;for(var M=0;M<c;M++){var E=m[M];v[M]=E+(y[M]-E)*a}}else for(var T=0;T<c;T++)v[T]=y[T]*a;break;case B.first:case B.replace:for(var A=0;A<c;A++)v[A]+=(y[A]-v[A])*a;break;case B.add:if(null==(p=h).bones){m=p.vertices;for(var b=0;b<c;b++)v[b]+=(y[b]-m[b])*a}else for(var I=0;I<c;I++)v[I]+=y[I]*a}}else{var S=W.binarySearch(d,n),C=u[S-1],R=u[S],P=d[S],_=this.getCurvePercent(S-1,1-(n-P)/(d[S-1]-P));if(1==a)if(i==B.add)if(null==(p=h).bones){m=p.vertices;for(var V=0;V<c;V++){var k=C[V];v[V]+=k+(R[V]-k)*_-m[V]}}else for(var F=0;F<c;F++)k=C[F],v[F]+=k+(R[F]-k)*_;else for(var N=0;N<c;N++)k=C[N],v[N]=k+(R[N]-k)*_;else switch(i){case B.setup:if(null==h.bones){m=h.vertices;for(var L=0;L<c;L++)k=C[L],E=m[L],v[L]=E+(k+(R[L]-k)*_-E)*a}else for(var U=0;U<c;U++)k=C[U],v[U]=(k+(R[U]-k)*_)*a;break;case B.first:case B.replace:for(var D=0;D<c;D++)k=C[D],v[D]+=(k+(R[D]-k)*_-v[D])*a;break;case B.add:if(null==(p=h).bones){m=p.vertices;for(var O=0;O<c;O++)k=C[O],v[O]+=(k+(R[O]-k)*_-m[O])*a}else for(var Y=0;Y<c;Y++)k=C[Y],v[Y]+=(k+(R[Y]-k)*_)*a}}}}}},_);function _(t){var e=C.call(this,t)||this;return e.frames=X.Utils.newFloatArray(t),e.frameVertices=new Array(t),null==R&&(R=X.Utils.newFloatArray(64)),e}X.DeformTimeline=P;var V=(k.prototype.getPropertyId=function(){return n.event<<24},k.prototype.getFrameCount=function(){return this.frames.length},k.prototype.setFrame=function(t,e){this.frames[t]=e.time,this.events[t]=e},k.prototype.apply=function(t,e,n,r,a,i,s){if(null!=r){var o=this.frames,h=this.frames.length;if(n<e)this.apply(t,e,Number.MAX_VALUE,r,a,i,s),e=-1;else if(e>=o[h-1])return;if(!(n<o[0])){var l=0;if(e<o[0])l=0;else for(var u=o[l=W.binarySearch(o,e)];0<l&&o[l-1]==u;)l--;for(;l<h&&n>=o[l];l++)r.push(this.events[l])}}},k);function k(t){this.frames=X.Utils.newFloatArray(t),this.events=new Array(t)}X.EventTimeline=V;var F=(N.prototype.getPropertyId=function(){return n.drawOrder<<24},N.prototype.getFrameCount=function(){return this.frames.length},N.prototype.setFrame=function(t,e,n){this.frames[t]=e,this.drawOrders[t]=n},N.prototype.apply=function(t,e,n,r,a,i,s){var o=t.drawOrder,h=t.slots;if(s!=g.mixOut||i!=B.setup){var l=this.frames;if(n<l[0])i!=B.setup&&i!=B.first||X.Utils.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);else{var u=0;u=n>=l[l.length-1]?l.length-1:W.binarySearch(l,n)-1;var c=this.drawOrders[u];if(null==c)X.Utils.arrayCopy(h,0,o,0,h.length);else for(var d=0,p=c.length;d<p;d++)o[d]=h[c[d]]}}else X.Utils.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length)},N);function N(t){this.frames=X.Utils.newFloatArray(t),this.drawOrders=new Array(t)}X.DrawOrderTimeline=F;var L,U=(__extends(D,L=i),D.prototype.getPropertyId=function(){return(n.ikConstraint<<24)+this.ikConstraintIndex},D.prototype.setFrame=function(t,e,n,r,a,i,s){t*=D.ENTRIES,this.frames[t]=e,this.frames[t+D.MIX]=n,this.frames[t+D.SOFTNESS]=r,this.frames[t+D.BEND_DIRECTION]=a,this.frames[t+D.COMPRESS]=i?1:0,this.frames[t+D.STRETCH]=s?1:0},D.prototype.apply=function(t,e,n,r,a,i,s){var o=this.frames,h=t.ikConstraints[this.ikConstraintIndex];if(h.active)if(n<o[0])switch(i){case B.setup:return h.mix=h.data.mix,h.softness=h.data.softness,h.bendDirection=h.data.bendDirection,h.compress=h.data.compress,void(h.stretch=h.data.stretch);case B.first:h.mix+=(h.data.mix-h.mix)*a,h.softness+=(h.data.softness-h.softness)*a,h.bendDirection=h.data.bendDirection,h.compress=h.data.compress,h.stretch=h.data.stretch}else if(n>=o[o.length-D.ENTRIES])i==B.setup?(h.mix=h.data.mix+(o[o.length+D.PREV_MIX]-h.data.mix)*a,h.softness=h.data.softness+(o[o.length+D.PREV_SOFTNESS]-h.data.softness)*a,s==g.mixOut?(h.bendDirection=h.data.bendDirection,h.compress=h.data.compress,h.stretch=h.data.stretch):(h.bendDirection=o[o.length+D.PREV_BEND_DIRECTION],h.compress=0!=o[o.length+D.PREV_COMPRESS],h.stretch=0!=o[o.length+D.PREV_STRETCH])):(h.mix+=(o[o.length+D.PREV_MIX]-h.mix)*a,h.softness+=(o[o.length+D.PREV_SOFTNESS]-h.softness)*a,s==g.mixIn&&(h.bendDirection=o[o.length+D.PREV_BEND_DIRECTION],h.compress=0!=o[o.length+D.PREV_COMPRESS],h.stretch=0!=o[o.length+D.PREV_STRETCH]));else{var l=W.binarySearch(o,n,D.ENTRIES),u=o[l+D.PREV_MIX],c=o[l+D.PREV_SOFTNESS],d=o[l],p=this.getCurvePercent(l/D.ENTRIES-1,1-(n-d)/(o[l+D.PREV_TIME]-d));i==B.setup?(h.mix=h.data.mix+(u+(o[l+D.MIX]-u)*p-h.data.mix)*a,h.softness=h.data.softness+(c+(o[l+D.SOFTNESS]-c)*p-h.data.softness)*a,s==g.mixOut?(h.bendDirection=h.data.bendDirection,h.compress=h.data.compress,h.stretch=h.data.stretch):(h.bendDirection=o[l+D.PREV_BEND_DIRECTION],h.compress=0!=o[l+D.PREV_COMPRESS],h.stretch=0!=o[l+D.PREV_STRETCH])):(h.mix+=(u+(o[l+D.MIX]-u)*p-h.mix)*a,h.softness+=(c+(o[l+D.SOFTNESS]-c)*p-h.softness)*a,s==g.mixIn&&(h.bendDirection=o[l+D.PREV_BEND_DIRECTION],h.compress=0!=o[l+D.PREV_COMPRESS],h.stretch=0!=o[l+D.PREV_STRETCH]))}},D.ENTRIES=6,D.PREV_TIME=-6,D.PREV_MIX=-5,D.PREV_SOFTNESS=-4,D.PREV_BEND_DIRECTION=-3,D.PREV_COMPRESS=-2,D.PREV_STRETCH=-1,D.MIX=1,D.SOFTNESS=2,D.BEND_DIRECTION=3,D.COMPRESS=4,D.STRETCH=5,D);function D(t){var e=L.call(this,t)||this;return e.frames=X.Utils.newFloatArray(t*D.ENTRIES),e}X.IkConstraintTimeline=U;var O,Y=(__extends(q,O=i),q.prototype.getPropertyId=function(){return(n.transformConstraint<<24)+this.transformConstraintIndex},q.prototype.setFrame=function(t,e,n,r,a,i){t*=q.ENTRIES,this.frames[t]=e,this.frames[t+q.ROTATE]=n,this.frames[t+q.TRANSLATE]=r,this.frames[t+q.SCALE]=a,this.frames[t+q.SHEAR]=i},q.prototype.apply=function(t,e,n,r,a,i,s){var o=this.frames,h=t.transformConstraints[this.transformConstraintIndex];if(h.active)if(n<o[0]){var l=h.data;switch(i){case B.setup:return h.rotateMix=l.rotateMix,h.translateMix=l.translateMix,h.scaleMix=l.scaleMix,void(h.shearMix=l.shearMix);case B.first:h.rotateMix+=(l.rotateMix-h.rotateMix)*a,h.translateMix+=(l.translateMix-h.translateMix)*a,h.scaleMix+=(l.scaleMix-h.scaleMix)*a,h.shearMix+=(l.shearMix-h.shearMix)*a}}else{var u=0,c=0,d=0,p=0;if(n>=o[o.length-q.ENTRIES]){var f=o.length;u=o[f+q.PREV_ROTATE],c=o[f+q.PREV_TRANSLATE],d=o[f+q.PREV_SCALE],p=o[f+q.PREV_SHEAR]}else{var m=W.binarySearch(o,n,q.ENTRIES);u=o[m+q.PREV_ROTATE],c=o[m+q.PREV_TRANSLATE],d=o[m+q.PREV_SCALE],p=o[m+q.PREV_SHEAR];var g=o[m],v=this.getCurvePercent(m/q.ENTRIES-1,1-(n-g)/(o[m+q.PREV_TIME]-g));u+=(o[m+q.ROTATE]-u)*v,c+=(o[m+q.TRANSLATE]-c)*v,d+=(o[m+q.SCALE]-d)*v,p+=(o[m+q.SHEAR]-p)*v}i==B.setup?(l=h.data,h.rotateMix=l.rotateMix+(u-l.rotateMix)*a,h.translateMix=l.translateMix+(c-l.translateMix)*a,h.scaleMix=l.scaleMix+(d-l.scaleMix)*a,h.shearMix=l.shearMix+(p-l.shearMix)*a):(h.rotateMix+=(u-h.rotateMix)*a,h.translateMix+=(c-h.translateMix)*a,h.scaleMix+=(d-h.scaleMix)*a,h.shearMix+=(p-h.shearMix)*a)}},q.ENTRIES=5,q.PREV_TIME=-5,q.PREV_ROTATE=-4,q.PREV_TRANSLATE=-3,q.PREV_SCALE=-2,q.PREV_SHEAR=-1,q.ROTATE=1,q.TRANSLATE=2,q.SCALE=3,q.SHEAR=4,q);function q(t){var e=O.call(this,t)||this;return e.frames=X.Utils.newFloatArray(t*q.ENTRIES),e}X.TransformConstraintTimeline=Y;var H,j=(__extends(G,H=i),G.prototype.getPropertyId=function(){return(n.pathConstraintPosition<<24)+this.pathConstraintIndex},G.prototype.setFrame=function(t,e,n){t*=G.ENTRIES,this.frames[t]=e,this.frames[t+G.VALUE]=n},G.prototype.apply=function(t,e,n,r,a,i,s){var o=this.frames,h=t.pathConstraints[this.pathConstraintIndex];if(h.active)if(n<o[0])switch(i){case B.setup:return void(h.position=h.data.position);case B.first:h.position+=(h.data.position-h.position)*a}else{var l=0;if(n>=o[o.length-G.ENTRIES])l=o[o.length+G.PREV_VALUE];else{var u=W.binarySearch(o,n,G.ENTRIES);l=o[u+G.PREV_VALUE];var c=o[u],d=this.getCurvePercent(u/G.ENTRIES-1,1-(n-c)/(o[u+G.PREV_TIME]-c));l+=(o[u+G.VALUE]-l)*d}i==B.setup?h.position=h.data.position+(l-h.data.position)*a:h.position+=(l-h.position)*a}},G.ENTRIES=2,G.PREV_TIME=-2,G.PREV_VALUE=-1,G.VALUE=1,G);function G(t){var e=H.call(this,t)||this;return e.frames=X.Utils.newFloatArray(t*G.ENTRIES),e}X.PathConstraintPositionTimeline=j;var z,Z=(__extends(J,z=j),J.prototype.getPropertyId=function(){return(n.pathConstraintSpacing<<24)+this.pathConstraintIndex},J.prototype.apply=function(t,e,n,r,a,i,s){var o=this.frames,h=t.pathConstraints[this.pathConstraintIndex];if(h.active)if(n<o[0])switch(i){case B.setup:return void(h.spacing=h.data.spacing);case B.first:h.spacing+=(h.data.spacing-h.spacing)*a}else{var l=0;if(n>=o[o.length-J.ENTRIES])l=o[o.length+J.PREV_VALUE];else{var u=W.binarySearch(o,n,J.ENTRIES);l=o[u+J.PREV_VALUE];var c=o[u],d=this.getCurvePercent(u/J.ENTRIES-1,1-(n-c)/(o[u+J.PREV_TIME]-c));l+=(o[u+J.VALUE]-l)*d}i==B.setup?h.spacing=h.data.spacing+(l-h.data.spacing)*a:h.spacing+=(l-h.spacing)*a}},J);function J(t){return z.call(this,t)||this}X.PathConstraintSpacingTimeline=Z;var Q,K=(__extends($,Q=i),$.prototype.getPropertyId=function(){return(n.pathConstraintMix<<24)+this.pathConstraintIndex},$.prototype.setFrame=function(t,e,n,r){t*=$.ENTRIES,this.frames[t]=e,this.frames[t+$.ROTATE]=n,this.frames[t+$.TRANSLATE]=r},$.prototype.apply=function(t,e,n,r,a,i,s){var o=this.frames,h=t.pathConstraints[this.pathConstraintIndex];if(h.active)if(n<o[0])switch(i){case B.setup:return h.rotateMix=h.data.rotateMix,void(h.translateMix=h.data.translateMix);case B.first:h.rotateMix+=(h.data.rotateMix-h.rotateMix)*a,h.translateMix+=(h.data.translateMix-h.translateMix)*a}else{var l=0,u=0;if(n>=o[o.length-$.ENTRIES])l=o[o.length+$.PREV_ROTATE],u=o[o.length+$.PREV_TRANSLATE];else{var c=W.binarySearch(o,n,$.ENTRIES);l=o[c+$.PREV_ROTATE],u=o[c+$.PREV_TRANSLATE];var d=o[c],p=this.getCurvePercent(c/$.ENTRIES-1,1-(n-d)/(o[c+$.PREV_TIME]-d));l+=(o[c+$.ROTATE]-l)*p,u+=(o[c+$.TRANSLATE]-u)*p}i==B.setup?(h.rotateMix=h.data.rotateMix+(l-h.data.rotateMix)*a,h.translateMix=h.data.translateMix+(u-h.data.translateMix)*a):(h.rotateMix+=(l-h.rotateMix)*a,h.translateMix+=(u-h.translateMix)*a)}},$.ENTRIES=3,$.PREV_TIME=-3,$.PREV_ROTATE=-2,$.PREV_TRANSLATE=-1,$.ROTATE=1,$.TRANSLATE=2,$);function $(t){var e=Q.call(this,t)||this;return e.frames=X.Utils.newFloatArray(t*$.ENTRIES),e}X.PathConstraintMixTimeline=K}(spine=spine||{}),function(A){var t=(b.prototype.update=function(t){t*=this.timeScale;for(var e=this.tracks,n=0,r=e.length;n<r;n++){var a=e[n];if(null!=a){a.animationLast=a.nextAnimationLast,a.trackLast=a.nextTrackLast;var i=t*a.timeScale;if(0<a.delay){if(a.delay-=i,0<a.delay)continue;i=-a.delay,a.delay=0}var s=a.next;if(null!=s){var o=a.trackLast-s.delay;if(0<=o){for(s.delay=0,s.trackTime+=0==a.timeScale?0:(o/a.timeScale+t)*s.timeScale,a.trackTime+=i,this.setCurrent(n,s,!0);null!=s.mixingFrom;)s.mixTime+=t,s=s.mixingFrom;continue}}else if(a.trackLast>=a.trackEnd&&null==a.mixingFrom){e[n]=null,this.queue.end(a),this.disposeNext(a);continue}if(null!=a.mixingFrom&&this.updateMixingFrom(a,t)){var h=a.mixingFrom;for((a.mixingFrom=null)!=h&&(h.mixingTo=null);null!=h;)this.queue.end(h),h=h.mixingFrom}a.trackTime+=i}}this.queue.drain()},b.prototype.updateMixingFrom=function(t,e){var n=t.mixingFrom;if(null==n)return!0;var r=this.updateMixingFrom(n,e);return n.animationLast=n.nextAnimationLast,n.trackLast=n.nextTrackLast,0<t.mixTime&&t.mixTime>=t.mixDuration?(0!=n.totalAlpha&&0!=t.mixDuration||(t.mixingFrom=n.mixingFrom,null!=n.mixingFrom&&(n.mixingFrom.mixingTo=t),t.interruptAlpha=n.interruptAlpha,this.queue.end(n)),r):(n.trackTime+=e*n.timeScale,t.mixTime+=e,!1)},b.prototype.apply=function(t){if(null==t)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var e=this.events,n=this.tracks,r=!1,a=0,i=n.length;a<i;a++){var s=n[a];if(!(null==s||0<s.delay)){r=!0;var o=0==a?A.MixBlend.first:s.mixBlend,h=s.alpha;null!=s.mixingFrom?h*=this.applyMixingFrom(s,t,o):s.trackTime>=s.trackEnd&&null==s.next&&(h=0);var l=s.animationLast,u=s.getAnimationTime(),c=s.animation.timelines.length,d=s.animation.timelines;if(0==a&&1==h||o==A.MixBlend.add)for(var p=0;p<c;p++)A.Utils.webkit602BugfixHelper(h,o),d[p].apply(t,l,u,e,h,o,A.MixDirection.mixIn);else{var f=s.timelineMode,m=0==s.timelinesRotation.length;m&&A.Utils.setArraySize(s.timelinesRotation,c<<1,null);var g=s.timelinesRotation;for(p=0;p<c;p++){var v=d[p],y=(f[p]&b.NOT_LAST-1)==b.SUBSEQUENT?o:A.MixBlend.setup;v instanceof A.RotateTimeline?this.applyRotateTimeline(v,t,u,h,y,g,p<<1,m):(A.Utils.webkit602BugfixHelper(h,o),v.apply(t,l,u,e,h,y,A.MixDirection.mixIn))}}this.queueEvents(s,u),e.length=0,s.nextAnimationLast=u,s.nextTrackLast=s.trackTime}}return this.queue.drain(),r},b.prototype.applyMixingFrom=function(t,e,n){var r=t.mixingFrom;null!=r.mixingFrom&&this.applyMixingFrom(r,e,n);var a=0;0==t.mixDuration?(a=1,n==A.MixBlend.first&&(n=A.MixBlend.setup)):(1<(a=t.mixTime/t.mixDuration)&&(a=1),n!=A.MixBlend.first&&(n=r.mixBlend));var i=a<r.eventThreshold?this.events:null,s=a<r.attachmentThreshold,o=a<r.drawOrderThreshold,h=r.animationLast,l=r.getAnimationTime(),u=r.animation.timelines.length,c=r.animation.timelines,d=r.alpha*t.interruptAlpha,p=d*(1-a);if(n==A.MixBlend.add)for(var f=0;f<u;f++)c[f].apply(e,h,l,i,p,n,A.MixDirection.mixOut);else{var m=r.timelineMode,g=r.timelineHoldMix,v=0==r.timelinesRotation.length;v&&A.Utils.setArraySize(r.timelinesRotation,u<<1,null);var y=r.timelinesRotation;for(f=r.totalAlpha=0;f<u;f++){var x=c[f],w=A.MixDirection.mixOut,M=void 0,E=0;switch(m[f]&b.NOT_LAST-1){case b.SUBSEQUENT:if(M=n,!s&&x instanceof A.AttachmentTimeline){if((m[f]&b.NOT_LAST)==b.NOT_LAST)continue;M=A.MixBlend.setup}if(!o&&x instanceof A.DrawOrderTimeline)continue;E=p;break;case b.FIRST:M=A.MixBlend.setup,E=p;break;case b.HOLD:M=A.MixBlend.setup,E=d;break;default:M=A.MixBlend.setup;var T=g[f];E=d*Math.max(0,1-T.mixTime/T.mixDuration)}r.totalAlpha+=E,x instanceof A.RotateTimeline?this.applyRotateTimeline(x,e,l,E,M,y,f<<1,v):(A.Utils.webkit602BugfixHelper(E,n),M==A.MixBlend.setup&&(x instanceof A.AttachmentTimeline?!s&&(m[f]&b.NOT_LAST)!=b.NOT_LAST||(w=A.MixDirection.mixIn):x instanceof A.DrawOrderTimeline&&o&&(w=A.MixDirection.mixIn)),x.apply(e,h,l,i,E,M,w))}}return 0<t.mixDuration&&this.queueEvents(r,l),this.events.length=0,r.nextAnimationLast=l,r.nextTrackLast=r.trackTime,a},b.prototype.applyRotateTimeline=function(t,e,n,r,a,i,s,o){if(o&&(i[s]=0),1!=r){var h=t,l=h.frames,u=e.bones[h.boneIndex];if(u.active){var c=0,d=0;if(n<l[0])switch(a){case A.MixBlend.setup:u.rotation=u.data.rotation;default:return;case A.MixBlend.first:c=u.rotation,d=u.data.rotation}else if(c=a==A.MixBlend.setup?u.data.rotation:u.rotation,n>=l[l.length-A.RotateTimeline.ENTRIES])d=u.data.rotation+l[l.length+A.RotateTimeline.PREV_ROTATION];else{var p=A.Animation.binarySearch(l,n,A.RotateTimeline.ENTRIES),f=l[p+A.RotateTimeline.PREV_ROTATION],m=l[p],g=h.getCurvePercent((p>>1)-1,1-(n-m)/(l[p+A.RotateTimeline.PREV_TIME]-m));d=l[p+A.RotateTimeline.ROTATION]-f,d=f+(d-=360*(16384-(16384.499999999996-d/360|0)))*g+u.data.rotation,d-=360*(16384-(16384.499999999996-d/360|0))}var v=0,y=d-c;if(0==(y-=360*(16384-(16384.499999999996-y/360|0))))v=i[s];else{var x=0,w=0;w=o?(x=0,y):(x=i[s],i[s+1]);var M=0<y,E=0<=x;A.MathUtils.signum(w)!=A.MathUtils.signum(y)&&Math.abs(w)<=90&&(180<Math.abs(x)&&(x+=360*A.MathUtils.signum(x)),E=M),v=y+x-x%360,E!=M&&(v+=360*A.MathUtils.signum(x)),i[s]=v}i[s+1]=y,c+=v*r,u.rotation=c-360*(16384-(16384.499999999996-c/360|0))}}else t.apply(e,0,n,null,1,a,A.MixDirection.mixIn)},b.prototype.queueEvents=function(t,e){for(var n=t.animationStart,r=t.animationEnd,a=r-n,i=t.trackLast%a,s=this.events,o=0,h=s.length;o<h;o++){var l=s[o];if(l.time<i)break;l.time>r||this.queue.event(t,l)}for((t.loop?0==a||i>t.trackTime%a:r<=e&&t.animationLast<r)&&this.queue.complete(t);o<h;o++)s[o].time<n||this.queue.event(t,s[o])},b.prototype.clearTracks=function(){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var e=0,n=this.tracks.length;e<n;e++)this.clearTrack(e);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()},b.prototype.clearTrack=function(t){if(!(t>=this.tracks.length)){var e=this.tracks[t];if(null!=e){this.queue.end(e),this.disposeNext(e);for(var n=e;;){var r=n.mixingFrom;if(null==r)break;this.queue.end(r),n.mixingFrom=null,n.mixingTo=null,n=r}this.tracks[e.trackIndex]=null,this.queue.drain()}}},b.prototype.setCurrent=function(t,e,n){var r=this.expandToIndex(t);this.tracks[t]=e,null!=r&&(n&&this.queue.interrupt(r),((e.mixingFrom=r).mixingTo=e).mixTime=0,null!=r.mixingFrom&&0<r.mixDuration&&(e.interruptAlpha*=Math.min(1,r.mixTime/r.mixDuration)),r.timelinesRotation.length=0),this.queue.start(e)},b.prototype.setAnimation=function(t,e,n){var r=this.data.skeletonData.findAnimation(e);if(null==r)throw new Error("Animation not found: "+e);return this.setAnimationWith(t,r,n)},b.prototype.setAnimationWith=function(t,e,n){if(null==e)throw new Error("animation cannot be null.");var r=!0,a=this.expandToIndex(t);null!=a&&(-1==a.nextTrackLast?(this.tracks[t]=a.mixingFrom,this.queue.interrupt(a),this.queue.end(a),this.disposeNext(a),a=a.mixingFrom,r=!1):this.disposeNext(a));var i=this.trackEntry(t,e,n,a);return this.setCurrent(t,i,r),this.queue.drain(),i},b.prototype.addAnimation=function(t,e,n,r){var a=this.data.skeletonData.findAnimation(e);if(null==a)throw new Error("Animation not found: "+e);return this.addAnimationWith(t,a,n,r)},b.prototype.addAnimationWith=function(t,e,n,r){if(null==e)throw new Error("animation cannot be null.");var a=this.expandToIndex(t);if(null!=a)for(;null!=a.next;)a=a.next;var i=this.trackEntry(t,e,n,a);if(null==a)this.setCurrent(t,i,!0),this.queue.drain();else if(a.next=i,r<=0){var s=a.animationEnd-a.animationStart;0!=s?(a.loop?r+=s*(1+(a.trackTime/s|0)):r+=Math.max(s,a.trackTime),r-=this.data.getMix(a.animation,e)):r=a.trackTime}return i.delay=r,i},b.prototype.setEmptyAnimation=function(t,e){var n=this.setAnimationWith(t,b.emptyAnimation,!1);return n.mixDuration=e,n.trackEnd=e,n},b.prototype.addEmptyAnimation=function(t,e,n){n<=0&&(n-=e);var r=this.addAnimationWith(t,b.emptyAnimation,!1,n);return r.mixDuration=e,r.trackEnd=e,r},b.prototype.setEmptyAnimations=function(t){var e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var n=0,r=this.tracks.length;n<r;n++){var a=this.tracks[n];null!=a&&this.setEmptyAnimation(a.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()},b.prototype.expandToIndex=function(t){return t<this.tracks.length?this.tracks[t]:(A.Utils.ensureArrayCapacity(this.tracks,t+1,null),this.tracks.length=t+1,null)},b.prototype.trackEntry=function(t,e,n,r){var a=this.trackEntryPool.obtain();return a.trackIndex=t,a.animation=e,a.loop=n,a.holdPrevious=!1,a.eventThreshold=0,a.attachmentThreshold=0,a.drawOrderThreshold=0,a.animationStart=0,a.animationEnd=e.duration,a.animationLast=-1,a.nextAnimationLast=-1,a.delay=0,a.trackTime=0,a.trackLast=-1,a.nextTrackLast=-1,a.trackEnd=Number.MAX_VALUE,a.timeScale=1,a.alpha=1,a.interruptAlpha=1,a.mixTime=0,a.mixDuration=null==r?0:this.data.getMix(r.animation,e),a.mixBlend=A.MixBlend.replace,a},b.prototype.disposeNext=function(t){for(var e=t.next;null!=e;)this.queue.dispose(e),e=e.next;t.next=null},b.prototype._animationsChanged=function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var t=0,e=this.tracks.length;t<e;t++)if(null!=(n=this.tracks[t])){for(;null!=n.mixingFrom;)n=n.mixingFrom;for(;null!=n.mixingFrom&&n.mixBlend==A.MixBlend.add||this.computeHold(n),null!=(n=n.mixingTo););}for(this.propertyIDs.clear(),t=this.tracks.length-1;0<=t;t--)for(var n=this.tracks[t];null!=n;)this.computeNotLast(n),n=n.mixingFrom},b.prototype.computeHold=function(t){var e=t.mixingTo,n=t.animation.timelines,r=t.animation.timelines.length,a=A.Utils.setArraySize(t.timelineMode,r);t.timelineHoldMix.length=0;var i=A.Utils.setArraySize(t.timelineHoldMix,r),s=this.propertyIDs;if(null!=e&&e.holdPrevious)for(var o=0;o<r;o++)s.add(n[o].getPropertyId()),a[o]=b.HOLD;else t:for(o=0;o<r;o++){var h=n[o],l=h.getPropertyId();if(s.add(l))if(null==e||h instanceof A.AttachmentTimeline||h instanceof A.DrawOrderTimeline||h instanceof A.EventTimeline||!e.animation.hasTimeline(l))a[o]=b.FIRST;else{for(var u=e.mixingTo;null!=u;u=u.mixingTo)if(!u.animation.hasTimeline(l)){if(0<t.mixDuration){a[o]=b.HOLD_MIX,i[o]=u;continue t}break}a[o]=b.HOLD}else a[o]=b.SUBSEQUENT}},b.prototype.computeNotLast=function(t){for(var e=t.animation.timelines,n=t.animation.timelines.length,r=t.timelineMode,a=this.propertyIDs,i=0;i<n;i++)if(e[i]instanceof A.AttachmentTimeline){var s=e[i];a.add(s.slotIndex)||(r[i]|=b.NOT_LAST)}},b.prototype.getCurrent=function(t){return t>=this.tracks.length?null:this.tracks[t]},b.prototype.addListener=function(t){if(null==t)throw new Error("listener cannot be null.");this.listeners.push(t)},b.prototype.removeListener=function(t){var e=this.listeners.indexOf(t);0<=e&&this.listeners.splice(e,1)},b.prototype.clearListeners=function(){this.listeners.length=0},b.prototype.clearListenerNotifications=function(){this.queue.clear()},b.emptyAnimation=new A.Animation("<empty>",[],0),b.SUBSEQUENT=0,b.FIRST=1,b.HOLD=2,b.HOLD_MIX=3,b.NOT_LAST=4,b);function b(t){this.tracks=new Array,this.timeScale=1,this.events=new Array,this.listeners=new Array,this.queue=new a(this),this.propertyIDs=new A.IntSet,this.animationsChanged=!1,this.trackEntryPool=new A.Pool(function(){return new e}),this.data=t}A.AnimationState=t;var e=(n.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0},n.prototype.getAnimationTime=function(){if(this.loop){var t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},n.prototype.setAnimationLast=function(t){this.animationLast=t,this.nextAnimationLast=t},n.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},n.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},n);function n(){this.mixBlend=A.MixBlend.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}A.TrackEntry=e;var o,r,a=(i.prototype.start=function(t){this.objects.push(o.start),this.objects.push(t),this.animState.animationsChanged=!0},i.prototype.interrupt=function(t){this.objects.push(o.interrupt),this.objects.push(t)},i.prototype.end=function(t){this.objects.push(o.end),this.objects.push(t),this.animState.animationsChanged=!0},i.prototype.dispose=function(t){this.objects.push(o.dispose),this.objects.push(t)},i.prototype.complete=function(t){this.objects.push(o.complete),this.objects.push(t)},i.prototype.event=function(t,e){this.objects.push(o.event),this.objects.push(t),this.objects.push(e)},i.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var t=this.objects,e=this.animState.listeners,n=0;n<t.length;n+=2){var r=t[n],a=t[n+1];switch(r){case o.start:null!=a.listener&&a.listener.start&&a.listener.start(a);for(var i=0;i<e.length;i++)e[i].start&&e[i].start(a);break;case o.interrupt:for(null!=a.listener&&a.listener.interrupt&&a.listener.interrupt(a),i=0;i<e.length;i++)e[i].interrupt&&e[i].interrupt(a);break;case o.end:for(null!=a.listener&&a.listener.end&&a.listener.end(a),i=0;i<e.length;i++)e[i].end&&e[i].end(a);case o.dispose:for(null!=a.listener&&a.listener.dispose&&a.listener.dispose(a),i=0;i<e.length;i++)e[i].dispose&&e[i].dispose(a);this.animState.trackEntryPool.free(a);break;case o.complete:for(null!=a.listener&&a.listener.complete&&a.listener.complete(a),i=0;i<e.length;i++)e[i].complete&&e[i].complete(a);break;case o.event:var s=t[2+n++];for(null!=a.listener&&a.listener.event&&a.listener.event(a,s),i=0;i<e.length;i++)e[i].event&&e[i].event(a,s)}}this.clear(),this.drainDisabled=!1}},i.prototype.clear=function(){this.objects.length=0},i);function i(t){this.objects=[],this.drainDisabled=!1,this.animState=t}A.EventQueue=a,(r=o=A.EventType||(A.EventType={}))[r.start=0]="start",r[r.interrupt=1]="interrupt",r[r.end=2]="end",r[r.dispose=3]="dispose",r[r.complete=4]="complete",r[r.event=5]="event";var s=(h.prototype.start=function(t){},h.prototype.interrupt=function(t){},h.prototype.end=function(t){},h.prototype.dispose=function(t){},h.prototype.complete=function(t){},h.prototype.event=function(t,e){},h);function h(){}A.AnimationStateAdapter=s}(spine=spine||{}),function(t){var e=(n.prototype.setMix=function(t,e,n){var r=this.skeletonData.findAnimation(t);if(null==r)throw new Error("Animation not found: "+t);var a=this.skeletonData.findAnimation(e);if(null==a)throw new Error("Animation not found: "+e);this.setMixWith(r,a,n)},n.prototype.setMixWith=function(t,e,n){if(null==t)throw new Error("from cannot be null.");if(null==e)throw new Error("to cannot be null.");var r=t.name+"."+e.name;this.animationToMixTime[r]=n},n.prototype.getMix=function(t,e){var n=t.name+"."+e.name,r=this.animationToMixTime[n];return void 0===r?this.defaultMix:r},n);function n(t){if(this.animationToMixTime={},this.defaultMix=0,null==t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}t.AnimationStateData=e}(spine=spine||{}),function(p){var t=(e.prototype.downloadText=function(t,e,n){var r=new XMLHttpRequest;r.overrideMimeType("text/html"),this.rawDataUris[t]&&(t=this.rawDataUris[t]),r.open("GET",t,!0),r.onload=function(){200==r.status?e(r.responseText):n(r.status,r.responseText)},r.onerror=function(){n(r.status,r.responseText)},r.send()},e.prototype.downloadBinary=function(t,e,n){var r=new XMLHttpRequest;this.rawDataUris[t]&&(t=this.rawDataUris[t]),r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status?e(new Uint8Array(r.response)):n(r.status,r.responseText)},r.onerror=function(){n(r.status,r.responseText)},r.send()},e.prototype.setRawDataURI=function(t,e){this.rawDataUris[this.pathPrefix+t]=e},e.prototype.loadBinary=function(n,e,r){var a=this;void 0===e&&(e=null),void 0===r&&(r=null),n=this.pathPrefix+n,this.toLoad++,this.downloadBinary(n,function(t){a.assets[n]=t,e&&e(n,t),a.toLoad--,a.loaded++},function(t,e){a.errors[n]="Couldn't load binary "+n+": status "+status+", "+e,r&&r(n,"Couldn't load binary "+n+": status "+status+", "+e),a.toLoad--,a.loaded++})},e.prototype.loadText=function(n,e,r){var a=this;void 0===e&&(e=null),void 0===r&&(r=null),n=this.pathPrefix+n,this.toLoad++,this.downloadText(n,function(t){a.assets[n]=t,e&&e(n,t),a.toLoad--,a.loaded++},function(t,e){a.errors[n]="Couldn't load text "+n+": status "+status+", "+e,r&&r(n,"Couldn't load text "+n+": status "+status+", "+e),a.toLoad--,a.loaded++})},e.prototype.loadTexture=function(n,r,e){var a=this;void 0===r&&(r=null),void 0===e&&(e=null);var i=n=this.pathPrefix+n;this.toLoad++;var s=new Image;s.crossOrigin="anonymous",s.onload=function(t){var e=a.textureLoader(s);a.assets[i]=e,a.toLoad--,a.loaded++,r&&r(n,s)},s.onerror=function(t){a.errors[n]="Couldn't load image "+n,a.toLoad--,a.loaded++,e&&e(n,"Couldn't load image "+n)},this.rawDataUris[n]&&(n=this.rawDataUris[n]),s.src=n},e.prototype.loadTextureAtlas=function(h,l,u){var c=this;void 0===l&&(l=null),void 0===u&&(u=null);var d=0<=h.lastIndexOf("/")?h.substring(0,h.lastIndexOf("/")):"";h=this.pathPrefix+h,this.toLoad++,this.downloadText(h,function(i){var s={count:0},o=new Array;try{new p.TextureAtlas(i,function(t){o.push(""==d?t:d+"/"+t);var e=document.createElement("img");return e.width=16,e.height=16,new p.FakeTexture(e)})}catch(t){var e=t;return c.errors[h]="Couldn't load texture atlas "+h+": "+e.message,u&&u(h,"Couldn't load texture atlas "+h+": "+e.message),c.toLoad--,void c.loaded++}function t(t){var a=!1;c.loadTexture(t,function(t,e){if(s.count++,s.count==o.length)if(a)c.errors[h]="Couldn't load texture atlas page "+t+"} of atlas "+h,u&&u(h,"Couldn't load texture atlas page "+t+" of atlas "+h),c.toLoad--,c.loaded++;else try{var n=new p.TextureAtlas(i,function(t){return c.get(""==d?t:d+"/"+t)});c.assets[h]=n,l&&l(h,n),c.toLoad--,c.loaded++}catch(t){var r=t;c.errors[h]="Couldn't load texture atlas "+h+": "+r.message,u&&u(h,"Couldn't load texture atlas "+h+": "+r.message),c.toLoad--,c.loaded++}},function(t,e){a=!0,s.count++,s.count==o.length&&(c.errors[h]="Couldn't load texture atlas page "+t+"} of atlas "+h,u&&u(h,"Couldn't load texture atlas page "+t+" of atlas "+h),c.toLoad--,c.loaded++)})}for(var n=0,r=o;n<r.length;n++)t(r[n])},function(t,e){c.errors[h]="Couldn't load texture atlas "+h+": status "+status+", "+e,u&&u(h,"Couldn't load texture atlas "+h+": status "+status+", "+e),c.toLoad--,c.loaded++})},e.prototype.get=function(t){return t=this.pathPrefix+t,this.assets[t]},e.prototype.remove=function(t){t=this.pathPrefix+t;var e=this.assets[t];e.dispose&&e.dispose(),this.assets[t]=null},e.prototype.removeAll=function(){for(var t in this.assets){var e=this.assets[t];e.dispose&&e.dispose()}this.assets={}},e.prototype.isLoadingComplete=function(){return 0==this.toLoad},e.prototype.getToLoad=function(){return this.toLoad},e.prototype.getLoaded=function(){return this.loaded},e.prototype.dispose=function(){this.removeAll()},e.prototype.hasErrors=function(){return 0<Object.keys(this.errors).length},e.prototype.getErrors=function(){return this.errors},e);function e(t,e){void 0===e&&(e=""),this.assets={},this.errors={},this.toLoad=0,this.loaded=0,this.rawDataUris={},this.textureLoader=t,this.pathPrefix=e}p.AssetManager=t}(spine=spine||{}),function(i){var t=(e.prototype.newRegionAttachment=function(t,e,n){var r=this.atlas.findRegion(n);if(null==r)throw new Error("Region not found in atlas: "+n+" (region attachment: "+e+")");r.renderObject=r;var a=new i.RegionAttachment(e);return a.setRegion(r),a},e.prototype.newMeshAttachment=function(t,e,n){var r=this.atlas.findRegion(n);if(null==r)throw new Error("Region not found in atlas: "+n+" (mesh attachment: "+e+")");r.renderObject=r;var a=new i.MeshAttachment(e);return a.region=r,a},e.prototype.newBoundingBoxAttachment=function(t,e){return new i.BoundingBoxAttachment(e)},e.prototype.newPathAttachment=function(t,e){return new i.PathAttachment(e)},e.prototype.newPointAttachment=function(t,e){return new i.PointAttachment(e)},e.prototype.newClippingAttachment=function(t,e){return new i.ClippingAttachment(e)},e);function e(t){this.atlas=t}i.AtlasAttachmentLoader=t}(spine=spine||{}),function(t){var e;(e=t.BlendMode||(t.BlendMode={}))[e.Normal=0]="Normal",e[e.Additive=1]="Additive",e[e.Multiply=2]="Multiply",e[e.Screen=3]="Screen"}(spine=spine||{}),function(_){var t=(e.prototype.isActive=function(){return this.active},e.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},e.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},e.prototype.updateWorldTransformWith=function(t,e,n,r,a,i,s){this.ax=t,this.ay=e,this.arotation=n,this.ascaleX=r,this.ascaleY=a,this.ashearX=i,this.ashearY=s,this.appliedValid=!0;var o=this.parent;if(null==o){var h=this.skeleton,l=n+90+s,u=h.scaleX,c=h.scaleY;return this.a=_.MathUtils.cosDeg(n+i)*r*u,this.b=_.MathUtils.cosDeg(l)*a*u,this.c=_.MathUtils.sinDeg(n+i)*r*c,this.d=_.MathUtils.sinDeg(l)*a*c,this.worldX=t*u+h.x,void(this.worldY=e*c+h.y)}var d=o.a,p=o.b,f=o.c,m=o.d;switch(this.worldX=d*t+p*e+o.worldX,this.worldY=f*t+m*e+o.worldY,this.data.transformMode){case _.TransformMode.Normal:l=n+90+s;var g=_.MathUtils.cosDeg(n+i)*r,v=_.MathUtils.cosDeg(l)*a,y=_.MathUtils.sinDeg(n+i)*r,x=_.MathUtils.sinDeg(l)*a;return this.a=d*g+p*y,this.b=d*v+p*x,this.c=f*g+m*y,void(this.d=f*v+m*x);case _.TransformMode.OnlyTranslation:l=n+90+s,this.a=_.MathUtils.cosDeg(n+i)*r,this.b=_.MathUtils.cosDeg(l)*a,this.c=_.MathUtils.sinDeg(n+i)*r,this.d=_.MathUtils.sinDeg(l)*a;break;case _.TransformMode.NoRotationOrReflection:var w=0,M=n+i-(w=1e-4<(T=d*d+f*f)?(p=f*(T=Math.abs(d*m-p*f)/T),m=d*T,Math.atan2(f,d)*_.MathUtils.radDeg):(f=d=0,90-Math.atan2(m,p)*_.MathUtils.radDeg)),E=n+s-w+90;g=_.MathUtils.cosDeg(M)*r,v=_.MathUtils.cosDeg(E)*a,y=_.MathUtils.sinDeg(M)*r,x=_.MathUtils.sinDeg(E)*a,this.a=d*g-p*y,this.b=d*v-p*x,this.c=f*g+m*y,this.d=f*v+m*x;break;case _.TransformMode.NoScale:case _.TransformMode.NoScaleOrReflection:var T,A=_.MathUtils.cosDeg(n),b=_.MathUtils.sinDeg(n),I=(d*A+p*b)/this.skeleton.scaleX,S=(f*A+m*b)/this.skeleton.scaleY;1e-5<(T=Math.sqrt(I*I+S*S))&&(T=1/T),I*=T,S*=T,T=Math.sqrt(I*I+S*S),this.data.transformMode==_.TransformMode.NoScale&&d*m-p*f<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(T=-T);var C=Math.PI/2+Math.atan2(S,I),R=Math.cos(C)*T,P=Math.sin(C)*T;g=_.MathUtils.cosDeg(i)*r,v=_.MathUtils.cosDeg(90+s)*a,y=_.MathUtils.sinDeg(i)*r,x=_.MathUtils.sinDeg(90+s)*a,this.a=I*g+R*y,this.b=I*v+R*x,this.c=S*g+P*y,this.d=S*v+P*x}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY},e.prototype.setToSetupPose=function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY},e.prototype.getWorldRotationX=function(){return Math.atan2(this.c,this.a)*_.MathUtils.radDeg},e.prototype.getWorldRotationY=function(){return Math.atan2(this.d,this.b)*_.MathUtils.radDeg},e.prototype.getWorldScaleX=function(){return Math.sqrt(this.a*this.a+this.c*this.c)},e.prototype.getWorldScaleY=function(){return Math.sqrt(this.b*this.b+this.d*this.d)},e.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var t=this.parent;if(null==t)return this.ax=this.worldX,this.ay=this.worldY,this.arotation=Math.atan2(this.c,this.a)*_.MathUtils.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,void(this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*_.MathUtils.radDeg);var e=t.a,n=t.b,r=t.c,a=t.d,i=1/(e*a-n*r),s=this.worldX-t.worldX,o=this.worldY-t.worldY;this.ax=s*a*i-o*n*i,this.ay=o*e*i-s*r*i;var h=i*a,l=i*e,u=i*n,c=i*r,d=h*this.a-u*this.c,p=h*this.b-u*this.d,f=l*this.c-c*this.a,m=l*this.d-c*this.b;if(this.ashearX=0,this.ascaleX=Math.sqrt(d*d+f*f),1e-4<this.ascaleX){var g=d*m-p*f;this.ascaleY=g/this.ascaleX,this.ashearY=Math.atan2(d*p+f*m,g)*_.MathUtils.radDeg,this.arotation=Math.atan2(f,d)*_.MathUtils.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(p*p+m*m),this.ashearY=0,this.arotation=90-Math.atan2(m,p)*_.MathUtils.radDeg},e.prototype.worldToLocal=function(t){var e=this.a,n=this.b,r=this.c,a=this.d,i=1/(e*a-n*r),s=t.x-this.worldX,o=t.y-this.worldY;return t.x=s*a*i-o*n*i,t.y=o*e*i-s*r*i,t},e.prototype.localToWorld=function(t){var e=t.x,n=t.y;return t.x=e*this.a+n*this.b+this.worldX,t.y=e*this.c+n*this.d+this.worldY,t},e.prototype.worldToLocalRotation=function(t){var e=_.MathUtils.sinDeg(t),n=_.MathUtils.cosDeg(t);return Math.atan2(this.a*e-this.c*n,this.d*n-this.b*e)*_.MathUtils.radDeg+this.rotation-this.shearX},e.prototype.localToWorldRotation=function(t){t-=this.rotation-this.shearX;var e=_.MathUtils.sinDeg(t),n=_.MathUtils.cosDeg(t);return Math.atan2(n*this.c+e*this.d,n*this.a+e*this.b)*_.MathUtils.radDeg},e.prototype.rotateWorld=function(t){var e=this.a,n=this.b,r=this.c,a=this.d,i=_.MathUtils.cosDeg(t),s=_.MathUtils.sinDeg(t);this.a=i*e-s*r,this.b=i*n-s*a,this.c=s*e+i*r,this.d=s*n+i*a,this.appliedValid=!1},e);function e(t,e,n){if(this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.a=0,this.b=0,this.c=0,this.d=0,this.worldY=0,this.worldX=0,this.sorted=!1,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=n,this.setToSetupPose()}_.Bone=t}(spine=spine||{}),function(r){function t(t,e,n){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=a.Normal,this.skinRequired=!1,this.color=new r.Color,t<0)throw new Error("index must be >= 0.");if(null==e)throw new Error("name cannot be null.");this.index=t,this.name=e,this.parent=n}var a,e;r.BoneData=t,(e=a=r.TransformMode||(r.TransformMode={}))[e.Normal=0]="Normal",e[e.OnlyTranslation=1]="OnlyTranslation",e[e.NoRotationOrReflection=2]="NoRotationOrReflection",e[e.NoScale=3]="NoScale",e[e.NoScaleOrReflection=4]="NoScaleOrReflection"}(spine=spine||{}),(spine||(spine={})).ConstraintData=function(t,e,n){this.name=t,this.order=e,this.skinRequired=n},(spine||(spine={})).Event=function(t,e){if(null==e)throw new Error("data cannot be null.");this.time=t,this.data=e},(spine||(spine={})).EventData=function(t){this.name=t},function(ht){var t=(e.prototype.isActive=function(){return this.active},e.prototype.apply=function(){this.update()},e.prototype.update=function(){var t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.softness,this.mix)}},e.prototype.apply1=function(t,e,n,r,a,i,s){t.appliedValid||t.updateAppliedTransform();var o=t.parent,h=o.a,l=o.b,u=o.c,c=o.d,d=-t.ashearX-t.arotation,p=0,f=0;switch(t.data.transformMode){case ht.TransformMode.OnlyTranslation:p=e-t.worldX,f=n-t.worldY;break;case ht.TransformMode.NoRotationOrReflection:d+=Math.atan2(u,h)*ht.MathUtils.radDeg;var m=Math.abs(h*c-l*u)/(h*h+u*u);l=-u*m,c=h*m;default:var g=e-o.worldX,v=n-o.worldY,y=h*c-l*u;p=(g*c-v*l)/y-t.ax,f=(v*h-g*u)/y-t.ay}d+=Math.atan2(f,p)*ht.MathUtils.radDeg,t.ascaleX<0&&(d+=180),180<d?d-=360:d<-180&&(d+=360);var x=t.ascaleX,w=t.ascaleY;if(r||a){switch(t.data.transformMode){case ht.TransformMode.NoScale:case ht.TransformMode.NoScaleOrReflection:p=e-t.worldX,f=n-t.worldY}var M=t.data.length*x,E=Math.sqrt(p*p+f*f);if(r&&E<M||a&&M<E&&1e-4<M){var T=(E/M-1)*s+1;x*=T,i&&(w*=T)}}t.updateWorldTransformWith(t.ax,t.ay,t.arotation+d*s,x,w,t.ashearX,t.ashearY)},e.prototype.apply2=function(t,e,n,r,a,i,s,o){if(0!=o){t.appliedValid||t.updateAppliedTransform(),e.appliedValid||e.updateAppliedTransform();var h=t.ax,l=t.ay,u=t.ascaleX,c=u,d=t.ascaleY,p=e.ascaleX,f=0,m=0,g=0;g=u<0?(u=-u,f=180,-1):(f=0,1),d<0&&(d=-d,g=-g),m=p<0?(p=-p,180):0;var v=e.ax,y=0,x=0,w=0,M=t.a,E=t.b,T=t.c,A=t.d,b=Math.abs(u-d)<=1e-4;w=b?(x=M*v+E*(y=e.ay)+t.worldX,T*v+A*y+t.worldY):(y=0,x=M*v+t.worldX,T*v+t.worldY);var I=t.parent;M=I.a,E=I.b,T=I.c;var S,C,R=1/(M*(A=I.d)-E*T),P=x-I.worldX,_=w-I.worldY,V=(P*A-_*E)*R-h,k=(_*M-P*T)*R-l,F=Math.sqrt(V*V+k*k),N=e.data.length*p;if(F<1e-4)return this.apply1(t,n,r,!1,i,!1,o),void e.updateWorldTransformWith(v,y,0,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY);var L=((P=n-I.worldX)*A-(_=r-I.worldY)*E)*R-h,U=(_*M-P*T)*R-l,D=L*L+U*U;if(0!=s){s*=u*(p+1)/2;var O=Math.sqrt(D),Y=O-F-N*u+s;if(0<Y){var X=Math.min(1,Y/(2*s))-1;D=(L-=(X=(Y-s*(1-X*X))/O)*L)*L+(U-=X*U)*U}}t:if(b){var B=(D-F*F-(N*=u)*N)/(2*F*N);B<-1?B=-1:1<B&&(B=1,i&&(c*=(Math.sqrt(D)/(F+N)-1)*o+1)),C=Math.acos(B)*a,M=F+N*B,E=N*Math.sin(C),S=Math.atan2(U*M-L*E,L*M+U*E)}else{var W=(M=u*N)*M,q=(E=d*N)*E,H=Math.atan2(U,L),j=-2*q*F,G=q-W;if(0<=(A=j*j-4*G*(T=q*F*F+W*D-W*q))){var z=Math.sqrt(A);j<0&&(z=-z);var Z=(z=-(j+z)/2)/G,J=T/z,Q=Math.abs(Z)<Math.abs(J)?Z:J;if(Q*Q<=D){_=Math.sqrt(D-Q*Q)*a,S=H-Math.atan2(_,Q),C=Math.atan2(_/d,(Q-F)/u);break t}}var K=ht.MathUtils.PI,$=F-M,tt=$*$,et=0,nt=0,rt=F+M,at=rt*rt,it=0;-1<=(T=-M*F/(W-q))&&T<=1&&(T=Math.acos(T),(A=(P=M*Math.cos(T)+F)*P+(_=E*Math.sin(T))*_)<tt&&(K=T,tt=A,$=P,et=_),at<A&&(nt=T,at=A,rt=P,it=_)),C=D<=(tt+at)/2?(S=H-Math.atan2(et*a,$),K*a):(S=H-Math.atan2(it*a,rt),nt*a)}var st=Math.atan2(y,v)*g,ot=t.arotation;180<(S=(S-st)*ht.MathUtils.radDeg+f-ot)?S-=360:S<-180&&(S+=360),t.updateWorldTransformWith(h,l,ot+S*o,c,t.ascaleY,0,0),ot=e.arotation,180<(C=((C+st)*ht.MathUtils.radDeg-e.ashearX)*g+m-ot)?C-=360:C<-180&&(C+=360),e.updateWorldTransformWith(v,y,ot+C*o,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)}else e.updateWorldTransform()},e);function e(t,e){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(var n=0;n<t.bones.length;n++)this.bones.push(e.findBone(t.bones[n].name));this.target=e.findBone(t.target.name)}ht.IkConstraint=t}(spine=spine||{}),function(t){var n,e=(n=t.ConstraintData,__extends(r,n),r);function r(t){var e=n.call(this,t,0,!1)||this;return e.bones=new Array,e.bendDirection=1,e.compress=!1,e.stretch=!1,e.uniform=!1,e.mix=1,e.softness=0,e}t.IkConstraintData=e}(spine=spine||{}),function(z){var t=(Z.prototype.isActive=function(){return this.active},Z.prototype.apply=function(){this.update()},Z.prototype.update=function(){var t=this.target.getAttachment();if(t instanceof z.PathAttachment){var e=this.rotateMix,n=this.translateMix,r=0<e;if(0<n||r){var a=this.data,i=a.spacingMode==z.SpacingMode.Percent,s=a.rotateMode,o=s==z.RotateMode.Tangent,h=s==z.RotateMode.ChainScale,l=this.bones.length,u=o?l:l+1,c=this.bones,d=z.Utils.setArraySize(this.spaces,u),p=null,f=this.spacing;if(h||!i){h&&(p=z.Utils.setArraySize(this.lengths,l));for(var m=a.spacingMode==z.SpacingMode.Length,g=0,v=u-1;g<v;){var y=(R=c[g]).data.length;if(y<Z.epsilon)h&&(p[g]=0),d[++g]=0;else if(i){if(h){var x=y*R.a,w=y*R.c,M=Math.sqrt(x*x+w*w);p[g]=M}d[++g]=f}else{x=y*R.a,w=y*R.c;var E=Math.sqrt(x*x+w*w);h&&(p[g]=E),d[++g]=(m?y+f:f)*E/y}}}else for(g=1;g<u;g++)d[g]=f;var T=this.computeWorldPositions(t,u,o,a.positionMode==z.PositionMode.Percent,i),A=T[0],b=T[1],I=a.offsetRotation,S=!1;0==I?S=s==z.RotateMode.Chain:(S=!1,I*=0<(C=this.target.bone).a*C.d-C.b*C.c?z.MathUtils.degRad:-z.MathUtils.degRad),g=0;for(var C=3;g<l;g++,C+=3){var R;(R=c[g]).worldX+=(A-R.worldX)*n,R.worldY+=(b-R.worldY)*n;var P=(x=T[C])-A,_=(w=T[C+1])-b;if(h){var V=p[g];if(0!=V){var k=(Math.sqrt(P*P+_*_)/V-1)*e+1;R.a*=k,R.c*=k}}if(A=x,b=w,r){var F=R.a,N=R.b,L=R.c,U=R.d,D=0,O=0,Y=0;if(D=o?T[C-1]:0==d[g+1]?T[C+2]:Math.atan2(_,P),D-=Math.atan2(L,F),S){O=Math.cos(D),Y=Math.sin(D);var X=R.data.length;A+=(X*(O*F-Y*L)-P)*e,b+=(X*(Y*F+O*L)-_)*e}else D+=I;D>z.MathUtils.PI?D-=z.MathUtils.PI2:D<-z.MathUtils.PI&&(D+=z.MathUtils.PI2),D*=e,O=Math.cos(D),Y=Math.sin(D),R.a=O*F-Y*L,R.b=O*N-Y*U,R.c=Y*F+O*L,R.d=Y*N+O*U}R.appliedValid=!1}}}},Z.prototype.computeWorldPositions=function(t,e,n,r,a){var i=this.target,s=this.position,o=this.spaces,h=z.Utils.setArraySize(this.positions,3*e+2),l=null,u=t.closed,c=t.worldVerticesLength,d=c/6,p=Z.NONE;if(!t.constantSpeed){var f=t.lengths,m=f[d-=u?1:2];if(r&&(s*=m),a)for(var g=1;g<e;g++)o[g]*=m;l=z.Utils.setArraySize(this.world,8);for(var v=g=0,y=0;g<e;g++,v+=3){var x=s+=W=o[g];if(u)(x%=m)<0&&(x+=m),y=0;else{if(x<0){p!=Z.BEFORE&&(p=Z.BEFORE,t.computeWorldVertices(i,2,4,l,0,2)),this.addBeforePosition(x,l,0,h,v);continue}if(m<x){p!=Z.AFTER&&(p=Z.AFTER,t.computeWorldVertices(i,c-6,4,l,0,2)),this.addAfterPosition(x-m,l,0,h,v);continue}}for(;;y++){var w=f[y];if(!(w<x)){0==y?x/=w:x=(x-(G=f[y-1]))/(w-G);break}}y!=p&&(p=y,u&&y==d?(t.computeWorldVertices(i,c-4,4,l,0,2),t.computeWorldVertices(i,0,4,l,4,2)):t.computeWorldVertices(i,6*y+2,8,l,0,2)),this.addCurvePosition(x,l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],h,v,n||0<g&&0==W)}return h}u?(c+=2,l=z.Utils.setArraySize(this.world,c),t.computeWorldVertices(i,2,c-4,l,0,2),t.computeWorldVertices(i,0,2,l,c-4,2),l[c-2]=l[0],l[c-1]=l[1]):(d--,c-=4,l=z.Utils.setArraySize(this.world,c),t.computeWorldVertices(i,2,c,l,0,2));for(var M=z.Utils.setArraySize(this.curves,d),E=0,T=l[0],A=l[1],b=0,I=0,S=0,C=0,R=0,P=0,_=0,V=0,k=0,F=0,N=0,L=0,U=0,D=0,O=(g=0,2);g<d;g++,O+=6)b=l[O],I=l[O+1],S=l[O+2],C=l[O+3],N=2*(_=.1875*(T-2*b+S))+(k=.09375*(3*(b-S)-T+(R=l[O+4]))),L=2*(V=.1875*(A-2*I+C))+(F=.09375*(3*(I-C)-A+(P=l[O+5]))),U=.75*(b-T)+_+.16666667*k,D=.75*(I-A)+V+.16666667*F,E+=Math.sqrt(U*U+D*D),U+=N,D+=L,N+=k,L+=F,E+=Math.sqrt(U*U+D*D),U+=N,D+=L,E+=Math.sqrt(U*U+D*D),U+=N+k,D+=L+F,E+=Math.sqrt(U*U+D*D),M[g]=E,T=R,A=P;if(s*=r?E:E/t.lengths[d-1],a)for(g=1;g<e;g++)o[g]*=E;for(var Y=this.segments,X=0,B=y=v=g=0;g<e;g++,v+=3){var W;if(x=s+=W=o[g],u)(x%=E)<0&&(x+=E),y=0;else{if(x<0){this.addBeforePosition(x,l,0,h,v);continue}if(E<x){this.addAfterPosition(x-E,l,c-4,h,v);continue}}for(;;y++){var q=M[y];if(!(q<x)){0==y?x/=q:x=(x-(G=M[y-1]))/(q-G);break}}if(y!=p){var H=6*(p=y);for(T=l[H],A=l[H+1],b=l[H+2],I=l[H+3],S=l[H+4],C=l[H+5],N=2*(_=.03*(T-2*b+S))+(k=.006*(3*(b-S)-T+(R=l[H+6]))),L=2*(V=.03*(A-2*I+C))+(F=.006*(3*(I-C)-A+(P=l[H+7]))),U=.3*(b-T)+_+.16666667*k,D=.3*(I-A)+V+.16666667*F,X=Math.sqrt(U*U+D*D),Y[0]=X,H=1;H<8;H++)U+=N,D+=L,N+=k,L+=F,X+=Math.sqrt(U*U+D*D),Y[H]=X;U+=N,D+=L,X+=Math.sqrt(U*U+D*D),Y[8]=X,U+=N+k,D+=L+F,X+=Math.sqrt(U*U+D*D),Y[9]=X,B=0}for(x*=X;;B++){var j=Y[B];if(!(j<x)){var G;0==B?x/=j:x=B+(x-(G=Y[B-1]))/(j-G);break}}this.addCurvePosition(.1*x,T,A,b,I,S,C,R,P,h,v,n||0<g&&0==W)}return h},Z.prototype.addBeforePosition=function(t,e,n,r,a){var i=e[n],s=e[n+1],o=e[n+2]-i,h=e[n+3]-s,l=Math.atan2(h,o);r[a]=i+t*Math.cos(l),r[a+1]=s+t*Math.sin(l),r[a+2]=l},Z.prototype.addAfterPosition=function(t,e,n,r,a){var i=e[n+2],s=e[n+3],o=i-e[n],h=s-e[n+1],l=Math.atan2(h,o);r[a]=i+t*Math.cos(l),r[a+1]=s+t*Math.sin(l),r[a+2]=l},Z.prototype.addCurvePosition=function(t,e,n,r,a,i,s,o,h,l,u,c){if(0==t||isNaN(t))return l[u]=e,l[u+1]=n,void(l[u+2]=Math.atan2(a-n,r-e));var d=t*t,p=d*t,f=1-t,m=f*f,g=m*f,v=f*t,y=3*v,x=f*y,w=y*t,M=e*g+r*x+i*w+o*p,E=n*g+a*x+s*w+h*p;l[u]=M,l[u+1]=E,c&&(l[u+2]=t<.001?Math.atan2(a-n,r-e):Math.atan2(E-(n*m+a*v*2+s*d),M-(e*m+r*v*2+i*d)))},Z.NONE=-1,Z.BEFORE=-2,Z.AFTER=-3,Z.epsilon=1e-5,Z);function Z(t,e){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(var n=0,r=t.bones.length;n<r;n++)this.bones.push(e.findBone(t.bones[n].name));this.target=e.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix}z.PathConstraint=t}(spine=spine||{}),function(t){var n,e,r,a,i=(n=t.ConstraintData,__extends(s,n),s);function s(t){var e=n.call(this,t,0,!1)||this;return e.bones=new Array,e}t.PathConstraintData=i,(e=t.PositionMode||(t.PositionMode={}))[e.Fixed=0]="Fixed",e[e.Percent=1]="Percent",(r=t.SpacingMode||(t.SpacingMode={}))[r.Length=0]="Length",r[r.Fixed=1]="Fixed",r[r.Percent=2]="Percent",(a=t.RotateMode||(t.RotateMode={}))[a.Tangent=0]="Tangent",a[a.Chain=1]="Chain",a[a.ChainScale=2]="ChainScale"}(spine=spine||{}),function(t){var a=(e.prototype.loaded=function(){var t=0;for(var e in this.assets)t++;return t},e);function e(t){this.toLoad=new Array,this.assets={},this.clientId=t}var n=(r.prototype.queueAsset=function(t,e,n){var r=this.clientAssets[t];return null==r&&(r=new a(t),this.clientAssets[t]=r),null!==e&&(r.textureLoader=e),r.toLoad.push(n),this.queuedAssets[n]!==n&&(this.queuedAssets[n]=n,!0)},r.prototype.loadText=function(t,e){var n=this;if(e=this.pathPrefix+e,this.queueAsset(t,null,e)){var r=new XMLHttpRequest;r.overrideMimeType("text/html"),r.onreadystatechange=function(){r.readyState==XMLHttpRequest.DONE&&(200<=r.status&&r.status<300?n.rawAssets[e]=r.responseText:n.errors[e]="Couldn't load text "+e+": status "+r.status+", "+r.responseText)},r.open("GET",e,!0),r.send()}},r.prototype.loadJson=function(t,e){var n=this;if(e=this.pathPrefix+e,this.queueAsset(t,null,e)){var r=new XMLHttpRequest;r.overrideMimeType("text/html"),r.onreadystatechange=function(){r.readyState==XMLHttpRequest.DONE&&(200<=r.status&&r.status<300?n.rawAssets[e]=JSON.parse(r.responseText):n.errors[e]="Couldn't load text "+e+": status "+r.status+", "+r.responseText)},r.open("GET",e,!0),r.send()}},r.prototype.loadTexture=function(t,e,n){var r=this;if(n=this.pathPrefix+n,this.queueAsset(t,e,n)){var a=new Image;a.crossOrigin="anonymous",a.onload=function(t){r.rawAssets[n]=a},a.onerror=function(t){r.errors[n]="Couldn't load image "+n},a.src=n}},r.prototype.get=function(t,e){e=this.pathPrefix+e;var n=this.clientAssets[t];return null==n||n.assets[e]},r.prototype.updateClientAssets=function(t){for(var e=0;e<t.toLoad.length;e++){var n=t.toLoad[e],r=t.assets[n];if(null==r){var a=this.rawAssets[n];if(null==a)continue;a instanceof HTMLImageElement?t.assets[n]=t.textureLoader(a):t.assets[n]=a}}},r.prototype.isLoadingComplete=function(t){var e=this.clientAssets[t];return null==e||(this.updateClientAssets(e),e.toLoad.length==e.loaded())},r.prototype.dispose=function(){},r.prototype.hasErrors=function(){return 0<Object.keys(this.errors).length},r.prototype.getErrors=function(){return this.errors},r);function r(t){void 0===t&&(t=""),this.clientAssets={},this.queuedAssets={},this.rawAssets={},this.errors={},this.pathPrefix=t}t.SharedAssetManager=n}(spine=spine||{}),function(x){var t=(e.prototype.updateCache=function(){this._updateCache.length=0,this.updateCacheReset.length=0;for(var t=this.bones,e=0,n=t.length;e<n;e++)(a=t[e]).sorted=a.data.skinRequired,a.active=!a.sorted;if(null!=this.skin){var r=this.skin.bones;for(e=0,n=this.skin.bones.length;e<n;e++)for(var a=this.bones[r[e].index];a.sorted=!1,a.active=!0,null!=(a=a.parent););}var i=this.ikConstraints,s=this.transformConstraints,o=this.pathConstraints,h=i.length,l=s.length,u=o.length,c=h+l+u;t:for(e=0;e<c;e++){for(var d=0;d<h;d++)if((p=i[d]).data.order==e){this.sortIkConstraint(p);continue t}for(d=0;d<l;d++)if((p=s[d]).data.order==e){this.sortTransformConstraint(p);continue t}for(d=0;d<u;d++){var p;if((p=o[d]).data.order==e){this.sortPathConstraint(p);continue t}}}for(e=0,n=t.length;e<n;e++)this.sortBone(t[e])},e.prototype.sortIkConstraint=function(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||null!=this.skin&&x.Utils.contains(this.skin.constraints,t.data,!0)),t.active){var e=t.target;this.sortBone(e);var n=t.bones,r=n[0];if(this.sortBone(r),1<n.length){var a=n[n.length-1];-1<this._updateCache.indexOf(a)||this.updateCacheReset.push(a)}this._updateCache.push(t),this.sortReset(r.children),n[n.length-1].sorted=!0}},e.prototype.sortPathConstraint=function(t){if(t.active=t.target.bone.isActive()&&(!t.data.skinRequired||null!=this.skin&&x.Utils.contains(this.skin.constraints,t.data,!0)),t.active){var e=t.target,n=e.data.index,r=e.bone;null!=this.skin&&this.sortPathConstraintAttachment(this.skin,n,r),null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,n,r);for(var a=0,i=this.data.skins.length;a<i;a++)this.sortPathConstraintAttachment(this.data.skins[a],n,r);var s=e.getAttachment();s instanceof x.PathAttachment&&this.sortPathConstraintAttachmentWith(s,r);var o=t.bones,h=o.length;for(a=0;a<h;a++)this.sortBone(o[a]);for(this._updateCache.push(t),a=0;a<h;a++)this.sortReset(o[a].children);for(a=0;a<h;a++)o[a].sorted=!0}},e.prototype.sortTransformConstraint=function(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||null!=this.skin&&x.Utils.contains(this.skin.constraints,t.data,!0)),t.active){this.sortBone(t.target);var e=t.bones,n=e.length;if(t.data.local)for(var r=0;r<n;r++){var a=e[r];this.sortBone(a.parent),-1<this._updateCache.indexOf(a)||this.updateCacheReset.push(a)}else for(r=0;r<n;r++)this.sortBone(e[r]);this._updateCache.push(t);for(var i=0;i<n;i++)this.sortReset(e[i].children);for(i=0;i<n;i++)e[i].sorted=!0}},e.prototype.sortPathConstraintAttachment=function(t,e,n){var r=t.attachments[e];if(r)for(var a in r)this.sortPathConstraintAttachmentWith(r[a],n)},e.prototype.sortPathConstraintAttachmentWith=function(t,e){if(t instanceof x.PathAttachment){var n=t.bones;if(null==n)this.sortBone(e);else for(var r=this.bones,a=0;a<n.length;)for(var i=n[a++],s=a+i;a<s;a++){var o=n[a];this.sortBone(r[o])}}},e.prototype.sortBone=function(t){if(!t.sorted){var e=t.parent;null!=e&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}},e.prototype.sortReset=function(t){for(var e=0,n=t.length;e<n;e++){var r=t[e];r.active&&(r.sorted&&this.sortReset(r.children),r.sorted=!1)}},e.prototype.updateWorldTransform=function(){for(var t=this.updateCacheReset,e=0,n=t.length;e<n;e++){var r=t[e];r.ax=r.x,r.ay=r.y,r.arotation=r.rotation,r.ascaleX=r.scaleX,r.ascaleY=r.scaleY,r.ashearX=r.shearX,r.ashearY=r.shearY,r.appliedValid=!0}var a=this._updateCache;for(e=0,n=a.length;e<n;e++)a[e].update()},e.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},e.prototype.setBonesToSetupPose=function(){for(var t=this.bones,e=0,n=t.length;e<n;e++)t[e].setToSetupPose();var r=this.ikConstraints;for(e=0,n=r.length;e<n;e++)(o=r[e]).mix=o.data.mix,o.softness=o.data.softness,o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,o.stretch=o.data.stretch;var a=this.transformConstraints;for(e=0,n=a.length;e<n;e++){var i=(o=a[e]).data;o.rotateMix=i.rotateMix,o.translateMix=i.translateMix,o.scaleMix=i.scaleMix,o.shearMix=i.shearMix}var s=this.pathConstraints;for(e=0,n=s.length;e<n;e++){var o;i=(o=s[e]).data,o.position=i.position,o.spacing=i.spacing,o.rotateMix=i.rotateMix,o.translateMix=i.translateMix}},e.prototype.setSlotsToSetupPose=function(){var t=this.slots;x.Utils.arrayCopy(t,0,this.drawOrder,0,t.length);for(var e=0,n=t.length;e<n;e++)t[e].setToSetupPose()},e.prototype.getRootBone=function(){return 0==this.bones.length?null:this.bones[0]},e.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,r=e.length;n<r;n++){var a=e[n];if(a.data.name==t)return a}return null},e.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,r=e.length;n<r;n++)if(e[n].data.name==t)return n;return-1},e.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,r=e.length;n<r;n++){var a=e[n];if(a.data.name==t)return a}return null},e.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,r=e.length;n<r;n++)if(e[n].data.name==t)return n;return-1},e.prototype.setSkinByName=function(t){var e=this.data.findSkin(t);if(null==e)throw new Error("Skin not found: "+t);this.setSkin(e)},e.prototype.setSkin=function(t){if(t!=this.skin){if(null!=t)if(null!=this.skin)t.attachAll(this,this.skin);else for(var e=this.slots,n=0,r=e.length;n<r;n++){var a=e[n],i=a.data.attachmentName;if(null!=i){var s=t.getAttachment(n,i);null!=s&&a.setAttachment(s)}}this.skin=t,this.updateCache()}},e.prototype.getAttachmentByName=function(t,e){return this.getAttachment(this.data.findSlotIndex(t),e)},e.prototype.getAttachment=function(t,e){if(null==e)throw new Error("attachmentName cannot be null.");if(null!=this.skin){var n=this.skin.getAttachment(t,e);if(null!=n)return n}return null!=this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null},e.prototype.setAttachment=function(t,e){if(null==t)throw new Error("slotName cannot be null.");for(var n=this.slots,r=0,a=n.length;r<a;r++){var i=n[r];if(i.data.name==t){var s=null;if(null!=e&&null==(s=this.getAttachment(r,e)))throw new Error("Attachment not found: "+e+", for slot: "+t);return void i.setAttachment(s)}}throw new Error("Slot not found: "+t)},e.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,n=0,r=e.length;n<r;n++){var a=e[n];if(a.data.name==t)return a}return null},e.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,n=0,r=e.length;n<r;n++){var a=e[n];if(a.data.name==t)return a}return null},e.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,n=0,r=e.length;n<r;n++){var a=e[n];if(a.data.name==t)return a}return null},e.prototype.getBounds=function(t,e,n){if(void 0===n&&(n=new Array(2)),null==t)throw new Error("offset cannot be null.");if(null==e)throw new Error("size cannot be null.");for(var r=this.drawOrder,a=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY,h=0,l=r.length;h<l;h++){var u=r[h];if(u.bone.active){var c=0,d=null,p=u.getAttachment();if(p instanceof x.RegionAttachment)c=8,d=x.Utils.setArraySize(n,c,0),p.computeWorldVertices(u.bone,d,0,2);else if(p instanceof x.MeshAttachment){var f=p;c=f.worldVerticesLength,d=x.Utils.setArraySize(n,c,0),f.computeWorldVertices(u,0,c,d,0,2)}if(null!=d)for(var m=0,g=d.length;m<g;m+=2){var v=d[m],y=d[m+1];a=Math.min(a,v),i=Math.min(i,y),s=Math.max(s,v),o=Math.max(o,y)}}}t.set(a,i),e.set(s-a,o-i)},e.prototype.update=function(t){this.time+=t},e);function e(t){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,null==t)throw new Error("data cannot be null.");this.data=t,this.bones=new Array;for(var e=0;e<t.bones.length;e++){var n=t.bones[e],r=void 0;if(null==n.parent)r=new x.Bone(n,this,null);else{var a=this.bones[n.parent.index];r=new x.Bone(n,this,a),a.children.push(r)}this.bones.push(r)}this.slots=new Array,this.drawOrder=new Array;for(e=0;e<t.slots.length;e++){var i=t.slots[e],s=(r=this.bones[i.boneData.index],new x.Slot(i,r));this.slots.push(s),this.drawOrder.push(s)}this.ikConstraints=new Array;for(e=0;e<t.ikConstraints.length;e++){var o=t.ikConstraints[e];this.ikConstraints.push(new x.IkConstraint(o,this))}this.transformConstraints=new Array;for(e=0;e<t.transformConstraints.length;e++){var h=t.transformConstraints[e];this.transformConstraints.push(new x.TransformConstraint(h,this))}this.pathConstraints=new Array;for(e=0;e<t.pathConstraints.length;e++){var l=t.pathConstraints[e];this.pathConstraints.push(new x.PathConstraint(l,this))}this.color=new x.Color(1,1,1,1),this.updateCache()}x.Skeleton=t}(spine=spine||{}),function(q){var t=(H.prototype.readSkeletonData=function(t){var e=this.scale,n=new q.SkeletonData;n.name="";var r=new x(t);if(n.hash=r.readString(),n.version=r.readString(),"3.8.75"==n.version)throw new Error("Unsupported skeleton data, please export with a newer version of Spine.");n.x=r.readFloat(),n.y=r.readFloat(),n.width=r.readFloat(),n.height=r.readFloat();var a=r.readBoolean();a&&(n.fps=r.readFloat(),n.imagesPath=r.readString(),n.audioPath=r.readString());var i=0;i=r.readInt(!0);for(var s=0;s<i;s++)r.strings.push(r.readString());for(i=r.readInt(!0),s=0;s<i;s++){var o=r.readString(),h=0==s?null:n.bones[r.readInt(!0)];(c=new q.BoneData(s,o,h)).rotation=r.readFloat(),c.x=r.readFloat()*e,c.y=r.readFloat()*e,c.scaleX=r.readFloat(),c.scaleY=r.readFloat(),c.shearX=r.readFloat(),c.shearY=r.readFloat(),c.length=r.readFloat()*e,c.transformMode=H.TransformModeValues[r.readInt(!0)],c.skinRequired=r.readBoolean(),a&&q.Color.rgba8888ToColor(c.color,r.readInt32()),n.bones.push(c)}for(i=r.readInt(!0),s=0;s<i;s++){var l=r.readString(),u=n.bones[r.readInt(!0)],c=new q.SlotData(s,l,u);q.Color.rgba8888ToColor(c.color,r.readInt32());var d=r.readInt32();-1!=d&&q.Color.rgb888ToColor(c.darkColor=new q.Color,d),c.attachmentName=r.readStringRef(),c.blendMode=H.BlendModeValues[r.readInt(!0)],n.slots.push(c)}i=r.readInt(!0);for(var p=void(s=0);s<i;s++){(c=new q.IkConstraintData(r.readString())).order=r.readInt(!0),c.skinRequired=r.readBoolean(),p=r.readInt(!0);for(var f=0;f<p;f++)c.bones.push(n.bones[r.readInt(!0)]);c.target=n.bones[r.readInt(!0)],c.mix=r.readFloat(),c.softness=r.readFloat()*e,c.bendDirection=r.readByte(),c.compress=r.readBoolean(),c.stretch=r.readBoolean(),c.uniform=r.readBoolean(),n.ikConstraints.push(c)}for(i=r.readInt(!0),p=void(s=0);s<i;s++){for((c=new q.TransformConstraintData(r.readString())).order=r.readInt(!0),c.skinRequired=r.readBoolean(),p=r.readInt(!0),f=0;f<p;f++)c.bones.push(n.bones[r.readInt(!0)]);c.target=n.bones[r.readInt(!0)],c.local=r.readBoolean(),c.relative=r.readBoolean(),c.offsetRotation=r.readFloat(),c.offsetX=r.readFloat()*e,c.offsetY=r.readFloat()*e,c.offsetScaleX=r.readFloat(),c.offsetScaleY=r.readFloat(),c.offsetShearY=r.readFloat(),c.rotateMix=r.readFloat(),c.translateMix=r.readFloat(),c.scaleMix=r.readFloat(),c.shearMix=r.readFloat(),n.transformConstraints.push(c)}for(i=r.readInt(!0),p=void(s=0);s<i;s++){for((c=new q.PathConstraintData(r.readString())).order=r.readInt(!0),c.skinRequired=r.readBoolean(),p=r.readInt(!0),f=0;f<p;f++)c.bones.push(n.bones[r.readInt(!0)]);c.target=n.slots[r.readInt(!0)],c.positionMode=H.PositionModeValues[r.readInt(!0)],c.spacingMode=H.SpacingModeValues[r.readInt(!0)],c.rotateMode=H.RotateModeValues[r.readInt(!0)],c.offsetRotation=r.readFloat(),c.position=r.readFloat(),c.positionMode==q.PositionMode.Fixed&&(c.position*=e),c.spacing=r.readFloat(),c.spacingMode!=q.SpacingMode.Length&&c.spacingMode!=q.SpacingMode.Fixed||(c.spacing*=e),c.rotateMix=r.readFloat(),c.translateMix=r.readFloat(),n.pathConstraints.push(c)}var m=this.readSkin(r,n,!0,a);for(null!=m&&(n.defaultSkin=m,n.skins.push(m)),s=n.skins.length,q.Utils.setArraySize(n.skins,i=s+r.readInt(!0));s<i;s++)n.skins[s]=this.readSkin(r,n,!1,a);for(i=this.linkedMeshes.length,s=0;s<i;s++){var g=this.linkedMeshes[s],v=null==g.skin?n.defaultSkin:n.findSkin(g.skin);if(null==v)throw new Error("Skin not found: "+g.skin);var y=v.getAttachment(g.slotIndex,g.parent);if(null==y)throw new Error("Parent mesh not found: "+g.parent);g.mesh.deformAttachment=g.inheritDeform?y:g.mesh,g.mesh.setParentMesh(y),g.mesh.updateUVs()}for(this.linkedMeshes.length=0,i=r.readInt(!0),s=0;s<i;s++)(c=new q.EventData(r.readStringRef())).intValue=r.readInt(!1),c.floatValue=r.readFloat(),c.stringValue=r.readString(),c.audioPath=r.readString(),null!=c.audioPath&&(c.volume=r.readFloat(),c.balance=r.readFloat()),n.events.push(c);for(i=r.readInt(!0),s=0;s<i;s++)n.animations.push(this.readAnimation(r,r.readString(),n));return n},H.prototype.readSkin=function(t,e,n,r){var a=null,i=0;if(n){if(0==(i=t.readInt(!0)))return null;a=new q.Skin("default")}else{(a=new q.Skin(t.readStringRef())).bones.length=t.readInt(!0);for(var s=0,o=a.bones.length;s<o;s++)a.bones[s]=e.bones[t.readInt(!0)];for(s=0,o=t.readInt(!0);s<o;s++)a.constraints.push(e.ikConstraints[t.readInt(!0)]);for(s=0,o=t.readInt(!0);s<o;s++)a.constraints.push(e.transformConstraints[t.readInt(!0)]);for(s=0,o=t.readInt(!0);s<o;s++)a.constraints.push(e.pathConstraints[t.readInt(!0)]);i=t.readInt(!0)}for(s=0;s<i;s++)for(var h=t.readInt(!0),l=0,u=t.readInt(!0);l<u;l++){var c=t.readStringRef(),d=this.readAttachment(t,e,a,h,c,r);null!=d&&a.setAttachment(h,c,d)}return a},H.prototype.readAttachment=function(t,e,n,r,a,i){var s=this.scale,o=t.readStringRef();null==o&&(o=a);var h=t.readByte();switch(H.AttachmentTypeValues[h]){case q.AttachmentType.Region:var l=t.readStringRef(),u=t.readFloat(),c=t.readFloat(),d=t.readFloat(),p=t.readFloat(),f=t.readFloat(),m=t.readFloat(),g=t.readFloat(),v=t.readInt32();null==l&&(l=o);var y=this.attachmentLoader.newRegionAttachment(n,o,l);return null==y?null:(y.path=l,y.x=c*s,y.y=d*s,y.scaleX=p,y.scaleY=f,y.rotation=u,y.width=m*s,y.height=g*s,q.Color.rgba8888ToColor(y.color,v),y.updateOffset(),y);case q.AttachmentType.BoundingBox:var x=t.readInt(!0),w=this.readVertices(t,x),M=(v=i?t.readInt32():0,this.attachmentLoader.newBoundingBoxAttachment(n,o));return null==M?null:(M.worldVerticesLength=x<<1,M.vertices=w.vertices,M.bones=w.bones,i&&q.Color.rgba8888ToColor(M.color,v),M);case q.AttachmentType.Mesh:l=t.readStringRef(),v=t.readInt32(),x=t.readInt(!0);var E=this.readFloatArray(t,x<<1,1),T=this.readShortArray(t),A=(w=this.readVertices(t,x),t.readInt(!0)),b=null;return g=m=0,i&&(b=this.readShortArray(t),m=t.readFloat(),g=t.readFloat()),null==l&&(l=o),null==(I=this.attachmentLoader.newMeshAttachment(n,o,l))?null:(I.path=l,q.Color.rgba8888ToColor(I.color,v),I.bones=w.bones,I.vertices=w.vertices,I.worldVerticesLength=x<<1,I.triangles=T,I.regionUVs=E,I.updateUVs(),I.hullLength=A<<1,i&&(I.edges=b,I.width=m*s,I.height=g*s),I);case q.AttachmentType.LinkedMesh:l=t.readStringRef(),v=t.readInt32();var I,S=t.readStringRef(),C=t.readStringRef(),R=t.readBoolean();return g=m=0,i&&(m=t.readFloat(),g=t.readFloat()),null==l&&(l=o),null==(I=this.attachmentLoader.newMeshAttachment(n,o,l))?null:(I.path=l,q.Color.rgba8888ToColor(I.color,v),i&&(I.width=m*s,I.height=g*s),this.linkedMeshes.push(new D(I,S,r,C,R)),I);case q.AttachmentType.Path:for(var P=t.readBoolean(),_=t.readBoolean(),V=(x=t.readInt(!0),w=this.readVertices(t,x),q.Utils.newArray(x/3,0)),k=0,F=V.length;k<F;k++)V[k]=t.readFloat()*s;return v=i?t.readInt32():0,null==(l=this.attachmentLoader.newPathAttachment(n,o))?null:(l.closed=P,l.constantSpeed=_,l.worldVerticesLength=x<<1,l.vertices=w.vertices,l.bones=w.bones,l.lengths=V,i&&q.Color.rgba8888ToColor(l.color,v),l);case q.AttachmentType.Point:u=t.readFloat(),c=t.readFloat(),d=t.readFloat(),v=i?t.readInt32():0;var N=this.attachmentLoader.newPointAttachment(n,o);return null==N?null:(N.x=c*s,N.y=d*s,N.rotation=u,i&&q.Color.rgba8888ToColor(N.color,v),N);case q.AttachmentType.Clipping:var L=t.readInt(!0),U=(x=t.readInt(!0),w=this.readVertices(t,x),v=i?t.readInt32():0,this.attachmentLoader.newClippingAttachment(n,o));return null==U?null:(U.endSlot=e.slots[L],U.worldVerticesLength=x<<1,U.vertices=w.vertices,U.bones=w.bones,i&&q.Color.rgba8888ToColor(U.color,v),U)}return null},H.prototype.readVertices=function(t,e){var n=e<<1,r=new u,a=this.scale;if(!t.readBoolean())return r.vertices=this.readFloatArray(t,n,a),r;for(var i=new Array,s=new Array,o=0;o<e;o++){var h=t.readInt(!0);s.push(h);for(var l=0;l<h;l++)s.push(t.readInt(!0)),i.push(t.readFloat()*a),i.push(t.readFloat()*a),i.push(t.readFloat())}return r.vertices=q.Utils.toFloatArray(i),r.bones=s,r},H.prototype.readFloatArray=function(t,e,n){var r=new Array(e);if(1==n)for(var a=0;a<e;a++)r[a]=t.readFloat();else for(a=0;a<e;a++)r[a]=t.readFloat()*n;return r},H.prototype.readShortArray=function(t){for(var e=t.readInt(!0),n=new Array(e),r=0;r<e;r++)n[r]=t.readShort();return n},H.prototype.readAnimation=function(t,e,n){for(var r=new Array,a=this.scale,i=0,s=new q.Color,o=new q.Color,h=0,l=t.readInt(!0);h<l;h++)for(var u=t.readInt(!0),c=0,d=t.readInt(!0);c<d;c++){var p=t.readByte(),f=t.readInt(!0);switch(p){case H.SLOT_ATTACHMENT:(y=new q.AttachmentTimeline(f)).slotIndex=u;for(var m=0;m<f;m++)y.setFrame(m,t.readFloat(),t.readStringRef());r.push(y),i=Math.max(i,y.frames[f-1]);break;case H.SLOT_COLOR:for((y=new q.ColorTimeline(f)).slotIndex=u,m=0;m<f;m++){var g=t.readFloat();q.Color.rgba8888ToColor(s,t.readInt32()),y.setFrame(m,g,s.r,s.g,s.b,s.a),m<f-1&&this.readCurve(t,m,y)}r.push(y),i=Math.max(i,y.frames[(f-1)*q.ColorTimeline.ENTRIES]);break;case H.SLOT_TWO_COLOR:for((y=new q.TwoColorTimeline(f)).slotIndex=u,m=0;m<f;m++)g=t.readFloat(),q.Color.rgba8888ToColor(s,t.readInt32()),q.Color.rgb888ToColor(o,t.readInt32()),y.setFrame(m,g,s.r,s.g,s.b,s.a,o.r,o.g,o.b),m<f-1&&this.readCurve(t,m,y);r.push(y),i=Math.max(i,y.frames[(f-1)*q.TwoColorTimeline.ENTRIES])}}for(h=0,l=t.readInt(!0);h<l;h++){var v=t.readInt(!0);for(c=0,d=t.readInt(!0);c<d;c++)switch(p=t.readByte(),f=t.readInt(!0),p){case H.BONE_ROTATE:for((y=new q.RotateTimeline(f)).boneIndex=v,m=0;m<f;m++)y.setFrame(m,t.readFloat(),t.readFloat()),m<f-1&&this.readCurve(t,m,y);r.push(y),i=Math.max(i,y.frames[(f-1)*q.RotateTimeline.ENTRIES]);break;case H.BONE_TRANSLATE:case H.BONE_SCALE:case H.BONE_SHEAR:var y=void 0,x=1;for(p==H.BONE_SCALE?y=new q.ScaleTimeline(f):p==H.BONE_SHEAR?y=new q.ShearTimeline(f):(y=new q.TranslateTimeline(f),x=a),y.boneIndex=v,m=0;m<f;m++)y.setFrame(m,t.readFloat(),t.readFloat()*x,t.readFloat()*x),m<f-1&&this.readCurve(t,m,y);r.push(y),i=Math.max(i,y.frames[(f-1)*q.TranslateTimeline.ENTRIES])}}for(h=0,l=t.readInt(!0);h<l;h++){var w=t.readInt(!0);for(f=t.readInt(!0),(y=new q.IkConstraintTimeline(f)).ikConstraintIndex=w,m=0;m<f;m++)y.setFrame(m,t.readFloat(),t.readFloat(),t.readFloat()*a,t.readByte(),t.readBoolean(),t.readBoolean()),m<f-1&&this.readCurve(t,m,y);r.push(y),i=Math.max(i,y.frames[(f-1)*q.IkConstraintTimeline.ENTRIES])}for(h=0,l=t.readInt(!0);h<l;h++){for(w=t.readInt(!0),f=t.readInt(!0),(y=new q.TransformConstraintTimeline(f)).transformConstraintIndex=w,m=0;m<f;m++)y.setFrame(m,t.readFloat(),t.readFloat(),t.readFloat(),t.readFloat(),t.readFloat()),m<f-1&&this.readCurve(t,m,y);r.push(y),i=Math.max(i,y.frames[(f-1)*q.TransformConstraintTimeline.ENTRIES])}for(h=0,l=t.readInt(!0);h<l;h++){w=t.readInt(!0);var M=n.pathConstraints[w];for(c=0,d=t.readInt(!0);c<d;c++)switch(p=t.readByte(),f=t.readInt(!0),p){case H.PATH_POSITION:case H.PATH_SPACING:for(y=void 0,x=1,p==H.PATH_SPACING?(y=new q.PathConstraintSpacingTimeline(f),M.spacingMode!=q.SpacingMode.Length&&M.spacingMode!=q.SpacingMode.Fixed||(x=a)):(y=new q.PathConstraintPositionTimeline(f),M.positionMode==q.PositionMode.Fixed&&(x=a)),y.pathConstraintIndex=w,m=0;m<f;m++)y.setFrame(m,t.readFloat(),t.readFloat()*x),m<f-1&&this.readCurve(t,m,y);r.push(y),i=Math.max(i,y.frames[(f-1)*q.PathConstraintPositionTimeline.ENTRIES]);break;case H.PATH_MIX:for((y=new q.PathConstraintMixTimeline(f)).pathConstraintIndex=w,m=0;m<f;m++)y.setFrame(m,t.readFloat(),t.readFloat(),t.readFloat()),m<f-1&&this.readCurve(t,m,y);r.push(y),i=Math.max(i,y.frames[(f-1)*q.PathConstraintMixTimeline.ENTRIES])}}for(h=0,l=t.readInt(!0);h<l;h++){var E=n.skins[t.readInt(!0)];for(c=0,d=t.readInt(!0);c<d;c++){u=t.readInt(!0);for(var T=0,A=t.readInt(!0);T<A;T++){var b=E.getAttachment(u,t.readStringRef()),I=null!=b.bones,S=b.vertices,C=I?S.length/3*2:S.length;for(f=t.readInt(!0),(y=new q.DeformTimeline(f)).slotIndex=u,y.attachment=b,m=0;m<f;m++){g=t.readFloat();var R=void 0,P=t.readInt(!0);if(0==P)R=I?q.Utils.newFloatArray(C):S;else{R=q.Utils.newFloatArray(C);var _=t.readInt(!0);if(P+=_,1==a)for(var V=_;V<P;V++)R[V]=t.readFloat();else for(V=_;V<P;V++)R[V]=t.readFloat()*a;if(!I){V=0;for(var k=R.length;V<k;V++)R[V]+=S[V]}}y.setFrame(m,g,R),m<f-1&&this.readCurve(t,m,y)}r.push(y),i=Math.max(i,y.frames[f-1])}}}var F=t.readInt(!0);if(0<F){y=new q.DrawOrderTimeline(F);var N=n.slots.length;for(h=0;h<F;h++){g=t.readFloat();var L=t.readInt(!0),U=q.Utils.newArray(N,0);for(c=N-1;0<=c;c--)U[c]=-1;var D=q.Utils.newArray(N-L,0),O=0,Y=0;for(c=0;c<L;c++){for(u=t.readInt(!0);O!=u;)D[Y++]=O++;U[O+t.readInt(!0)]=O++}for(;O<N;)D[Y++]=O++;for(c=N-1;0<=c;c--)-1==U[c]&&(U[c]=D[--Y]);y.setFrame(h,g,U)}r.push(y),i=Math.max(i,y.frames[F-1])}var X=t.readInt(!0);if(0<X){for(y=new q.EventTimeline(X),h=0;h<X;h++){g=t.readFloat();var B=n.events[t.readInt(!0)],W=new q.Event(g,B);W.intValue=t.readInt(!1),W.floatValue=t.readFloat(),W.stringValue=t.readBoolean()?t.readString():B.stringValue,null!=W.data.audioPath&&(W.volume=t.readFloat(),W.balance=t.readFloat()),y.setFrame(h,W)}r.push(y),i=Math.max(i,y.frames[X-1])}return new q.Animation(e,r,i)},H.prototype.readCurve=function(t,e,n){switch(t.readByte()){case H.CURVE_STEPPED:n.setStepped(e);break;case H.CURVE_BEZIER:this.setCurve(n,e,t.readFloat(),t.readFloat(),t.readFloat(),t.readFloat())}},H.prototype.setCurve=function(t,e,n,r,a,i){t.setCurve(e,n,r,a,i)},H.AttachmentTypeValues=[0,1,2,3,4,5,6],H.TransformModeValues=[q.TransformMode.Normal,q.TransformMode.OnlyTranslation,q.TransformMode.NoRotationOrReflection,q.TransformMode.NoScale,q.TransformMode.NoScaleOrReflection],H.PositionModeValues=[q.PositionMode.Fixed,q.PositionMode.Percent],H.SpacingModeValues=[q.SpacingMode.Length,q.SpacingMode.Fixed,q.SpacingMode.Percent],H.RotateModeValues=[q.RotateMode.Tangent,q.RotateMode.Chain,q.RotateMode.ChainScale],H.BlendModeValues=[q.BlendMode.Normal,q.BlendMode.Additive,q.BlendMode.Multiply,q.BlendMode.Screen],H.BONE_ROTATE=0,H.BONE_TRANSLATE=1,H.BONE_SCALE=2,H.BONE_SHEAR=3,H.SLOT_ATTACHMENT=0,H.SLOT_COLOR=1,H.SLOT_TWO_COLOR=2,H.PATH_POSITION=0,H.PATH_SPACING=1,H.PATH_MIX=2,H.CURVE_LINEAR=0,H.CURVE_STEPPED=1,H.CURVE_BEZIER=2,H);function H(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}q.SkeletonBinary=t;var x=(e.prototype.readByte=function(){return this.buffer.getInt8(this.index++)},e.prototype.readShort=function(){var t=this.buffer.getInt16(this.index);return this.index+=2,t},e.prototype.readInt32=function(){var t=this.buffer.getInt32(this.index);return this.index+=4,t},e.prototype.readInt=function(t){var e=this.readByte(),n=127&e;return 0!=(128&e)&&(n|=(127&(e=this.readByte()))<<7,0!=(128&e)&&(n|=(127&(e=this.readByte()))<<14,0!=(128&e)&&(n|=(127&(e=this.readByte()))<<21,0!=(128&e)&&(n|=(127&(e=this.readByte()))<<28)))),t?n:n>>>1^-(1&n)},e.prototype.readStringRef=function(){var t=this.readInt(!0);return 0==t?null:this.strings[t-1]},e.prototype.readString=function(){var t=this.readInt(!0);switch(t){case 0:return null;case 1:return""}t--;for(var e="",n=0;n<t;){var r=this.readByte();switch(r>>4){case 12:case 13:e+=String.fromCharCode((31&r)<<6|63&this.readByte()),n+=2;break;case 14:e+=String.fromCharCode((15&r)<<12|(63&this.readByte())<<6|63&this.readByte()),n+=3;break;default:e+=String.fromCharCode(r),n++}}return e},e.prototype.readFloat=function(){var t=this.buffer.getFloat32(this.index);return this.index+=4,t},e.prototype.readBoolean=function(){return 0!=this.readByte()},e);function e(t,e,n,r){void 0===e&&(e=new Array),void 0===n&&(n=0),void 0===r&&(r=new DataView(t.buffer)),this.strings=e,this.index=n,this.buffer=r}var D=function(t,e,n,r,a){this.mesh=t,this.skin=e,this.slotIndex=n,this.parent=r,this.inheritDeform=a},u=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this.bones=t,this.vertices=e}}(spine=spine||{}),function(d){var t=(e.prototype.update=function(t,e){if(null==t)throw new Error("skeleton cannot be null.");var n=this.boundingBoxes,r=this.polygons,a=this.polygonPool,i=t.slots,s=i.length;n.length=0,a.freeAll(r);for(var o=r.length=0;o<s;o++){var h=i[o];if(h.bone.active){var l=h.getAttachment();if(l instanceof d.BoundingBoxAttachment){var u=l;n.push(u);var c=a.obtain();c.length!=u.worldVerticesLength&&(c=d.Utils.newFloatArray(u.worldVerticesLength)),r.push(c),u.computeWorldVertices(h,0,u.worldVerticesLength,c,0,2)}}}e?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},e.prototype.aabbCompute=function(){for(var t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,r=Number.NEGATIVE_INFINITY,a=this.polygons,i=0,s=a.length;i<s;i++)for(var o=a[i],h=o,l=0,u=o.length;l<u;l+=2){var c=h[l],d=h[l+1];t=Math.min(t,c),e=Math.min(e,d),n=Math.max(n,c),r=Math.max(r,d)}this.minX=t,this.minY=e,this.maxX=n,this.maxY=r},e.prototype.aabbContainsPoint=function(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY},e.prototype.aabbIntersectsSegment=function(t,e,n,r){var a=this.minX,i=this.minY,s=this.maxX,o=this.maxY;if(t<=a&&n<=a||e<=i&&r<=i||s<=t&&s<=n||o<=e&&o<=r)return!1;var h=(r-e)/(n-t),l=h*(a-t)+e;if(i<l&&l<o)return!0;if(i<(l=h*(s-t)+e)&&l<o)return!0;var u=(i-e)/h+t;return a<u&&u<s||a<(u=(o-e)/h+t)&&u<s},e.prototype.aabbIntersectsSkeleton=function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},e.prototype.containsPoint=function(t,e){for(var n=this.polygons,r=0,a=n.length;r<a;r++)if(this.containsPointPolygon(n[r],t,e))return this.boundingBoxes[r];return null},e.prototype.containsPointPolygon=function(t,e,n){for(var r=t,a=t.length,i=a-2,s=!1,o=0;o<a;o+=2){var h=r[o+1],l=r[i+1];if(h<n&&n<=l||l<n&&n<=h){var u=r[o];u+(n-h)/(l-h)*(r[i]-u)<e&&(s=!s)}i=o}return s},e.prototype.intersectsSegment=function(t,e,n,r){for(var a=this.polygons,i=0,s=a.length;i<s;i++)if(this.intersectsSegmentPolygon(a[i],t,e,n,r))return this.boundingBoxes[i];return null},e.prototype.intersectsSegmentPolygon=function(t,e,n,r,a){for(var i=t,s=t.length,o=e-r,h=n-a,l=e*a-n*r,u=i[s-2],c=i[s-1],d=0;d<s;d+=2){var p=i[d],f=i[d+1],m=u*f-c*p,g=u-p,v=c-f,y=o*v-h*g,x=(l*g-o*m)/y;if((u<=x&&x<=p||p<=x&&x<=u)&&(e<=x&&x<=r||r<=x&&x<=e)){var w=(l*v-h*m)/y;if((c<=w&&w<=f||f<=w&&w<=c)&&(n<=w&&w<=a||a<=w&&w<=n))return!0}u=p,c=f}return!1},e.prototype.getPolygon=function(t){if(null==t)throw new Error("boundingBox cannot be null.");var e=this.boundingBoxes.indexOf(t);return-1==e?null:this.polygons[e]},e.prototype.getWidth=function(){return this.maxX-this.minX},e.prototype.getHeight=function(){return this.maxY-this.minY},e);function e(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new d.Pool(function(){return d.Utils.newFloatArray(16)})}d.SkeletonBounds=t}(spine=spine||{}),function(Z){var t=(l.prototype.clipStart=function(t,e){if(null!=this.clipAttachment)return 0;var n=(this.clipAttachment=e).worldVerticesLength,r=Z.Utils.setArraySize(this.clippingPolygon,n);e.computeWorldVertices(t,0,n,r,0,2);var a=this.clippingPolygon;l.makeClockwise(a);for(var i=this.clippingPolygons=this.triangulator.decompose(a,this.triangulator.triangulate(a)),s=0,o=i.length;s<o;s++){var h=i[s];l.makeClockwise(h),h.push(h[0]),h.push(h[1])}return i.length},l.prototype.clipEndWithSlot=function(t){null!=this.clipAttachment&&this.clipAttachment.endSlot==t.data&&this.clipEnd()},l.prototype.clipEnd=function(){null!=this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)},l.prototype.isClipping=function(){return null!=this.clipAttachment},l.prototype.clipTriangles=function(t,e,n,r,a,i,s,o){var h=this.clipOutput,l=this.clippedVertices,u=this.clippedTriangles,c=this.clippingPolygons,d=this.clippingPolygons.length,p=o?12:8,f=0;l.length=0;t:for(var m=u.length=0;m<r;m+=3)for(var g=n[m]<<1,v=t[g],y=t[g+1],x=a[g],w=a[g+1],M=t[g=n[m+1]<<1],E=t[g+1],T=a[g],A=a[g+1],b=t[g=n[m+2]<<1],I=t[g+1],S=a[g],C=a[g+1],R=0;R<d;R++){var P=l.length;if(!this.clip(v,y,M,E,b,I,c[R],h)){(O=Z.Utils.setArraySize(l,P+3*p))[P]=v,O[P+1]=y,O[P+2]=i.r,O[P+3]=i.g,O[P+4]=i.b,O[P+5]=i.a,o?(O[P+6]=x,O[P+7]=w,O[P+8]=s.r,O[P+9]=s.g,O[P+10]=s.b,O[P+11]=s.a,O[P+12]=M,O[P+13]=E,O[P+14]=i.r,O[P+15]=i.g,O[P+16]=i.b,O[P+17]=i.a,O[P+18]=T,O[P+19]=A,O[P+20]=s.r,O[P+21]=s.g,O[P+22]=s.b,O[P+23]=s.a,O[P+24]=b,O[P+25]=I,O[P+26]=i.r,O[P+27]=i.g,O[P+28]=i.b,O[P+29]=i.a,O[P+30]=S,O[P+31]=C,O[P+32]=s.r,O[P+33]=s.g,O[P+34]=s.b,O[P+35]=s.a):(O[P+6]=x,O[P+7]=w,O[P+8]=M,O[P+9]=E,O[P+10]=i.r,O[P+11]=i.g,O[P+12]=i.b,O[P+13]=i.a,O[P+14]=T,O[P+15]=A,O[P+16]=b,O[P+17]=I,O[P+18]=i.r,O[P+19]=i.g,O[P+20]=i.b,O[P+21]=i.a,O[P+22]=S,O[P+23]=C),P=u.length,(z=Z.Utils.setArraySize(u,P+3))[P]=f,z[P+1]=f+1,z[P+2]=f+2,f+=3;continue t}var _=h.length;if(0!=_){for(var V=E-I,k=b-M,F=v-b,N=I-y,L=1/(V*F+k*(y-I)),U=_>>1,D=this.clipOutput,O=Z.Utils.setArraySize(l,P+U*p),Y=0;Y<_;Y+=2){var X=D[Y],B=D[Y+1];O[P]=X,O[P+1]=B,O[P+2]=i.r,O[P+3]=i.g,O[P+4]=i.b,O[P+5]=i.a;var W=X-b,q=B-I,H=(V*W+k*q)*L,j=(N*W+F*q)*L,G=1-H-j;O[P+6]=x*H+T*j+S*G,O[P+7]=w*H+A*j+C*G,o&&(O[P+8]=s.r,O[P+9]=s.g,O[P+10]=s.b,O[P+11]=s.a),P+=p}P=u.length;var z=Z.Utils.setArraySize(u,P+3*(U-2));for(U--,Y=1;Y<U;Y++)z[P]=f,z[P+1]=f+Y,z[P+2]=f+Y+1,P+=3;f+=U+1}}},l.prototype.clip=function(t,e,n,r,a,i,s,o){var h=o,l=!1,u=null;2<=s.length%4?(u=o,o=this.scratch):u=this.scratch,u.length=0,u.push(t),u.push(e),u.push(n),u.push(r),u.push(a),u.push(i),u.push(t),u.push(e),o.length=0;for(var c=s,d=s.length-4,p=0;;p+=2){for(var f=c[p],m=c[p+1],g=c[p+2],v=c[p+3],y=f-g,x=m-v,w=u,M=u.length-2,E=o.length,T=0;T<M;T+=2){var A=w[T],b=w[T+1],I=w[T+2],S=w[T+3],C=0<y*(S-v)-x*(I-g);if(0<y*(b-v)-x*(A-g)){if(C){o.push(I),o.push(S);continue}var R=(_=S-b)*(g-f)-(V=I-A)*(v-m);if(1e-6<Math.abs(R)){var P=(V*(m-b)-_*(f-A))/R;o.push(f+(g-f)*P),o.push(m+(v-m)*P)}else o.push(f),o.push(m)}else if(C){var _,V;R=(_=S-b)*(g-f)-(V=I-A)*(v-m),1e-6<Math.abs(R)?(P=(V*(m-b)-_*(f-A))/R,o.push(f+(g-f)*P),o.push(m+(v-m)*P)):(o.push(f),o.push(m)),o.push(I),o.push(S)}l=!0}if(E==o.length)return!(h.length=0);if(o.push(o[0]),o.push(o[1]),p==d)break;var k=o;(o=u).length=0,u=k}if(h!=o){p=h.length=0;for(var F=o.length-2;p<F;p++)h[p]=o[p]}else h.length=h.length-2;return l},l.makeClockwise=function(t){for(var e=t,n=t.length,r=e[n-2]*e[1]-e[0]*e[n-1],a=0,i=0,s=0,o=0,h=n-3;o<h;o+=2)a=e[o],i=e[o+1],s=e[o+2],r+=a*e[o+3]-s*i;if(!(r<0)){o=0;var l=n-2;for(h=n>>1;o<h;o+=2){var u=e[o],c=e[o+1],d=l-o;e[o]=e[d],e[o+1]=e[1+d],e[d]=u,e[1+d]=c}}},l);function l(){this.triangulator=new Z.Triangulator,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array}Z.SkeletonClipping=t}(spine=spine||{}),function(t){var e=(n.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,r=e.length;n<r;n++){var a=e[n];if(a.name==t)return a}return null},n.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,r=e.length;n<r;n++)if(e[n].name==t)return n;return-1},n.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,r=e.length;n<r;n++){var a=e[n];if(a.name==t)return a}return null},n.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,r=e.length;n<r;n++)if(e[n].name==t)return n;return-1},n.prototype.findSkin=function(t){if(null==t)throw new Error("skinName cannot be null.");for(var e=this.skins,n=0,r=e.length;n<r;n++){var a=e[n];if(a.name==t)return a}return null},n.prototype.findEvent=function(t){if(null==t)throw new Error("eventDataName cannot be null.");for(var e=this.events,n=0,r=e.length;n<r;n++){var a=e[n];if(a.name==t)return a}return null},n.prototype.findAnimation=function(t){if(null==t)throw new Error("animationName cannot be null.");for(var e=this.animations,n=0,r=e.length;n<r;n++){var a=e[n];if(a.name==t)return a}return null},n.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,n=0,r=e.length;n<r;n++){var a=e[n];if(a.name==t)return a}return null},n.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,n=0,r=e.length;n<r;n++){var a=e[n];if(a.name==t)return a}return null},n.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,n=0,r=e.length;n<r;n++){var a=e[n];if(a.name==t)return a}return null},n.prototype.findPathConstraintIndex=function(t){if(null==t)throw new Error("pathConstraintName cannot be null.");for(var e=this.pathConstraints,n=0,r=e.length;n<r;n++)if(e[n].name==t)return n;return-1},n);function n(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}t.SkeletonData=e}(spine=spine||{}),function(tt){var t=(F.prototype.readSkeletonData=function(t){var e=this.scale,n=new tt.SkeletonData,r="string"==typeof t?JSON.parse(t):t,a=r.skeleton;if(null!=a){if(n.hash=a.hash,n.version=a.spine,"3.8.75"==n.version)throw new Error("Unsupported skeleton data, please export with a newer version of Spine.");n.x=a.x,n.y=a.y,n.width=a.width,n.height=a.height,n.fps=a.fps,n.imagesPath=a.images}if(r.bones)for(var i=0;i<r.bones.length;i++){var s=r.bones[i],o=null,h=this.getValue(s,"parent",null);if(null!=h&&null==(o=n.findBone(h)))throw new Error("Parent bone not found: "+h);(d=new tt.BoneData(n.bones.length,s.name,o)).length=this.getValue(s,"length",0)*e,d.x=this.getValue(s,"x",0)*e,d.y=this.getValue(s,"y",0)*e,d.rotation=this.getValue(s,"rotation",0),d.scaleX=this.getValue(s,"scaleX",1),d.scaleY=this.getValue(s,"scaleY",1),d.shearX=this.getValue(s,"shearX",0),d.shearY=this.getValue(s,"shearY",0),d.transformMode=F.transformModeFromString(this.getValue(s,"transform","normal")),d.skinRequired=this.getValue(s,"skin",!1),n.bones.push(d)}if(r.slots)for(i=0;i<r.slots.length;i++){var l=(A=r.slots[i]).name,u=A.bone,c=n.findBone(u);if(null==c)throw new Error("Slot bone not found: "+u);var d=new tt.SlotData(n.slots.length,l,c),p=this.getValue(A,"color",null);null!=p&&d.color.setFromString(p);var f=this.getValue(A,"dark",null);null!=f&&(d.darkColor=new tt.Color(1,1,1,1),d.darkColor.setFromString(f)),d.attachmentName=this.getValue(A,"attachment",null),d.blendMode=F.blendModeFromString(this.getValue(A,"blend","normal")),n.slots.push(d)}if(r.ik)for(i=0;i<r.ik.length;i++){var m=r.ik[i];(d=new tt.IkConstraintData(m.name)).order=this.getValue(m,"order",0),d.skinRequired=this.getValue(m,"skin",!1);for(var g=0;g<m.bones.length;g++){if(u=m.bones[g],null==(M=n.findBone(u)))throw new Error("IK bone not found: "+u);d.bones.push(M)}var v=m.target;if(d.target=n.findBone(v),null==d.target)throw new Error("IK target bone not found: "+v);d.mix=this.getValue(m,"mix",1),d.softness=this.getValue(m,"softness",0)*e,d.bendDirection=this.getValue(m,"bendPositive",!0)?1:-1,d.compress=this.getValue(m,"compress",!1),d.stretch=this.getValue(m,"stretch",!1),d.uniform=this.getValue(m,"uniform",!1),n.ikConstraints.push(d)}if(r.transform)for(i=0;i<r.transform.length;i++){for(m=r.transform[i],(d=new tt.TransformConstraintData(m.name)).order=this.getValue(m,"order",0),d.skinRequired=this.getValue(m,"skin",!1),g=0;g<m.bones.length;g++){if(u=m.bones[g],null==(M=n.findBone(u)))throw new Error("Transform constraint bone not found: "+u);d.bones.push(M)}if(v=m.target,d.target=n.findBone(v),null==d.target)throw new Error("Transform constraint target bone not found: "+v);d.local=this.getValue(m,"local",!1),d.relative=this.getValue(m,"relative",!1),d.offsetRotation=this.getValue(m,"rotation",0),d.offsetX=this.getValue(m,"x",0)*e,d.offsetY=this.getValue(m,"y",0)*e,d.offsetScaleX=this.getValue(m,"scaleX",0),d.offsetScaleY=this.getValue(m,"scaleY",0),d.offsetShearY=this.getValue(m,"shearY",0),d.rotateMix=this.getValue(m,"rotateMix",1),d.translateMix=this.getValue(m,"translateMix",1),d.scaleMix=this.getValue(m,"scaleMix",1),d.shearMix=this.getValue(m,"shearMix",1),n.transformConstraints.push(d)}if(r.path)for(i=0;i<r.path.length;i++){for(m=r.path[i],(d=new tt.PathConstraintData(m.name)).order=this.getValue(m,"order",0),d.skinRequired=this.getValue(m,"skin",!1),g=0;g<m.bones.length;g++){if(u=m.bones[g],null==(M=n.findBone(u)))throw new Error("Transform constraint bone not found: "+u);d.bones.push(M)}if(v=m.target,d.target=n.findSlot(v),null==d.target)throw new Error("Path target slot not found: "+v);d.positionMode=F.positionModeFromString(this.getValue(m,"positionMode","percent")),d.spacingMode=F.spacingModeFromString(this.getValue(m,"spacingMode","length")),d.rotateMode=F.rotateModeFromString(this.getValue(m,"rotateMode","tangent")),d.offsetRotation=this.getValue(m,"rotation",0),d.position=this.getValue(m,"position",0),d.positionMode==tt.PositionMode.Fixed&&(d.position*=e),d.spacing=this.getValue(m,"spacing",0),d.spacingMode!=tt.SpacingMode.Length&&d.spacingMode!=tt.SpacingMode.Fixed||(d.spacing*=e),d.rotateMix=this.getValue(m,"rotateMix",1),d.translateMix=this.getValue(m,"translateMix",1),n.pathConstraints.push(d)}if(r.skins)for(i=0;i<r.skins.length;i++){var y=r.skins[i],x=new tt.Skin(y.name);if(y.bones)for(var w=0;w<y.bones.length;w++){var M;if(null==(M=n.findBone(y.bones[w])))throw new Error("Skin bone not found: "+y.bones[i]);x.bones.push(M)}if(y.ik)for(w=0;w<y.ik.length;w++){if(null==(E=n.findIkConstraint(y.ik[w])))throw new Error("Skin IK constraint not found: "+y.ik[i]);x.constraints.push(E)}if(y.transform)for(w=0;w<y.transform.length;w++){if(null==(E=n.findTransformConstraint(y.transform[w])))throw new Error("Skin transform constraint not found: "+y.transform[i]);x.constraints.push(E)}if(y.path)for(w=0;w<y.path.length;w++){var E;if(null==(E=n.findPathConstraint(y.path[w])))throw new Error("Skin path constraint not found: "+y.path[i]);x.constraints.push(E)}for(var l in y.attachments){var T=n.findSlot(l);if(null==T)throw new Error("Slot not found: "+l);var A=y.attachments[l];for(var b in A){var I=this.readAttachment(A[b],x,T.index,b,n);null!=I&&x.setAttachment(T.index,b,I)}}n.skins.push(x),"default"==x.name&&(n.defaultSkin=x)}i=0;for(var S=this.linkedMeshes.length;i<S;i++){var C=this.linkedMeshes[i];if(null==(x=null==C.skin?n.defaultSkin:n.findSkin(C.skin)))throw new Error("Skin not found: "+C.skin);var R=x.getAttachment(C.slotIndex,C.parent);if(null==R)throw new Error("Parent mesh not found: "+C.parent);C.mesh.deformAttachment=C.inheritDeform?R:C.mesh,C.mesh.setParentMesh(R),C.mesh.updateUVs()}if(this.linkedMeshes.length=0,r.events)for(var P in r.events){var _=r.events[P];(d=new tt.EventData(P)).intValue=this.getValue(_,"int",0),d.floatValue=this.getValue(_,"float",0),d.stringValue=this.getValue(_,"string",""),d.audioPath=this.getValue(_,"audio",null),null!=d.audioPath&&(d.volume=this.getValue(_,"volume",1),d.balance=this.getValue(_,"balance",0)),n.events.push(d)}if(r.animations)for(var V in r.animations){var k=r.animations[V];this.readAnimation(k,V,n)}return n},F.prototype.readAttachment=function(t,e,n,r,a){var i=this.scale;switch(r=this.getValue(t,"name",r),this.getValue(t,"type","region")){case"region":var s=this.getValue(t,"path",r),o=this.attachmentLoader.newRegionAttachment(e,r,s);return null==o?null:(o.path=s,o.x=this.getValue(t,"x",0)*i,o.y=this.getValue(t,"y",0)*i,o.scaleX=this.getValue(t,"scaleX",1),o.scaleY=this.getValue(t,"scaleY",1),o.rotation=this.getValue(t,"rotation",0),o.width=t.width*i,o.height=t.height*i,null!=(v=this.getValue(t,"color",null))&&o.color.setFromString(v),o.updateOffset(),o);case"boundingbox":var h=this.attachmentLoader.newBoundingBoxAttachment(e,r);return null==h?null:(this.readVertices(t,h,t.vertexCount<<1),null!=(v=this.getValue(t,"color",null))&&h.color.setFromString(v),h);case"mesh":case"linkedmesh":s=this.getValue(t,"path",r);var l=this.attachmentLoader.newMeshAttachment(e,r,s);if(null==l)return null;l.path=s,null!=(v=this.getValue(t,"color",null))&&l.color.setFromString(v),l.width=this.getValue(t,"width",0)*i,l.height=this.getValue(t,"height",0)*i;var u=this.getValue(t,"parent",null);if(null!=u)return this.linkedMeshes.push(new w(l,this.getValue(t,"skin",null),n,u,this.getValue(t,"deform",!0))),l;var c=t.uvs;return this.readVertices(t,l,c.length),l.triangles=t.triangles,l.regionUVs=c,l.updateUVs(),l.edges=this.getValue(t,"edges",null),l.hullLength=2*this.getValue(t,"hull",0),l;case"path":if(null==(s=this.attachmentLoader.newPathAttachment(e,r)))return null;s.closed=this.getValue(t,"closed",!1),s.constantSpeed=this.getValue(t,"constantSpeed",!0);var d=t.vertexCount;this.readVertices(t,s,d<<1);for(var p=tt.Utils.newArray(d/3,0),f=0;f<t.lengths.length;f++)p[f]=t.lengths[f]*i;return s.lengths=p,null!=(v=this.getValue(t,"color",null))&&s.color.setFromString(v),s;case"point":var m=this.attachmentLoader.newPointAttachment(e,r);return null==m?null:(m.x=this.getValue(t,"x",0)*i,m.y=this.getValue(t,"y",0)*i,m.rotation=this.getValue(t,"rotation",0),null!=(v=this.getValue(t,"color",null))&&m.color.setFromString(v),m);case"clipping":var g=this.attachmentLoader.newClippingAttachment(e,r);if(null==g)return null;var v,y=this.getValue(t,"end",null);if(null!=y){var x=a.findSlot(y);if(null==x)throw new Error("Clipping end slot not found: "+y);g.endSlot=x}return d=t.vertexCount,this.readVertices(t,g,d<<1),null!=(v=this.getValue(t,"color",null))&&g.color.setFromString(v),g}return null},F.prototype.readVertices=function(t,e,n){var r=this.scale;e.worldVerticesLength=n;var a=t.vertices;if(n!=a.length){var i=new Array,s=new Array;for(u=0,c=a.length;u<c;){var o=a[u++];s.push(o);for(var h=u+4*o;u<h;u+=4)s.push(a[u]),i.push(a[u+1]*r),i.push(a[u+2]*r),i.push(a[u+3])}e.bones=s,e.vertices=tt.Utils.toFloatArray(i)}else{var l=tt.Utils.toFloatArray(a);if(1!=r)for(var u=0,c=a.length;u<c;u++)l[u]*=r;e.vertices=l}},F.prototype.readAnimation=function(t,e,n){var r=this.scale,a=new Array,i=0;if(t.slots)for(var s in t.slots){var o=t.slots[s];if(-1==(Z=n.findSlotIndex(s)))throw new Error("Slot not found: "+s);for(var h in o){var l=o[h];if("attachment"==h){(x=new tt.AttachmentTimeline(l.length)).slotIndex=Z;for(var u=0,c=0;c<l.length;c++){var d=l[c];x.setFrame(u++,this.getValue(d,"time",0),d.name)}a.push(x),i=Math.max(i,x.frames[x.getFrameCount()-1])}else if("color"==h){for((x=new tt.ColorTimeline(l.length)).slotIndex=Z,c=u=0;c<l.length;c++){d=l[c];var p=new tt.Color;p.setFromString(d.color),x.setFrame(u,this.getValue(d,"time",0),p.r,p.g,p.b,p.a),this.readCurve(d,x,u),u++}a.push(x),i=Math.max(i,x.frames[(x.getFrameCount()-1)*tt.ColorTimeline.ENTRIES])}else{if("twoColor"!=h)throw new Error("Invalid timeline type for a slot: "+h+" ("+s+")");for((x=new tt.TwoColorTimeline(l.length)).slotIndex=Z,c=u=0;c<l.length;c++){d=l[c];var f=new tt.Color,m=new tt.Color;f.setFromString(d.light),m.setFromString(d.dark),x.setFrame(u,this.getValue(d,"time",0),f.r,f.g,f.b,f.a,m.r,m.g,m.b),this.readCurve(d,x,u),u++}a.push(x),i=Math.max(i,x.frames[(x.getFrameCount()-1)*tt.TwoColorTimeline.ENTRIES])}}}if(t.bones)for(var g in t.bones){var v=t.bones[g],y=n.findBoneIndex(g);if(-1==y)throw new Error("Bone not found: "+g);for(var h in v)if(l=v[h],"rotate"===h){for((x=new tt.RotateTimeline(l.length)).boneIndex=y,c=u=0;c<l.length;c++)d=l[c],x.setFrame(u,this.getValue(d,"time",0),this.getValue(d,"angle",0)),this.readCurve(d,x,u),u++;a.push(x),i=Math.max(i,x.frames[(x.getFrameCount()-1)*tt.RotateTimeline.ENTRIES])}else{if("translate"!==h&&"scale"!==h&&"shear"!==h)throw new Error("Invalid timeline type for a bone: "+h+" ("+g+")");var x=null,w=1,M=0;for("scale"===h?(x=new tt.ScaleTimeline(l.length),M=1):"shear"===h?x=new tt.ShearTimeline(l.length):(x=new tt.TranslateTimeline(l.length),w=r),x.boneIndex=y,c=u=0;c<l.length;c++){d=l[c];var E=this.getValue(d,"x",M),T=this.getValue(d,"y",M);x.setFrame(u,this.getValue(d,"time",0),E*w,T*w),this.readCurve(d,x,u),u++}a.push(x),i=Math.max(i,x.frames[(x.getFrameCount()-1)*tt.TranslateTimeline.ENTRIES])}}if(t.ik)for(var A in t.ik){var b=t.ik[A],I=n.findIkConstraint(A);for((x=new tt.IkConstraintTimeline(b.length)).ikConstraintIndex=n.ikConstraints.indexOf(I),c=u=0;c<b.length;c++)d=b[c],x.setFrame(u,this.getValue(d,"time",0),this.getValue(d,"mix",1),this.getValue(d,"softness",0)*r,this.getValue(d,"bendPositive",!0)?1:-1,this.getValue(d,"compress",!1),this.getValue(d,"stretch",!1)),this.readCurve(d,x,u),u++;a.push(x),i=Math.max(i,x.frames[(x.getFrameCount()-1)*tt.IkConstraintTimeline.ENTRIES])}if(t.transform)for(var A in t.transform){for(b=t.transform[A],I=n.findTransformConstraint(A),(x=new tt.TransformConstraintTimeline(b.length)).transformConstraintIndex=n.transformConstraints.indexOf(I),c=u=0;c<b.length;c++)d=b[c],x.setFrame(u,this.getValue(d,"time",0),this.getValue(d,"rotateMix",1),this.getValue(d,"translateMix",1),this.getValue(d,"scaleMix",1),this.getValue(d,"shearMix",1)),this.readCurve(d,x,u),u++;a.push(x),i=Math.max(i,x.frames[(x.getFrameCount()-1)*tt.TransformConstraintTimeline.ENTRIES])}if(t.path)for(var A in t.path){b=t.path[A];var S=n.findPathConstraintIndex(A);if(-1==S)throw new Error("Path constraint not found: "+A);var C=n.pathConstraints[S];for(var h in b)if(l=b[h],"position"===h||"spacing"===h){for(x=null,w=1,"spacing"===h?(x=new tt.PathConstraintSpacingTimeline(l.length),C.spacingMode!=tt.SpacingMode.Length&&C.spacingMode!=tt.SpacingMode.Fixed||(w=r)):(x=new tt.PathConstraintPositionTimeline(l.length),C.positionMode==tt.PositionMode.Fixed&&(w=r)),x.pathConstraintIndex=S,c=u=0;c<l.length;c++)d=l[c],x.setFrame(u,this.getValue(d,"time",0),this.getValue(d,h,0)*w),this.readCurve(d,x,u),u++;a.push(x),i=Math.max(i,x.frames[(x.getFrameCount()-1)*tt.PathConstraintPositionTimeline.ENTRIES])}else if("mix"===h){for((x=new tt.PathConstraintMixTimeline(l.length)).pathConstraintIndex=S,c=u=0;c<l.length;c++)d=l[c],x.setFrame(u,this.getValue(d,"time",0),this.getValue(d,"rotateMix",1),this.getValue(d,"translateMix",1)),this.readCurve(d,x,u),u++;a.push(x),i=Math.max(i,x.frames[(x.getFrameCount()-1)*tt.PathConstraintMixTimeline.ENTRIES])}}if(t.deform)for(var R in t.deform){var P=t.deform[R],_=n.findSkin(R);if(null==_)throw new Error("Skin not found: "+R);for(var s in P){if(o=P[s],-1==(Z=n.findSlotIndex(s)))throw new Error("Slot not found: "+o.name);for(var h in o){l=o[h];var V=_.getAttachment(Z,h);if(null==V)throw new Error("Deform attachment not found: "+l.name);var k=null!=V.bones,F=V.vertices,N=k?F.length/3*2:F.length;(x=new tt.DeformTimeline(l.length)).slotIndex=Z,x.attachment=V;for(var L=u=0;L<l.length;L++){d=l[L];var U=void 0,D=this.getValue(d,"vertices",null);if(null==D)U=k?tt.Utils.newFloatArray(N):F;else{U=tt.Utils.newFloatArray(N);var O=this.getValue(d,"offset",0);if(tt.Utils.arrayCopy(D,0,U,O,D.length),1!=r)for(var Y=(c=O)+D.length;c<Y;c++)U[c]*=r;if(!k)for(c=0;c<N;c++)U[c]+=F[c]}x.setFrame(u,this.getValue(d,"time",0),U),this.readCurve(d,x,u),u++}a.push(x),i=Math.max(i,x.frames[x.getFrameCount()-1])}}}var X=t.drawOrder;if(null==X&&(X=t.draworder),null!=X){x=new tt.DrawOrderTimeline(X.length);var B=n.slots.length;for(L=u=0;L<X.length;L++){var W=X[L],q=null,H=this.getValue(W,"offsets",null);if(null!=H){q=tt.Utils.newArray(B,-1);var j=tt.Utils.newArray(B-H.length,0),G=0,z=0;for(c=0;c<H.length;c++){var Z,J=H[c];if(-1==(Z=n.findSlotIndex(J.slot)))throw new Error("Slot not found: "+J.slot);for(;G!=Z;)j[z++]=G++;q[G+J.offset]=G++}for(;G<B;)j[z++]=G++;for(c=B-1;0<=c;c--)-1==q[c]&&(q[c]=j[--z])}x.setFrame(u++,this.getValue(W,"time",0),q)}a.push(x),i=Math.max(i,x.frames[x.getFrameCount()-1])}if(t.events){for(x=new tt.EventTimeline(t.events.length),c=u=0;c<t.events.length;c++){var Q=t.events[c],K=n.findEvent(Q.name);if(null==K)throw new Error("Event not found: "+Q.name);var $=new tt.Event(tt.Utils.toSinglePrecision(this.getValue(Q,"time",0)),K);$.intValue=this.getValue(Q,"int",K.intValue),$.floatValue=this.getValue(Q,"float",K.floatValue),$.stringValue=this.getValue(Q,"string",K.stringValue),null!=$.data.audioPath&&($.volume=this.getValue(Q,"volume",1),$.balance=this.getValue(Q,"balance",0)),x.setFrame(u++,$)}a.push(x),i=Math.max(i,x.frames[x.getFrameCount()-1])}if(isNaN(i))throw new Error("Error while parsing animation, duration is NaN");n.animations.push(new tt.Animation(e,a,i))},F.prototype.readCurve=function(t,e,n){if(t.hasOwnProperty("curve"))if("stepped"==t.curve)e.setStepped(n);else{var r=t.curve;e.setCurve(n,r,this.getValue(t,"c2",0),this.getValue(t,"c3",1),this.getValue(t,"c4",1))}},F.prototype.getValue=function(t,e,n){return void 0!==t[e]?t[e]:n},F.blendModeFromString=function(t){if("normal"==(t=t.toLowerCase()))return tt.BlendMode.Normal;if("additive"==t)return tt.BlendMode.Additive;if("multiply"==t)return tt.BlendMode.Multiply;if("screen"==t)return tt.BlendMode.Screen;throw new Error("Unknown blend mode: "+t)},F.positionModeFromString=function(t){if("fixed"==(t=t.toLowerCase()))return tt.PositionMode.Fixed;if("percent"==t)return tt.PositionMode.Percent;throw new Error("Unknown position mode: "+t)},F.spacingModeFromString=function(t){if("length"==(t=t.toLowerCase()))return tt.SpacingMode.Length;if("fixed"==t)return tt.SpacingMode.Fixed;if("percent"==t)return tt.SpacingMode.Percent;throw new Error("Unknown position mode: "+t)},F.rotateModeFromString=function(t){if("tangent"==(t=t.toLowerCase()))return tt.RotateMode.Tangent;if("chain"==t)return tt.RotateMode.Chain;if("chainscale"==t)return tt.RotateMode.ChainScale;throw new Error("Unknown rotate mode: "+t)},F.transformModeFromString=function(t){if("normal"==(t=t.toLowerCase()))return tt.TransformMode.Normal;if("onlytranslation"==t)return tt.TransformMode.OnlyTranslation;if("norotationorreflection"==t)return tt.TransformMode.NoRotationOrReflection;if("noscale"==t)return tt.TransformMode.NoScale;if("noscaleorreflection"==t)return tt.TransformMode.NoScaleOrReflection;throw new Error("Unknown transform mode: "+t)},F);function F(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}tt.SkeletonJson=t;var w=function(t,e,n,r,a){this.mesh=t,this.skin=e,this.slotIndex=n,this.parent=r,this.inheritDeform=a}}(spine=spine||{}),function(h){var i=function(t,e,n){this.slotIndex=t,this.name=e,this.attachment=n};h.SkinEntry=i;var t=(e.prototype.setAttachment=function(t,e,n){if(null==n)throw new Error("attachment cannot be null.");var r=this.attachments;t>=r.length&&(r.length=t+1),r[t]||(r[t]={}),r[t][e]=n},e.prototype.addSkin=function(t){for(var e=0;e<t.bones.length;e++){for(var n=t.bones[e],r=!1,a=0;a<this.bones.length;a++)if(this.bones[a]==n){r=!0;break}r||this.bones.push(n)}for(e=0;e<t.constraints.length;e++){var i=t.constraints[e];for(r=!1,a=0;a<this.constraints.length;a++)if(this.constraints[a]==i){r=!0;break}r||this.constraints.push(i)}var s=t.getAttachments();for(e=0;e<s.length;e++){var o=s[e];this.setAttachment(o.slotIndex,o.name,o.attachment)}},e.prototype.copySkin=function(t){for(var e=0;e<t.bones.length;e++){for(var n=t.bones[e],r=!1,a=0;a<this.bones.length;a++)if(this.bones[a]==n){r=!0;break}r||this.bones.push(n)}for(e=0;e<t.constraints.length;e++){var i=t.constraints[e];for(r=!1,a=0;a<this.constraints.length;a++)if(this.constraints[a]==i){r=!0;break}r||this.constraints.push(i)}var s=t.getAttachments();for(e=0;e<s.length;e++){var o=s[e];null!=o.attachment&&(o.attachment instanceof h.MeshAttachment?o.attachment=o.attachment.newLinkedMesh():o.attachment=o.attachment.copy(),this.setAttachment(o.slotIndex,o.name,o.attachment))}},e.prototype.getAttachment=function(t,e){var n=this.attachments[t];return n?n[e]:null},e.prototype.removeAttachment=function(t,e){var n=this.attachments[t];n&&(n[e]=null)},e.prototype.getAttachments=function(){for(var t=new Array,e=0;e<this.attachments.length;e++){var n=this.attachments[e];if(n)for(var r in n){var a=n[r];a&&t.push(new i(e,r,a))}}return t},e.prototype.getAttachmentsForSlot=function(t,e){var n=this.attachments[t];if(n)for(var r in n){var a=n[r];a&&e.push(new i(t,r,a))}},e.prototype.clear=function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0},e.prototype.attachAll=function(t,e){for(var n=0,r=0;r<t.slots.length;r++){var a=t.slots[r],i=a.getAttachment();if(i&&n<e.attachments.length){var s=e.attachments[n];for(var o in s)if(i==s[o]){var h=this.getAttachment(n,o);null!=h&&a.setAttachment(h);break}}n++}},e);function e(t){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,null==t)throw new Error("name cannot be null.");this.name=t}h.Skin=t}(spine=spine||{}),function(n){var t=(e.prototype.getSkeleton=function(){return this.bone.skeleton},e.prototype.getAttachment=function(){return this.attachment},e.prototype.setAttachment=function(t){this.attachment!=t&&(this.attachment=t,this.attachmentTime=this.bone.skeleton.time,this.deform.length=0)},e.prototype.setAttachmentTime=function(t){this.attachmentTime=this.bone.skeleton.time-t},e.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},e.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),null!=this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},e);function e(t,e){if(this.deform=new Array,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("bone cannot be null.");this.data=t,this.bone=e,this.color=new n.Color,this.darkColor=null==t.darkColor?null:new n.Color,this.setToSetupPose()}n.Slot=t}(spine=spine||{}),function(r){function t(t,e,n){if(this.color=new r.Color(1,1,1,1),t<0)throw new Error("index must be >= 0.");if(null==e)throw new Error("name cannot be null.");if(null==n)throw new Error("boneData cannot be null.");this.index=t,this.name=e,this.boneData=n}r.SlotData=t}(spine=spine||{}),function(t){var e,n,r,a,i=(s.prototype.getImage=function(){return this._image},s.filterFromString=function(t){switch(t.toLowerCase()){case"nearest":return e.Nearest;case"linear":return e.Linear;case"mipmap":return e.MipMap;case"mipmapnearestnearest":return e.MipMapNearestNearest;case"mipmaplinearnearest":return e.MipMapLinearNearest;case"mipmapnearestlinear":return e.MipMapNearestLinear;case"mipmaplinearlinear":return e.MipMapLinearLinear;default:throw new Error("Unknown texture filter "+t)}},s.wrapFromString=function(t){switch(t.toLowerCase()){case"mirroredtepeat":return r.MirroredRepeat;case"clamptoedge":return r.ClampToEdge;case"repeat":return r.Repeat;default:throw new Error("Unknown texture wrap "+t)}},s);function s(t){this._image=t}t.Texture=i,(n=e=t.TextureFilter||(t.TextureFilter={}))[n.Nearest=9728]="Nearest",n[n.Linear=9729]="Linear",n[n.MipMap=9987]="MipMap",n[n.MipMapNearestNearest=9984]="MipMapNearestNearest",n[n.MipMapLinearNearest=9985]="MipMapLinearNearest",n[n.MipMapNearestLinear=9986]="MipMapNearestLinear",n[n.MipMapLinearLinear=9987]="MipMapLinearLinear",(a=r=t.TextureWrap||(t.TextureWrap={}))[a.MirroredRepeat=33648]="MirroredRepeat",a[a.ClampToEdge=33071]="ClampToEdge",a[a.Repeat=10497]="Repeat";function o(){this.u=0,this.v=0,this.u2=0,this.v2=0,this.width=0,this.height=0,this.rotate=!1,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0}t.TextureRegion=o;var h,l=(__extends(u,h=i),u.prototype.setFilters=function(t,e){},u.prototype.setWraps=function(t,e){},u.prototype.dispose=function(){},u);function u(){return null!==h&&h.apply(this,arguments)||this}t.FakeTexture=l}(spine=spine||{}),function(p){var t=(e.prototype.load=function(t,e){if(null==e)throw new Error("textureLoader cannot be null.");for(var n=new f(t),r=new Array(4),a=null;;){var i=n.readLine();if(null==i)break;if(0==(i=i.trim()).length)a=null;else if(a){var s=new g;s.name=i,s.page=a;var o=n.readValue();"true"==o.toLocaleLowerCase()?s.degrees=90:"false"==o.toLocaleLowerCase()?s.degrees=0:s.degrees=parseFloat(o),s.rotate=90==s.degrees,n.readTuple(r);var h=parseInt(r[0]),l=parseInt(r[1]);n.readTuple(r);var u=parseInt(r[0]),c=parseInt(r[1]);s.u=h/a.width,s.v=l/a.height,s.rotate?(s.u2=(h+c)/a.width,s.v2=(l+u)/a.height):(s.u2=(h+u)/a.width,s.v2=(l+c)/a.height),s.x=h,s.y=l,s.width=Math.abs(u),s.height=Math.abs(c),4==n.readTuple(r)&&4==n.readTuple(r)&&n.readTuple(r),s.originalWidth=parseInt(r[0]),s.originalHeight=parseInt(r[1]),n.readTuple(r),s.offsetX=parseInt(r[0]),s.offsetY=parseInt(r[1]),s.index=parseInt(n.readValue()),s.texture=a.texture,this.regions.push(s)}else{(a=new m).name=i,2==n.readTuple(r)&&(a.width=parseInt(r[0]),a.height=parseInt(r[1]),n.readTuple(r)),n.readTuple(r),a.minFilter=p.Texture.filterFromString(r[0]),a.magFilter=p.Texture.filterFromString(r[1]);var d=n.readValue();a.uWrap=p.TextureWrap.ClampToEdge,a.vWrap=p.TextureWrap.ClampToEdge,"x"==d?a.uWrap=p.TextureWrap.Repeat:"y"==d?a.vWrap=p.TextureWrap.Repeat:"xy"==d&&(a.uWrap=a.vWrap=p.TextureWrap.Repeat),a.texture=e(i),a.texture.setFilters(a.minFilter,a.magFilter),a.texture.setWraps(a.uWrap,a.vWrap),a.width=a.texture.getImage().width,a.height=a.texture.getImage().height,this.pages.push(a)}}},e.prototype.findRegion=function(t){for(var e=0;e<this.regions.length;e++)if(this.regions[e].name==t)return this.regions[e];return null},e.prototype.dispose=function(){for(var t=0;t<this.pages.length;t++)this.pages[t].texture.dispose()},e);function e(t,e){this.pages=new Array,this.regions=new Array,this.load(t,e)}p.TextureAtlas=t;var f=(n.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},n.prototype.readValue=function(){var t=this.readLine(),e=t.indexOf(":");if(-1==e)throw new Error("Invalid line: "+t);return t.substring(e+1).trim()},n.prototype.readTuple=function(t){var e=this.readLine(),n=e.indexOf(":");if(-1==n)throw new Error("Invalid line: "+e);for(var r=0,a=n+1;r<3;r++){var i=e.indexOf(",",a);if(-1==i)break;t[r]=e.substr(a,i-a).trim(),a=i+1}return t[r]=e.substring(a).trim(),r+1},n);function n(t){this.index=0,this.lines=t.split(/\r\n|\r|\n/)}var m=function(){};p.TextureAtlasPage=m;var r,g=(r=p.TextureRegion,__extends(a,r),a);function a(){return null!==r&&r.apply(this,arguments)||this}p.TextureAtlasRegion=g}(spine=spine||{}),function(C){var t=(e.prototype.isActive=function(){return this.active},e.prototype.apply=function(){this.update()},e.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},e.prototype.applyAbsoluteWorld=function(){for(var t=this.rotateMix,e=this.translateMix,n=this.scaleMix,r=this.shearMix,a=this.target,i=a.a,s=a.b,o=a.c,h=a.d,l=0<i*h-s*o?C.MathUtils.degRad:-C.MathUtils.degRad,u=this.data.offsetRotation*l,c=this.data.offsetShearY*l,d=this.bones,p=0,f=d.length;p<f;p++){var m=d[p],g=!1;if(0!=t){var v=m.a,y=m.b,x=m.c,w=m.d;(I=Math.atan2(o,i)-Math.atan2(x,v)+u)>C.MathUtils.PI?I-=C.MathUtils.PI2:I<-C.MathUtils.PI&&(I+=C.MathUtils.PI2),I*=t;var M=Math.cos(I),E=Math.sin(I);m.a=M*v-E*x,m.b=M*y-E*w,m.c=E*v+M*x,m.d=E*y+M*w,g=!0}if(0!=e){var T=this.temp;a.localToWorld(T.set(this.data.offsetX,this.data.offsetY)),m.worldX+=(T.x-m.worldX)*e,m.worldY+=(T.y-m.worldY)*e,g=!0}if(0<n){var A=Math.sqrt(m.a*m.a+m.c*m.c),b=Math.sqrt(i*i+o*o);1e-5<A&&(A=(A+(b-A+this.data.offsetScaleX)*n)/A),m.a*=A,m.c*=A,A=Math.sqrt(m.b*m.b+m.d*m.d),b=Math.sqrt(s*s+h*h),1e-5<A&&(A=(A+(b-A+this.data.offsetScaleY)*n)/A),m.b*=A,m.d*=A,g=!0}if(0<r){y=m.b,w=m.d;var I,S=Math.atan2(w,y);(I=Math.atan2(h,s)-Math.atan2(o,i)-(S-Math.atan2(m.c,m.a)))>C.MathUtils.PI?I-=C.MathUtils.PI2:I<-C.MathUtils.PI&&(I+=C.MathUtils.PI2),I=S+(I+c)*r,A=Math.sqrt(y*y+w*w),m.b=Math.cos(I)*A,m.d=Math.sin(I)*A,g=!0}g&&(m.appliedValid=!1)}},e.prototype.applyRelativeWorld=function(){for(var t=this.rotateMix,e=this.translateMix,n=this.scaleMix,r=this.shearMix,a=this.target,i=a.a,s=a.b,o=a.c,h=a.d,l=0<i*h-s*o?C.MathUtils.degRad:-C.MathUtils.degRad,u=this.data.offsetRotation*l,c=this.data.offsetShearY*l,d=this.bones,p=0,f=d.length;p<f;p++){var m,g=d[p],v=!1;if(0!=t){var y=g.a,x=g.b,w=g.c,M=g.d;(m=Math.atan2(o,i)+u)>C.MathUtils.PI?m-=C.MathUtils.PI2:m<-C.MathUtils.PI&&(m+=C.MathUtils.PI2),m*=t;var E=Math.cos(m),T=Math.sin(m);g.a=E*y-T*w,g.b=E*x-T*M,g.c=T*y+E*w,g.d=T*x+E*M,v=!0}if(0!=e){var A=this.temp;a.localToWorld(A.set(this.data.offsetX,this.data.offsetY)),g.worldX+=A.x*e,g.worldY+=A.y*e,v=!0}if(0<n){var b=(Math.sqrt(i*i+o*o)-1+this.data.offsetScaleX)*n+1;g.a*=b,g.c*=b,b=(Math.sqrt(s*s+h*h)-1+this.data.offsetScaleY)*n+1,g.b*=b,g.d*=b,v=!0}if(0<r)(m=Math.atan2(h,s)-Math.atan2(o,i))>C.MathUtils.PI?m-=C.MathUtils.PI2:m<-C.MathUtils.PI&&(m+=C.MathUtils.PI2),x=g.b,M=g.d,m=Math.atan2(M,x)+(m-C.MathUtils.PI/2+c)*r,b=Math.sqrt(x*x+M*M),g.b=Math.cos(m)*b,g.d=Math.sin(m)*b,v=!0;v&&(g.appliedValid=!1)}},e.prototype.applyAbsoluteLocal=function(){var t=this.rotateMix,e=this.translateMix,n=this.scaleMix,r=this.shearMix,a=this.target;a.appliedValid||a.updateAppliedTransform();for(var i=this.bones,s=0,o=i.length;s<o;s++){var h=i[s];h.appliedValid||h.updateAppliedTransform();var l=h.arotation;if(0!=t){var u=a.arotation-l+this.data.offsetRotation;l+=(u-=360*(16384-(16384.499999999996-u/360|0)))*t}var c=h.ax,d=h.ay;0!=e&&(c+=(a.ax-c+this.data.offsetX)*e,d+=(a.ay-d+this.data.offsetY)*e);var p=h.ascaleX,f=h.ascaleY;0!=n&&(1e-5<p&&(p=(p+(a.ascaleX-p+this.data.offsetScaleX)*n)/p),1e-5<f&&(f=(f+(a.ascaleY-f+this.data.offsetScaleY)*n)/f));var m=h.ashearY;0!=r&&(u=a.ashearY-m+this.data.offsetShearY,u-=360*(16384-(16384.499999999996-u/360|0)),h.shearY+=u*r),h.updateWorldTransformWith(c,d,l,p,f,h.ashearX,m)}},e.prototype.applyRelativeLocal=function(){var t=this.rotateMix,e=this.translateMix,n=this.scaleMix,r=this.shearMix,a=this.target;a.appliedValid||a.updateAppliedTransform();for(var i=this.bones,s=0,o=i.length;s<o;s++){var h=i[s];h.appliedValid||h.updateAppliedTransform();var l=h.arotation;0!=t&&(l+=(a.arotation+this.data.offsetRotation)*t);var u=h.ax,c=h.ay;0!=e&&(u+=(a.ax+this.data.offsetX)*e,c+=(a.ay+this.data.offsetY)*e);var d=h.ascaleX,p=h.ascaleY;0!=n&&(1e-5<d&&(d*=(a.ascaleX-1+this.data.offsetScaleX)*n+1),1e-5<p&&(p*=(a.ascaleY-1+this.data.offsetScaleY)*n+1));var f=h.ashearY;0!=r&&(f+=(a.ashearY+this.data.offsetShearY)*r),h.updateWorldTransformWith(u,c,l,d,p,h.ashearX,f)}},e);function e(t,e){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new C.Vector2,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix,this.scaleMix=t.scaleMix,this.shearMix=t.shearMix,this.bones=new Array;for(var n=0;n<t.bones.length;n++)this.bones.push(e.findBone(t.bones[n].name));this.target=e.findBone(t.target.name)}C.TransformConstraint=t}(spine=spine||{}),function(t){var n,e=(n=t.ConstraintData,__extends(r,n),r);function r(t){var e=n.call(this,t,0,!1)||this;return e.bones=new Array,e.rotateMix=0,e.translateMix=0,e.scaleMix=0,e.shearMix=0,e.offsetRotation=0,e.offsetX=0,e.offsetY=0,e.offsetScaleX=0,e.offsetScaleY=0,e.offsetShearY=0,e.relative=!1,e.local=!1,e}t.TransformConstraintData=e}(spine=spine||{}),function(t){var e=(X.prototype.triangulate=function(t){for(var e=t,n=t.length>>1,r=this.indicesArray,a=r.length=0;a<n;a++)r[a]=a;for(var i=this.isConcaveArray,s=(a=i.length=0,n);a<s;++a)i[a]=X.isConcave(a,n,e,r);var o=this.triangles;for(o.length=0;3<n;){for(var h=n-1,l=(a=0,1);;){t:if(!i[a]){for(var u=r[h]<<1,c=r[a]<<1,d=r[l]<<1,p=e[u],f=e[1+u],m=e[c],g=e[1+c],v=e[d],y=e[1+d],x=(l+1)%n;x!=h;x=(x+1)%n)if(i[x]){var w=r[x]<<1,M=e[w],E=e[1+w];if(X.positiveArea(v,y,p,f,M,E)&&X.positiveArea(p,f,m,g,M,E)&&X.positiveArea(m,g,v,y,M,E))break t}break}if(0==l){do{if(!i[a])break;a--}while(0<a);break}h=a,l=((a=l)+1)%n}o.push(r[(n+a-1)%n]),o.push(r[a]),o.push(r[(a+1)%n]),r.splice(a,1),i.splice(a,1);var T=(--n+a-1)%n,A=a==n?0:a;i[T]=X.isConcave(T,n,e,r),i[A]=X.isConcave(A,n,e,r)}return 3==n&&(o.push(r[2]),o.push(r[0]),o.push(r[1])),o},X.prototype.decompose=function(t,e){var n=t,r=this.convexPolygons;this.polygonPool.freeAll(r),r.length=0;var a=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(a),a.length=0;var i=this.polygonIndicesPool.obtain();i.length=0;for(var s=this.polygonPool.obtain(),o=-1,h=s.length=0,l=0,u=e.length;l<u;l+=3){var c=e[l]<<1,d=e[l+1]<<1,p=e[l+2]<<1,f=n[c],m=n[1+c],g=n[d],v=n[1+d],y=n[p],x=n[1+p],w=!1;if(o==c){var M=s.length-4,E=X.winding(s[M],s[M+1],s[M+2],s[M+3],y,x),T=X.winding(y,x,s[0],s[1],s[2],s[3]);E==h&&T==h&&(s.push(y),s.push(x),i.push(p),w=!0)}w||(0<s.length?(r.push(s),a.push(i)):(this.polygonPool.free(s),this.polygonIndicesPool.free(i)),(s=this.polygonPool.obtain()).length=0,s.push(f),s.push(m),s.push(g),s.push(v),s.push(y),s.push(x),(i=this.polygonIndicesPool.obtain()).length=0,i.push(c),i.push(d),i.push(p),h=X.winding(f,m,g,v,y,x),o=c)}for(0<s.length&&(r.push(s),a.push(i)),l=0,u=r.length;l<u;l++)if(0!=(i=a[l]).length)for(var A=i[0],b=i[i.length-1],I=(s=r[l])[M=s.length-4],S=s[M+1],C=s[M+2],R=s[M+3],P=s[0],_=s[1],V=s[2],k=s[3],F=X.winding(I,S,C,R,P,_),N=0;N<u;N++)if(N!=l){var L=a[N];if(3==L.length){var U=L[0],D=L[1],O=L[2],Y=r[N];y=Y[Y.length-2],x=Y[Y.length-1],U==A&&D==b&&(E=X.winding(I,S,C,R,y,x),T=X.winding(y,x,P,_,V,k),E==F&&T==F&&(Y.length=0,L.length=0,s.push(y),s.push(x),i.push(O),I=C,S=R,C=y,R=x,N=0))}}for(l=r.length-1;0<=l;l--)0==(s=r[l]).length&&(r.splice(l,1),this.polygonPool.free(s),i=a[l],a.splice(l,1),this.polygonIndicesPool.free(i));return r},X.isConcave=function(t,e,n,r){var a=r[(e+t-1)%e]<<1,i=r[t]<<1,s=r[(t+1)%e]<<1;return!this.positiveArea(n[a],n[1+a],n[i],n[1+i],n[s],n[1+s])},X.positiveArea=function(t,e,n,r,a,i){return 0<=t*(i-r)+n*(e-i)+a*(r-e)},X.winding=function(t,e,n,r,a,i){var s=n-t,o=r-e;return 0<=a*o-i*s+s*e-t*o?1:-1},X);function X(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new t.Pool(function(){return new Array}),this.polygonIndicesPool=new t.Pool(function(){return new Array})}t.Triangulator=e}(spine=spine||{}),function(t){var e=(n.prototype.add=function(t){var e=this.contains(t);return this.array[0|t]=0|t,!e},n.prototype.contains=function(t){return null!=this.array[0|t]},n.prototype.remove=function(t){this.array[0|t]=void 0},n.prototype.clear=function(){this.array.length=0},n);function n(){this.array=new Array}t.IntSet=e;var r=(a.prototype.set=function(t,e,n,r){return this.r=t,this.g=e,this.b=n,this.a=r,this.clamp(),this},a.prototype.setFromColor=function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this},a.prototype.setFromString=function(t){return t="#"==t.charAt(0)?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=(8!=t.length?255:parseInt(t.substr(6,2),16))/255,this},a.prototype.add=function(t,e,n,r){return this.r+=t,this.g+=e,this.b+=n,this.a+=r,this.clamp(),this},a.prototype.clamp=function(){return this.r<0?this.r=0:1<this.r&&(this.r=1),this.g<0?this.g=0:1<this.g&&(this.g=1),this.b<0?this.b=0:1<this.b&&(this.b=1),this.a<0?this.a=0:1<this.a&&(this.a=1),this},a.rgba8888ToColor=function(t,e){t.r=((4278190080&e)>>>24)/255,t.g=((16711680&e)>>>16)/255,t.b=((65280&e)>>>8)/255,t.a=(255&e)/255},a.rgb888ToColor=function(t,e){t.r=((16711680&e)>>>16)/255,t.g=((65280&e)>>>8)/255,t.b=(255&e)/255},a.WHITE=new a(1,1,1,1),a.RED=new a(1,0,0,1),a.GREEN=new a(0,1,0,1),a.BLUE=new a(0,0,1,1),a.MAGENTA=new a(1,0,1,1),a);function a(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),this.r=t,this.g=e,this.b=n,this.a=r}t.Color=r;var i=(s.clamp=function(t,e,n){return t<e?e:n<t?n:t},s.cosDeg=function(t){return Math.cos(t*s.degRad)},s.sinDeg=function(t){return Math.sin(t*s.degRad)},s.signum=function(t){return 0<t?1:t<0?-1:0},s.toInt=function(t){return 0<t?Math.floor(t):Math.ceil(t)},s.cbrt=function(t){var e=Math.pow(Math.abs(t),1/3);return t<0?-e:e},s.randomTriangular=function(t,e){return s.randomTriangularWith(t,e,.5*(t+e))},s.randomTriangularWith=function(t,e,n){var r=Math.random(),a=e-t;return r<=(n-t)/a?t+Math.sqrt(r*a*(n-t)):e-Math.sqrt((1-r)*a*(e-n))},s.PI2=2*(s.PI=3.1415927),s.radDeg=s.radiansToDegrees=180/s.PI,s.degRad=s.degreesToRadians=s.PI/180,s);function s(){}t.MathUtils=i;var o=(h.prototype.apply=function(t,e,n){return t+(e-t)*this.applyInternal(n)},h);function h(){}t.Interpolation=o;var l,u=(__extends(c,l=o),c.prototype.applyInternal=function(t){return t<=.5?Math.pow(2*t,this.power)/2:Math.pow(2*(t-1),this.power)/(this.power%2==0?-2:2)+1},c);function c(t){var e=l.call(this)||this;return e.power=2,e.power=t,e}t.Pow=u;var d,p=(__extends(f,d=u),f.prototype.applyInternal=function(t){return Math.pow(t-1,this.power)*(this.power%2==0?-1:1)+1},f);function f(t){return d.call(this,t)||this}t.PowOut=p;var m=(g.arrayCopy=function(t,e,n,r,a){for(var i=e,s=r;i<e+a;i++,s++)n[s]=t[i]},g.setArraySize=function(t,e,n){void 0===n&&(n=0);var r=t.length;if(r==e)return t;if(r<(t.length=e))for(var a=r;a<e;a++)t[a]=n;return t},g.ensureArrayCapacity=function(t,e,n){return void 0===n&&(n=0),t.length>=e?t:g.setArraySize(t,e,n)},g.newArray=function(t,e){for(var n=new Array(t),r=0;r<t;r++)n[r]=e;return n},g.newFloatArray=function(t){if(g.SUPPORTS_TYPED_ARRAYS)return new Float32Array(t);for(var e=new Array(t),n=0;n<e.length;n++)e[n]=0;return e},g.newShortArray=function(t){if(g.SUPPORTS_TYPED_ARRAYS)return new Int16Array(t);for(var e=new Array(t),n=0;n<e.length;n++)e[n]=0;return e},g.toFloatArray=function(t){return g.SUPPORTS_TYPED_ARRAYS?new Float32Array(t):t},g.toSinglePrecision=function(t){return g.SUPPORTS_TYPED_ARRAYS?Math.fround(t):t},g.webkit602BugfixHelper=function(t,e){},g.contains=function(t,e,n){void 0===n&&(n=!0);for(var r=0;r<t.length;r++)if(t[r]==e)return!0;return!1},g.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array,g);function g(){}t.Utils=m;var v=(y.logBones=function(t){for(var e=0;e<t.bones.length;e++){var n=t.bones[e];console.log(n.data.name+", "+n.a+", "+n.b+", "+n.c+", "+n.d+", "+n.worldX+", "+n.worldY)}},y);function y(){}t.DebugUtils=v;var x=(w.prototype.obtain=function(){return 0<this.items.length?this.items.pop():this.instantiator()},w.prototype.free=function(t){t.reset&&t.reset(),this.items.push(t)},w.prototype.freeAll=function(t){for(var e=0;e<t.length;e++)t[e].reset&&t[e].reset(),this.items[e]=t[e]},w.prototype.clear=function(){this.items.length=0},w);function w(t){this.items=new Array,this.instantiator=t}t.Pool=x;var M=(E.prototype.set=function(t,e){return this.x=t,this.y=e,this},E.prototype.length=function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},E.prototype.normalize=function(){var t=this.length();return 0!=t&&(this.x/=t,this.y/=t),this},E);function E(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}t.Vector2=M;var T=(A.prototype.update=function(){var t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,1<this.frameTime&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)},A);function A(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}t.TimeKeeper=T;var b=(I.prototype.hasEnoughData=function(){return this.addedValues>=this.values.length},I.prototype.addValue=function(t){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=t,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0},I.prototype.getMean=function(){if(this.hasEnoughData()){if(this.dirty){for(var t=0,e=0;e<this.values.length;e++)t+=this.values[e];this.mean=t/this.values.length,this.dirty=!1}return this.mean}return 0},I);function I(t){void 0===t&&(t=32),this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(t)}t.WindowedMean=b}(spine=spine||{}),function(){var e;Math.fround||(Math.fround=(e=new Float32Array(1),function(t){return e[0]=t,e[0]}))}(),function(e){function t(t){if(null==t)throw new Error("name cannot be null.");this.name=t}e.Attachment=t;var n,r=(__extends(a,n=t),a.prototype.computeWorldVertices=function(t,e,n,r,a,i){n=a+(n>>1)*i;var s=t.bone.skeleton,o=t.deform,h=this.vertices,l=this.bones;if(null!=l){for(var u=0,c=0,d=0;d<e;d+=2)u+=(g=l[u])+1,c+=g;var p=s.bones;if(0==o.length)for(C=a,A=3*c;C<n;C+=i){var f=0,m=0,g=l[u++];for(g+=u;u<g;u++,A+=3){w=p[l[u]],R=h[A],P=h[A+1];var v=h[A+2];f+=(R*w.a+P*w.b+w.worldX)*v,m+=(R*w.c+P*w.d+w.worldY)*v}r[C]=f,r[C+1]=m}else for(var y=o,x=(C=a,A=3*c,c<<1);C<n;C+=i){for(m=f=0,g=l[u++],g+=u;u<g;u++,A+=3,x+=2)w=p[l[u]],R=h[A]+y[x],P=h[A+1]+y[x+1],v=h[A+2],f+=(R*w.a+P*w.b+w.worldX)*v,m+=(R*w.c+P*w.d+w.worldY)*v;r[C]=f,r[C+1]=m}}else{0<o.length&&(h=o);for(var w,M=(w=t.bone).worldX,E=w.worldY,T=w.a,A=w.b,b=w.c,I=w.d,S=e,C=a;C<n;S+=2,C+=i){var R=h[S],P=h[S+1];r[C]=R*T+P*A+M,r[C+1]=R*b+P*I+E}}},a.prototype.copyTo=function(t){null!=this.bones?(t.bones=new Array(this.bones.length),e.Utils.arrayCopy(this.bones,0,t.bones,0,this.bones.length)):t.bones=null,null!=this.vertices?(t.vertices=e.Utils.newFloatArray(this.vertices.length),e.Utils.arrayCopy(this.vertices,0,t.vertices,0,this.vertices.length)):t.vertices=null,t.worldVerticesLength=this.worldVerticesLength,t.deformAttachment=this.deformAttachment},a.nextID=0,a);function a(t){var e=n.call(this,t)||this;return e.id=(65535&a.nextID++)<<11,e.worldVerticesLength=0,e.deformAttachment=e}e.VertexAttachment=r}(spine=spine||{}),function(t){var e;(e=t.AttachmentType||(t.AttachmentType={}))[e.Region=0]="Region",e[e.BoundingBox=1]="BoundingBox",e[e.Mesh=2]="Mesh",e[e.LinkedMesh=3]="LinkedMesh",e[e.Path=4]="Path",e[e.Point=5]="Point",e[e.Clipping=6]="Clipping"}(spine=spine||{}),function(n){var r,t=(r=n.VertexAttachment,__extends(e,r),e.prototype.copy=function(){var t=new e(name);return this.copyTo(t),t.color.setFromColor(this.color),t},e);function e(t){var e=r.call(this,t)||this;return e.color=new n.Color(1,1,1,1),e}n.BoundingBoxAttachment=t}(spine=spine||{}),function(n){var r,t=(r=n.VertexAttachment,__extends(e,r),e.prototype.copy=function(){var t=new e(name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t},e);function e(t){var e=r.call(this,t)||this;return e.color=new n.Color(.2275,.2275,.8078,1),e}n.ClippingAttachment=t}(spine=spine||{}),function(c){var n,t=(n=c.VertexAttachment,__extends(e,n),e.prototype.updateUVs=function(){var t=this.regionUVs;null!=this.uvs&&this.uvs.length==t.length||(this.uvs=c.Utils.newFloatArray(t.length));var e=this.uvs,n=this.uvs.length,r=this.region.u,a=this.region.v,i=0,s=0;if(this.region instanceof c.TextureAtlasRegion){var o=this.region,h=o.texture.getImage().width,l=o.texture.getImage().height;switch(o.degrees){case 90:r-=(o.originalHeight-o.offsetY-o.height)/h,a-=(o.originalWidth-o.offsetX-o.width)/l,i=o.originalHeight/h,s=o.originalWidth/l;for(var u=0;u<n;u+=2)e[u]=r+t[u+1]*i,e[u+1]=a+(1-t[u])*s;return;case 180:for(r-=(o.originalWidth-o.offsetX-o.width)/h,a-=o.offsetY/l,i=o.originalWidth/h,s=o.originalHeight/l,u=0;u<n;u+=2)e[u]=r+(1-t[u])*i,e[u+1]=a+(1-t[u+1])*s;return;case 270:for(r-=o.offsetY/h,a-=o.offsetX/l,i=o.originalHeight/h,s=o.originalWidth/l,u=0;u<n;u+=2)e[u]=r+(1-t[u+1])*i,e[u+1]=a+t[u]*s;return}r-=o.offsetX/h,a-=(o.originalHeight-o.offsetY-o.height)/l,i=o.originalWidth/h,s=o.originalHeight/l}else null==this.region?(r=a=0,i=s=1):(i=this.region.u2-r,s=this.region.v2-a);for(u=0;u<n;u+=2)e[u]=r+t[u]*i,e[u+1]=a+t[u+1]*s},e.prototype.getParentMesh=function(){return this.parentMesh},e.prototype.setParentMesh=function(t){null!=(this.parentMesh=t)&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)},e.prototype.copy=function(){if(null!=this.parentMesh)return this.newLinkedMesh();var t=new e(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),this.copyTo(t),t.regionUVs=new Array(this.regionUVs.length),c.Utils.arrayCopy(this.regionUVs,0,t.regionUVs,0,this.regionUVs.length),t.uvs=new Array(this.uvs.length),c.Utils.arrayCopy(this.uvs,0,t.uvs,0,this.uvs.length),t.triangles=new Array(this.triangles.length),c.Utils.arrayCopy(this.triangles,0,t.triangles,0,this.triangles.length),t.hullLength=this.hullLength,null!=this.edges&&(t.edges=new Array(this.edges.length),c.Utils.arrayCopy(this.edges,0,t.edges,0,this.edges.length)),t.width=this.width,t.height=this.height,t},e.prototype.newLinkedMesh=function(){var t=new e(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),t.deformAttachment=this.deformAttachment,t.setParentMesh(null!=this.parentMesh?this.parentMesh:this),t.updateUVs(),t},e);function e(t){var e=n.call(this,t)||this;return e.color=new c.Color(1,1,1,1),e.tempColor=new c.Color(0,0,0,0),e}c.MeshAttachment=t}(spine=spine||{}),function(n){var r,t=(r=n.VertexAttachment,__extends(e,r),e.prototype.copy=function(){var t=new e(name);return this.copyTo(t),t.lengths=new Array(this.lengths.length),n.Utils.arrayCopy(this.lengths,0,t.lengths,0,this.lengths.length),t.closed=closed,t.constantSpeed=this.constantSpeed,t.color.setFromColor(this.color),t},e);function e(t){var e=r.call(this,t)||this;return e.closed=!1,e.constantSpeed=!1,e.color=new n.Color(1,1,1,1),e}n.PathAttachment=t}(spine=spine||{}),function(i){var n,t=(n=i.VertexAttachment,__extends(e,n),e.prototype.computeWorldPosition=function(t,e){return e.x=this.x*t.a+this.y*t.b+t.worldX,e.y=this.x*t.c+this.y*t.d+t.worldY,e},e.prototype.computeWorldRotation=function(t){var e=i.MathUtils.cosDeg(this.rotation),n=i.MathUtils.sinDeg(this.rotation),r=e*t.a+n*t.b,a=e*t.c+n*t.d;return Math.atan2(a,r)*i.MathUtils.radDeg},e.prototype.copy=function(){var t=new e(name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t},e);function e(t){var e=n.call(this,t)||this;return e.color=new i.Color(.38,.94,0,1),e}i.PointAttachment=t}(spine=spine||{}),function(n){var r,t=(r=n.Attachment,__extends(y,r),y.prototype.updateOffset=function(){var t=this.width/this.region.originalWidth*this.scaleX,e=this.height/this.region.originalHeight*this.scaleY,n=-this.width/2*this.scaleX+this.region.offsetX*t,r=-this.height/2*this.scaleY+this.region.offsetY*e,a=n+this.region.width*t,i=r+this.region.height*e,s=this.rotation*Math.PI/180,o=Math.cos(s),h=Math.sin(s),l=n*o+this.x,u=n*h,c=r*o+this.y,d=r*h,p=a*o+this.x,f=a*h,m=i*o+this.y,g=i*h,v=this.offset;v[y.OX1]=l-d,v[y.OY1]=c+u,v[y.OX2]=l-g,v[y.OY2]=m+u,v[y.OX3]=p-g,v[y.OY3]=m+f,v[y.OX4]=p-d,v[y.OY4]=c+f},y.prototype.setRegion=function(t){this.region=t;var e=this.uvs;t.rotate?(e[2]=t.u,e[3]=t.v2,e[4]=t.u,e[5]=t.v,e[6]=t.u2,e[7]=t.v,e[0]=t.u2,e[1]=t.v2):(e[0]=t.u,e[1]=t.v2,e[2]=t.u,e[3]=t.v,e[4]=t.u2,e[5]=t.v,e[6]=t.u2,e[7]=t.v2)},y.prototype.computeWorldVertices=function(t,e,n,r){var a=this.offset,i=t.worldX,s=t.worldY,o=t.a,h=t.b,l=t.c,u=t.d,c=0,d=0;c=a[y.OX1],d=a[y.OY1],e[n]=c*o+d*h+i,e[n+1]=c*l+d*u+s,n+=r,c=a[y.OX2],d=a[y.OY2],e[n]=c*o+d*h+i,e[n+1]=c*l+d*u+s,n+=r,c=a[y.OX3],d=a[y.OY3],e[n]=c*o+d*h+i,e[n+1]=c*l+d*u+s,n+=r,c=a[y.OX4],d=a[y.OY4],e[n]=c*o+d*h+i,e[n+1]=c*l+d*u+s},y.prototype.copy=function(){var t=new y(name);return t.region=this.region,t.rendererObject=this.rendererObject,t.path=this.path,t.x=this.x,t.y=this.y,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.rotation=this.rotation,t.width=this.width,t.height=this.height,n.Utils.arrayCopy(this.uvs,0,t.uvs,0,8),n.Utils.arrayCopy(this.offset,0,t.offset,0,8),t.color.setFromColor(this.color),t},y.OX1=0,y.OY1=1,y.OX2=2,y.OY2=3,y.OX3=4,y.OY3=5,y.OX4=6,y.OY4=7,y.X1=0,y.Y1=1,y.C1R=2,y.C1G=3,y.C1B=4,y.C1A=5,y.U1=6,y.V1=7,y.X2=8,y.Y2=9,y.C2R=10,y.C2G=11,y.C2B=12,y.C2A=13,y.U2=14,y.V2=15,y.X3=16,y.Y3=17,y.C3R=18,y.C3G=19,y.C3B=20,y.C3A=21,y.U3=22,y.V3=23,y.X4=24,y.Y4=25,y.C4R=26,y.C4G=27,y.C4B=28,y.C4A=29,y.U4=30,y.V4=31,y);function y(t){var e=r.call(this,t)||this;return e.x=0,e.y=0,e.scaleX=1,e.scaleY=1,e.rotation=0,e.width=0,e.height=0,e.color=new n.Color(1,1,1,1),e.offset=n.Utils.newFloatArray(8),e.uvs=n.Utils.newFloatArray(8),e.tempColor=new n.Color(1,1,1,1),e}n.RegionAttachment=t}(spine=spine||{}),function(a){var t=(e.prototype.begin=function(t){},e.prototype.transform=function(t,e,n,r){t.x+=a.MathUtils.randomTriangular(-this.jitterX,this.jitterY),t.y+=a.MathUtils.randomTriangular(-this.jitterX,this.jitterY)},e.prototype.end=function(){},e);function e(t,e){this.jitterX=0,this.jitterY=0,this.jitterX=t,this.jitterY=e}a.JitterEffect=t}(spine=spine||{}),function(c){var t=(d.prototype.begin=function(t){this.worldX=t.x+this.centerX,this.worldY=t.y+this.centerY},d.prototype.transform=function(t,e,n,r){var a=this.angle*c.MathUtils.degreesToRadians,i=t.x-this.worldX,s=t.y-this.worldY,o=Math.sqrt(i*i+s*s);if(o<this.radius){var h=d.interpolation.apply(0,a,(this.radius-o)/this.radius),l=Math.cos(h),u=Math.sin(h);t.x=l*i-u*s+this.worldX,t.y=u*i+l*s+this.worldY}},d.prototype.end=function(){},d.interpolation=new c.PowOut(2),d);function d(t){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=t}c.SwirlEffect=t}(spine=spine||{}),pc.extend(pc,function(){function o(t){this._image={width:t.width,height:t.height},this.pcTexture=t}var g=0,v=1,y=2,n={9728:pc.FILTER_NEAREST,9729:pc.FILTER_LINEAR,9984:pc.FILTER_NEAREST_MIPMAP_NEAREST,9985:pc.FILTER_LINEAR_MIPMAP_NEAREST,9986:pc.FILTER_NEAREST_MIPMAP_LINEAR,9987:pc.FILTER_LINEAR_MIPMAP_LINEAR},r={33648:pc.ADDRESS_MIRRORED_REPEAT,33071:pc.ADDRESS_CLAMP_TO_EDGE,10487:pc.ADDRESS_REPEAT};o.prototype={setFilters:function(t,e){this.pcTexture.minFilter=n[t],this.pcTexture.magFilter=n[e]},setWraps:function(t,e){this.pcTexture.addressU=r[t],this.pcTexture.addressV=r[e]},getImage:function(){return this._image}};function t(t,e,n,r){this._app=t,this._position=new pc.Vec3;var a=new spine.TextureAtlas(e,function(t){return new o(r[t])}),i=new spine.SkeletonJson(new spine.AtlasAttachmentLoader(a));i.scale*=.01;var s=i.readSkeletonData(n);this.skeleton=new spine.Skeleton(s),this.skeleton.updateWorldTransform(),this.stateData=new spine.AnimationStateData(this.skeleton.data),this.states=[new spine.AnimationState(this.stateData)],this._node=new pc.GraphNode,this._meshInstances=[],this._materials={},this._offset={},this._tint={},this._priority=0,this._layers=[pc.LAYERID_UI],this.init(),this.autoUpdate=!0,this._model=new pc.Model,this._model.graph=this._node,this._model.meshInstances=this._meshInstances,this._modelChanged=!0,this._reordered=!0,this._hidden=!1}t.prototype.destroy=function(){this._model&&this.removeFromLayers(),this.destroyMeshes(),this._model=null,this._meshInstances=[],this.skeleton=null,this.stateData=null,this.state=null,this._materials={},this._node=null},t.prototype.destroyMeshes=function(){for(var t=0,e=this._meshInstances.length;t<e;t++){var n=this._meshInstances[t].mesh;if(n){n.vertexBuffer&&(n.vertexBuffer.destroy(),n.vertexBuffer=null);for(var r=0;r<n.indexBuffer.length;r++)n.indexBuffer[r]&&n.indexBuffer[r].destroy();n.indexBuffer.length=0}this._meshInstances[t].material=null}},t.prototype.hide=function(){if(!this._hidden){for(var t=0,e=this._meshInstances.length;t<e;t++)this._meshInstances[t].visible=!1;this._hidden=!0}},t.prototype.show=function(){if(this._hidden){for(var t=0,e=this._meshInstances.length;t<e;t++)this._meshInstances[t].visible=!0;this._hidden=!1}},t.prototype.init=function(){for(var t=this.skeleton.drawOrder,e=0,n=t.length;e<n;e++)this.initSlot(t[e]);this.rebuildMeshes()},t.prototype.initSlot=function(t){t.vertices=[],t.positions=[],t.options={},t.colorUniforms={},t.current={mesh:-1,vertices:0,offset:0},t._active={name:"",type:g},this.initAttachment(t)};function h(t,e){return e%2?1-t:t}function l(t,e){return e%3==1?1:0}t.prototype.initAttachment=function(t){var e=t.attachment;if(e){var n=e.name;if(t._active.name=n,e instanceof spine.RegionAttachment)t._active.type=y,t.positions=new Array(12),t.options={normals:[0,1,0,0,1,0,0,1,0,0,1,0],uvs:e.uvs.map(h),colors:Array(16),indices:[0,3,2,2,1,0]};else if(e instanceof spine.MeshAttachment){t._active.type=v;var r=e.worldVerticesLength/2;t.positions=new Array(3*r),t.options={normals:new Array(3*r).map(l),uvs:e.uvs.map(h),colors:Array(4*r),indices:e.triangles}}var a=e.region.texture.pcTexture;if(a)if(a instanceof pc.StandardMaterial)this._materials[a.name]=a,t.material=a.name;else{var i=null;if(a.getSource()instanceof Image?i=a.getSource().getAttribute("src"):a instanceof pc.Texture&&(i=a.name),i){if(void 0===this._materials[i]){var s=new pc.StandardMaterial;s.shadingModel=pc.SPECULAR_BLINN,s.diffuse=new pc.Color(0,0,0),s.emissiveMap=a,s.emissiveMapChannel="rgb",s.emissiveVertexColor=!0,s.emissiveVertexColorChannel="rgb",s.opacityMap=a,s.opacityMapChannel="a",s.opacityVertexColor=!0,s.opacityVertexColorChannel="a",s.depthWrite=!1,s.cull=pc.CULLFACE_NONE,s.blendType=pc.BLEND_PREMULTIPLIED,s.update();var o=["gl_FragColor.rgb *= vVertexColor.a;","gl_FragColor.a = dAlpha;"].join("\n");s.chunks.outputAlphaPremulPS=o,this._materials[i]=s}t.material=i}}this._modelChanged=!0}},t.prototype.rebuildMeshes=function(){this.removeFromLayers(),this._meshes=[],this.destroyMeshes(),this._meshInstances.length=0,this.createMeshes(),this.addToLayers()};function u(t,e){return e.attachment&&(t.curr.mat||(t.curr.mat=e.material),e.material===t.curr.mat?(t.curr.pos+=e.positions.length,t.curr.norm+=e.options.normals.length,t.curr.idx+=e.options.indices.length,t.curr.uv+=e.options.uvs.length,t.curr.col+=e.options.colors.length):(t.batches.push({mat:t.curr.mat,pos:t.curr.pos,norm:t.curr.norm,idx:t.curr.idx,uv:t.curr.uv,col:t.curr.col}),t.curr.mat=e.material,t.curr.pos=e.positions.length,t.curr.norm=e.options.normals.length,t.curr.idx=e.options.indices.length,t.curr.uv=e.options.uvs.length,t.curr.col=e.options.colors.length)),t}function a(t,e,n,r){for(var a=0,i=t.length;a<i;a++)e[n+a]=t[a],r&&(e[n+a]+=r);return t.length}function c(t,e){return e.attachment&&(t.curr.mat||(t.curr.mat=e.material),e.material!==t.curr.mat&&(t.meshes.push(pc.createMesh(t.gd,t.positions[t.batchIdx],t.options[t.batchIdx])),t.batchIdx++,t.curr.mat=e.material,t.curr.pos=0,t.curr.norm=0,t.curr.idx=0,t.curr.uv=0,t.curr.col=0),e.current.offset=t.curr.pos/3,e.current.vertices=e.positions.length/3,e.current.mesh=t.batchIdx,t.curr.idx+=a(e.options.indices,t.options[t.batchIdx].indices,t.curr.idx,e.current.offset),t.curr.pos+=a(e.positions,t.positions[t.batchIdx],t.curr.pos,0),t.curr.norm+=a(e.options.normals,t.options[t.batchIdx].normals,t.curr.norm,0),t.curr.uv+=a(e.options.uvs,t.options[t.batchIdx].uvs,t.curr.uv,0),t.curr.col+=a(e.options.colors,t.options[t.batchIdx].colors,t.curr.col,0)),t}return t.prototype.createMeshes=function(){var t=this.skeleton.drawOrder,e=t.reduce(u,{curr:{pos:0,norm:0,idx:0,uv:0,col:0},batches:[]});0<e.curr.pos&&e.batches.push(e.curr);var n,r=e.batches,a=[],i=[],s=r.length;if(0!=s){for(n=0;n<s;n++)a.push(Array(r[n].pos)),i.push({normals:Array(r[n].norm),uvs:new Float32Array(r[n].uv),indices:Array(r[n].idx),colors:Array(r[n].col)});var o=t.reduce(c,{meshes:this._meshes,gd:this._app.graphicsDevice,batchIdx:0,curr:{pos:0,norm:0,idx:0,uv:0,col:0},positions:a,options:i});for(this._meshes.push(pc.createMesh(o.gd,a[o.batchIdx],i[o.batchIdx])),n=0;n<s;n++){this._meshes[n].name=r[n].mat;var h=new pc.MeshInstance(this._node,this._meshes[n],this._materials[r[n].mat]);h.drawOrder=n+1e3*this.priority,h.visible=!this._hidden,this._meshInstances.push(h)}}},t.prototype.updateMeshes=function(){var t;for(t=0;t<this._meshes.length;t++)this._meshes[t].startUpdate();for(var e=this.skeleton.drawOrder,n=0,r=e.length;n<r;n++){var a=e[n];a.attachment&&0<=a.current.mesh&&this._meshes[a.current.mesh].updateVertices(a.positions,null,null,null,a.options.colors)}for(t=0;t<this._meshes.length;t++)this._meshes[t].finishUpdate()},t.prototype.updateSlot=function(t,e){var n=t.attachment,r=n.name,a=n instanceof spine.RegionAttachment?y:n instanceof spine.MeshAttachment?v:g;t._active.name===r&&t._active.type==a||this.initAttachment(t);var i,s,o=0,h=0;a===y?(n.computeWorldVertices(t.bone,t.vertices,0,2),s=8):a===v&&(n.computeWorldVertices(t,0,n.worldVerticesLength,t.vertices,0,2),s=n.worldVerticesLength);var l=this._tint[r],u=Math.round(255*t.color.r*(l?l.r:1)),c=Math.round(255*t.color.g*(l?l.g:1)),d=Math.round(255*t.color.b*(l?l.b:1)),p=Math.round(255*t.color.a*(l?l.a:1));for(i=0;i<s;i+=2,o+=3,h+=4)t.positions[o+0]=t.vertices[i+0],t.positions[o+1]=t.vertices[i+1],t.positions[o+2]=0,t.options.colors[h+0]=u,t.options.colors[h+1]=c,t.options.colors[h+2]=d,t.options.colors[h+3]=p;var f=t.positions.length/3,m=this._offset[e];t.current.offset===m&&t.current.vertices===f&&t.current.mesh===e||(this._reordered=!0),this._offset[e]+=f},t.prototype.update=function(t){var e,n;if(!this._hidden){for(e=0,n=this.states.length;e<n;e++)this.states[e].update(t);for(e=0,n=this.states.length;e<n;e++)this.states[e].apply(this.skeleton);this.autoUpdate&&this.skeleton.updateWorldTransform();var r,a=this.skeleton.drawOrder,i=0,s=(n=a.length)?a[0].material:"";for(e=this._offset[i]=0;e<n;e++){(r=a[e]).attachment?(s!==r.material&&(i++,this._offset[i]=0,s=r.material),this.updateSlot(r,i)):r._active.type!=g&&(r.current={mesh:-1,vertices:0,offset:0},r._active={name:"",type:g},this._modelChanged=!0)}this._modelChanged||this._reordered?(this.rebuildMeshes(),this._modelChanged=!1,this._reordered=!1):this.updateMeshes()}},t.prototype.setPosition=function(t){this._position.copy(t)},t.prototype.setTint=function(t,e){this._tint[t]=e},t.prototype.removeFromLayers=function(){if(this._model)for(var t=0;t<this._layers.length;t++){var e=this._layers[t],n=this._app.scene.layers.getLayerById(e);n&&n.removeMeshInstances(this._model.meshInstances)}},t.prototype.addToLayers=function(){if(this._model)for(var t=0;t<this._layers.length;t++){var e=this._layers[t],n=this._app.scene.layers.getLayerById(e);n&&n.addMeshInstances(this._model.meshInstances)}},Object.defineProperty(t.prototype,"state",{get:function(){return this.states[0]}}),Object.defineProperty(t.prototype,"priority",{get:function(){return this._priority},set:function(t){this._priority=t,this._reordered=!0}}),Object.defineProperty(t.prototype,"layers",{get:function(){return this._layers},set:function(t){this._model&&this.removeFromLayers(),this._layers=t||[],this._model&&this.addToLayers()}}),{Spine:t}}()),pc.extend(pc,function(){function t(t){pc.ComponentSystem.call(this,t),this.id="spine",this.ComponentType=pc.SpineComponent,this.DataType=pc.SpineComponentData,this.schema=["enabled","atlasAsset","textureAssets","skeletonAsset","atlasData","textures","skeletonData","speed","spine"],pc.ComponentSystem.bind("update",this.onUpdate,this)}return(t.prototype=Object.create(pc.ComponentSystem.prototype)).constructor=t,Object.assign(t.prototype,{initializeComponentData:function(t,e,n){n=["enabled","atlasAsset","textureAssets","skeletonAsset","atlasData","textures","skeletonData","spine"],pc.ComponentSystem.prototype.initializeComponentData.call(this.system,t,e,n)},removeComponent:function(t){var e=t.spine.data;e.spine&&e.spine.destroy(),t.spine.removeComponent()},onUpdate:function(t){var e=this.store;for(var n in e)if(e.hasOwnProperty(n)){var r=e[n],a=r.data;a.enabled&&r.entity.enabled&&a.spine&&(a.spine.setPosition(r.entity.getPosition()),a.spine.update(a.speed*t))}}}),{SpineComponentSystem:t}}()),pc.extend(pc,function(){function t(t,e){pc.Component.call(this,t,e),this.on("set_atlasAsset",this.onSetAsset,this),this.on("set_textureAssets",this.onSetAssets,this),this.on("set_skeletonAsset",this.onSetAsset,this),this.on("set_atlasData",this.onSetResource,this),this.on("set_textures",this.onSetResource,this),this.on("set_skeletonData",this.onSetResource,this)}return(t.prototype=Object.create(pc.Component.prototype)).constructor=t,Object.assign(t.prototype,{_createSpine:function(){this.data.spine&&(this.data.spine.destroy(),this.data.spine=null);for(var t={},e=0,n=this.textureAssets.length;e<n;e++){var r=this.system.app.assets.get(this.textureAssets[e]),a=pc.path.getBasename(r.file.url),i=a.indexOf("?");-1!==i&&(a=a.substring(0,i)),t[a]=r.resource}this.data.spine=new pc.Spine(this.system.app,this.atlasData,this.skeletonData,t),this.state=this.data.spine.state,this.states=this.data.spine.states,this.skeleton=this.data.spine.skeleton,this.entity.addChild(this.data.spine._node)},_onAssetReady:function(t){"texture"===t.type&&this.textures.push(t.resource),"json"===t.type&&(this.skeletonData=t.resource),"text"===t.type&&(this.atlasData=t.resource)},_onAssetAdd:function(t){t.off("change",this.onAssetChanged,this),t.on("change",this.onAssetChanged,this),t.off("remove",this.onAssetRemoved,this),t.on("remove",this.onAssetRemoved,this),t.ready(this._onAssetReady,this),this.system.app.assets.load(t)},onSetResource:function(){this.data.atlasData&&this.data.textures.length&&this.data.skeletonData&&this._createSpine()},onSetAsset:function(t,e,n){var r=this.system.app.assets,a=null;if(e&&(a=r.get(e))&&(a.off("change",this.onAssetChanged),a.off("remove",this.onAssetRemoved)),n){var i=n;n instanceof pc.Asset&&(i=n.id,this.data[t]=i),(a=r.get(i))?this._onAssetAdd(a):r.on("add:"+i)}},onSetAssets:function(t,e,n){var r,a,i=this.system.app.assets,s=null;if(e.length)for(r=0,a=e.length;r<a;r++)(s=i.get(e[r]))&&(s.off("change",this.onAssetChanged),s.off("remove",this.onAssetRemoved));if(n&&n.length){var o=n.map(function(t){return t instanceof pc.Asset?t.id:t});for(r=0,a=n.length;r<a;r++)(s=i.get(o[r]))?this._onAssetAdd(s):i.on("add:"+o[r])}},onAssetChanged:function(t,e,n,r){},onAssetRemoved:function(t){},onEnable:function(){pc.Component.prototype.onEnable.call(this);var t=this.data.spine;t&&t.addToLayers()},onDisable:function(){pc.Component.prototype.onDisable.call(this);var t=this.data.spine;t&&t.removeFromLayers()},hide:function(){this.data.spine&&this.data.spine.hide()},show:function(){this.data.spine&&this.data.spine.show()},removeComponent:function(){var t;if(this.atlasAsset&&(t=this.system.app.assets.get(this.atlasAsset))&&(t.off("change",this.onAssetChanged),t.off("remove",this.onAssetRemoved)),this.skeletonAsset&&(t=this.system.app.assets.get(this.skeletonAsset))&&(t.off("change",this.onAssetChanged),t.off("remove",this.onAssetRemoved)),this.textureAssets&&this.textureAssets.length)for(var e=0;e<this.textureAssets.length;e++)(t=this.system.app.assets.get(this.textureAssets[e]))&&(t.off("change",this.onAssetChanged),t.off("remove",this.onAssetRemoved))}}),{SpineComponent:t}}()),pc.extend(pc,{SpineComponentData:function(){this.enabled=!0,this.atlasAsset=null,this.textureAssets=[],this.skeletonAsset=null,this.speed=1,this.spine=null,this.atlasData=null,this.textures=[],this.skeletonData=null}}),function(){if(pc.Mesh.prototype.startUpdate=function(){this._iterator=new pc.VertexIterator(this.vertexBuffer),this._counter=0},pc.Mesh.prototype.finishUpdate=function(){this._iterator.end(),this._iterator=null},pc.Mesh.prototype.updateVertices=function(t,e,n,r,a){var i=t.length/3;this._counter+=i;for(var s=0;s<i;s++)this._iterator.element[pc.SEMANTIC_POSITION].set(t[3*s],t[3*s+1],t[3*s+2]),e&&this._iterator.element[pc.SEMANTIC_NORMAL].set(e[3*s],e[3*s+1],e[3*s+2]),n&&this._iterator.element[pc.SEMANTIC_TANGENT].set(n[4*s],n[4*s+1],n[4*s+2],n[4*s+3]),r&&this._iterator.element[pc.SEMANTIC_TEXCOORD0].set(r[2*s],r[2*s+1]),a&&this._iterator.element[pc.SEMANTIC_COLOR].set(a[4*s],a[4*s+1],a[4*s+2],a[4*s+3]),this._iterator.next()},pc.Application.registerPlugin){pc.Application.registerPlugin("spine",function(t){new pc.SpineComponentSystem(t)})}else{var t=pc.Application.getApplication(),e=new pc.SpineComponentSystem(t);t.systems.add(e)}}();