var spine=function(t){"use strict";function e(t){var e=Object.create(null);return t&&Object.keys(t).forEach((function(n){if("default"!==n){var a=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,a.get?a:{enumerable:!0,get:function(){return t[n]}})}})),e.default=t,Object.freeze(e)}var n,a,r=e(t);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,w(a.key),a)}}function h(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function l(t,e,n){return(e=w(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}function u(t){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},u(t)}function f(t,e){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},f(t,e)}function d(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function v(){return v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var a=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(a){var r=Object.getOwnPropertyDescriptor(a,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},v.apply(this,arguments)}function m(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var a,r,i,s,o=[],h=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e);else for(;!(h=(a=i.call(n)).done)&&(o.push(a.value),o.length!==e);h=!0);}catch(t){l=!0,r=t}finally{try{if(!h&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw r}}return o}}(t,e)||g(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t){return function(t){if(Array.isArray(t))return y(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||g(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){if(t){if("string"==typeof t)return y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(t,e):void 0}}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function k(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=g(t))||e){n&&(t=n);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,i=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw i}}}}function w(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,e||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}function b(t,e,n){return e=u(e),d(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],u(t).constructor):e.apply(t,n))}var x=h((function t(){s(this,t),l(this,"array",new Array)}),[{key:"add",value:function(t){var e=this.contains(t);return this.array[0|t]=0|t,!e}},{key:"contains",value:function(t){return null!=this.array[0|t]}},{key:"remove",value:function(t){this.array[0|t]=void 0}},{key:"clear",value:function(){this.array.length=0}}]),I=h((function t(){s(this,t),l(this,"entries",{}),l(this,"size",0)}),[{key:"add",value:function(t){var e=this.entries[t];return this.entries[t]=!0,!e&&(this.size++,!0)}},{key:"addAll",value:function(t){for(var e=this.size,n=0,a=t.length;n<a;n++)this.add(t[n]);return e!=this.size}},{key:"contains",value:function(t){return this.entries[t]}},{key:"clear",value:function(){this.entries={},this.size=0}}]),E=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;s(this,t),l(this,"r",void 0),l(this,"g",void 0),l(this,"b",void 0),l(this,"a",void 0),this.r=e,this.g=n,this.b=a,this.a=r}return h(t,[{key:"set",value:function(t,e,n,a){return this.r=t,this.g=e,this.b=n,this.a=a,this.clamp()}},{key:"setFromColor",value:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this}},{key:"setFromString",value:function(t){return t="#"==t.charAt(0)?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=8!=t.length?1:parseInt(t.substr(6,2),16)/255,this}},{key:"add",value:function(t,e,n,a){return this.r+=t,this.g+=e,this.b+=n,this.a+=a,this.clamp()}},{key:"clamp",value:function(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this}},{key:"toRgb888",value:function(){var t=function(t){return("0"+(255*t).toString(16)).slice(-2)};return Number("0x"+t(this.r)+t(this.g)+t(this.b))}}],[{key:"rgba8888ToColor",value:function(t,e){t.r=((4278190080&e)>>>24)/255,t.g=((16711680&e)>>>16)/255,t.b=((65280&e)>>>8)/255,t.a=(255&e)/255}},{key:"rgb888ToColor",value:function(t,e){t.r=((16711680&e)>>>16)/255,t.g=((65280&e)>>>8)/255,t.b=(255&e)/255}},{key:"fromString",value:function(e){return(new t).setFromString(e)}}])}();l(E,"WHITE",new(n=E)(1,1,1,1)),l(E,"RED",new n(1,0,0,1)),l(E,"GREEN",new n(0,1,0,1)),l(E,"BLUE",new n(0,0,1,1)),l(E,"MAGENTA",new n(1,0,1,1));var A=function(){function t(){s(this,t)}return h(t,null,[{key:"clamp",value:function(t,e,n){return t<e?e:t>n?n:t}},{key:"cosDeg",value:function(e){return Math.cos(e*t.degRad)}},{key:"sinDeg",value:function(e){return Math.sin(e*t.degRad)}},{key:"atan2Deg",value:function(e,n){return Math.atan2(e,n)*t.degRad}},{key:"signum",value:function(t){return t>0?1:t<0?-1:0}},{key:"toInt",value:function(t){return t>0?Math.floor(t):Math.ceil(t)}},{key:"cbrt",value:function(t){var e=Math.pow(Math.abs(t),1/3);return t<0?-e:e}},{key:"randomTriangular",value:function(e,n){return t.randomTriangularWith(e,n,.5*(e+n))}},{key:"randomTriangularWith",value:function(t,e,n){var a=Math.random(),r=e-t;return a<=(n-t)/r?t+Math.sqrt(a*r*(n-t)):e-Math.sqrt((1-a)*r*(e-n))}},{key:"isPowerOfTwo",value:function(t){return t&&0==(t&t-1)}}])}();a=A,l(A,"PI",3.1415927),l(A,"PI2",2*a.PI),l(A,"invPI2",1/a.PI2),l(A,"radiansToDegrees",180/a.PI),l(A,"radDeg",a.radiansToDegrees),l(A,"degreesToRadians",a.PI/180),l(A,"degRad",a.degreesToRadians);var S=h((function t(){s(this,t)}),[{key:"apply",value:function(t,e,n){return t+(e-t)*this.applyInternal(n)}}]),R=function(t){function e(t){var n;return s(this,e),l(n=b(this,e),"power",2),n.power=t,n}return c(e,t),h(e,[{key:"applyInternal",value:function(t){return t<=.5?Math.pow(2*t,this.power)/2:Math.pow(2*(t-1),this.power)/(this.power%2==0?-2:2)+1}}])}(S),T=function(t){function e(t){return s(this,e),b(this,e,[t])}return c(e,t),h(e,[{key:"applyInternal",value:function(t){return Math.pow(t-1,this.power)*(this.power%2==0?-1:1)+1}}])}(R),C=function(){function t(){s(this,t)}return h(t,null,[{key:"arrayCopy",value:function(t,e,n,a,r){for(var i=e,s=a;i<e+r;i++,s++)n[s]=t[i]}},{key:"arrayFill",value:function(t,e,n,a){for(var r=e;r<n;r++)t[r]=a}},{key:"setArraySize",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=t.length;if(a==e)return t;if(t.length=e,a<e)for(var r=a;r<e;r++)t[r]=n;return t}},{key:"ensureArrayCapacity",value:function(e,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e.length>=n?e:t.setArraySize(e,n,a)}},{key:"newArray",value:function(t,e){for(var n=new Array(t),a=0;a<t;a++)n[a]=e;return n}},{key:"newFloatArray",value:function(e){if(t.SUPPORTS_TYPED_ARRAYS)return new Float32Array(e);for(var n=new Array(e),a=0;a<n.length;a++)n[a]=0;return n}},{key:"newShortArray",value:function(e){if(t.SUPPORTS_TYPED_ARRAYS)return new Int16Array(e);for(var n=new Array(e),a=0;a<n.length;a++)n[a]=0;return n}},{key:"toFloatArray",value:function(e){return t.SUPPORTS_TYPED_ARRAYS?new Float32Array(e):e}},{key:"toSinglePrecision",value:function(e){return t.SUPPORTS_TYPED_ARRAYS?Math.fround(e):e}},{key:"webkit602BugfixHelper",value:function(t,e){}},{key:"contains",value:function(t,e){for(var n=0;n<t.length;n++)if(t[n]==e)return!0;return!1}},{key:"enumValue",value:function(t,e){return t[e[0].toUpperCase()+e.slice(1)]}}])}();l(C,"SUPPORTS_TYPED_ARRAYS","undefined"!=typeof Float32Array);var M=h((function t(){s(this,t)}),null,[{key:"logBones",value:function(t){for(var e=0;e<t.bones.length;e++){var n=t.bones[e];console.log(n.data.name+", "+n.a+", "+n.b+", "+n.c+", "+n.d+", "+n.worldX+", "+n.worldY)}}}]),F=h((function t(e){s(this,t),l(this,"items",new Array),l(this,"instantiator",void 0),this.instantiator=e}),[{key:"obtain",value:function(){return this.items.length>0?this.items.pop():this.instantiator()}},{key:"free",value:function(t){t.reset&&t.reset(),this.items.push(t)}},{key:"freeAll",value:function(t){for(var e=0;e<t.length;e++)this.free(t[e])}},{key:"clear",value:function(){this.items.length=0}}]),P=h((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;s(this,t),l(this,"x",void 0),l(this,"y",void 0),this.x=e,this.y=n}),[{key:"set",value:function(t,e){return this.x=t,this.y=e,this}},{key:"length",value:function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)}},{key:"normalize",value:function(){var t=this.length();return 0!=t&&(this.x/=t,this.y/=t),this}}]),Y=h((function t(){s(this,t),l(this,"maxDelta",.064),l(this,"framesPerSecond",0),l(this,"delta",0),l(this,"totalTime",0),l(this,"lastTime",Date.now()/1e3),l(this,"frameCount",0),l(this,"frameTime",0)}),[{key:"update",value:function(){var t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)}}]),X=h((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;s(this,t),l(this,"values",void 0),l(this,"addedValues",0),l(this,"lastValue",0),l(this,"mean",0),l(this,"dirty",!0),this.values=new Array(e)}),[{key:"hasEnoughData",value:function(){return this.addedValues>=this.values.length}},{key:"addValue",value:function(t){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=t,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0}},{key:"getMean",value:function(){if(this.hasEnoughData()){if(this.dirty){for(var t=0,e=0;e<this.values.length;e++)t+=this.values[e];this.mean=t/this.values.length,this.dirty=!1}return this.mean}return 0}}]);var O=h((function t(e){if(s(this,t),l(this,"name",void 0),!e)throw new Error("name cannot be null.");this.name=e})),N=function(t){function e(t){var n,a,r,i;return s(this,e),a=this,i=[t],r=u(r=e),l(n=d(a,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(r,i||[],u(a).constructor):r.apply(a,i)),"id",e.nextID++),l(n,"bones",null),l(n,"vertices",[]),l(n,"worldVerticesLength",0),l(n,"timelineAttachment",n),n}return c(e,t),h(e,[{key:"computeWorldVertices",value:function(t,e,n,a,r,i){n=r+(n>>1)*i;var s=t.bone.skeleton,o=t.deform,h=this.vertices,l=this.bones;if(l){for(var c=0,u=0,f=0;f<e;f+=2){var d=l[c];c+=d+1,u+=d}var v=s.bones;if(0==o.length)for(var m=r,p=3*u;m<n;m+=i){var g=0,y=0,k=l[c++];for(k+=c;c<k;c++,p+=3){var w=v[l[c]],b=h[p],x=h[p+1],I=h[p+2];g+=(b*w.a+x*w.b+w.worldX)*I,y+=(b*w.c+x*w.d+w.worldY)*I}a[m]=g,a[m+1]=y}else for(var E=o,A=r,S=3*u,R=u<<1;A<n;A+=i){var T=0,C=0,M=l[c++];for(M+=c;c<M;c++,S+=3,R+=2){var F=v[l[c]],P=h[S]+E[R],Y=h[S+1]+E[R+1],X=h[S+2];T+=(P*F.a+Y*F.b+F.worldX)*X,C+=(P*F.c+Y*F.d+F.worldY)*X}a[A]=T,a[A+1]=C}}else{o.length>0&&(h=o);for(var O=t.bone,N=O.worldX,L=O.worldY,_=O.a,B=O.b,D=O.c,V=O.d,U=e,q=r;q<n;U+=2,q+=i){var W=h[U],G=h[U+1];a[q]=W*_+G*B+N,a[q+1]=W*D+G*V+L}}}},{key:"copyTo",value:function(t){this.bones?(t.bones=new Array(this.bones.length),C.arrayCopy(this.bones,0,t.bones,0,this.bones.length)):t.bones=null,this.vertices&&(t.vertices=C.newFloatArray(this.vertices.length),C.arrayCopy(this.vertices,0,t.vertices,0,this.vertices.length)),t.worldVerticesLength=this.worldVerticesLength,t.timelineAttachment=this.timelineAttachment}}])}(O);l(N,"nextID",0);var L,_=function(){function t(e){s(this,t),l(this,"id",t.nextID()),l(this,"regions",void 0),l(this,"start",0),l(this,"digits",0),l(this,"setupIndex",0),this.regions=new Array(e)}return h(t,[{key:"copy",value:function(){var e=new t(this.regions.length);return C.arrayCopy(this.regions,0,e.regions,0,this.regions.length),e.start=this.start,e.digits=this.digits,e.setupIndex=this.setupIndex,e}},{key:"apply",value:function(t,e){var n=t.sequenceIndex;-1==n&&(n=this.setupIndex),n>=this.regions.length&&(n=this.regions.length-1);var a=this.regions[n];e.region!=a&&(e.region=a,e.updateRegion())}},{key:"getPath",value:function(t,e){for(var n=t,a=(this.start+e).toString(),r=this.digits-a.length;r>0;r--)n+="0";return n+=a}}],[{key:"nextID",value:function(){return t._nextID++}}])}();l(_,"_nextID",0),function(t){t[t.hold=0]="hold",t[t.once=1]="once",t[t.loop=2]="loop",t[t.pingpong=3]="pingpong",t[t.onceReverse=4]="onceReverse",t[t.loopReverse=5]="loopReverse",t[t.pingpongReverse=6]="pingpongReverse"}(L||(L={}));var B=[L.hold,L.once,L.loop,L.pingpong,L.onceReverse,L.loopReverse,L.pingpongReverse];function D(t,e,n){return e=u(e),d(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],u(t).constructor):e.apply(t,n))}var V,U,q=h((function t(e,n,a){if(s(this,t),l(this,"name",void 0),l(this,"timelines",[]),l(this,"timelineIds",new I),l(this,"duration",void 0),!e)throw new Error("name cannot be null.");this.name=e,this.setTimelines(n),this.duration=a}),[{key:"setTimelines",value:function(t){if(!t)throw new Error("timelines cannot be null.");this.timelines=t,this.timelineIds.clear();for(var e=0;e<t.length;e++)this.timelineIds.addAll(t[e].getPropertyIds())}},{key:"hasTimeline",value:function(t){for(var e=0;e<t.length;e++)if(this.timelineIds.contains(t[e]))return!0;return!1}},{key:"apply",value:function(t,e,n,a,r,i,s,o){if(!t)throw new Error("skeleton cannot be null.");a&&0!=this.duration&&(n%=this.duration,e>0&&(e%=this.duration));for(var h=this.timelines,l=0,c=h.length;l<c;l++)h[l].apply(t,e,n,r,i,s,o)}}]);!function(t){t[t.setup=0]="setup",t[t.first=1]="first",t[t.replace=2]="replace",t[t.add=3]="add"}(V||(V={})),function(t){t[t.mixIn=0]="mixIn",t[t.mixOut=1]="mixOut"}(U||(U={}));var W={rotate:0,x:1,y:2,scaleX:3,scaleY:4,shearX:5,shearY:6,inherit:7,rgb:8,alpha:9,rgb2:10,attachment:11,deform:12,event:13,drawOrder:14,ikConstraint:15,transformConstraint:16,pathConstraintPosition:17,pathConstraintSpacing:18,pathConstraintMix:19,physicsConstraintInertia:20,physicsConstraintStrength:21,physicsConstraintDamping:22,physicsConstraintMass:23,physicsConstraintWind:24,physicsConstraintGravity:25,physicsConstraintMix:26,physicsConstraintReset:27,sequence:28},G=h((function t(e,n){s(this,t),l(this,"propertyIds",void 0),l(this,"frames",void 0),this.propertyIds=n,this.frames=C.newFloatArray(e*this.getFrameEntries())}),[{key:"getPropertyIds",value:function(){return this.propertyIds}},{key:"getFrameEntries",value:function(){return 1}},{key:"getFrameCount",value:function(){return this.frames.length/this.getFrameEntries()}},{key:"getDuration",value:function(){return this.frames[this.frames.length-this.getFrameEntries()]}}],[{key:"search1",value:function(t,e){for(var n=t.length,a=1;a<n;a++)if(t[a]>e)return a-1;return n-1}},{key:"search",value:function(t,e,n){for(var a=t.length,r=n;r<a;r+=n)if(t[r]>e)return r-n;return a-n}}]),z=function(t){function e(t,n,a){var r;return s(this,e),l(r=D(this,e,[t,a]),"curves",void 0),r.curves=C.newFloatArray(t+18*n),r.curves[t-1]=1,r}return c(e,t),h(e,[{key:"setLinear",value:function(t){this.curves[t]=0}},{key:"setStepped",value:function(t){this.curves[t]=1}},{key:"shrink",value:function(t){var e=this.getFrameCount()+18*t;if(this.curves.length>e){var n=C.newFloatArray(e);C.arrayCopy(this.curves,0,n,0,e),this.curves=n}}},{key:"setBezier",value:function(t,e,n,a,r,i,s,o,h,l,c){var u=this.curves,f=this.getFrameCount()+18*t;0==n&&(u[e]=2+f);for(var d=.03*(a-2*i+o),v=.03*(r-2*s+h),m=.006*(3*(i-o)-a+l),p=.006*(3*(s-h)-r+c),g=2*d+m,y=2*v+p,k=.3*(i-a)+d+.16666667*m,w=.3*(s-r)+v+.16666667*p,b=a+k,x=r+w,I=f+18;f<I;f+=2)u[f]=b,u[f+1]=x,k+=g,w+=y,g+=m,y+=p,b+=k,x+=w}},{key:"getBezierValue",value:function(t,e,n,a){var r=this.curves;if(r[a]>t){var i=this.frames[e],s=this.frames[e+n];return s+(t-i)/(r[a]-i)*(r[a+1]-s)}var o=a+18;for(a+=2;a<o;a+=2)if(r[a]>=t){var h=r[a-2],l=r[a-1];return l+(t-h)/(r[a]-h)*(r[a+1]-l)}e+=this.getFrameEntries();var c=r[o-2],u=r[o-1];return u+(t-c)/(this.frames[e]-c)*(this.frames[e+n]-u)}}])}(G),j=function(t){function e(t,n,a){return s(this,e),D(this,e,[t,n,[a]])}return c(e,t),h(e,[{key:"getFrameEntries",value:function(){return 2}},{key:"setFrame",value:function(t,e,n){t<<=1,this.frames[t]=e,this.frames[t+1]=n}},{key:"getCurveValue",value:function(t){for(var e=this.frames,n=e.length-2,a=2;a<=n;a+=2)if(e[a]>t){n=a-2;break}var r=this.curves[n>>1];switch(r){case 0:var i=e[n],s=e[n+1];return s+(t-i)/(e[n+2]-i)*(e[n+2+1]-s);case 1:return e[n+1]}return this.getBezierValue(t,n,1,r-2)}},{key:"getRelativeValue",value:function(t,e,n,a,r){if(t<this.frames[0]){switch(n){case V.setup:return r;case V.first:return a+(r-a)*e}return a}var i=this.getCurveValue(t);switch(n){case V.setup:return r+i*e;case V.first:case V.replace:i+=r-a}return a+i*e}},{key:"getAbsoluteValue",value:function(t,e,n,a,r){if(t<this.frames[0]){switch(n){case V.setup:return r;case V.first:return a+(r-a)*e}return a}var i=this.getCurveValue(t);return n==V.setup?r+(i-r)*e:a+(i-a)*e}},{key:"getAbsoluteValue2",value:function(t,e,n,a,r,i){if(t<this.frames[0]){switch(n){case V.setup:return r;case V.first:return a+(r-a)*e}return a}return n==V.setup?r+(i-r)*e:a+(i-a)*e}},{key:"getScaleValue",value:function(t,e,n,a,r,i){if(t<this.frames[0]){switch(n){case V.setup:return i;case V.first:return r+(i-r)*e}return r}var s=this.getCurveValue(t)*i;if(1==e)return n==V.add?r+s-i:s;if(a==U.mixOut)switch(n){case V.setup:return i+(Math.abs(s)*A.signum(i)-i)*e;case V.first:case V.replace:return r+(Math.abs(s)*A.signum(r)-r)*e}else{var o=0;switch(n){case V.setup:return(o=Math.abs(i)*A.signum(s))+(s-o)*e;case V.first:case V.replace:return(o=Math.abs(r)*A.signum(s))+(s-o)*e}}return r+(s-i)*e}}])}(z),H=function(t){function e(t,n,a,r){return s(this,e),D(this,e,[t,n,[a,r]])}return c(e,t),h(e,[{key:"getFrameEntries",value:function(){return 3}},{key:"setFrame",value:function(t,e,n,a){t*=3,this.frames[t]=e,this.frames[t+1]=n,this.frames[t+2]=a}}])}(z),$=function(t){function e(t,n,a){var r;return s(this,e),l(r=D(this,e,[t,n,W.rotate+"|"+a]),"boneIndex",0),r.boneIndex=a,r}return c(e,t),h(e,[{key:"apply",value:function(t,e,n,a,r,i,s){var o=t.bones[this.boneIndex];o.active&&(o.rotation=this.getRelativeValue(n,r,i,o.rotation,o.data.rotation))}}])}(j),J=function(t){function e(t,n,a){var r;return s(this,e),l(r=D(this,e,[t,n,W.x+"|"+a,W.y+"|"+a]),"boneIndex",0),r.boneIndex=a,r}return c(e,t),h(e,[{key:"apply",value:function(t,e,n,a,r,i,s){var o=t.bones[this.boneIndex];if(o.active){var h=this.frames;if(n<h[0])switch(i){case V.setup:return o.x=o.data.x,void(o.y=o.data.y);case V.first:o.x+=(o.data.x-o.x)*r,o.y+=(o.data.y-o.y)*r}else{var l=0,c=0,u=G.search(h,n,3),f=this.curves[u/3];switch(f){case 0:var d=h[u];l=h[u+1],c=h[u+2];var v=(n-d)/(h[u+3]-d);l+=(h[u+3+1]-l)*v,c+=(h[u+3+2]-c)*v;break;case 1:l=h[u+1],c=h[u+2];break;default:l=this.getBezierValue(n,u,1,f-2),c=this.getBezierValue(n,u,2,f+18-2)}switch(i){case V.setup:o.x=o.data.x+l*r,o.y=o.data.y+c*r;break;case V.first:case V.replace:o.x+=(o.data.x+l-o.x)*r,o.y+=(o.data.y+c-o.y)*r;break;case V.add:o.x+=l*r,o.y+=c*r}}}}}])}(H),K=function(t){function e(t,n,a){var r;return s(this,e),l(r=D(this,e,[t,n,W.x+"|"+a]),"boneIndex",0),r.boneIndex=a,r}return c(e,t),h(e,[{key:"apply",value:function(t,e,n,a,r,i,s){var o=t.bones[this.boneIndex];o.active&&(o.x=this.getRelativeValue(n,r,i,o.x,o.data.x))}}])}(j),Q=function(t){function e(t,n,a){var r;return s(this,e),l(r=D(this,e,[t,n,W.y+"|"+a]),"boneIndex",0),r.boneIndex=a,r}return c(e,t),h(e,[{key:"apply",value:function(t,e,n,a,r,i,s){var o=t.bones[this.boneIndex];o.active&&(o.y=this.getRelativeValue(n,r,i,o.y,o.data.y))}}])}(j),Z=function(t){function e(t,n,a){var r;return s(this,e),l(r=D(this,e,[t,n,W.scaleX+"|"+a,W.scaleY+"|"+a]),"boneIndex",0),r.boneIndex=a,r}return c(e,t),h(e,[{key:"apply",value:function(t,e,n,a,r,i,s){var o=t.bones[this.boneIndex];if(o.active){var h=this.frames;if(n<h[0])switch(i){case V.setup:return o.scaleX=o.data.scaleX,void(o.scaleY=o.data.scaleY);case V.first:o.scaleX+=(o.data.scaleX-o.scaleX)*r,o.scaleY+=(o.data.scaleY-o.scaleY)*r}else{var l,c,u=G.search(h,n,3),f=this.curves[u/3];switch(f){case 0:var d=h[u];l=h[u+1],c=h[u+2];var v=(n-d)/(h[u+3]-d);l+=(h[u+3+1]-l)*v,c+=(h[u+3+2]-c)*v;break;case 1:l=h[u+1],c=h[u+2];break;default:l=this.getBezierValue(n,u,1,f-2),c=this.getBezierValue(n,u,2,f+18-2)}if(l*=o.data.scaleX,c*=o.data.scaleY,1==r)i==V.add?(o.scaleX+=l-o.data.scaleX,o.scaleY+=c-o.data.scaleY):(o.scaleX=l,o.scaleY=c);else{var m=0,p=0;if(s==U.mixOut)switch(i){case V.setup:m=o.data.scaleX,p=o.data.scaleY,o.scaleX=m+(Math.abs(l)*A.signum(m)-m)*r,o.scaleY=p+(Math.abs(c)*A.signum(p)-p)*r;break;case V.first:case V.replace:m=o.scaleX,p=o.scaleY,o.scaleX=m+(Math.abs(l)*A.signum(m)-m)*r,o.scaleY=p+(Math.abs(c)*A.signum(p)-p)*r;break;case V.add:o.scaleX+=(l-o.data.scaleX)*r,o.scaleY+=(c-o.data.scaleY)*r}else switch(i){case V.setup:m=Math.abs(o.data.scaleX)*A.signum(l),p=Math.abs(o.data.scaleY)*A.signum(c),o.scaleX=m+(l-m)*r,o.scaleY=p+(c-p)*r;break;case V.first:case V.replace:m=Math.abs(o.scaleX)*A.signum(l),p=Math.abs(o.scaleY)*A.signum(c),o.scaleX=m+(l-m)*r,o.scaleY=p+(c-p)*r;break;case V.add:o.scaleX+=(l-o.data.scaleX)*r,o.scaleY+=(c-o.data.scaleY)*r}}}}}}])}(H),tt=function(t){function e(t,n,a){var r;return s(this,e),l(r=D(this,e,[t,n,W.scaleX+"|"+a]),"boneIndex",0),r.boneIndex=a,r}return c(e,t),h(e,[{key:"apply",value:function(t,e,n,a,r,i,s){var o=t.bones[this.boneIndex];o.active&&(o.scaleX=this.getScaleValue(n,r,i,s,o.scaleX,o.data.scaleX))}}])}(j),et=function(t){function e(t,n,a){var r;return s(this,e),l(r=D(this,e,[t,n,W.scaleY+"|"+a]),"boneIndex",0),r.boneIndex=a,r}return c(e,t),h(e,[{key:"apply",value:function(t,e,n,a,r,i,s){var o=t.bones[this.boneIndex];o.active&&(o.scaleY=this.getScaleValue(n,r,i,s,o.scaleY,o.data.scaleY))}}])}(j),nt=function(t){function e(t,n,a){var r;return s(this,e),l(r=D(this,e,[t,n,W.shearX+"|"+a,W.shearY+"|"+a]),"boneIndex",0),r.boneIndex=a,r}return c(e,t),h(e,[{key:"apply",value:function(t,e,n,a,r,i,s){var o=t.bones[this.boneIndex];if(o.active){var h=this.frames;if(n<h[0])switch(i){case V.setup:return o.shearX=o.data.shearX,void(o.shearY=o.data.shearY);case V.first:o.shearX+=(o.data.shearX-o.shearX)*r,o.shearY+=(o.data.shearY-o.shearY)*r}else{var l=0,c=0,u=G.search(h,n,3),f=this.curves[u/3];switch(f){case 0:var d=h[u];l=h[u+1],c=h[u+2];var v=(n-d)/(h[u+3]-d);l+=(h[u+3+1]-l)*v,c+=(h[u+3+2]-c)*v;break;case 1:l=h[u+1],c=h[u+2];break;default:l=this.getBezierValue(n,u,1,f-2),c=this.getBezierValue(n,u,2,f+18-2)}switch(i){case V.setup:o.shearX=o.data.shearX+l*r,o.shearY=o.data.shearY+c*r;break;case V.first:case V.replace:o.shearX+=(o.data.shearX+l-o.shearX)*r,o.shearY+=(o.data.shearY+c-o.shearY)*r;break;case V.add:o.shearX+=l*r,o.shearY+=c*r}}}}}])}(H),at=function(t){function e(t,n,a){var r;return s(this,e),l(r=D(this,e,[t,n,W.shearX+"|"+a]),"boneIndex",0),r.boneIndex=a,r}return c(e,t),h(e,[{key:"apply",value:function(t,e,n,a,r,i,s){var o=t.bones[this.boneIndex];o.active&&(o.shearX=this.getRelativeValue(n,r,i,o.shearX,o.data.shearX))}}])}(j),rt=function(t){function e(t,n,a){var r;return s(this,e),l(r=D(this,e,[t,n,W.shearY+"|"+a]),"boneIndex",0),r.boneIndex=a,r}return c(e,t),h(e,[{key:"apply",value:function(t,e,n,a,r,i,s){var o=t.bones[this.boneIndex];o.active&&(o.shearY=this.getRelativeValue(n,r,i,o.shearY,o.data.shearY))}}])}(j),it=function(t){function e(t,n){var a;return s(this,e),l(a=D(this,e,[t,[W.inherit+"|"+n]]),"boneIndex",0),a.boneIndex=n,a}return c(e,t),h(e,[{key:"getFrameEntries",value:function(){return 2}},{key:"setFrame",value:function(t,e,n){t*=2,this.frames[t]=e,this.frames[t+1]=n}},{key:"apply",value:function(t,e,n,a,r,i,s){var o=t.bones[this.boneIndex];if(o.active){var h=this.frames;n<h[0]?i!=V.setup&&i!=V.first||(o.inherit=o.data.inherit):o.inherit=this.frames[G.search(h,n,2)+1]}}}])}(G),st=function(t){function e(t,n,a){var r;return s(this,e),l(r=D(this,e,[t,n,[W.rgb+"|"+a,W.alpha+"|"+a]]),"slotIndex",0),r.slotIndex=a,r}return c(e,t),h(e,[{key:"getFrameEntries",value:function(){return 5}},{key:"setFrame",value:function(t,e,n,a,r,i){t*=5,this.frames[t]=e,this.frames[t+1]=n,this.frames[t+2]=a,this.frames[t+3]=r,this.frames[t+4]=i}},{key:"apply",value:function(t,e,n,a,r,i,s){var o=t.slots[this.slotIndex];if(o.bone.active){var h=this.frames,l=o.color;if(n<h[0]){var c=o.data.color;switch(i){case V.setup:return void l.setFromColor(c);case V.first:l.add((c.r-l.r)*r,(c.g-l.g)*r,(c.b-l.b)*r,(c.a-l.a)*r)}}else{var u=0,f=0,d=0,v=0,m=G.search(h,n,5),p=this.curves[m/5];switch(p){case 0:var g=h[m];u=h[m+1],f=h[m+2],d=h[m+3],v=h[m+4];var y=(n-g)/(h[m+5]-g);u+=(h[m+5+1]-u)*y,f+=(h[m+5+2]-f)*y,d+=(h[m+5+3]-d)*y,v+=(h[m+5+4]-v)*y;break;case 1:u=h[m+1],f=h[m+2],d=h[m+3],v=h[m+4];break;default:u=this.getBezierValue(n,m,1,p-2),f=this.getBezierValue(n,m,2,p+18-2),d=this.getBezierValue(n,m,3,p+36-2),v=this.getBezierValue(n,m,4,p+54-2)}1==r?l.set(u,f,d,v):(i==V.setup&&l.setFromColor(o.data.color),l.add((u-l.r)*r,(f-l.g)*r,(d-l.b)*r,(v-l.a)*r))}}}}])}(z),ot=function(t){function e(t,n,a){var r;return s(this,e),l(r=D(this,e,[t,n,[W.rgb+"|"+a]]),"slotIndex",0),r.slotIndex=a,r}return c(e,t),h(e,[{key:"getFrameEntries",value:function(){return 4}},{key:"setFrame",value:function(t,e,n,a,r){t<<=2,this.frames[t]=e,this.frames[t+1]=n,this.frames[t+2]=a,this.frames[t+3]=r}},{key:"apply",value:function(t,e,n,a,r,i,s){var o=t.slots[this.slotIndex];if(o.bone.active){var h=this.frames,l=o.color;if(n<h[0]){var c=o.data.color;switch(i){case V.setup:return l.r=c.r,l.g=c.g,void(l.b=c.b);case V.first:l.r+=(c.r-l.r)*r,l.g+=(c.g-l.g)*r,l.b+=(c.b-l.b)*r}}else{var u=0,f=0,d=0,v=G.search(h,n,4),m=this.curves[v>>2];switch(m){case 0:var p=h[v];u=h[v+1],f=h[v+2],d=h[v+3];var g=(n-p)/(h[v+4]-p);u+=(h[v+4+1]-u)*g,f+=(h[v+4+2]-f)*g,d+=(h[v+4+3]-d)*g;break;case 1:u=h[v+1],f=h[v+2],d=h[v+3];break;default:u=this.getBezierValue(n,v,1,m-2),f=this.getBezierValue(n,v,2,m+18-2),d=this.getBezierValue(n,v,3,m+36-2)}if(1==r)l.r=u,l.g=f,l.b=d;else{if(i==V.setup){var y=o.data.color;l.r=y.r,l.g=y.g,l.b=y.b}l.r+=(u-l.r)*r,l.g+=(f-l.g)*r,l.b+=(d-l.b)*r}}}}}])}(z),ht=function(t){function e(t,n,a){var r;return s(this,e),l(r=D(this,e,[t,n,W.alpha+"|"+a]),"slotIndex",0),r.slotIndex=a,r}return c(e,t),h(e,[{key:"apply",value:function(t,e,n,a,r,i,s){var o=t.slots[this.slotIndex];if(o.bone.active){var h=o.color;if(n<this.frames[0]){var l=o.data.color;switch(i){case V.setup:return void(h.a=l.a);case V.first:h.a+=(l.a-h.a)*r}}else{var c=this.getCurveValue(n);1==r?h.a=c:(i==V.setup&&(h.a=o.data.color.a),h.a+=(c-h.a)*r)}}}}])}(j),lt=function(t){function e(t,n,a){var r;return s(this,e),l(r=D(this,e,[t,n,[W.rgb+"|"+a,W.alpha+"|"+a,W.rgb2+"|"+a]]),"slotIndex",0),r.slotIndex=a,r}return c(e,t),h(e,[{key:"getFrameEntries",value:function(){return 8}},{key:"setFrame",value:function(t,e,n,a,r,i,s,o,h){t<<=3,this.frames[t]=e,this.frames[t+1]=n,this.frames[t+2]=a,this.frames[t+3]=r,this.frames[t+4]=i,this.frames[t+5]=s,this.frames[t+6]=o,this.frames[t+7]=h}},{key:"apply",value:function(t,e,n,a,r,i,s){var o=t.slots[this.slotIndex];if(o.bone.active){var h=this.frames,l=o.color,c=o.darkColor;if(n<h[0]){var u=o.data.color,f=o.data.darkColor;switch(i){case V.setup:return l.setFromColor(u),c.r=f.r,c.g=f.g,void(c.b=f.b);case V.first:l.add((u.r-l.r)*r,(u.g-l.g)*r,(u.b-l.b)*r,(u.a-l.a)*r),c.r+=(f.r-c.r)*r,c.g+=(f.g-c.g)*r,c.b+=(f.b-c.b)*r}}else{var d=0,v=0,m=0,p=0,g=0,y=0,k=0,w=G.search(h,n,8),b=this.curves[w>>3];switch(b){case 0:var x=h[w];d=h[w+1],v=h[w+2],m=h[w+3],p=h[w+4],g=h[w+5],y=h[w+6],k=h[w+7];var I=(n-x)/(h[w+8]-x);d+=(h[w+8+1]-d)*I,v+=(h[w+8+2]-v)*I,m+=(h[w+8+3]-m)*I,p+=(h[w+8+4]-p)*I,g+=(h[w+8+5]-g)*I,y+=(h[w+8+6]-y)*I,k+=(h[w+8+7]-k)*I;break;case 1:d=h[w+1],v=h[w+2],m=h[w+3],p=h[w+4],g=h[w+5],y=h[w+6],k=h[w+7];break;default:d=this.getBezierValue(n,w,1,b-2),v=this.getBezierValue(n,w,2,b+18-2),m=this.getBezierValue(n,w,3,b+36-2),p=this.getBezierValue(n,w,4,b+54-2),g=this.getBezierValue(n,w,5,b+72-2),y=this.getBezierValue(n,w,6,b+90-2),k=this.getBezierValue(n,w,7,b+108-2)}if(1==r)l.set(d,v,m,p),c.r=g,c.g=y,c.b=k;else{if(i==V.setup){l.setFromColor(o.data.color);var E=o.data.darkColor;c.r=E.r,c.g=E.g,c.b=E.b}l.add((d-l.r)*r,(v-l.g)*r,(m-l.b)*r,(p-l.a)*r),c.r+=(g-c.r)*r,c.g+=(y-c.g)*r,c.b+=(k-c.b)*r}}}}}])}(z),ct=function(t){function e(t,n,a){var r;return s(this,e),l(r=D(this,e,[t,n,[W.rgb+"|"+a,W.rgb2+"|"+a]]),"slotIndex",0),r.slotIndex=a,r}return c(e,t),h(e,[{key:"getFrameEntries",value:function(){return 7}},{key:"setFrame",value:function(t,e,n,a,r,i,s,o){t*=7,this.frames[t]=e,this.frames[t+1]=n,this.frames[t+2]=a,this.frames[t+3]=r,this.frames[t+4]=i,this.frames[t+5]=s,this.frames[t+6]=o}},{key:"apply",value:function(t,e,n,a,r,i,s){var o=t.slots[this.slotIndex];if(o.bone.active){var h=this.frames,l=o.color,c=o.darkColor;if(n<h[0]){var u=o.data.color,f=o.data.darkColor;switch(i){case V.setup:return l.r=u.r,l.g=u.g,l.b=u.b,c.r=f.r,c.g=f.g,void(c.b=f.b);case V.first:l.r+=(u.r-l.r)*r,l.g+=(u.g-l.g)*r,l.b+=(u.b-l.b)*r,c.r+=(f.r-c.r)*r,c.g+=(f.g-c.g)*r,c.b+=(f.b-c.b)*r}}else{var d=0,v=0,m=0,p=0,g=0,y=0,k=G.search(h,n,7),w=this.curves[k/7];switch(w){case 0:var b=h[k];d=h[k+1],v=h[k+2],m=h[k+3],p=h[k+4],g=h[k+5],y=h[k+6];var x=(n-b)/(h[k+7]-b);d+=(h[k+7+1]-d)*x,v+=(h[k+7+2]-v)*x,m+=(h[k+7+3]-m)*x,p+=(h[k+7+4]-p)*x,g+=(h[k+7+5]-g)*x,y+=(h[k+7+6]-y)*x;break;case 1:d=h[k+1],v=h[k+2],m=h[k+3],p=h[k+4],g=h[k+5],y=h[k+6];break;default:d=this.getBezierValue(n,k,1,w-2),v=this.getBezierValue(n,k,2,w+18-2),m=this.getBezierValue(n,k,3,w+36-2),p=this.getBezierValue(n,k,4,w+54-2),g=this.getBezierValue(n,k,5,w+72-2),y=this.getBezierValue(n,k,6,w+90-2)}if(1==r)l.r=d,l.g=v,l.b=m,c.r=p,c.g=g,c.b=y;else{if(i==V.setup){var I=o.data.color,E=o.data.darkColor;l.r=I.r,l.g=I.g,l.b=I.b,c.r=E.r,c.g=E.g,c.b=E.b}l.r+=(d-l.r)*r,l.g+=(v-l.g)*r,l.b+=(m-l.b)*r,c.r+=(p-c.r)*r,c.g+=(g-c.g)*r,c.b+=(y-c.b)*r}}}}}])}(z),ut=function(t){function e(t,n){var a;return s(this,e),l(a=D(this,e,[t,[W.attachment+"|"+n]]),"slotIndex",0),l(a,"attachmentNames",void 0),a.slotIndex=n,a.attachmentNames=new Array(t),a}return c(e,t),h(e,[{key:"getFrameCount",value:function(){return this.frames.length}},{key:"setFrame",value:function(t,e,n){this.frames[t]=e,this.attachmentNames[t]=n}},{key:"apply",value:function(t,e,n,a,r,i,s){var o=t.slots[this.slotIndex];o.bone.active&&(s!=U.mixOut?n<this.frames[0]?i!=V.setup&&i!=V.first||this.setAttachment(t,o,o.data.attachmentName):this.setAttachment(t,o,this.attachmentNames[G.search1(this.frames,n)]):i==V.setup&&this.setAttachment(t,o,o.data.attachmentName))}},{key:"setAttachment",value:function(t,e,n){e.setAttachment(n?t.getAttachment(this.slotIndex,n):null)}}])}(G),ft=function(t){function e(t,n,a,r){var i;return s(this,e),l(i=D(this,e,[t,n,[W.deform+"|"+a+"|"+r.id]]),"slotIndex",0),l(i,"attachment",void 0),l(i,"vertices",void 0),i.slotIndex=a,i.attachment=r,i.vertices=new Array(t),i}return c(e,t),h(e,[{key:"getFrameCount",value:function(){return this.frames.length}},{key:"setFrame",value:function(t,e,n){this.frames[t]=e,this.vertices[t]=n}},{key:"setBezier",value:function(t,e,n,a,r,i,s,o,h,l,c){var u=this.curves,f=this.getFrameCount()+18*t;0==n&&(u[e]=2+f);for(var d=.03*(a-2*i+o),v=.03*h-.06*s,m=.006*(3*(i-o)-a+l),p=.018*(s-h+.33333333),g=2*d+m,y=2*v+p,k=.3*(i-a)+d+.16666667*m,w=.3*s+v+.16666667*p,b=a+k,x=w,I=f+18;f<I;f+=2)u[f]=b,u[f+1]=x,k+=g,w+=y,g+=m,y+=p,b+=k,x+=w}},{key:"getCurvePercent",value:function(t,e){var n=this.curves,a=n[e];switch(a){case 0:var r=this.frames[e];return(t-r)/(this.frames[e+this.getFrameEntries()]-r);case 1:return 0}if(n[a-=2]>t){var i=this.frames[e];return n[a+1]*(t-i)/(n[a]-i)}var s=a+18;for(a+=2;a<s;a+=2)if(n[a]>=t){var o=n[a-2],h=n[a-1];return h+(t-o)/(n[a]-o)*(n[a+1]-h)}var l=n[s-2],c=n[s-1];return c+(1-c)*(t-l)/(this.frames[e+this.getFrameEntries()]-l)}},{key:"apply",value:function(t,e,n,a,r,i,s){var o=t.slots[this.slotIndex];if(o.bone.active){var h=o.getAttachment();if(h&&h instanceof N&&h.timelineAttachment==this.attachment){var l=o.deform;0==l.length&&(i=V.setup);var c=this.vertices,u=c[0].length,f=this.frames;if(n<f[0])switch(i){case V.setup:return void(l.length=0);case V.first:if(1==r)return void(l.length=0);l.length=u;var d=h;if(d.bones){r=1-r;for(m=0;m<u;m++)l[m]*=r}else for(var v=d.vertices,m=0;m<u;m++)l[m]+=(v[m]-l[m])*r}else if(l.length=u,n>=f[f.length-1]){var p=c[f.length-1];if(1==r)if(i==V.add){var g=h;if(g.bones)for(var y=0;y<u;y++)l[y]+=p[y];else for(var k=g.vertices,w=0;w<u;w++)l[w]+=p[w]-k[w]}else C.arrayCopy(p,0,l,0,u);else switch(i){case V.setup:var b=h;if(b.bones)for(var x=0;x<u;x++)l[x]=p[x]*r;else for(var I=b.vertices,E=0;E<u;E++){var A=I[E];l[E]=A+(p[E]-A)*r}break;case V.first:case V.replace:for(var S=0;S<u;S++)l[S]+=(p[S]-l[S])*r;break;case V.add:var R=h;if(R.bones)for(var T=0;T<u;T++)l[T]+=p[T]*r;else for(var M=R.vertices,F=0;F<u;F++)l[F]+=(p[F]-M[F])*r}}else{var P=G.search1(f,n),Y=this.getCurvePercent(n,P),X=c[P],O=c[P+1];if(1==r)if(i==V.add){var L=h;if(L.bones)for(var _=0;_<u;_++){var B=X[_];l[_]+=B+(O[_]-B)*Y}else for(var D=L.vertices,U=0;U<u;U++){var q=X[U];l[U]+=q+(O[U]-q)*Y-D[U]}}else for(var W=0;W<u;W++){var z=X[W];l[W]=z+(O[W]-z)*Y}else switch(i){case V.setup:var j=h;if(j.bones)for(var H=0;H<u;H++){var $=X[H];l[H]=($+(O[H]-$)*Y)*r}else for(var J=j.vertices,K=0;K<u;K++){var Q=X[K],Z=J[K];l[K]=Z+(Q+(O[K]-Q)*Y-Z)*r}break;case V.first:case V.replace:for(var tt=0;tt<u;tt++){var et=X[tt];l[tt]+=(et+(O[tt]-et)*Y-l[tt])*r}break;case V.add:var nt=h;if(nt.bones)for(var at=0;at<u;at++){var rt=X[at];l[at]+=(rt+(O[at]-rt)*Y)*r}else for(var it=nt.vertices,st=0;st<u;st++){var ot=X[st];l[st]+=(ot+(O[st]-ot)*Y-it[st])*r}}}}}}}])}(z),dt=function(t){function e(t){var n;return s(this,e),l(n=D(this,e,[t,e.propertyIds]),"events",void 0),n.events=new Array(t),n}return c(e,t),h(e,[{key:"getFrameCount",value:function(){return this.frames.length}},{key:"setFrame",value:function(t,e){this.frames[t]=e.time,this.events[t]=e}},{key:"apply",value:function(t,e,n,a,r,i,s){if(a){var o=this.frames,h=this.frames.length;if(e>n)this.apply(t,e,Number.MAX_VALUE,a,r,i,s),e=-1;else if(e>=o[h-1])return;if(!(n<o[0])){var l=0;if(e<o[0])l=0;else for(var c=o[l=G.search1(o,e)+1];l>0&&o[l-1]==c;)l--;for(;l<h&&n>=o[l];l++)a.push(this.events[l])}}}}])}(G);l(dt,"propertyIds",[""+W.event]);var vt=function(t){function e(t){var n;return s(this,e),l(n=D(this,e,[t,e.propertyIds]),"drawOrders",void 0),n.drawOrders=new Array(t),n}return c(e,t),h(e,[{key:"getFrameCount",value:function(){return this.frames.length}},{key:"setFrame",value:function(t,e,n){this.frames[t]=e,this.drawOrders[t]=n}},{key:"apply",value:function(t,e,n,a,r,i,s){if(s!=U.mixOut)if(n<this.frames[0])i!=V.setup&&i!=V.first||C.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);else{var o=G.search1(this.frames,n),h=this.drawOrders[o];if(h)for(var l=t.drawOrder,c=t.slots,u=0,f=h.length;u<f;u++)l[u]=c[h[u]];else C.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length)}else i==V.setup&&C.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length)}}])}(G);l(vt,"propertyIds",[""+W.drawOrder]);var mt=function(t){function e(t,n,a){var r;return s(this,e),l(r=D(this,e,[t,n,[W.ikConstraint+"|"+a]]),"constraintIndex",0),r.constraintIndex=a,r}return c(e,t),h(e,[{key:"getFrameEntries",value:function(){return 6}},{key:"setFrame",value:function(t,e,n,a,r,i,s){t*=6,this.frames[t]=e,this.frames[t+1]=n,this.frames[t+2]=a,this.frames[t+3]=r,this.frames[t+4]=i?1:0,this.frames[t+5]=s?1:0}},{key:"apply",value:function(t,e,n,a,r,i,s){var o=t.ikConstraints[this.constraintIndex];if(o.active){var h=this.frames;if(n<h[0])switch(i){case V.setup:return o.mix=o.data.mix,o.softness=o.data.softness,o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,void(o.stretch=o.data.stretch);case V.first:o.mix+=(o.data.mix-o.mix)*r,o.softness+=(o.data.softness-o.softness)*r,o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,o.stretch=o.data.stretch}else{var l=0,c=0,u=G.search(h,n,6),f=this.curves[u/6];switch(f){case 0:var d=h[u];l=h[u+1],c=h[u+2];var v=(n-d)/(h[u+6]-d);l+=(h[u+6+1]-l)*v,c+=(h[u+6+2]-c)*v;break;case 1:l=h[u+1],c=h[u+2];break;default:l=this.getBezierValue(n,u,1,f-2),c=this.getBezierValue(n,u,2,f+18-2)}i==V.setup?(o.mix=o.data.mix+(l-o.data.mix)*r,o.softness=o.data.softness+(c-o.data.softness)*r,s==U.mixOut?(o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,o.stretch=o.data.stretch):(o.bendDirection=h[u+3],o.compress=0!=h[u+4],o.stretch=0!=h[u+5])):(o.mix+=(l-o.mix)*r,o.softness+=(c-o.softness)*r,s==U.mixIn&&(o.bendDirection=h[u+3],o.compress=0!=h[u+4],o.stretch=0!=h[u+5]))}}}}])}(z),pt=function(t){function e(t,n,a){var r;return s(this,e),l(r=D(this,e,[t,n,[W.transformConstraint+"|"+a]]),"constraintIndex",0),r.constraintIndex=a,r}return c(e,t),h(e,[{key:"getFrameEntries",value:function(){return 7}},{key:"setFrame",value:function(t,e,n,a,r,i,s,o){var h=this.frames;h[t*=7]=e,h[t+1]=n,h[t+2]=a,h[t+3]=r,h[t+4]=i,h[t+5]=s,h[t+6]=o}},{key:"apply",value:function(t,e,n,a,r,i,s){var o=t.transformConstraints[this.constraintIndex];if(o.active){var h=this.frames;if(n<h[0]){var l=o.data;switch(i){case V.setup:return o.mixRotate=l.mixRotate,o.mixX=l.mixX,o.mixY=l.mixY,o.mixScaleX=l.mixScaleX,o.mixScaleY=l.mixScaleY,void(o.mixShearY=l.mixShearY);case V.first:o.mixRotate+=(l.mixRotate-o.mixRotate)*r,o.mixX+=(l.mixX-o.mixX)*r,o.mixY+=(l.mixY-o.mixY)*r,o.mixScaleX+=(l.mixScaleX-o.mixScaleX)*r,o.mixScaleY+=(l.mixScaleY-o.mixScaleY)*r,o.mixShearY+=(l.mixShearY-o.mixShearY)*r}}else{var c,u,f,d,v,m,p=G.search(h,n,7),g=this.curves[p/7];switch(g){case 0:var y=h[p];c=h[p+1],u=h[p+2],f=h[p+3],d=h[p+4],v=h[p+5],m=h[p+6];var k=(n-y)/(h[p+7]-y);c+=(h[p+7+1]-c)*k,u+=(h[p+7+2]-u)*k,f+=(h[p+7+3]-f)*k,d+=(h[p+7+4]-d)*k,v+=(h[p+7+5]-v)*k,m+=(h[p+7+6]-m)*k;break;case 1:c=h[p+1],u=h[p+2],f=h[p+3],d=h[p+4],v=h[p+5],m=h[p+6];break;default:c=this.getBezierValue(n,p,1,g-2),u=this.getBezierValue(n,p,2,g+18-2),f=this.getBezierValue(n,p,3,g+36-2),d=this.getBezierValue(n,p,4,g+54-2),v=this.getBezierValue(n,p,5,g+72-2),m=this.getBezierValue(n,p,6,g+90-2)}if(i==V.setup){var w=o.data;o.mixRotate=w.mixRotate+(c-w.mixRotate)*r,o.mixX=w.mixX+(u-w.mixX)*r,o.mixY=w.mixY+(f-w.mixY)*r,o.mixScaleX=w.mixScaleX+(d-w.mixScaleX)*r,o.mixScaleY=w.mixScaleY+(v-w.mixScaleY)*r,o.mixShearY=w.mixShearY+(m-w.mixShearY)*r}else o.mixRotate+=(c-o.mixRotate)*r,o.mixX+=(u-o.mixX)*r,o.mixY+=(f-o.mixY)*r,o.mixScaleX+=(d-o.mixScaleX)*r,o.mixScaleY+=(v-o.mixScaleY)*r,o.mixShearY+=(m-o.mixShearY)*r}}}}])}(z),gt=function(t){function e(t,n,a){var r;return s(this,e),l(r=D(this,e,[t,n,W.pathConstraintPosition+"|"+a]),"constraintIndex",0),r.constraintIndex=a,r}return c(e,t),h(e,[{key:"apply",value:function(t,e,n,a,r,i,s){var o=t.pathConstraints[this.constraintIndex];o.active&&(o.position=this.getAbsoluteValue(n,r,i,o.position,o.data.position))}}])}(j),yt=function(t){function e(t,n,a){var r;return s(this,e),l(r=D(this,e,[t,n,W.pathConstraintSpacing+"|"+a]),"constraintIndex",0),r.constraintIndex=a,r}return c(e,t),h(e,[{key:"apply",value:function(t,e,n,a,r,i,s){var o=t.pathConstraints[this.constraintIndex];o.active&&(o.spacing=this.getAbsoluteValue(n,r,i,o.spacing,o.data.spacing))}}])}(j),kt=function(t){function e(t,n,a){var r;return s(this,e),l(r=D(this,e,[t,n,[W.pathConstraintMix+"|"+a]]),"constraintIndex",0),r.constraintIndex=a,r}return c(e,t),h(e,[{key:"getFrameEntries",value:function(){return 4}},{key:"setFrame",value:function(t,e,n,a,r){var i=this.frames;i[t<<=2]=e,i[t+1]=n,i[t+2]=a,i[t+3]=r}},{key:"apply",value:function(t,e,n,a,r,i,s){var o=t.pathConstraints[this.constraintIndex];if(o.active){var h=this.frames;if(n<h[0])switch(i){case V.setup:return o.mixRotate=o.data.mixRotate,o.mixX=o.data.mixX,void(o.mixY=o.data.mixY);case V.first:o.mixRotate+=(o.data.mixRotate-o.mixRotate)*r,o.mixX+=(o.data.mixX-o.mixX)*r,o.mixY+=(o.data.mixY-o.mixY)*r}else{var l,c,u,f=G.search(h,n,4),d=this.curves[f>>2];switch(d){case 0:var v=h[f];l=h[f+1],c=h[f+2],u=h[f+3];var m=(n-v)/(h[f+4]-v);l+=(h[f+4+1]-l)*m,c+=(h[f+4+2]-c)*m,u+=(h[f+4+3]-u)*m;break;case 1:l=h[f+1],c=h[f+2],u=h[f+3];break;default:l=this.getBezierValue(n,f,1,d-2),c=this.getBezierValue(n,f,2,d+18-2),u=this.getBezierValue(n,f,3,d+36-2)}if(i==V.setup){var p=o.data;o.mixRotate=p.mixRotate+(l-p.mixRotate)*r,o.mixX=p.mixX+(c-p.mixX)*r,o.mixY=p.mixY+(u-p.mixY)*r}else o.mixRotate+=(l-o.mixRotate)*r,o.mixX+=(c-o.mixX)*r,o.mixY+=(u-o.mixY)*r}}}}])}(z),wt=function(t){function e(t,n,a,r){var i;return s(this,e),l(i=D(this,e,[t,n,r+"|"+a]),"constraintIndex",0),i.constraintIndex=a,i}return c(e,t),h(e,[{key:"apply",value:function(t,e,n,a,r,i,s){var o;if(-1==this.constraintIndex){var h,l=n>=this.frames[0]?this.getCurveValue(n):0,c=k(t.physicsConstraints);try{for(c.s();!(h=c.n()).done;){var u=h.value;u.active&&this.global(u.data)&&this.set(u,this.getAbsoluteValue2(n,r,i,this.get(u),this.setup(u),l))}}catch(t){c.e(t)}finally{c.f()}}else(o=t.physicsConstraints[this.constraintIndex]).active&&this.set(o,this.getAbsoluteValue(n,r,i,this.get(o),this.setup(o)))}}])}(j),bt=function(t){function e(t,n,a){return s(this,e),D(this,e,[t,n,a,W.physicsConstraintInertia])}return c(e,t),h(e,[{key:"setup",value:function(t){return t.data.inertia}},{key:"get",value:function(t){return t.inertia}},{key:"set",value:function(t,e){t.inertia=e}},{key:"global",value:function(t){return t.inertiaGlobal}}])}(wt),xt=function(t){function e(t,n,a){return s(this,e),D(this,e,[t,n,a,W.physicsConstraintStrength])}return c(e,t),h(e,[{key:"setup",value:function(t){return t.data.strength}},{key:"get",value:function(t){return t.strength}},{key:"set",value:function(t,e){t.strength=e}},{key:"global",value:function(t){return t.strengthGlobal}}])}(wt),It=function(t){function e(t,n,a){return s(this,e),D(this,e,[t,n,a,W.physicsConstraintDamping])}return c(e,t),h(e,[{key:"setup",value:function(t){return t.data.damping}},{key:"get",value:function(t){return t.damping}},{key:"set",value:function(t,e){t.damping=e}},{key:"global",value:function(t){return t.dampingGlobal}}])}(wt),Et=function(t){function e(t,n,a){return s(this,e),D(this,e,[t,n,a,W.physicsConstraintMass])}return c(e,t),h(e,[{key:"setup",value:function(t){return 1/t.data.massInverse}},{key:"get",value:function(t){return 1/t.massInverse}},{key:"set",value:function(t,e){t.massInverse=1/e}},{key:"global",value:function(t){return t.massGlobal}}])}(wt),At=function(t){function e(t,n,a){return s(this,e),D(this,e,[t,n,a,W.physicsConstraintWind])}return c(e,t),h(e,[{key:"setup",value:function(t){return t.data.wind}},{key:"get",value:function(t){return t.wind}},{key:"set",value:function(t,e){t.wind=e}},{key:"global",value:function(t){return t.windGlobal}}])}(wt),St=function(t){function e(t,n,a){return s(this,e),D(this,e,[t,n,a,W.physicsConstraintGravity])}return c(e,t),h(e,[{key:"setup",value:function(t){return t.data.gravity}},{key:"get",value:function(t){return t.gravity}},{key:"set",value:function(t,e){t.gravity=e}},{key:"global",value:function(t){return t.gravityGlobal}}])}(wt),Rt=function(t){function e(t,n,a){return s(this,e),D(this,e,[t,n,a,W.physicsConstraintMix])}return c(e,t),h(e,[{key:"setup",value:function(t){return t.data.mix}},{key:"get",value:function(t){return t.mix}},{key:"set",value:function(t,e){t.mix=e}},{key:"global",value:function(t){return t.mixGlobal}}])}(wt),Tt=function(t){function e(t,n){var a;return s(this,e),l(a=D(this,e,[t,e.propertyIds]),"constraintIndex",void 0),a.constraintIndex=n,a}return c(e,t),h(e,[{key:"getFrameCount",value:function(){return this.frames.length}},{key:"setFrame",value:function(t,e){this.frames[t]=e}},{key:"apply",value:function(t,e,n,a,r,i,s){var o;if(-1==this.constraintIndex||(o=t.physicsConstraints[this.constraintIndex]).active){var h=this.frames;if(e>n)this.apply(t,e,Number.MAX_VALUE,[],r,i,s),e=-1;else if(e>=h[h.length-1])return;if(!(n<h[0])&&(e<h[0]||n>=h[G.search1(h,e)+1]))if(null!=o)o.reset();else{var l,c=k(t.physicsConstraints);try{for(c.s();!(l=c.n()).done;){var u=l.value;u.active&&u.reset()}}catch(t){c.e(t)}finally{c.f()}}}}}])}(G);l(Tt,"propertyIds",[W.physicsConstraintReset.toString()]);var Ct=function(t){function e(t,n,a){var r;return s(this,e),l(r=D(this,e,[t,[W.sequence+"|"+n+"|"+a.sequence.id]]),"slotIndex",void 0),l(r,"attachment",void 0),r.slotIndex=n,r.attachment=a,r}return c(e,t),h(e,[{key:"getFrameEntries",value:function(){return e.ENTRIES}},{key:"getSlotIndex",value:function(){return this.slotIndex}},{key:"getAttachment",value:function(){return this.attachment}},{key:"setFrame",value:function(t,n,a,r,i){var s=this.frames;s[t*=e.ENTRIES]=n,s[t+e.MODE]=a|r<<4,s[t+e.DELAY]=i}},{key:"apply",value:function(t,n,a,r,i,s,o){var h=t.slots[this.slotIndex];if(h.bone.active){var l=h.attachment,c=this.attachment;if(l==c||l instanceof N&&l.timelineAttachment==c){var u=this.frames;if(a<u[0])s!=V.setup&&s!=V.first||(h.sequenceIndex=-1);else{var f=G.search(u,a,e.ENTRIES),d=u[f],v=u[f+e.MODE],m=u[f+e.DELAY];if(this.attachment.sequence){var p=v>>4,g=this.attachment.sequence.regions.length,y=B[15&v];if(y!=L.hold)switch(p+=(a-d)/m+1e-5|0,y){case L.once:p=Math.min(g-1,p);break;case L.loop:p%=g;break;case L.pingpong:var k=(g<<1)-2;(p=0==k?0:p%k)>=g&&(p=k-p);break;case L.onceReverse:p=Math.max(g-1-p,0);break;case L.loopReverse:p=g-1-p%g;break;case L.pingpongReverse:var w=(g<<1)-2;(p=0==w?0:(p+g-1)%w)>=g&&(p=w-p)}h.sequenceIndex=p}}}}}}])}(G);l(Ct,"ENTRIES",3),l(Ct,"MODE",1),l(Ct,"DELAY",2);var Mt=function(){function t(e){s(this,t),l(this,"data",void 0),l(this,"tracks",new Array),l(this,"timeScale",1),l(this,"unkeyedState",0),l(this,"events",new Array),l(this,"listeners",new Array),l(this,"queue",new Yt(this)),l(this,"propertyIDs",new I),l(this,"animationsChanged",!1),l(this,"trackEntryPool",new F((function(){return new Pt}))),this.data=e}return h(t,[{key:"update",value:function(t){t*=this.timeScale;for(var e=this.tracks,n=0,a=e.length;n<a;n++){var r=e[n];if(r){r.animationLast=r.nextAnimationLast,r.trackLast=r.nextTrackLast;var i=t*r.timeScale;if(r.delay>0){if(r.delay-=i,r.delay>0)continue;i=-r.delay,r.delay=0}var s=r.next;if(s){var o=r.trackLast-s.delay;if(o>=0){for(s.delay=0,s.trackTime+=0==r.timeScale?0:(o/r.timeScale+t)*s.timeScale,r.trackTime+=i,this.setCurrent(n,s,!0);s.mixingFrom;)s.mixTime+=t,s=s.mixingFrom;continue}}else if(r.trackLast>=r.trackEnd&&!r.mixingFrom){e[n]=null,this.queue.end(r),this.clearNext(r);continue}if(r.mixingFrom&&this.updateMixingFrom(r,t)){var h=r.mixingFrom;for(r.mixingFrom=null,h&&(h.mixingTo=null);h;)this.queue.end(h),h=h.mixingFrom}r.trackTime+=i}}this.queue.drain()}},{key:"updateMixingFrom",value:function(t,e){var n=t.mixingFrom;if(!n)return!0;var a=this.updateMixingFrom(n,e);return n.animationLast=n.nextAnimationLast,n.trackLast=n.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration?(0!=n.totalAlpha&&0!=t.mixDuration||(t.mixingFrom=n.mixingFrom,n.mixingFrom&&(n.mixingFrom.mixingTo=t),t.interruptAlpha=n.interruptAlpha,this.queue.end(n)),a):(n.trackTime+=e*n.timeScale,t.mixTime+=e,!1)}},{key:"apply",value:function(t){if(!t)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var e=this.events,n=this.tracks,a=!1,r=0,i=n.length;r<i;r++){var s=n[r];if(s&&!(s.delay>0)){a=!0;var o=0==r?V.first:s.mixBlend,h=s.alpha;s.mixingFrom?h*=this.applyMixingFrom(s,t,o):s.trackTime>=s.trackEnd&&!s.next&&(h=0);var l=h>=s.alphaAttachmentThreshold,c=s.animationLast,u=s.getAnimationTime(),f=u,d=e;s.reverse&&(f=s.animation.duration-f,d=null);var v=s.animation.timelines,m=v.length;if(0==r&&1==h||o==V.add){0==r&&(l=!0);for(var p=0;p<m;p++){C.webkit602BugfixHelper(h,o);var g=v[p];g instanceof ut?this.applyAttachmentTimeline(g,t,f,o,l):g.apply(t,c,f,d,h,o,U.mixIn)}}else{var y=s.timelineMode,k=s.shortestRotation,w=!k&&s.timelinesRotation.length!=m<<1;w&&(s.timelinesRotation.length=m<<1);for(var b=0;b<m;b++){var x=v[b],I=y[b]==Ot?o:V.setup;!k&&x instanceof $?this.applyRotateTimeline(x,t,f,h,I,s.timelinesRotation,b<<1,w):x instanceof ut?this.applyAttachmentTimeline(x,t,f,o,l):(C.webkit602BugfixHelper(h,o),x.apply(t,c,f,d,h,I,U.mixIn))}}this.queueEvents(s,u),e.length=0,s.nextAnimationLast=u,s.nextTrackLast=s.trackTime}}for(var E=this.unkeyedState+Dt,A=t.slots,S=0,R=t.slots.length;S<R;S++){var T=A[S];if(T.attachmentState==E){var M=T.data.attachmentName;T.setAttachment(M?t.getAttachment(T.data.index,M):null)}}return this.unkeyedState+=2,this.queue.drain(),a}},{key:"applyMixingFrom",value:function(t,e,n){var a=t.mixingFrom;a.mixingFrom&&this.applyMixingFrom(a,e,n);var r=0;0==t.mixDuration?(r=1,n==V.first&&(n=V.setup)):((r=t.mixTime/t.mixDuration)>1&&(r=1),n!=V.first&&(n=a.mixBlend));var i=r<a.mixAttachmentThreshold,s=r<a.mixDrawOrderThreshold,o=a.animation.timelines,h=o.length,l=a.alpha*t.interruptAlpha,c=l*(1-r),u=a.animationLast,f=a.getAnimationTime(),d=f,v=null;if(a.reverse?d=a.animation.duration-d:r<a.eventThreshold&&(v=this.events),n==V.add)for(var m=0;m<h;m++)o[m].apply(e,u,d,v,c,n,U.mixOut);else{var p=a.timelineMode,g=a.timelineHoldMix,y=a.shortestRotation,k=!y&&a.timelinesRotation.length!=h<<1;k&&(a.timelinesRotation.length=h<<1),a.totalAlpha=0;for(var w=0;w<h;w++){var b=o[w],x=U.mixOut,I=void 0,E=0;switch(p[w]){case Ot:if(!s&&b instanceof vt)continue;I=n,E=c;break;case Nt:I=V.setup,E=c;break;case Lt:I=n,E=l;break;case _t:I=V.setup,E=l;break;default:I=V.setup;var A=g[w];E=l*Math.max(0,1-A.mixTime/A.mixDuration)}a.totalAlpha+=E,!y&&b instanceof $?this.applyRotateTimeline(b,e,d,E,I,a.timelinesRotation,w<<1,k):b instanceof ut?this.applyAttachmentTimeline(b,e,d,I,i&&E>=a.alphaAttachmentThreshold):(C.webkit602BugfixHelper(E,n),s&&b instanceof vt&&I==V.setup&&(x=U.mixIn),b.apply(e,u,d,v,E,I,x))}}return t.mixDuration>0&&this.queueEvents(a,f),this.events.length=0,a.nextAnimationLast=f,a.nextTrackLast=a.trackTime,r}},{key:"applyAttachmentTimeline",value:function(t,e,n,a,r){var i=e.slots[t.slotIndex];i.bone.active&&(n<t.frames[0]?a!=V.setup&&a!=V.first||this.setAttachment(e,i,i.data.attachmentName,r):this.setAttachment(e,i,t.attachmentNames[G.search1(t.frames,n)],r),i.attachmentState<=this.unkeyedState&&(i.attachmentState=this.unkeyedState+Dt))}},{key:"setAttachment",value:function(t,e,n,a){e.setAttachment(n?t.getAttachment(e.data.index,n):null),a&&(e.attachmentState=this.unkeyedState+Vt)}},{key:"applyRotateTimeline",value:function(t,e,n,a,r,i,s,o){if(o&&(i[s]=0),1!=a){var h=e.bones[t.boneIndex];if(h.active){var l=0,c=0;if(n<t.frames[0])switch(r){case V.setup:h.rotation=h.data.rotation;default:return;case V.first:l=h.rotation,c=h.data.rotation}else l=r==V.setup?h.data.rotation:h.rotation,c=h.data.rotation+t.getCurveValue(n);var u=0,f=c-l;if(0==(f-=360*Math.ceil(f/360-.5)))u=i[s];else{var d=0,v=0;o?(d=0,v=f):(d=i[s],v=i[s+1]);var m=d-d%360;u=f+m;var p=f>=0,g=d>=0;Math.abs(v)<=90&&A.signum(v)!=A.signum(f)&&(Math.abs(d-m)>180?(u+=360*A.signum(d),g=p):0!=m?u-=360*A.signum(d):g=p),g!=p&&(u+=360*A.signum(d)),i[s]=u}i[s+1]=f,h.rotation=l+u*a}}else t.apply(e,0,n,null,1,r,U.mixIn)}},{key:"queueEvents",value:function(t,e){for(var n=t.animationStart,a=t.animationEnd,r=a-n,i=t.trackLast%r,s=this.events,o=0,h=s.length;o<h;o++){var l=s[o];if(l.time<i)break;l.time>a||this.queue.event(t,l)}var c=!1;if(t.loop)if(0==r)c=!0;else{var u=Math.floor(t.trackTime/r);c=u>0&&u>Math.floor(t.trackLast/r)}else c=e>=a&&t.animationLast<a;for(c&&this.queue.complete(t);o<h;o++){var f=s[o];f.time<n||this.queue.event(t,f)}}},{key:"clearTracks",value:function(){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var e=0,n=this.tracks.length;e<n;e++)this.clearTrack(e);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()}},{key:"clearTrack",value:function(t){if(!(t>=this.tracks.length)){var e=this.tracks[t];if(e){this.queue.end(e),this.clearNext(e);for(var n=e;;){var a=n.mixingFrom;if(!a)break;this.queue.end(a),n.mixingFrom=null,n.mixingTo=null,n=a}this.tracks[e.trackIndex]=null,this.queue.drain()}}}},{key:"setCurrent",value:function(t,e,n){var a=this.expandToIndex(t);this.tracks[t]=e,e.previous=null,a&&(n&&this.queue.interrupt(a),e.mixingFrom=a,a.mixingTo=e,e.mixTime=0,a.mixingFrom&&a.mixDuration>0&&(e.interruptAlpha*=Math.min(1,a.mixTime/a.mixDuration)),a.timelinesRotation.length=0),this.queue.start(e)}},{key:"setAnimation",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=this.data.skeletonData.findAnimation(e);if(!a)throw new Error("Animation not found: "+e);return this.setAnimationWith(t,a,n)}},{key:"setAnimationWith",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)throw new Error("animation cannot be null.");var a=!0,r=this.expandToIndex(t);r&&(-1==r.nextTrackLast?(this.tracks[t]=r.mixingFrom,this.queue.interrupt(r),this.queue.end(r),this.clearNext(r),r=r.mixingFrom,a=!1):this.clearNext(r));var i=this.trackEntry(t,e,n,r);return this.setCurrent(t,i,a),this.queue.drain(),i}},{key:"addAnimation",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=this.data.skeletonData.findAnimation(e);if(!r)throw new Error("Animation not found: "+e);return this.addAnimationWith(t,r,n,a)}},{key:"addAnimationWith",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!e)throw new Error("animation cannot be null.");var r=this.expandToIndex(t);if(r)for(;r.next;)r=r.next;var i=this.trackEntry(t,e,n,r);return r?(r.next=i,i.previous=r,a<=0&&(a+=r.getTrackComplete()-i.mixDuration)):(this.setCurrent(t,i,!0),this.queue.drain()),i.delay=a,i}},{key:"setEmptyAnimation",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=this.setAnimationWith(e,t.emptyAnimation(),!1);return a.mixDuration=n,a.trackEnd=n,a}},{key:"addEmptyAnimation",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.addAnimationWith(e,t.emptyAnimation(),!1,a);return a<=0&&(r.delay+=r.mixDuration-n),r.mixDuration=n,r.trackEnd=n,r}},{key:"setEmptyAnimations",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var n=0,a=this.tracks.length;n<a;n++){var r=this.tracks[n];r&&this.setEmptyAnimation(r.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()}},{key:"expandToIndex",value:function(t){return t<this.tracks.length?this.tracks[t]:(C.ensureArrayCapacity(this.tracks,t+1,null),this.tracks.length=t+1,null)}},{key:"trackEntry",value:function(t,e,n,a){var r=this.trackEntryPool.obtain();return r.reset(),r.trackIndex=t,r.animation=e,r.loop=n,r.holdPrevious=!1,r.reverse=!1,r.shortestRotation=!1,r.eventThreshold=0,r.alphaAttachmentThreshold=0,r.mixAttachmentThreshold=0,r.mixDrawOrderThreshold=0,r.animationStart=0,r.animationEnd=e.duration,r.animationLast=-1,r.nextAnimationLast=-1,r.delay=0,r.trackTime=0,r.trackLast=-1,r.nextTrackLast=-1,r.trackEnd=Number.MAX_VALUE,r.timeScale=1,r.alpha=1,r.mixTime=0,r.mixDuration=a?this.data.getMix(a.animation,e):0,r.interruptAlpha=1,r.totalAlpha=0,r.mixBlend=V.replace,r}},{key:"clearNext",value:function(t){for(var e=t.next;e;)this.queue.dispose(e),e=e.next;t.next=null}},{key:"_animationsChanged",value:function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var t=this.tracks,e=0,n=t.length;e<n;e++){var a=t[e];if(a){for(;a.mixingFrom;)a=a.mixingFrom;do{a.mixingTo&&a.mixBlend==V.add||this.computeHold(a),a=a.mixingTo}while(a)}}}},{key:"computeHold",value:function(t){var e=t.mixingTo,n=t.animation.timelines,a=t.animation.timelines.length,r=t.timelineMode;r.length=a;var i=t.timelineHoldMix;i.length=0;var s=this.propertyIDs;if(e&&e.holdPrevious)for(var o=0;o<a;o++)r[o]=s.addAll(n[o].getPropertyIds())?_t:Lt;else t:for(var h=0;h<a;h++){var l=n[h],c=l.getPropertyIds();if(s.addAll(c))if(!e||l instanceof ut||l instanceof vt||l instanceof dt||!e.animation.hasTimeline(c))r[h]=Nt;else{for(var u=e.mixingTo;u;u=u.mixingTo)if(!u.animation.hasTimeline(c)){if(t.mixDuration>0){r[h]=Bt,i[h]=u;continue t}break}r[h]=_t}else r[h]=Ot}}},{key:"getCurrent",value:function(t){return t>=this.tracks.length?null:this.tracks[t]}},{key:"addListener",value:function(t){if(!t)throw new Error("listener cannot be null.");this.listeners.push(t)}},{key:"removeListener",value:function(t){var e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)}},{key:"clearListeners",value:function(){this.listeners.length=0}},{key:"clearListenerNotifications",value:function(){this.queue.clear()}}],[{key:"emptyAnimation",value:function(){return t._emptyAnimation}}])}();l(Mt,"_emptyAnimation",new q("<empty>",[],0));var Ft,Pt=h((function t(){s(this,t),l(this,"animation",null),l(this,"previous",null),l(this,"next",null),l(this,"mixingFrom",null),l(this,"mixingTo",null),l(this,"listener",null),l(this,"trackIndex",0),l(this,"loop",!1),l(this,"holdPrevious",!1),l(this,"reverse",!1),l(this,"shortestRotation",!1),l(this,"eventThreshold",0),l(this,"mixAttachmentThreshold",0),l(this,"alphaAttachmentThreshold",0),l(this,"mixDrawOrderThreshold",0),l(this,"animationStart",0),l(this,"animationEnd",0),l(this,"animationLast",0),l(this,"nextAnimationLast",0),l(this,"delay",0),l(this,"trackTime",0),l(this,"trackLast",0),l(this,"nextTrackLast",0),l(this,"trackEnd",0),l(this,"timeScale",0),l(this,"alpha",0),l(this,"mixTime",0),l(this,"_mixDuration",0),l(this,"interruptAlpha",0),l(this,"totalAlpha",0),l(this,"mixBlend",V.replace),l(this,"timelineMode",new Array),l(this,"timelineHoldMix",new Array),l(this,"timelinesRotation",new Array)}),[{key:"mixDuration",get:function(){return this._mixDuration},set:function(t){this._mixDuration=t}},{key:"setMixDurationWithDelay",value:function(t,e){this._mixDuration=t,null!=this.previous&&e<=0&&(e+=this.previous.getTrackComplete()-t),this.delay=e}},{key:"reset",value:function(){this.next=null,this.previous=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0}},{key:"getAnimationTime",value:function(){if(this.loop){var t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)}},{key:"setAnimationLast",value:function(t){this.animationLast=t,this.nextAnimationLast=t}},{key:"isComplete",value:function(){return this.trackTime>=this.animationEnd-this.animationStart}},{key:"resetRotationDirections",value:function(){this.timelinesRotation.length=0}},{key:"getTrackComplete",value:function(){var t=this.animationEnd-this.animationStart;if(0!=t){if(this.loop)return t*(1+(this.trackTime/t|0));if(this.trackTime<t)return t}return this.trackTime}},{key:"wasApplied",value:function(){return-1!=this.nextTrackLast}},{key:"isNextReady",value:function(){return null!=this.next&&this.nextTrackLast-this.next.delay>=0}}]),Yt=h((function t(e){s(this,t),l(this,"objects",[]),l(this,"drainDisabled",!1),l(this,"animState",void 0),this.animState=e}),[{key:"start",value:function(t){this.objects.push(Ft.start),this.objects.push(t),this.animState.animationsChanged=!0}},{key:"interrupt",value:function(t){this.objects.push(Ft.interrupt),this.objects.push(t)}},{key:"end",value:function(t){this.objects.push(Ft.end),this.objects.push(t),this.animState.animationsChanged=!0}},{key:"dispose",value:function(t){this.objects.push(Ft.dispose),this.objects.push(t)}},{key:"complete",value:function(t){this.objects.push(Ft.complete),this.objects.push(t)}},{key:"event",value:function(t,e){this.objects.push(Ft.event),this.objects.push(t),this.objects.push(e)}},{key:"drain",value:function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var t=this.objects,e=this.animState.listeners,n=0;n<t.length;n+=2){var a=t[n],r=t[n+1];switch(a){case Ft.start:r.listener&&r.listener.start&&r.listener.start(r);for(var i=0;i<e.length;i++){var s=e[i];s.start&&s.start(r)}break;case Ft.interrupt:r.listener&&r.listener.interrupt&&r.listener.interrupt(r);for(var o=0;o<e.length;o++){var h=e[o];h.interrupt&&h.interrupt(r)}break;case Ft.end:r.listener&&r.listener.end&&r.listener.end(r);for(var l=0;l<e.length;l++){var c=e[l];c.end&&c.end(r)}case Ft.dispose:r.listener&&r.listener.dispose&&r.listener.dispose(r);for(var u=0;u<e.length;u++){var f=e[u];f.dispose&&f.dispose(r)}this.animState.trackEntryPool.free(r);break;case Ft.complete:r.listener&&r.listener.complete&&r.listener.complete(r);for(var d=0;d<e.length;d++){var v=e[d];v.complete&&v.complete(r)}break;case Ft.event:var m=t[2+n++];r.listener&&r.listener.event&&r.listener.event(r,m);for(var p=0;p<e.length;p++){var g=e[p];g.event&&g.event(r,m)}}}this.clear(),this.drainDisabled=!1}}},{key:"clear",value:function(){this.objects.length=0}}]);!function(t){t[t.start=0]="start",t[t.interrupt=1]="interrupt",t[t.end=2]="end",t[t.dispose=3]="dispose",t[t.complete=4]="complete",t[t.event=5]="event"}(Ft||(Ft={}));var Xt=h((function t(){s(this,t)}),[{key:"start",value:function(t){}},{key:"interrupt",value:function(t){}},{key:"end",value:function(t){}},{key:"dispose",value:function(t){}},{key:"complete",value:function(t){}},{key:"event",value:function(t,e){}}]),Ot=0,Nt=1,Lt=2,_t=3,Bt=4,Dt=1,Vt=2,Ut=h((function t(e){if(s(this,t),l(this,"skeletonData",void 0),l(this,"animationToMixTime",{}),l(this,"defaultMix",0),!e)throw new Error("skeletonData cannot be null.");this.skeletonData=e}),[{key:"setMix",value:function(t,e,n){var a=this.skeletonData.findAnimation(t);if(!a)throw new Error("Animation not found: "+t);var r=this.skeletonData.findAnimation(e);if(!r)throw new Error("Animation not found: "+e);this.setMixWith(a,r,n)}},{key:"setMixWith",value:function(t,e,n){if(!t)throw new Error("from cannot be null.");if(!e)throw new Error("to cannot be null.");var a=t.name+"."+e.name;this.animationToMixTime[a]=n}},{key:"getMix",value:function(t,e){var n=t.name+"."+e.name,a=this.animationToMixTime[n];return void 0===a?this.defaultMix:a}}]);var qt=function(t){function e(t){var n,a,r,i;return s(this,e),a=this,i=[t],r=u(r=e),l(n=d(a,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(r,i||[],u(a).constructor):r.apply(a,i)),"color",new E(1,1,1,1)),n}return c(e,t),h(e,[{key:"copy",value:function(){var t=new e(this.name);return this.copyTo(t),t.color.setFromColor(this.color),t}}])}(N);var Wt=function(t){function e(t){var n,a,r,i;return s(this,e),a=this,i=[t],r=u(r=e),l(n=d(a,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(r,i||[],u(a).constructor):r.apply(a,i)),"endSlot",null),l(n,"color",new E(.2275,.2275,.8078,1)),n}return c(e,t),h(e,[{key:"copy",value:function(){var t=new e(this.name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t}}])}(N);var Gt,zt,jt=h((function t(e){s(this,t),l(this,"_image",void 0),this._image=e}),[{key:"getImage",value:function(){return this._image}}]);!function(t){t[t.Nearest=9728]="Nearest",t[t.Linear=9729]="Linear",t[t.MipMap=9987]="MipMap",t[t.MipMapNearestNearest=9984]="MipMapNearestNearest",t[t.MipMapLinearNearest=9985]="MipMapLinearNearest",t[t.MipMapNearestLinear=9986]="MipMapNearestLinear",t[t.MipMapLinearLinear=9987]="MipMapLinearLinear"}(Gt||(Gt={})),function(t){t[t.MirroredRepeat=33648]="MirroredRepeat",t[t.ClampToEdge=33071]="ClampToEdge",t[t.Repeat=10497]="Repeat"}(zt||(zt={}));var Ht=h((function t(){s(this,t),l(this,"texture",void 0),l(this,"u",0),l(this,"v",0),l(this,"u2",0),l(this,"v2",0),l(this,"width",0),l(this,"height",0),l(this,"degrees",0),l(this,"offsetX",0),l(this,"offsetY",0),l(this,"originalWidth",0),l(this,"originalHeight",0)})),$t=function(t){function e(){return s(this,e),t=this,a=arguments,n=u(n=e),d(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(n,a||[],u(t).constructor):n.apply(t,a));var t,n,a}return c(e,t),h(e,[{key:"setFilters",value:function(t,e){}},{key:"setWraps",value:function(t,e){}},{key:"dispose",value:function(){}}])}(jt);var Jt=h((function t(e){s(this,t),l(this,"pages",new Array),l(this,"regions",new Array);for(var n=new Kt(e),a=new Array(4),r={size:function(t){t.width=parseInt(a[1]),t.height=parseInt(a[2])},format:function(){},filter:function(t){t.minFilter=C.enumValue(Gt,a[1]),t.magFilter=C.enumValue(Gt,a[2])},repeat:function(t){-1!=a[1].indexOf("x")&&(t.uWrap=zt.Repeat),-1!=a[1].indexOf("y")&&(t.vWrap=zt.Repeat)},pma:function(t){t.pma="true"==a[1]}},i={xy:function(t){t.x=parseInt(a[1]),t.y=parseInt(a[2])},size:function(t){t.width=parseInt(a[1]),t.height=parseInt(a[2])},bounds:function(t){t.x=parseInt(a[1]),t.y=parseInt(a[2]),t.width=parseInt(a[3]),t.height=parseInt(a[4])},offset:function(t){t.offsetX=parseInt(a[1]),t.offsetY=parseInt(a[2])},orig:function(t){t.originalWidth=parseInt(a[1]),t.originalHeight=parseInt(a[2])},offsets:function(t){t.offsetX=parseInt(a[1]),t.offsetY=parseInt(a[2]),t.originalWidth=parseInt(a[3]),t.originalHeight=parseInt(a[4])},rotate:function(t){var e=a[1];"true"==e?t.degrees=90:"false"!=e&&(t.degrees=parseInt(e))},index:function(t){t.index=parseInt(a[1])}},o=n.readLine();o&&0==o.trim().length;)o=n.readLine();for(;o&&0!=o.trim().length&&0!=n.readEntry(a,o);)o=n.readLine();for(var h=null,c=null,u=null;null!==o;)if(0==o.trim().length)h=null,o=n.readLine();else if(h){for(var f=new Zt(h,o);;){var d=n.readEntry(a,o=n.readLine());if(0==d)break;var v=i[a[0]];if(v)v(f);else{c||(c=[]),u||(u=[]),c.push(a[0]);for(var m=[],p=0;p<d;p++)m.push(parseInt(a[p+1]));u.push(m)}}0==f.originalWidth&&0==f.originalHeight&&(f.originalWidth=f.width,f.originalHeight=f.height),c&&c.length>0&&u&&u.length>0&&(f.names=c,f.values=u,c=null,u=null),f.u=f.x/h.width,f.v=f.y/h.height,90==f.degrees?(f.u2=(f.x+f.height)/h.width,f.v2=(f.y+f.width)/h.height):(f.u2=(f.x+f.width)/h.width,f.v2=(f.y+f.height)/h.height),this.regions.push(f)}else{for(h=new Qt(o.trim());0!=n.readEntry(a,o=n.readLine());){var g=r[a[0]];g&&g(h)}this.pages.push(h)}}),[{key:"findRegion",value:function(t){for(var e=0;e<this.regions.length;e++)if(this.regions[e].name==t)return this.regions[e];return null}},{key:"setTextures",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=k(this.pages);try{for(a.s();!(e=a.n()).done;){var r=e.value;r.setTexture(t.get(n+r.name))}}catch(t){a.e(t)}finally{a.f()}}},{key:"dispose",value:function(){for(var t=0;t<this.pages.length;t++){var e;null===(e=this.pages[t].texture)||void 0===e||e.dispose()}}}]),Kt=h((function t(e){s(this,t),l(this,"lines",void 0),l(this,"index",0),this.lines=e.split(/\r\n|\r|\n/)}),[{key:"readLine",value:function(){return this.index>=this.lines.length?null:this.lines[this.index++]}},{key:"readEntry",value:function(t,e){if(!e)return 0;if(0==(e=e.trim()).length)return 0;var n=e.indexOf(":");if(-1==n)return 0;t[0]=e.substr(0,n).trim();for(var a=1,r=n+1;;a++){var i=e.indexOf(",",r);if(-1==i)return t[a]=e.substr(r).trim(),a;if(t[a]=e.substr(r,i-r).trim(),r=i+1,4==a)return 4}}}]),Qt=h((function t(e){s(this,t),l(this,"name",void 0),l(this,"minFilter",Gt.Nearest),l(this,"magFilter",Gt.Nearest),l(this,"uWrap",zt.ClampToEdge),l(this,"vWrap",zt.ClampToEdge),l(this,"texture",null),l(this,"width",0),l(this,"height",0),l(this,"pma",!1),l(this,"regions",new Array),this.name=e}),[{key:"setTexture",value:function(t){this.texture=t,t.setFilters(this.minFilter,this.magFilter),t.setWraps(this.uWrap,this.vWrap);var e,n=k(this.regions);try{for(n.s();!(e=n.n()).done;)e.value.texture=t}catch(t){n.e(t)}finally{n.f()}}}]),Zt=function(t){function e(t,n){var a,r,i,o;return s(this,e),r=this,i=u(i=e),l(a=d(r,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(i,[],u(r).constructor):i.apply(r,o)),"page",void 0),l(a,"name",void 0),l(a,"x",0),l(a,"y",0),l(a,"offsetX",0),l(a,"offsetY",0),l(a,"originalWidth",0),l(a,"originalHeight",0),l(a,"index",0),l(a,"degrees",0),l(a,"names",null),l(a,"values",null),a.page=t,a.name=n,t.regions.push(a),a}return c(e,t),h(e)}(Ht);var te=function(t){function e(t,n){var a,r,i,o;return s(this,e),r=this,o=[t],i=u(i=e),l(a=d(r,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(i,o||[],u(r).constructor):i.apply(r,o)),"region",null),l(a,"path",void 0),l(a,"regionUVs",[]),l(a,"uvs",[]),l(a,"triangles",[]),l(a,"color",new E(1,1,1,1)),l(a,"width",0),l(a,"height",0),l(a,"hullLength",0),l(a,"edges",[]),l(a,"parentMesh",null),l(a,"sequence",null),l(a,"tempColor",new E(0,0,0,0)),a.path=n,a}return c(e,t),h(e,[{key:"updateRegion",value:function(){if(!this.region)throw new Error("Region not set.");var t=this.regionUVs;this.uvs&&this.uvs.length==t.length||(this.uvs=C.newFloatArray(t.length));var e=this.uvs,n=this.uvs.length,a=this.region.u,r=this.region.v,i=0,s=0;if(this.region instanceof Zt){var o=this.region,h=o.page,l=h.width,c=h.height;switch(o.degrees){case 90:a-=(o.originalHeight-o.offsetY-o.height)/l,r-=(o.originalWidth-o.offsetX-o.width)/c,i=o.originalHeight/l,s=o.originalWidth/c;for(var u=0;u<n;u+=2)e[u]=a+t[u+1]*i,e[u+1]=r+(1-t[u])*s;return;case 180:a-=(o.originalWidth-o.offsetX-o.width)/l,r-=o.offsetY/c,i=o.originalWidth/l,s=o.originalHeight/c;for(var f=0;f<n;f+=2)e[f]=a+(1-t[f])*i,e[f+1]=r+(1-t[f+1])*s;return;case 270:a-=o.offsetY/l,r-=o.offsetX/c,i=o.originalHeight/l,s=o.originalWidth/c;for(var d=0;d<n;d+=2)e[d]=a+(1-t[d+1])*i,e[d+1]=r+t[d]*s;return}a-=o.offsetX/l,r-=(o.originalHeight-o.offsetY-o.height)/c,i=o.originalWidth/l,s=o.originalHeight/c}else this.region?(i=this.region.u2-a,s=this.region.v2-r):(a=r=0,i=s=1);for(var v=0;v<n;v+=2)e[v]=a+t[v]*i,e[v+1]=r+t[v+1]*s}},{key:"getParentMesh",value:function(){return this.parentMesh}},{key:"setParentMesh",value:function(t){this.parentMesh=t,t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)}},{key:"copy",value:function(){if(this.parentMesh)return this.newLinkedMesh();var t=new e(this.name,this.path);return t.region=this.region,t.color.setFromColor(this.color),this.copyTo(t),t.regionUVs=new Array(this.regionUVs.length),C.arrayCopy(this.regionUVs,0,t.regionUVs,0,this.regionUVs.length),t.uvs=new Array(this.uvs.length),C.arrayCopy(this.uvs,0,t.uvs,0,this.uvs.length),t.triangles=new Array(this.triangles.length),C.arrayCopy(this.triangles,0,t.triangles,0,this.triangles.length),t.hullLength=this.hullLength,t.sequence=null!=this.sequence?this.sequence.copy():null,this.edges&&(t.edges=new Array(this.edges.length),C.arrayCopy(this.edges,0,t.edges,0,this.edges.length)),t.width=this.width,t.height=this.height,t}},{key:"computeWorldVertices",value:function(t,n,a,r,i,s){null!=this.sequence&&this.sequence.apply(t,this),v(u(e.prototype),"computeWorldVertices",this).call(this,t,n,a,r,i,s)}},{key:"newLinkedMesh",value:function(){var t=new e(this.name,this.path);return t.region=this.region,t.color.setFromColor(this.color),t.timelineAttachment=this.timelineAttachment,t.setParentMesh(this.parentMesh?this.parentMesh:this),null!=t.region&&t.updateRegion(),t}}])}(N);var ee=function(t){function e(t){var n,a,r,i;return s(this,e),a=this,i=[t],r=u(r=e),l(n=d(a,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(r,i||[],u(a).constructor):r.apply(a,i)),"lengths",[]),l(n,"closed",!1),l(n,"constantSpeed",!1),l(n,"color",new E(1,1,1,1)),n}return c(e,t),h(e,[{key:"copy",value:function(){var t=new e(this.name);return this.copyTo(t),t.lengths=new Array(this.lengths.length),C.arrayCopy(this.lengths,0,t.lengths,0,this.lengths.length),t.closed=closed,t.constantSpeed=this.constantSpeed,t.color.setFromColor(this.color),t}}])}(N);var ne=function(t){function e(t){var n,a,r,i;return s(this,e),a=this,i=[t],r=u(r=e),l(n=d(a,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(r,i||[],u(a).constructor):r.apply(a,i)),"x",0),l(n,"y",0),l(n,"rotation",0),l(n,"color",new E(.38,.94,0,1)),n}return c(e,t),h(e,[{key:"computeWorldPosition",value:function(t,e){return e.x=this.x*t.a+this.y*t.b+t.worldX,e.y=this.x*t.c+this.y*t.d+t.worldY,e}},{key:"computeWorldRotation",value:function(t){var e=this.rotation*A.degRad,n=Math.cos(e),a=Math.sin(e),r=n*t.a+a*t.b,i=n*t.c+a*t.d;return A.atan2Deg(i,r)}},{key:"copy",value:function(){var t=new e(this.name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t}}])}(N);var ae=function(t){function e(t,n){var a,r,i,o;return s(this,e),r=this,o=[t],i=u(i=e),l(a=d(r,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(i,o||[],u(r).constructor):i.apply(r,o)),"x",0),l(a,"y",0),l(a,"scaleX",1),l(a,"scaleY",1),l(a,"rotation",0),l(a,"width",0),l(a,"height",0),l(a,"color",new E(1,1,1,1)),l(a,"path",void 0),l(a,"region",null),l(a,"sequence",null),l(a,"offset",C.newFloatArray(8)),l(a,"uvs",C.newFloatArray(8)),l(a,"tempColor",new E(1,1,1,1)),a.path=n,a}return c(e,t),h(e,[{key:"updateRegion",value:function(){if(!this.region)throw new Error("Region not set.");var t=this.region,e=this.uvs;if(null==t)return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=1,e[5]=1,e[6]=1,void(e[7]=0);var n=this.width/this.region.originalWidth*this.scaleX,a=this.height/this.region.originalHeight*this.scaleY,r=-this.width/2*this.scaleX+this.region.offsetX*n,i=-this.height/2*this.scaleY+this.region.offsetY*a,s=r+this.region.width*n,o=i+this.region.height*a,h=this.rotation*A.degRad,l=Math.cos(h),c=Math.sin(h),u=this.x,f=this.y,d=r*l+u,v=r*c,m=i*l+f,p=i*c,g=s*l+u,y=s*c,k=o*l+f,w=o*c,b=this.offset;b[0]=d-p,b[1]=m+v,b[2]=d-w,b[3]=k+v,b[4]=g-w,b[5]=k+y,b[6]=g-p,b[7]=m+y,90==t.degrees?(e[0]=t.u2,e[1]=t.v2,e[2]=t.u,e[3]=t.v2,e[4]=t.u,e[5]=t.v,e[6]=t.u2,e[7]=t.v):(e[0]=t.u,e[1]=t.v2,e[2]=t.u,e[3]=t.v,e[4]=t.u2,e[5]=t.v,e[6]=t.u2,e[7]=t.v2)}},{key:"computeWorldVertices",value:function(t,e,n,a){null!=this.sequence&&this.sequence.apply(t,this);var r=t.bone,i=this.offset,s=r.worldX,o=r.worldY,h=r.a,l=r.b,c=r.c,u=r.d,f=0,d=0;f=i[0],d=i[1],e[n]=f*h+d*l+s,e[n+1]=f*c+d*u+o,n+=a,f=i[2],d=i[3],e[n]=f*h+d*l+s,e[n+1]=f*c+d*u+o,n+=a,f=i[4],d=i[5],e[n]=f*h+d*l+s,e[n+1]=f*c+d*u+o,n+=a,f=i[6],d=i[7],e[n]=f*h+d*l+s,e[n+1]=f*c+d*u+o}},{key:"copy",value:function(){var t=new e(this.name,this.path);return t.region=this.region,t.x=this.x,t.y=this.y,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.rotation=this.rotation,t.width=this.width,t.height=this.height,C.arrayCopy(this.uvs,0,t.uvs,0,8),C.arrayCopy(this.offset,0,t.offset,0,8),t.color.setFromColor(this.color),t.sequence=null!=this.sequence?this.sequence.copy():null,t}}])}(O);l(ae,"X1",0),l(ae,"Y1",1),l(ae,"C1R",2),l(ae,"C1G",3),l(ae,"C1B",4),l(ae,"C1A",5),l(ae,"U1",6),l(ae,"V1",7),l(ae,"X2",8),l(ae,"Y2",9),l(ae,"C2R",10),l(ae,"C2G",11),l(ae,"C2B",12),l(ae,"C2A",13),l(ae,"U2",14),l(ae,"V2",15),l(ae,"X3",16),l(ae,"Y3",17),l(ae,"C3R",18),l(ae,"C3G",19),l(ae,"C3B",20),l(ae,"C3A",21),l(ae,"U3",22),l(ae,"V3",23),l(ae,"X4",24),l(ae,"Y4",25),l(ae,"C4R",26),l(ae,"C4G",27),l(ae,"C4B",28),l(ae,"C4A",29),l(ae,"U4",30),l(ae,"V4",31);var re,ie=h((function t(e){s(this,t),l(this,"atlas",void 0),this.atlas=e}),[{key:"loadSequence",value:function(t,e,n){for(var a=n.regions,r=0,i=a.length;r<i;r++){var s=n.getPath(e,r),o=this.atlas.findRegion(s);if(null==o)throw new Error("Region not found in atlas: "+s+" (sequence: "+t+")");a[r]=o}}},{key:"newRegionAttachment",value:function(t,e,n,a){var r=new ae(e,n);if(null!=a)this.loadSequence(e,n,a);else{var i=this.atlas.findRegion(n);if(!i)throw new Error("Region not found in atlas: "+n+" (region attachment: "+e+")");r.region=i}return r}},{key:"newMeshAttachment",value:function(t,e,n,a){var r=new te(e,n);if(null!=a)this.loadSequence(e,n,a);else{var i=this.atlas.findRegion(n);if(!i)throw new Error("Region not found in atlas: "+n+" (mesh attachment: "+e+")");r.region=i}return r}},{key:"newBoundingBoxAttachment",value:function(t,e){return new qt(e)}},{key:"newPathAttachment",value:function(t,e){return new ee(e)}},{key:"newPointAttachment",value:function(t,e){return new ne(e)}},{key:"newClippingAttachment",value:function(t,e){return new Wt(e)}}]),se=h((function t(e,n,a){if(s(this,t),l(this,"index",0),l(this,"name",void 0),l(this,"parent",null),l(this,"length",0),l(this,"x",0),l(this,"y",0),l(this,"rotation",0),l(this,"scaleX",1),l(this,"scaleY",1),l(this,"shearX",0),l(this,"shearY",0),l(this,"inherit",re.Normal),l(this,"skinRequired",!1),l(this,"color",new E),l(this,"icon",void 0),l(this,"visible",!1),e<0)throw new Error("index must be >= 0.");if(!n)throw new Error("name cannot be null.");this.index=e,this.name=n,this.parent=a}));!function(t){t[t.Normal=0]="Normal",t[t.OnlyTranslation=1]="OnlyTranslation",t[t.NoRotationOrReflection=2]="NoRotationOrReflection",t[t.NoScale=3]="NoScale",t[t.NoScaleOrReflection=4]="NoScaleOrReflection"}(re||(re={}));var oe=h((function t(e,n,a){if(s(this,t),l(this,"data",void 0),l(this,"skeleton",void 0),l(this,"parent",null),l(this,"children",new Array),l(this,"x",0),l(this,"y",0),l(this,"rotation",0),l(this,"scaleX",0),l(this,"scaleY",0),l(this,"shearX",0),l(this,"shearY",0),l(this,"ax",0),l(this,"ay",0),l(this,"arotation",0),l(this,"ascaleX",0),l(this,"ascaleY",0),l(this,"ashearX",0),l(this,"ashearY",0),l(this,"a",0),l(this,"b",0),l(this,"c",0),l(this,"d",0),l(this,"worldY",0),l(this,"worldX",0),l(this,"inherit",re.Normal),l(this,"sorted",!1),l(this,"active",!1),!e)throw new Error("data cannot be null.");if(!n)throw new Error("skeleton cannot be null.");this.data=e,this.skeleton=n,this.parent=a,this.setToSetupPose()}),[{key:"isActive",value:function(){return this.active}},{key:"update",value:function(t){this.updateWorldTransformWith(this.ax,this.ay,this.arotation,this.ascaleX,this.ascaleY,this.ashearX,this.ashearY)}},{key:"updateWorldTransform",value:function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)}},{key:"updateWorldTransformWith",value:function(t,e,n,a,r,i,s){this.ax=t,this.ay=e,this.arotation=n,this.ascaleX=a,this.ascaleY=r,this.ashearX=i,this.ashearY=s;var o=this.parent;if(!o){var h=this.skeleton,l=h.scaleX,c=h.scaleY,u=(n+i)*A.degRad,f=(n+90+s)*A.degRad;return this.a=Math.cos(u)*a*l,this.b=Math.cos(f)*r*l,this.c=Math.sin(u)*a*c,this.d=Math.sin(f)*r*c,this.worldX=t*l+h.x,void(this.worldY=e*c+h.y)}var d=o.a,v=o.b,m=o.c,p=o.d;switch(this.worldX=d*t+v*e+o.worldX,this.worldY=m*t+p*e+o.worldY,this.inherit){case re.Normal:var g=(n+i)*A.degRad,y=(n+90+s)*A.degRad,k=Math.cos(g)*a,w=Math.cos(y)*r,b=Math.sin(g)*a,x=Math.sin(y)*r;return this.a=d*k+v*b,this.b=d*w+v*x,this.c=m*k+p*b,void(this.d=m*w+p*x);case re.OnlyTranslation:var I=(n+i)*A.degRad,E=(n+90+s)*A.degRad;this.a=Math.cos(I)*a,this.b=Math.cos(E)*r,this.c=Math.sin(I)*a,this.d=Math.sin(E)*r;break;case re.NoRotationOrReflection:var S=d*d+m*m,R=0;S>1e-4?(S=Math.abs(d*p-v*m)/S,d/=this.skeleton.scaleX,v=(m/=this.skeleton.scaleY)*S,p=d*S,R=Math.atan2(m,d)*A.radDeg):(d=0,m=0,R=90-Math.atan2(p,v)*A.radDeg);var T=(n+i-R)*A.degRad,C=(n+s-R+90)*A.degRad,M=Math.cos(T)*a,F=Math.cos(C)*r,P=Math.sin(T)*a,Y=Math.sin(C)*r;this.a=d*M-v*P,this.b=d*F-v*Y,this.c=m*M+p*P,this.d=m*F+p*Y;break;case re.NoScale:case re.NoScaleOrReflection:n*=A.degRad;var X=Math.cos(n),O=Math.sin(n),N=(d*X+v*O)/this.skeleton.scaleX,L=(m*X+p*O)/this.skeleton.scaleY,_=Math.sqrt(N*N+L*L);_>1e-5&&(_=1/_),N*=_,L*=_,_=Math.sqrt(N*N+L*L),this.inherit==re.NoScale&&d*p-v*m<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(_=-_),n=Math.PI/2+Math.atan2(L,N);var B=Math.cos(n)*_,D=Math.sin(n)*_;i*=A.degRad,s=(90+s)*A.degRad;var V=Math.cos(i)*a,U=Math.cos(s)*r,q=Math.sin(i)*a,W=Math.sin(s)*r;this.a=N*V+B*q,this.b=N*U+B*W,this.c=L*V+D*q,this.d=L*U+D*W}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY}},{key:"setToSetupPose",value:function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY,this.inherit=t.inherit}},{key:"updateAppliedTransform",value:function(){var t=this.parent;if(!t)return this.ax=this.worldX-this.skeleton.x,this.ay=this.worldY-this.skeleton.y,this.arotation=Math.atan2(this.c,this.a)*A.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,void(this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*A.radDeg);var e,n,a,r,i=t.a,s=t.b,o=t.c,h=t.d,l=1/(i*h-s*o),c=h*l,u=s*l,f=o*l,d=i*l,v=this.worldX-t.worldX,m=this.worldY-t.worldY;if(this.ax=v*c-m*u,this.ay=m*d-v*f,this.inherit==re.OnlyTranslation)e=this.a,n=this.b,a=this.c,r=this.d;else{switch(this.inherit){case re.NoRotationOrReflection:var p=Math.abs(i*h-s*o)/(i*i+o*o),g=i/this.skeleton.scaleX;s=-o/this.skeleton.scaleY*p*this.skeleton.scaleX,c=(h=g*p*this.skeleton.scaleY)*(l=1/(i*h-s*o)),u=s*l;break;case re.NoScale:case re.NoScaleOrReflection:var y=A.cosDeg(this.rotation),k=A.sinDeg(this.rotation);i=(i*y+s*k)/this.skeleton.scaleX,o=(o*y+h*k)/this.skeleton.scaleY;var w=Math.sqrt(i*i+o*o);w>1e-5&&(w=1/w),i*=w,o*=w,w=Math.sqrt(i*i+o*o),this.inherit==re.NoScale&&l<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(w=-w);var b=A.PI/2+Math.atan2(o,i);s=Math.cos(b)*w,c=(h=Math.sin(b)*w)*(l=1/(i*h-s*o)),u=s*l,f=o*l,d=i*l}e=c*this.a-u*this.c,n=c*this.b-u*this.d,a=d*this.c-f*this.a,r=d*this.d-f*this.b}if(this.ashearX=0,this.ascaleX=Math.sqrt(e*e+a*a),this.ascaleX>1e-4){var x=e*r-n*a;this.ascaleY=x/this.ascaleX,this.ashearY=-Math.atan2(e*n+a*r,x)*A.radDeg,this.arotation=Math.atan2(a,e)*A.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(n*n+r*r),this.ashearY=0,this.arotation=90-Math.atan2(r,n)*A.radDeg}},{key:"getWorldRotationX",value:function(){return Math.atan2(this.c,this.a)*A.radDeg}},{key:"getWorldRotationY",value:function(){return Math.atan2(this.d,this.b)*A.radDeg}},{key:"getWorldScaleX",value:function(){return Math.sqrt(this.a*this.a+this.c*this.c)}},{key:"getWorldScaleY",value:function(){return Math.sqrt(this.b*this.b+this.d*this.d)}},{key:"worldToLocal",value:function(t){var e=1/(this.a*this.d-this.b*this.c),n=t.x-this.worldX,a=t.y-this.worldY;return t.x=n*this.d*e-a*this.b*e,t.y=a*this.a*e-n*this.c*e,t}},{key:"localToWorld",value:function(t){var e=t.x,n=t.y;return t.x=e*this.a+n*this.b+this.worldX,t.y=e*this.c+n*this.d+this.worldY,t}},{key:"worldToParent",value:function(t){if(null==t)throw new Error("world cannot be null.");return null==this.parent?t:this.parent.worldToLocal(t)}},{key:"parentToWorld",value:function(t){if(null==t)throw new Error("world cannot be null.");return null==this.parent?t:this.parent.localToWorld(t)}},{key:"worldToLocalRotation",value:function(t){var e=A.sinDeg(t),n=A.cosDeg(t);return Math.atan2(this.a*e-this.c*n,this.d*n-this.b*e)*A.radDeg+this.rotation-this.shearX}},{key:"localToWorldRotation",value:function(t){t-=this.rotation-this.shearX;var e=A.sinDeg(t),n=A.cosDeg(t);return Math.atan2(n*this.c+e*this.d,n*this.a+e*this.b)*A.radDeg}},{key:"rotateWorld",value:function(t){t*=A.degRad;var e=Math.sin(t),n=Math.cos(t),a=this.a,r=this.b;this.a=n*a-e*this.c,this.b=n*r-e*this.d,this.c=e*a+n*this.c,this.d=e*r+n*this.d}}]),he=h((function t(e,n,a){s(this,t),l(this,"name",void 0),l(this,"order",void 0),l(this,"skinRequired",void 0),this.name=e,this.order=n,this.skinRequired=a})),le=h((function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new ce;s(this,t),l(this,"pathPrefix",""),l(this,"textureLoader",void 0),l(this,"downloader",void 0),l(this,"assets",{}),l(this,"errors",{}),l(this,"toLoad",0),l(this,"loaded",0),this.textureLoader=e,this.pathPrefix=n,this.downloader=a}),[{key:"start",value:function(t){return this.toLoad++,this.pathPrefix+t}},{key:"success",value:function(t,e,n){this.toLoad--,this.loaded++,this.assets[e]=n,t&&t(e,n)}},{key:"error",value:function(t,e,n){this.toLoad--,this.loaded++,this.errors[e]=n,t&&t(e,n)}},{key:"loadAll",value:function(){var t=this;return new Promise((function(e,n){requestAnimationFrame((function a(){t.isLoadingComplete()?t.hasErrors()?n(t.errors):e(t):requestAnimationFrame(a)}))}))}},{key:"setRawDataURI",value:function(t,e){this.downloader.rawDataUris[this.pathPrefix+t]=e}},{key:"loadBinary",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};t=this.start(t),this.downloader.downloadBinary(t,(function(a){e.success(n,t,a)}),(function(n,r){e.error(a,t,"Couldn't load binary ".concat(t,": status ").concat(n,", ").concat(r))}))}},{key:"loadText",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};t=this.start(t),this.downloader.downloadText(t,(function(a){e.success(n,t,a)}),(function(n,r){e.error(a,t,"Couldn't load text ".concat(t,": status ").concat(n,", ").concat(r))}))}},{key:"loadJson",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};t=this.start(t),this.downloader.downloadJson(t,(function(a){e.success(n,t,a)}),(function(n,r){e.error(a,t,"Couldn't load JSON ".concat(t,": status ").concat(n,", ").concat(r))}))}},{key:"loadTexture",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(t=this.start(t),"undefined"!=typeof window&&"undefined"!=typeof navigator&&window.document){var r=new Image;r.crossOrigin="anonymous",r.onload=function(){e.success(n,t,e.textureLoader(r))},r.onerror=function(){e.error(a,t,"Couldn't load image: ".concat(t))},this.downloader.rawDataUris[t]&&(t=this.downloader.rawDataUris[t]),r.src=t}else fetch(t,{mode:"cors"}).then((function(n){return n.ok?n.blob():(e.error(a,t,"Couldn't load image: ".concat(t)),null)})).then((function(t){return t?createImageBitmap(t,{premultiplyAlpha:"none",colorSpaceConversion:"none"}):null})).then((function(a){a&&e.success(n,t,e.textureLoader(a))}))}},{key:"loadTextureAtlas",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=arguments.length>3?arguments[3]:void 0,i=t.lastIndexOf("/"),s=i>=0?t.substring(0,i+1):"";t=this.start(t),this.downloader.downloadText(t,(function(i){try{var o,h=new Jt(i),l=h.pages.length,c=!1,u=k(h.pages);try{var f=function(){var i=o.value;e.loadTexture(r?r[i.name]:s+i.name,(function(a,r){c||(i.setTexture(r),0==--l&&e.success(n,t,h))}),(function(n,r){c||e.error(a,t,"Couldn't load texture atlas ".concat(t," page image: ").concat(n)),c=!0}))};for(u.s();!(o=u.n()).done;)f()}catch(t){u.e(t)}finally{u.f()}}catch(n){e.error(a,t,"Couldn't parse texture atlas ".concat(t,": ").concat(n.message))}}),(function(n,r){e.error(a,t,"Couldn't load texture atlas ".concat(t,": status ").concat(n,", ").concat(r))}))}},{key:"get",value:function(t){return this.assets[this.pathPrefix+t]}},{key:"require",value:function(t){t=this.pathPrefix+t;var e=this.assets[t];if(e)return e;var n=this.errors[t];throw Error("Asset not found: "+t+(n?"\n"+n:""))}},{key:"remove",value:function(t){t=this.pathPrefix+t;var e=this.assets[t];return e.dispose&&e.dispose(),delete this.assets[t],e}},{key:"removeAll",value:function(){for(var t in this.assets){var e=this.assets[t];e.dispose&&e.dispose()}this.assets={}}},{key:"isLoadingComplete",value:function(){return 0==this.toLoad}},{key:"getToLoad",value:function(){return this.toLoad}},{key:"getLoaded",value:function(){return this.loaded}},{key:"dispose",value:function(){this.removeAll()}},{key:"hasErrors",value:function(){return Object.keys(this.errors).length>0}},{key:"getErrors",value:function(){return this.errors}}]),ce=h((function t(){s(this,t),l(this,"callbacks",{}),l(this,"rawDataUris",{})}),[{key:"dataUriToString",value:function(t){if(!t.startsWith("data:"))throw new Error("Not a data URI.");var e=t.indexOf("base64,");return-1!=e?(e+=7,atob(t.substr(e))):t.substr(t.indexOf(",")+1)}},{key:"base64ToUint8Array",value:function(t){for(var e=window.atob(t),n=e.length,a=new Uint8Array(n),r=0;r<n;r++)a[r]=e.charCodeAt(r);return a}},{key:"dataUriToUint8Array",value:function(t){if(!t.startsWith("data:"))throw new Error("Not a data URI.");var e=t.indexOf("base64,");if(-1==e)throw new Error("Not a binary data URI.");return e+=7,this.base64ToUint8Array(t.substr(e))}},{key:"downloadText",value:function(t,e,n){var a=this;if(!this.start(t,e,n))if(this.rawDataUris[t])try{var r=this.rawDataUris[t];this.finish(t,200,this.dataUriToString(r))}catch(e){this.finish(t,400,JSON.stringify(e))}else{var i=new XMLHttpRequest;i.overrideMimeType("text/html"),i.open("GET",t,!0);var s=function(){a.finish(t,i.status,i.responseText)};i.onload=s,i.onerror=s,i.send()}}},{key:"downloadJson",value:function(t,e,n){this.downloadText(t,(function(t){e(JSON.parse(t))}),n)}},{key:"downloadBinary",value:function(t,e,n){var a=this;if(!this.start(t,e,n))if(this.rawDataUris[t])try{var r=this.rawDataUris[t];this.finish(t,200,this.dataUriToUint8Array(r))}catch(e){this.finish(t,400,JSON.stringify(e))}else{var i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="arraybuffer";var s=function(){a.finish(t,i.status,i.response)};i.onload=function(){200==i.status||0==i.status?a.finish(t,200,new Uint8Array(i.response)):s()},i.onerror=s,i.send()}}},{key:"start",value:function(t,e,n){var a=this.callbacks[t];try{if(a)return!0;this.callbacks[t]=a=[]}finally{a.push(e,n)}}},{key:"finish",value:function(t,e,n){var a=this.callbacks[t];delete this.callbacks[t];for(var r=200==e||0==e?[n]:[e,n],i=r.length-1,s=a.length;i<s;i+=2)a[i].apply(null,r)}}]),ue=h((function t(e,n){if(s(this,t),l(this,"data",void 0),l(this,"intValue",0),l(this,"floatValue",0),l(this,"stringValue",null),l(this,"time",0),l(this,"volume",0),l(this,"balance",0),!n)throw new Error("data cannot be null.");this.time=e,this.data=n})),fe=h((function t(e){s(this,t),l(this,"name",void 0),l(this,"intValue",0),l(this,"floatValue",0),l(this,"stringValue",null),l(this,"audioPath",null),l(this,"volume",0),l(this,"balance",0),this.name=e})),de=h((function t(e,n){if(s(this,t),l(this,"data",void 0),l(this,"bones",void 0),l(this,"target",void 0),l(this,"bendDirection",0),l(this,"compress",!1),l(this,"stretch",!1),l(this,"mix",1),l(this,"softness",0),l(this,"active",!1),!e)throw new Error("data cannot be null.");if(!n)throw new Error("skeleton cannot be null.");this.data=e,this.bones=new Array;for(var a=0;a<e.bones.length;a++){var r=n.findBone(e.bones[a].name);if(!r)throw new Error("Couldn't find bone ".concat(e.bones[a].name));this.bones.push(r)}var i=n.findBone(e.target.name);if(!i)throw new Error("Couldn't find bone ".concat(e.target.name));this.target=i,this.mix=e.mix,this.softness=e.softness,this.bendDirection=e.bendDirection,this.compress=e.compress,this.stretch=e.stretch}),[{key:"isActive",value:function(){return this.active}},{key:"setToSetupPose",value:function(){var t=this.data;this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch}},{key:"update",value:function(t){if(0!=this.mix){var e=this.target,n=this.bones;switch(n.length){case 1:this.apply1(n[0],e.worldX,e.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(n[0],n[1],e.worldX,e.worldY,this.bendDirection,this.stretch,this.data.uniform,this.softness,this.mix)}}}},{key:"apply1",value:function(t,e,n,a,r,i,s){var o=t.parent;if(!o)throw new Error("IK bone must have parent.");var h=o.a,l=o.b,c=o.c,u=o.d,f=-t.ashearX-t.arotation,d=0,v=0;switch(t.inherit){case re.OnlyTranslation:d=(e-t.worldX)*A.signum(t.skeleton.scaleX),v=(n-t.worldY)*A.signum(t.skeleton.scaleY);break;case re.NoRotationOrReflection:var m=Math.abs(h*u-l*c)/Math.max(1e-4,h*h+c*c),p=h/t.skeleton.scaleX,g=c/t.skeleton.scaleY;l=-g*m*t.skeleton.scaleX,u=p*m*t.skeleton.scaleY,f+=Math.atan2(g,p)*A.radDeg;default:var y=e-o.worldX,k=n-o.worldY,w=h*u-l*c;Math.abs(w)<=1e-4?(d=0,v=0):(d=(y*u-k*l)/w-t.ax,v=(k*h-y*c)/w-t.ay)}f+=Math.atan2(v,d)*A.radDeg,t.ascaleX<0&&(f+=180),f>180?f-=360:f<-180&&(f+=360);var b=t.ascaleX,x=t.ascaleY;if(a||r){switch(t.inherit){case re.NoScale:case re.NoScaleOrReflection:d=e-t.worldX,v=n-t.worldY}var I=t.data.length*b;if(I>1e-4){var E=d*d+v*v;if(a&&E<I*I||r&&E>I*I){var S=(Math.sqrt(E)/I-1)*s+1;b*=S,i&&(x*=S)}}}t.updateWorldTransformWith(t.ax,t.ay,t.arotation+f*s,b,x,t.ashearX,t.ashearY)}},{key:"apply2",value:function(t,e,n,a,r,i,s,o,h){if(t.inherit==re.Normal&&e.inherit==re.Normal){var l=t.ax,c=t.ay,u=t.ascaleX,f=t.ascaleY,d=u,v=f,m=e.ascaleX,p=0,g=0,y=0;u<0?(u=-u,p=180,y=-1):(p=0,y=1),f<0&&(f=-f,y=-y),m<0?(m=-m,g=180):g=0;var k=e.ax,w=0,b=0,x=0,I=t.a,E=t.b,S=t.c,R=t.d,T=Math.abs(u-f)<=1e-4;!T||i?(w=0,b=I*k+t.worldX,x=S*k+t.worldY):(b=I*k+E*(w=e.ay)+t.worldX,x=S*k+R*w+t.worldY);var C=t.parent;if(!C)throw new Error("IK parent must itself have a parent.");I=C.a,E=C.b,S=C.c;var M,F,P=I*(R=C.d)-E*S,Y=b-C.worldX,X=x-C.worldY,O=(Y*R-X*E)*(P=Math.abs(P)<=1e-4?0:1/P)-l,N=(X*I-Y*S)*P-c,L=Math.sqrt(O*O+N*N),_=e.data.length*m;if(L<1e-4)return this.apply1(t,n,a,!1,i,!1,h),void e.updateWorldTransformWith(k,w,0,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY);var B=((Y=n-C.worldX)*R-(X=a-C.worldY)*E)*P-l,D=(X*I-Y*S)*P-c,V=B*B+D*D;if(0!=o){o*=u*(m+1)*.5;var U=Math.sqrt(V),q=U-L-_*u+o;if(q>0){var W=Math.min(1,q/(2*o))-1;V=(B-=(W=(q-o*(1-W*W))/U)*B)*B+(D-=W*D)*D}}t:if(T){var G=(V-L*L-(_*=u)*_)/(2*L*_);G<-1?(G=-1,F=Math.PI*r):G>1?(G=1,F=0,i&&(d*=I=(Math.sqrt(V)/(L+_)-1)*h+1,s&&(v*=I))):F=Math.acos(G)*r,I=L+_*G,E=_*Math.sin(F),M=Math.atan2(D*I-B*E,B*I+D*E)}else{var z=(I=u*_)*I,j=(E=f*_)*E,H=Math.atan2(D,B),$=-2*j*L,J=j-z;if((R=$*$-4*J*(S=j*L*L+z*V-z*j))>=0){var K=Math.sqrt(R);$<0&&(K=-K);var Q=(K=.5*-($+K))/J,Z=S/K,tt=Math.abs(Q)<Math.abs(Z)?Q:Z;if(tt*tt<=V){X=Math.sqrt(V-tt*tt)*r,M=H-Math.atan2(X,tt),F=Math.atan2(X/f,(tt-L)/u);break t}}var et=A.PI,nt=L-I,at=nt*nt,rt=0,it=0,st=L+I,ot=st*st,ht=0;(S=-I*L/(z-j))>=-1&&S<=1&&(S=Math.acos(S),(R=(Y=I*Math.cos(S)+L)*Y+(X=E*Math.sin(S))*X)<at&&(et=S,at=R,nt=Y,rt=X),R>ot&&(it=S,ot=R,st=Y,ht=X)),V<=.5*(at+ot)?(M=H-Math.atan2(rt*r,nt),F=et*r):(M=H-Math.atan2(ht*r,st),F=it*r)}var lt=Math.atan2(w,k)*y,ct=t.arotation;(M=(M-lt)*A.radDeg+p-ct)>180?M-=360:M<-180&&(M+=360),t.updateWorldTransformWith(l,c,ct+M*h,d,v,0,0),ct=e.arotation,(F=((F+lt)*A.radDeg-e.ashearX)*y+g-ct)>180?F-=360:F<-180&&(F+=360),e.updateWorldTransformWith(k,w,ct+F*h,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)}}}]);var ve=function(t){function e(t){var n,a,r,i;return s(this,e),a=this,i=[t,0,!1],r=u(r=e),l(n=d(a,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(r,i||[],u(a).constructor):r.apply(a,i)),"bones",new Array),l(n,"_target",null),l(n,"bendDirection",0),l(n,"compress",!1),l(n,"stretch",!1),l(n,"uniform",!1),l(n,"mix",0),l(n,"softness",0),n}return c(e,t),h(e,[{key:"target",get:function(){if(this._target)return this._target;throw new Error("BoneData not set.")},set:function(t){this._target=t}}])}(he);var me,pe,ge,ye=function(t){function e(t){var n,a,r,i;return s(this,e),a=this,i=[t,0,!1],r=u(r=e),l(n=d(a,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(r,i||[],u(a).constructor):r.apply(a,i)),"bones",new Array),l(n,"_target",null),l(n,"positionMode",me.Fixed),l(n,"spacingMode",pe.Fixed),l(n,"rotateMode",ge.Chain),l(n,"offsetRotation",0),l(n,"position",0),l(n,"spacing",0),l(n,"mixRotate",0),l(n,"mixX",0),l(n,"mixY",0),n}return c(e,t),h(e,[{key:"target",get:function(){if(this._target)return this._target;throw new Error("SlotData not set.")},set:function(t){this._target=t}}])}(he);!function(t){t[t.Fixed=0]="Fixed",t[t.Percent=1]="Percent"}(me||(me={})),function(t){t[t.Length=0]="Length",t[t.Fixed=1]="Fixed",t[t.Percent=2]="Percent",t[t.Proportional=3]="Proportional"}(pe||(pe={})),function(t){t[t.Tangent=0]="Tangent",t[t.Chain=1]="Chain",t[t.ChainScale=2]="ChainScale"}(ge||(ge={}));var ke=function(){function t(e,n){if(s(this,t),l(this,"data",void 0),l(this,"bones",void 0),l(this,"target",void 0),l(this,"position",0),l(this,"spacing",0),l(this,"mixRotate",0),l(this,"mixX",0),l(this,"mixY",0),l(this,"spaces",new Array),l(this,"positions",new Array),l(this,"world",new Array),l(this,"curves",new Array),l(this,"lengths",new Array),l(this,"segments",new Array),l(this,"active",!1),!e)throw new Error("data cannot be null.");if(!n)throw new Error("skeleton cannot be null.");this.data=e,this.bones=new Array;for(var a=0,r=e.bones.length;a<r;a++){var i=n.findBone(e.bones[a].name);if(!i)throw new Error("Couldn't find bone ".concat(e.bones[a].name,"."));this.bones.push(i)}var o=n.findSlot(e.target.name);if(!o)throw new Error("Couldn't find target bone ".concat(e.target.name));this.target=o,this.position=e.position,this.spacing=e.spacing,this.mixRotate=e.mixRotate,this.mixX=e.mixX,this.mixY=e.mixY}return h(t,[{key:"isActive",value:function(){return this.active}},{key:"setToSetupPose",value:function(){var t=this.data;this.position=t.position,this.spacing=t.spacing,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY}},{key:"update",value:function(e){var n=this.target.getAttachment();if(n instanceof ee){var a=this.mixRotate,r=this.mixX,i=this.mixY;if(0!=a||0!=r||0!=i){var s=this.data,o=s.rotateMode==ge.Tangent,h=s.rotateMode==ge.ChainScale,l=this.bones,c=l.length,u=o?c:c+1,f=C.setArraySize(this.spaces,u),d=h?this.lengths=C.setArraySize(this.lengths,c):[],v=this.spacing;switch(s.spacingMode){case pe.Percent:if(h)for(var m=0,p=u-1;m<p;m++){var g=l[m],y=g.data.length,k=y*g.a,w=y*g.c;d[m]=Math.sqrt(k*k+w*w)}C.arrayFill(f,1,u,v);break;case pe.Proportional:for(var b=0,x=0,I=u-1;x<I;){var E=l[x],S=E.data.length;if(S<t.epsilon)h&&(d[x]=0),f[++x]=v;else{var R=S*E.a,T=S*E.c,M=Math.sqrt(R*R+T*T);h&&(d[x]=M),f[++x]=M,b+=M}}if(b>0){b=u/b*v;for(var F=1;F<u;F++)f[F]*=b}break;default:for(var P=s.spacingMode==pe.Length,Y=0,X=u-1;Y<X;){var O=l[Y],N=O.data.length;if(N<t.epsilon)h&&(d[Y]=0),f[++Y]=v;else{var L=N*O.a,_=N*O.c,B=Math.sqrt(L*L+_*_);h&&(d[Y]=B),f[++Y]=(P?N+v:v)*B/N}}}var D=this.computeWorldPositions(n,u,o),V=D[0],U=D[1],q=s.offsetRotation,W=!1;if(0==q)W=s.rotateMode==ge.Chain;else{W=!1;var G=this.target.bone;q*=G.a*G.d-G.b*G.c>0?A.degRad:-A.degRad}for(var z=0,j=3;z<c;z++,j+=3){var H=l[z];H.worldX+=(V-H.worldX)*r,H.worldY+=(U-H.worldY)*i;var $=D[j],J=D[j+1],K=$-V,Q=J-U;if(h){var Z=d[z];if(0!=Z){var tt=(Math.sqrt(K*K+Q*Q)/Z-1)*a+1;H.a*=tt,H.c*=tt}}if(V=$,U=J,a>0){var et=H.a,nt=H.b,at=H.c,rt=H.d,it=0,st=0,ot=0;if(it=o?D[j-1]:0==f[z+1]?D[j+2]:Math.atan2(Q,K),it-=Math.atan2(at,et),W){st=Math.cos(it),ot=Math.sin(it);var ht=H.data.length;V+=(ht*(st*et-ot*at)-K)*a,U+=(ht*(ot*et+st*at)-Q)*a}else it+=q;it>A.PI?it-=A.PI2:it<-A.PI&&(it+=A.PI2),it*=a,st=Math.cos(it),ot=Math.sin(it),H.a=st*et-ot*at,H.b=st*nt-ot*rt,H.c=ot*et+st*at,H.d=ot*nt+st*rt}H.updateAppliedTransform()}}}}},{key:"computeWorldPositions",value:function(e,n,a){var r=this.target,i=this.position,s=this.spaces,o=C.setArraySize(this.positions,3*n+2),h=this.world,l=e.closed,c=e.worldVerticesLength,u=c/6,f=t.NONE;if(!e.constantSpeed){var d,v=e.lengths,m=v[u-=l?1:2];switch(this.data.positionMode==me.Percent&&(i*=m),this.data.spacingMode){case pe.Percent:d=m;break;case pe.Proportional:d=m/n;break;default:d=1}h=C.setArraySize(this.world,8);for(var p=0,g=0,y=0;p<n;p++,g+=3){var k=s[p]*d,w=i+=k;if(l)(w%=m)<0&&(w+=m),y=0;else{if(w<0){f!=t.BEFORE&&(f=t.BEFORE,e.computeWorldVertices(r,2,4,h,0,2)),this.addBeforePosition(w,h,0,o,g);continue}if(w>m){f!=t.AFTER&&(f=t.AFTER,e.computeWorldVertices(r,c-6,4,h,0,2)),this.addAfterPosition(w-m,h,0,o,g);continue}}for(;;y++){var b=v[y];if(!(w>b)){if(0==y)w/=b;else{var x=v[y-1];w=(w-x)/(b-x)}break}}y!=f&&(f=y,l&&y==u?(e.computeWorldVertices(r,c-4,4,h,0,2),e.computeWorldVertices(r,0,4,h,4,2)):e.computeWorldVertices(r,6*y+2,8,h,0,2)),this.addCurvePosition(w,h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],o,g,a||p>0&&0==k)}return o}l?(c+=2,h=C.setArraySize(this.world,c),e.computeWorldVertices(r,2,c-4,h,0,2),e.computeWorldVertices(r,0,2,h,c-4,2),h[c-2]=h[0],h[c-1]=h[1]):(u--,c-=4,h=C.setArraySize(this.world,c),e.computeWorldVertices(r,2,c,h,0,2));for(var I,E=C.setArraySize(this.curves,u),A=0,S=h[0],R=h[1],T=0,M=0,F=0,P=0,Y=0,X=0,O=0,N=0,L=0,_=0,B=0,D=0,V=0,U=0,q=0,W=2;q<u;q++,W+=6)T=h[W],M=h[W+1],F=h[W+2],P=h[W+3],B=2*(O=.1875*(S-2*T+F))+(L=.09375*(3*(T-F)-S+(Y=h[W+4]))),D=2*(N=.1875*(R-2*M+P))+(_=.09375*(3*(M-P)-R+(X=h[W+5]))),V=.75*(T-S)+O+.16666667*L,U=.75*(M-R)+N+.16666667*_,A+=Math.sqrt(V*V+U*U),V+=B,U+=D,B+=L,D+=_,A+=Math.sqrt(V*V+U*U),V+=B,U+=D,A+=Math.sqrt(V*V+U*U),V+=B+L,U+=D+_,A+=Math.sqrt(V*V+U*U),E[q]=A,S=Y,R=X;switch(this.data.positionMode==me.Percent&&(i*=A),this.data.spacingMode){case pe.Percent:I=A;break;case pe.Proportional:I=A/n;break;default:I=1}for(var G=this.segments,z=0,j=0,H=0,$=0,J=0;j<n;j++,H+=3){var K=s[j]*I,Q=i+=K;if(l)(Q%=A)<0&&(Q+=A),$=0;else{if(Q<0){this.addBeforePosition(Q,h,0,o,H);continue}if(Q>A){this.addAfterPosition(Q-A,h,c-4,o,H);continue}}for(;;$++){var Z=E[$];if(!(Q>Z)){if(0==$)Q/=Z;else{var tt=E[$-1];Q=(Q-tt)/(Z-tt)}break}}if($!=f){f=$;var et=6*$;for(S=h[et],R=h[et+1],T=h[et+2],M=h[et+3],F=h[et+4],P=h[et+5],B=2*(O=.03*(S-2*T+F))+(L=.006*(3*(T-F)-S+(Y=h[et+6]))),D=2*(N=.03*(R-2*M+P))+(_=.006*(3*(M-P)-R+(X=h[et+7]))),V=.3*(T-S)+O+.16666667*L,U=.3*(M-R)+N+.16666667*_,z=Math.sqrt(V*V+U*U),G[0]=z,et=1;et<8;et++)V+=B,U+=D,B+=L,D+=_,z+=Math.sqrt(V*V+U*U),G[et]=z;V+=B,U+=D,z+=Math.sqrt(V*V+U*U),G[8]=z,V+=B+L,U+=D+_,z+=Math.sqrt(V*V+U*U),G[9]=z,J=0}for(Q*=z;;J++){var nt=G[J];if(!(Q>nt)){if(0==J)Q/=nt;else{var at=G[J-1];Q=J+(Q-at)/(nt-at)}break}}this.addCurvePosition(.1*Q,S,R,T,M,F,P,Y,X,o,H,a||j>0&&0==K)}return o}},{key:"addBeforePosition",value:function(t,e,n,a,r){var i=e[n],s=e[n+1],o=e[n+2]-i,h=e[n+3]-s,l=Math.atan2(h,o);a[r]=i+t*Math.cos(l),a[r+1]=s+t*Math.sin(l),a[r+2]=l}},{key:"addAfterPosition",value:function(t,e,n,a,r){var i=e[n+2],s=e[n+3],o=i-e[n],h=s-e[n+1],l=Math.atan2(h,o);a[r]=i+t*Math.cos(l),a[r+1]=s+t*Math.sin(l),a[r+2]=l}},{key:"addCurvePosition",value:function(t,e,n,a,r,i,s,o,h,l,c,u){if(0==t||isNaN(t))return l[c]=e,l[c+1]=n,void(l[c+2]=Math.atan2(r-n,a-e));var f=t*t,d=f*t,v=1-t,m=v*v,p=m*v,g=v*t,y=3*g,k=v*y,w=y*t,b=e*p+a*k+i*w+o*d,x=n*p+r*k+s*w+h*d;l[c]=b,l[c+1]=x,u&&(l[c+2]=t<.001?Math.atan2(r-n,a-e):Math.atan2(x-(n*m+r*g*2+s*f),b-(e*m+a*g*2+i*f)))}}])}();l(ke,"NONE",-1),l(ke,"BEFORE",-2),l(ke,"AFTER",-3),l(ke,"epsilon",1e-5);var we,be=h((function t(e,n){s(this,t),l(this,"data",void 0),l(this,"_bone",null),l(this,"inertia",0),l(this,"strength",0),l(this,"damping",0),l(this,"massInverse",0),l(this,"wind",0),l(this,"gravity",0),l(this,"mix",0),l(this,"_reset",!0),l(this,"ux",0),l(this,"uy",0),l(this,"cx",0),l(this,"cy",0),l(this,"tx",0),l(this,"ty",0),l(this,"xOffset",0),l(this,"xVelocity",0),l(this,"yOffset",0),l(this,"yVelocity",0),l(this,"rotateOffset",0),l(this,"rotateVelocity",0),l(this,"scaleOffset",0),l(this,"scaleVelocity",0),l(this,"active",!1),l(this,"skeleton",void 0),l(this,"remaining",0),l(this,"lastTime",0),this.data=e,this.skeleton=n,this.bone=n.bones[e.bone.index],this.inertia=e.inertia,this.strength=e.strength,this.damping=e.damping,this.massInverse=e.massInverse,this.wind=e.wind,this.gravity=e.gravity,this.mix=e.mix}),[{key:"bone",get:function(){if(this._bone)return this._bone;throw new Error("Bone not set.")},set:function(t){this._bone=t}},{key:"reset",value:function(){this.remaining=0,this.lastTime=this.skeleton.time,this._reset=!0,this.xOffset=0,this.xVelocity=0,this.yOffset=0,this.yVelocity=0,this.rotateOffset=0,this.rotateVelocity=0,this.scaleOffset=0,this.scaleVelocity=0}},{key:"setToSetupPose",value:function(){var t=this.data;this.inertia=t.inertia,this.strength=t.strength,this.damping=t.damping,this.massInverse=t.massInverse,this.wind=t.wind,this.gravity=t.gravity,this.mix=t.mix}},{key:"isActive",value:function(){return this.active}},{key:"update",value:function(t){var e=this.mix;if(0!=e){var n=this.data.x>0,a=this.data.y>0,r=this.data.rotate>0||this.data.shearX>0,i=this.data.scaleX>0,s=this.bone,o=s.data.length;switch(t){case we.none:return;case we.reset:this.reset();case we.update:var h=Math.max(this.skeleton.time-this.lastTime,0);this.remaining+=h,this.lastTime=this.skeleton.time;var l=s.worldX,c=s.worldY;if(this._reset)this._reset=!1,this.ux=l,this.uy=c;else{var u=this.remaining,f=this.inertia,d=this.data.limit*h,v=this.data.step,m=this.skeleton.data.referenceScale,p=-1;if(n||a){if(n){var g=(this.ux-l)*f;this.xOffset+=g>d?d:g<-d?-d:g,this.ux=l}if(a){var y=(this.uy-c)*f;this.yOffset+=y>d?d:y<-d?-d:y,this.uy=c}if(u>=v){p=Math.pow(this.damping,60*v);var k=this.massInverse*v,w=this.strength,b=this.wind*m,x=(Ee.yDown?-this.gravity:this.gravity)*m;do{n&&(this.xVelocity+=(b-this.xOffset*w)*k,this.xOffset+=this.xVelocity*v,this.xVelocity*=p),a&&(this.yVelocity-=(x+this.yOffset*w)*k,this.yOffset+=this.yVelocity*v,this.yVelocity*=p),u-=v}while(u>=v)}n&&(s.worldX+=this.xOffset*e*this.data.x),a&&(s.worldY+=this.yOffset*e*this.data.y)}if(r||i){var I=Math.atan2(s.c,s.a),E=0,S=0,R=0,T=this.cx-s.worldX,C=this.cy-s.worldY;if(T>d?T=d:T<-d&&(T=-d),C>d?C=d:C<-d&&(C=-d),r){R=(this.data.rotate+this.data.shearX)*e;var M=Math.atan2(C+this.ty,T+this.tx)-I-this.rotateOffset*R;this.rotateOffset+=(M-Math.ceil(M*A.invPI2-.5)*A.PI2)*f,M=this.rotateOffset*R+I,E=Math.cos(M),S=Math.sin(M),i&&(M=o*s.getWorldScaleX())>0&&(this.scaleOffset+=(T*E+C*S)*f/M)}else{E=Math.cos(I),S=Math.sin(I);var F=o*s.getWorldScaleX();F>0&&(this.scaleOffset+=(T*E+C*S)*f/F)}if((u=this.remaining)>=v){-1==p&&(p=Math.pow(this.damping,60*v));for(var P=this.massInverse*v,Y=this.strength,X=this.wind,O=Ee.yDown?-this.gravity:this.gravity,N=o/m;;)if(u-=v,i&&(this.scaleVelocity+=(X*E-O*S-this.scaleOffset*Y)*P,this.scaleOffset+=this.scaleVelocity*v,this.scaleVelocity*=p),r){if(this.rotateVelocity-=((X*S+O*E)*N+this.rotateOffset*Y)*P,this.rotateOffset+=this.rotateVelocity*v,this.rotateVelocity*=p,u<v)break;var L=this.rotateOffset*R+I;E=Math.cos(L),S=Math.sin(L)}else if(u<v)break}}this.remaining=u}this.cx=s.worldX,this.cy=s.worldY;break;case we.pose:n&&(s.worldX+=this.xOffset*e*this.data.x),a&&(s.worldY+=this.yOffset*e*this.data.y)}if(r){var _=this.rotateOffset*e,B=0,D=0,V=0;if(this.data.shearX>0){var U=0;this.data.rotate>0&&(U=_*this.data.rotate,B=Math.sin(U),D=Math.cos(U),V=s.b,s.b=D*V-B*s.d,s.d=B*V+D*s.d),U+=_*this.data.shearX,B=Math.sin(U),D=Math.cos(U),V=s.a,s.a=D*V-B*s.c,s.c=B*V+D*s.c}else _*=this.data.rotate,B=Math.sin(_),D=Math.cos(_),V=s.a,s.a=D*V-B*s.c,s.c=B*V+D*s.c,V=s.b,s.b=D*V-B*s.d,s.d=B*V+D*s.d}if(i){var q=1+this.scaleOffset*e*this.data.scaleX;s.a*=q,s.c*=q}t!=we.pose&&(this.tx=o*s.a,this.ty=o*s.c),s.updateAppliedTransform()}}},{key:"translate",value:function(t,e){this.ux-=t,this.uy-=e,this.cx-=t,this.cy-=e}},{key:"rotate",value:function(t,e,n){var a=n*A.degRad,r=Math.cos(a),i=Math.sin(a),s=this.cx-t,o=this.cy-e;this.translate(s*r-o*i-s,s*i+o*r-o)}}]),xe=h((function t(e,n){if(s(this,t),l(this,"data",void 0),l(this,"bone",void 0),l(this,"color",void 0),l(this,"darkColor",null),l(this,"attachment",null),l(this,"attachmentState",0),l(this,"sequenceIndex",-1),l(this,"deform",new Array),!e)throw new Error("data cannot be null.");if(!n)throw new Error("bone cannot be null.");this.data=e,this.bone=n,this.color=new E,this.darkColor=e.darkColor?new E:null,this.setToSetupPose()}),[{key:"getSkeleton",value:function(){return this.bone.skeleton}},{key:"getAttachment",value:function(){return this.attachment}},{key:"setAttachment",value:function(t){this.attachment!=t&&(t instanceof N&&this.attachment instanceof N&&t.timelineAttachment==this.attachment.timelineAttachment||(this.deform.length=0),this.attachment=t,this.sequenceIndex=-1)}},{key:"setToSetupPose",value:function(){this.color.setFromColor(this.data.color),this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName?(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName))):this.attachment=null}}]),Ie=h((function t(e,n){if(s(this,t),l(this,"data",void 0),l(this,"bones",void 0),l(this,"target",void 0),l(this,"mixRotate",0),l(this,"mixX",0),l(this,"mixY",0),l(this,"mixScaleX",0),l(this,"mixScaleY",0),l(this,"mixShearY",0),l(this,"temp",new P),l(this,"active",!1),!e)throw new Error("data cannot be null.");if(!n)throw new Error("skeleton cannot be null.");this.data=e,this.bones=new Array;for(var a=0;a<e.bones.length;a++){var r=n.findBone(e.bones[a].name);if(!r)throw new Error("Couldn't find bone ".concat(e.bones[a].name,"."));this.bones.push(r)}var i=n.findBone(e.target.name);if(!i)throw new Error("Couldn't find target bone ".concat(e.target.name,"."));this.target=i,this.mixRotate=e.mixRotate,this.mixX=e.mixX,this.mixY=e.mixY,this.mixScaleX=e.mixScaleX,this.mixScaleY=e.mixScaleY,this.mixShearY=e.mixShearY}),[{key:"isActive",value:function(){return this.active}},{key:"setToSetupPose",value:function(){var t=this.data;this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY,this.mixScaleX=t.mixScaleX,this.mixScaleY=t.mixScaleY,this.mixShearY=t.mixShearY}},{key:"update",value:function(t){0==this.mixRotate&&0==this.mixX&&0==this.mixY&&0==this.mixScaleX&&0==this.mixScaleY&&0==this.mixShearY||(this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld())}},{key:"applyAbsoluteWorld",value:function(){for(var t=this.mixRotate,e=this.mixX,n=this.mixY,a=this.mixScaleX,r=this.mixScaleY,i=this.mixShearY,s=0!=e||0!=n,o=this.target,h=o.a,l=o.b,c=o.c,u=o.d,f=h*u-l*c>0?A.degRad:-A.degRad,d=this.data.offsetRotation*f,v=this.data.offsetShearY*f,m=this.bones,p=0,g=m.length;p<g;p++){var y=m[p];if(0!=t){var k=y.a,w=y.b,b=y.c,x=y.d,I=Math.atan2(c,h)-Math.atan2(b,k)+d;I>A.PI?I-=A.PI2:I<-A.PI&&(I+=A.PI2),I*=t;var E=Math.cos(I),S=Math.sin(I);y.a=E*k-S*b,y.b=E*w-S*x,y.c=S*k+E*b,y.d=S*w+E*x}if(s){var R=this.temp;o.localToWorld(R.set(this.data.offsetX,this.data.offsetY)),y.worldX+=(R.x-y.worldX)*e,y.worldY+=(R.y-y.worldY)*n}if(0!=a){var T=Math.sqrt(y.a*y.a+y.c*y.c);0!=T&&(T=(T+(Math.sqrt(h*h+c*c)-T+this.data.offsetScaleX)*a)/T),y.a*=T,y.c*=T}if(0!=r){var C=Math.sqrt(y.b*y.b+y.d*y.d);0!=C&&(C=(C+(Math.sqrt(l*l+u*u)-C+this.data.offsetScaleY)*r)/C),y.b*=C,y.d*=C}if(i>0){var M=y.b,F=y.d,P=Math.atan2(F,M),Y=Math.atan2(u,l)-Math.atan2(c,h)-(P-Math.atan2(y.c,y.a));Y>A.PI?Y-=A.PI2:Y<-A.PI&&(Y+=A.PI2),Y=P+(Y+v)*i;var X=Math.sqrt(M*M+F*F);y.b=Math.cos(Y)*X,y.d=Math.sin(Y)*X}y.updateAppliedTransform()}}},{key:"applyRelativeWorld",value:function(){for(var t=this.mixRotate,e=this.mixX,n=this.mixY,a=this.mixScaleX,r=this.mixScaleY,i=this.mixShearY,s=0!=e||0!=n,o=this.target,h=o.a,l=o.b,c=o.c,u=o.d,f=h*u-l*c>0?A.degRad:-A.degRad,d=this.data.offsetRotation*f,v=this.data.offsetShearY*f,m=this.bones,p=0,g=m.length;p<g;p++){var y=m[p];if(0!=t){var k=y.a,w=y.b,b=y.c,x=y.d,I=Math.atan2(c,h)+d;I>A.PI?I-=A.PI2:I<-A.PI&&(I+=A.PI2),I*=t;var E=Math.cos(I),S=Math.sin(I);y.a=E*k-S*b,y.b=E*w-S*x,y.c=S*k+E*b,y.d=S*w+E*x}if(s){var R=this.temp;o.localToWorld(R.set(this.data.offsetX,this.data.offsetY)),y.worldX+=R.x*e,y.worldY+=R.y*n}if(0!=a){var T=(Math.sqrt(h*h+c*c)-1+this.data.offsetScaleX)*a+1;y.a*=T,y.c*=T}if(0!=r){var C=(Math.sqrt(l*l+u*u)-1+this.data.offsetScaleY)*r+1;y.b*=C,y.d*=C}if(i>0){var M=Math.atan2(u,l)-Math.atan2(c,h);M>A.PI?M-=A.PI2:M<-A.PI&&(M+=A.PI2);var F=y.b,P=y.d;M=Math.atan2(P,F)+(M-A.PI/2+v)*i;var Y=Math.sqrt(F*F+P*P);y.b=Math.cos(M)*Y,y.d=Math.sin(M)*Y}y.updateAppliedTransform()}}},{key:"applyAbsoluteLocal",value:function(){for(var t=this.mixRotate,e=this.mixX,n=this.mixY,a=this.mixScaleX,r=this.mixScaleY,i=this.mixShearY,s=this.target,o=this.bones,h=0,l=o.length;h<l;h++){var c=o[h],u=c.arotation;0!=t&&(u+=(s.arotation-u+this.data.offsetRotation)*t);var f=c.ax,d=c.ay;f+=(s.ax-f+this.data.offsetX)*e,d+=(s.ay-d+this.data.offsetY)*n;var v=c.ascaleX,m=c.ascaleY;0!=a&&0!=v&&(v=(v+(s.ascaleX-v+this.data.offsetScaleX)*a)/v),0!=r&&0!=m&&(m=(m+(s.ascaleY-m+this.data.offsetScaleY)*r)/m);var p=c.ashearY;0!=i&&(p+=(s.ashearY-p+this.data.offsetShearY)*i),c.updateWorldTransformWith(f,d,u,v,m,c.ashearX,p)}}},{key:"applyRelativeLocal",value:function(){for(var t=this.mixRotate,e=this.mixX,n=this.mixY,a=this.mixScaleX,r=this.mixScaleY,i=this.mixShearY,s=this.target,o=this.bones,h=0,l=o.length;h<l;h++){var c=o[h],u=c.arotation+(s.arotation+this.data.offsetRotation)*t,f=c.ax+(s.ax+this.data.offsetX)*e,d=c.ay+(s.ay+this.data.offsetY)*n,v=c.ascaleX*((s.ascaleX-1+this.data.offsetScaleX)*a+1),m=c.ascaleY*((s.ascaleY-1+this.data.offsetScaleY)*r+1),p=c.ashearY+(s.ashearY+this.data.offsetShearY)*i;c.updateWorldTransformWith(f,d,u,v,m,c.ashearX,p)}}}]),Ee=function(){function t(e){if(s(this,t),l(this,"data",void 0),l(this,"bones",void 0),l(this,"slots",void 0),l(this,"drawOrder",void 0),l(this,"ikConstraints",void 0),l(this,"transformConstraints",void 0),l(this,"pathConstraints",void 0),l(this,"physicsConstraints",void 0),l(this,"_updateCache",new Array),l(this,"skin",null),l(this,"color",void 0),l(this,"scaleX",1),l(this,"_scaleY",1),l(this,"x",0),l(this,"y",0),l(this,"time",0),!e)throw new Error("data cannot be null.");this.data=e,this.bones=new Array;for(var n=0;n<e.bones.length;n++){var a=e.bones[n],r=void 0;if(a.parent){var i=this.bones[a.parent.index];r=new oe(a,this,i),i.children.push(r)}else r=new oe(a,this,null);this.bones.push(r)}this.slots=new Array,this.drawOrder=new Array;for(var o=0;o<e.slots.length;o++){var h=e.slots[o],c=this.bones[h.boneData.index],u=new xe(h,c);this.slots.push(u),this.drawOrder.push(u)}this.ikConstraints=new Array;for(var f=0;f<e.ikConstraints.length;f++){var d=e.ikConstraints[f];this.ikConstraints.push(new de(d,this))}this.transformConstraints=new Array;for(var v=0;v<e.transformConstraints.length;v++){var m=e.transformConstraints[v];this.transformConstraints.push(new Ie(m,this))}this.pathConstraints=new Array;for(var p=0;p<e.pathConstraints.length;p++){var g=e.pathConstraints[p];this.pathConstraints.push(new ke(g,this))}this.physicsConstraints=new Array;for(var y=0;y<e.physicsConstraints.length;y++){var k=e.physicsConstraints[y];this.physicsConstraints.push(new be(k,this))}this.color=new E(1,1,1,1),this.updateCache()}return h(t,[{key:"scaleY",get:function(){return t.yDown?-this._scaleY:this._scaleY},set:function(t){this._scaleY=t}},{key:"updateCache",value:function(){var t=this._updateCache;t.length=0;for(var e=this.bones,n=0,a=e.length;n<a;n++){var r=e[n];r.sorted=r.data.skinRequired,r.active=!r.sorted}if(this.skin)for(var i=this.skin.bones,s=0,o=this.skin.bones.length;s<o;s++){var h=this.bones[i[s].index];do{h.sorted=!1,h.active=!0,h=h.parent}while(h)}var l=this.ikConstraints,c=this.transformConstraints,u=this.pathConstraints,f=this.physicsConstraints,d=l.length,v=c.length,m=u.length,p=this.physicsConstraints.length,g=d+v+m+p;t:for(var y=0;y<g;y++){for(var k=0;k<d;k++){var w=l[k];if(w.data.order==y){this.sortIkConstraint(w);continue t}}for(var b=0;b<v;b++){var x=c[b];if(x.data.order==y){this.sortTransformConstraint(x);continue t}}for(var I=0;I<m;I++){var E=u[I];if(E.data.order==y){this.sortPathConstraint(E);continue t}}for(var A=0;A<p;A++){var S=f[A];if(S.data.order==y){this.sortPhysicsConstraint(S);continue t}}}for(var R=0,T=e.length;R<T;R++)this.sortBone(e[R])}},{key:"sortIkConstraint",value:function(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&C.contains(this.skin.constraints,t.data,!0)),t.active){var e=t.target;this.sortBone(e);var n=t.bones,a=n[0];if(this.sortBone(a),1==n.length)this._updateCache.push(t),this.sortReset(a.children);else{var r=n[n.length-1];this.sortBone(r),this._updateCache.push(t),this.sortReset(a.children),r.sorted=!0}}}},{key:"sortPathConstraint",value:function(t){if(t.active=t.target.bone.isActive()&&(!t.data.skinRequired||this.skin&&C.contains(this.skin.constraints,t.data,!0)),t.active){var e=t.target,n=e.data.index,a=e.bone;this.skin&&this.sortPathConstraintAttachment(this.skin,n,a),this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,n,a);for(var r=0,i=this.data.skins.length;r<i;r++)this.sortPathConstraintAttachment(this.data.skins[r],n,a);var s=e.getAttachment();s instanceof ee&&this.sortPathConstraintAttachmentWith(s,a);for(var o=t.bones,h=o.length,l=0;l<h;l++)this.sortBone(o[l]);this._updateCache.push(t);for(var c=0;c<h;c++)this.sortReset(o[c].children);for(var u=0;u<h;u++)o[u].sorted=!0}}},{key:"sortTransformConstraint",value:function(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&C.contains(this.skin.constraints,t.data,!0)),t.active){this.sortBone(t.target);var e=t.bones,n=e.length;if(t.data.local)for(var a=0;a<n;a++){var r=e[a];this.sortBone(r.parent),this.sortBone(r)}else for(var i=0;i<n;i++)this.sortBone(e[i]);this._updateCache.push(t);for(var s=0;s<n;s++)this.sortReset(e[s].children);for(var o=0;o<n;o++)e[o].sorted=!0}}},{key:"sortPathConstraintAttachment",value:function(t,e,n){var a=t.attachments[e];if(a)for(var r in a)this.sortPathConstraintAttachmentWith(a[r],n)}},{key:"sortPathConstraintAttachmentWith",value:function(t,e){if(t instanceof ee){var n=t.bones;if(n)for(var a=this.bones,r=0,i=n.length;r<i;){var s=n[r++];for(s+=r;r<s;)this.sortBone(a[n[r++]])}else this.sortBone(e)}}},{key:"sortPhysicsConstraint",value:function(t){var e=t.bone;t.active=e.active&&(!t.data.skinRequired||null!=this.skin&&C.contains(this.skin.constraints,t.data,!0)),t.active&&(this.sortBone(e),this._updateCache.push(t),this.sortReset(e.children),e.sorted=!0)}},{key:"sortBone",value:function(t){if(t&&!t.sorted){var e=t.parent;e&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}}},{key:"sortReset",value:function(t){for(var e=0,n=t.length;e<n;e++){var a=t[e];a.active&&(a.sorted&&this.sortReset(a.children),a.sorted=!1)}}},{key:"updateWorldTransform",value:function(t){if(null==t)throw new Error("physics is undefined");for(var e=this.bones,n=0,a=e.length;n<a;n++){var r=e[n];r.ax=r.x,r.ay=r.y,r.arotation=r.rotation,r.ascaleX=r.scaleX,r.ascaleY=r.scaleY,r.ashearX=r.shearX,r.ashearY=r.shearY}for(var i=this._updateCache,s=0,o=i.length;s<o;s++)i[s].update(t)}},{key:"updateWorldTransformWith",value:function(t,e){var n=this.getRootBone();if(!n)throw new Error("Root bone must not be null.");var a=e.a,r=e.b,i=e.c,s=e.d;n.worldX=a*this.x+r*this.y+e.worldX,n.worldY=i*this.x+s*this.y+e.worldY;var o=(n.rotation+n.shearX)*A.degRad,h=(n.rotation+90+n.shearY)*A.degRad,l=Math.cos(o)*n.scaleX,c=Math.cos(h)*n.scaleY,u=Math.sin(o)*n.scaleX,f=Math.sin(h)*n.scaleY;n.a=(a*l+r*u)*this.scaleX,n.b=(a*c+r*f)*this.scaleX,n.c=(i*l+s*u)*this.scaleY,n.d=(i*c+s*f)*this.scaleY;for(var d=this._updateCache,v=0,m=d.length;v<m;v++){var p=d[v];p!=n&&p.update(t)}}},{key:"setToSetupPose",value:function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()}},{key:"setBonesToSetupPose",value:function(){var t,e=k(this.bones);try{for(e.s();!(t=e.n()).done;){t.value.setToSetupPose()}}catch(t){e.e(t)}finally{e.f()}var n,a=k(this.ikConstraints);try{for(a.s();!(n=a.n()).done;){n.value.setToSetupPose()}}catch(t){a.e(t)}finally{a.f()}var r,i=k(this.transformConstraints);try{for(i.s();!(r=i.n()).done;){r.value.setToSetupPose()}}catch(t){i.e(t)}finally{i.f()}var s,o=k(this.pathConstraints);try{for(o.s();!(s=o.n()).done;){s.value.setToSetupPose()}}catch(t){o.e(t)}finally{o.f()}var h,l=k(this.physicsConstraints);try{for(l.s();!(h=l.n()).done;){h.value.setToSetupPose()}}catch(t){l.e(t)}finally{l.f()}}},{key:"setSlotsToSetupPose",value:function(){var t=this.slots;C.arrayCopy(t,0,this.drawOrder,0,t.length);for(var e=0,n=t.length;e<n;e++)t[e].setToSetupPose()}},{key:"getRootBone",value:function(){return 0==this.bones.length?null:this.bones[0]}},{key:"findBone",value:function(t){if(!t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,a=e.length;n<a;n++){var r=e[n];if(r.data.name==t)return r}return null}},{key:"findSlot",value:function(t){if(!t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,a=e.length;n<a;n++){var r=e[n];if(r.data.name==t)return r}return null}},{key:"setSkinByName",value:function(t){var e=this.data.findSkin(t);if(!e)throw new Error("Skin not found: "+t);this.setSkin(e)}},{key:"setSkin",value:function(t){if(t!=this.skin){if(t)if(this.skin)t.attachAll(this,this.skin);else for(var e=this.slots,n=0,a=e.length;n<a;n++){var r=e[n],i=r.data.attachmentName;if(i){var s=t.getAttachment(n,i);s&&r.setAttachment(s)}}this.skin=t,this.updateCache()}}},{key:"getAttachmentByName",value:function(t,e){var n=this.data.findSlot(t);if(!n)throw new Error("Can't find slot with name ".concat(t));return this.getAttachment(n.index,e)}},{key:"getAttachment",value:function(t,e){if(!e)throw new Error("attachmentName cannot be null.");if(this.skin){var n=this.skin.getAttachment(t,e);if(n)return n}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null}},{key:"setAttachment",value:function(t,e){if(!t)throw new Error("slotName cannot be null.");for(var n=this.slots,a=0,r=n.length;a<r;a++){var i=n[a];if(i.data.name==t){var s=null;if(e&&!(s=this.getAttachment(a,e)))throw new Error("Attachment not found: "+e+", for slot: "+t);return void i.setAttachment(s)}}throw new Error("Slot not found: "+t)}},{key:"findIkConstraint",value:function(t){var e;if(!t)throw new Error("constraintName cannot be null.");return null!==(e=this.ikConstraints.find((function(e){return e.data.name==t})))&&void 0!==e?e:null}},{key:"findTransformConstraint",value:function(t){var e;if(!t)throw new Error("constraintName cannot be null.");return null!==(e=this.transformConstraints.find((function(e){return e.data.name==t})))&&void 0!==e?e:null}},{key:"findPathConstraint",value:function(t){var e;if(!t)throw new Error("constraintName cannot be null.");return null!==(e=this.pathConstraints.find((function(e){return e.data.name==t})))&&void 0!==e?e:null}},{key:"findPhysicsConstraint",value:function(t){var e;if(null==t)throw new Error("constraintName cannot be null.");return null!==(e=this.physicsConstraints.find((function(e){return e.data.name==t})))&&void 0!==e?e:null}},{key:"getBoundsRect",value:function(){var t=new P,e=new P;return this.getBounds(t,e),{x:t.x,y:t.y,width:e.x,height:e.y}}},{key:"getBounds",value:function(e,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Array(2),r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!e)throw new Error("offset cannot be null.");if(!n)throw new Error("size cannot be null.");for(var i=this.drawOrder,s=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY,c=0,u=i.length;c<u;c++){var f=i[c];if(f.bone.active){var d=0,v=null,m=null,p=f.getAttachment();if(p instanceof ae)d=8,v=C.setArraySize(a,d,0),p.computeWorldVertices(f,v,0,2),m=t.quadTriangles;else if(p instanceof te){var g=p;d=g.worldVerticesLength,v=C.setArraySize(a,d,0),g.computeWorldVertices(f,0,d,v,0,2),m=g.triangles}else if(p instanceof Wt&&null!=r){r.clipStart(f,p);continue}if(v&&m){null!=r&&r.isClipping()&&(r.clipTriangles(v,m,m.length),v=r.clippedVertices,d=r.clippedVertices.length);for(var y=0,k=v.length;y<k;y+=2){var w=v[y],b=v[y+1];s=Math.min(s,w),o=Math.min(o,b),h=Math.max(h,w),l=Math.max(l,b)}}null!=r&&r.clipEndWithSlot(f)}}null!=r&&r.clipEnd(),e.set(s,o),n.set(h-s,l-o)}},{key:"update",value:function(t){this.time+=t}},{key:"physicsTranslate",value:function(t,e){for(var n=this.physicsConstraints,a=0,r=n.length;a<r;a++)n[a].translate(t,e)}},{key:"physicsRotate",value:function(t,e,n){for(var a=this.physicsConstraints,r=0,i=a.length;r<i;r++)a[r].rotate(t,e,n)}}])}();l(Ee,"quadTriangles",[0,1,2,2,3,0]),l(Ee,"yDown",!1),function(t){t[t.none=0]="none",t[t.reset=1]="reset",t[t.update=2]="update",t[t.pose=3]="pose"}(we||(we={}));var Ae,Se=function(t){function e(t){var n,a,r,i;return s(this,e),a=this,i=[t,0,!1],r=u(r=e),l(n=d(a,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(r,i||[],u(a).constructor):r.apply(a,i)),"_bone",null),l(n,"x",0),l(n,"y",0),l(n,"rotate",0),l(n,"scaleX",0),l(n,"shearX",0),l(n,"limit",0),l(n,"step",0),l(n,"inertia",0),l(n,"strength",0),l(n,"damping",0),l(n,"massInverse",0),l(n,"wind",0),l(n,"gravity",0),l(n,"mix",0),l(n,"inertiaGlobal",!1),l(n,"strengthGlobal",!1),l(n,"dampingGlobal",!1),l(n,"massGlobal",!1),l(n,"windGlobal",!1),l(n,"gravityGlobal",!1),l(n,"mixGlobal",!1),n}return c(e,t),h(e,[{key:"bone",get:function(){if(this._bone)return this._bone;throw new Error("BoneData not set.")},set:function(t){this._bone=t}}])}(he),Re=h((function t(){s(this,t),l(this,"name",null),l(this,"bones",new Array),l(this,"slots",new Array),l(this,"skins",new Array),l(this,"defaultSkin",null),l(this,"events",new Array),l(this,"animations",new Array),l(this,"ikConstraints",new Array),l(this,"transformConstraints",new Array),l(this,"pathConstraints",new Array),l(this,"physicsConstraints",new Array),l(this,"x",0),l(this,"y",0),l(this,"width",0),l(this,"height",0),l(this,"referenceScale",100),l(this,"version",null),l(this,"hash",null),l(this,"fps",0),l(this,"imagesPath",null),l(this,"audioPath",null)}),[{key:"findBone",value:function(t){if(!t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,a=e.length;n<a;n++){var r=e[n];if(r.name==t)return r}return null}},{key:"findSlot",value:function(t){if(!t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,a=e.length;n<a;n++){var r=e[n];if(r.name==t)return r}return null}},{key:"findSkin",value:function(t){if(!t)throw new Error("skinName cannot be null.");for(var e=this.skins,n=0,a=e.length;n<a;n++){var r=e[n];if(r.name==t)return r}return null}},{key:"findEvent",value:function(t){if(!t)throw new Error("eventDataName cannot be null.");for(var e=this.events,n=0,a=e.length;n<a;n++){var r=e[n];if(r.name==t)return r}return null}},{key:"findAnimation",value:function(t){if(!t)throw new Error("animationName cannot be null.");for(var e=this.animations,n=0,a=e.length;n<a;n++){var r=e[n];if(r.name==t)return r}return null}},{key:"findIkConstraint",value:function(t){if(!t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,n=0,a=e.length;n<a;n++){var r=e[n];if(r.name==t)return r}return null}},{key:"findTransformConstraint",value:function(t){if(!t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,n=0,a=e.length;n<a;n++){var r=e[n];if(r.name==t)return r}return null}},{key:"findPathConstraint",value:function(t){if(!t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,n=0,a=e.length;n<a;n++){var r=e[n];if(r.name==t)return r}return null}},{key:"findPhysicsConstraint",value:function(t){if(!t)throw new Error("constraintName cannot be null.");for(var e=this.physicsConstraints,n=0,a=e.length;n<a;n++){var r=e[n];if(r.name==t)return r}return null}}]),Te=h((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;s(this,t),l(this,"slotIndex",void 0),l(this,"name",void 0),l(this,"attachment",void 0),this.slotIndex=e,this.name=n,this.attachment=a})),Ce=h((function t(e){if(s(this,t),l(this,"name",void 0),l(this,"attachments",new Array),l(this,"bones",Array()),l(this,"constraints",new Array),l(this,"color",new E(.99607843,.61960787,.30980393,1)),!e)throw new Error("name cannot be null.");this.name=e}),[{key:"setAttachment",value:function(t,e,n){if(!n)throw new Error("attachment cannot be null.");var a=this.attachments;t>=a.length&&(a.length=t+1),a[t]||(a[t]={}),a[t][e]=n}},{key:"addSkin",value:function(t){for(var e=0;e<t.bones.length;e++){for(var n=t.bones[e],a=!1,r=0;r<this.bones.length;r++)if(this.bones[r]==n){a=!0;break}a||this.bones.push(n)}for(var i=0;i<t.constraints.length;i++){for(var s=t.constraints[i],o=!1,h=0;h<this.constraints.length;h++)if(this.constraints[h]==s){o=!0;break}o||this.constraints.push(s)}for(var l=t.getAttachments(),c=0;c<l.length;c++){var u=l[c];this.setAttachment(u.slotIndex,u.name,u.attachment)}}},{key:"copySkin",value:function(t){for(var e=0;e<t.bones.length;e++){for(var n=t.bones[e],a=!1,r=0;r<this.bones.length;r++)if(this.bones[r]==n){a=!0;break}a||this.bones.push(n)}for(var i=0;i<t.constraints.length;i++){for(var s=t.constraints[i],o=!1,h=0;h<this.constraints.length;h++)if(this.constraints[h]==s){o=!0;break}o||this.constraints.push(s)}for(var l=t.getAttachments(),c=0;c<l.length;c++){var u=l[c];u.attachment&&(u.attachment instanceof te?(u.attachment=u.attachment.newLinkedMesh(),this.setAttachment(u.slotIndex,u.name,u.attachment)):(u.attachment=u.attachment.copy(),this.setAttachment(u.slotIndex,u.name,u.attachment)))}}},{key:"getAttachment",value:function(t,e){var n=this.attachments[t];return n?n[e]:null}},{key:"removeAttachment",value:function(t,e){var n=this.attachments[t];n&&delete n[e]}},{key:"getAttachments",value:function(){for(var t=new Array,e=0;e<this.attachments.length;e++){var n=this.attachments[e];if(n)for(var a in n){var r=n[a];r&&t.push(new Te(e,a,r))}}return t}},{key:"getAttachmentsForSlot",value:function(t,e){var n=this.attachments[t];if(n)for(var a in n){var r=n[a];r&&e.push(new Te(t,a,r))}}},{key:"clear",value:function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0}},{key:"attachAll",value:function(t,e){for(var n=0,a=0;a<t.slots.length;a++){var r=t.slots[a],i=r.getAttachment();if(i&&n<e.attachments.length){var s=e.attachments[n];for(var o in s)if(i==s[o]){var h=this.getAttachment(n,o);h&&r.setAttachment(h);break}}n++}}}]),Me=h((function t(e,n,a){if(s(this,t),l(this,"index",0),l(this,"name",void 0),l(this,"boneData",void 0),l(this,"color",new E(1,1,1,1)),l(this,"darkColor",null),l(this,"attachmentName",null),l(this,"blendMode",Ae.Normal),l(this,"visible",!0),e<0)throw new Error("index must be >= 0.");if(!n)throw new Error("name cannot be null.");if(!a)throw new Error("boneData cannot be null.");this.index=e,this.name=n,this.boneData=a}));!function(t){t[t.Normal=0]="Normal",t[t.Additive=1]="Additive",t[t.Multiply=2]="Multiply",t[t.Screen=3]="Screen"}(Ae||(Ae={}));var Fe,Pe=function(t){function e(t){var n,a,r,i;return s(this,e),a=this,i=[t,0,!1],r=u(r=e),l(n=d(a,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(r,i||[],u(a).constructor):r.apply(a,i)),"bones",new Array),l(n,"_target",null),l(n,"mixRotate",0),l(n,"mixX",0),l(n,"mixY",0),l(n,"mixScaleX",0),l(n,"mixScaleY",0),l(n,"mixShearY",0),l(n,"offsetRotation",0),l(n,"offsetX",0),l(n,"offsetY",0),l(n,"offsetScaleX",0),l(n,"offsetScaleY",0),l(n,"offsetShearY",0),l(n,"relative",!1),l(n,"local",!1),n}return c(e,t),h(e,[{key:"target",get:function(){if(this._target)return this._target;throw new Error("BoneData not set.")},set:function(t){this._target=t}}])}(he),Ye=h((function t(e){s(this,t),l(this,"scale",1),l(this,"attachmentLoader",void 0),l(this,"linkedMeshes",new Array),this.attachmentLoader=e}),[{key:"readSkeletonData",value:function(t){var e=this.scale,n=new Re;n.name="";var a=new Xe(t),r=a.readInt32(),i=a.readInt32();n.hash=0==i&&0==r?null:i.toString(16)+r.toString(16),n.version=a.readString(),n.x=a.readFloat(),n.y=a.readFloat(),n.width=a.readFloat(),n.height=a.readFloat(),n.referenceScale=a.readFloat()*e;var s=a.readBoolean();s&&(n.fps=a.readFloat(),n.imagesPath=a.readString(),n.audioPath=a.readString());var o=0;o=a.readInt(!0);for(var h=0;h<o;h++){var l=a.readString();if(!l)throw new Error("String in string table must not be null.");a.strings.push(l)}o=a.readInt(!0);for(var c=0;c<o;c++){var u=a.readString();if(!u)throw new Error("Bone name must not be null.");var f,d=0==c?null:n.bones[a.readInt(!0)],v=new se(c,u,d);v.rotation=a.readFloat(),v.x=a.readFloat()*e,v.y=a.readFloat()*e,v.scaleX=a.readFloat(),v.scaleY=a.readFloat(),v.shearX=a.readFloat(),v.shearY=a.readFloat(),v.length=a.readFloat()*e,v.inherit=a.readByte(),v.skinRequired=a.readBoolean(),s&&(E.rgba8888ToColor(v.color,a.readInt32()),v.icon=null!==(f=a.readString())&&void 0!==f?f:void 0,v.visible=a.readBoolean()),n.bones.push(v)}o=a.readInt(!0);for(var m=0;m<o;m++){var p=a.readString();if(!p)throw new Error("Slot name must not be null.");var g=n.bones[a.readInt(!0)],y=new Me(m,p,g);E.rgba8888ToColor(y.color,a.readInt32());var k=a.readInt32();-1!=k&&E.rgb888ToColor(y.darkColor=new E,k),y.attachmentName=a.readStringRef(),y.blendMode=a.readInt(!0),s&&(y.visible=a.readBoolean()),n.slots.push(y)}o=a.readInt(!0);for(var w,b=0;b<o;b++){var x=a.readString();if(!x)throw new Error("IK constraint data name must not be null.");var I=new ve(x);I.order=a.readInt(!0),w=a.readInt(!0);for(var A=0;A<w;A++)I.bones.push(n.bones[a.readInt(!0)]);I.target=n.bones[a.readInt(!0)];var S=a.readByte();I.skinRequired=0!=(1&S),I.bendDirection=0!=(2&S)?1:-1,I.compress=0!=(4&S),I.stretch=0!=(8&S),I.uniform=0!=(16&S),0!=(32&S)&&(I.mix=0!=(64&S)?a.readFloat():1),0!=(128&S)&&(I.softness=a.readFloat()*e),n.ikConstraints.push(I)}o=a.readInt(!0);for(var R,T=0;T<o;T++){var M=a.readString();if(!M)throw new Error("Transform constraint data name must not be null.");var F=new Pe(M);F.order=a.readInt(!0),R=a.readInt(!0);for(var P=0;P<R;P++)F.bones.push(n.bones[a.readInt(!0)]);F.target=n.bones[a.readInt(!0)];var Y=a.readByte();F.skinRequired=0!=(1&Y),F.local=0!=(2&Y),F.relative=0!=(4&Y),0!=(8&Y)&&(F.offsetRotation=a.readFloat()),0!=(16&Y)&&(F.offsetX=a.readFloat()*e),0!=(32&Y)&&(F.offsetY=a.readFloat()*e),0!=(64&Y)&&(F.offsetScaleX=a.readFloat()),0!=(128&Y)&&(F.offsetScaleY=a.readFloat()),0!=(1&(Y=a.readByte()))&&(F.offsetShearY=a.readFloat()),0!=(2&Y)&&(F.mixRotate=a.readFloat()),0!=(4&Y)&&(F.mixX=a.readFloat()),0!=(8&Y)&&(F.mixY=a.readFloat()),0!=(16&Y)&&(F.mixScaleX=a.readFloat()),0!=(32&Y)&&(F.mixScaleY=a.readFloat()),0!=(64&Y)&&(F.mixShearY=a.readFloat()),n.transformConstraints.push(F)}o=a.readInt(!0);for(var X,O=0;O<o;O++){var N=a.readString();if(!N)throw new Error("Path constraint data name must not be null.");var L=new ye(N);L.order=a.readInt(!0),L.skinRequired=a.readBoolean(),X=a.readInt(!0);for(var _=0;_<X;_++)L.bones.push(n.bones[a.readInt(!0)]);L.target=n.slots[a.readInt(!0)];var B=a.readByte();L.positionMode=1&B,L.spacingMode=B>>1&3,L.rotateMode=B>>3&3,0!=(128&B)&&(L.offsetRotation=a.readFloat()),L.position=a.readFloat(),L.positionMode==me.Fixed&&(L.position*=e),L.spacing=a.readFloat(),L.spacingMode!=pe.Length&&L.spacingMode!=pe.Fixed||(L.spacing*=e),L.mixRotate=a.readFloat(),L.mixX=a.readFloat(),L.mixY=a.readFloat(),n.pathConstraints.push(L)}o=a.readInt(!0);for(var D=0;D<o;D++){var V=a.readString();if(!V)throw new Error("Physics constraint data name must not be null.");var U=new Se(V);U.order=a.readInt(!0),U.bone=n.bones[a.readInt(!0)];var q=a.readByte();U.skinRequired=0!=(1&q),0!=(2&q)&&(U.x=a.readFloat()),0!=(4&q)&&(U.y=a.readFloat()),0!=(8&q)&&(U.rotate=a.readFloat()),0!=(16&q)&&(U.scaleX=a.readFloat()),0!=(32&q)&&(U.shearX=a.readFloat()),U.limit=(0!=(64&q)?a.readFloat():5e3)*e,U.step=1/a.readUnsignedByte(),U.inertia=a.readFloat(),U.strength=a.readFloat(),U.damping=a.readFloat(),U.massInverse=0!=(128&q)?a.readFloat():1,U.wind=a.readFloat(),U.gravity=a.readFloat(),0!=(1&(q=a.readByte()))&&(U.inertiaGlobal=!0),0!=(2&q)&&(U.strengthGlobal=!0),0!=(4&q)&&(U.dampingGlobal=!0),0!=(8&q)&&(U.massGlobal=!0),0!=(16&q)&&(U.windGlobal=!0),0!=(32&q)&&(U.gravityGlobal=!0),0!=(64&q)&&(U.mixGlobal=!0),U.mix=0!=(128&q)?a.readFloat():1,n.physicsConstraints.push(U)}var W=this.readSkin(a,n,!0,s);W&&(n.defaultSkin=W,n.skins.push(W));var G=n.skins.length;for(C.setArraySize(n.skins,o=G+a.readInt(!0));G<o;G++){var z=this.readSkin(a,n,!1,s);if(!z)throw new Error("readSkin() should not have returned null.");n.skins[G]=z}o=this.linkedMeshes.length;for(var j=0;j<o;j++){var H=this.linkedMeshes[j],$=n.skins[H.skinIndex];if(!H.parent)throw new Error("Linked mesh parent must not be null");var J=$.getAttachment(H.slotIndex,H.parent);if(!J)throw new Error("Parent mesh not found: ".concat(H.parent));H.mesh.timelineAttachment=H.inheritTimeline?J:H.mesh,H.mesh.setParentMesh(J),null!=H.mesh.region&&H.mesh.updateRegion()}this.linkedMeshes.length=0,o=a.readInt(!0);for(var K=0;K<o;K++){var Q=a.readString();if(!Q)throw new Error("Event data name must not be null");var Z=new fe(Q);Z.intValue=a.readInt(!1),Z.floatValue=a.readFloat(),Z.stringValue=a.readString(),Z.audioPath=a.readString(),Z.audioPath&&(Z.volume=a.readFloat(),Z.balance=a.readFloat()),n.events.push(Z)}o=a.readInt(!0);for(var tt=0;tt<o;tt++){var et=a.readString();if(!et)throw new Error("Animatio name must not be null.");n.animations.push(this.readAnimation(a,et,n))}return n}},{key:"readSkin",value:function(t,e,n,a){var r=null,i=0;if(n){if(0==(i=t.readInt(!0)))return null;r=new Ce("default")}else{var s=t.readString();if(!s)throw new Error("Skin name must not be null.");r=new Ce(s),a&&E.rgba8888ToColor(r.color,t.readInt32()),r.bones.length=t.readInt(!0);for(var o=0,h=r.bones.length;o<h;o++)r.bones[o]=e.bones[t.readInt(!0)];for(var l=0,c=t.readInt(!0);l<c;l++)r.constraints.push(e.ikConstraints[t.readInt(!0)]);for(var u=0,f=t.readInt(!0);u<f;u++)r.constraints.push(e.transformConstraints[t.readInt(!0)]);for(var d=0,v=t.readInt(!0);d<v;d++)r.constraints.push(e.pathConstraints[t.readInt(!0)]);for(var m=0,p=t.readInt(!0);m<p;m++)r.constraints.push(e.physicsConstraints[t.readInt(!0)]);i=t.readInt(!0)}for(var g=0;g<i;g++)for(var y=t.readInt(!0),k=0,w=t.readInt(!0);k<w;k++){var b=t.readStringRef();if(!b)throw new Error("Attachment name must not be null");var x=this.readAttachment(t,e,r,y,b,a);x&&r.setAttachment(y,b,x)}return r}},{key:"readAttachment",value:function(t,e,n,a,r,i){var s=this.scale,o=t.readByte(),h=0!=(8&o)?t.readStringRef():r;if(!h)throw new Error("Attachment name must not be null");switch(7&o){case Fe.Region:var l=0!=(16&o)?t.readStringRef():null,c=0!=(32&o)?t.readInt32():4294967295,u=0!=(64&o)?this.readSequence(t):null,f=0!=(128&o)?t.readFloat():0,d=t.readFloat(),v=t.readFloat(),m=t.readFloat(),p=t.readFloat(),g=t.readFloat(),y=t.readFloat();l||(l=h);var k=this.attachmentLoader.newRegionAttachment(n,h,l,u);return k?(k.path=l,k.x=d*s,k.y=v*s,k.scaleX=m,k.scaleY=p,k.rotation=f,k.width=g*s,k.height=y*s,E.rgba8888ToColor(k.color,c),k.sequence=u,null==u&&k.updateRegion(),k):null;case Fe.BoundingBox:var w=this.readVertices(t,0!=(16&o)),b=i?t.readInt32():0,x=this.attachmentLoader.newBoundingBoxAttachment(n,h);return x?(x.worldVerticesLength=w.length,x.vertices=w.vertices,x.bones=w.bones,i&&E.rgba8888ToColor(x.color,b),x):null;case Fe.Mesh:var I=0!=(16&o)?t.readStringRef():h,A=0!=(32&o)?t.readInt32():4294967295,S=0!=(64&o)?this.readSequence(t):null,R=t.readInt(!0),T=this.readVertices(t,0!=(128&o)),M=this.readFloatArray(t,T.length,1),F=this.readShortArray(t,3*(T.length-R-2)),P=[],Y=0,X=0;i&&(P=this.readShortArray(t,t.readInt(!0)),Y=t.readFloat(),X=t.readFloat()),I||(I=h);var O=this.attachmentLoader.newMeshAttachment(n,h,I,S);return O?(O.path=I,E.rgba8888ToColor(O.color,A),O.bones=T.bones,O.vertices=T.vertices,O.worldVerticesLength=T.length,O.triangles=F,O.regionUVs=M,null==S&&O.updateRegion(),O.hullLength=R<<1,O.sequence=S,i&&(O.edges=P,O.width=Y*s,O.height=X*s),O):null;case Fe.LinkedMesh:var N=0!=(16&o)?t.readStringRef():h;if(null==N)throw new Error("Path of linked mesh must not be null");var L=0!=(32&o)?t.readInt32():4294967295,_=0!=(64&o)?this.readSequence(t):null,B=0!=(128&o),D=t.readInt(!0),V=t.readStringRef(),U=0,q=0;i&&(U=t.readFloat(),q=t.readFloat());var W=this.attachmentLoader.newMeshAttachment(n,h,N,_);return W?(W.path=N,E.rgba8888ToColor(W.color,L),W.sequence=_,i&&(W.width=U*s,W.height=q*s),this.linkedMeshes.push(new Oe(W,D,a,V,B)),W):null;case Fe.Path:for(var G=0!=(16&o),z=0!=(32&o),j=this.readVertices(t,0!=(64&o)),H=C.newArray(j.length/6,0),$=0,J=H.length;$<J;$++)H[$]=t.readFloat()*s;var K=i?t.readInt32():0,Q=this.attachmentLoader.newPathAttachment(n,h);return Q?(Q.closed=G,Q.constantSpeed=z,Q.worldVerticesLength=j.length,Q.vertices=j.vertices,Q.bones=j.bones,Q.lengths=H,i&&E.rgba8888ToColor(Q.color,K),Q):null;case Fe.Point:var Z=t.readFloat(),tt=t.readFloat(),et=t.readFloat(),nt=i?t.readInt32():0,at=this.attachmentLoader.newPointAttachment(n,h);return at?(at.x=tt*s,at.y=et*s,at.rotation=Z,i&&E.rgba8888ToColor(at.color,nt),at):null;case Fe.Clipping:var rt=t.readInt(!0),it=this.readVertices(t,0!=(16&o)),st=i?t.readInt32():0,ot=this.attachmentLoader.newClippingAttachment(n,h);return ot?(ot.endSlot=e.slots[rt],ot.worldVerticesLength=it.length,ot.vertices=it.vertices,ot.bones=it.bones,i&&E.rgba8888ToColor(ot.color,st),ot):null}return null}},{key:"readSequence",value:function(t){var e=new _(t.readInt(!0));return e.start=t.readInt(!0),e.digits=t.readInt(!0),e.setupIndex=t.readInt(!0),e}},{key:"readVertices",value:function(t,e){var n=this.scale,a=t.readInt(!0),r=new Ne;if(r.length=a<<1,!e)return r.vertices=this.readFloatArray(t,r.length,n),r;for(var i=new Array,s=new Array,o=0;o<a;o++){var h=t.readInt(!0);s.push(h);for(var l=0;l<h;l++)s.push(t.readInt(!0)),i.push(t.readFloat()*n),i.push(t.readFloat()*n),i.push(t.readFloat())}return r.vertices=C.toFloatArray(i),r.bones=s,r}},{key:"readFloatArray",value:function(t,e,n){var a=new Array(e);if(1==n)for(var r=0;r<e;r++)a[r]=t.readFloat();else for(var i=0;i<e;i++)a[i]=t.readFloat()*n;return a}},{key:"readShortArray",value:function(t,e){for(var n=new Array(e),a=0;a<e;a++)n[a]=t.readInt(!0);return n}},{key:"readAnimation",value:function(t,e,n){t.readInt(!0);for(var a=new Array,r=this.scale,i=0,s=t.readInt(!0);i<s;i++)for(var o=t.readInt(!0),h=0,l=t.readInt(!0);h<l;h++){var c=t.readByte(),u=t.readInt(!0),f=u-1;switch(c){case Qe:for(var d=new ut(u,o),v=0;v<u;v++)d.setFrame(v,t.readFloat(),t.readStringRef());a.push(d);break;case Ze:for(var m=t.readInt(!0),p=new st(u,m,o),g=t.readFloat(),y=t.readUnsignedByte()/255,k=t.readUnsignedByte()/255,w=t.readUnsignedByte()/255,b=t.readUnsignedByte()/255,x=0,I=0;p.setFrame(x,g,y,k,w,b),x!=f;x++){var E=t.readFloat(),A=t.readUnsignedByte()/255,S=t.readUnsignedByte()/255,R=t.readUnsignedByte()/255,T=t.readUnsignedByte()/255;switch(t.readByte()){case yn:p.setStepped(x);break;case kn:Be(t,p,I++,x,0,g,E,y,A,1),Be(t,p,I++,x,1,g,E,k,S,1),Be(t,p,I++,x,2,g,E,w,R,1),Be(t,p,I++,x,3,g,E,b,T,1)}g=E,y=A,k=S,w=R,b=T}a.push(p);break;case tn:for(var M=t.readInt(!0),F=new ot(u,M,o),P=t.readFloat(),Y=t.readUnsignedByte()/255,X=t.readUnsignedByte()/255,O=t.readUnsignedByte()/255,N=0,L=0;F.setFrame(N,P,Y,X,O),N!=f;N++){var _=t.readFloat(),D=t.readUnsignedByte()/255,V=t.readUnsignedByte()/255,U=t.readUnsignedByte()/255;switch(t.readByte()){case yn:F.setStepped(N);break;case kn:Be(t,F,L++,N,0,P,_,Y,D,1),Be(t,F,L++,N,1,P,_,X,V,1),Be(t,F,L++,N,2,P,_,O,U,1)}P=_,Y=D,X=V,O=U}a.push(F);break;case en:for(var W=t.readInt(!0),G=new lt(u,W,o),z=t.readFloat(),j=t.readUnsignedByte()/255,H=t.readUnsignedByte()/255,wt=t.readUnsignedByte()/255,Mt=t.readUnsignedByte()/255,Ft=t.readUnsignedByte()/255,Pt=t.readUnsignedByte()/255,Yt=t.readUnsignedByte()/255,Xt=0,Ot=0;G.setFrame(Xt,z,j,H,wt,Mt,Ft,Pt,Yt),Xt!=f;Xt++){var Nt=t.readFloat(),Lt=t.readUnsignedByte()/255,_t=t.readUnsignedByte()/255,Bt=t.readUnsignedByte()/255,Dt=t.readUnsignedByte()/255,Vt=t.readUnsignedByte()/255,Ut=t.readUnsignedByte()/255,qt=t.readUnsignedByte()/255;switch(t.readByte()){case yn:G.setStepped(Xt);break;case kn:Be(t,G,Ot++,Xt,0,z,Nt,j,Lt,1),Be(t,G,Ot++,Xt,1,z,Nt,H,_t,1),Be(t,G,Ot++,Xt,2,z,Nt,wt,Bt,1),Be(t,G,Ot++,Xt,3,z,Nt,Mt,Dt,1),Be(t,G,Ot++,Xt,4,z,Nt,Ft,Vt,1),Be(t,G,Ot++,Xt,5,z,Nt,Pt,Ut,1),Be(t,G,Ot++,Xt,6,z,Nt,Yt,qt,1)}z=Nt,j=Lt,H=_t,wt=Bt,Mt=Dt,Ft=Vt,Pt=Ut,Yt=qt}a.push(G);break;case nn:for(var Wt=t.readInt(!0),Gt=new ct(u,Wt,o),zt=t.readFloat(),jt=t.readUnsignedByte()/255,Ht=t.readUnsignedByte()/255,$t=t.readUnsignedByte()/255,Jt=t.readUnsignedByte()/255,Kt=t.readUnsignedByte()/255,Qt=t.readUnsignedByte()/255,Zt=0,te=0;Gt.setFrame(Zt,zt,jt,Ht,$t,Jt,Kt,Qt),Zt!=f;Zt++){var ee=t.readFloat(),ne=t.readUnsignedByte()/255,ae=t.readUnsignedByte()/255,re=t.readUnsignedByte()/255,ie=t.readUnsignedByte()/255,se=t.readUnsignedByte()/255,oe=t.readUnsignedByte()/255;switch(t.readByte()){case yn:Gt.setStepped(Zt);break;case kn:Be(t,Gt,te++,Zt,0,zt,ee,jt,ne,1),Be(t,Gt,te++,Zt,1,zt,ee,Ht,ae,1),Be(t,Gt,te++,Zt,2,zt,ee,$t,re,1),Be(t,Gt,te++,Zt,3,zt,ee,Jt,ie,1),Be(t,Gt,te++,Zt,4,zt,ee,Kt,se,1),Be(t,Gt,te++,Zt,5,zt,ee,Qt,oe,1)}zt=ee,jt=ne,Ht=ae,$t=re,Jt=ie,Kt=se,Qt=oe}a.push(Gt);break;case an:for(var he=new ht(u,t.readInt(!0),o),le=t.readFloat(),ce=t.readUnsignedByte()/255,fe=0,de=0;he.setFrame(fe,le,ce),fe!=f;fe++){var ve=t.readFloat(),ge=t.readUnsignedByte()/255;switch(t.readByte()){case yn:he.setStepped(fe);break;case kn:Be(t,he,de++,fe,0,le,ve,ce,ge,1)}le=ve,ce=ge}a.push(he)}}for(var ye=0,ke=t.readInt(!0);ye<ke;ye++)for(var we=t.readInt(!0),be=0,xe=t.readInt(!0);be<xe;be++){var Ie=t.readByte(),Ee=t.readInt(!0);if(Ie!=Ke){var Ae=t.readInt(!0);switch(Ie){case Ve:a.push(Le(t,new $(Ee,Ae,we),1));break;case Ue:a.push(_e(t,new J(Ee,Ae,we),r));break;case qe:a.push(Le(t,new K(Ee,Ae,we),r));break;case We:a.push(Le(t,new Q(Ee,Ae,we),r));break;case Ge:a.push(_e(t,new Z(Ee,Ae,we),1));break;case ze:a.push(Le(t,new tt(Ee,Ae,we),1));break;case je:a.push(Le(t,new et(Ee,Ae,we),1));break;case He:a.push(_e(t,new nt(Ee,Ae,we),1));break;case $e:a.push(Le(t,new at(Ee,Ae,we),1));break;case Je:a.push(Le(t,new rt(Ee,Ae,we),1))}}else{for(var Se=new it(Ee,we),Re=0;Re<Ee;Re++)Se.setFrame(Re,t.readFloat(),t.readByte());a.push(Se)}}for(var Te=0,Ce=t.readInt(!0);Te<Ce;Te++){for(var Me=t.readInt(!0),Fe=t.readInt(!0),Pe=Fe-1,Ye=new mt(Fe,t.readInt(!0),Me),Xe=t.readByte(),Oe=t.readFloat(),Ne=0!=(1&Xe)?0!=(2&Xe)?t.readFloat():1:0,De=0!=(4&Xe)?t.readFloat()*r:0,wn=0,bn=0;Ye.setFrame(wn,Oe,Ne,De,0!=(8&Xe)?1:-1,0!=(16&Xe),0!=(32&Xe)),wn!=Pe;wn++){Xe=t.readByte();var xn=t.readFloat(),In=0!=(1&Xe)?0!=(2&Xe)?t.readFloat():1:0,En=0!=(4&Xe)?t.readFloat()*r:0;0!=(64&Xe)?Ye.setStepped(wn):0!=(128&Xe)&&(Be(t,Ye,bn++,wn,0,Oe,xn,Ne,In,1),Be(t,Ye,bn++,wn,1,Oe,xn,De,En,r)),Oe=xn,Ne=In,De=En}a.push(Ye)}for(var An=0,Sn=t.readInt(!0);An<Sn;An++){for(var Rn=t.readInt(!0),Tn=t.readInt(!0),Cn=Tn-1,Mn=new pt(Tn,t.readInt(!0),Rn),Fn=t.readFloat(),Pn=t.readFloat(),Yn=t.readFloat(),Xn=t.readFloat(),On=t.readFloat(),Nn=t.readFloat(),Ln=t.readFloat(),_n=0,Bn=0;Mn.setFrame(_n,Fn,Pn,Yn,Xn,On,Nn,Ln),_n!=Cn;_n++){var Dn=t.readFloat(),Vn=t.readFloat(),Un=t.readFloat(),qn=t.readFloat(),Wn=t.readFloat(),Gn=t.readFloat(),zn=t.readFloat();switch(t.readByte()){case yn:Mn.setStepped(_n);break;case kn:Be(t,Mn,Bn++,_n,0,Fn,Dn,Pn,Vn,1),Be(t,Mn,Bn++,_n,1,Fn,Dn,Yn,Un,1),Be(t,Mn,Bn++,_n,2,Fn,Dn,Xn,qn,1),Be(t,Mn,Bn++,_n,3,Fn,Dn,On,Wn,1),Be(t,Mn,Bn++,_n,4,Fn,Dn,Nn,Gn,1),Be(t,Mn,Bn++,_n,5,Fn,Dn,Ln,zn,1)}Fn=Dn,Pn=Vn,Yn=Un,Xn=qn,On=Wn,Nn=Gn,Ln=zn}a.push(Mn)}for(var jn=0,Hn=t.readInt(!0);jn<Hn;jn++)for(var $n=t.readInt(!0),Jn=n.pathConstraints[$n],Kn=0,Qn=t.readInt(!0);Kn<Qn;Kn++){var Zn=t.readByte(),ta=t.readInt(!0),ea=t.readInt(!0);switch(Zn){case on:a.push(Le(t,new gt(ta,ea,$n),Jn.positionMode==me.Fixed?r:1));break;case hn:a.push(Le(t,new yt(ta,ea,$n),Jn.spacingMode==pe.Length||Jn.spacingMode==pe.Fixed?r:1));break;case ln:for(var na=new kt(ta,ea,$n),aa=t.readFloat(),ra=t.readFloat(),ia=t.readFloat(),sa=t.readFloat(),oa=0,ha=0,la=na.getFrameCount()-1;na.setFrame(oa,aa,ra,ia,sa),oa!=la;oa++){var ca=t.readFloat(),ua=t.readFloat(),fa=t.readFloat(),da=t.readFloat();switch(t.readByte()){case yn:na.setStepped(oa);break;case kn:Be(t,na,ha++,oa,0,aa,ca,ra,ua,1),Be(t,na,ha++,oa,1,aa,ca,ia,fa,1),Be(t,na,ha++,oa,2,aa,ca,sa,da,1)}aa=ca,ra=ua,ia=fa,sa=da}a.push(na)}}for(var va=0,ma=t.readInt(!0);va<ma;va++)for(var pa=t.readInt(!0)-1,ga=0,ya=t.readInt(!0);ga<ya;ga++){var ka=t.readByte(),wa=t.readInt(!0);if(ka!=gn){var ba=t.readInt(!0);switch(ka){case cn:a.push(Le(t,new bt(wa,ba,pa),1));break;case un:a.push(Le(t,new xt(wa,ba,pa),1));break;case fn:a.push(Le(t,new It(wa,ba,pa),1));break;case dn:a.push(Le(t,new Et(wa,ba,pa),1));break;case vn:a.push(Le(t,new At(wa,ba,pa),1));break;case mn:a.push(Le(t,new St(wa,ba,pa),1));break;case pn:a.push(Le(t,new Rt(wa,ba,pa),1))}}else{for(var xa=new Tt(wa,pa),Ia=0;Ia<wa;Ia++)xa.setFrame(Ia,t.readFloat());a.push(xa)}}for(var Ea=0,Aa=t.readInt(!0);Ea<Aa;Ea++)for(var Sa=n.skins[t.readInt(!0)],Ra=0,Ta=t.readInt(!0);Ra<Ta;Ra++)for(var Ca=t.readInt(!0),Ma=0,Fa=t.readInt(!0);Ma<Fa;Ma++){var Pa=t.readStringRef();if(!Pa)throw new Error("attachmentName must not be null.");var Ya=Sa.getAttachment(Ca,Pa),Xa=t.readByte(),Oa=t.readInt(!0),Na=Oa-1;switch(Xa){case rn:for(var La=Ya,_a=La.bones,Ba=La.vertices,Da=_a?Ba.length/3*2:Ba.length,Va=t.readInt(!0),Ua=new ft(Oa,Va,Ca,La),qa=t.readFloat(),Wa=0,Ga=0;;Wa++){var za=void 0,ja=t.readInt(!0);if(0==ja)za=_a?C.newFloatArray(Da):Ba;else{za=C.newFloatArray(Da);var Ha=t.readInt(!0);if(ja+=Ha,1==r)for(var $a=Ha;$a<ja;$a++)za[$a]=t.readFloat();else for(var Ja=Ha;Ja<ja;Ja++)za[Ja]=t.readFloat()*r;if(!_a)for(var Ka=0,Qa=za.length;Ka<Qa;Ka++)za[Ka]+=Ba[Ka]}if(Ua.setFrame(Wa,qa,za),Wa==Na)break;var Za=t.readFloat();switch(t.readByte()){case yn:Ua.setStepped(Wa);break;case kn:Be(t,Ua,Ga++,Wa,0,qa,Za,0,1,1)}qa=Za}a.push(Ua);break;case sn:for(var tr=new Ct(Oa,Ca,Ya),er=0;er<Oa;er++){var nr=t.readFloat(),ar=t.readInt32();tr.setFrame(er,nr,B[15&ar],ar>>4,t.readFloat())}a.push(tr)}}var rr=t.readInt(!0);if(rr>0){for(var ir=new vt(rr),sr=n.slots.length,or=0;or<rr;or++){for(var hr=t.readFloat(),lr=t.readInt(!0),cr=C.newArray(sr,0),ur=sr-1;ur>=0;ur--)cr[ur]=-1;for(var fr=C.newArray(sr-lr,0),dr=0,vr=0,mr=0;mr<lr;mr++){for(var pr=t.readInt(!0);dr!=pr;)fr[vr++]=dr++;cr[dr+t.readInt(!0)]=dr++}for(;dr<sr;)fr[vr++]=dr++;for(var gr=sr-1;gr>=0;gr--)-1==cr[gr]&&(cr[gr]=fr[--vr]);ir.setFrame(or,hr,cr)}a.push(ir)}var yr=t.readInt(!0);if(yr>0){for(var kr=new dt(yr),wr=0;wr<yr;wr++){var br=t.readFloat(),xr=n.events[t.readInt(!0)],Ir=new ue(br,xr);Ir.intValue=t.readInt(!1),Ir.floatValue=t.readFloat(),Ir.stringValue=t.readString(),null==Ir.stringValue&&(Ir.stringValue=xr.stringValue),Ir.data.audioPath&&(Ir.volume=t.readFloat(),Ir.balance=t.readFloat()),kr.setFrame(wr,Ir)}a.push(kr)}for(var Er=0,Ar=0,Sr=a.length;Ar<Sr;Ar++)Er=Math.max(Er,a[Ar].getDuration());return new q(e,a,Er)}}]),Xe=h((function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Array,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new DataView(e.buffer);s(this,t),l(this,"strings",void 0),l(this,"index",void 0),l(this,"buffer",void 0),this.strings=n,this.index=a,this.buffer=r}),[{key:"readByte",value:function(){return this.buffer.getInt8(this.index++)}},{key:"readUnsignedByte",value:function(){return this.buffer.getUint8(this.index++)}},{key:"readShort",value:function(){var t=this.buffer.getInt16(this.index);return this.index+=2,t}},{key:"readInt32",value:function(){var t=this.buffer.getInt32(this.index);return this.index+=4,t}},{key:"readInt",value:function(t){var e=this.readByte(),n=127&e;return 0!=(128&e)&&(n|=(127&(e=this.readByte()))<<7,0!=(128&e)&&(n|=(127&(e=this.readByte()))<<14,0!=(128&e)&&(n|=(127&(e=this.readByte()))<<21,0!=(128&e)&&(n|=(127&(e=this.readByte()))<<28)))),t?n:n>>>1^-(1&n)}},{key:"readStringRef",value:function(){var t=this.readInt(!0);return 0==t?null:this.strings[t-1]}},{key:"readString",value:function(){var t=this.readInt(!0);switch(t){case 0:return null;case 1:return""}t--;for(var e="",n=0;n<t;){var a=this.readUnsignedByte();switch(a>>4){case 12:case 13:e+=String.fromCharCode((31&a)<<6|63&this.readByte()),n+=2;break;case 14:e+=String.fromCharCode((15&a)<<12|(63&this.readByte())<<6|63&this.readByte()),n+=3;break;default:e+=String.fromCharCode(a),n++}}return e}},{key:"readFloat",value:function(){var t=this.buffer.getFloat32(this.index);return this.index+=4,t}},{key:"readBoolean",value:function(){return 0!=this.readByte()}}]),Oe=h((function t(e,n,a,r,i){s(this,t),l(this,"parent",void 0),l(this,"skinIndex",void 0),l(this,"slotIndex",void 0),l(this,"mesh",void 0),l(this,"inheritTimeline",void 0),this.mesh=e,this.skinIndex=n,this.slotIndex=a,this.parent=r,this.inheritTimeline=i})),Ne=h((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;s(this,t),l(this,"bones",void 0),l(this,"vertices",void 0),l(this,"length",void 0),this.bones=e,this.vertices=n,this.length=a}));function Le(t,e,n){for(var a=t.readFloat(),r=t.readFloat()*n,i=0,s=0,o=e.getFrameCount()-1;e.setFrame(i,a,r),i!=o;i++){var h=t.readFloat(),l=t.readFloat()*n;switch(t.readByte()){case yn:e.setStepped(i);break;case kn:Be(t,e,s++,i,0,a,h,r,l,n)}a=h,r=l}return e}function _e(t,e,n){for(var a=t.readFloat(),r=t.readFloat()*n,i=t.readFloat()*n,s=0,o=0,h=e.getFrameCount()-1;e.setFrame(s,a,r,i),s!=h;s++){var l=t.readFloat(),c=t.readFloat()*n,u=t.readFloat()*n;switch(t.readByte()){case yn:e.setStepped(s);break;case kn:Be(t,e,o++,s,0,a,l,r,c,n),Be(t,e,o++,s,1,a,l,i,u,n)}a=l,r=c,i=u}return e}function Be(t,e,n,a,r,i,s,o,h,l){e.setBezier(n,a,r,i,o,t.readFloat(),t.readFloat()*l,t.readFloat(),t.readFloat()*l,s,h)}!function(t){t[t.Region=0]="Region",t[t.BoundingBox=1]="BoundingBox",t[t.Mesh=2]="Mesh",t[t.LinkedMesh=3]="LinkedMesh",t[t.Path=4]="Path",t[t.Point=5]="Point",t[t.Clipping=6]="Clipping"}(Fe||(Fe={}));var De,Ve=0,Ue=1,qe=2,We=3,Ge=4,ze=5,je=6,He=7,$e=8,Je=9,Ke=10,Qe=0,Ze=1,tn=2,en=3,nn=4,an=5,rn=0,sn=1,on=0,hn=1,ln=2,cn=0,un=1,fn=2,dn=4,vn=5,mn=6,pn=7,gn=8,yn=1,kn=2,wn=h((function t(){s(this,t),l(this,"minX",0),l(this,"minY",0),l(this,"maxX",0),l(this,"maxY",0),l(this,"boundingBoxes",new Array),l(this,"polygons",new Array),l(this,"polygonPool",new F((function(){return C.newFloatArray(16)})))}),[{key:"update",value:function(t,e){if(!t)throw new Error("skeleton cannot be null.");var n=this.boundingBoxes,a=this.polygons,r=this.polygonPool,i=t.slots,s=i.length;n.length=0,r.freeAll(a),a.length=0;for(var o=0;o<s;o++){var h=i[o];if(h.bone.active){var l=h.getAttachment();if(l instanceof qt){var c=l;n.push(c);var u=r.obtain();u.length!=c.worldVerticesLength&&(u=C.newFloatArray(c.worldVerticesLength)),a.push(u),c.computeWorldVertices(h,0,c.worldVerticesLength,u,0,2)}}}e?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)}},{key:"aabbCompute",value:function(){for(var t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY,r=this.polygons,i=0,s=r.length;i<s;i++)for(var o=r[i],h=o,l=0,c=o.length;l<c;l+=2){var u=h[l],f=h[l+1];t=Math.min(t,u),e=Math.min(e,f),n=Math.max(n,u),a=Math.max(a,f)}this.minX=t,this.minY=e,this.maxX=n,this.maxY=a}},{key:"aabbContainsPoint",value:function(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY}},{key:"aabbIntersectsSegment",value:function(t,e,n,a){var r=this.minX,i=this.minY,s=this.maxX,o=this.maxY;if(t<=r&&n<=r||e<=i&&a<=i||t>=s&&n>=s||e>=o&&a>=o)return!1;var h=(a-e)/(n-t),l=h*(r-t)+e;if(l>i&&l<o)return!0;if((l=h*(s-t)+e)>i&&l<o)return!0;var c=(i-e)/h+t;return c>r&&c<s||(c=(o-e)/h+t)>r&&c<s}},{key:"aabbIntersectsSkeleton",value:function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY}},{key:"containsPoint",value:function(t,e){for(var n=this.polygons,a=0,r=n.length;a<r;a++)if(this.containsPointPolygon(n[a],t,e))return this.boundingBoxes[a];return null}},{key:"containsPointPolygon",value:function(t,e,n){for(var a=t,r=t.length,i=r-2,s=!1,o=0;o<r;o+=2){var h=a[o+1],l=a[i+1];if(h<n&&l>=n||l<n&&h>=n){var c=a[o];c+(n-h)/(l-h)*(a[i]-c)<e&&(s=!s)}i=o}return s}},{key:"intersectsSegment",value:function(t,e,n,a){for(var r=this.polygons,i=0,s=r.length;i<s;i++)if(this.intersectsSegmentPolygon(r[i],t,e,n,a))return this.boundingBoxes[i];return null}},{key:"intersectsSegmentPolygon",value:function(t,e,n,a,r){for(var i=t,s=t.length,o=e-a,h=n-r,l=e*r-n*a,c=i[s-2],u=i[s-1],f=0;f<s;f+=2){var d=i[f],v=i[f+1],m=c*v-u*d,p=c-d,g=u-v,y=o*g-h*p,k=(l*p-o*m)/y;if((k>=c&&k<=d||k>=d&&k<=c)&&(k>=e&&k<=a||k>=a&&k<=e)){var w=(l*g-h*m)/y;if((w>=u&&w<=v||w>=v&&w<=u)&&(w>=n&&w<=r||w>=r&&w<=n))return!0}c=d,u=v}return!1}},{key:"getPolygon",value:function(t){if(!t)throw new Error("boundingBox cannot be null.");var e=this.boundingBoxes.indexOf(t);return-1==e?null:this.polygons[e]}},{key:"getWidth",value:function(){return this.maxX-this.minX}},{key:"getHeight",value:function(){return this.maxY-this.minY}}]),bn=function(){function t(){s(this,t),l(this,"convexPolygons",new Array),l(this,"convexPolygonsIndices",new Array),l(this,"indicesArray",new Array),l(this,"isConcaveArray",new Array),l(this,"triangles",new Array),l(this,"polygonPool",new F((function(){return new Array}))),l(this,"polygonIndicesPool",new F((function(){return new Array})))}return h(t,[{key:"triangulate",value:function(e){var n=e,a=e.length>>1,r=this.indicesArray;r.length=0;for(var i=0;i<a;i++)r[i]=i;var s=this.isConcaveArray;s.length=0;for(var o=0,h=a;o<h;++o)s[o]=t.isConcave(o,a,n,r);var l=this.triangles;for(l.length=0;a>3;){for(var c=a-1,u=0,f=1;;){t:if(!s[u]){for(var d=r[c]<<1,v=r[u]<<1,m=r[f]<<1,p=n[d],g=n[d+1],y=n[v],k=n[v+1],w=n[m],b=n[m+1],x=(f+1)%a;x!=c;x=(x+1)%a)if(s[x]){var I=r[x]<<1,E=n[I],A=n[I+1];if(t.positiveArea(w,b,p,g,E,A)&&t.positiveArea(p,g,y,k,E,A)&&t.positiveArea(y,k,w,b,E,A))break t}break}if(0==f){do{if(!s[u])break;u--}while(u>0);break}c=u,u=f,f=(f+1)%a}l.push(r[(a+u-1)%a]),l.push(r[u]),l.push(r[(u+1)%a]),r.splice(u,1),s.splice(u,1);var S=(--a+u-1)%a,R=u==a?0:u;s[S]=t.isConcave(S,a,n,r),s[R]=t.isConcave(R,a,n,r)}return 3==a&&(l.push(r[2]),l.push(r[0]),l.push(r[1])),l}},{key:"decompose",value:function(e,n){var a=e,r=this.convexPolygons;this.polygonPool.freeAll(r),r.length=0;var i=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(i),i.length=0;var s=this.polygonIndicesPool.obtain();s.length=0;var o=this.polygonPool.obtain();o.length=0;for(var h=-1,l=0,c=0,u=n.length;c<u;c+=3){var f=n[c]<<1,d=n[c+1]<<1,v=n[c+2]<<1,m=a[f],p=a[f+1],g=a[d],y=a[d+1],k=a[v],w=a[v+1],b=!1;if(h==f){var x=o.length-4,I=t.winding(o[x],o[x+1],o[x+2],o[x+3],k,w),E=t.winding(k,w,o[0],o[1],o[2],o[3]);I==l&&E==l&&(o.push(k),o.push(w),s.push(v),b=!0)}b||(o.length>0?(r.push(o),i.push(s)):(this.polygonPool.free(o),this.polygonIndicesPool.free(s)),(o=this.polygonPool.obtain()).length=0,o.push(m),o.push(p),o.push(g),o.push(y),o.push(k),o.push(w),(s=this.polygonIndicesPool.obtain()).length=0,s.push(f),s.push(d),s.push(v),l=t.winding(m,p,g,y,k,w),h=f)}o.length>0&&(r.push(o),i.push(s));for(var A=0,S=r.length;A<S;A++)if(0!=(s=i[A]).length)for(var R=s[0],T=s[s.length-1],C=(o=r[A]).length-4,M=o[C],F=o[C+1],P=o[C+2],Y=o[C+3],X=o[0],O=o[1],N=o[2],L=o[3],_=t.winding(M,F,P,Y,X,O),B=0;B<S;B++)if(B!=A){var D=i[B];if(3==D.length){var V=D[0],U=D[1],q=D[2],W=r[B],G=W[W.length-2],z=W[W.length-1];if(V==R&&U==T){var j=t.winding(M,F,P,Y,G,z),H=t.winding(G,z,X,O,N,L);j==_&&H==_&&(W.length=0,D.length=0,o.push(G),o.push(z),s.push(q),M=P,F=Y,P=G,Y=z,B=0)}}}for(var $=r.length-1;$>=0;$--)0==(o=r[$]).length&&(r.splice($,1),this.polygonPool.free(o),s=i[$],i.splice($,1),this.polygonIndicesPool.free(s));return r}}],[{key:"isConcave",value:function(t,e,n,a){var r=a[(e+t-1)%e]<<1,i=a[t]<<1,s=a[(t+1)%e]<<1;return!this.positiveArea(n[r],n[r+1],n[i],n[i+1],n[s],n[s+1])}},{key:"positiveArea",value:function(t,e,n,a,r,i){return t*(i-a)+n*(e-i)+r*(a-e)>=0}},{key:"winding",value:function(t,e,n,a,r,i){var s=n-t,o=a-e;return r*o-i*s+s*e-t*o>=0?1:-1}}])}(),xn=function(){function t(){s(this,t),l(this,"triangulator",new bn),l(this,"clippingPolygon",new Array),l(this,"clipOutput",new Array),l(this,"clippedVertices",new Array),l(this,"clippedTriangles",new Array),l(this,"scratch",new Array),l(this,"clipAttachment",null),l(this,"clippingPolygons",null)}return h(t,[{key:"clipStart",value:function(e,n){if(this.clipAttachment)return 0;this.clipAttachment=n;var a=n.worldVerticesLength,r=C.setArraySize(this.clippingPolygon,a);n.computeWorldVertices(e,0,a,r,0,2);var i=this.clippingPolygon;t.makeClockwise(i);for(var s=this.clippingPolygons=this.triangulator.decompose(i,this.triangulator.triangulate(i)),o=0,h=s.length;o<h;o++){var l=s[o];t.makeClockwise(l),l.push(l[0]),l.push(l[1])}return s.length}},{key:"clipEndWithSlot",value:function(t){this.clipAttachment&&this.clipAttachment.endSlot==t.data&&this.clipEnd()}},{key:"clipEnd",value:function(){this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)}},{key:"isClipping",value:function(){return null!=this.clipAttachment}},{key:"clipTriangles",value:function(t,e,n,a,r,i,s){a&&r&&i&&"boolean"==typeof s?this.clipTrianglesRender(t,e,n,a,r,i,s):this.clipTrianglesNoRender(t,e,n)}},{key:"clipTrianglesNoRender",value:function(t,e,n){var a=this.clipOutput,r=this.clippedVertices,i=this.clippedTriangles,s=this.clippingPolygons,o=s.length,h=0;r.length=0,i.length=0;for(var l=0;l<n;l+=3)for(var c=e[l]<<1,u=t[c],f=t[c+1],d=t[c=e[l+1]<<1],v=t[c+1],m=t[c=e[l+2]<<1],p=t[c+1],g=0;g<o;g++){var y=r.length;if(!this.clip(u,f,d,v,m,p,s[g],a)){var k=C.setArraySize(r,y+6);k[y]=u,k[y+1]=f,k[y+2]=d,k[y+3]=v,k[y+4]=m,k[y+5]=p,y=i.length;var w=C.setArraySize(i,y+3);w[y]=h,w[y+1]=h+1,w[y+2]=h+2,h+=3;break}var b=a.length;if(0!=b){for(var x=b>>1,I=this.clipOutput,E=C.setArraySize(r,y+2*x),A=0;A<b;A+=2,y+=2){var S=I[A],R=I[A+1];E[y]=S,E[y+1]=R}y=i.length;var T=C.setArraySize(i,y+3*(x-2));x--;for(var M=1;M<x;M++,y+=3)T[y]=h,T[y+1]=h+M,T[y+2]=h+M+1;h+=x+1}}}},{key:"clipTrianglesRender",value:function(t,e,n,a,r,i,s){var o=this.clipOutput,h=this.clippedVertices,l=this.clippedTriangles,c=this.clippingPolygons,u=c.length,f=s?12:8,d=0;h.length=0,l.length=0;for(var v=0;v<n;v+=3)for(var m=e[v]<<1,p=t[m],g=t[m+1],y=a[m],k=a[m+1],w=t[m=e[v+1]<<1],b=t[m+1],x=a[m],I=a[m+1],E=t[m=e[v+2]<<1],A=t[m+1],S=a[m],R=a[m+1],T=0;T<u;T++){var M=h.length;if(!this.clip(p,g,w,b,E,A,c[T],o)){var F=C.setArraySize(h,M+3*f);F[M]=p,F[M+1]=g,F[M+2]=r.r,F[M+3]=r.g,F[M+4]=r.b,F[M+5]=r.a,s?(F[M+6]=y,F[M+7]=k,F[M+8]=i.r,F[M+9]=i.g,F[M+10]=i.b,F[M+11]=i.a,F[M+12]=w,F[M+13]=b,F[M+14]=r.r,F[M+15]=r.g,F[M+16]=r.b,F[M+17]=r.a,F[M+18]=x,F[M+19]=I,F[M+20]=i.r,F[M+21]=i.g,F[M+22]=i.b,F[M+23]=i.a,F[M+24]=E,F[M+25]=A,F[M+26]=r.r,F[M+27]=r.g,F[M+28]=r.b,F[M+29]=r.a,F[M+30]=S,F[M+31]=R,F[M+32]=i.r,F[M+33]=i.g,F[M+34]=i.b,F[M+35]=i.a):(F[M+6]=y,F[M+7]=k,F[M+8]=w,F[M+9]=b,F[M+10]=r.r,F[M+11]=r.g,F[M+12]=r.b,F[M+13]=r.a,F[M+14]=x,F[M+15]=I,F[M+16]=E,F[M+17]=A,F[M+18]=r.r,F[M+19]=r.g,F[M+20]=r.b,F[M+21]=r.a,F[M+22]=S,F[M+23]=R),M=l.length;var P=C.setArraySize(l,M+3);P[M]=d,P[M+1]=d+1,P[M+2]=d+2,d+=3;break}var Y=o.length;if(0!=Y){for(var X=b-A,O=E-w,N=p-E,L=A-g,_=1/(X*N+O*(g-A)),B=Y>>1,D=this.clipOutput,V=C.setArraySize(h,M+B*f),U=0;U<Y;U+=2,M+=f){var q=D[U],W=D[U+1];V[M]=q,V[M+1]=W,V[M+2]=r.r,V[M+3]=r.g,V[M+4]=r.b,V[M+5]=r.a;var G=q-E,z=W-A,j=(X*G+O*z)*_,H=(L*G+N*z)*_,$=1-j-H;V[M+6]=y*j+x*H+S*$,V[M+7]=k*j+I*H+R*$,s&&(V[M+8]=i.r,V[M+9]=i.g,V[M+10]=i.b,V[M+11]=i.a)}M=l.length;var J=C.setArraySize(l,M+3*(B-2));B--;for(var K=1;K<B;K++,M+=3)J[M]=d,J[M+1]=d+K,J[M+2]=d+K+1;d+=B+1}}}},{key:"clip",value:function(t,e,n,a,r,i,s,o){var h,l=o,c=!1;s.length%4>=2?(h=o,o=this.scratch):h=this.scratch,h.length=0,h.push(t),h.push(e),h.push(n),h.push(a),h.push(r),h.push(i),h.push(t),h.push(e),o.length=0;for(var u=s.length-4,f=s,d=0;;d+=2){for(var v=f[d],m=f[d+1],p=v-f[d+2],g=m-f[d+3],y=o.length,k=h,w=0,b=h.length-2;w<b;){var x=k[w],I=k[w+1],E=k[w+=2],A=k[w+1],S=g*(v-E)>p*(m-A),R=g*(v-x)-p*(m-I);if(R>0){if(S){o.push(E),o.push(A);continue}var T=E-x,C=A-I,M=R/(T*g-C*p);if(!(M>=0&&M<=1)){o.push(E),o.push(A);continue}o.push(x+T*M),o.push(I+C*M)}else if(S){var F=E-x,P=A-I,Y=R/(F*g-P*p);if(!(Y>=0&&Y<=1)){o.push(E),o.push(A);continue}o.push(x+F*Y),o.push(I+P*Y),o.push(E),o.push(A)}c=!0}if(y==o.length)return l.length=0,!0;if(o.push(o[0]),o.push(o[1]),d==u)break;var X=o;(o=h).length=0,h=X}if(l!=o){l.length=0;for(var O=0,N=o.length-2;O<N;O++)l[O]=o[O]}else l.length=l.length-2;return c}}],[{key:"makeClockwise",value:function(t){for(var e=t,n=t.length,a=e[n-2]*e[1]-e[0]*e[n-1],r=0,i=0,s=0,o=0,h=n-3;o<h;o+=2)r=e[o],i=e[o+1],s=e[o+2],a+=r*e[o+3]-s*i;if(!(a<0))for(var l=0,c=n-2,u=n>>1;l<u;l+=2){var f=e[l],d=e[l+1],v=c-l;e[l]=e[v],e[l+1]=e[v+1],e[v]=f,e[v+1]=d}}}])}(),In=h((function t(e){s(this,t),l(this,"attachmentLoader",void 0),l(this,"scale",1),l(this,"linkedMeshes",new Array),this.attachmentLoader=e}),[{key:"readSkeletonData",value:function(t){var e,n,a=this.scale,r=new Re,i="string"==typeof t?JSON.parse(t):t,s=i.skeleton;if(s&&(r.hash=s.hash,r.version=s.spine,r.x=s.x,r.y=s.y,r.width=s.width,r.height=s.height,r.referenceScale=Tn(s,"referenceScale",100)*a,r.fps=s.fps,r.imagesPath=null!==(e=s.images)&&void 0!==e?e:null,r.audioPath=null!==(n=s.audio)&&void 0!==n?n:null),i.bones)for(var o=0;o<i.bones.length;o++){var h=i.bones[o],l=null,c=Tn(h,"parent",null);c&&(l=r.findBone(c));var u=new se(r.bones.length,h.name,l);u.length=Tn(h,"length",0)*a,u.x=Tn(h,"x",0)*a,u.y=Tn(h,"y",0)*a,u.rotation=Tn(h,"rotation",0),u.scaleX=Tn(h,"scaleX",1),u.scaleY=Tn(h,"scaleY",1),u.shearX=Tn(h,"shearX",0),u.shearY=Tn(h,"shearY",0),u.inherit=C.enumValue(re,Tn(h,"inherit","Normal")),u.skinRequired=Tn(h,"skin",!1);var f=Tn(h,"color",null);f&&u.color.setFromString(f),r.bones.push(u)}if(i.slots)for(var d=0;d<i.slots.length;d++){var v=i.slots[d],m=v.name,p=r.findBone(v.bone);if(!p)throw new Error("Couldn't find bone ".concat(v.bone," for slot ").concat(m));var g=new Me(r.slots.length,m,p),y=Tn(v,"color",null);y&&g.color.setFromString(y);var k=Tn(v,"dark",null);k&&(g.darkColor=E.fromString(k)),g.attachmentName=Tn(v,"attachment",null),g.blendMode=C.enumValue(Ae,Tn(v,"blend","normal")),g.visible=Tn(v,"visible",!0),r.slots.push(g)}if(i.ik)for(var w=0;w<i.ik.length;w++){var b=i.ik[w],x=new ve(b.name);x.order=Tn(b,"order",0),x.skinRequired=Tn(b,"skin",!1);for(var I=0;I<b.bones.length;I++){var A=r.findBone(b.bones[I]);if(!A)throw new Error("Couldn't find bone ".concat(b.bones[I]," for IK constraint ").concat(b.name,"."));x.bones.push(A)}var S=r.findBone(b.target);if(!S)throw new Error("Couldn't find target bone ".concat(b.target," for IK constraint ").concat(b.name,"."));x.target=S,x.mix=Tn(b,"mix",1),x.softness=Tn(b,"softness",0)*a,x.bendDirection=Tn(b,"bendPositive",!0)?1:-1,x.compress=Tn(b,"compress",!1),x.stretch=Tn(b,"stretch",!1),x.uniform=Tn(b,"uniform",!1),r.ikConstraints.push(x)}if(i.transform)for(var R=0;R<i.transform.length;R++){var T=i.transform[R],M=new Pe(T.name);M.order=Tn(T,"order",0),M.skinRequired=Tn(T,"skin",!1);for(var F=0;F<T.bones.length;F++){var P=T.bones[F],Y=r.findBone(P);if(!Y)throw new Error("Couldn't find bone ".concat(P," for transform constraint ").concat(T.name,"."));M.bones.push(Y)}var X=T.target,O=r.findBone(X);if(!O)throw new Error("Couldn't find target bone ".concat(X," for transform constraint ").concat(T.name,"."));M.target=O,M.local=Tn(T,"local",!1),M.relative=Tn(T,"relative",!1),M.offsetRotation=Tn(T,"rotation",0),M.offsetX=Tn(T,"x",0)*a,M.offsetY=Tn(T,"y",0)*a,M.offsetScaleX=Tn(T,"scaleX",0),M.offsetScaleY=Tn(T,"scaleY",0),M.offsetShearY=Tn(T,"shearY",0),M.mixRotate=Tn(T,"mixRotate",1),M.mixX=Tn(T,"mixX",1),M.mixY=Tn(T,"mixY",M.mixX),M.mixScaleX=Tn(T,"mixScaleX",1),M.mixScaleY=Tn(T,"mixScaleY",M.mixScaleX),M.mixShearY=Tn(T,"mixShearY",1),r.transformConstraints.push(M)}if(i.path)for(var N=0;N<i.path.length;N++){var L=i.path[N],_=new ye(L.name);_.order=Tn(L,"order",0),_.skinRequired=Tn(L,"skin",!1);for(var B=0;B<L.bones.length;B++){var D=L.bones[B],V=r.findBone(D);if(!V)throw new Error("Couldn't find bone ".concat(D," for path constraint ").concat(L.name,"."));_.bones.push(V)}var U=L.target,q=r.findSlot(U);if(!q)throw new Error("Couldn't find target slot ".concat(U," for path constraint ").concat(L.name,"."));_.target=q,_.positionMode=C.enumValue(me,Tn(L,"positionMode","Percent")),_.spacingMode=C.enumValue(pe,Tn(L,"spacingMode","Length")),_.rotateMode=C.enumValue(ge,Tn(L,"rotateMode","Tangent")),_.offsetRotation=Tn(L,"rotation",0),_.position=Tn(L,"position",0),_.positionMode==me.Fixed&&(_.position*=a),_.spacing=Tn(L,"spacing",0),_.spacingMode!=pe.Length&&_.spacingMode!=pe.Fixed||(_.spacing*=a),_.mixRotate=Tn(L,"mixRotate",1),_.mixX=Tn(L,"mixX",1),_.mixY=Tn(L,"mixY",_.mixX),r.pathConstraints.push(_)}if(i.physics)for(var W=0;W<i.physics.length;W++){var G=i.physics[W],z=new Se(G.name);z.order=Tn(G,"order",0),z.skinRequired=Tn(G,"skin",!1);var j=G.bone,H=r.findBone(j);if(null==H)throw new Error("Physics bone not found: "+j);z.bone=H,z.x=Tn(G,"x",0),z.y=Tn(G,"y",0),z.rotate=Tn(G,"rotate",0),z.scaleX=Tn(G,"scaleX",0),z.shearX=Tn(G,"shearX",0),z.limit=Tn(G,"limit",5e3)*a,z.step=1/Tn(G,"fps",60),z.inertia=Tn(G,"inertia",1),z.strength=Tn(G,"strength",100),z.damping=Tn(G,"damping",1),z.massInverse=1/Tn(G,"mass",1),z.wind=Tn(G,"wind",0),z.gravity=Tn(G,"gravity",0),z.mix=Tn(G,"mix",1),z.inertiaGlobal=Tn(G,"inertiaGlobal",!1),z.strengthGlobal=Tn(G,"strengthGlobal",!1),z.dampingGlobal=Tn(G,"dampingGlobal",!1),z.massGlobal=Tn(G,"massGlobal",!1),z.windGlobal=Tn(G,"windGlobal",!1),z.gravityGlobal=Tn(G,"gravityGlobal",!1),z.mixGlobal=Tn(G,"mixGlobal",!1),r.physicsConstraints.push(z)}if(i.skins)for(var $=0;$<i.skins.length;$++){var J=i.skins[$],K=new Ce(J.name);if(J.bones)for(var Q=0;Q<J.bones.length;Q++){var Z=J.bones[Q],tt=r.findBone(Z);if(!tt)throw new Error("Couldn't find bone ".concat(Z," for skin ").concat(J.name,"."));K.bones.push(tt)}if(J.ik)for(var et=0;et<J.ik.length;et++){var nt=J.ik[et],at=r.findIkConstraint(nt);if(!at)throw new Error("Couldn't find IK constraint ".concat(nt," for skin ").concat(J.name,"."));K.constraints.push(at)}if(J.transform)for(var rt=0;rt<J.transform.length;rt++){var it=J.transform[rt],st=r.findTransformConstraint(it);if(!st)throw new Error("Couldn't find transform constraint ".concat(it," for skin ").concat(J.name,"."));K.constraints.push(st)}if(J.path)for(var ot=0;ot<J.path.length;ot++){var ht=J.path[ot],lt=r.findPathConstraint(ht);if(!lt)throw new Error("Couldn't find path constraint ".concat(ht," for skin ").concat(J.name,"."));K.constraints.push(lt)}if(J.physics)for(var ct=0;ct<J.physics.length;ct++){var ut=J.physics[ct],ft=r.findPhysicsConstraint(ut);if(!ft)throw new Error("Couldn't find physics constraint ".concat(ut," for skin ").concat(J.name,"."));K.constraints.push(ft)}for(var dt in J.attachments){var vt=r.findSlot(dt);if(!vt)throw new Error("Couldn't find slot ".concat(dt," for skin ").concat(J.name,"."));var mt=J.attachments[dt];for(var pt in mt){var gt=this.readAttachment(mt[pt],K,vt.index,pt,r);gt&&K.setAttachment(vt.index,pt,gt)}}r.skins.push(K),"default"==K.name&&(r.defaultSkin=K)}for(var yt=0,kt=this.linkedMeshes.length;yt<kt;yt++){var wt=this.linkedMeshes[yt],bt=wt.skin?r.findSkin(wt.skin):r.defaultSkin;if(!bt)throw new Error("Skin not found: ".concat(wt.skin));var xt=bt.getAttachment(wt.slotIndex,wt.parent);if(!xt)throw new Error("Parent mesh not found: ".concat(wt.parent));wt.mesh.timelineAttachment=wt.inheritTimeline?xt:wt.mesh,wt.mesh.setParentMesh(xt),null!=wt.mesh.region&&wt.mesh.updateRegion()}if(this.linkedMeshes.length=0,i.events)for(var It in i.events){var Et=i.events[It],At=new fe(It);At.intValue=Tn(Et,"int",0),At.floatValue=Tn(Et,"float",0),At.stringValue=Tn(Et,"string",""),At.audioPath=Tn(Et,"audio",null),At.audioPath&&(At.volume=Tn(Et,"volume",1),At.balance=Tn(Et,"balance",0)),r.events.push(At)}if(i.animations)for(var St in i.animations){var Rt=i.animations[St];this.readAnimation(Rt,St,r)}return r}},{key:"readAttachment",value:function(t,e,n,a,r){var i=this.scale;switch(a=Tn(t,"name",a),Tn(t,"type","region")){case"region":var s=Tn(t,"path",a),o=this.readSequence(Tn(t,"sequence",null)),h=this.attachmentLoader.newRegionAttachment(e,a,s,o);if(!h)return null;h.path=s,h.x=Tn(t,"x",0)*i,h.y=Tn(t,"y",0)*i,h.scaleX=Tn(t,"scaleX",1),h.scaleY=Tn(t,"scaleY",1),h.rotation=Tn(t,"rotation",0),h.width=t.width*i,h.height=t.height*i,h.sequence=o;var l=Tn(t,"color",null);return l&&h.color.setFromString(l),null!=h.region&&h.updateRegion(),h;case"boundingbox":var c=this.attachmentLoader.newBoundingBoxAttachment(e,a);if(!c)return null;this.readVertices(t,c,t.vertexCount<<1);var u=Tn(t,"color",null);return u&&c.color.setFromString(u),c;case"mesh":case"linkedmesh":var f=Tn(t,"path",a),d=this.readSequence(Tn(t,"sequence",null)),v=this.attachmentLoader.newMeshAttachment(e,a,f,d);if(!v)return null;v.path=f;var m=Tn(t,"color",null);m&&v.color.setFromString(m),v.width=Tn(t,"width",0)*i,v.height=Tn(t,"height",0)*i,v.sequence=d;var p=Tn(t,"parent",null);if(p)return this.linkedMeshes.push(new En(v,Tn(t,"skin",null),n,p,Tn(t,"timelines",!0))),v;var g=t.uvs;return this.readVertices(t,v,g.length),v.triangles=t.triangles,v.regionUVs=g,null!=v.region&&v.updateRegion(),v.edges=Tn(t,"edges",null),v.hullLength=2*Tn(t,"hull",0),v;case"path":var y=this.attachmentLoader.newPathAttachment(e,a);if(!y)return null;y.closed=Tn(t,"closed",!1),y.constantSpeed=Tn(t,"constantSpeed",!0);var k=t.vertexCount;this.readVertices(t,y,k<<1);for(var w=C.newArray(k/3,0),b=0;b<t.lengths.length;b++)w[b]=t.lengths[b]*i;y.lengths=w;var x=Tn(t,"color",null);return x&&y.color.setFromString(x),y;case"point":var I=this.attachmentLoader.newPointAttachment(e,a);if(!I)return null;I.x=Tn(t,"x",0)*i,I.y=Tn(t,"y",0)*i,I.rotation=Tn(t,"rotation",0);var E=Tn(t,"color",null);return E&&I.color.setFromString(E),I;case"clipping":var A=this.attachmentLoader.newClippingAttachment(e,a);if(!A)return null;var S=Tn(t,"end",null);S&&(A.endSlot=r.findSlot(S));var R=t.vertexCount;this.readVertices(t,A,R<<1);var T=Tn(t,"color",null);return T&&A.color.setFromString(T),A}return null}},{key:"readSequence",value:function(t){if(null==t)return null;var e=new _(Tn(t,"count",0));return e.start=Tn(t,"start",1),e.digits=Tn(t,"digits",0),e.setupIndex=Tn(t,"setup",0),e}},{key:"readVertices",value:function(t,e,n){var a=this.scale;e.worldVerticesLength=n;var r=t.vertices;if(n!=r.length){for(var i=new Array,s=new Array,o=0,h=r.length;o<h;){var l=r[o++];s.push(l);for(var c=o+4*l;o<c;o+=4)s.push(r[o]),i.push(r[o+1]*a),i.push(r[o+2]*a),i.push(r[o+3])}e.bones=s,e.vertices=C.toFloatArray(i)}else{var u=C.toFloatArray(r);if(1!=a)for(var f=0,d=r.length;f<d;f++)u[f]*=a;e.vertices=u}}},{key:"readAnimation",value:function(t,e,n){var a=this.scale,r=new Array;if(t.slots)for(var i in t.slots){var s=t.slots[i],o=n.findSlot(i);if(!o)throw new Error("Slot not found: "+i);var h=o.index;for(var l in s){var c=s[l];if(c){var u=c.length;if("attachment"==l){for(var f=new ut(u,h),d=0;d<u;d++){var v=c[d];f.setFrame(d,Tn(v,"time",0),Tn(v,"name",null))}r.push(f)}else if("rgba"==l){for(var m=new st(u,u<<2,h),p=c[0],g=Tn(p,"time",0),y=E.fromString(p.color),k=0,w=0;;k++){m.setFrame(k,g,y.r,y.g,y.b,y.a);var b=c[k+1];if(!b){m.shrink(w);break}var x=Tn(b,"time",0),I=E.fromString(b.color),A=p.curve;A&&(w=Rn(A,m,w,k,0,g,x,y.r,I.r,1),w=Rn(A,m,w,k,1,g,x,y.g,I.g,1),w=Rn(A,m,w,k,2,g,x,y.b,I.b,1),w=Rn(A,m,w,k,3,g,x,y.a,I.a,1)),g=x,y=I,p=b}r.push(m)}else if("rgb"==l){for(var S=new ot(u,3*u,h),R=c[0],T=Tn(R,"time",0),M=E.fromString(R.color),F=0,P=0;;F++){S.setFrame(F,T,M.r,M.g,M.b);var Y=c[F+1];if(!Y){S.shrink(P);break}var X=Tn(Y,"time",0),O=E.fromString(Y.color),N=R.curve;N&&(P=Rn(N,S,P,F,0,T,X,M.r,O.r,1),P=Rn(N,S,P,F,1,T,X,M.g,O.g,1),P=Rn(N,S,P,F,2,T,X,M.b,O.b,1)),T=X,M=O,R=Y}r.push(S)}else if("alpha"==l)r.push(An(c,new ht(u,u,h),0,1));else if("rgba2"==l){for(var _=new lt(u,7*u,h),B=c[0],D=Tn(B,"time",0),V=E.fromString(B.light),U=E.fromString(B.dark),W=0,G=0;;W++){_.setFrame(W,D,V.r,V.g,V.b,V.a,U.r,U.g,U.b);var z=c[W+1];if(!z){_.shrink(G);break}var j=Tn(z,"time",0),H=E.fromString(z.light),wt=E.fromString(z.dark),Mt=B.curve;Mt&&(G=Rn(Mt,_,G,W,0,D,j,V.r,H.r,1),G=Rn(Mt,_,G,W,1,D,j,V.g,H.g,1),G=Rn(Mt,_,G,W,2,D,j,V.b,H.b,1),G=Rn(Mt,_,G,W,3,D,j,V.a,H.a,1),G=Rn(Mt,_,G,W,4,D,j,U.r,wt.r,1),G=Rn(Mt,_,G,W,5,D,j,U.g,wt.g,1),G=Rn(Mt,_,G,W,6,D,j,U.b,wt.b,1)),D=j,V=H,U=wt,B=z}r.push(_)}else if("rgb2"==l){for(var Ft=new ct(u,6*u,h),Pt=c[0],Yt=Tn(Pt,"time",0),Xt=E.fromString(Pt.light),Ot=E.fromString(Pt.dark),Nt=0,Lt=0;;Nt++){Ft.setFrame(Nt,Yt,Xt.r,Xt.g,Xt.b,Ot.r,Ot.g,Ot.b);var _t=c[Nt+1];if(!_t){Ft.shrink(Lt);break}var Bt=Tn(_t,"time",0),Dt=E.fromString(_t.light),Vt=E.fromString(_t.dark),Ut=Pt.curve;Ut&&(Lt=Rn(Ut,Ft,Lt,Nt,0,Yt,Bt,Xt.r,Dt.r,1),Lt=Rn(Ut,Ft,Lt,Nt,1,Yt,Bt,Xt.g,Dt.g,1),Lt=Rn(Ut,Ft,Lt,Nt,2,Yt,Bt,Xt.b,Dt.b,1),Lt=Rn(Ut,Ft,Lt,Nt,3,Yt,Bt,Ot.r,Vt.r,1),Lt=Rn(Ut,Ft,Lt,Nt,4,Yt,Bt,Ot.g,Vt.g,1),Lt=Rn(Ut,Ft,Lt,Nt,5,Yt,Bt,Ot.b,Vt.b,1)),Yt=Bt,Xt=Dt,Ot=Vt,Pt=_t}r.push(Ft)}}}}if(t.bones)for(var qt in t.bones){var Wt=t.bones[qt],Gt=n.findBone(qt);if(!Gt)throw new Error("Bone not found: "+qt);var zt=Gt.index;for(var jt in Wt){var Ht=Wt[jt],$t=Ht.length;if(0!=$t)if("rotate"===jt)r.push(An(Ht,new $($t,$t,zt),0,1));else if("translate"===jt){var Jt=new J($t,$t<<1,zt);r.push(Sn(Ht,Jt,"x","y",0,a))}else if("translatex"===jt){var Kt=new K($t,$t,zt);r.push(An(Ht,Kt,0,a))}else if("translatey"===jt){var Qt=new Q($t,$t,zt);r.push(An(Ht,Qt,0,a))}else if("scale"===jt){var Zt=new Z($t,$t<<1,zt);r.push(Sn(Ht,Zt,"x","y",1,1))}else if("scalex"===jt){var te=new tt($t,$t,zt);r.push(An(Ht,te,1,1))}else if("scaley"===jt){var ee=new et($t,$t,zt);r.push(An(Ht,ee,1,1))}else if("shear"===jt){var ne=new nt($t,$t<<1,zt);r.push(Sn(Ht,ne,"x","y",0,1))}else if("shearx"===jt){var ae=new at($t,$t,zt);r.push(An(Ht,ae,0,1))}else if("sheary"===jt){var ie=new rt($t,$t,zt);r.push(An(Ht,ie,0,1))}else if("inherit"===jt){for(var se=new it($t,Gt.index),oe=0;oe<Ht.length;oe++){var he=Ht[oe];se.setFrame(oe,Tn(he,"time",0),C.enumValue(re,Tn(he,"inherit","Normal")))}r.push(se)}}}if(t.ik)for(var le in t.ik){var ce=t.ik[le],fe=ce[0];if(fe){var de=n.findIkConstraint(le);if(!de)throw new Error("IK Constraint not found: "+le);for(var ve=n.ikConstraints.indexOf(de),ge=new mt(ce.length,ce.length<<1,ve),ye=Tn(fe,"time",0),ke=Tn(fe,"mix",1),we=Tn(fe,"softness",0)*a,be=0,xe=0;;be++){ge.setFrame(be,ye,ke,we,Tn(fe,"bendPositive",!0)?1:-1,Tn(fe,"compress",!1),Tn(fe,"stretch",!1));var Ie=ce[be+1];if(!Ie){ge.shrink(xe);break}var Ee=Tn(Ie,"time",0),Ae=Tn(Ie,"mix",1),Se=Tn(Ie,"softness",0)*a,Re=fe.curve;Re&&(xe=Rn(Re,ge,xe,be,0,ye,Ee,ke,Ae,1),xe=Rn(Re,ge,xe,be,1,ye,Ee,we,Se,a)),ye=Ee,ke=Ae,we=Se,fe=Ie}r.push(ge)}}if(t.transform)for(var Te in t.transform){var Ce=t.transform[Te],Me=Ce[0];if(Me){var Fe=n.findTransformConstraint(Te);if(!Fe)throw new Error("Transform constraint not found: "+Te);for(var Pe=n.transformConstraints.indexOf(Fe),Ye=new pt(Ce.length,6*Ce.length,Pe),Xe=Tn(Me,"time",0),Oe=Tn(Me,"mixRotate",1),Ne=Tn(Me,"mixX",1),Le=Tn(Me,"mixY",Ne),_e=Tn(Me,"mixScaleX",1),Be=Tn(Me,"mixScaleY",_e),De=Tn(Me,"mixShearY",1),Ve=0,Ue=0;;Ve++){Ye.setFrame(Ve,Xe,Oe,Ne,Le,_e,Be,De);var qe=Ce[Ve+1];if(!qe){Ye.shrink(Ue);break}var We=Tn(qe,"time",0),Ge=Tn(qe,"mixRotate",1),ze=Tn(qe,"mixX",1),je=Tn(qe,"mixY",ze),He=Tn(qe,"mixScaleX",1),$e=Tn(qe,"mixScaleY",He),Je=Tn(qe,"mixShearY",1),Ke=Me.curve;Ke&&(Ue=Rn(Ke,Ye,Ue,Ve,0,Xe,We,Oe,Ge,1),Ue=Rn(Ke,Ye,Ue,Ve,1,Xe,We,Ne,ze,1),Ue=Rn(Ke,Ye,Ue,Ve,2,Xe,We,Le,je,1),Ue=Rn(Ke,Ye,Ue,Ve,3,Xe,We,_e,He,1),Ue=Rn(Ke,Ye,Ue,Ve,4,Xe,We,Be,$e,1),Ue=Rn(Ke,Ye,Ue,Ve,5,Xe,We,De,Je,1)),Xe=We,Oe=Ge,Ne=ze,Le=je,_e=He,Be=$e,_e=He,Me=qe}r.push(Ye)}}if(t.path)for(var Qe in t.path){var Ze=t.path[Qe],tn=n.findPathConstraint(Qe);if(!tn)throw new Error("Path constraint not found: "+Qe);var en=n.pathConstraints.indexOf(tn);for(var nn in Ze){var an=Ze[nn],rn=an[0];if(rn){var sn=an.length;if("position"===nn){var on=new gt(sn,sn,en);r.push(An(an,on,0,tn.positionMode==me.Fixed?a:1))}else if("spacing"===nn){var hn=new yt(sn,sn,en);r.push(An(an,hn,0,tn.spacingMode==pe.Length||tn.spacingMode==pe.Fixed?a:1))}else if("mix"===nn){for(var ln=new kt(sn,3*sn,en),cn=Tn(rn,"time",0),un=Tn(rn,"mixRotate",1),fn=Tn(rn,"mixX",1),dn=Tn(rn,"mixY",fn),vn=0,mn=0;;vn++){ln.setFrame(vn,cn,un,fn,dn);var pn=an[vn+1];if(!pn){ln.shrink(mn);break}var gn=Tn(pn,"time",0),yn=Tn(pn,"mixRotate",1),kn=Tn(pn,"mixX",1),wn=Tn(pn,"mixY",kn),bn=rn.curve;bn&&(mn=Rn(bn,ln,mn,vn,0,cn,gn,un,yn,1),mn=Rn(bn,ln,mn,vn,1,cn,gn,fn,kn,1),mn=Rn(bn,ln,mn,vn,2,cn,gn,dn,wn,1)),cn=gn,un=yn,fn=kn,dn=wn,rn=pn}r.push(ln)}}}}if(t.physics)for(var xn in t.physics){var In=t.physics[xn],En=-1;if(xn.length>0){var Cn=n.findPhysicsConstraint(xn);if(!Cn)throw new Error("Physics constraint not found: "+xn);En=n.physicsConstraints.indexOf(Cn)}for(var Mn in In){var Fn=In[Mn],Pn=Fn[0];if(Pn){var Yn=Fn.length;if("reset"!=Mn){var Xn=void 0;if("inertia"==Mn)Xn=new bt(Yn,Yn,En);else if("strength"==Mn)Xn=new xt(Yn,Yn,En);else if("damping"==Mn)Xn=new It(Yn,Yn,En);else if("mass"==Mn)Xn=new Et(Yn,Yn,En);else if("wind"==Mn)Xn=new At(Yn,Yn,En);else if("gravity"==Mn)Xn=new St(Yn,Yn,En);else{if("mix"!=Mn)continue;Xn=new Rt(Yn,Yn,En)}r.push(An(Fn,Xn,0,1))}else{for(var On=new Tt(Yn,En),Nn=0;null!=Pn;Pn=Fn[Nn+1],Nn++)On.setFrame(Nn,Tn(Pn,"time",0));r.push(On)}}}}if(t.attachments)for(var Ln in t.attachments){var _n=t.attachments[Ln],Bn=n.findSkin(Ln);if(!Bn)throw new Error("Skin not found: "+Ln);for(var Dn in _n){var Vn=_n[Dn],Un=n.findSlot(Dn);if(!Un)throw new Error("Slot not found: "+Dn);var qn=Un.index;for(var Wn in Vn){var Gn=Vn[Wn],zn=Bn.getAttachment(qn,Wn);for(var jn in Gn){var Hn=Gn[jn],$n=Hn[0];if($n)if("deform"==jn){for(var Jn=zn.bones,Kn=zn.vertices,Qn=Jn?Kn.length/3*2:Kn.length,Zn=new ft(Hn.length,Hn.length,qn,zn),ta=Tn($n,"time",0),ea=0,na=0;;ea++){var aa=void 0,ra=Tn($n,"vertices",null);if(ra){aa=C.newFloatArray(Qn);var ia=Tn($n,"offset",0);if(C.arrayCopy(ra,0,aa,ia,ra.length),1!=a)for(var sa=ia,oa=sa+ra.length;sa<oa;sa++)aa[sa]*=a;if(!Jn)for(var ha=0;ha<Qn;ha++)aa[ha]+=Kn[ha]}else aa=Jn?C.newFloatArray(Qn):Kn;Zn.setFrame(ea,ta,aa);var la=Hn[ea+1];if(!la){Zn.shrink(na);break}var ca=Tn(la,"time",0),ua=$n.curve;ua&&(na=Rn(ua,Zn,na,ea,0,ta,ca,0,1,1)),ta=ca,$n=la}r.push(Zn)}else if("sequence"==jn){for(var fa=new Ct(Hn.length,qn,zn),da=0,va=0;va<Hn.length;va++){var ma=Tn($n,"delay",da),pa=Tn($n,"time",0),ga=L[Tn($n,"mode","hold")],ya=Tn($n,"index",0);fa.setFrame(va,pa,ga,ya,ma),da=ma,$n=Hn[va+1]}r.push(fa)}}}}}if(t.drawOrder){for(var ka=new vt(t.drawOrder.length),wa=n.slots.length,ba=0,xa=0;xa<t.drawOrder.length;xa++,ba++){var Ia=t.drawOrder[xa],Ea=null,Aa=Tn(Ia,"offsets",null);if(Aa){Ea=C.newArray(wa,-1);for(var Sa=C.newArray(wa-Aa.length,0),Ra=0,Ta=0,Ca=0;Ca<Aa.length;Ca++){var Ma=Aa[Ca],Fa=n.findSlot(Ma.slot);if(!Fa)throw new Error("Slot not found: "+Fa);for(var Pa=Fa.index;Ra!=Pa;)Sa[Ta++]=Ra++;Ea[Ra+Ma.offset]=Ra++}for(;Ra<wa;)Sa[Ta++]=Ra++;for(var Ya=wa-1;Ya>=0;Ya--)-1==Ea[Ya]&&(Ea[Ya]=Sa[--Ta])}ka.setFrame(ba,Tn(Ia,"time",0),Ea)}r.push(ka)}if(t.events){for(var Xa=new dt(t.events.length),Oa=0,Na=0;Na<t.events.length;Na++,Oa++){var La=t.events[Na],_a=n.findEvent(La.name);if(!_a)throw new Error("Event not found: "+La.name);var Ba=new ue(C.toSinglePrecision(Tn(La,"time",0)),_a);Ba.intValue=Tn(La,"int",_a.intValue),Ba.floatValue=Tn(La,"float",_a.floatValue),Ba.stringValue=Tn(La,"string",_a.stringValue),Ba.data.audioPath&&(Ba.volume=Tn(La,"volume",1),Ba.balance=Tn(La,"balance",0)),Xa.setFrame(Oa,Ba)}r.push(Xa)}for(var Da=0,Va=0,Ua=r.length;Va<Ua;Va++)Da=Math.max(Da,r[Va].getDuration());n.animations.push(new q(e,r,Da))}}]),En=h((function t(e,n,a,r,i){s(this,t),l(this,"parent",void 0),l(this,"skin",void 0),l(this,"slotIndex",void 0),l(this,"mesh",void 0),l(this,"inheritTimeline",void 0),this.mesh=e,this.skin=n,this.slotIndex=a,this.parent=r,this.inheritTimeline=i}));function An(t,e,n,a){for(var r=t[0],i=Tn(r,"time",0),s=Tn(r,"value",n)*a,o=0,h=0;;h++){e.setFrame(h,i,s);var l=t[h+1];if(!l)return e.shrink(o),e;var c=Tn(l,"time",0),u=Tn(l,"value",n)*a;r.curve&&(o=Rn(r.curve,e,o,h,0,i,c,s,u,a)),i=c,s=u,r=l}}function Sn(t,e,n,a,r,i){for(var s=t[0],o=Tn(s,"time",0),h=Tn(s,n,r)*i,l=Tn(s,a,r)*i,c=0,u=0;;u++){e.setFrame(u,o,h,l);var f=t[u+1];if(!f)return e.shrink(c),e;var d=Tn(f,"time",0),v=Tn(f,n,r)*i,m=Tn(f,a,r)*i,p=s.curve;p&&(c=Rn(p,e,c,u,0,o,d,h,v,i),c=Rn(p,e,c,u,1,o,d,l,m,i)),o=d,h=v,l=m,s=f}}function Rn(t,e,n,a,r,i,s,o,h,l){if("stepped"==t)return e.setStepped(a),n;var c=r<<2,u=t[c],f=t[c+1]*l,d=t[c+2],v=t[c+3]*l;return e.setBezier(n,a,r,i,o,u,f,d,v,s,h),n+1}function Tn(t,e,n){return void 0!==t[e]?t[e]:n}void 0===Math.fround&&(Math.fround=(De=new Float32Array(1),function(t){return De[0]=t,De[0]}));var Cn=Object.freeze({__proto__:null,AlphaTimeline:ht,Animation:q,AnimationState:Mt,AnimationStateAdapter:Xt,AnimationStateData:Ut,AssetManagerBase:le,AtlasAttachmentLoader:ie,Attachment:O,AttachmentTimeline:ut,BinaryInput:Xe,get BlendMode(){return Ae},Bone:oe,BoneData:se,BoundingBoxAttachment:qt,CURRENT:Vt,ClippingAttachment:Wt,Color:E,ConstraintData:he,CurveTimeline:z,CurveTimeline1:j,CurveTimeline2:H,DebugUtils:M,DeformTimeline:ft,Downloader:ce,DrawOrderTimeline:vt,Event:ue,EventData:fe,EventQueue:Yt,EventTimeline:dt,get EventType(){return Ft},FIRST:Nt,FakeTexture:$t,HOLD_FIRST:_t,HOLD_MIX:Bt,HOLD_SUBSEQUENT:Lt,IkConstraint:de,IkConstraintData:ve,IkConstraintTimeline:mt,get Inherit(){return re},InheritTimeline:it,IntSet:x,Interpolation:S,MathUtils:A,MeshAttachment:te,get MixBlend(){return V},get MixDirection(){return U},PathAttachment:ee,PathConstraint:ke,PathConstraintData:ye,PathConstraintMixTimeline:kt,PathConstraintPositionTimeline:gt,PathConstraintSpacingTimeline:yt,get Physics(){return we},PhysicsConstraintDampingTimeline:It,PhysicsConstraintGravityTimeline:St,PhysicsConstraintInertiaTimeline:bt,PhysicsConstraintMassTimeline:Et,PhysicsConstraintMixTimeline:Rt,PhysicsConstraintResetTimeline:Tt,PhysicsConstraintStrengthTimeline:xt,PhysicsConstraintTimeline:wt,PhysicsConstraintWindTimeline:At,PointAttachment:ne,Pool:F,get PositionMode(){return me},Pow:R,PowOut:T,RGB2Timeline:ct,RGBA2Timeline:lt,RGBATimeline:st,RGBTimeline:ot,RegionAttachment:ae,get RotateMode(){return ge},RotateTimeline:$,SETUP:Dt,SUBSEQUENT:Ot,ScaleTimeline:Z,ScaleXTimeline:tt,ScaleYTimeline:et,SequenceTimeline:Ct,ShearTimeline:nt,ShearXTimeline:at,ShearYTimeline:rt,Skeleton:Ee,SkeletonBinary:Ye,SkeletonBounds:wn,SkeletonClipping:xn,SkeletonData:Re,SkeletonJson:In,Skin:Ce,SkinEntry:Te,Slot:xe,SlotData:Me,get SpacingMode(){return pe},StringSet:I,Texture:jt,TextureAtlas:Jt,TextureAtlasPage:Qt,TextureAtlasRegion:Zt,get TextureFilter(){return Gt},TextureRegion:Ht,get TextureWrap(){return zt},TimeKeeper:Y,Timeline:G,TrackEntry:Pt,TransformConstraint:Ie,TransformConstraintData:Pe,TransformConstraintTimeline:pt,TranslateTimeline:J,TranslateXTimeline:K,TranslateYTimeline:Q,Triangulator:bn,Utils:C,Vector2:P,VertexAttachment:N,WindowedMean:X}),Mn={9728:t.FILTER_NEAREST,9729:t.FILTER_LINEAR,9984:t.FILTER_NEAREST_MIPMAP_NEAREST,9985:t.FILTER_LINEAR_MIPMAP_NEAREST,9986:t.FILTER_NEAREST_MIPMAP_LINEAR,9987:t.FILTER_LINEAR_MIPMAP_LINEAR},Fn={33648:t.ADDRESS_MIRRORED_REPEAT,33071:t.ADDRESS_CLAMP_TO_EDGE,10487:t.ADDRESS_REPEAT},Pn=h((function t(e){s(this,t),this._image={width:e.width,height:e.height},this.pcTexture=e}),[{key:"setFilters",value:function(t,e){this.pcTexture.minFilter=Mn[t],this.pcTexture.magFilter=Mn[e]}},{key:"setWraps",value:function(t,e){this.pcTexture.addressU=Fn[t],this.pcTexture.addressV=Fn[e]}},{key:"getImage",value:function(){return this._image}},{key:"dispose",value:function(){this.pcTexture.destroy()}}]);function Yn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Xn={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},On=Yn(Xn),Nn="object"===("undefined"==typeof process?"undefined":i(process))&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){for(var t,e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return(t=console).error.apply(t,["SEMVER"].concat(n))}:function(){},Ln=Nn;Yn(Ln);var _n={exports:{}};!function(t,e){var n=Xn.MAX_SAFE_COMPONENT_LENGTH,a=Xn.MAX_SAFE_BUILD_LENGTH,r=Xn.MAX_LENGTH,i=Ln,s=(e=t.exports={}).re=[],o=e.safeRe=[],h=e.src=[],l=e.t={},c=0,u="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",r],[u,a]],d=function(t,e,n){var a=function(t){for(var e=0,n=f;e<n.length;e++){var a=m(n[e],2),r=a[0],i=a[1];t=t.split("".concat(r,"*")).join("".concat(r,"{0,").concat(i,"}")).split("".concat(r,"+")).join("".concat(r,"{1,").concat(i,"}"))}return t}(e),r=c++;i(t,r,e),l[t]=r,h[r]=e,s[r]=new RegExp(e,n?"g":void 0),o[r]=new RegExp(a,n?"g":void 0)};d("NUMERICIDENTIFIER","0|[1-9]\\d*"),d("NUMERICIDENTIFIERLOOSE","\\d+"),d("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-]".concat(u,"*")),d("MAINVERSION","(".concat(h[l.NUMERICIDENTIFIER],")\\.")+"(".concat(h[l.NUMERICIDENTIFIER],")\\.")+"(".concat(h[l.NUMERICIDENTIFIER],")")),d("MAINVERSIONLOOSE","(".concat(h[l.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(h[l.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(h[l.NUMERICIDENTIFIERLOOSE],")")),d("PRERELEASEIDENTIFIER","(?:".concat(h[l.NUMERICIDENTIFIER],"|").concat(h[l.NONNUMERICIDENTIFIER],")")),d("PRERELEASEIDENTIFIERLOOSE","(?:".concat(h[l.NUMERICIDENTIFIERLOOSE],"|").concat(h[l.NONNUMERICIDENTIFIER],")")),d("PRERELEASE","(?:-(".concat(h[l.PRERELEASEIDENTIFIER],"(?:\\.").concat(h[l.PRERELEASEIDENTIFIER],")*))")),d("PRERELEASELOOSE","(?:-?(".concat(h[l.PRERELEASEIDENTIFIERLOOSE],"(?:\\.").concat(h[l.PRERELEASEIDENTIFIERLOOSE],")*))")),d("BUILDIDENTIFIER","".concat(u,"+")),d("BUILD","(?:\\+(".concat(h[l.BUILDIDENTIFIER],"(?:\\.").concat(h[l.BUILDIDENTIFIER],")*))")),d("FULLPLAIN","v?".concat(h[l.MAINVERSION]).concat(h[l.PRERELEASE],"?").concat(h[l.BUILD],"?")),d("FULL","^".concat(h[l.FULLPLAIN],"$")),d("LOOSEPLAIN","[v=\\s]*".concat(h[l.MAINVERSIONLOOSE]).concat(h[l.PRERELEASELOOSE],"?").concat(h[l.BUILD],"?")),d("LOOSE","^".concat(h[l.LOOSEPLAIN],"$")),d("GTLT","((?:<|>)?=?)"),d("XRANGEIDENTIFIERLOOSE","".concat(h[l.NUMERICIDENTIFIERLOOSE],"|x|X|\\*")),d("XRANGEIDENTIFIER","".concat(h[l.NUMERICIDENTIFIER],"|x|X|\\*")),d("XRANGEPLAIN","[v=\\s]*(".concat(h[l.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(h[l.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(h[l.XRANGEIDENTIFIER],")")+"(?:".concat(h[l.PRERELEASE],")?").concat(h[l.BUILD],"?")+")?)?"),d("XRANGEPLAINLOOSE","[v=\\s]*(".concat(h[l.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(h[l.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(h[l.XRANGEIDENTIFIERLOOSE],")")+"(?:".concat(h[l.PRERELEASELOOSE],")?").concat(h[l.BUILD],"?")+")?)?"),d("XRANGE","^".concat(h[l.GTLT],"\\s*").concat(h[l.XRANGEPLAIN],"$")),d("XRANGELOOSE","^".concat(h[l.GTLT],"\\s*").concat(h[l.XRANGEPLAINLOOSE],"$")),d("COERCEPLAIN","".concat("(^|[^\\d])(\\d{1,").concat(n,"})")+"(?:\\.(\\d{1,".concat(n,"}))?")+"(?:\\.(\\d{1,".concat(n,"}))?")),d("COERCE","".concat(h[l.COERCEPLAIN],"(?:$|[^\\d])")),d("COERCEFULL",h[l.COERCEPLAIN]+"(?:".concat(h[l.PRERELEASE],")?")+"(?:".concat(h[l.BUILD],")?")+"(?:$|[^\\d])"),d("COERCERTL",h[l.COERCE],!0),d("COERCERTLFULL",h[l.COERCEFULL],!0),d("LONETILDE","(?:~>?)"),d("TILDETRIM","(\\s*)".concat(h[l.LONETILDE],"\\s+"),!0),e.tildeTrimReplace="$1~",d("TILDE","^".concat(h[l.LONETILDE]).concat(h[l.XRANGEPLAIN],"$")),d("TILDELOOSE","^".concat(h[l.LONETILDE]).concat(h[l.XRANGEPLAINLOOSE],"$")),d("LONECARET","(?:\\^)"),d("CARETTRIM","(\\s*)".concat(h[l.LONECARET],"\\s+"),!0),e.caretTrimReplace="$1^",d("CARET","^".concat(h[l.LONECARET]).concat(h[l.XRANGEPLAIN],"$")),d("CARETLOOSE","^".concat(h[l.LONECARET]).concat(h[l.XRANGEPLAINLOOSE],"$")),d("COMPARATORLOOSE","^".concat(h[l.GTLT],"\\s*(").concat(h[l.LOOSEPLAIN],")$|^$")),d("COMPARATOR","^".concat(h[l.GTLT],"\\s*(").concat(h[l.FULLPLAIN],")$|^$")),d("COMPARATORTRIM","(\\s*)".concat(h[l.GTLT],"\\s*(").concat(h[l.LOOSEPLAIN],"|").concat(h[l.XRANGEPLAIN],")"),!0),e.comparatorTrimReplace="$1$2$3",d("HYPHENRANGE","^\\s*(".concat(h[l.XRANGEPLAIN],")")+"\\s+-\\s+"+"(".concat(h[l.XRANGEPLAIN],")")+"\\s*$"),d("HYPHENRANGELOOSE","^\\s*(".concat(h[l.XRANGEPLAINLOOSE],")")+"\\s+-\\s+"+"(".concat(h[l.XRANGEPLAINLOOSE],")")+"\\s*$"),d("STAR","(<|>)?=?\\s*\\*"),d("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),d("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(_n,_n.exports);var Bn=_n.exports;Yn(Bn);var Dn=Object.freeze({loose:!0}),Vn=Object.freeze({}),Un=function(t){return t?"object"!==i(t)?Dn:t:Vn};Yn(Un);var qn=/^[0-9]+$/,Wn=function(t,e){var n=qn.test(t),a=qn.test(e);return n&&a&&(t=+t,e=+e),t===e?0:n&&!a?-1:a&&!n?1:t<e?-1:1},Gn={compareIdentifiers:Wn,rcompareIdentifiers:function(t,e){return Wn(e,t)}};Yn(Gn);var zn=Ln,jn=Xn.MAX_LENGTH,Hn=Xn.MAX_SAFE_INTEGER,$n=Bn.safeRe,Jn=Bn.t,Kn=Un,Qn=Gn.compareIdentifiers,Zn=function(){function t(e,n){if(s(this,t),n=Kn(n),e instanceof t){if(e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError('Invalid version. Must be a string. Got type "'.concat(i(e),'".'));if(e.length>jn)throw new TypeError("version is longer than ".concat(jn," characters"));zn("SemVer",e,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;var a=e.trim().match(n.loose?$n[Jn.LOOSE]:$n[Jn.FULL]);if(!a)throw new TypeError("Invalid Version: ".concat(e));if(this.raw=e,this.major=+a[1],this.minor=+a[2],this.patch=+a[3],this.major>Hn||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Hn||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Hn||this.patch<0)throw new TypeError("Invalid patch version");a[4]?this.prerelease=a[4].split(".").map((function(t){if(/^[0-9]+$/.test(t)){var e=+t;if(e>=0&&e<Hn)return e}return t})):this.prerelease=[],this.build=a[5]?a[5].split("."):[],this.format()}return h(t,[{key:"format",value:function(){return this.version="".concat(this.major,".").concat(this.minor,".").concat(this.patch),this.prerelease.length&&(this.version+="-".concat(this.prerelease.join("."))),this.version}},{key:"toString",value:function(){return this.version}},{key:"compare",value:function(e){if(zn("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if("string"==typeof e&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}},{key:"compareMain",value:function(e){return e instanceof t||(e=new t(e,this.options)),Qn(this.major,e.major)||Qn(this.minor,e.minor)||Qn(this.patch,e.patch)}},{key:"comparePre",value:function(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var n=0;do{var a=this.prerelease[n],r=e.prerelease[n];if(zn("prerelease compare",n,a,r),void 0===a&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===a)return-1;if(a!==r)return Qn(a,r)}while(++n)}},{key:"compareBuild",value:function(e){e instanceof t||(e=new t(e,this.options));var n=0;do{var a=this.build[n],r=e.build[n];if(zn("build compare",n,a,r),void 0===a&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===a)return-1;if(a!==r)return Qn(a,r)}while(++n)}},{key:"inc",value:function(t,e,n){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e,n),this.inc("pre",e,n);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",e,n),this.inc("pre",e,n);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":var a=Number(n)?1:0;if(!e&&!1===n)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[a];else{for(var r=this.prerelease.length;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);if(-1===r){if(e===this.prerelease.join(".")&&!1===n)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(a)}}if(e){var i=[e,a];!1===n&&(i=[e]),0===Qn(this.prerelease[0],e)?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break;default:throw new Error("invalid increment argument: ".concat(t))}return this.raw=this.format(),this.build.length&&(this.raw+="+".concat(this.build.join("."))),this}}])}(),ta=Zn;Yn(ta);var ea=ta,na=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t instanceof ea)return t;try{return new ea(t,e)}catch(t){if(!n)return null;throw t}};Yn(na);var aa=na,ra=Yn((function(t,e){var n=aa(t,e);return n?n.version:null})),ia=ta,sa=na,oa=Bn.safeRe,ha=Bn.t,la=Yn((function(t,e){if(t instanceof ia)return t;if("number"==typeof t&&(t=String(t)),"string"!=typeof t)return null;var n=null;if((e=e||{}).rtl){for(var a,r=e.includePrerelease?oa[ha.COERCERTLFULL]:oa[ha.COERCERTL];(a=r.exec(t))&&(!n||n.index+n[0].length!==t.length);)n&&a.index+a[0].length===n.index+n[0].length||(n=a),r.lastIndex=a.index+a[1].length+a[2].length;r.lastIndex=-1}else n=t.match(e.includePrerelease?oa[ha.COERCEFULL]:oa[ha.COERCE]);if(null===n)return null;var i=n[2],s=n[3]||"0",o=n[4]||"0",h=e.includePrerelease&&n[5]?"-".concat(n[5]):"",l=e.includePrerelease&&n[6]?"+".concat(n[6]):"";return sa("".concat(i,".").concat(s,".").concat(o).concat(h).concat(l),e)})),ca=h((function t(){s(this,t),this.max=1e3,this.map=new Map}),[{key:"get",value:function(t){var e=this.map.get(t);return void 0===e?void 0:(this.map.delete(t),this.map.set(t,e),e)}},{key:"delete",value:function(t){return!!this.map.has(t)&&(this.map.delete(t),!0)}},{key:"set",value:function(t,e){if(!this.delete(t)&&void 0!==e){if(this.map.size>=this.max){var n=this.map.keys().next().value;this.delete(n)}this.map.set(t,e)}return this}}]);Yn(ca);var ua=ta,fa=function(t,e,n){return new ua(t,n).compare(new ua(e,n))};Yn(fa);var da=fa,va=function(t,e,n){return 0===da(t,e,n)};Yn(va);var ma=fa,pa=function(t,e,n){return 0!==ma(t,e,n)};Yn(pa);var ga=fa,ya=function(t,e,n){return ga(t,e,n)>0};Yn(ya);var ka=fa,wa=function(t,e,n){return ka(t,e,n)>=0};Yn(wa);var ba=fa,xa=function(t,e,n){return ba(t,e,n)<0};Yn(xa);var Ia=fa,Ea=function(t,e,n){return Ia(t,e,n)<=0};Yn(Ea);var Aa,Sa,Ra,Ta,Ca=va,Ma=pa,Fa=ya,Pa=wa,Ya=xa,Xa=Ea,Oa=function(t,e,n,a){switch(e){case"===":return"object"===i(t)&&(t=t.version),"object"===i(n)&&(n=n.version),t===n;case"!==":return"object"===i(t)&&(t=t.version),"object"===i(n)&&(n=n.version),t!==n;case"":case"=":case"==":return Ca(t,n,a);case"!=":return Ma(t,n,a);case">":return Fa(t,n,a);case">=":return Pa(t,n,a);case"<":return Ya(t,n,a);case"<=":return Xa(t,n,a);default:throw new TypeError("Invalid operator: ".concat(e))}};function Na(){if(Ta)return Ra;Ta=1;var t=function(){function t(e,r){var i=this;if(s(this,t),r=n(r),e instanceof t)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new t(e.raw,r);if(e instanceof a)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map((function(t){return i.parseRange(t.trim())})).filter((function(t){return t.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: ".concat(this.raw));if(this.set.length>1){var o=this.set[0];if(this.set=this.set.filter((function(t){return!m(t[0])})),0===this.set.length)this.set=[o];else if(this.set.length>1){var h,l=k(this.set);try{for(l.s();!(h=l.n()).done;){var c=h.value;if(1===c.length&&g(c[0])){this.set=[c];break}}}catch(t){l.e(t)}finally{l.f()}}}this.format()}return h(t,[{key:"format",value:function(){return this.range=this.set.map((function(t){return t.join(" ").trim()})).join("||").trim(),this.range}},{key:"toString",value:function(){return this.range}},{key:"parseRange",value:function(t){var n=this,i=((this.options.includePrerelease&&d)|(this.options.loose&&v))+":"+t,s=e.get(i);if(s)return s;var h=this.options.loose,g=h?o[l.HYPHENRANGELOOSE]:o[l.HYPHENRANGE];t=t.replace(g,M(this.options.includePrerelease)),r("hyphen replace",t),t=t.replace(o[l.COMPARATORTRIM],c),r("comparator trim",t),t=t.replace(o[l.TILDETRIM],u),r("tilde trim",t),t=t.replace(o[l.CARETTRIM],f),r("caret trim",t);var y=t.split(" ").map((function(t){return w(t,n.options)})).join(" ").split(/\s+/).map((function(t){return C(t,n.options)}));h&&(y=y.filter((function(t){return r("loose invalid filter",t,n.options),!!t.match(o[l.COMPARATORLOOSE])}))),r("range list",y);var b,x=new Map,I=y.map((function(t){return new a(t,n.options)})),E=k(I);try{for(E.s();!(b=E.n()).done;){var A=b.value;if(m(A))return[A];x.set(A.value,A)}}catch(t){E.e(t)}finally{E.f()}x.size>1&&x.has("")&&x.delete("");var S=p(x.values());return e.set(i,S),S}},{key:"intersects",value:function(e,n){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some((function(t){return y(t,n)&&e.set.some((function(e){return y(e,n)&&t.every((function(t){return e.every((function(e){return t.intersects(e,n)}))}))}))}))}},{key:"test",value:function(t){if(!t)return!1;if("string"==typeof t)try{t=new i(t,this.options)}catch(t){return!1}for(var e=0;e<this.set.length;e++)if(F(this.set[e],t,this.options))return!0;return!1}}])}();Ra=t;var e=new ca,n=Un,a=function(){if(Sa)return Aa;Sa=1;var t=Symbol("SemVer ANY"),e=function(){function e(a,r){if(s(this,e),r=n(r),a instanceof e){if(a.loose===!!r.loose)return a;a=a.value}a=a.trim().split(/\s+/).join(" "),o("comparator",a,r),this.options=r,this.loose=!!r.loose,this.parse(a),this.semver===t?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}return h(e,[{key:"parse",value:function(e){var n=this.options.loose?a[r.COMPARATORLOOSE]:a[r.COMPARATOR],i=e.match(n);if(!i)throw new TypeError("Invalid comparator: ".concat(e));this.operator=void 0!==i[1]?i[1]:"","="===this.operator&&(this.operator=""),i[2]?this.semver=new l(i[2],this.options.loose):this.semver=t}},{key:"toString",value:function(){return this.value}},{key:"test",value:function(e){if(o("Comparator.test",e,this.options.loose),this.semver===t||e===t)return!0;if("string"==typeof e)try{e=new l(e,this.options)}catch(t){return!1}return i(e,this.operator,this.semver,this.options)}},{key:"intersects",value:function(t,a){if(!(t instanceof e))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new c(t.value,a).test(this.value):""===t.operator?""===t.value||new c(this.value,a).test(t.semver):!((a=n(a)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===t.value)||!a.includePrerelease&&(this.value.startsWith("<0.0.0")||t.value.startsWith("<0.0.0"))||(!this.operator.startsWith(">")||!t.operator.startsWith(">"))&&(!this.operator.startsWith("<")||!t.operator.startsWith("<"))&&(this.semver.version!==t.semver.version||!this.operator.includes("=")||!t.operator.includes("="))&&!(i(this.semver,"<",t.semver,a)&&this.operator.startsWith(">")&&t.operator.startsWith("<"))&&!(i(this.semver,">",t.semver,a)&&this.operator.startsWith("<")&&t.operator.startsWith(">")))}}],[{key:"ANY",get:function(){return t}}])}();Aa=e;var n=Un,a=Bn.safeRe,r=Bn.t,i=Oa,o=Ln,l=ta,c=Na();return Aa}(),r=Ln,i=ta,o=Bn.safeRe,l=Bn.t,c=Bn.comparatorTrimReplace,u=Bn.tildeTrimReplace,f=Bn.caretTrimReplace,d=Xn.FLAG_INCLUDE_PRERELEASE,v=Xn.FLAG_LOOSE,m=function(t){return"<0.0.0-0"===t.value},g=function(t){return""===t.value},y=function(t,e){for(var n=!0,a=t.slice(),r=a.pop();n&&a.length;)n=a.every((function(t){return r.intersects(t,e)})),r=a.pop();return n},w=function(t,e){return r("comp",t,e),t=E(t,e),r("caret",t),t=x(t,e),r("tildes",t),t=S(t,e),r("xrange",t),t=T(t,e),r("stars",t),t},b=function(t){return!t||"x"===t.toLowerCase()||"*"===t},x=function(t,e){return t.trim().split(/\s+/).map((function(t){return I(t,e)})).join(" ")},I=function(t,e){var n=e.loose?o[l.TILDELOOSE]:o[l.TILDE];return t.replace(n,(function(e,n,a,i,s){var o;return r("tilde",t,e,n,a,i,s),b(n)?o="":b(a)?o=">=".concat(n,".0.0 <").concat(+n+1,".0.0-0"):b(i)?o=">=".concat(n,".").concat(a,".0 <").concat(n,".").concat(+a+1,".0-0"):s?(r("replaceTilde pr",s),o=">=".concat(n,".").concat(a,".").concat(i,"-").concat(s," <").concat(n,".").concat(+a+1,".0-0")):o=">=".concat(n,".").concat(a,".").concat(i," <").concat(n,".").concat(+a+1,".0-0"),r("tilde return",o),o}))},E=function(t,e){return t.trim().split(/\s+/).map((function(t){return A(t,e)})).join(" ")},A=function(t,e){r("caret",t,e);var n=e.loose?o[l.CARETLOOSE]:o[l.CARET],a=e.includePrerelease?"-0":"";return t.replace(n,(function(e,n,i,s,o){var h;return r("caret",t,e,n,i,s,o),b(n)?h="":b(i)?h=">=".concat(n,".0.0").concat(a," <").concat(+n+1,".0.0-0"):b(s)?h="0"===n?">=".concat(n,".").concat(i,".0").concat(a," <").concat(n,".").concat(+i+1,".0-0"):">=".concat(n,".").concat(i,".0").concat(a," <").concat(+n+1,".0.0-0"):o?(r("replaceCaret pr",o),h="0"===n?"0"===i?">=".concat(n,".").concat(i,".").concat(s,"-").concat(o," <").concat(n,".").concat(i,".").concat(+s+1,"-0"):">=".concat(n,".").concat(i,".").concat(s,"-").concat(o," <").concat(n,".").concat(+i+1,".0-0"):">=".concat(n,".").concat(i,".").concat(s,"-").concat(o," <").concat(+n+1,".0.0-0")):(r("no pr"),h="0"===n?"0"===i?">=".concat(n,".").concat(i,".").concat(s).concat(a," <").concat(n,".").concat(i,".").concat(+s+1,"-0"):">=".concat(n,".").concat(i,".").concat(s).concat(a," <").concat(n,".").concat(+i+1,".0-0"):">=".concat(n,".").concat(i,".").concat(s," <").concat(+n+1,".0.0-0")),r("caret return",h),h}))},S=function(t,e){return r("replaceXRanges",t,e),t.split(/\s+/).map((function(t){return R(t,e)})).join(" ")},R=function(t,e){t=t.trim();var n=e.loose?o[l.XRANGELOOSE]:o[l.XRANGE];return t.replace(n,(function(n,a,i,s,o,h){r("xRange",t,n,a,i,s,o,h);var l=b(i),c=l||b(s),u=c||b(o),f=u;return"="===a&&f&&(a=""),h=e.includePrerelease?"-0":"",l?n=">"===a||"<"===a?"<0.0.0-0":"*":a&&f?(c&&(s=0),o=0,">"===a?(a=">=",c?(i=+i+1,s=0,o=0):(s=+s+1,o=0)):"<="===a&&(a="<",c?i=+i+1:s=+s+1),"<"===a&&(h="-0"),n="".concat(a+i,".").concat(s,".").concat(o).concat(h)):c?n=">=".concat(i,".0.0").concat(h," <").concat(+i+1,".0.0-0"):u&&(n=">=".concat(i,".").concat(s,".0").concat(h," <").concat(i,".").concat(+s+1,".0-0")),r("xRange return",n),n}))},T=function(t,e){return r("replaceStars",t,e),t.trim().replace(o[l.STAR],"")},C=function(t,e){return r("replaceGTE0",t,e),t.trim().replace(o[e.includePrerelease?l.GTE0PRE:l.GTE0],"")},M=function(t){return function(e,n,a,r,i,s,o,h,l,c,u,f){return n=b(a)?"":b(r)?">=".concat(a,".0.0").concat(t?"-0":""):b(i)?">=".concat(a,".").concat(r,".0").concat(t?"-0":""):s?">=".concat(n):">=".concat(n).concat(t?"-0":""),h=b(l)?"":b(c)?"<".concat(+l+1,".0.0-0"):b(u)?"<".concat(l,".").concat(+c+1,".0-0"):f?"<=".concat(l,".").concat(c,".").concat(u,"-").concat(f):t?"<".concat(l,".").concat(c,".").concat(+u+1,"-0"):"<=".concat(h),"".concat(n," ").concat(h).trim()}},F=function(t,e,n){for(var i=0;i<t.length;i++)if(!t[i].test(e))return!1;if(e.prerelease.length&&!n.includePrerelease){for(var s=0;s<t.length;s++)if(r(t[s].semver),t[s].semver!==a.ANY&&t[s].semver.prerelease.length>0){var o=t[s].semver;if(o.major===e.major&&o.minor===e.minor&&o.patch===e.patch)return!0}return!1}return!0};return Ra}Yn(Oa);var La=Na(),_a=function(t,e,n){try{e=new La(e,n)}catch(t){return!1}return e.test(t)},Ba={valid:ra,coerce:la,satisfies:Yn(_a),SEMVER_SPEC_VERSION:On.SEMVER_SPEC_VERSION},Da=0,Va=1,Ua=2,qa=[0,1,2,2,3,0],Wa=h((function t(e,n,a,i){var o;if(s(this,t),l(this,"autoUpdate",!0),l(this,"skeleton",void 0),l(this,"states",void 0),this._app=e,this._position=new r.Vec3,1===Jt.length){var h,c=k((o=new Jt(n)).pages);try{for(c.s();!(h=c.n()).done;){var u=h.value;u.setTexture(new Pn(i[u.name]))}}catch(t){c.e(t)}finally{c.f()}}else o=new Jt(n,(function(t){return new Pn(i[t])}));var f=new In(new ie(o));f.scale*=.01;var d=f.readSkeletonData(a);this.skeletonVersion=Ba.valid(Ba.coerce(d.version)),this._spine_3_6_0=Ba.satisfies(this.skeletonVersion,"<=3.6.0"),this._spine_3_7_99=Ba.satisfies(this.skeletonVersion,"<=3.7.99"),this._spine_4_0_X=Ba.satisfies(this.skeletonVersion,"~4.0.0"),this._spine_4_1_X=Ba.satisfies(this.skeletonVersion,"~4.1.23"),this.skeleton=new Ee(d),this.skeleton.updateWorldTransform(),this.stateData=new Ut(this.skeleton.data),this.states=[new Mt(this.stateData)],this.clipper=new xn,this._node=new r.GraphNode,this._meshes=[],this._meshInstances=[],this._materials={},this._tint={},this._aabb=new r.BoundingBox,this._aabbTempArray=[],this._aabbTempOffset=new r.Vec2,this._aabbTempSize=new r.Vec2,this._renderCounts={vertexCount:0,indexCount:0},this._vertexFormat=null,this._vertexBuffer=null,this._indexBuffer=null,this._priority=0,this._timeScale=1,this._layers=[r.LAYERID_UI],this.init(),this._hidden=!1}),[{key:"destroy",value:function(){this.removeFromLayers();for(var t=0;t<this._meshInstances.length;t++)this._meshInstances[t].mesh.vertexBuffer=null,this._meshInstances[t].mesh.indexBuffer.length=0,this._meshInstances[t].material=null;this._vertexBuffer&&(this._vertexBuffer.destroy(),this._vertexBuffer=null),this._indexBuffer&&(this._indexBuffer.destroy(),this._indexBuffer=null),this._meshInstances=[],this.skeleton=null,this.stateData=null,this._materials={},this._node=null}},{key:"hide",value:function(){if(!this._hidden){for(var t=0,e=this._meshInstances.length;t<e;t++)this._meshInstances[t].visible=!1;this._hidden=!0}}},{key:"show",value:function(){if(this._hidden){for(var t=0,e=this._meshInstances.length;t<e;t++)this._meshInstances[t].visible=!0;this._hidden=!1}}},{key:"init",value:function(){this._vertexFormat=new r.VertexFormat(this._app.graphicsDevice,[{semantic:r.SEMANTIC_POSITION,components:2,type:r.TYPE_FLOAT32},{semantic:r.SEMANTIC_NORMAL,components:4,type:r.TYPE_UINT8,normalize:!0},{semantic:r.SEMANTIC_TEXCOORD0,components:2,type:r.TYPE_FLOAT32},{semantic:r.SEMANTIC_COLOR,components:4,type:r.TYPE_UINT8,normalize:!0}]);for(var t=this.skeleton.drawOrder,e=0,n=t.length;e<n;e++)this.initSlot(t[e])}},{key:"initSlot",value:function(t){t.positions=[],t.uvs=[],t.indices=[],t.vertexColor={},t._active={name:"",type:Da},this.initAttachment(t)}},{key:"createMaterial",value:function(t){var e=new r.StandardMaterial;if(e.emissiveMap=t,e.emissiveVertexColor=!0,e.emissive=r.Color.WHITE,e.opacityMap=t,e.opacityVertexColor=!0,e.depthWrite=!1,e.cull=r.CULLFACE_NONE,e.blendType=r.BLEND_PREMULTIPLIED,this._spine_3_6_0){var n=["gl_FragColor.rgb *= vVertexColor.a;","gl_FragColor.a = dAlpha;"].join("\n");e.chunks.outputAlphaPremulPS=n}return e.update(),e}},{key:"initAttachment",value:function(t){var e=t.attachment;if(e){t._active.name=e.name,e instanceof ae?t._active.type=Ua:e instanceof te&&(t._active.type=Va);var n=null;if(e.region&&(e.region.texture&&(n=e.region.texture.pcTexture),e.region.page&&e.region.page.texture&&(n=e.region.page.texture.pcTexture)),n)if(n instanceof r.StandardMaterial)this._materials[n.name]=n,t.material=n.name;else{var a=null;if(n.name?a=n.name:n.getSource()instanceof Image&&(a=n.getSource().getAttribute("src")),a){if(void 0===this._materials[a]){var i=this.createMaterial(n);this._materials[a]=i}t.material=a}}}}},{key:"updateSlot",value:function(t,e){var n=t.attachment,a=n.name,r=n instanceof ae?Ua:n instanceof te?Va:Da;t._active.name===a&&t._active.type===r||this.initAttachment(t),t.positions.length=0,n instanceof ae?this._spine_4_1_X?n.computeWorldVertices(t,t.positions,0,2):n.computeWorldVertices(t.bone,t.positions,0,2):n instanceof te&&n.computeWorldVertices(t,0,n.worldVerticesLength,t.positions,0,2);var i=this._tint[a];t.vertexColor={r:Math.round(255*t.color.r*(i?i.r:1)),g:Math.round(255*t.color.g*(i?i.g:1)),b:Math.round(255*t.color.b*(i?i.b:1)),a:Math.round(255*t.color.a*(i?i.a:1))};var s,o,h=n.triangles||qa;if(e.isClipping()){for(e.clipTriangles(t.positions,0,h,h.length,n.uvs,E.WHITE,E.WHITE,!1),t.positions.length=0,t.uvs.length=0,o=e.clippedVertices.length,s=0;s<o;s+=8)t.positions.push(e.clippedVertices[s],e.clippedVertices[s+1]),t.uvs.push(e.clippedVertices[s+6],1-e.clippedVertices[s+7]);t.indices=e.clippedTriangles.slice()}else{for(t.uvs.length=0,o=t.positions.length,s=0;s<o;s+=2)t.uvs.push(n.uvs[s],1-n.uvs[s+1]);t.indices=h}this._renderCounts.vertexCount+=t.positions.length/2,this._renderCounts.indexCount+=t.indices.length}},{key:"updateSkeleton",value:function(t){this._renderCounts.vertexCount=0,this._renderCounts.indexCount=0;for(var e=this.clipper,n=this.skeleton.drawOrder,a=n.length,r=0;r<a;r++){var i=n[r];if(this._spine_3_7_99||i.bone.active){var s=i.getAttachment();s instanceof Wt?e.clipStart(i,s):s instanceof ae||s instanceof te?this.updateSlot(i,e):this._spine_3_7_99||e.clipEndWithSlot(i)}else e.clipEndWithSlot(i)}}},{key:"render",value:function(){if(this._meshInstances.forEach((function(t){t.material=null})),this.removeFromLayers(),this._meshes=[],this._meshInstances.length=0,this._renderCounts.indexCount>0&&this._renderCounts.vertexCount>0){this.skeleton.getBounds(this._aabbTempOffset,this._aabbTempSize,this._aabbTempArray),this._aabb.center=new r.Vec3(this._aabbTempOffset.x,this._aabbTempOffset.y,0),this._aabb.halfExtents=new r.Vec3(.5*this._aabbTempSize.x,.5*this._aabbTempSize.y,0),(!this._vertexBuffer||this._vertexBuffer.getNumVertices()<this._renderCounts.vertexCount)&&(this._vertexBuffer&&this._vertexBuffer.destroy(),this._vertexBuffer=new r.VertexBuffer(this._app.graphicsDevice,this._vertexFormat,this._renderCounts.vertexCount)),(!this._indexBuffer||this._indexBuffer.getNumIndices()<this._renderCounts.indexCount)&&(this._indexBuffer&&this._indexBuffer.destroy(),this._indexBuffer=new r.IndexBuffer(this._app.graphicsDevice,r.INDEXFORMAT_UINT16,this._renderCounts.indexCount));for(var t=null,e=0,n=0,a=new r.VertexIterator(this._vertexBuffer),i=new Uint16Array(this._indexBuffer.lock()),s=0,o=0,h=this.skeleton.drawOrder,l=h.length,c=0;c<l;c++){var u=h[c];if(u.attachment&&u.material&&u.positions.length>0&&u.indices.length>0){t&&t!==u.material&&(this.SubmitBatch(e,n,t),t=u.material,e=s,n=0),t=u.material;var f=u.positions,d=u.vertexColor.r,v=u.vertexColor.g,m=u.vertexColor.b,p=u.vertexColor.a,g=u.uvs,y=void 0,k=f.length/2;for(y=0;y<k;y++)a.element[r.SEMANTIC_POSITION].set(f[2*y],f[2*y+1]),a.element[r.SEMANTIC_NORMAL].set(0,255,0,0),a.element[r.SEMANTIC_COLOR].set(d,v,m,p),a.element[r.SEMANTIC_TEXCOORD0].set(g[2*y],1-g[2*y+1]),a.next();var w=u.indices,b=w.length;for(y=0;y<b;y++)i[s+y]=w[y]+o;n+=b,s+=b,o+=k}}a.end(),this._indexBuffer.unlock(),this.SubmitBatch(e,n,t)}this.addToLayers()}},{key:"SubmitBatch",value:function(t,e,n){if(e>0){var a=new r.Mesh(this._app.graphicsDevice);a.vertexBuffer=this._vertexBuffer,a.indexBuffer[0]=this._indexBuffer,a.primitive[0].type=r.PRIMITIVE_TRIANGLES,a.primitive[0].base=t,a.primitive[0].count=e,a.primitive[0].indexed=!0,a.aabb=this._aabb,this._meshes.push(a);var i=new r.MeshInstance(a,this._materials[n],this._node);i.drawOrder=this.priority+this._meshInstances.length,i.visible=!this._hidden,this._meshInstances.push(i)}}},{key:"update",value:function(t){if(!this._hidden){var e;t*=this._timeScale;var n=this.states.length;for(e=0;e<n;e++)this.states[e].update(t);for(e=0;e<n;e++)this.states[e].apply(this.skeleton);this.autoUpdate&&this.skeleton.updateWorldTransform(),this.updateSkeleton(),this.render()}}},{key:"setPosition",value:function(t){this._position.copy(t)}},{key:"setTint",value:function(t,e){this._tint[t]=e}},{key:"removeFromLayers",value:function(){if(this._meshInstances.length)for(var t=0;t<this._layers.length;t++){var e=this._app.scene.layers.getLayerById(this._layers[t]);e&&e.removeMeshInstances(this._meshInstances)}}},{key:"addToLayers",value:function(){if(this._meshInstances.length)for(var t=0;t<this._layers.length;t++){var e=this._app.scene.layers.getLayerById(this._layers[t]);e&&e.addMeshInstances(this._meshInstances)}}},{key:"state",get:function(){return this.states[0]}},{key:"priority",get:function(){return this._priority},set:function(t){this._priority=t}},{key:"timeScale",get:function(){return this._timeScale},set:function(t){this._timeScale=t}},{key:"layers",get:function(){return this._layers},set:function(t){this.removeFromLayers(),this._layers=t||[],this.addToLayers()}}]);var Ga=function(e){function n(t,e){var a,r,i,o;return s(this,n),r=this,o=[t,e],i=u(i=n),(a=d(r,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(i,o||[],u(r).constructor):i.apply(r,o))).on("set_atlasAsset",a.onSetAsset,a),a.on("set_textureAssets",a.onSetAssets,a),a.on("set_skeletonAsset",a.onSetAsset,a),a.on("set_atlasData",a.onSetResource,a),a.on("set_textures",a.onSetResource,a),a.on("set_skeletonData",a.onSetResource,a),a}return c(n,e),h(n,[{key:"_createSpine",value:function(){this.data.spine&&(this.data.spine.destroy(),this.data.spine=null);for(var e={},n=0,a=this.textureAssets.length;n<a;n++){var r=this.system.app.assets.get(this.textureAssets[n]),i=r.name?r.name:r.file?r.file.filename:null;i||(i=t.path.getBasename(r.file.url));var s=i.indexOf("?");-1!==s&&(i=i.substring(0,s)),e[i]=r.resource}this.data.spine=new Wa(this.system.app,this.atlasData,this.skeletonData,e),this.state=this.data.spine.state,this.states=this.data.spine.states,this.skeleton=this.data.spine.skeleton,this.entity.addChild(this.data.spine._node)}},{key:"_onAssetReady",value:function(t){var e=t.type,n=t.resource;"texture"===e&&this.textures.push(n),"json"===e&&(this.skeletonData=n),"text"===e&&(this.atlasData=n)}},{key:"_onAssetAdd",value:function(t){t.off("change",this.onAssetChanged,this),t.on("change",this.onAssetChanged,this),t.off("remove",this.onAssetRemoved,this),t.on("remove",this.onAssetRemoved,this),t.ready(this._onAssetReady,this),this.system.app.assets.load(t)}},{key:"onSetResource",value:function(){this.data.atlasData&&this.data.textures.length&&this.data.skeletonData&&this._createSpine()}},{key:"onSetAsset",value:function(e,n,a){var r=this.system.app.assets,i=null;if(n&&(i=r.get(n))&&(i.off("change",this.onAssetChanged),i.off("remove",this.onAssetRemoved)),a){var s=a;a instanceof t.Asset&&(s=a.id,this.data[e]=s),(i=r.get(s))?this._onAssetAdd(i):r.on("add:".concat(s))}}},{key:"onSetAssets",value:function(e,n,a){var r,i,s=this.system.app.assets,o=null;if(n.length)for(r=0,i=n.length;r<i;r++)(o=s.get(n[r]))&&(o.off("change",this.onAssetChanged),o.off("remove",this.onAssetRemoved));if(a&&a.length){var h=a.map((function(e){return e instanceof t.Asset?e.id:e}));for(r=0,i=a.length;r<i;r++)(o=s.get(h[r]))?this._onAssetAdd(o):s.on("add:".concat(h[r]))}}},{key:"onAssetChanged",value:function(t,e,n,a){}},{key:"onAssetRemoved",value:function(t){}},{key:"onEnable",value:function(){t.Component.prototype.onEnable.call(this);var e=this.data.spine;e&&e.addToLayers()}},{key:"onDisable",value:function(){t.Component.prototype.onDisable.call(this);var e=this.data.spine;e&&e.removeFromLayers()}},{key:"hide",value:function(){this.data.spine&&this.data.spine.hide()}},{key:"show",value:function(){this.data.spine&&this.data.spine.show()}},{key:"removeComponent",value:function(){var t;if(this.atlasAsset&&(t=this.system.app.assets.get(this.atlasAsset))&&(t.off("change",this.onAssetChanged),t.off("remove",this.onAssetRemoved)),this.skeletonAsset&&(t=this.system.app.assets.get(this.skeletonAsset))&&(t.off("change",this.onAssetChanged),t.off("remove",this.onAssetRemoved)),this.textureAssets&&this.textureAssets.length)for(var e=0;e<this.textureAssets.length;e++)(t=this.system.app.assets.get(this.textureAssets[e]))&&(t.off("change",this.onAssetChanged),t.off("remove",this.onAssetRemoved))}}])}(t.Component),za=h((function t(){s(this,t),this.enabled=!0,this.atlasAsset=null,this.textureAssets=[],this.skeletonAsset=null,this.speed=1,this.spine=null,this.atlasData=null,this.textures=[],this.skeletonData=null}));var ja=function(t){function e(t){var n,a,r,i;return s(this,e),a=this,i=[t],r=u(r=e),(n=d(a,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(r,i||[],u(a).constructor):r.apply(a,i))).id="spine",n.ComponentType=Ga,n.DataType=za,n.schema=["enabled","atlasAsset","textureAssets","skeletonAsset","atlasData","textures","skeletonData","speed","spine"],n.on("beforeremove",n.onBeforeRemove,n),n.app.systems.on("update",n.onUpdate,n),n}return c(e,t),h(e,[{key:"initializeComponentData",value:function(t,n,a){a=["enabled","atlasAsset","textureAssets","skeletonAsset","atlasData","textures","skeletonData","spine"],v(u(e.prototype),"initializeComponentData",this).call(this,t,n,a)}},{key:"onBeforeRemove",value:function(t,e){var n=t.spine.data;n.spine&&n.spine.destroy(),t.spine.removeComponent()}},{key:"onUpdate",value:function(t){var e=this.store;for(var n in e)if(e.hasOwnProperty(n)){var a=e[n],r=a.data;r.enabled&&a.entity.enabled&&r.spine&&(r.spine.setPosition(a.entity.getPosition()),r.spine.update(r.speed*t))}}}])}(t.ComponentSystem);return function(){var t=r.Application.getApplication();if(t){var e=new ja(t);t.systems.add(e)}else console.warn("No Application found. An Application or AppBase must be instantiated before `playcanvas-spine`.")}(),Cn}(pc);
