/* Copyright 2015-2021 PlayCanvas Ltd */

var spine=(()=>{var a=Object.defineProperty,t={};((t,e)=>{for(var s in a(t,"__esModule",{value:!0}),e)a(t,s,{get:e[s],enumerable:!0})})(t,{AlphaTimeline:()=>se,Animation:()=>Wt,AnimationState:()=>j,AnimationStateAdapter:()=>K,AnimationStateData:()=>ot,AssetManagerBase:()=>Yt,AtlasAttachmentLoader:()=>kt,Attachment:()=>p,AttachmentTimeline:()=>ie,BinaryInput:()=>ke,BlendMode:()=>Pt,Bone:()=>Ct,BoneData:()=>St,BoundingBoxAttachment:()=>ht,CURRENT:()=>it,ClippingAttachment:()=>lt,Color:()=>Ot,ConstraintData:()=>Tt,CurveTimeline:()=>L,CurveTimeline1:()=>O,CurveTimeline2:()=>U,DebugUtils:()=>c,DeformTimeline:()=>ne,Downloader:()=>Mt,DrawOrderTimeline:()=>he,Event:()=>ge,EventData:()=>Ft,EventQueue:()=>$,EventTimeline:()=>oe,EventType:()=>z,FIRST:()=>tt,FakeTexture:()=>ut,HOLD_FIRST:()=>st,HOLD_MIX:()=>at,HOLD_SUBSEQUENT:()=>et,IkConstraint:()=>Xt,IkConstraintData:()=>Bt,IkConstraintTimeline:()=>le,IntSet:()=>e,Interpolation:()=>n,JitterEffect:()=>ns,MathUtils:()=>G,MeshAttachment:()=>vt,MixBlend:()=>w,MixDirection:()=>y,PathAttachment:()=>xt,PathConstraint:()=>_t,PathConstraintData:()=>Rt,PathConstraintMixTimeline:()=>me,PathConstraintPositionTimeline:()=>de,PathConstraintSpacingTimeline:()=>ue,PointAttachment:()=>bt,Pool:()=>d,PositionMode:()=>fe,Pow:()=>o,PowOut:()=>h,RGB2Timeline:()=>re,RGBA2Timeline:()=>ae,RGBATimeline:()=>te,RGBTimeline:()=>ee,RegionAttachment:()=>yt,RotateMode:()=>It,RotateTimeline:()=>qt,SETUP:()=>rt,SUBSEQUENT:()=>Z,ScaleTimeline:()=>Gt,ScaleXTimeline:()=>$t,ScaleYTimeline:()=>Jt,ShearTimeline:()=>Qt,ShearXTimeline:()=>Kt,ShearYTimeline:()=>Zt,Skeleton:()=>Nt,SkeletonBinary:()=>Ae,SkeletonBounds:()=>Qe,SkeletonClipping:()=>Ze,SkeletonData:()=>Lt,SkeletonJson:()=>ts,Skin:()=>xe,SkinEntry:()=>ve,Slot:()=>Dt,SlotData:()=>be,SpacingMode:()=>pe,StringSet:()=>s,SwirlEffect:()=>hs,Texture:()=>ct,TextureAtlas:()=>mt,TextureAtlasPage:()=>pt,TextureAtlasRegion:()=>gt,TextureFilter:()=>J,TextureRegion:()=>dt,TextureWrap:()=>Q,TimeKeeper:()=>m,Timeline:()=>N,TrackEntry:()=>H,TransformConstraint:()=>Vt,TransformConstraintData:()=>ye,TransformConstraintTimeline:()=>ce,TransformMode:()=>At,TranslateTimeline:()=>zt,TranslateXTimeline:()=>jt,TranslateYTimeline:()=>Ht,Triangulator:()=>Ke,Utils:()=>Ut,Vector2:()=>u,VertexAttachment:()=>D,WindowedMean:()=>f});var e=class{constructor(){this.array=new Array}add(t){var e=this.contains(t);return this.array[0|t]=0|t,!e}contains(t){return null!=this.array[0|t]}remove(t){this.array[0|t]=void 0}clear(){this.array.length=0}},s=class{constructor(){this.entries={},this.size=0}add(t){var e=this.entries[t];return this.entries[t]=!0,!e&&(this.size++,!0)}addAll(t){for(var e=this.size,s=0,a=t.length;s<a;s++)this.add(t[s]);return e!=this.size}contains(t){return this.entries[t]}clear(){this.entries={},this.size=0}},r=class{constructor(t=0,e=0,s=0,a=0){this.r=t,this.g=e,this.b=s,this.a=a}set(t,e,s,a){return this.r=t,this.g=e,this.b=s,this.a=a,this.clamp()}setFromColor(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this}setFromString(t){return t="#"==t.charAt(0)?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=8!=t.length?1:parseInt(t.substr(6,2),16)/255,this}add(t,e,s,a){return this.r+=t,this.g+=e,this.b+=s,this.a+=a,this.clamp()}clamp(){return this.r<0?this.r=0:1<this.r&&(this.r=1),this.g<0?this.g=0:1<this.g&&(this.g=1),this.b<0?this.b=0:1<this.b&&(this.b=1),this.a<0?this.a=0:1<this.a&&(this.a=1),this}static rgba8888ToColor(t,e){t.r=((4278190080&e)>>>24)/255,t.g=((16711680&e)>>>16)/255,t.b=((65280&e)>>>8)/255,t.a=(255&e)/255}static rgb888ToColor(t,e){t.r=((16711680&e)>>>16)/255,t.g=((65280&e)>>>8)/255,t.b=(255&e)/255}static fromString(t){return(new r).setFromString(t)}},Ot=r;Ot.WHITE=new r(1,1,1,1),Ot.RED=new r(1,0,0,1),Ot.GREEN=new r(0,1,0,1),Ot.BLUE=new r(0,0,1,1),Ot.MAGENTA=new r(1,0,1,1);var i=class{static clamp(t,e,s){return t<e?e:s<t?s:t}static cosDeg(t){return Math.cos(t*i.degRad)}static sinDeg(t){return Math.sin(t*i.degRad)}static signum(t){return 0<t?1:t<0?-1:0}static toInt(t){return 0<t?Math.floor(t):Math.ceil(t)}static cbrt(t){var e=Math.pow(Math.abs(t),1/3);return t<0?-e:e}static randomTriangular(t,e){return i.randomTriangularWith(t,e,.5*(t+e))}static randomTriangularWith(t,e,s){var a=Math.random(),r=e-t;return a<=(s-t)/r?t+Math.sqrt(a*r*(s-t)):e-Math.sqrt((1-a)*r*(e-s))}static isPowerOfTwo(t){return t&&0==(t&t-1)}},G=i;G.PI=3.1415927,G.PI2=2*i.PI,G.radiansToDegrees=180/i.PI,G.radDeg=i.radiansToDegrees,G.degreesToRadians=i.PI/180,G.degRad=i.degreesToRadians;var n=class{apply(t,e,s){return t+(e-t)*this.applyInternal(s)}},o=class extends n{constructor(t){super(),this.power=2,this.power=t}applyInternal(t){return t<=.5?Math.pow(2*t,this.power)/2:Math.pow(2*(t-1),this.power)/(this.power%2==0?-2:2)+1}},h=class extends o{constructor(t){super(t)}applyInternal(t){return Math.pow(t-1,this.power)*(this.power%2==0?-1:1)+1}},l=class{static arrayCopy(s,a,r,i,n){for(let t=a,e=i;t<a+n;t++,e++)r[e]=s[t]}static arrayFill(e,s,a,r){for(let t=s;t<a;t++)e[t]=r}static setArraySize(e,s,a=0){var r=e.length;if(r==s)return e;if(r<(e.length=s))for(let t=r;t<s;t++)e[t]=a;return e}static ensureArrayCapacity(t,e,s=0){return t.length>=e?t:l.setArraySize(t,e,s)}static newArray(e,s){let a=new Array(e);for(let t=0;t<e;t++)a[t]=s;return a}static newFloatArray(t){if(l.SUPPORTS_TYPED_ARRAYS)return new Float32Array(t);{let e=new Array(t);for(let t=0;t<e.length;t++)e[t]=0;return e}}static newShortArray(t){if(l.SUPPORTS_TYPED_ARRAYS)return new Int16Array(t);{let e=new Array(t);for(let t=0;t<e.length;t++)e[t]=0;return e}}static toFloatArray(t){return l.SUPPORTS_TYPED_ARRAYS?new Float32Array(t):t}static toSinglePrecision(t){return l.SUPPORTS_TYPED_ARRAYS?Math.fround(t):t}static webkit602BugfixHelper(t,e){}static contains(t,e,s=0){for(var a=0;a<t.length;a++)if(t[a]==e)return!0;return!1}static enumValue(t,e){return t[e[0].toUpperCase()+e.slice(1)]}},Ut=l;Ut.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array;var c=class{static logBones(e){for(let t=0;t<e.bones.length;t++){var s=e.bones[t];console.log(s.data.name+", "+s.a+", "+s.b+", "+s.c+", "+s.d+", "+s.worldX+", "+s.worldY)}}},d=class{constructor(t){this.items=new Array,this.instantiator=t}obtain(){return 0<this.items.length?this.items.pop():this.instantiator()}free(t){t.reset&&t.reset(),this.items.push(t)}freeAll(e){for(let t=0;t<e.length;t++)this.free(e[t])}clear(){this.items.length=0}},u=class{constructor(t=0,e=0){this.x=t,this.y=e}set(t,e){return this.x=t,this.y=e,this}length(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)}normalize(){var t=this.length();return 0!=t&&(this.x/=t,this.y/=t),this}},m=class{constructor(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}update(){var t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,1<this.frameTime&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)}},f=class{constructor(t=32){this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(t)}hasEnoughData(){return this.addedValues>=this.values.length}addValue(t){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=t,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0}getMean(){if(this.hasEnoughData()){if(this.dirty){let e=0;for(let t=0;t<this.values.length;t++)e+=this.values[t];this.mean=e/this.values.length,this.dirty=!1}return this.mean}return 0}},p=class{constructor(t){if(!t)throw new Error("name cannot be null.");this.name=t}},g=class extends p{constructor(t){super(t),this.id=g.nextID++,this.worldVerticesLength=0,this.deformAttachment=this}computeWorldVertices(t,s,n,o,h,l){n=h+(n>>1)*l;var a=t.bone.skeleton,r=t.deform;let c=this.vertices;var d=this.bones;if(d){let i=0,e=0;for(let t=0;t<s;t+=2){var u=d[i];i+=u+1,e+=u}var m=a.bones;if(0==r.length)for(let s=h,a=3*e;s<n;s+=l){let t=0,e=0;var f=d[i++];for(f+=i;i<f;i++,a+=3){var p=m[d[i]],g=c[a],v=c[a+1],x=c[a+2];t+=(g*p.a+v*p.b+p.worldX)*x,e+=(g*p.c+v*p.d+p.worldY)*x}o[s]=t,o[s+1]=e}else{var b=r;for(let s=h,a=3*e,r=e<<1;s<n;s+=l){let t=0,e=0;var w=d[i++];for(w+=i;i<w;i++,a+=3,r+=2){var y=m[d[i]],A=c[a]+b[r],k=c[a+1]+b[r+1],S=c[a+2];t+=(A*y.a+k*y.b+y.worldX)*S,e+=(A*y.c+k*y.d+y.worldY)*S}o[s]=t,o[s+1]=e}}}else{0<r.length&&(c=r);var t=t.bone,i=t.worldX,I=t.worldY,C=t.a,T=t.b,Y=t.c,M=t.d;for(let t=s,e=h;e<n;t+=2,e+=l){var F=c[t],X=c[t+1];o[e]=F*C+X*T+i,o[e+1]=F*Y+X*M+I}}}copyTo(t){this.bones?(t.bones=new Array(this.bones.length),Ut.arrayCopy(this.bones,0,t.bones,0,this.bones.length)):t.bones=null,this.vertices?(t.vertices=Ut.newFloatArray(this.vertices.length),Ut.arrayCopy(this.vertices,0,t.vertices,0,this.vertices.length)):t.vertices=null,t.worldVerticesLength=this.worldVerticesLength,t.deformAttachment=this.deformAttachment}},D=g;D.nextID=0;var w,y,Wt=class{constructor(t,e,s){if(!t)throw new Error("name cannot be null.");this.name=t,this.setTimelines(e),this.duration=s}setTimelines(t){if(!t)throw new Error("timelines cannot be null.");this.timelines=t,this.timelineIds=new s;for(var e=0;e<t.length;e++)this.timelineIds.addAll(t[e].getPropertyIds())}hasTimeline(e){for(let t=0;t<e.length;t++)if(this.timelineIds.contains(e[t]))return!0;return!1}apply(s,a,r,t,i,n,o,h){if(!s)throw new Error("skeleton cannot be null.");t&&0!=this.duration&&(r%=this.duration,0<a&&(a%=this.duration));let l=this.timelines;for(let t=0,e=l.length;t<e;t++)l[t].apply(s,a,r,i,n,o,h)}};(X=w=w||{})[X.setup=0]="setup",X[X.first=1]="first",X[X.replace=2]="replace",X[X.add=3]="add",(B=y=y||{})[B.mixIn=0]="mixIn",B[B.mixOut=1]="mixOut";var v=0,x=1,b=2,A=3,k=4,S=5,I=6,C=7,T=8,Y=9,M=10,F=11,X=12,B=13,R=14,E=15,_=16,P=17,V=18,N=class{constructor(t,e){this.propertyIds=e,this.frames=Ut.newFloatArray(t*this.getFrameEntries())}getPropertyIds(){return this.propertyIds}getFrameEntries(){return 1}getFrameCount(){return this.frames.length/this.getFrameEntries()}getDuration(){return this.frames[this.frames.length-this.getFrameEntries()]}static search1(e,s){var a=e.length;for(let t=1;t<a;t++)if(e[t]>s)return t-1;return a-1}static search(e,s,a){var r=e.length;for(let t=a;t<r;t+=a)if(e[t]>s)return t-a;return r-a}},L=class extends N{constructor(t,e,s){super(t,s),this.curves=Ut.newFloatArray(t+18*e),this.curves[t-1]=1}setLinear(t){this.curves[t]=0}setStepped(t){this.curves[t]=1}shrink(t){var e=this.getFrameCount()+18*t;this.curves.length>e&&(t=Ut.newFloatArray(e),Ut.arrayCopy(this.curves,0,t,0,e),this.curves=t)}setBezier(t,e,s,a,r,i,n,o,h,l,c){let d=this.curves,u=this.getFrameCount()+18*t;0==s&&(d[e]=2+u);var s=.03*(a-2*i+o),e=.03*(r-2*n+h),m=.006*(3*(i-o)-a+l),f=.006*(3*(n-h)-r+c);let p=2*s+m,g=2*e+f,v=.3*(i-a)+s+.16666667*m,x=.3*(n-r)+e+.16666667*f,b=a+v,w=r+x;for(var y=u+18;u<y;u+=2)d[u]=b,d[u+1]=w,v+=p,x+=g,p+=m,g+=f,b+=v,w+=x}getBezierValue(t,e,s,a){var r=this.curves;if(r[a]>t){var i=this.frames[e],n=this.frames[e+s];return n+(t-i)/(r[a]-i)*(r[a+1]-n)}var o=a+18;for(a+=2;a<o;a+=2)if(r[a]>=t){var h=r[a-2],l=r[a-1];return l+(t-h)/(r[a]-h)*(r[a+1]-l)}e+=this.getFrameEntries();i=r[o-2],n=r[o-1];return n+(t-i)/(this.frames[e]-i)*(this.frames[e+s]-n)}},O=class extends L{constructor(t,e,s){super(t,e,[s])}getFrameEntries(){return 2}setFrame(t,e,s){this.frames[t<<=1]=e,this.frames[t+1]=s}getCurveValue(e){var s=this.frames;let a=s.length-2;for(let t=2;t<=a;t+=2)if(s[t]>e){a=t-2;break}var t=this.curves[a>>1];switch(t){case 0:var r=s[a],i=s[a+1];return i+(e-r)/(s[a+2]-r)*(s[a+2+1]-i);case 1:return s[a+1]}return this.getBezierValue(e,a,1,t-2)}},U=class extends L{constructor(t,e,s,a){super(t,e,[s,a])}getFrameEntries(){return 3}setFrame(t,e,s,a){this.frames[t*=3]=e,this.frames[t+1]=s,this.frames[t+2]=a}},qt=class extends O{constructor(t,e,s){super(t,e,v+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,a,r,i,n){let o=t.bones[this.boneIndex];if(o.active)if(s<this.frames[0])switch(i){case 0:return void(o.rotation=o.data.rotation);case 1:o.rotation+=(o.data.rotation-o.rotation)*r}else{let t=this.getCurveValue(s);switch(i){case 0:o.rotation=o.data.rotation+t*r;break;case 1:case 2:t+=o.data.rotation-o.rotation;case 3:o.rotation+=t*r}}}},zt=class extends U{constructor(t,e,s){super(t,e,x+"|"+s,b+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,a,r,i,n){let o=t.bones[this.boneIndex];if(o.active){var h=this.frames;if(s<h[0])switch(i){case 0:return o.x=o.data.x,void(o.y=o.data.y);case 1:o.x+=(o.data.x-o.x)*r,o.y+=(o.data.y-o.y)*r}else{let t=0,e=0;var l=N.search(h,s,3),c=this.curves[l/3];switch(c){case 0:var d=h[l];t=h[l+1],e=h[l+2];d=(s-d)/(h[l+3]-d);t+=(h[l+3+1]-t)*d,e+=(h[l+3+2]-e)*d;break;case 1:t=h[l+1],e=h[l+2];break;default:t=this.getBezierValue(s,l,1,c-2),e=this.getBezierValue(s,l,2,c+18-2)}switch(i){case 0:o.x=o.data.x+t*r,o.y=o.data.y+e*r;break;case 1:case 2:o.x+=(o.data.x+t-o.x)*r,o.y+=(o.data.y+e-o.y)*r;break;case 3:o.x+=t*r,o.y+=e*r}}}}},jt=class extends O{constructor(t,e,s){super(t,e,x+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,a,r,i,n){let o=t.bones[this.boneIndex];if(o.active)if(s<this.frames[0])switch(i){case 0:return void(o.x=o.data.x);case 1:o.x+=(o.data.x-o.x)*r}else{var h=this.getCurveValue(s);switch(i){case 0:o.x=o.data.x+h*r;break;case 1:case 2:o.x+=(o.data.x+h-o.x)*r;break;case 3:o.x+=h*r}}}},Ht=class extends O{constructor(t,e,s){super(t,e,b+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,a,r,i,n){let o=t.bones[this.boneIndex];if(o.active)if(s<this.frames[0])switch(i){case 0:return void(o.y=o.data.y);case 1:o.y+=(o.data.y-o.y)*r}else{var h=this.getCurveValue(s);switch(i){case 0:o.y=o.data.y+h*r;break;case 1:case 2:o.y+=(o.data.y+h-o.y)*r;break;case 3:o.y+=h*r}}}},Gt=class extends U{constructor(t,e,s){super(t,e,A+"|"+s,k+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,r,s,i,n,o){let h=t.bones[this.boneIndex];if(h.active){var l=this.frames;if(r<l[0])switch(n){case 0:return h.scaleX=h.data.scaleX,void(h.scaleY=h.data.scaleY);case 1:h.scaleX+=(h.data.scaleX-h.scaleX)*i,h.scaleY+=(h.data.scaleY-h.scaleY)*i}else{let s,a;var c=N.search(l,r,3),d=this.curves[c/3];switch(d){case 0:var u=l[c];s=l[c+1],a=l[c+2];u=(r-u)/(l[c+3]-u);s+=(l[c+3+1]-s)*u,a+=(l[c+3+2]-a)*u;break;case 1:s=l[c+1],a=l[c+2];break;default:s=this.getBezierValue(r,c,1,d-2),a=this.getBezierValue(r,c,2,d+18-2)}if(s*=h.data.scaleX,a*=h.data.scaleY,1==i)3==n?(h.scaleX+=s-h.data.scaleX,h.scaleY+=a-h.data.scaleY):(h.scaleX=s,h.scaleY=a);else{let t=0,e=0;if(1==o)switch(n){case 0:t=h.data.scaleX,e=h.data.scaleY,h.scaleX=t+(Math.abs(s)*G.signum(t)-t)*i,h.scaleY=e+(Math.abs(a)*G.signum(e)-e)*i;break;case 1:case 2:t=h.scaleX,e=h.scaleY,h.scaleX=t+(Math.abs(s)*G.signum(t)-t)*i,h.scaleY=e+(Math.abs(a)*G.signum(e)-e)*i;break;case 3:h.scaleX=(s-h.data.scaleX)*i,h.scaleY=(a-h.data.scaleY)*i}else switch(n){case 0:t=Math.abs(h.data.scaleX)*G.signum(s),e=Math.abs(h.data.scaleY)*G.signum(a),h.scaleX=t+(s-t)*i,h.scaleY=e+(a-e)*i;break;case 1:case 2:t=Math.abs(h.scaleX)*G.signum(s),e=Math.abs(h.scaleY)*G.signum(a),h.scaleX=t+(s-t)*i,h.scaleY=e+(a-e)*i;break;case 3:h.scaleX+=(s-h.data.scaleX)*i,h.scaleY+=(a-h.data.scaleY)*i}}}}}},$t=class extends O{constructor(t,e,s){super(t,e,A+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,a,r,i,n){let o=t.bones[this.boneIndex];if(o.active)if(s<this.frames[0])switch(i){case 0:return void(o.scaleX=o.data.scaleX);case 1:o.scaleX+=(o.data.scaleX-o.scaleX)*r}else{var h=this.getCurveValue(s)*o.data.scaleX;if(1==r)3==i?o.scaleX+=h-o.data.scaleX:o.scaleX=h;else{let t=0;if(1==n)switch(i){case 0:t=o.data.scaleX,o.scaleX=t+(Math.abs(h)*G.signum(t)-t)*r;break;case 1:case 2:t=o.scaleX,o.scaleX=t+(Math.abs(h)*G.signum(t)-t)*r;break;case 3:o.scaleX=(h-o.data.scaleX)*r}else switch(i){case 0:t=Math.abs(o.data.scaleX)*G.signum(h),o.scaleX=t+(h-t)*r;break;case 1:case 2:t=Math.abs(o.scaleX)*G.signum(h),o.scaleX=t+(h-t)*r;break;case 3:o.scaleX+=(h-o.data.scaleX)*r}}}}},Jt=class extends O{constructor(t,e,s){super(t,e,k+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,a,r,i,n){let o=t.bones[this.boneIndex];if(o.active)if(s<this.frames[0])switch(i){case 0:return void(o.scaleY=o.data.scaleY);case 1:o.scaleY+=(o.data.scaleY-o.scaleY)*r}else{var h=this.getCurveValue(s)*o.data.scaleY;if(1==r)3==i?o.scaleY+=h-o.data.scaleY:o.scaleY=h;else{let t=0;if(1==n)switch(i){case 0:t=o.data.scaleY,o.scaleY=t+(Math.abs(h)*G.signum(t)-t)*r;break;case 1:case 2:t=o.scaleY,o.scaleY=t+(Math.abs(h)*G.signum(t)-t)*r;break;case 3:o.scaleY=(h-o.data.scaleY)*r}else switch(i){case 0:t=Math.abs(o.data.scaleY)*G.signum(h),o.scaleY=t+(h-t)*r;break;case 1:case 2:t=Math.abs(o.scaleY)*G.signum(h),o.scaleY=t+(h-t)*r;break;case 3:o.scaleY+=(h-o.data.scaleY)*r}}}}},Qt=class extends U{constructor(t,e,s){super(t,e,S+"|"+s,I+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,a,r,i,n){let o=t.bones[this.boneIndex];if(o.active){var h=this.frames;if(s<h[0])switch(i){case 0:return o.shearX=o.data.shearX,void(o.shearY=o.data.shearY);case 1:o.shearX+=(o.data.shearX-o.shearX)*r,o.shearY+=(o.data.shearY-o.shearY)*r}else{let t=0,e=0;var l=N.search(h,s,3),c=this.curves[l/3];switch(c){case 0:var d=h[l];t=h[l+1],e=h[l+2];d=(s-d)/(h[l+3]-d);t+=(h[l+3+1]-t)*d,e+=(h[l+3+2]-e)*d;break;case 1:t=h[l+1],e=h[l+2];break;default:t=this.getBezierValue(s,l,1,c-2),e=this.getBezierValue(s,l,2,c+18-2)}switch(i){case 0:o.shearX=o.data.shearX+t*r,o.shearY=o.data.shearY+e*r;break;case 1:case 2:o.shearX+=(o.data.shearX+t-o.shearX)*r,o.shearY+=(o.data.shearY+e-o.shearY)*r;break;case 3:o.shearX+=t*r,o.shearY+=e*r}}}}},Kt=class extends O{constructor(t,e,s){super(t,e,S+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,a,r,i,n){let o=t.bones[this.boneIndex];if(o.active)if(s<this.frames[0])switch(i){case 0:return void(o.shearX=o.data.shearX);case 1:o.shearX+=(o.data.shearX-o.shearX)*r}else{var h=this.getCurveValue(s);switch(i){case 0:o.shearX=o.data.shearX+h*r;break;case 1:case 2:o.shearX+=(o.data.shearX+h-o.shearX)*r;break;case 3:o.shearX+=h*r}}}},Zt=class extends O{constructor(t,e,s){super(t,e,I+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,a,r,i,n){let o=t.bones[this.boneIndex];if(o.active)if(s<this.frames[0])switch(i){case 0:return void(o.shearY=o.data.shearY);case 1:o.shearY+=(o.data.shearY-o.shearY)*r}else{var h=this.getCurveValue(s);switch(i){case 0:o.shearY=o.data.shearY+h*r;break;case 1:case 2:o.shearY+=(o.data.shearY+h-o.shearY)*r;break;case 3:o.shearY+=h*r}}}},te=class extends L{constructor(t,e,s){super(t,e,[C+"|"+s,T+"|"+s]),this.slotIndex=0,this.slotIndex=s}getFrameEntries(){return 5}setFrame(t,e,s,a,r,i){this.frames[t*=5]=e,this.frames[t+1]=s,this.frames[t+2]=a,this.frames[t+3]=r,this.frames[t+4]=i}apply(i,t,n,e,o,h,s){i=i.slots[this.slotIndex];if(i.bone.active){var l=this.frames;let r=i.color;if(n<l[0]){var a=i.data.color;switch(h){case 0:return void r.setFromColor(a);case 1:r.add((a.r-r.r)*o,(a.g-r.g)*o,(a.b-r.b)*o,(a.a-r.a)*o)}}else{let t=0,e=0,s=0,a=0;var c=N.search(l,n,5),d=this.curves[c/5];switch(d){case 0:var u=l[c];t=l[c+1],e=l[c+2],s=l[c+3],a=l[c+4];u=(n-u)/(l[c+5]-u);t+=(l[c+5+1]-t)*u,e+=(l[c+5+2]-e)*u,s+=(l[c+5+3]-s)*u,a+=(l[c+5+4]-a)*u;break;case 1:t=l[c+1],e=l[c+2],s=l[c+3],a=l[c+4];break;default:t=this.getBezierValue(n,c,1,d-2),e=this.getBezierValue(n,c,2,d+18-2),s=this.getBezierValue(n,c,3,d+36-2),a=this.getBezierValue(n,c,4,d+54-2)}1==o?r.set(t,e,s,a):(0==h&&r.setFromColor(i.data.color),r.add((t-r.r)*o,(e-r.g)*o,(s-r.b)*o,(a-r.a)*o))}}}},ee=class extends L{constructor(t,e,s){super(t,e,[C+"|"+s]),this.slotIndex=0,this.slotIndex=s}getFrameEntries(){return 4}setFrame(t,e,s,a,r){this.frames[t<<=2]=e,this.frames[t+1]=s,this.frames[t+2]=a,this.frames[t+3]=r}apply(r,t,i,e,n,o,s){r=r.slots[this.slotIndex];if(r.bone.active){var h=this.frames;let a=r.color;if(i<h[0]){var l=r.data.color;switch(o){case 0:return a.r=l.r,a.g=l.g,void(a.b=l.b);case 1:a.r+=(l.r-a.r)*n,a.g+=(l.g-a.g)*n,a.b+=(l.b-a.b)*n}}else{let t=0,e=0,s=0;var c=N.search(h,i,4),d=this.curves[c>>2];switch(d){case 0:var u=h[c];t=h[c+1],e=h[c+2],s=h[c+3];u=(i-u)/(h[c+4]-u);t+=(h[c+4+1]-t)*u,e+=(h[c+4+2]-e)*u,s+=(h[c+4+3]-s)*u;break;case 1:t=h[c+1],e=h[c+2],s=h[c+3];break;default:t=this.getBezierValue(i,c,1,d-2),e=this.getBezierValue(i,c,2,d+18-2),s=this.getBezierValue(i,c,3,d+36-2)}1==n?(a.r=t,a.g=e,a.b=s):(0==o&&(r=r.data.color,a.r=r.r,a.g=r.g,a.b=r.b),a.r+=(t-a.r)*n,a.g+=(e-a.g)*n,a.b+=(s-a.b)*n)}}}},se=class extends O{constructor(t,e,s){super(t,e,T+"|"+s),this.slotIndex=0,this.slotIndex=s}apply(e,t,s,a,r,i,n){e=e.slots[this.slotIndex];if(e.bone.active){let t=e.color;if(s<this.frames[0]){var o=e.data.color;switch(i){case 0:return void(t.a=o.a);case 1:t.a+=(o.a-t.a)*r}}else{s=this.getCurveValue(s);1==r?t.a=s:(0==i&&(t.a=e.data.color.a),t.a+=(s-t.a)*r)}}}},ae=class extends L{constructor(t,e,s){super(t,e,[C+"|"+s,T+"|"+s,Y+"|"+s]),this.slotIndex=0,this.slotIndex=s}getFrameEntries(){return 8}setFrame(t,e,s,a,r,i,n,o,h){this.frames[t<<=3]=e,this.frames[t+1]=s,this.frames[t+2]=a,this.frames[t+3]=r,this.frames[t+4]=i,this.frames[t+5]=n,this.frames[t+6]=o,this.frames[t+7]=h}apply(l,t,c,e,d,u,s){l=l.slots[this.slotIndex];if(l.bone.active){var m=this.frames;let o=l.color,h=l.darkColor;if(c<m[0]){var a=l.data.color,r=l.data.darkColor;switch(u){case 0:return o.setFromColor(a),h.r=r.r,h.g=r.g,void(h.b=r.b);case 1:o.add((a.r-o.r)*d,(a.g-o.g)*d,(a.b-o.b)*d,(a.a-o.a)*d),h.r+=(r.r-h.r)*d,h.g+=(r.g-h.g)*d,h.b+=(r.b-h.b)*d}}else{let t=0,e=0,s=0,a=0,r=0,i=0,n=0;var f=N.search(m,c,8),p=this.curves[f>>3];switch(p){case 0:var g=m[f];t=m[f+1],e=m[f+2],s=m[f+3],a=m[f+4],r=m[f+5],i=m[f+6],n=m[f+7];g=(c-g)/(m[f+8]-g);t+=(m[f+8+1]-t)*g,e+=(m[f+8+2]-e)*g,s+=(m[f+8+3]-s)*g,a+=(m[f+8+4]-a)*g,r+=(m[f+8+5]-r)*g,i+=(m[f+8+6]-i)*g,n+=(m[f+8+7]-n)*g;break;case 1:t=m[f+1],e=m[f+2],s=m[f+3],a=m[f+4],r=m[f+5],i=m[f+6],n=m[f+7];break;default:t=this.getBezierValue(c,f,1,p-2),e=this.getBezierValue(c,f,2,p+18-2),s=this.getBezierValue(c,f,3,p+36-2),a=this.getBezierValue(c,f,4,p+54-2),r=this.getBezierValue(c,f,5,p+72-2),i=this.getBezierValue(c,f,6,p+90-2),n=this.getBezierValue(c,f,7,p+108-2)}1==d?(o.set(t,e,s,a),h.r=r,h.g=i,h.b=n):(0==u&&(o.setFromColor(l.data.color),l=l.data.darkColor,h.r=l.r,h.g=l.g,h.b=l.b),o.add((t-o.r)*d,(e-o.g)*d,(s-o.b)*d,(a-o.a)*d),h.r+=(r-h.r)*d,h.g+=(i-h.g)*d,h.b+=(n-h.b)*d)}}}},re=class extends L{constructor(t,e,s){super(t,e,[C+"|"+s,Y+"|"+s]),this.slotIndex=0,this.slotIndex=s}getFrameEntries(){return 7}setFrame(t,e,s,a,r,i,n,o){this.frames[t*=7]=e,this.frames[t+1]=s,this.frames[t+2]=a,this.frames[t+3]=r,this.frames[t+4]=i,this.frames[t+5]=n,this.frames[t+6]=o}apply(h,t,l,e,c,d,s){h=h.slots[this.slotIndex];if(h.bone.active){var u=this.frames;let n=h.color,o=h.darkColor;if(l<u[0]){var a=h.data.color,r=h.data.darkColor;switch(d){case 0:return n.r=a.r,n.g=a.g,n.b=a.b,o.r=r.r,o.g=r.g,void(o.b=r.b);case 1:n.r+=(a.r-n.r)*c,n.g+=(a.g-n.g)*c,n.b+=(a.b-n.b)*c,o.r+=(r.r-o.r)*c,o.g+=(r.g-o.g)*c,o.b+=(r.b-o.b)*c}}else{let t=0,e=0,s=0,a=0,r=0,i=0;var m=N.search(u,l,7),f=this.curves[m/7];switch(f){case 0:var p=u[m];t=u[m+1],e=u[m+2],s=u[m+3],a=u[m+4],r=u[m+5],i=u[m+6];p=(l-p)/(u[m+7]-p);t+=(u[m+7+1]-t)*p,e+=(u[m+7+2]-e)*p,s+=(u[m+7+3]-s)*p,a+=(u[m+7+4]-a)*p,r+=(u[m+7+5]-r)*p,i+=(u[m+7+6]-i)*p;break;case 1:t=u[m+1],e=u[m+2],s=u[m+3],a=u[m+4],r=u[m+5],i=u[m+6];break;default:t=this.getBezierValue(l,m,1,f-2),e=this.getBezierValue(l,m,2,f+18-2),s=this.getBezierValue(l,m,3,f+36-2),a=this.getBezierValue(l,m,4,f+54-2),r=this.getBezierValue(l,m,5,f+72-2),i=this.getBezierValue(l,m,6,f+90-2)}1==c?(n.r=t,n.g=e,n.b=s,o.r=a,o.g=r,o.b=i):(0==d&&(d=h.data.color,h=h.data.darkColor,n.r=d.r,n.g=d.g,n.b=d.b,o.r=h.r,o.g=h.g,o.b=h.b),n.r+=(t-n.r)*c,n.g+=(e-n.g)*c,n.b+=(s-n.b)*c,o.r+=(a-o.r)*c,o.g+=(r-o.g)*c,o.b+=(i-o.b)*c)}}}},ie=class extends N{constructor(t,e){super(t,[M+"|"+e]),this.slotIndex=0,this.slotIndex=e,this.attachmentNames=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e,s){this.frames[t]=e,this.attachmentNames[t]=s}apply(t,e,s,a,r,i,n){var o=t.slots[this.slotIndex];o.bone.active&&(1!=n?s<this.frames[0]?0!=i&&1!=i||this.setAttachment(t,o,o.data.attachmentName):this.setAttachment(t,o,this.attachmentNames[N.search1(this.frames,s)]):0==i&&this.setAttachment(t,o,o.data.attachmentName))}setAttachment(t,e,s){e.setAttachment(s?t.getAttachment(this.slotIndex,s):null)}},ne=class extends L{constructor(t,e,s,a){super(t,e,[F+"|"+s+"|"+a.id]),this.slotIndex=0,this.slotIndex=s,this.attachment=a,this.vertices=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e,s){this.frames[t]=e,this.vertices[t]=s}setBezier(t,e,s,a,r,i,n,o,h,l,c){let d=this.curves,u=this.getFrameCount()+18*t;0==s&&(d[e]=2+u);var s=.03*(a-2*i+o),e=.03*h-.06*n,m=.006*(3*(i-o)-a+l),f=.018*(n-h+.33333333);let p=2*s+m,g=2*e+f,v=.3*(i-a)+s+.16666667*m,x=.3*n+e+.16666667*f,b=a+v,w=x;for(var y=u+18;u<y;u+=2)d[u]=b,d[u+1]=w,v+=p,x+=g,p+=m,g+=f,b+=v,w+=x}getCurvePercent(t,e){var s=this.curves;let a=s[e];switch(a){case 0:var r=this.frames[e];return(t-r)/(this.frames[e+this.getFrameEntries()]-r);case 1:return 0}if(a-=2,s[a]>t){var i=this.frames[e];return s[a+1]*(t-i)/(s[a]-i)}var n=a+18;for(a+=2;a<n;a+=2)if(s[a]>=t){var o=s[a-2],h=s[a-1];return h+(t-o)/(s[a]-o)*(s[a+1]-h)}var l=s[n-2],i=s[n-1];return i+(1-i)*(t-l)/(this.frames[e+this.getFrameEntries()]-l)}apply(t,e,s,a,r,i,n){let o=t.slots[this.slotIndex];if(o.bone.active){var h=o.getAttachment();if(h instanceof D&&h.deformAttachment==this.attachment){let e=o.deform;0==e.length&&(i=0);var l=this.vertices,c=l[0].length,d=this.frames;if(s<d[0]){var u=h;switch(i){case 0:return void(e.length=0);case 1:if(1==r)return void(e.length=0);if(e.length=c,u.bones){r=1-r;for(f=0;f<c;f++)e[f]*=r}else for(var m=u.vertices,f=0;f<c;f++)e[f]+=(m[f]-e[f])*r}}else if(e.length=c,s>=d[d.length-1]){var p=l[d.length-1];if(1==r)if(3==i){t=h;if(t.bones)for(let t=0;t<c;t++)e[t]+=p[t];else{var g=t.vertices;for(let t=0;t<c;t++)e[t]+=p[t]-g[t]}}else Ut.arrayCopy(p,0,e,0,c);else switch(i){case 0:var v=h;if(v.bones)for(let t=0;t<c;t++)e[t]=p[t]*r;else{var x=v.vertices;for(let t=0;t<c;t++){var b=x[t];e[t]=b+(p[t]-b)*r}}break;case 1:case 2:for(let t=0;t<c;t++)e[t]+=(p[t]-e[t])*r;break;case 3:v=h;if(v.bones)for(let t=0;t<c;t++)e[t]+=p[t]*r;else{var w=v.vertices;for(let t=0;t<c;t++)e[t]+=(p[t]-w[t])*r}}}else{var d=N.search1(d,s),y=this.getCurvePercent(s,d),A=l[d],k=l[d+1];if(1==r)if(3==i){d=h;if(d.bones)for(let t=0;t<c;t++){var S=A[t];e[t]+=S+(k[t]-S)*y}else{var I=d.vertices;for(let t=0;t<c;t++){var C=A[t];e[t]+=C+(k[t]-C)*y-I[t]}}}else for(let t=0;t<c;t++){var T=A[t];e[t]=T+(k[t]-T)*y}else switch(i){case 0:var Y=h;if(Y.bones)for(let t=0;t<c;t++){var M=A[t];e[t]=(M+(k[t]-M)*y)*r}else{var F=Y.vertices;for(let t=0;t<c;t++){var X=A[t],B=F[t];e[t]=B+(X+(k[t]-X)*y-B)*r}}break;case 1:case 2:for(let t=0;t<c;t++){var R=A[t];e[t]+=(R+(k[t]-R)*y-e[t])*r}break;case 3:Y=h;if(Y.bones)for(let t=0;t<c;t++){var E=A[t];e[t]+=(E+(k[t]-E)*y)*r}else{var _=Y.vertices;for(let t=0;t<c;t++){var P=A[t];e[t]+=(P+(k[t]-P)*y-_[t])*r}}}}}}}},W=class extends N{constructor(t){super(t,W.propertyIds),this.events=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e){this.frames[t]=e.time,this.events[t]=e}apply(t,e,s,a,r,i,n){if(a){var o=this.frames,h=this.frames.length;if(s<e)this.apply(t,e,Number.MAX_VALUE,a,r,i,n),e=-1;else if(e>=o[h-1])return;if(!(s<o[0])){let t=0;if(e<o[0])t=0;else{t=N.search1(o,e)+1;for(var l=o[t];0<t&&o[t-1]==l;)t--}for(;t<h&&s>=o[t];t++)a.push(this.events[t])}}}},oe=W;oe.propertyIds=[""+X];var q=class extends N{constructor(t){super(t,q.propertyIds),this.drawOrders=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e,s){this.frames[t]=e,this.drawOrders[t]=s}apply(t,e,s,a,r,i,n){if(1!=n)if(s<this.frames[0])0!=i&&1!=i||Ut.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);else{var o=this.drawOrders[N.search1(this.frames,s)];if(o){let s=t.drawOrder;var h=t.slots;for(let t=0,e=o.length;t<e;t++)s[t]=h[o[t]]}else Ut.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length)}else 0==i&&Ut.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length)}},he=q;he.propertyIds=[""+B];var z,le=class extends L{constructor(t,e,s){super(t,e,[R+"|"+s]),this.ikConstraintIndex=s}getFrameEntries(){return 6}setFrame(t,e,s,a,r,i,n){this.frames[t*=6]=e,this.frames[t+1]=s,this.frames[t+2]=a,this.frames[t+3]=r,this.frames[t+4]=i?1:0,this.frames[t+5]=n?1:0}apply(t,e,s,a,r,i,n){let o=t.ikConstraints[this.ikConstraintIndex];if(o.active){var h=this.frames;if(s<h[0])switch(i){case 0:return o.mix=o.data.mix,o.softness=o.data.softness,o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,void(o.stretch=o.data.stretch);case 1:o.mix+=(o.data.mix-o.mix)*r,o.softness+=(o.data.softness-o.softness)*r,o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,o.stretch=o.data.stretch}else{let t=0,e=0;var l=N.search(h,s,6),c=this.curves[l/6];switch(c){case 0:var d=h[l];t=h[l+1],e=h[l+2];d=(s-d)/(h[l+6]-d);t+=(h[l+6+1]-t)*d,e+=(h[l+6+2]-e)*d;break;case 1:t=h[l+1],e=h[l+2];break;default:t=this.getBezierValue(s,l,1,c-2),e=this.getBezierValue(s,l,2,c+18-2)}0==i?(o.mix=o.data.mix+(t-o.data.mix)*r,o.softness=o.data.softness+(e-o.data.softness)*r,1==n?(o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,o.stretch=o.data.stretch):(o.bendDirection=h[l+3],o.compress=0!=h[l+4],o.stretch=0!=h[l+5])):(o.mix+=(t-o.mix)*r,o.softness+=(e-o.softness)*r,0==n&&(o.bendDirection=h[l+3],o.compress=0!=h[l+4],o.stretch=0!=h[l+5]))}}}},ce=class extends L{constructor(t,e,s){super(t,e,[E+"|"+s]),this.transformConstraintIndex=s}getFrameEntries(){return 7}setFrame(t,e,s,a,r,i,n,o){let h=this.frames;t*=7,h[t]=e,h[t+1]=s,h[t+2]=a,h[t+3]=r,h[t+4]=i,h[t+5]=n,h[t+6]=o}apply(t,e,n,s,o,h,a){let l=t.transformConstraints[this.transformConstraintIndex];if(l.active){var c=this.frames;if(n<c[0]){var r=l.data;switch(h){case 0:return l.mixRotate=r.mixRotate,l.mixX=r.mixX,l.mixY=r.mixY,l.mixScaleX=r.mixScaleX,l.mixScaleY=r.mixScaleY,void(l.mixShearY=r.mixShearY);case 1:l.mixRotate+=(r.mixRotate-l.mixRotate)*o,l.mixX+=(r.mixX-l.mixX)*o,l.mixY+=(r.mixY-l.mixY)*o,l.mixScaleX+=(r.mixScaleX-l.mixScaleX)*o,l.mixScaleY+=(r.mixScaleY-l.mixScaleY)*o,l.mixShearY+=(r.mixShearY-l.mixShearY)*o}}else{let t,e,s,a,r,i;var d=N.search(c,n,7),u=this.curves[d/7];switch(u){case 0:var m=c[d];t=c[d+1],e=c[d+2],s=c[d+3],a=c[d+4],r=c[d+5],i=c[d+6];m=(n-m)/(c[d+7]-m);t+=(c[d+7+1]-t)*m,e+=(c[d+7+2]-e)*m,s+=(c[d+7+3]-s)*m,a+=(c[d+7+4]-a)*m,r+=(c[d+7+5]-r)*m,i+=(c[d+7+6]-i)*m;break;case 1:t=c[d+1],e=c[d+2],s=c[d+3],a=c[d+4],r=c[d+5],i=c[d+6];break;default:t=this.getBezierValue(n,d,1,u-2),e=this.getBezierValue(n,d,2,u+18-2),s=this.getBezierValue(n,d,3,u+36-2),a=this.getBezierValue(n,d,4,u+54-2),r=this.getBezierValue(n,d,5,u+72-2),i=this.getBezierValue(n,d,6,u+90-2)}0==h?(h=l.data,l.mixRotate=h.mixRotate+(t-h.mixRotate)*o,l.mixX=h.mixX+(e-h.mixX)*o,l.mixY=h.mixY+(s-h.mixY)*o,l.mixScaleX=h.mixScaleX+(a-h.mixScaleX)*o,l.mixScaleY=h.mixScaleY+(r-h.mixScaleY)*o,l.mixShearY=h.mixShearY+(i-h.mixShearY)*o):(l.mixRotate+=(t-l.mixRotate)*o,l.mixX+=(e-l.mixX)*o,l.mixY+=(s-l.mixY)*o,l.mixScaleX+=(a-l.mixScaleX)*o,l.mixScaleY+=(r-l.mixScaleY)*o,l.mixShearY+=(i-l.mixShearY)*o)}}}},de=class extends O{constructor(t,e,s){super(t,e,_+"|"+s),this.pathConstraintIndex=s}apply(t,e,s,a,r,i,n){let o=t.pathConstraints[this.pathConstraintIndex];if(o.active)if(s<this.frames[0])switch(i){case 0:return void(o.position=o.data.position);case 1:o.position+=(o.data.position-o.position)*r}else{s=this.getCurveValue(s);0==i?o.position=o.data.position+(s-o.data.position)*r:o.position+=(s-o.position)*r}}},ue=class extends O{constructor(t,e,s){super(t,e,P+"|"+s),this.pathConstraintIndex=0,this.pathConstraintIndex=s}apply(t,e,s,a,r,i,n){let o=t.pathConstraints[this.pathConstraintIndex];if(o.active)if(s<this.frames[0])switch(i){case 0:return void(o.spacing=o.data.spacing);case 1:o.spacing+=(o.data.spacing-o.spacing)*r}else{s=this.getCurveValue(s);0==i?o.spacing=o.data.spacing+(s-o.data.spacing)*r:o.spacing+=(s-o.spacing)*r}}},me=class extends L{constructor(t,e,s){super(t,e,[V+"|"+s]),this.pathConstraintIndex=0,this.pathConstraintIndex=s}getFrameEntries(){return 4}setFrame(t,e,s,a,r){let i=this.frames;t<<=2,i[t]=e,i[t+1]=s,i[t+2]=a,i[t+3]=r}apply(t,e,a,s,r,i,n){let o=t.pathConstraints[this.pathConstraintIndex];if(o.active){var h=this.frames;if(a<h[0])switch(i){case 0:return o.mixRotate=o.data.mixRotate,o.mixX=o.data.mixX,void(o.mixY=o.data.mixY);case 1:o.mixRotate+=(o.data.mixRotate-o.mixRotate)*r,o.mixX+=(o.data.mixX-o.mixX)*r,o.mixY+=(o.data.mixY-o.mixY)*r}else{let t,e,s;var l=N.search(h,a,4),c=this.curves[l>>2];switch(c){case 0:var d=h[l];t=h[l+1],e=h[l+2],s=h[l+3];d=(a-d)/(h[l+4]-d);t+=(h[l+4+1]-t)*d,e+=(h[l+4+2]-e)*d,s+=(h[l+4+3]-s)*d;break;case 1:t=h[l+1],e=h[l+2],s=h[l+3];break;default:t=this.getBezierValue(a,l,1,c-2),e=this.getBezierValue(a,l,2,c+18-2),s=this.getBezierValue(a,l,3,c+36-2)}0==i?(i=o.data,o.mixRotate=i.mixRotate+(t-i.mixRotate)*r,o.mixX=i.mixX+(e-i.mixX)*r,o.mixY=i.mixY+(s-i.mixY)*r):(o.mixRotate+=(t-o.mixRotate)*r,o.mixX+=(e-o.mixX)*r,o.mixY+=(s-o.mixY)*r)}}}},j=class{constructor(t){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new $(this),this.propertyIDs=new s,this.animationsChanged=!1,this.trackEntryPool=new d(()=>new H),this.data=t}static emptyAnimation(){return nt=nt||new Wt("<empty>",[],0)}update(r){r*=this.timeScale;let i=this.tracks;for(let a=0,t=i.length;a<t;a++){let s=i[a];if(s){s.animationLast=s.nextAnimationLast,s.trackLast=s.nextTrackLast;let t=r*s.timeScale;if(0<s.delay){if(s.delay-=t,0<s.delay)continue;t=-s.delay,s.delay=0}let e=s.next;if(e){var n=s.trackLast-e.delay;if(0<=n){for(e.delay=0,e.trackTime+=0==s.timeScale?0:(n/s.timeScale+r)*e.timeScale,s.trackTime+=t,this.setCurrent(a,e,!0);e.mixingFrom;)e.mixTime+=r,e=e.mixingFrom;continue}}else if(s.trackLast>=s.trackEnd&&!s.mixingFrom){i[a]=null,this.queue.end(s),this.clearNext(s);continue}if(s.mixingFrom&&this.updateMixingFrom(s,r)){let t=s.mixingFrom;for(s.mixingFrom=null,t&&(t.mixingTo=null);t;)this.queue.end(t),t=t.mixingFrom}s.trackTime+=t}}this.queue.drain()}updateMixingFrom(t,e){let s=t.mixingFrom;if(!s)return!0;var a=this.updateMixingFrom(s,e);return s.animationLast=s.nextAnimationLast,s.trackLast=s.nextTrackLast,0<t.mixTime&&t.mixTime>=t.mixDuration?(0!=s.totalAlpha&&0!=t.mixDuration||(t.mixingFrom=s.mixingFrom,s.mixingFrom&&(s.mixingFrom.mixingTo=t),t.interruptAlpha=s.interruptAlpha,this.queue.end(s)),a):(s.trackTime+=e*s.timeScale,t.mixTime+=e,!1)}apply(o){if(!o)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();let h=this.events;var s=this.tracks;let l=!1;for(let e=0,t=s.length;e<t;e++){let n=s[e];if(n&&!(0<n.delay)){l=!0;var c=0==e?w.first:n.mixBlend;let s=n.alpha;n.mixingFrom?s*=this.applyMixingFrom(n,o,c):n.trackTime>=n.trackEnd&&!n.next&&(s=0);let a=n.animationLast,t=n.getAnimationTime(),r=t,i=h;n.reverse&&(r=n.animation.duration-r,i=null);var d=n.animation.timelines,u=d.length;if(0==e&&1==s||c==w.add)for(let t=0;t<u;t++){Ut.webkit602BugfixHelper(s,c);var m=d[t];m instanceof ie?this.applyAttachmentTimeline(m,o,r,c,!0):m.apply(o,a,r,i,s,c,y.mixIn)}else{var f=n.timelineMode,p=n.timelinesRotation.length!=u<<1;p&&(n.timelinesRotation.length=u<<1);for(let e=0;e<u;e++){let t=d[e];var g=f[e]==Z?c:w.setup;t instanceof qt?this.applyRotateTimeline(t,o,r,s,g,n.timelinesRotation,e<<1,p):t instanceof ie?this.applyAttachmentTimeline(t,o,r,c,!0):(Ut.webkit602BugfixHelper(s,c),t.apply(o,a,r,i,s,g,y.mixIn))}}this.queueEvents(n,t),h.length=0,n.nextAnimationLast=t,n.nextTrackLast=n.trackTime}}for(var t=this.unkeyedState+rt,e=o.slots,a=0,r=o.slots.length;a<r;a++){var i,n=e[a];n.attachmentState==t&&(i=n.data.attachmentName,n.setAttachment(i?o.getAttachment(n.data.index,i):null))}return this.unkeyedState+=2,this.queue.drain(),l}applyMixingFrom(t,i,n){let o=t.mixingFrom;o.mixingFrom&&this.applyMixingFrom(o,i,n);let e=0;0==t.mixDuration?(e=1,n==w.first&&(n=w.setup)):(e=t.mixTime/t.mixDuration,1<e&&(e=1),n!=w.first&&(n=o.mixBlend));var h=e<o.attachmentThreshold,l=e<o.drawOrderThreshold;let c=o.animation.timelines;var s=c.length,d=o.alpha*t.interruptAlpha,u=d*(1-e);let m=o.animationLast,a=o.getAnimationTime(),f=a,p=null;if(o.reverse?f=o.animation.duration-f:e<o.eventThreshold&&(p=this.events),n==w.add)for(let t=0;t<s;t++)c[t].apply(i,m,f,p,u,n,y.mixOut);else{var g=o.timelineMode,v=o.timelineHoldMix,x=o.timelinesRotation.length!=s<<1;x&&(o.timelinesRotation.length=s<<1);for(let r=o.totalAlpha=0;r<s;r++){let t=c[r],e=y.mixOut,s,a=0;switch(g[r]){case Z:if(!l&&t instanceof he)continue;s=n,a=u;break;case tt:s=w.setup,a=u;break;case et:s=n,a=d;break;case st:s=w.setup,a=d;break;default:s=w.setup;var b=v[r];a=d*Math.max(0,1-b.mixTime/b.mixDuration)}o.totalAlpha+=a,t instanceof qt?this.applyRotateTimeline(t,i,f,a,s,o.timelinesRotation,r<<1,x):t instanceof ie?this.applyAttachmentTimeline(t,i,f,s,h):(Ut.webkit602BugfixHelper(a,n),l&&t instanceof he&&s==w.setup&&(e=y.mixIn),t.apply(i,m,f,p,a,s,e))}}return 0<t.mixDuration&&this.queueEvents(o,a),this.events.length=0,o.nextAnimationLast=a,o.nextTrackLast=o.trackTime,e}applyAttachmentTimeline(t,e,s,a,r){var i=e.slots[t.slotIndex];i.bone.active&&(s<t.frames[0]?a!=w.setup&&a!=w.first||this.setAttachment(e,i,i.data.attachmentName,r):this.setAttachment(e,i,t.attachmentNames[N.search1(t.frames,s)],r),i.attachmentState<=this.unkeyedState&&(i.attachmentState=this.unkeyedState+rt))}setAttachment(t,e,s,a){e.setAttachment(s?t.getAttachment(e.data.index,s):null),a&&(e.attachmentState=this.unkeyedState+it)}applyRotateTimeline(a,t,n,o,h,l,c,d){if(d&&(l[c]=0),1!=o){let s=t.bones[a.boneIndex];if(s.active){let t=0,e=0;if(n<a.frames[0])switch(h){case w.setup:s.rotation=s.data.rotation;default:return;case w.first:t=s.rotation,e=s.data.rotation}else t=(h==w.setup?s.data:s).rotation,e=s.data.rotation+a.getCurveValue(n);let r=0,i=e-t;if(0==(i-=360*(16384-(16384.499999999996-i/360|0))))r=l[c];else{let t=0,e=0;e=d?(t=0,i):(t=l[c],l[c+1]);let s=0<i,a=0<=t;G.signum(e)!=G.signum(i)&&Math.abs(e)<=90&&(180<Math.abs(t)&&(t+=360*G.signum(t)),a=s),r=i+t-t%360,a!=s&&(r+=360*G.signum(t)),l[c]=r}l[c+1]=i,s.rotation=t+r*o}}else a.apply(t,0,n,null,1,h,y.mixIn)}queueEvents(t,e){var s=t.animationStart,a=t.animationEnd,r=a-s,i=t.trackLast%r,n=this.events;let o=0,h=n.length;for(;o<h;o++){var l=n[o];if(l.time<i)break;l.time>a||this.queue.event(t,l)}let c=!1;for(c=t.loop?0==r||i>t.trackTime%r:a<=e&&t.animationLast<a,c&&this.queue.complete(t);o<h;o++){var d=n[o];d.time<s||this.queue.event(t,d)}}clearTracks(){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let t=0,e=this.tracks.length;t<e;t++)this.clearTrack(t);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()}clearTrack(e){if(!(e>=this.tracks.length)){e=this.tracks[e];if(e){this.queue.end(e),this.clearNext(e);let t=e;for(;;){var s=t.mixingFrom;if(!s)break;this.queue.end(s),t.mixingFrom=null,t.mixingTo=null,t=s}this.tracks[e.trackIndex]=null,this.queue.drain()}}}setCurrent(t,e,s){let a=this.expandToIndex(t);(this.tracks[t]=e).previous=null,a&&(s&&this.queue.interrupt(a),e.mixingFrom=a,(a.mixingTo=e).mixTime=0,a.mixingFrom&&0<a.mixDuration&&(e.interruptAlpha*=Math.min(1,a.mixTime/a.mixDuration)),a.timelinesRotation.length=0),this.queue.start(e)}setAnimation(t,e,s=!1){var a=this.data.skeletonData.findAnimation(e);if(!a)throw new Error("Animation not found: "+e);return this.setAnimationWith(t,a,s)}setAnimationWith(t,e,s=!1){if(!e)throw new Error("animation cannot be null.");let a=!0,r=this.expandToIndex(t);r&&(-1==r.nextTrackLast?(this.tracks[t]=r.mixingFrom,this.queue.interrupt(r),this.queue.end(r),this.clearNext(r),r=r.mixingFrom,a=!1):this.clearNext(r));s=this.trackEntry(t,e,s,r);return this.setCurrent(t,s,a),this.queue.drain(),s}addAnimation(t,e,s=!1,a=0){var r=this.data.skeletonData.findAnimation(e);if(!r)throw new Error("Animation not found: "+e);return this.addAnimationWith(t,r,s,a)}addAnimationWith(t,e,s=!1,a=0){if(!e)throw new Error("animation cannot be null.");let r=this.expandToIndex(t);if(r)for(;r.next;)r=r.next;let i=this.trackEntry(t,e,s,r);return r?(r.next=i,i.previous=r,a<=0&&(a+=r.getTrackComplete()-i.mixDuration)):(this.setCurrent(t,i,!0),this.queue.drain()),i.delay=a,i}setEmptyAnimation(t,e=0){let s=this.setAnimationWith(t,j.emptyAnimation(),!1);return s.mixDuration=e,s.trackEnd=e,s}addEmptyAnimation(t,e=0,s=0){let a=this.addAnimationWith(t,j.emptyAnimation(),!1,s);return s<=0&&(a.delay+=a.mixDuration-e),a.mixDuration=e,a.trackEnd=e,a}setEmptyAnimations(s=0){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let t=0,e=this.tracks.length;t<e;t++){var a=this.tracks[t];a&&this.setEmptyAnimation(a.trackIndex,s)}this.queue.drainDisabled=t,this.queue.drain()}expandToIndex(t){return t<this.tracks.length?this.tracks[t]:(Ut.ensureArrayCapacity(this.tracks,t+1,null),this.tracks.length=t+1,null)}trackEntry(t,e,s,a){let r=this.trackEntryPool.obtain();return r.trackIndex=t,r.animation=e,r.loop=s,r.holdPrevious=!1,r.eventThreshold=0,r.attachmentThreshold=0,r.drawOrderThreshold=0,r.animationStart=0,r.animationEnd=e.duration,r.animationLast=-1,r.nextAnimationLast=-1,r.delay=0,r.trackTime=0,r.trackLast=-1,r.nextTrackLast=-1,r.trackEnd=Number.MAX_VALUE,r.timeScale=1,r.alpha=1,r.interruptAlpha=1,r.mixTime=0,r.mixDuration=a?this.data.getMix(a.animation,e):0,r.mixBlend=w.replace,r}clearNext(t){let e=t.next;for(;e;)this.queue.dispose(e),e=e.next;t.next=null}_animationsChanged(){this.animationsChanged=!1,this.propertyIDs.clear();var s=this.tracks;for(let e=0,t=s.length;e<t;e++){let t=s[e];if(t){for(;t.mixingFrom;)t=t.mixingFrom;for(;t.mixingTo&&t.mixBlend==w.add||this.computeHold(t),t=t.mixingTo,t;);}}}computeHold(s){let a=s.mixingTo,r=s.animation.timelines;var i=s.animation.timelines.length;let n=s.timelineMode;n.length=i;let o=s.timelineHoldMix;o.length=0;let h=this.propertyIDs;if(a&&a.holdPrevious)for(let t=0;t<i;t++)n[t]=h.addAll(r[t].getPropertyIds())?st:et;else t:for(let e=0;e<i;e++){let t=r[e];var l=t.getPropertyIds();if(h.addAll(l))if(!a||t instanceof ie||t instanceof he||t instanceof oe||!a.animation.hasTimeline(l))n[e]=tt;else{for(let t=a.mixingTo;t;t=t.mixingTo)if(!t.animation.hasTimeline(l)){if(0<s.mixDuration){n[e]=at,o[e]=t;continue t}break}n[e]=st}else n[e]=Z}}getCurrent(t){return t>=this.tracks.length?null:this.tracks[t]}addListener(t){if(!t)throw new Error("listener cannot be null.");this.listeners.push(t)}removeListener(t){t=this.listeners.indexOf(t);0<=t&&this.listeners.splice(t,1)}clearListeners(){this.listeners.length=0}clearListenerNotifications(){this.queue.clear()}},H=class{constructor(){this.mixBlend=w.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}reset(){this.next=null,this.previous=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0}getAnimationTime(){if(this.loop){var t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)}setAnimationLast(t){this.animationLast=t,this.nextAnimationLast=t}isComplete(){return this.trackTime>=this.animationEnd-this.animationStart}resetRotationDirections(){this.timelinesRotation.length=0}getTrackComplete(){var t=this.animationEnd-this.animationStart;if(0!=t){if(this.loop)return t*(1+(this.trackTime/t|0));if(this.trackTime<t)return t}return this.trackTime}},$=class{constructor(t){this.objects=[],this.drainDisabled=!1,this.animState=t}start(t){this.objects.push(z.start),this.objects.push(t),this.animState.animationsChanged=!0}interrupt(t){this.objects.push(z.interrupt),this.objects.push(t)}end(t){this.objects.push(z.end),this.objects.push(t),this.animState.animationsChanged=!0}dispose(t){this.objects.push(z.dispose),this.objects.push(t)}complete(t){this.objects.push(z.complete),this.objects.push(t)}event(t,e){this.objects.push(z.event),this.objects.push(t),this.objects.push(e)}drain(){if(!this.drainDisabled){this.drainDisabled=!0;var a=this.objects;let s=this.animState.listeners;for(let t=0;t<a.length;t+=2){var r=a[t];let e=a[t+1];switch(r){case z.start:e.listener&&e.listener.start&&e.listener.start(e);for(let t=0;t<s.length;t++)s[t].start&&s[t].start(e);break;case z.interrupt:e.listener&&e.listener.interrupt&&e.listener.interrupt(e);for(let t=0;t<s.length;t++)s[t].interrupt&&s[t].interrupt(e);break;case z.end:e.listener&&e.listener.end&&e.listener.end(e);for(let t=0;t<s.length;t++)s[t].end&&s[t].end(e);case z.dispose:e.listener&&e.listener.dispose&&e.listener.dispose(e);for(let t=0;t<s.length;t++)s[t].dispose&&s[t].dispose(e);this.animState.trackEntryPool.free(e);break;case z.complete:e.listener&&e.listener.complete&&e.listener.complete(e);for(let t=0;t<s.length;t++)s[t].complete&&s[t].complete(e);break;case z.event:var i=a[2+t++];e.listener&&e.listener.event&&e.listener.event(e,i);for(let t=0;t<s.length;t++)s[t].event&&s[t].event(e,i)}}this.clear(),this.drainDisabled=!1}}clear(){this.objects.length=0}};(B=z=z||{})[B.start=0]="start",B[B.interrupt=1]="interrupt",B[B.end=2]="end",B[B.dispose=3]="dispose",B[B.complete=4]="complete",B[B.event=5]="event";var J,Q,K=class{start(t){}interrupt(t){}end(t){}dispose(t){}complete(t){}event(t,e){}},Z=0,tt=1,et=2,st=3,at=4,rt=1,it=2,nt=null,ot=class{constructor(t){if(this.animationToMixTime={},this.defaultMix=0,!t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}setMix(t,e,s){var a=this.skeletonData.findAnimation(t);if(!a)throw new Error("Animation not found: "+t);t=this.skeletonData.findAnimation(e);if(!t)throw new Error("Animation not found: "+e);this.setMixWith(a,t,s)}setMixWith(t,e,s){if(!t)throw new Error("from cannot be null.");if(!e)throw new Error("to cannot be null.");e=t.name+"."+e.name;this.animationToMixTime[e]=s}getMix(t,e){e=t.name+"."+e.name,e=this.animationToMixTime[e];return void 0===e?this.defaultMix:e}},ht=class extends D{constructor(t){super(t),this.color=new Ot(1,1,1,1)}copy(){let t=new ht(this.name);return this.copyTo(t),t.color.setFromColor(this.color),t}},lt=class extends D{constructor(t){super(t),this.color=new Ot(.2275,.2275,.8078,1)}copy(){let t=new lt(this.name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t}},ct=class{constructor(t){this._image=t}getImage(){return this._image}};(B=J=J||{})[B.Nearest=9728]="Nearest",B[B.Linear=9729]="Linear",B[B.MipMap=9987]="MipMap",B[B.MipMapNearestNearest=9984]="MipMapNearestNearest",B[B.MipMapLinearNearest=9985]="MipMapLinearNearest",B[B.MipMapNearestLinear=9986]="MipMapNearestLinear",B[B.MipMapLinearLinear=9987]="MipMapLinearLinear",(B=Q=Q||{})[B.MirroredRepeat=33648]="MirroredRepeat",B[B.ClampToEdge=33071]="ClampToEdge",B[B.Repeat=10497]="Repeat";var dt=class{constructor(){this.u=0,this.v=0,this.u2=0,this.v2=0,this.width=0,this.height=0,this.degrees=0,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0}},ut=class extends ct{setFilters(t,e){}setWraps(t,e){}dispose(){}},mt=class{constructor(t){this.pages=new Array,this.regions=new Array;let e=new ft(t),s=new Array(4),a=null,r=null,i={size:()=>{a.width=parseInt(s[1]),a.height=parseInt(s[2])},format:()=>{},filter:()=>{a.minFilter=Ut.enumValue(J,s[1]),a.magFilter=Ut.enumValue(J,s[2])},repeat:()=>{-1!=s[1].indexOf("x")&&(a.uWrap=Q.Repeat),-1!=s[1].indexOf("y")&&(a.vWrap=Q.Repeat)},pma:()=>{a.pma="true"==s[1]}};var n={xy:()=>{r.x=parseInt(s[1]),r.y=parseInt(s[2])},size:()=>{r.width=parseInt(s[1]),r.height=parseInt(s[2])},bounds:()=>{r.x=parseInt(s[1]),r.y=parseInt(s[2]),r.width=parseInt(s[3]),r.height=parseInt(s[4])},offset:()=>{r.offsetX=parseInt(s[1]),r.offsetY=parseInt(s[2])},orig:()=>{r.originalWidth=parseInt(s[1]),r.originalHeight=parseInt(s[2])},offsets:()=>{r.offsetX=parseInt(s[1]),r.offsetY=parseInt(s[2]),r.originalWidth=parseInt(s[3]),r.originalHeight=parseInt(s[4])},rotate:()=>{var t=s[1];"true"==t?r.degrees=90:"false"!=t&&(r.degrees=parseInt(t))},index:()=>{r.index=parseInt(s[1])}};let o=e.readLine();for(;o&&0==o.trim().length;)o=e.readLine();for(;;){if(!o||0==o.trim().length)break;if(0==e.readEntry(s,o))break;o=e.readLine()}let h=null,l=null;for(;;){if(null===o)break;if(0==o.trim().length)a=null,o=e.readLine();else if(a){for(r=new gt,r.page=a,r.name=o;;){var c=e.readEntry(s,o=e.readLine());if(0==c)break;let t=n[s[0]];if(t)t();else{h||(h=[],l=[]),h.push(s[0]);let e=[];for(let t=0;t<c;t++)e.push(parseInt(s[t+1]));l.push(e)}}0==r.originalWidth&&0==r.originalHeight&&(r.originalWidth=r.width,r.originalHeight=r.height),h&&0<h.length&&(r.names=h,r.values=l,h=null,l=null),r.u=r.x/a.width,r.v=r.y/a.height,90==r.degrees?(r.u2=(r.x+r.height)/a.width,r.v2=(r.y+r.width)/a.height):(r.u2=(r.x+r.width)/a.width,r.v2=(r.y+r.height)/a.height),this.regions.push(r)}else{for(a=new pt,a.name=o.trim();;){if(0==e.readEntry(s,o=e.readLine()))break;let t=i[s[0]];t&&t()}this.pages.push(a)}}}findRegion(e){for(let t=0;t<this.regions.length;t++)if(this.regions[t].name==e)return this.regions[t];return null}setTextures(t,e=""){for(var s of this.pages)s.setTexture(t.get(e+s.name))}dispose(){for(let t=0;t<this.pages.length;t++)this.pages[t].texture.dispose()}},ft=class{constructor(t){this.index=0,this.lines=t.split(/\r\n|\r|\n/)}readLine(){return this.index>=this.lines.length?null:this.lines[this.index++]}readEntry(s,a){if(!a)return 0;if(0==(a=a.trim()).length)return 0;var r=a.indexOf(":");if(-1==r)return 0;s[0]=a.substr(0,r).trim();for(let t=1,e=r+1;;t++){var i=a.indexOf(",",e);if(-1==i)return s[t]=a.substr(e).trim(),t;if(s[t]=a.substr(e,i-e).trim(),e=i+1,4==t)return 4}}},pt=class{constructor(){this.minFilter=J.Nearest,this.magFilter=J.Nearest,this.uWrap=Q.ClampToEdge,this.vWrap=Q.ClampToEdge}setTexture(t){(this.texture=t).setFilters(this.minFilter,this.magFilter),t.setWraps(this.uWrap,this.vWrap)}},gt=class extends dt{},vt=class extends D{constructor(t){super(t),this.color=new Ot(1,1,1,1),this.tempColor=new Ot(0,0,0,0)}updateUVs(){var s=this.regionUVs;this.uvs&&this.uvs.length==s.length||(this.uvs=Ut.newFloatArray(s.length));let a=this.uvs;var r=this.uvs.length;let i=this.region.u,n=this.region.v,o=0,h=0;if(this.region instanceof gt){let t=this.region,e=t.page.texture.getImage();var l=e.width,c=e.height;switch(t.degrees){case 90:i-=(t.originalHeight-t.offsetY-t.height)/l,n-=(t.originalWidth-t.offsetX-t.width)/c,o=t.originalHeight/l,h=t.originalWidth/c;for(let t=0;t<r;t+=2)a[t]=i+s[t+1]*o,a[t+1]=n+(1-s[t])*h;return;case 180:i-=(t.originalWidth-t.offsetX-t.width)/l,n-=t.offsetY/c,o=t.originalWidth/l,h=t.originalHeight/c;for(let t=0;t<r;t+=2)a[t]=i+(1-s[t])*o,a[t+1]=n+(1-s[t+1])*h;return;case 270:i-=t.offsetY/l,n-=t.offsetX/c,o=t.originalHeight/l,h=t.originalWidth/c;for(let t=0;t<r;t+=2)a[t]=i+(1-s[t+1])*o,a[t+1]=n+s[t]*h;return}i-=t.offsetX/l,n-=(t.originalHeight-t.offsetY-t.height)/c,o=t.originalWidth/l,h=t.originalHeight/c}else this.region?(o=this.region.u2-i,h=this.region.v2-n):(i=n=0,o=h=1);for(let t=0;t<r;t+=2)a[t]=i+s[t]*o,a[t+1]=n+s[t+1]*h}getParentMesh(){return this.parentMesh}setParentMesh(t){(this.parentMesh=t)&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)}copy(){if(this.parentMesh)return this.newLinkedMesh();let t=new vt(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),this.copyTo(t),t.regionUVs=new Array(this.regionUVs.length),Ut.arrayCopy(this.regionUVs,0,t.regionUVs,0,this.regionUVs.length),t.uvs=new Array(this.uvs.length),Ut.arrayCopy(this.uvs,0,t.uvs,0,this.uvs.length),t.triangles=new Array(this.triangles.length),Ut.arrayCopy(this.triangles,0,t.triangles,0,this.triangles.length),t.hullLength=this.hullLength,this.edges&&(t.edges=new Array(this.edges.length),Ut.arrayCopy(this.edges,0,t.edges,0,this.edges.length)),t.width=this.width,t.height=this.height,t}newLinkedMesh(){let t=new vt(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),t.deformAttachment=this.deformAttachment,t.setParentMesh(this.parentMesh||this),t.updateUVs(),t}},xt=class extends D{constructor(t){super(t),this.closed=!1,this.constantSpeed=!1,this.color=new Ot(1,1,1,1)}copy(){let t=new xt(this.name);return this.copyTo(t),t.lengths=new Array(this.lengths.length),Ut.arrayCopy(this.lengths,0,t.lengths,0,this.lengths.length),t.closed=closed,t.constantSpeed=this.constantSpeed,t.color.setFromColor(this.color),t}},bt=class extends D{constructor(t){super(t),this.color=new Ot(.38,.94,0,1)}computeWorldPosition(t,e){return e.x=this.x*t.a+this.y*t.b+t.worldX,e.y=this.x*t.c+this.y*t.d+t.worldY,e}computeWorldRotation(t){var e=G.cosDeg(this.rotation),s=G.sinDeg(this.rotation),a=e*t.a+s*t.b,t=e*t.c+s*t.d;return Math.atan2(t,a)*G.radDeg}copy(){let t=new bt(this.name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t}},wt=class extends p{constructor(t){super(t),this.x=0,this.y=0,this.scaleX=1,this.scaleY=1,this.rotation=0,this.width=0,this.height=0,this.color=new Ot(1,1,1,1),this.offset=Ut.newFloatArray(8),this.uvs=Ut.newFloatArray(8),this.tempColor=new Ot(1,1,1,1)}updateOffset(){this.region;var t=this.width/this.region.originalWidth*this.scaleX,e=this.height/this.region.originalHeight*this.scaleY,s=-this.width/2*this.scaleX+this.region.offsetX*t,a=-this.height/2*this.scaleY+this.region.offsetY*e,r=s+this.region.width*t,i=a+this.region.height*e,n=this.rotation*Math.PI/180,o=Math.cos(n),h=Math.sin(n),l=this.x,t=this.y,e=s*o+l,n=s*h,s=a*o+t,a=a*h,l=r*o+l,r=r*h,t=i*o+t,h=i*h;let c=this.offset;c[0]=e-a,c[1]=s+n,c[2]=e-h,c[3]=t+n,c[4]=l-h,c[5]=t+r,c[6]=l-a,c[7]=s+r}setRegion(t){this.region=t;let e=this.uvs;90==t.degrees?(e[2]=t.u,e[3]=t.v2,e[4]=t.u,e[5]=t.v,e[6]=t.u2,e[7]=t.v,e[0]=t.u2,e[1]=t.v2):(e[0]=t.u,e[1]=t.v2,e[2]=t.u,e[3]=t.v,e[4]=t.u2,e[5]=t.v,e[6]=t.u2,e[7]=t.v2)}computeWorldVertices(t,e,s,a){var r=this.offset,i=t.worldX,n=t.worldY,o=t.a,h=t.b,l=t.c,c=t.d,t=0,d=r[0],t=r[1];e[s]=d*o+t*h+i,e[s+1]=d*l+t*c+n,d=r[2],t=r[3],e[s+=a]=d*o+t*h+i,e[s+1]=d*l+t*c+n,d=r[4],t=r[5],e[s+=a]=d*o+t*h+i,e[s+1]=d*l+t*c+n,d=r[6],t=r[7],e[s+=a]=d*o+t*h+i,e[s+1]=d*l+t*c+n}copy(){let t=new wt(this.name);return t.region=this.region,t.rendererObject=this.rendererObject,t.path=this.path,t.x=this.x,t.y=this.y,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.rotation=this.rotation,t.width=this.width,t.height=this.height,Ut.arrayCopy(this.uvs,0,t.uvs,0,8),Ut.arrayCopy(this.offset,0,t.offset,0,8),t.color.setFromColor(this.color),t}},yt=wt;yt.X1=0,yt.Y1=1,yt.C1R=2,yt.C1G=3,yt.C1B=4,yt.C1A=5,yt.U1=6,yt.V1=7,yt.X2=8,yt.Y2=9,yt.C2R=10,yt.C2G=11,yt.C2B=12,yt.C2A=13,yt.U2=14,yt.V2=15,yt.X3=16,yt.Y3=17,yt.C3R=18,yt.C3G=19,yt.C3B=20,yt.C3A=21,yt.U3=22,yt.V3=23,yt.X4=24,yt.Y4=25,yt.C4R=26,yt.C4G=27,yt.C4B=28,yt.C4A=29,yt.U4=30,yt.V4=31;var At,kt=class{constructor(t){this.atlas=t}newRegionAttachment(t,e,s){let a=this.atlas.findRegion(s);if(!a)throw new Error("Region not found in atlas: "+s+" (region attachment: "+e+")");a.renderObject=a;let r=new yt(e);return r.setRegion(a),r}newMeshAttachment(t,e,s){let a=this.atlas.findRegion(s);if(!a)throw new Error("Region not found in atlas: "+s+" (mesh attachment: "+e+")");a.renderObject=a;let r=new vt(e);return r.region=a,r}newBoundingBoxAttachment(t,e){return new ht(e)}newPathAttachment(t,e){return new xt(e)}newPointAttachment(t,e){return new bt(e)}newClippingAttachment(t,e){return new lt(e)}},St=class{constructor(t,e,s){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=At.Normal,this.skinRequired=!1,this.color=new Ot,t<0)throw new Error("index must be >= 0.");if(!e)throw new Error("name cannot be null.");this.index=t,this.name=e,this.parent=s}};(B=At=At||{})[B.Normal=0]="Normal",B[B.OnlyTranslation=1]="OnlyTranslation",B[B.NoRotationOrReflection=2]="NoRotationOrReflection",B[B.NoScale=3]="NoScale",B[B.NoScaleOrReflection=4]="NoScaleOrReflection";var fe,pe,It,Ct=class{constructor(t,e,s){if(this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.a=0,this.b=0,this.c=0,this.d=0,this.worldY=0,this.worldX=0,this.sorted=!1,this.active=!1,!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=s,this.setToSetupPose()}isActive(){return this.active}update(){this.updateWorldTransformWith(this.ax,this.ay,this.arotation,this.ascaleX,this.ascaleY,this.ashearX,this.ashearY)}updateWorldTransform(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)}updateWorldTransformWith(t,e,s,a,r,i,n){this.ax=t,this.ay=e,this.arotation=s,this.ascaleX=a,this.ascaleY=r,this.ashearX=i,this.ashearY=n;var o=this.parent;if(!o){var h=this.skeleton,l=s+90+n,c=h.scaleX,d=h.scaleY;return this.a=G.cosDeg(s+i)*a*c,this.b=G.cosDeg(l)*r*c,this.c=G.sinDeg(s+i)*a*d,this.d=G.sinDeg(l)*r*d,this.worldX=t*c+h.x,void(this.worldY=e*d+h.y)}let u=o.a,m=o.b,f=o.c,p=o.d;switch(this.worldX=u*t+m*e+o.worldX,this.worldY=f*t+p*e+o.worldY,this.data.transformMode){case At.Normal:var g=s+90+n,v=G.cosDeg(s+i)*a,x=G.cosDeg(g)*r,b=G.sinDeg(s+i)*a,g=G.sinDeg(g)*r;return this.a=u*v+m*b,this.b=u*x+m*g,this.c=f*v+p*b,void(this.d=f*x+p*g);case At.OnlyTranslation:var w=s+90+n;this.a=G.cosDeg(s+i)*a,this.b=G.cosDeg(w)*r,this.c=G.sinDeg(s+i)*a,this.d=G.sinDeg(w)*r;break;case At.NoRotationOrReflection:{var y=u*u+f*f;let t=0;t=1e-4<y?(y=Math.abs(u*p-m*f)/y,u/=this.skeleton.scaleX,f/=this.skeleton.scaleY,m=f*y,p=u*y,Math.atan2(f,u)*G.radDeg):(u=0,f=0,90-Math.atan2(p,m)*G.radDeg);var A=s+i-t,k=s+n-t+90,S=G.cosDeg(A)*a,I=G.cosDeg(k)*r,C=G.sinDeg(A)*a,T=G.sinDeg(k)*r;this.a=u*S-m*C,this.b=u*I-m*T,this.c=f*S+p*C,this.d=f*I+p*T;break}case At.NoScale:case At.NoScaleOrReflection:{w=G.cosDeg(s),y=G.sinDeg(s),A=(u*w+m*y)/this.skeleton.scaleX,k=(f*w+p*y)/this.skeleton.scaleY;let t=Math.sqrt(A*A+k*k);1e-5<t&&(t=1/t),A*=t,k*=t,t=Math.sqrt(A*A+k*k),this.data.transformMode==At.NoScale&&u*p-m*f<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(t=-t);S=Math.PI/2+Math.atan2(k,A),C=Math.cos(S)*t,I=Math.sin(S)*t,T=G.cosDeg(i)*a,w=G.cosDeg(90+n)*r,y=G.sinDeg(i)*a,S=G.sinDeg(90+n)*r;this.a=A*T+C*y,this.b=A*w+C*S,this.c=k*T+I*y,this.d=k*w+I*S;break}}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY}setToSetupPose(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY}getWorldRotationX(){return Math.atan2(this.c,this.a)*G.radDeg}getWorldRotationY(){return Math.atan2(this.d,this.b)*G.radDeg}getWorldScaleX(){return Math.sqrt(this.a*this.a+this.c*this.c)}getWorldScaleY(){return Math.sqrt(this.b*this.b+this.d*this.d)}updateAppliedTransform(){var t=this.parent;if(!t)return this.ax=this.worldX-this.skeleton.x,this.ay=this.worldY-this.skeleton.y,this.arotation=Math.atan2(this.c,this.a)*G.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,void(this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*G.radDeg);var e=t.a,s=t.b,a=t.c,r=t.d,i=1/(e*r-s*a),n=this.worldX-t.worldX,t=this.worldY-t.worldY;this.ax=n*r*i-t*s*i,this.ay=t*e*i-n*a*i;r*=i,e*=i,s*=i,i*=a,a=r*this.a-s*this.c,r=r*this.b-s*this.d,s=e*this.c-i*this.a,e=e*this.d-i*this.b;this.ashearX=0,this.ascaleX=Math.sqrt(a*a+s*s),1e-4<this.ascaleX?(this.ascaleY=(i=a*e-r*s)/this.ascaleX,this.ashearY=Math.atan2(a*r+s*e,i)*G.radDeg,this.arotation=Math.atan2(s,a)*G.radDeg):(this.ascaleX=0,this.ascaleY=Math.sqrt(r*r+e*e),this.ashearY=0,this.arotation=90-Math.atan2(e,r)*G.radDeg)}worldToLocal(t){var e=1/(this.a*this.d-this.b*this.c),s=t.x-this.worldX,a=t.y-this.worldY;return t.x=s*this.d*e-a*this.b*e,t.y=a*this.a*e-s*this.c*e,t}localToWorld(t){var e=t.x,s=t.y;return t.x=e*this.a+s*this.b+this.worldX,t.y=e*this.c+s*this.d+this.worldY,t}worldToLocalRotation(t){var e=G.sinDeg(t),t=G.cosDeg(t);return Math.atan2(this.a*e-this.c*t,this.d*t-this.b*e)*G.radDeg+this.rotation-this.shearX}localToWorldRotation(t){t-=this.rotation-this.shearX;var e=G.sinDeg(t),t=G.cosDeg(t);return Math.atan2(t*this.c+e*this.d,t*this.a+e*this.b)*G.radDeg}rotateWorld(t){var e=this.a,s=this.b,a=this.c,r=this.d,i=G.cosDeg(t),t=G.sinDeg(t);this.a=i*e-t*a,this.b=i*s-t*r,this.c=t*e+i*a,this.d=t*s+i*r}},Tt=class{constructor(t,e,s){this.name=t,this.order=e,this.skinRequired=s}},Yt=class{constructor(t,e="",s=null){this.assets={},this.errors={},this.toLoad=0,this.loaded=0,this.textureLoader=t,this.pathPrefix=e,this.downloader=s||new Mt}start(t){return this.toLoad++,this.pathPrefix+t}success(t,e,s){this.toLoad--,this.loaded++,this.assets[e]=s,t&&t(e,s)}error(t,e,s){this.toLoad--,this.loaded++,this.errors[e]=s,t&&t(e,s)}setRawDataURI(t,e){this.downloader.rawDataUris[this.pathPrefix+t]=e}loadBinary(s,e=null,a=null){s=this.start(s),this.downloader.downloadBinary(s,t=>{this.success(e,s,t)},(t,e)=>{this.error(a,s,`Couldn't load binary ${s}: status ${t}, ${e}`)})}loadText(s,e=null,a=null){s=this.start(s),this.downloader.downloadText(s,t=>{this.success(e,s,t)},(t,e)=>{this.error(a,s,`Couldn't load text ${s}: status ${t}, ${e}`)})}loadJson(s,e=null,a=null){s=this.start(s),this.downloader.downloadJson(s,t=>{this.success(e,s,t)},(t,e)=>{this.error(a,s,`Couldn't load JSON ${s}: status ${t}, ${e}`)})}loadTexture(e,s=null,a=null){if(e=this.start(e),!!("undefined"==typeof window||"undefined"==typeof navigator||!window.document))fetch(e,{mode:"cors"}).then(t=>t.ok?t.blob():(this.error(a,e,`Couldn't load image: ${e}`),null)).then(t=>t?createImageBitmap(t,{premultiplyAlpha:"none",colorSpaceConversion:"none"}):null).then(t=>{t&&this.success(s,e,this.textureLoader(t))});else{let t=new Image;t.crossOrigin="anonymous",t.onload=()=>{this.success(s,e,this.textureLoader(t))},t.onerror=()=>{this.error(a,e,`Couldn't load image: ${e}`)},this.downloader.rawDataUris[e]&&(e=this.downloader.rawDataUris[e]),t.src=e}}loadTextureAtlas(n,o=null,h=null){var t=n.lastIndexOf("/");let e=0<=t?n.substring(0,t+1):"";n=this.start(n),this.downloader.downloadText(n,t=>{try{let a=new mt(t),r=a.pages.length,i=!1;for(let s of a.pages)this.loadTexture(e+s.name,(t,e)=>{i||(s.setTexture(e),0==--r&&this.success(o,n,a))},(t,e)=>{i||this.error(h,n,`Couldn't load texture atlas ${n} page image: ${t}`),i=!0})}catch(t){this.error(h,n,`Couldn't parse texture atlas ${n}: ${t.message}`)}},(t,e)=>{this.error(h,n,`Couldn't load texture atlas ${n}: status ${t}, ${e}`)})}get(t){return this.assets[this.pathPrefix+t]}require(t){t=this.pathPrefix+t;var e=this.assets[t];if(e)return e;e=this.errors[t];throw Error("Asset not found: "+t+(e?"\n"+e:""))}remove(t){t=this.pathPrefix+t;let e=this.assets[t];return e.dispose&&e.dispose(),delete this.assets[t],e}removeAll(){for(var e in this.assets){let t=this.assets[e];t.dispose&&t.dispose()}this.assets={}}isLoadingComplete(){return 0==this.toLoad}getToLoad(){return this.toLoad}getLoaded(){return this.loaded}dispose(){this.removeAll()}hasErrors(){return 0<Object.keys(this.errors).length}getErrors(){return this.errors}},Mt=class{constructor(){this.callbacks={},this.rawDataUris={}}dataUriToString(t){if(!t.startsWith("data:"))throw new Error("Not a data URI.");var e=t.indexOf("base64,");return-1!=e?(e+="base64,".length,atob(t.substr(e))):t.substr(t.indexOf(",")+1)}base64ToUint8Array(t){for(var e=window.atob(t),s=e.length,a=new Uint8Array(s),r=0;r<s;r++)a[r]=e.charCodeAt(r);return a}dataUriToUint8Array(t){if(!t.startsWith("data:"))throw new Error("Not a data URI.");var e=t.indexOf("base64,");if(-1==e)throw new Error("Not a binary data URI.");return this.base64ToUint8Array(t.substr(e+="base64,".length))}downloadText(e,t,s){if(!this.start(e,t,s))if(this.rawDataUris[e])try{var a=this.rawDataUris[e];this.finish(e,200,this.dataUriToString(a))}catch(t){this.finish(e,400,JSON.stringify(t))}else{let t=new XMLHttpRequest;t.overrideMimeType("text/html"),t.open("GET",e,!0);a=()=>{this.finish(e,t.status,t.responseText)};t.onload=a,t.onerror=a,t.send()}}downloadJson(t,e,s){this.downloadText(t,t=>{e(JSON.parse(t))},s)}downloadBinary(s,t,e){if(!this.start(s,t,e))if(this.rawDataUris[s])try{var a=this.rawDataUris[s];this.finish(s,200,this.dataUriToUint8Array(a))}catch(t){this.finish(s,400,JSON.stringify(t))}else{let t=new XMLHttpRequest;t.open("GET",s,!0),t.responseType="arraybuffer";let e=()=>{this.finish(s,t.status,t.response)};t.onload=()=>{200==t.status||0==t.status?this.finish(s,200,new Uint8Array(t.response)):e()},t.onerror=e,t.send()}}start(t,e,s){let a=this.callbacks[t];try{if(a)return!0;this.callbacks[t]=a=[]}finally{a.push(e,s)}}finish(t,e,s){let a=this.callbacks[t];delete this.callbacks[t];var r=200==e||0==e?[s]:[e,s];for(let t=r.length-1,e=a.length;t<e;t+=2)a[t].apply(null,r)}},ge=class{constructor(t,e){if(!e)throw new Error("data cannot be null.");this.time=t,this.data=e}},Ft=class{constructor(t){this.name=t}},Xt=class{constructor(e,s){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,!e)throw new Error("data cannot be null.");if(!s)throw new Error("skeleton cannot be null.");this.data=e,this.mix=e.mix,this.softness=e.softness,this.bendDirection=e.bendDirection,this.compress=e.compress,this.stretch=e.stretch,this.bones=new Array;for(let t=0;t<e.bones.length;t++)this.bones.push(s.findBone(e.bones[t].name));this.target=s.findBone(e.target.name)}isActive(){return this.active}update(){if(0!=this.mix){var t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.data.uniform,this.softness,this.mix)}}}apply1(t,e,s,a,r,i,n){var o=t.parent;let h=o.a,l=o.b,c=o.c,d=o.d,u=-t.ashearX-t.arotation,m=0,f=0;switch(t.data.transformMode){case At.OnlyTranslation:m=e-t.worldX,f=s-t.worldY;break;case At.NoRotationOrReflection:var p=Math.abs(h*d-l*c)/(h*h+c*c),g=h/t.skeleton.scaleX,v=c/t.skeleton.scaleY;l=-v*p*t.skeleton.scaleX,d=g*p*t.skeleton.scaleY,u+=Math.atan2(v,g)*G.radDeg;default:p=e-o.worldX,v=s-o.worldY,g=h*d-l*c;m=(p*d-v*l)/g-t.ax,f=(v*h-p*c)/g-t.ay}u+=Math.atan2(f,m)*G.radDeg,t.ascaleX<0&&(u+=180),180<u?u-=360:u<-180&&(u+=360);let x=t.ascaleX,b=t.ascaleY;if(a||r){switch(t.data.transformMode){case At.NoScale:case At.NoScaleOrReflection:m=e-t.worldX,f=s-t.worldY}var w=t.data.length*x,y=Math.sqrt(m*m+f*f);(a&&y<w||r&&w<y&&1e-4<w)&&(w=(y/w-1)*n+1,x*=w,i&&(b*=w))}t.updateWorldTransformWith(t.ax,t.ay,t.arotation+u*n,x,b,t.ashearX,t.ashearY)}apply2(t,e,s,a,h,r,i,n,o){let l=t.ax,c=t.ay,d=t.ascaleX,u=t.ascaleY,m=d,f=u,p=e.ascaleX,g=0,v=0,x=0;x=d<0?(d=-d,g=180,-1):(g=0,1),u<0&&(u=-u,x=-x),v=p<0?(p=-p,180):0;let b=e.ax,w=0,y=0,A=0,k=t.a,S=t.b,I=t.c,C=t.d;var T=Math.abs(d-u)<=1e-4;A=!T||r?(w=0,y=k*b+t.worldX,I*b+t.worldY):(w=e.ay,y=k*b+S*w+t.worldX,I*b+C*w+t.worldY);var Y=t.parent;k=Y.a,S=Y.b,I=Y.c,C=Y.d;let M=1/(k*C-S*I),F=y-Y.worldX,X=A-Y.worldY;var B=(F*C-X*S)*M-l,R=(X*k-F*I)*M-c;let E=Math.sqrt(B*B+R*R),_=e.data.length*p,P,D;if(E<1e-4)return this.apply1(t,s,a,!1,r,!1,o),void e.updateWorldTransformWith(b,w,0,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY);F=s-Y.worldX,X=a-Y.worldY;let V=(F*C-X*S)*M-l,N=(X*k-F*I)*M-c,L=V*V+N*N;0!=n&&(n*=d*(p+1)*.5,0<(Y=(j=Math.sqrt(L))-E-_*d+n)&&(H=(Y-n*(1-(H=Math.min(1,Y/(2*n))-1)*H))/j,V-=H*V,N-=H*N,L=V*V+N*N));t:if(T){_*=d;let t=(L-E*E-_*_)/(2*E*_);t<-1?(t=-1,D=Math.PI*h):1<t?(t=1,D=0,r&&(k=(Math.sqrt(L)/(E+_)-1)*o+1,m*=k,i&&(f*=k))):D=Math.acos(t)*h,k=E+_*t,S=_*Math.sin(D),P=Math.atan2(N*k-V*S,V*k+N*S)}else{k=d*_,S=u*_;var O=k*k,U=S*S,W=Math.atan2(N,V);I=U*E*E+O*L-O*U;var q=-2*U*E,z=U-O;if(C=q*q-4*z*I,0<=C){let t=Math.sqrt(C);q<0&&(t=-t),t=.5*-(q+t);q=t/z,z=I/t,z=Math.abs(q)<Math.abs(z)?q:z;if(z*z<=L){X=Math.sqrt(L-z*z)*h,P=W-Math.atan2(X,z),D=Math.atan2(X/u,(z-E)/d);break t}}let t=G.PI,e=E-k,s=e*e,a=0,r=0,i=E+k,n=i*i,o=0;I=-k*E/(O-U),-1<=I&&I<=1&&(I=Math.acos(I),F=k*Math.cos(I)+E,X=S*Math.sin(I),C=F*F+X*X,C<s&&(t=I,s=C,e=F,a=X),C>n&&(r=I,n=C,i=F,o=X)),D=L<=.5*(s+n)?(P=W-Math.atan2(a*h,e),t*h):(P=W-Math.atan2(o*h,i),r*h)}var j=Math.atan2(w,b)*x,H=t.arotation;P=(P-j)*G.radDeg+g-H,180<P?P-=360:P<-180&&(P+=360),t.updateWorldTransformWith(l,c,H+P*o,m,f,0,0),H=e.arotation,D=((D+j)*G.radDeg-e.ashearX)*x+v-H,180<D?D-=360:D<-180&&(D+=360),e.updateWorldTransformWith(b,w,H+D*o,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)}},Bt=class extends Tt{constructor(t){super(t,0,!1),this.bones=new Array,this.bendDirection=1,this.compress=!1,this.stretch=!1,this.uniform=!1,this.mix=1,this.softness=0}},Rt=class extends Tt{constructor(t){super(t,0,!1),this.bones=new Array,this.mixRotate=0,this.mixX=0,this.mixY=0}};(B=fe=fe||{})[B.Fixed=0]="Fixed",B[B.Percent=1]="Percent",(B=pe=pe||{})[B.Length=0]="Length",B[B.Fixed=1]="Fixed",B[B.Percent=2]="Percent",B[B.Proportional=3]="Proportional",(B=It=It||{})[B.Tangent=0]="Tangent",B[B.Chain=1]="Chain",B[B.ChainScale=2]="ChainScale";var Et=class{constructor(s,a){if(this.position=0,this.spacing=0,this.mixRotate=0,this.mixX=0,this.mixY=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,!s)throw new Error("data cannot be null.");if(!a)throw new Error("skeleton cannot be null.");this.data=s,this.bones=new Array;for(let t=0,e=s.bones.length;t<e;t++)this.bones.push(a.findBone(s.bones[t].name));this.target=a.findSlot(s.target.name),this.position=s.position,this.spacing=s.spacing,this.mixRotate=s.mixRotate,this.mixX=s.mixX,this.mixY=s.mixY}isActive(){return this.active}update(){var t=this.target.getAttachment();if(t instanceof xt){var p=this.mixRotate,e=this.mixX,s=this.mixY;if(0!=p||0!=e||0!=s){var r=this.data,g=r.rotateMode==It.Tangent,i=r.rotateMode==It.ChainScale,n=this.bones,o=n.length,h=g?o:o+1;let c=Ut.setArraySize(this.spaces,h),a=i?this.lengths=Ut.setArraySize(this.lengths,o):null;var l=this.spacing;switch(r.spacingMode){case pe.Percent:if(i)for(let t=0,e=h-1;t<e;t++){var v,x=n[t],b=x.data.length;b<Et.epsilon?a[t]=0:(v=b*x.a,x=b*x.c,a[t]=Math.sqrt(v*v+x*x))}Ut.arrayFill(c,1,h,l);break;case pe.Proportional:let s=0;for(let t=0,e=h-1;t<e;){var w,y=n[t],A=y.data.length;A<Et.epsilon?(i&&(a[t]=0),c[++t]=l):(w=A*y.a,y=A*y.c,y=Math.sqrt(w*w+y*y),i&&(a[t]=y),c[++t]=y,s+=y)}if(0<s){s=h/s*l;for(let t=1;t<h;t++)c[t]*=s}break;default:var k=r.spacingMode==pe.Length;for(let t=0,e=h-1;t<e;){var S,I=n[t],C=I.data.length;C<Et.epsilon?(i&&(a[t]=0),c[++t]=l):(S=C*I.a,I=C*I.c,I=Math.sqrt(S*S+I*I),i&&(a[t]=I),c[++t]=(k?C+l:l)*I/C)}}var T=this.computeWorldPositions(t,h,g);let d=T[0],u=T[1],m=r.offsetRotation,f=!1;0==m?f=r.rotateMode==It.Chain:(f=!1,t=this.target.bone,m*=0<t.a*t.d-t.b*t.c?G.degRad:-G.degRad);for(let h=0,l=3;h<o;h++,l+=3){let o=n[h];o.worldX+=(d-o.worldX)*e,o.worldY+=(u-o.worldY)*s;var Y,M=T[l],F=T[l+1],X=M-d,B=F-u;if(!i||0!=(Y=a[h])&&(Y=(Math.sqrt(X*X+B*B)/Y-1)*p+1,o.a*=Y,o.c*=Y),d=M,u=F,0<p){let t=o.a,e=o.b,s=o.c,a=o.d,r=0,i=0,n=0;r=g?T[l-1]:0==c[h+1]?T[l+2]:Math.atan2(B,X),r-=Math.atan2(s,t),f?(i=Math.cos(r),n=Math.sin(r),F=o.data.length,d+=(F*(i*t-n*s)-X)*p,u+=(F*(n*t+i*s)-B)*p):r+=m,r>G.PI?r-=G.PI2:r<-G.PI&&(r+=G.PI2),r*=p,i=Math.cos(r),n=Math.sin(r),o.a=i*t-n*s,o.b=i*e-n*a,o.c=n*t+i*s,o.d=n*e+i*a}o.updateAppliedTransform()}}}}computeWorldPositions(i,t,n){var o=this.target;let h=this.position,l=this.spaces,c=Ut.setArraySize(this.positions,3*t+2),d=null;var u=i.closed;let m=i.worldVerticesLength,f=m/6,p=Et.NONE;if(!i.constantSpeed){var g=i.lengths;f-=u?1:2;var v=g[f];this.data.positionMode==fe.Percent&&(h*=v);let r;switch(this.data.spacingMode){case pe.Percent:r=v;break;case pe.Proportional:r=v/t;break;default:r=1}d=Ut.setArraySize(this.world,8);for(let e=0,s=0,a=0;e<t;e++,s+=3){var x=l[e]*r;h+=x;let t=h;if(u)t%=v,t<0&&(t+=v),a=0;else{if(t<0){p!=Et.BEFORE&&(p=Et.BEFORE,i.computeWorldVertices(o,2,4,d,0,2)),this.addBeforePosition(t,d,0,c,s);continue}if(t>v){p!=Et.AFTER&&(p=Et.AFTER,i.computeWorldVertices(o,m-6,4,d,0,2)),this.addAfterPosition(t-v,d,0,c,s);continue}}for(;;a++){var b,w=g[a];if(!(t>w)){0==a?t/=w:(b=g[a-1],t=(t-b)/(w-b));break}}a!=p&&(p=a,u&&a==f?(i.computeWorldVertices(o,m-4,4,d,0,2),i.computeWorldVertices(o,0,4,d,4,2)):i.computeWorldVertices(o,6*a+2,8,d,0,2)),this.addCurvePosition(t,d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],c,s,n||0<e&&0==x)}return c}u?(m+=2,d=Ut.setArraySize(this.world,m),i.computeWorldVertices(o,2,m-4,d,0,2),i.computeWorldVertices(o,0,2,d,m-4,2),d[m-2]=d[0],d[m-1]=d[1]):(f--,m-=4,d=Ut.setArraySize(this.world,m),i.computeWorldVertices(o,2,m,d,0,2));let y=Ut.setArraySize(this.curves,f),A=0,k=d[0],S=d[1],I=0,C=0,T=0,Y=0,M=0,F=0,X=0,B=0,R=0,E=0,_=0,P=0,D=0,V=0;for(let t=0,e=2;t<f;t++,e+=6)I=d[e],C=d[e+1],T=d[e+2],Y=d[e+3],M=d[e+4],F=d[e+5],X=.1875*(k-2*I+T),B=.1875*(S-2*C+Y),R=.09375*(3*(I-T)-k+M),E=.09375*(3*(C-Y)-S+F),_=2*X+R,P=2*B+E,D=.75*(I-k)+X+.16666667*R,V=.75*(C-S)+B+.16666667*E,A+=Math.sqrt(D*D+V*V),D+=_,V+=P,_+=R,P+=E,A+=Math.sqrt(D*D+V*V),D+=_,V+=P,A+=Math.sqrt(D*D+V*V),D+=_+R,V+=P+E,A+=Math.sqrt(D*D+V*V),y[t]=A,k=M,S=F;this.data.positionMode==fe.Percent&&(h*=A);let N;switch(this.data.spacingMode){case pe.Percent:N=A;break;case pe.Proportional:N=A/t;break;default:N=1}let L=this.segments,O=0;for(let e=0,s=0,a=0,r=0;e<t;e++,s+=3){var U=l[e]*N;h+=U;let t=h;if(u)t%=A,t<0&&(t+=A),a=0;else{if(t<0){this.addBeforePosition(t,d,0,c,s);continue}if(t>A){this.addAfterPosition(t-A,d,m-4,c,s);continue}}for(;;a++){var W,q=y[a];if(!(t>q)){0==a?t/=q:(W=y[a-1],t=(t-W)/(q-W));break}}if(a!=p){p=a;let t=6*a;for(k=d[t],S=d[t+1],I=d[t+2],C=d[t+3],T=d[t+4],Y=d[t+5],M=d[t+6],F=d[t+7],X=.03*(k-2*I+T),B=.03*(S-2*C+Y),R=.006*(3*(I-T)-k+M),E=.006*(3*(C-Y)-S+F),_=2*X+R,P=2*B+E,D=.3*(I-k)+X+.16666667*R,V=.3*(C-S)+B+.16666667*E,O=Math.sqrt(D*D+V*V),L[0]=O,t=1;t<8;t++)D+=_,V+=P,_+=R,P+=E,O+=Math.sqrt(D*D+V*V),L[t]=O;D+=_,V+=P,O+=Math.sqrt(D*D+V*V),L[8]=O,D+=_+R,V+=P+E,O+=Math.sqrt(D*D+V*V),L[9]=O,r=0}for(t*=O;;r++){var z,j=L[r];if(!(t>j)){0==r?t/=j:(z=L[r-1],t=r+(t-z)/(j-z));break}}this.addCurvePosition(.1*t,k,S,I,C,T,Y,M,F,c,s,n||0<e&&0==U)}return c}addBeforePosition(t,e,s,a,r){var i=e[s],n=e[s+1],o=e[s+2]-i,s=e[s+3]-n,o=Math.atan2(s,o);a[r]=i+t*Math.cos(o),a[r+1]=n+t*Math.sin(o),a[r+2]=o}addAfterPosition(t,e,s,a,r){var i=e[s+2],n=e[s+3],o=i-e[s],s=n-e[s+1],o=Math.atan2(s,o);a[r]=i+t*Math.cos(o),a[r+1]=n+t*Math.sin(o),a[r+2]=o}addCurvePosition(t,e,s,a,r,i,n,o,h,l,c,d){if(0==t||isNaN(t))return l[c]=e,l[c+1]=s,void(l[c+2]=Math.atan2(r-s,a-e));var u=t*t,m=u*t,f=1-t,p=f*f,g=p*f,v=f*t,x=3*v,f=f*x,x=x*t,o=e*g+a*f+i*x+o*m,m=s*g+r*f+n*x+h*m;l[c]=o,l[c+1]=m,d&&(l[c+2]=t<.001?Math.atan2(r-s,a-e):Math.atan2(m-(s*p+r*v*2+n*u),o-(e*p+a*v*2+i*u)))}},_t=Et;_t.NONE=-1,_t.BEFORE=-2,_t.AFTER=-3,_t.epsilon=1e-5;var Pt,Dt=class{constructor(t,e){if(this.deform=new Array,!t)throw new Error("data cannot be null.");if(!e)throw new Error("bone cannot be null.");this.data=t,this.bone=e,this.color=new Ot,this.darkColor=t.darkColor?new Ot:null,this.setToSetupPose()}getSkeleton(){return this.bone.skeleton}getAttachment(){return this.attachment}setAttachment(t){this.attachment!=t&&(t instanceof D&&this.attachment instanceof D&&t.deformAttachment==this.attachment.deformAttachment||(this.deform.length=0),this.attachment=t,this.attachmentTime=this.bone.skeleton.time)}setAttachmentTime(t){this.attachmentTime=this.bone.skeleton.time-t}getAttachmentTime(){return this.bone.skeleton.time-this.attachmentTime}setToSetupPose(){this.color.setFromColor(this.data.color),this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName?(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName))):this.attachment=null}},Vt=class{constructor(e,s){if(this.mixRotate=0,this.mixX=0,this.mixY=0,this.mixScaleX=0,this.mixScaleY=0,this.mixShearY=0,this.temp=new u,this.active=!1,!e)throw new Error("data cannot be null.");if(!s)throw new Error("skeleton cannot be null.");this.data=e,this.mixRotate=e.mixRotate,this.mixX=e.mixX,this.mixY=e.mixY,this.mixScaleX=e.mixScaleX,this.mixScaleY=e.mixScaleY,this.mixShearY=e.mixShearY,this.bones=new Array;for(let t=0;t<e.bones.length;t++)this.bones.push(s.findBone(e.bones[t].name));this.target=s.findBone(e.target.name)}isActive(){return this.active}update(){0==this.mixRotate&&0==this.mixX&&0==this.mixY&&0==this.mixScaleX&&0==this.mixScaleX&&0==this.mixShearY||(this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld())}applyAbsoluteWorld(){var s=this.mixRotate,a=this.mixX,r=this.mixY,i=this.mixScaleX,n=this.mixScaleY,o=this.mixShearY,h=0!=a||0!=r;let l=this.target;var c=l.a,d=l.b,u=l.c,m=l.d,t=0<c*m-d*u?G.degRad:-G.degRad,f=this.data.offsetRotation*t,p=this.data.offsetShearY*t,g=this.bones;for(let t=0,e=g.length;t<e;t++){let e=g[t];if(0!=s){var v=e.a,x=e.b,b=e.c,w=e.d;let t=Math.atan2(u,c)-Math.atan2(b,v)+f;t>G.PI?t-=G.PI2:t<-G.PI&&(t+=G.PI2),t*=s;var y=Math.cos(t),A=Math.sin(t);e.a=y*v-A*b,e.b=y*x-A*w,e.c=A*v+y*b,e.d=A*x+y*w}if(h){let t=this.temp;l.localToWorld(t.set(this.data.offsetX,this.data.offsetY)),e.worldX+=(t.x-e.worldX)*a,e.worldY+=(t.y-e.worldY)*r}if(0!=i){let t=Math.sqrt(e.a*e.a+e.c*e.c);0!=t&&(t=(t+(Math.sqrt(c*c+u*u)-t+this.data.offsetScaleX)*i)/t),e.a*=t,e.c*=t}if(0!=n){let t=Math.sqrt(e.b*e.b+e.d*e.d);0!=t&&(t=(t+(Math.sqrt(d*d+m*m)-t+this.data.offsetScaleY)*n)/t),e.b*=t,e.d*=t}if(0<o){x=e.b,y=e.d,w=Math.atan2(y,x);let t=Math.atan2(m,d)-Math.atan2(u,c)-(w-Math.atan2(e.c,e.a));t>G.PI?t-=G.PI2:t<-G.PI&&(t+=G.PI2),t=w+(t+p)*o;y=Math.sqrt(x*x+y*y);e.b=Math.cos(t)*y,e.d=Math.sin(t)*y}e.updateAppliedTransform()}}applyRelativeWorld(){var s=this.mixRotate,a=this.mixX,r=this.mixY,i=this.mixScaleX,n=this.mixScaleY,o=this.mixShearY,h=0!=a||0!=r;let l=this.target;var c=l.a,d=l.b,u=l.c,m=l.d,t=0<c*m-d*u?G.degRad:-G.degRad,f=this.data.offsetRotation*t,p=this.data.offsetShearY*t,g=this.bones;for(let t=0,e=g.length;t<e;t++){let e=g[t];if(0!=s){var v=e.a,x=e.b,b=e.c,w=e.d;let t=Math.atan2(u,c)+f;t>G.PI?t-=G.PI2:t<-G.PI&&(t+=G.PI2),t*=s;var y=Math.cos(t),A=Math.sin(t);e.a=y*v-A*b,e.b=y*x-A*w,e.c=A*v+y*b,e.d=A*x+y*w}if(h){let t=this.temp;l.localToWorld(t.set(this.data.offsetX,this.data.offsetY)),e.worldX+=t.x*a,e.worldY+=t.y*r}if(0!=i&&(k=(Math.sqrt(c*c+u*u)-1+this.data.offsetScaleX)*i+1,e.a*=k,e.c*=k),0!=n&&(S=(Math.sqrt(d*d+m*m)-1+this.data.offsetScaleY)*n+1,e.b*=S,e.d*=S),0<o){let t=Math.atan2(m,d)-Math.atan2(u,c);t>G.PI?t-=G.PI2:t<-G.PI&&(t+=G.PI2);var k=e.b,S=e.d;t=Math.atan2(S,k)+(t-G.PI/2+p)*o;S=Math.sqrt(k*k+S*S);e.b=Math.cos(t)*S,e.d=Math.sin(t)*S}e.updateAppliedTransform()}}applyAbsoluteLocal(){var n=this.mixRotate,o=this.mixX,h=this.mixY,l=this.mixScaleX,c=this.mixScaleY,d=this.mixShearY,u=this.target,m=this.bones;for(let i=0,t=m.length;i<t;i++){let t=m[i],e=t.arotation;0!=n&&(f=u.arotation-e+this.data.offsetRotation,f-=360*(16384-(16384.499999999996-f/360|0)),e+=f*n);var f,p=t.ax,g=t.ay;p+=(u.ax-p+this.data.offsetX)*o,g+=(u.ay-g+this.data.offsetY)*h;let s=t.ascaleX,a=t.ascaleY;0!=l&&0!=s&&(s=(s+(u.ascaleX-s+this.data.offsetScaleX)*l)/s),0!=c&&0!=a&&(a=(a+(u.ascaleY-a+this.data.offsetScaleY)*c)/a);let r=t.ashearY;0!=d&&(f=u.ashearY-r+this.data.offsetShearY,f-=360*(16384-(16384.499999999996-f/360|0)),r+=f*d),t.updateWorldTransformWith(p,g,e,s,a,t.ashearX,r)}}applyRelativeLocal(){var s=this.mixRotate,a=this.mixX,r=this.mixY,i=this.mixScaleX,n=this.mixScaleY,o=this.mixShearY,h=this.target,l=this.bones;for(let e=0,t=l.length;e<t;e++){let t=l[e];var c=t.arotation+(h.arotation+this.data.offsetRotation)*s,d=t.ax+(h.ax+this.data.offsetX)*a,u=t.ay+(h.ay+this.data.offsetY)*r,m=t.ascaleX*((h.ascaleX-1+this.data.offsetScaleX)*i+1),f=t.ascaleY*((h.ascaleY-1+this.data.offsetScaleY)*n+1),p=t.ashearY+(h.ashearY+this.data.offsetShearY)*o;t.updateWorldTransformWith(d,u,c,m,f,t.ashearX,p)}}},Nt=class{constructor(s){if(this._updateCache=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,!s)throw new Error("data cannot be null.");this.data=s,this.bones=new Array;for(let t=0;t<s.bones.length;t++){var a=s.bones[t];let e;if(a.parent){let t=this.bones[a.parent.index];e=new Ct(a,this,t),t.children.push(e)}else e=new Ct(a,this,null);this.bones.push(e)}this.slots=new Array,this.drawOrder=new Array;for(let t=0;t<s.slots.length;t++){var e=s.slots[t],r=this.bones[e.boneData.index],r=new Dt(e,r);this.slots.push(r),this.drawOrder.push(r)}this.ikConstraints=new Array;for(let t=0;t<s.ikConstraints.length;t++){var i=s.ikConstraints[t];this.ikConstraints.push(new Xt(i,this))}this.transformConstraints=new Array;for(let t=0;t<s.transformConstraints.length;t++){var n=s.transformConstraints[t];this.transformConstraints.push(new Vt(n,this))}this.pathConstraints=new Array;for(let t=0;t<s.pathConstraints.length;t++){var o=s.pathConstraints[t];this.pathConstraints.push(new _t(o,this))}this.color=new Ot(1,1,1,1),this.updateCache()}updateCache(){let t=this._updateCache;t.length=0;var s=this.bones;for(let e=0,t=s.length;e<t;e++){let t=s[e];t.sorted=t.data.skinRequired,t.active=!t.sorted}if(this.skin){var a=this.skin.bones;for(let e=0,t=this.skin.bones.length;e<t;e++){let t=this.bones[a[e].index];for(;t.sorted=!1,t.active=!0,t=t.parent,t;);}}var r=this.ikConstraints,i=this.transformConstraints,n=this.pathConstraints,o=r.length,h=i.length,l=n.length,c=o+h+l;t:for(let e=0;e<c;e++){for(let t=0;t<o;t++){var d=r[t];if(d.data.order==e){this.sortIkConstraint(d);continue t}}for(let t=0;t<h;t++){var u=i[t];if(u.data.order==e){this.sortTransformConstraint(u);continue t}}for(let t=0;t<l;t++){var m=n[t];if(m.data.order==e){this.sortPathConstraint(m);continue t}}}for(let t=0,e=s.length;t<e;t++)this.sortBone(s[t])}sortIkConstraint(e){if(e.active=e.target.isActive()&&(!e.data.skinRequired||this.skin&&Ut.contains(this.skin.constraints,e.data,!0)),e.active){var s=e.target;this.sortBone(s);var a=e.bones,s=a[0];if(this.sortBone(s),1==a.length)this._updateCache.push(e),this.sortReset(s.children);else{let t=a[a.length-1];this.sortBone(t),this._updateCache.push(e),this.sortReset(s.children),t.sorted=!0}}}sortPathConstraint(s){if(s.active=s.target.bone.isActive()&&(!s.data.skinRequired||this.skin&&Ut.contains(this.skin.constraints,s.data,!0)),s.active){let t=s.target;var a=t.data.index,r=t.bone;this.skin&&this.sortPathConstraintAttachment(this.skin,a,r),this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,a,r);for(let t=0,e=this.data.skins.length;t<e;t++)this.sortPathConstraintAttachment(this.data.skins[t],a,r);var i=t.getAttachment();i instanceof xt&&this.sortPathConstraintAttachmentWith(i,r);let e=s.bones;var n=e.length;for(let t=0;t<n;t++)this.sortBone(e[t]);this._updateCache.push(s);for(let t=0;t<n;t++)this.sortReset(e[t].children);for(let t=0;t<n;t++)e[t].sorted=!0}}sortTransformConstraint(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&Ut.contains(this.skin.constraints,t.data,!0)),t.active){this.sortBone(t.target);let e=t.bones;var s=e.length;if(t.data.local)for(let t=0;t<s;t++){var a=e[t];this.sortBone(a.parent),this.sortBone(a)}else for(let t=0;t<s;t++)this.sortBone(e[t]);this._updateCache.push(t);for(let t=0;t<s;t++)this.sortReset(e[t].children);for(let t=0;t<s;t++)e[t].sorted=!0}}sortPathConstraintAttachment(t,e,s){var a=t.attachments[e];if(a)for(var r in a)this.sortPathConstraintAttachmentWith(a[r],s)}sortPathConstraintAttachmentWith(t,e){if(t instanceof xt){var s=t.bones;if(s){var a=this.bones;for(let t=0,e=s.length;t<e;){var r=s[t++];for(r+=t;t<r;)this.sortBone(a[s[t++]])}}else this.sortBone(e)}}sortBone(t){var e;t.sorted||((e=t.parent)&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t))}sortReset(s){for(let e=0,t=s.length;e<t;e++){let t=s[e];t.active&&(t.sorted&&this.sortReset(t.children),t.sorted=!1)}}updateWorldTransform(){var s=this.bones;for(let e=0,t=s.length;e<t;e++){let t=s[e];t.ax=t.x,t.ay=t.y,t.arotation=t.rotation,t.ascaleX=t.scaleX,t.ascaleY=t.scaleY,t.ashearX=t.shearX,t.ashearY=t.shearY}let a=this._updateCache;for(let t=0,e=a.length;t<e;t++)a[t].update()}updateWorldTransformWith(t){let s=this.getRootBone();var e=t.a,a=t.b,r=t.c,i=t.d;s.worldX=e*this.x+a*this.y+t.worldX,s.worldY=r*this.x+i*this.y+t.worldY;var n=s.rotation+90+s.shearY,o=G.cosDeg(s.rotation+s.shearX)*s.scaleX,h=G.cosDeg(n)*s.scaleY,t=G.sinDeg(s.rotation+s.shearX)*s.scaleX,n=G.sinDeg(n)*s.scaleY;s.a=(e*o+a*t)*this.scaleX,s.b=(e*h+a*n)*this.scaleX,s.c=(r*o+i*t)*this.scaleY,s.d=(r*h+i*n)*this.scaleY;var l=this._updateCache;for(let e=0,t=l.length;e<t;e++){let t=l[e];t!=s&&t.update()}}setToSetupPose(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()}setBonesToSetupPose(){let s=this.bones;for(let t=0,e=s.length;t<e;t++)s[t].setToSetupPose();var a=this.ikConstraints;for(let e=0,t=a.length;e<t;e++){let t=a[e];t.mix=t.data.mix,t.softness=t.data.softness,t.bendDirection=t.data.bendDirection,t.compress=t.data.compress,t.stretch=t.data.stretch}var r=this.transformConstraints;for(let e=0,t=r.length;e<t;e++){let t=r[e];var i=t.data;t.mixRotate=i.mixRotate,t.mixX=i.mixX,t.mixY=i.mixY,t.mixScaleX=i.mixScaleX,t.mixScaleY=i.mixScaleY,t.mixShearY=i.mixShearY}var n=this.pathConstraints;for(let e=0,t=n.length;e<t;e++){let t=n[e];var o=t.data;t.position=o.position,t.spacing=o.spacing,t.mixRotate=o.mixRotate,t.mixX=o.mixX,t.mixY=o.mixY}}setSlotsToSetupPose(){let s=this.slots;Ut.arrayCopy(s,0,this.drawOrder,0,s.length);for(let t=0,e=s.length;t<e;t++)s[t].setToSetupPose()}getRootBone(){return 0==this.bones.length?null:this.bones[0]}findBone(s){if(!s)throw new Error("boneName cannot be null.");var a=this.bones;for(let t=0,e=a.length;t<e;t++){var r=a[t];if(r.data.name==s)return r}return null}findSlot(s){if(!s)throw new Error("slotName cannot be null.");var a=this.slots;for(let t=0,e=a.length;t<e;t++){var r=a[t];if(r.data.name==s)return r}return null}setSkinByName(t){var e=this.data.findSkin(t);if(!e)throw new Error("Skin not found: "+t);this.setSkin(e)}setSkin(s){if(s!=this.skin){if(s)if(this.skin)s.attachAll(this,this.skin);else{var a=this.slots;for(let e=0,t=a.length;e<t;e++){let t=a[e];var r=t.data.attachmentName;!r||(r=s.getAttachment(e,r))&&t.setAttachment(r)}}this.skin=s,this.updateCache()}}getAttachmentByName(t,e){return this.getAttachment(this.data.findSlot(t).index,e)}getAttachment(t,e){if(!e)throw new Error("attachmentName cannot be null.");if(this.skin){var s=this.skin.getAttachment(t,e);if(s)return s}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null}setAttachment(a,r){if(!a)throw new Error("slotName cannot be null.");var i=this.slots;for(let s=0,t=i.length;s<t;s++){let e=i[s];if(e.data.name==a){let t=null;if(r&&(t=this.getAttachment(s,r),!t))throw new Error("Attachment not found: "+r+", for slot: "+a);return void e.setAttachment(t)}}throw new Error("Slot not found: "+a)}findIkConstraint(s){if(!s)throw new Error("constraintName cannot be null.");var a=this.ikConstraints;for(let t=0,e=a.length;t<e;t++){var r=a[t];if(r.data.name==s)return r}return null}findTransformConstraint(s){if(!s)throw new Error("constraintName cannot be null.");var a=this.transformConstraints;for(let t=0,e=a.length;t<e;t++){var r=a[t];if(r.data.name==s)return r}return null}findPathConstraint(s){if(!s)throw new Error("constraintName cannot be null.");var a=this.pathConstraints;for(let t=0,e=a.length;t<e;t++){var r=a[t];if(r.data.name==s)return r}return null}getBounds(t,e,i=new Array(2)){if(!t)throw new Error("offset cannot be null.");if(!e)throw new Error("size cannot be null.");var s=this.drawOrder;let n=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY;for(let t=0,e=s.length;t<e;t++){let r=s[t];if(r.bone.active){let e=0,s=null,a=r.getAttachment();if(a instanceof yt)e=8,s=Ut.setArraySize(i,e,0),a.computeWorldVertices(r.bone,s,0,2);else if(a instanceof vt){let t=a;e=t.worldVerticesLength,s=Ut.setArraySize(i,e,0),t.computeWorldVertices(r,0,e,s,0,2)}if(s)for(let t=0,e=s.length;t<e;t+=2){var c=s[t],d=s[t+1];n=Math.min(n,c),o=Math.min(o,d),h=Math.max(h,c),l=Math.max(l,d)}}}t.set(n,o),e.set(h-n,l-o)}update(t){this.time+=t}},Lt=class{constructor(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}findBone(s){if(!s)throw new Error("boneName cannot be null.");var a=this.bones;for(let t=0,e=a.length;t<e;t++){var r=a[t];if(r.name==s)return r}return null}findSlot(s){if(!s)throw new Error("slotName cannot be null.");var a=this.slots;for(let t=0,e=a.length;t<e;t++){var r=a[t];if(r.name==s)return r}return null}findSkin(s){if(!s)throw new Error("skinName cannot be null.");var a=this.skins;for(let t=0,e=a.length;t<e;t++){var r=a[t];if(r.name==s)return r}return null}findEvent(s){if(!s)throw new Error("eventDataName cannot be null.");var a=this.events;for(let t=0,e=a.length;t<e;t++){var r=a[t];if(r.name==s)return r}return null}findAnimation(s){if(!s)throw new Error("animationName cannot be null.");var a=this.animations;for(let t=0,e=a.length;t<e;t++){var r=a[t];if(r.name==s)return r}return null}findIkConstraint(s){if(!s)throw new Error("constraintName cannot be null.");var a=this.ikConstraints;for(let t=0,e=a.length;t<e;t++){var r=a[t];if(r.name==s)return r}return null}findTransformConstraint(s){if(!s)throw new Error("constraintName cannot be null.");var a=this.transformConstraints;for(let t=0,e=a.length;t<e;t++){var r=a[t];if(r.name==s)return r}return null}findPathConstraint(s){if(!s)throw new Error("constraintName cannot be null.");var a=this.pathConstraints;for(let t=0,e=a.length;t<e;t++){var r=a[t];if(r.name==s)return r}return null}},ve=class{constructor(t,e,s){this.slotIndex=t,this.name=e,this.attachment=s}},xe=class{constructor(t){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,!t)throw new Error("name cannot be null.");this.name=t}setAttachment(t,e,s){if(!s)throw new Error("attachment cannot be null.");let a=this.attachments;t>=a.length&&(a.length=t+1),a[t]||(a[t]={}),a[t][e]=s}addSkin(s){for(let t=0;t<s.bones.length;t++){var a=s.bones[t];let e=!1;for(let t=0;t<this.bones.length;t++)if(this.bones[t]==a){e=!0;break}e||this.bones.push(a)}for(let t=0;t<s.constraints.length;t++){var r=s.constraints[t];let e=!1;for(let t=0;t<this.constraints.length;t++)if(this.constraints[t]==r){e=!0;break}e||this.constraints.push(r)}var e=s.getAttachments();for(let t=0;t<e.length;t++){var i=e[t];this.setAttachment(i.slotIndex,i.name,i.attachment)}}copySkin(s){for(let t=0;t<s.bones.length;t++){var a=s.bones[t];let e=!1;for(let t=0;t<this.bones.length;t++)if(this.bones[t]==a){e=!0;break}e||this.bones.push(a)}for(let t=0;t<s.constraints.length;t++){var r=s.constraints[t];let e=!1;for(let t=0;t<this.constraints.length;t++)if(this.constraints[t]==r){e=!0;break}e||this.constraints.push(r)}var e=s.getAttachments();for(let t=0;t<e.length;t++){var i=e[t];i.attachment&&(i.attachment instanceof vt?i.attachment=i.attachment.newLinkedMesh():i.attachment=i.attachment.copy(),this.setAttachment(i.slotIndex,i.name,i.attachment))}}getAttachment(t,e){t=this.attachments[t];return t?t[e]:null}removeAttachment(t,e){let s=this.attachments[t];s&&(s[e]=null)}getAttachments(){let t=new Array;for(var e=0;e<this.attachments.length;e++){var s=this.attachments[e];if(s)for(var a in s){var r=s[a];r&&t.push(new ve(e,a,r))}}return t}getAttachmentsForSlot(t,e){var s=this.attachments[t];if(s)for(var a in s){var r=s[a];r&&e.push(new ve(t,a,r))}}clear(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0}attachAll(s,a){let r=0;for(let e=0;e<s.slots.length;e++){let t=s.slots[e];var i=t.getAttachment();if(i&&r<a.attachments.length){var n,o=a.attachments[r];for(n in o)if(i==o[n]){var h=this.getAttachment(r,n);h&&t.setAttachment(h);break}}r++}}},be=class{constructor(t,e,s){if(this.color=new Ot(1,1,1,1),t<0)throw new Error("index must be >= 0.");if(!e)throw new Error("name cannot be null.");if(!s)throw new Error("boneData cannot be null.");this.index=t,this.name=e,this.boneData=s}};(B=Pt=Pt||{})[B.Normal=0]="Normal",B[B.Additive=1]="Additive",B[B.Multiply=2]="Multiply",B[B.Screen=3]="Screen";var we,ye=class extends Tt{constructor(t){super(t,0,!1),this.bones=new Array,this.mixRotate=0,this.mixX=0,this.mixY=0,this.mixScaleX=0,this.mixScaleY=0,this.mixShearY=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,this.relative=!1,this.local=!1}},Ae=class{constructor(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}readSkeletonData(t){var a=this.scale;let r=new Lt;r.name="";let i=new ke(t),e=i.readInt32(),s=i.readInt32();r.hash=0==s&&0==e?null:s.toString(16)+e.toString(16),r.version=i.readString(),r.x=i.readFloat(),r.y=i.readFloat(),r.width=i.readFloat(),r.height=i.readFloat();var n=i.readBoolean();n&&(r.fps=i.readFloat(),r.imagesPath=i.readString(),r.audioPath=i.readString());let o=0;o=i.readInt(!0);for(let t=0;t<o;t++)i.strings.push(i.readString());o=i.readInt(!0);for(let e=0;e<o;e++){var h=i.readString(),l=0==e?null:r.bones[i.readInt(!0)];let t=new St(e,h,l);t.rotation=i.readFloat(),t.x=i.readFloat()*a,t.y=i.readFloat()*a,t.scaleX=i.readFloat(),t.scaleY=i.readFloat(),t.shearX=i.readFloat(),t.shearY=i.readFloat(),t.length=i.readFloat()*a,t.transformMode=i.readInt(!0),t.skinRequired=i.readBoolean(),n&&Ot.rgba8888ToColor(t.color,i.readInt32()),r.bones.push(t)}o=i.readInt(!0);for(let e=0;e<o;e++){var c=i.readString(),d=r.bones[i.readInt(!0)];let t=new be(e,c,d);Ot.rgba8888ToColor(t.color,i.readInt32());d=i.readInt32();-1!=d&&Ot.rgb888ToColor(t.darkColor=new Ot,d),t.attachmentName=i.readStringRef(),t.blendMode=i.readInt(!0),r.slots.push(t)}o=i.readInt(!0);for(let t=0,s;t<o;t++){let e=new Bt(i.readString());e.order=i.readInt(!0),e.skinRequired=i.readBoolean(),s=i.readInt(!0);for(let t=0;t<s;t++)e.bones.push(r.bones[i.readInt(!0)]);e.target=r.bones[i.readInt(!0)],e.mix=i.readFloat(),e.softness=i.readFloat()*a,e.bendDirection=i.readByte(),e.compress=i.readBoolean(),e.stretch=i.readBoolean(),e.uniform=i.readBoolean(),r.ikConstraints.push(e)}o=i.readInt(!0);for(let t=0,s;t<o;t++){let e=new ye(i.readString());e.order=i.readInt(!0),e.skinRequired=i.readBoolean(),s=i.readInt(!0);for(let t=0;t<s;t++)e.bones.push(r.bones[i.readInt(!0)]);e.target=r.bones[i.readInt(!0)],e.local=i.readBoolean(),e.relative=i.readBoolean(),e.offsetRotation=i.readFloat(),e.offsetX=i.readFloat()*a,e.offsetY=i.readFloat()*a,e.offsetScaleX=i.readFloat(),e.offsetScaleY=i.readFloat(),e.offsetShearY=i.readFloat(),e.mixRotate=i.readFloat(),e.mixX=i.readFloat(),e.mixY=i.readFloat(),e.mixScaleX=i.readFloat(),e.mixScaleY=i.readFloat(),e.mixShearY=i.readFloat(),r.transformConstraints.push(e)}o=i.readInt(!0);for(let t=0,s;t<o;t++){let e=new Rt(i.readString());e.order=i.readInt(!0),e.skinRequired=i.readBoolean(),s=i.readInt(!0);for(let t=0;t<s;t++)e.bones.push(r.bones[i.readInt(!0)]);e.target=r.slots[i.readInt(!0)],e.positionMode=i.readInt(!0),e.spacingMode=i.readInt(!0),e.rotateMode=i.readInt(!0),e.offsetRotation=i.readFloat(),e.position=i.readFloat(),e.positionMode==fe.Fixed&&(e.position*=a),e.spacing=i.readFloat(),e.spacingMode!=pe.Length&&e.spacingMode!=pe.Fixed||(e.spacing*=a),e.mixRotate=i.readFloat(),e.mixX=i.readFloat(),e.mixY=i.readFloat(),r.pathConstraints.push(e)}t=this.readSkin(i,r,!0,n);t&&(r.defaultSkin=t,r.skins.push(t));{let t=r.skins.length;for(Ut.setArraySize(r.skins,o=t+i.readInt(!0));t<o;t++)r.skins[t]=this.readSkin(i,r,!1,n)}o=this.linkedMeshes.length;for(let s=0;s<o;s++){let t=this.linkedMeshes[s],e=t.skin?r.findSkin(t.skin):r.defaultSkin;var u=e.getAttachment(t.slotIndex,t.parent);t.mesh.deformAttachment=t.inheritDeform?u:t.mesh,t.mesh.setParentMesh(u),t.mesh.updateUVs()}this.linkedMeshes.length=0,o=i.readInt(!0);for(let t=0;t<o;t++){let t=new Ft(i.readStringRef());t.intValue=i.readInt(!1),t.floatValue=i.readFloat(),t.stringValue=i.readString(),t.audioPath=i.readString(),t.audioPath&&(t.volume=i.readFloat(),t.balance=i.readFloat()),r.events.push(t)}o=i.readInt(!0);for(let t=0;t<o;t++)r.animations.push(this.readAnimation(i,i.readString(),r));return r}readSkin(s,a,t,r){let i=null,e=0;if(t){if(e=s.readInt(!0),0==e)return null;i=new xe("default")}else{i=new xe(s.readStringRef()),i.bones.length=s.readInt(!0);for(let t=0,e=i.bones.length;t<e;t++)i.bones[t]=a.bones[s.readInt(!0)];for(let t=0,e=s.readInt(!0);t<e;t++)i.constraints.push(a.ikConstraints[s.readInt(!0)]);for(let t=0,e=s.readInt(!0);t<e;t++)i.constraints.push(a.transformConstraints[s.readInt(!0)]);for(let t=0,e=s.readInt(!0);t<e;t++)i.constraints.push(a.pathConstraints[s.readInt(!0)]);e=s.readInt(!0)}for(let t=0;t<e;t++){var n=s.readInt(!0);for(let t=0,e=s.readInt(!0);t<e;t++){var o=s.readStringRef(),h=this.readAttachment(s,a,i,n,o,r);h&&i.setAttachment(n,o,h)}}return i}readAttachment(i,e,n,r,t,o){var h=this.scale;let l=i.readStringRef();switch(l=l||t,i.readByte()){case we.Region:{let t=i.readStringRef();var s=i.readFloat(),a=i.readFloat(),c=i.readFloat(),d=i.readFloat(),u=i.readFloat(),m=i.readFloat(),f=i.readFloat(),p=i.readInt32();t=t||l;let e=this.attachmentLoader.newRegionAttachment(n,l,t);return e?(e.path=t,e.x=a*h,e.y=c*h,e.scaleX=d,e.scaleY=u,e.rotation=s,e.width=m*h,e.height=f*h,Ot.rgba8888ToColor(e.color,p),e.updateOffset(),e):null}case we.BoundingBox:{var g=i.readInt(!0),v=this.readVertices(i,g),x=o?i.readInt32():0;let t=this.attachmentLoader.newBoundingBoxAttachment(n,l);return t?(t.worldVerticesLength=g<<1,t.vertices=v.vertices,t.bones=v.bones,o&&Ot.rgba8888ToColor(t.color,x),t):null}case we.Mesh:{let t=i.readStringRef();var f=i.readInt32(),p=i.readInt(!0),g=this.readFloatArray(i,p<<1,1),v=this.readShortArray(i),x=this.readVertices(i,p),b=i.readInt(!0);let e=null,s=0,a=0;o&&(e=this.readShortArray(i),s=i.readFloat(),a=i.readFloat()),t=t||l;let r=this.attachmentLoader.newMeshAttachment(n,l,t);return r?(r.path=t,Ot.rgba8888ToColor(r.color,f),r.bones=x.bones,r.vertices=x.vertices,r.worldVerticesLength=p<<1,r.triangles=v,r.regionUVs=g,r.updateUVs(),r.hullLength=b<<1,o&&(r.edges=e,r.width=s*h,r.height=a*h),r):null}case we.LinkedMesh:{let t=i.readStringRef();var w=i.readInt32(),y=i.readStringRef(),A=i.readStringRef(),k=i.readBoolean();let e=0,s=0;o&&(e=i.readFloat(),s=i.readFloat()),t=t||l;let a=this.attachmentLoader.newMeshAttachment(n,l,t);return a?(a.path=t,Ot.rgba8888ToColor(a.color,w),o&&(a.width=e*h,a.height=s*h),this.linkedMeshes.push(new Se(a,y,r,A,k)),a):null}case we.Path:{b=i.readBoolean(),w=i.readBoolean(),y=i.readInt(!0),A=this.readVertices(i,y);let s=Ut.newArray(y/3,0);for(let t=0,e=s.length;t<e;t++)s[t]=i.readFloat()*h;k=o?i.readInt32():0;let t=this.attachmentLoader.newPathAttachment(n,l);return t?(t.closed=b,t.constantSpeed=w,t.worldVerticesLength=y<<1,t.vertices=A.vertices,t.bones=A.bones,t.lengths=s,o&&Ot.rgba8888ToColor(t.color,k),t):null}case we.Point:{var S=i.readFloat(),I=i.readFloat(),C=i.readFloat(),T=o?i.readInt32():0;let t=this.attachmentLoader.newPointAttachment(n,l);return t?(t.x=I*h,t.y=C*h,t.rotation=S,o&&Ot.rgba8888ToColor(t.color,T),t):null}case we.Clipping:{I=i.readInt(!0),C=i.readInt(!0),S=this.readVertices(i,C),T=o?i.readInt32():0;let t=this.attachmentLoader.newClippingAttachment(n,l);return t?(t.endSlot=e.slots[I],t.worldVerticesLength=C<<1,t.vertices=S.vertices,t.bones=S.bones,o&&Ot.rgba8888ToColor(t.color,T),t):null}}return null}readVertices(e,s){var a=this.scale,t=s<<1;let r=new Ie;if(!e.readBoolean())return r.vertices=this.readFloatArray(e,t,a),r;let i=new Array,n=new Array;for(let t=0;t<s;t++){var o=e.readInt(!0);n.push(o);for(let t=0;t<o;t++)n.push(e.readInt(!0)),i.push(e.readFloat()*a),i.push(e.readFloat()*a),i.push(e.readFloat())}return r.vertices=Ut.toFloatArray(i),r.bones=n,r}readFloatArray(e,s,a){let r=new Array(s);if(1==a)for(let t=0;t<s;t++)r[t]=e.readFloat();else for(let t=0;t<s;t++)r[t]=e.readFloat()*a;return r}readShortArray(e){var s=e.readInt(!0);let a=new Array(s);for(let t=0;t<s;t++)a[t]=e.readShort();return a}readAnimation(d,t,a){d.readInt(!0);let u=new Array;var h=this.scale;new Ot,new Ot;for(let t=0,e=d.readInt(!0);t<e;t++){var m=d.readInt(!0);for(let t=0,e=d.readInt(!0);t<e;t++){var s=d.readByte(),f=d.readInt(!0),p=f-1;switch(s){case Le:{let e=new ie(f,m);for(let t=0;t<f;t++)e.setFrame(t,d.readFloat(),d.readStringRef());u.push(e);break}case Oe:{var l=d.readInt(!0);let s=new te(f,l,m),a=d.readFloat(),r=d.readUnsignedByte()/255,i=d.readUnsignedByte()/255,n=d.readUnsignedByte()/255,o=d.readUnsignedByte()/255;for(let t=0,e=0;s.setFrame(t,a,r,i,n,o),t!=p;t++){var c=d.readFloat(),g=d.readUnsignedByte()/255,v=d.readUnsignedByte()/255,x=d.readUnsignedByte()/255,b=d.readUnsignedByte()/255;switch(d.readByte()){case $e:s.setStepped(t);break;case Je:Ye(d,s,e++,t,0,a,c,r,g,1),Ye(d,s,e++,t,1,a,c,i,v,1),Ye(d,s,e++,t,2,a,c,n,x,1),Ye(d,s,e++,t,3,a,c,o,b,1)}a=c,r=g,i=v,n=x,o=b}u.push(s);break}case Ue:{l=d.readInt(!0);let s=new ee(f,l,m),a=d.readFloat(),r=d.readUnsignedByte()/255,i=d.readUnsignedByte()/255,n=d.readUnsignedByte()/255;for(let t=0,e=0;s.setFrame(t,a,r,i,n),t!=p;t++){var o=d.readFloat(),w=d.readUnsignedByte()/255,y=d.readUnsignedByte()/255,A=d.readUnsignedByte()/255;switch(d.readByte()){case $e:s.setStepped(t);break;case Je:Ye(d,s,e++,t,0,a,o,r,w,1),Ye(d,s,e++,t,1,a,o,i,y,1),Ye(d,s,e++,t,2,a,o,n,A,1)}a=o,r=w,i=y,n=A}u.push(s);break}case We:{var k=d.readInt(!0);let s=new ae(f,k,m),a=d.readFloat(),r=d.readUnsignedByte()/255,i=d.readUnsignedByte()/255,n=d.readUnsignedByte()/255,o=d.readUnsignedByte()/255,h=d.readUnsignedByte()/255,l=d.readUnsignedByte()/255,c=d.readUnsignedByte()/255;for(let t=0,e=0;s.setFrame(t,a,r,i,n,o,h,l,c),t!=p;t++){var S=d.readFloat(),I=d.readUnsignedByte()/255,C=d.readUnsignedByte()/255,T=d.readUnsignedByte()/255,Y=d.readUnsignedByte()/255,M=d.readUnsignedByte()/255,F=d.readUnsignedByte()/255,X=d.readUnsignedByte()/255;switch(d.readByte()){case $e:s.setStepped(t);break;case Je:Ye(d,s,e++,t,0,a,S,r,I,1),Ye(d,s,e++,t,1,a,S,i,C,1),Ye(d,s,e++,t,2,a,S,n,T,1),Ye(d,s,e++,t,3,a,S,o,Y,1),Ye(d,s,e++,t,4,a,S,h,M,1),Ye(d,s,e++,t,5,a,S,l,F,1),Ye(d,s,e++,t,6,a,S,c,X,1)}a=S,r=I,i=C,n=T,o=Y,h=M,l=F,c=X}u.push(s);break}case qe:{k=d.readInt(!0);let s=new re(f,k,m),a=d.readFloat(),r=d.readUnsignedByte()/255,i=d.readUnsignedByte()/255,n=d.readUnsignedByte()/255,o=d.readUnsignedByte()/255,h=d.readUnsignedByte()/255,l=d.readUnsignedByte()/255;for(let t=0,e=0;s.setFrame(t,a,r,i,n,o,h,l),t!=p;t++){var B=d.readFloat(),R=d.readUnsignedByte()/255,E=d.readUnsignedByte()/255,_=d.readUnsignedByte()/255,P=d.readUnsignedByte()/255,D=d.readUnsignedByte()/255,V=d.readUnsignedByte()/255;switch(d.readByte()){case $e:s.setStepped(t);break;case Je:Ye(d,s,e++,t,0,a,B,r,R,1),Ye(d,s,e++,t,1,a,B,i,E,1),Ye(d,s,e++,t,2,a,B,n,_,1),Ye(d,s,e++,t,3,a,B,o,P,1),Ye(d,s,e++,t,4,a,B,h,D,1),Ye(d,s,e++,t,5,a,B,l,V,1)}a=B,r=R,i=E,n=_,o=P,h=D,l=V}u.push(s);break}case ze:{let s=new se(f,d.readInt(!0),m),a=d.readFloat(),r=d.readUnsignedByte()/255;for(let t=0,e=0;s.setFrame(t,a,r),t!=p;t++){var i=d.readFloat(),n=d.readUnsignedByte()/255;switch(d.readByte()){case $e:s.setStepped(t);break;case Je:Ye(d,s,e++,t,0,a,i,r,n,1)}a=i,r=n}u.push(s);break}}}}for(let t=0,e=d.readInt(!0);t<e;t++){var r=d.readInt(!0);for(let t=0,e=d.readInt(!0);t<e;t++){var N=d.readByte(),L=d.readInt(!0),O=d.readInt(!0);switch(N){case Fe:u.push(Ce(d,new qt(L,O,r),1));break;case Xe:u.push(Te(d,new zt(L,O,r),h));break;case Be:u.push(Ce(d,new jt(L,O,r),h));break;case Re:u.push(Ce(d,new Ht(L,O,r),h));break;case Ee:u.push(Te(d,new Gt(L,O,r),1));break;case _e:u.push(Ce(d,new $t(L,O,r),1));break;case Pe:u.push(Ce(d,new Jt(L,O,r),1));break;case De:u.push(Te(d,new Qt(L,O,r),1));break;case Ve:u.push(Ce(d,new Kt(L,O,r),1));break;case Ne:u.push(Ce(d,new Zt(L,O,r),1))}}}for(let t=0,e=d.readInt(!0);t<e;t++){var U=d.readInt(!0),W=d.readInt(!0),q=W-1;let s=new le(W,d.readInt(!0),U),a=d.readFloat(),r=d.readFloat(),i=d.readFloat()*h;for(let t=0,e=0;s.setFrame(t,a,r,i,d.readByte(),d.readBoolean(),d.readBoolean()),t!=q;t++){var z=d.readFloat(),j=d.readFloat(),H=d.readFloat()*h;switch(d.readByte()){case $e:s.setStepped(t);break;case Je:Ye(d,s,e++,t,0,a,z,r,j,1),Ye(d,s,e++,t,1,a,z,i,H,h)}a=z,r=j,i=H}u.push(s)}for(let t=0,e=d.readInt(!0);t<e;t++){var G=d.readInt(!0),$=d.readInt(!0),J=$-1;let s=new ce($,d.readInt(!0),G),a=d.readFloat(),r=d.readFloat(),i=d.readFloat(),n=d.readFloat(),o=d.readFloat(),h=d.readFloat(),l=d.readFloat();for(let t=0,e=0;s.setFrame(t,a,r,i,n,o,h,l),t!=J;t++){var Q=d.readFloat(),K=d.readFloat(),Z=d.readFloat(),tt=d.readFloat(),et=d.readFloat(),st=d.readFloat(),at=d.readFloat();switch(d.readByte()){case $e:s.setStepped(t);break;case Je:Ye(d,s,e++,t,0,a,Q,r,K,1),Ye(d,s,e++,t,1,a,Q,i,Z,1),Ye(d,s,e++,t,2,a,Q,n,tt,1),Ye(d,s,e++,t,3,a,Q,o,et,1),Ye(d,s,e++,t,4,a,Q,h,st,1),Ye(d,s,e++,t,5,a,Q,l,at,1)}a=Q,r=K,i=Z,n=tt,o=et,h=st,l=at}u.push(s)}for(let t=0,e=d.readInt(!0);t<e;t++){var rt=d.readInt(!0),it=a.pathConstraints[rt];for(let t=0,e=d.readInt(!0);t<e;t++)switch(d.readByte()){case je:u.push(Ce(d,new de(d.readInt(!0),d.readInt(!0),rt),it.positionMode==fe.Fixed?h:1));break;case He:u.push(Ce(d,new ue(d.readInt(!0),d.readInt(!0),rt),it.spacingMode==pe.Length||it.spacingMode==pe.Fixed?h:1));break;case Ge:let a=new me(d.readInt(!0),d.readInt(!0),rt),r=d.readFloat(),i=d.readFloat(),n=d.readFloat(),o=d.readFloat();for(let t=0,e=0,s=a.getFrameCount()-1;a.setFrame(t,r,i,n,o),t!=s;t++){var nt=d.readFloat(),ot=d.readFloat(),ht=d.readFloat(),lt=d.readFloat();switch(d.readByte()){case $e:a.setStepped(t);break;case Je:Ye(d,a,e++,t,0,r,nt,i,ot,1),Ye(d,a,e++,t,1,r,nt,n,ht,1),Ye(d,a,e++,t,2,r,nt,o,lt,1)}r=nt,i=ot,n=ht,o=lt}u.push(a)}}for(let t=0,e=d.readInt(!0);t<e;t++){let s=a.skins[d.readInt(!0)];for(let t=0,e=d.readInt(!0);t<e;t++){var ct=d.readInt(!0);for(let t=0,e=d.readInt(!0);t<e;t++){var dt=d.readStringRef(),ut=s.getAttachment(ct,dt),mt=ut.bones,ft=ut.vertices,pt=mt?ft.length/3*2:ft.length,gt=d.readInt(!0),vt=gt-1,dt=d.readInt(!0);let a=new ne(gt,dt,ct,ut),r=d.readFloat();for(let t=0,e=0;;t++){let s;var xt=d.readInt(!0);if(0==xt)s=mt?Ut.newFloatArray(pt):ft;else{s=Ut.newFloatArray(pt);var bt=d.readInt(!0);if(xt+=bt,1==h)for(let t=bt;t<xt;t++)s[t]=d.readFloat();else for(let t=bt;t<xt;t++)s[t]=d.readFloat()*h;if(!mt)for(let t=0,e=s.length;t<e;t++)s[t]+=ft[t]}if(a.setFrame(t,r,s),t==vt)break;var wt=d.readFloat();switch(d.readByte()){case $e:a.setStepped(t);break;case Je:Ye(d,a,e++,t,0,r,wt,0,1,1)}r=wt}u.push(a)}}}var e=d.readInt(!0);if(0<e){let i=new he(e);var yt=a.slots.length;for(let t=0;t<e;t++){var At=d.readFloat(),kt=d.readInt(!0);let e=Ut.newArray(yt,0);for(let t=yt-1;0<=t;t--)e[t]=-1;let s=Ut.newArray(yt-kt,0),a=0,r=0;for(let t=0;t<kt;t++){for(var St=d.readInt(!0);a!=St;)s[r++]=a++;e[a+d.readInt(!0)]=a++}for(;a<yt;)s[r++]=a++;for(let t=yt-1;0<=t;t--)-1==e[t]&&(e[t]=s[--r]);i.setFrame(t,At,e)}u.push(i)}var It=d.readInt(!0);if(0<It){let s=new oe(It);for(let e=0;e<It;e++){var Ct=d.readFloat(),Tt=a.events[d.readInt(!0)];let t=new ge(Ct,Tt);t.intValue=d.readInt(!1),t.floatValue=d.readFloat(),t.stringValue=d.readBoolean()?d.readString():Tt.stringValue,t.data.audioPath&&(t.volume=d.readFloat(),t.balance=d.readFloat()),s.setFrame(e,t)}u.push(s)}let Yt=0;for(let t=0,e=u.length;t<e;t++)Yt=Math.max(Yt,u[t].getDuration());return new Wt(t,u,Yt)}},ke=class{constructor(t,e=new Array,s=0,a=new DataView(t.buffer)){this.strings=e,this.index=s,this.buffer=a}readByte(){return this.buffer.getInt8(this.index++)}readUnsignedByte(){return this.buffer.getUint8(this.index++)}readShort(){var t=this.buffer.getInt16(this.index);return this.index+=2,t}readInt32(){var t=this.buffer.getInt32(this.index);return this.index+=4,t}readInt(t){var e=this.readByte();let s=127&e;return 0!=(128&e)&&(e=this.readByte(),s|=(127&e)<<7,0!=(128&e)&&(e=this.readByte(),s|=(127&e)<<14,0!=(128&e)&&(e=this.readByte(),s|=(127&e)<<21,0!=(128&e)&&(e=this.readByte(),s|=(127&e)<<28)))),t?s:s>>>1^-(1&s)}readStringRef(){var t=this.readInt(!0);return 0==t?null:this.strings[t-1]}readString(){var e=this.readInt(!0);switch(e){case 0:return null;case 1:return""}e--;let s="";for(let t=0;t<e;){var a=this.readByte();switch(a>>4){case 12:case 13:s+=String.fromCharCode((31&a)<<6|63&this.readByte()),t+=2;break;case 14:s+=String.fromCharCode((15&a)<<12|(63&this.readByte())<<6|63&this.readByte()),t+=3;break;default:s+=String.fromCharCode(a),t++}}return s}readFloat(){var t=this.buffer.getFloat32(this.index);return this.index+=4,t}readBoolean(){return 0!=this.readByte()}},Se=class{constructor(t,e,s,a,r){this.mesh=t,this.skin=e,this.slotIndex=s,this.parent=a,this.inheritDeform=r}},Ie=class{constructor(t=null,e=null){this.bones=t,this.vertices=e}};function Ce(a,r,i){let n=a.readFloat(),o=a.readFloat()*i;for(let t=0,e=0,s=r.getFrameCount()-1;r.setFrame(t,n,o),t!=s;t++){var h=a.readFloat(),l=a.readFloat()*i;switch(a.readByte()){case $e:r.setStepped(t);break;case Je:Ye(a,r,e++,t,0,n,h,o,l,i)}n=h,o=l}return r}function Te(a,r,i){let n=a.readFloat(),o=a.readFloat()*i,h=a.readFloat()*i;for(let t=0,e=0,s=r.getFrameCount()-1;r.setFrame(t,n,o,h),t!=s;t++){var l=a.readFloat(),c=a.readFloat()*i,d=a.readFloat()*i;switch(a.readByte()){case $e:r.setStepped(t);break;case Je:Ye(a,r,e++,t,0,n,l,o,c,i),Ye(a,r,e++,t,1,n,l,h,d,i)}n=l,o=c,h=d}return r}function Ye(t,e,s,a,r,i,n,o,h,l){e.setBezier(s,a,r,i,o,t.readFloat(),t.readFloat()*l,t.readFloat(),t.readFloat()*l,n,h)}(B=we=we||{})[B.Region=0]="Region",B[B.BoundingBox=1]="BoundingBox",B[B.Mesh=2]="Mesh",B[B.LinkedMesh=3]="LinkedMesh",B[B.Path=4]="Path",B[B.Point=5]="Point",B[B.Clipping=6]="Clipping";var Me,Fe=0,Xe=1,Be=2,Re=3,Ee=4,_e=5,Pe=6,De=7,Ve=8,Ne=9,Le=0,Oe=1,Ue=2,We=3,qe=4,ze=5,je=0,He=1,Ge=2,$e=1,Je=2,Qe=class{constructor(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new d(()=>Ut.newFloatArray(16))}update(t,e){if(!t)throw new Error("skeleton cannot be null.");let a=this.boundingBoxes,r=this.polygons,i=this.polygonPool;var n=t.slots,s=n.length;a.length=0,i.freeAll(r);for(let t=r.length=0;t<s;t++){let s=n[t];if(s.bone.active){var o=s.getAttachment();if(o instanceof ht){let t=o;a.push(t);let e=i.obtain();e.length!=t.worldVerticesLength&&(e=Ut.newFloatArray(t.worldVerticesLength)),r.push(e),t.computeWorldVertices(s,0,t.worldVerticesLength,e,0,2)}}}e?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)}aabbCompute(){let s=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,i=Number.NEGATIVE_INFINITY;var n=this.polygons;for(let t=0,e=n.length;t<e;t++){var o=n[t],h=o;for(let t=0,e=o.length;t<e;t+=2){var l=h[t],c=h[t+1];s=Math.min(s,l),a=Math.min(a,c),r=Math.max(r,l),i=Math.max(i,c)}}this.minX=s,this.minY=a,this.maxX=r,this.maxY=i}aabbContainsPoint(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY}aabbIntersectsSegment(t,e,s,a){var r=this.minX,i=this.minY,n=this.maxX,o=this.maxY;if(t<=r&&s<=r||e<=i&&a<=i||n<=t&&n<=s||o<=e&&o<=a)return!1;s=(a-e)/(s-t);let h=s*(r-t)+e;if(h>i&&h<o)return!0;if(h=s*(n-t)+e,h>i&&h<o)return!0;let l=(i-e)/s+t;return l>r&&l<n||(l=(o-e)/s+t,l>r&&l<n)}aabbIntersectsSkeleton(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY}containsPoint(s,a){var r=this.polygons;for(let t=0,e=r.length;t<e;t++)if(this.containsPointPolygon(r[t],s,a))return this.boundingBoxes[t];return null}containsPointPolygon(t,e,s){var a=t,r=t.length;let i=r-2,n=!1;for(let t=0;t<r;t+=2){var o,h=a[t+1],l=a[i+1];!(h<s&&s<=l||l<s&&s<=h)||(o=a[t])+(s-h)/(l-h)*(a[i]-o)<e&&(n=!n),i=t}return n}intersectsSegment(s,a,r,i){var n=this.polygons;for(let t=0,e=n.length;t<e;t++)if(this.intersectsSegmentPolygon(n[t],s,a,r,i))return this.boundingBoxes[t];return null}intersectsSegmentPolygon(t,e,s,a,r){var i=t,n=t.length,o=e-a,h=s-r,l=e*r-s*a;let c=i[n-2],d=i[n-1];for(let t=0;t<n;t+=2){var u=i[t],m=i[t+1],f=c*m-d*u,p=c-u,g=d-m,v=o*g-h*p,p=(l*p-o*f)/v;if((p>=c&&p<=u||u<=p&&p<=c)&&(e<=p&&p<=a||a<=p&&p<=e)){v=(l*g-h*f)/v;if((v>=d&&v<=m||m<=v&&v<=d)&&(s<=v&&v<=r||r<=v&&v<=s))return!0}c=u,d=m}return!1}getPolygon(t){if(!t)throw new Error("boundingBox cannot be null.");t=this.boundingBoxes.indexOf(t);return-1==t?null:this.polygons[t]}getWidth(){return this.maxX-this.minX}getHeight(){return this.maxY-this.minY}},Ke=class{constructor(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new d(()=>new Array),this.polygonIndicesPool=new d(()=>new Array)}triangulate(t){var a=t;let r=t.length>>1,i=this.indicesArray;for(let t=i.length=0;t<r;t++)i[t]=t;let n=this.isConcaveArray;for(let t=n.length=0,e=r;t<e;++t)n[t]=Ke.isConcave(t,r,a,i);let o=this.triangles;for(o.length=0;3<r;){let e=r-1,t=0,s=1;for(;;){t:if(!n[t]){var h=i[e]<<1,l=i[t]<<1,c=i[s]<<1,d=a[h],u=a[1+h],m=a[l],f=a[1+l],p=a[c],g=a[1+c];for(let t=(s+1)%r;t!=e;t=(t+1)%r)if(n[t]){var v=i[t]<<1,x=a[v],v=a[1+v];if(Ke.positiveArea(p,g,d,u,x,v)&&Ke.positiveArea(d,u,m,f,x,v)&&Ke.positiveArea(m,f,p,g,x,v))break t}break}if(0==s){for(;n[t]&&(t--,0<t););break}e=t,t=s,s=(s+1)%r}o.push(i[(r+t-1)%r]),o.push(i[t]),o.push(i[(t+1)%r]),i.splice(t,1),n.splice(t,1),r--;var b=(r+t-1)%r,w=t==r?0:t;n[b]=Ke.isConcave(b,r,a,i),n[w]=Ke.isConcave(w,r,a,i)}return 3==r&&(o.push(i[2]),o.push(i[0]),o.push(i[1])),o}decompose(t,s){var a=t;let o=this.convexPolygons;this.polygonPool.freeAll(o),o.length=0;let h=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(h),h.length=0;let l=this.polygonIndicesPool.obtain();l.length=0;let c=this.polygonPool.obtain(),r=-1,i=c.length=0;for(let e=0,t=s.length;e<t;e+=3){var n,d,u=s[e]<<1,m=s[e+1]<<1,f=s[e+2]<<1,p=a[u],g=a[1+u],v=a[m],x=a[1+m],b=a[f],w=a[1+f];let t=!1;r==u&&(d=c.length-4,n=Ke.winding(c[d],c[1+d],c[2+d],c[3+d],b,w),d=Ke.winding(b,w,c[0],c[1],c[2],c[3]),n==i&&d==i&&(c.push(b),c.push(w),l.push(f),t=!0)),t||(0<c.length?(o.push(c),h.push(l)):(this.polygonPool.free(c),this.polygonIndicesPool.free(l)),c=this.polygonPool.obtain(),c.length=0,c.push(p),c.push(g),c.push(v),c.push(x),c.push(b),c.push(w),l=this.polygonIndicesPool.obtain(),l.length=0,l.push(u),l.push(m),l.push(f),i=Ke.winding(p,g,v,x,b,w),r=u)}0<c.length&&(o.push(c),h.push(l));for(let t=0,e=o.length;t<e;t++)if(l=h[t],0!=l.length){var y=l[0],A=l[l.length-1];c=o[t];var k=c.length-4;let a=c[k],r=c[1+k],i=c[2+k],n=c[3+k];var S=c[0],I=c[1],C=c[2],T=c[3],Y=Ke.winding(a,r,i,n,S,I);for(let s=0;s<e;s++)if(s!=t){let e=h[s];if(3==e.length){var M=e[0],F=e[1],X=e[2];let t=o[s];var B=t[t.length-2],R=t[t.length-1];M==y&&F==A&&(M=Ke.winding(a,r,i,n,B,R),F=Ke.winding(B,R,S,I,C,T),M==Y&&F==Y&&(t.length=0,e.length=0,c.push(B),c.push(R),l.push(X),a=i,r=n,i=B,n=R,s=0))}}}for(let t=o.length-1;0<=t;t--)c=o[t],0==c.length&&(o.splice(t,1),this.polygonPool.free(c),l=h[t],h.splice(t,1),this.polygonIndicesPool.free(l));return o}static isConcave(t,e,s,a){var r=a[(e+t-1)%e]<<1,i=a[t]<<1,e=a[(t+1)%e]<<1;return!this.positiveArea(s[r],s[1+r],s[i],s[1+i],s[e],s[1+e])}static positiveArea(t,e,s,a,r,i){return 0<=t*(i-a)+s*(e-i)+r*(a-e)}static winding(t,e,s,a,r,i){s-=t,a-=e;return 0<=r*a-i*s+s*e-t*a?1:-1}},Ze=class{constructor(){this.triangulator=new Ke,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array}clipStart(t,e){if(this.clipAttachment)return 0;var s=(this.clipAttachment=e).worldVerticesLength,a=Ut.setArraySize(this.clippingPolygon,s);e.computeWorldVertices(t,0,s,a,0,2);a=this.clippingPolygon;Ze.makeClockwise(a);var r=this.clippingPolygons=this.triangulator.decompose(a,this.triangulator.triangulate(a));for(let e=0,t=r.length;e<t;e++){let t=r[e];Ze.makeClockwise(t),t.push(t[0]),t.push(t[1])}return r.length}clipEndWithSlot(t){this.clipAttachment&&this.clipAttachment.endSlot==t.data&&this.clipEnd()}clipEnd(){this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)}isClipping(){return null!=this.clipAttachment}clipTriangles(e,t,s,a,r,i,n,o){let h=this.clipOutput,l=this.clippedVertices,c=this.clippedTriangles;var d=this.clippingPolygons,u=this.clippingPolygons.length,m=o?12:8;let f=0;l.length=0;t:for(let t=c.length=0;t<a;t+=3){var p=s[t]<<1,g=e[p],v=e[1+p],x=r[p],b=r[1+p],w=e[p=s[t+1]<<1],y=e[1+p],A=r[p],k=r[1+p],S=e[p=s[t+2]<<1],I=e[1+p],C=r[p],T=r[1+p];for(let t=0;t<u;t++){let a=l.length;if(!this.clip(g,v,w,y,S,I,d[t],h)){let t=Ut.setArraySize(l,a+3*m);t[a]=g,t[a+1]=v,t[a+2]=i.r,t[a+3]=i.g,t[a+4]=i.b,t[a+5]=i.a,o?(t[a+6]=x,t[a+7]=b,t[a+8]=n.r,t[a+9]=n.g,t[a+10]=n.b,t[a+11]=n.a,t[a+12]=w,t[a+13]=y,t[a+14]=i.r,t[a+15]=i.g,t[a+16]=i.b,t[a+17]=i.a,t[a+18]=A,t[a+19]=k,t[a+20]=n.r,t[a+21]=n.g,t[a+22]=n.b,t[a+23]=n.a,t[a+24]=S,t[a+25]=I,t[a+26]=i.r,t[a+27]=i.g,t[a+28]=i.b,t[a+29]=i.a,t[a+30]=C,t[a+31]=T,t[a+32]=n.r,t[a+33]=n.g,t[a+34]=n.b,t[a+35]=n.a):(t[a+6]=x,t[a+7]=b,t[a+8]=w,t[a+9]=y,t[a+10]=i.r,t[a+11]=i.g,t[a+12]=i.b,t[a+13]=i.a,t[a+14]=A,t[a+15]=k,t[a+16]=S,t[a+17]=I,t[a+18]=i.r,t[a+19]=i.g,t[a+20]=i.b,t[a+21]=i.a,t[a+22]=C,t[a+23]=T),a=c.length;let e=Ut.setArraySize(c,a+3);e[a]=f,e[a+1]=f+1,e[a+2]=f+2,f+=3;continue t}var Y=h.length;if(0!=Y){var M=y-I,F=S-w,X=g-S,B=I-v,R=1/(M*X+F*(v-I)),E=Y>>1,_=this.clipOutput;let e=Ut.setArraySize(l,a+E*m);for(let t=0;t<Y;t+=2){var P=_[t],D=_[t+1];e[a]=P,e[a+1]=D,e[a+2]=i.r,e[a+3]=i.g,e[a+4]=i.b,e[a+5]=i.a;var V=P-S,P=D-I,D=(M*V+F*P)*R,V=(B*V+X*P)*R,P=1-D-V;e[a+6]=x*D+A*V+C*P,e[a+7]=b*D+k*V+T*P,o&&(e[a+8]=n.r,e[a+9]=n.g,e[a+10]=n.b,e[a+11]=n.a),a+=m}a=c.length;let s=Ut.setArraySize(c,a+3*(E-2));E--;for(let t=1;t<E;t++)s[a]=f,s[a+1]=f+t,s[a+2]=f+t+1,a+=3;f+=1+E}}}}clip(t,e,s,a,r,i,n,o){let h=o,l=!1,c=null;2<=n.length%4?(c=o,o=this.scratch):c=this.scratch,c.length=0,c.push(t),c.push(e),c.push(s),c.push(a),c.push(r),c.push(i),c.push(t),c.push(e),o.length=0;var d=n,u=n.length-4;for(let t=0;;t+=2){var m=d[t],f=d[t+1],p=d[t+2],g=d[t+3],v=m-p,x=f-g,b=c,w=c.length-2,y=o.length;for(let t=0;t<w;t+=2){var A=b[t],k=b[t+1],S=b[t+2],I=b[t+3],C=0<v*(I-g)-x*(S-p);if(0<v*(k-g)-x*(A-p)){if(C){o.push(S),o.push(I);continue}var T,Y=I-k,M=S-A,F=Y*(p-m)-M*(g-f);1e-6<Math.abs(F)?(o.push(m+(p-m)*(T=(M*(f-k)-Y*(m-A))/F)),o.push(f+(g-f)*T)):(o.push(m),o.push(f))}else C&&(C=(F=I-k)*(p-m)-(T=S-A)*(g-f),1e-6<Math.abs(C)?(o.push(m+(p-m)*(C=(T*(f-k)-F*(m-A))/C)),o.push(f+(g-f)*C)):(o.push(m),o.push(f)),o.push(S),o.push(I));l=!0}if(y==o.length)return!(h.length=0);if(o.push(o[0]),o.push(o[1]),t==u)break;y=o;(o=c).length=0,c=y}if(h!=o)for(let t=h.length=0,e=o.length-2;t<e;t++)h[t]=o[t];else h.length=h.length-2;return l}static makeClockwise(a){let r=a;a=a.length;let s=r[a-2]*r[1]-r[0]*r[a-1],i,n,o,h;for(let t=0,e=a-3;t<e;t+=2)i=r[t],n=r[t+1],o=r[t+2],h=r[t+3],s+=i*h-o*n;if(!(s<0))for(let t=0,e=a-2,s=a>>1;t<s;t+=2){var l=r[t],c=r[t+1],d=e-t;r[t]=r[d],r[t+1]=r[1+d],r[d]=l,r[1+d]=c}}},ts=class{constructor(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}readSkeletonData(t){var a=this.scale;let r=new Lt;var i="string"==typeof t?JSON.parse(t):t,t=i.skeleton;if(t&&(r.hash=t.hash,r.version=t.spine,r.x=t.x,r.y=t.y,r.width=t.width,r.height=t.height,r.fps=t.fps,r.imagesPath=t.images),i.bones)for(let s=0;s<i.bones.length;s++){var n=i.bones[s];let t=null;var o=is(n,"parent",null);o&&(t=r.findBone(o));let e=new St(r.bones.length,n.name,t);e.length=is(n,"length",0)*a,e.x=is(n,"x",0)*a,e.y=is(n,"y",0)*a,e.rotation=is(n,"rotation",0),e.scaleX=is(n,"scaleX",1),e.scaleY=is(n,"scaleY",1),e.shearX=is(n,"shearX",0),e.shearY=is(n,"shearY",0),e.transformMode=Ut.enumValue(At,is(n,"transform","Normal")),e.skinRequired=is(n,"skin",!1);n=is(n,"color",null);n&&e.color.setFromString(n),r.bones.push(e)}if(i.slots)for(let e=0;e<i.slots.length;e++){var s=i.slots[e],h=r.findBone(s.bone);let t=new be(r.slots.length,s.name,h);h=is(s,"color",null);h&&t.color.setFromString(h);h=is(s,"dark",null);h&&(t.darkColor=Ot.fromString(h)),t.attachmentName=is(s,"attachment",null),t.blendMode=Ut.enumValue(Pt,is(s,"blend","normal")),r.slots.push(t)}if(i.ik)for(let t=0;t<i.ik.length;t++){var l=i.ik[t];let e=new Bt(l.name);e.order=is(l,"order",0),e.skinRequired=is(l,"skin",!1);for(let t=0;t<l.bones.length;t++)e.bones.push(r.findBone(l.bones[t]));e.target=r.findBone(l.target),e.mix=is(l,"mix",1),e.softness=is(l,"softness",0)*a,e.bendDirection=is(l,"bendPositive",!0)?1:-1,e.compress=is(l,"compress",!1),e.stretch=is(l,"stretch",!1),e.uniform=is(l,"uniform",!1),r.ikConstraints.push(e)}if(i.transform)for(let t=0;t<i.transform.length;t++){var c=i.transform[t];let e=new ye(c.name);e.order=is(c,"order",0),e.skinRequired=is(c,"skin",!1);for(let t=0;t<c.bones.length;t++)e.bones.push(r.findBone(c.bones[t]));var d=c.target;e.target=r.findBone(d),e.local=is(c,"local",!1),e.relative=is(c,"relative",!1),e.offsetRotation=is(c,"rotation",0),e.offsetX=is(c,"x",0)*a,e.offsetY=is(c,"y",0)*a,e.offsetScaleX=is(c,"scaleX",0),e.offsetScaleY=is(c,"scaleY",0),e.offsetShearY=is(c,"shearY",0),e.mixRotate=is(c,"mixRotate",1),e.mixX=is(c,"mixX",1),e.mixY=is(c,"mixY",e.mixX),e.mixScaleX=is(c,"mixScaleX",1),e.mixScaleY=is(c,"mixScaleY",e.mixScaleX),e.mixShearY=is(c,"mixShearY",1),r.transformConstraints.push(e)}if(i.path)for(let t=0;t<i.path.length;t++){var u=i.path[t];let e=new Rt(u.name);e.order=is(u,"order",0),e.skinRequired=is(u,"skin",!1);for(let t=0;t<u.bones.length;t++)e.bones.push(r.findBone(u.bones[t]));var m=u.target;e.target=r.findSlot(m),e.positionMode=Ut.enumValue(fe,is(u,"positionMode","Percent")),e.spacingMode=Ut.enumValue(pe,is(u,"spacingMode","Length")),e.rotateMode=Ut.enumValue(It,is(u,"rotateMode","Tangent")),e.offsetRotation=is(u,"rotation",0),e.position=is(u,"position",0),e.positionMode==fe.Fixed&&(e.position*=a),e.spacing=is(u,"spacing",0),e.spacingMode!=pe.Length&&e.spacingMode!=pe.Fixed||(e.spacing*=a),e.mixRotate=is(u,"mixRotate",1),e.mixX=is(u,"mixX",1),e.mixY=is(u,"mixY",e.mixX),r.pathConstraints.push(e)}if(i.skins)for(let t=0;t<i.skins.length;t++){var f,p=i.skins[t];let e=new xe(p.name);if(p.bones)for(let t=0;t<p.bones.length;t++)e.bones.push(r.findBone(p.bones[t]));if(p.ik)for(let t=0;t<p.ik.length;t++)e.constraints.push(r.findIkConstraint(p.ik[t]));if(p.transform)for(let t=0;t<p.transform.length;t++)e.constraints.push(r.findTransformConstraint(p.transform[t]));if(p.path)for(let t=0;t<p.path.length;t++)e.constraints.push(r.findPathConstraint(p.path[t]));for(f in p.attachments){var g,v=r.findSlot(f),x=p.attachments[f];for(g in x){var b=this.readAttachment(x[g],e,v.index,g,r);b&&e.setAttachment(v.index,g,b)}}r.skins.push(e),"default"==e.name&&(r.defaultSkin=e)}for(let s=0,t=this.linkedMeshes.length;s<t;s++){let t=this.linkedMeshes[s],e=t.skin?r.findSkin(t.skin):r.defaultSkin;var w=e.getAttachment(t.slotIndex,t.parent);t.mesh.deformAttachment=t.inheritDeform?w:t.mesh,t.mesh.setParentMesh(w),t.mesh.updateUVs()}if(this.linkedMeshes.length=0,i.events)for(var e in i.events){var y=i.events[e];let t=new Ft(e);t.intValue=is(y,"int",0),t.floatValue=is(y,"float",0),t.stringValue=is(y,"string",""),t.audioPath=is(y,"audio",null),t.audioPath&&(t.volume=is(y,"volume",1),t.balance=is(y,"balance",0)),r.events.push(t)}if(i.animations)for(var A in i.animations){var k=i.animations[A];this.readAnimation(k,A,r)}return r}readAttachment(s,a,e,r,i){var n=this.scale;switch(r=is(s,"name",r),is(s,"type","region")){case"region":{var o=is(s,"path",r);let t=this.attachmentLoader.newRegionAttachment(a,r,o);if(!t)return null;t.path=o,t.x=is(s,"x",0)*n,t.y=is(s,"y",0)*n,t.scaleX=is(s,"scaleX",1),t.scaleY=is(s,"scaleY",1),t.rotation=is(s,"rotation",0),t.width=s.width*n,t.height=s.height*n;o=is(s,"color",null);return o&&t.color.setFromString(o),t.updateOffset(),t}case"boundingbox":{let t=this.attachmentLoader.newBoundingBoxAttachment(a,r);if(!t)return null;this.readVertices(s,t,s.vertexCount<<1);o=is(s,"color",null);return o&&t.color.setFromString(o),t}case"mesh":case"linkedmesh":{var h=is(s,"path",r);let t=this.attachmentLoader.newMeshAttachment(a,r,h);if(!t)return null;t.path=h;h=is(s,"color",null);h&&t.color.setFromString(h),t.width=is(s,"width",0)*n,t.height=is(s,"height",0)*n;h=is(s,"parent",null);if(h)return this.linkedMeshes.push(new es(t,is(s,"skin",null),e,h,is(s,"deform",!0))),t;h=s.uvs;return this.readVertices(s,t,h.length),t.triangles=s.triangles,t.regionUVs=h,t.updateUVs(),t.edges=is(s,"edges",null),t.hullLength=2*is(s,"hull",0),t}case"path":{let t=this.attachmentLoader.newPathAttachment(a,r);if(!t)return null;t.closed=is(s,"closed",!1),t.constantSpeed=is(s,"constantSpeed",!0);h=s.vertexCount;this.readVertices(s,t,h<<1);let e=Ut.newArray(h/3,0);for(let t=0;t<s.lengths.length;t++)e[t]=s.lengths[t]*n;t.lengths=e;h=is(s,"color",null);return h&&t.color.setFromString(h),t}case"point":{let t=this.attachmentLoader.newPointAttachment(a,r);if(!t)return null;t.x=is(s,"x",0)*n,t.y=is(s,"y",0)*n,t.rotation=is(s,"rotation",0);var l=is(s,"color",null);return l&&t.color.setFromString(l),t}case"clipping":{let t=this.attachmentLoader.newClippingAttachment(a,r);if(!t)return null;l=is(s,"end",null);l&&(t.endSlot=i.findSlot(l));l=s.vertexCount;this.readVertices(s,t,l<<1);l=is(s,"color",null);return l&&t.color.setFromString(l),t}}return null}readVertices(t,e,s){var r=this.scale;e.worldVerticesLength=s;var i=t.vertices;if(s!=i.length){let s=new Array,a=new Array;for(let t=0,e=i.length;t<e;){var n=i[t++];a.push(n);for(var o=t+4*n;t<o;t+=4)a.push(i[t]),s.push(i[t+1]*r),s.push(i[t+2]*r),s.push(i[t+3])}e.bones=a,e.vertices=Ut.toFloatArray(s)}else{let s=Ut.toFloatArray(i);if(1!=r)for(let t=0,e=i.length;t<e;t++)s[t]*=r;e.vertices=s}}readAnimation(i,t,c){var h=this.scale;let d=new Array;if(i.slots)for(var e in i.slots){var s,a=i.slots[e],o=c.findSlot(e).index;for(s in a){var l=a[s];if(l){var u=l.length;if("attachment"==s){let e=new ie(u,o);for(let t=0;t<u;t++){var r=l[t];e.setFrame(t,is(r,"time",0),r.name)}d.push(e)}else if("rgba"==s){let s=new te(u,u<<2,o),a=l[0],r=is(a,"time",0),i=Ot.fromString(a.color);for(let t=0,e=0;;t++){s.setFrame(t,r,i.r,i.g,i.b,i.a);var n=l[t+1];if(!n){s.shrink(e);break}var m=is(n,"time",0),f=Ot.fromString(n.color),p=a.curve;p&&(e=rs(p,s,e,t,0,r,m,i.r,f.r,1),e=rs(p,s,e,t,1,r,m,i.g,f.g,1),e=rs(p,s,e,t,2,r,m,i.b,f.b,1),e=rs(p,s,e,t,3,r,m,i.a,f.a,1)),r=m,i=f,a=n}d.push(s)}else if("rgb"==s){let s=new ee(u,3*u,o),a=l[0],r=is(a,"time",0),i=Ot.fromString(a.color);for(let t=0,e=0;;t++){s.setFrame(t,r,i.r,i.g,i.b);var g=l[t+1];if(!g){s.shrink(e);break}var v=is(g,"time",0),x=Ot.fromString(g.color),b=a.curve;b&&(e=rs(b,s,e,t,0,r,v,i.r,x.r,1),e=rs(b,s,e,t,1,r,v,i.g,x.g,1),e=rs(b,s,e,t,2,r,v,i.b,x.b,1)),r=v,i=x,a=g}d.push(s)}else if("alpha"==s)d.push(ss(l,new se(u,u,o),0,1));else if("rgba2"==s){let s=new ae(u,7*u,o),a=l[0],r=is(a,"time",0),i=Ot.fromString(a.light),n=Ot.fromString(a.dark);for(let t=0,e=0;;t++){s.setFrame(t,r,i.r,i.g,i.b,i.a,n.r,n.g,n.b);var w=l[t+1];if(!w){s.shrink(e);break}var y=is(w,"time",0),A=Ot.fromString(w.light),k=Ot.fromString(w.dark),S=a.curve;S&&(e=rs(S,s,e,t,0,r,y,i.r,A.r,1),e=rs(S,s,e,t,1,r,y,i.g,A.g,1),e=rs(S,s,e,t,2,r,y,i.b,A.b,1),e=rs(S,s,e,t,3,r,y,i.a,A.a,1),e=rs(S,s,e,t,4,r,y,n.r,k.r,1),e=rs(S,s,e,t,5,r,y,n.g,k.g,1),e=rs(S,s,e,t,6,r,y,n.b,k.b,1)),r=y,i=A,n=k,a=w}d.push(s)}else if("rgb2"==s){let s=new re(u,6*u,o),a=l[0],r=is(a,"time",0),i=Ot.fromString(a.light),n=Ot.fromString(a.dark);for(let t=0,e=0;;t++){s.setFrame(t,r,i.r,i.g,i.b,n.r,n.g,n.b);var I=l[t+1];if(!I){s.shrink(e);break}var C=is(I,"time",0),T=Ot.fromString(I.light),Y=Ot.fromString(I.dark),M=a.curve;M&&(e=rs(M,s,e,t,0,r,C,i.r,T.r,1),e=rs(M,s,e,t,1,r,C,i.g,T.g,1),e=rs(M,s,e,t,2,r,C,i.b,T.b,1),e=rs(M,s,e,t,3,r,C,n.r,Y.r,1),e=rs(M,s,e,t,4,r,C,n.g,Y.g,1),e=rs(M,s,e,t,5,r,C,n.b,Y.b,1)),r=C,i=T,n=Y,a=I}d.push(s)}}}}if(i.bones)for(var F in i.bones){var X,B=i.bones[F],R=c.findBone(F).index;for(X in B){var E,_,P,D,V=B[X],N=V.length;0!=N&&("rotate"===X?d.push(ss(V,new qt(N,N,R),0,1)):"translate"===X?(E=new zt(N,N<<1,R),d.push(as(V,E,"x","y",0,h))):"translatex"===X?(E=new jt(N,N,R),d.push(ss(V,E,0,h))):"translatey"===X?(_=new Ht(N,N,R),d.push(ss(V,_,0,h))):"scale"===X?(_=new Gt(N,N<<1,R),d.push(as(V,_,"x","y",1,1))):"scalex"===X?(P=new $t(N,N,R),d.push(ss(V,P,1,1))):"scaley"===X?(P=new Jt(N,N,R),d.push(ss(V,P,1,1))):"shear"===X?(D=new Qt(N,N<<1,R),d.push(as(V,D,"x","y",0,1))):"shearx"===X?(D=new Kt(N,N,R),d.push(ss(V,D,0,1))):"sheary"===X&&(N=new Zt(N,N,R),d.push(ss(V,N,0,1))))}}if(i.ik)for(var L in i.ik){var O=i.ik[L];let n=O[0];if(n){L=c.findIkConstraint(L),L=c.ikConstraints.indexOf(L);let s=new le(O.length,O.length<<1,L),a=is(n,"time",0),r=is(n,"mix",1),i=is(n,"softness",0)*h;for(let t=0,e=0;;t++){s.setFrame(t,a,r,i,is(n,"bendPositive",!0)?1:-1,is(n,"compress",!1),is(n,"stretch",!1));var U=O[t+1];if(!U){s.shrink(e);break}var W=is(U,"time",0),q=is(U,"mix",1),z=is(U,"softness",0)*h,j=n.curve;j&&(e=rs(j,s,e,t,0,a,W,r,q,1),e=rs(j,s,e,t,1,a,W,i,z,h)),a=W,r=q,i=z,n=U}d.push(s)}}if(i.transform)for(var H in i.transform){var G=i.transform[H];let l=G[0];if(l){H=c.findTransformConstraint(H),H=c.transformConstraints.indexOf(H);let s=new ce(G.length,6*G.length,H),a=is(l,"time",0),r=is(l,"mixRotate",1),i=is(l,"mixX",1),n=is(l,"mixY",i),o=is(l,"mixScaleX",1),h=is(l,"mixScaleY",o);var $=is(l,"mixShearY",1);for(let t=0,e=0;;t++){s.setFrame(t,a,r,i,n,o,h,$);var J=G[t+1];if(!J){s.shrink(e);break}var Q=is(J,"time",0),K=is(J,"mixRotate",1),Z=is(J,"mixX",1),tt=is(J,"mixY",Z),et=is(J,"mixScaleX",1),st=is(J,"mixScaleY",et),at=is(J,"mixShearY",1),rt=l.curve;rt&&(e=rs(rt,s,e,t,0,a,Q,r,K,1),e=rs(rt,s,e,t,1,a,Q,i,Z,1),e=rs(rt,s,e,t,2,a,Q,n,tt,1),e=rs(rt,s,e,t,3,a,Q,o,et,1),e=rs(rt,s,e,t,4,a,Q,h,st,1),e=rs(rt,s,e,t,5,a,Q,$,at,1)),a=Q,r=K,i=Z,n=tt,o=et,h=st,o=et,l=J}d.push(s)}}if(i.path)for(var it in i.path){var nt,ot=i.path[it],ht=c.findPathConstraint(it),lt=c.pathConstraints.indexOf(ht);for(nt in ot){var ct=ot[nt];let o=ct[0];if(o){var dt=ct.length;if("position"===nt){var ut=new de(dt,dt,lt);d.push(ss(ct,ut,0,ht.positionMode==fe.Fixed?h:1))}else if("spacing"===nt){ut=new ue(dt,dt,lt);d.push(ss(ct,ut,0,ht.spacingMode==pe.Length||ht.spacingMode==pe.Fixed?h:1))}else if("mix"===nt){let s=new me(dt,3*dt,lt),a=is(o,"time",0),r=is(o,"mixRotate",1),i=is(o,"mixX",1),n=is(o,"mixY",i);for(let t=0,e=0;;t++){s.setFrame(t,a,r,i,n);var mt=ct[t+1];if(!mt){s.shrink(e);break}var ft=is(mt,"time",0),pt=is(mt,"mixRotate",1),gt=is(mt,"mixX",1),vt=is(mt,"mixY",gt),xt=o.curve;xt&&(e=rs(xt,s,e,t,0,a,ft,r,pt,1),e=rs(xt,s,e,t,1,a,ft,i,gt,1),e=rs(xt,s,e,t,2,a,ft,n,vt,1)),a=ft,r=pt,i=gt,n=vt,o=mt}d.push(s)}}}}if(i.deform)for(var bt in i.deform){var wt,yt=i.deform[bt];let t=c.findSkin(bt);for(wt in yt){var At,kt=yt[wt],St=c.findSlot(wt).index;for(At in kt){var It=kt[At];let i=It[0];if(i){var Ct=t.getAttachment(St,At),Tt=Ct.bones,Yt=Ct.vertices,Mt=Tt?Yt.length/3*2:Yt.length;let a=new ne(It.length,It.length,St,Ct),r=is(i,"time",0);for(let t=0,e=0;;t++){let s;var Ft=is(i,"vertices",null);if(Ft){s=Ut.newFloatArray(Mt);var Xt=is(i,"offset",0);if(Ut.arrayCopy(Ft,0,s,Xt,Ft.length),1!=h)for(let t=Xt,e=t+Ft.length;t<e;t++)s[t]*=h;if(!Tt)for(let t=0;t<Mt;t++)s[t]+=Yt[t]}else s=Tt?Ut.newFloatArray(Mt):Yt;a.setFrame(t,r,s);var Bt=It[t+1];if(!Bt){a.shrink(e);break}Xt=is(Bt,"time",0),Ft=i.curve;Ft&&(e=rs(Ft,a,e,t,0,r,Xt,0,1,1)),r=Xt,i=Bt}d.push(a)}}}}if(i.drawOrder){let e=new he(i.drawOrder.length);var Rt=c.slots.length;let s=0;for(let t=0;t<i.drawOrder.length;t++,s++){var Et=i.drawOrder[t];let r=null;var _t=is(Et,"offsets",null);if(_t){r=Ut.newArray(Rt,-1);let e=Ut.newArray(Rt-_t.length,0),s=0,a=0;for(let t=0;t<_t.length;t++){for(var Pt=_t[t],Dt=c.findSlot(Pt.slot).index;s!=Dt;)e[a++]=s++;r[s+Pt.offset]=s++}for(;s<Rt;)e[a++]=s++;for(let t=Rt-1;0<=t;t--)-1==r[t]&&(r[t]=e[--a])}e.setFrame(s,is(Et,"time",0),r)}d.push(e)}if(i.events){let s=new oe(i.events.length),a=0;for(let e=0;e<i.events.length;e++,a++){var Vt=i.events[e],Nt=c.findEvent(Vt.name);let t=new ge(Ut.toSinglePrecision(is(Vt,"time",0)),Nt);t.intValue=is(Vt,"int",Nt.intValue),t.floatValue=is(Vt,"float",Nt.floatValue),t.stringValue=is(Vt,"string",Nt.stringValue),t.data.audioPath&&(t.volume=is(Vt,"volume",1),t.balance=is(Vt,"balance",0)),s.setFrame(a,t)}d.push(s)}let Lt=0;for(let t=0,e=d.length;t<e;t++)Lt=Math.max(Lt,d[t].getDuration());c.animations.push(new Wt(t,d,Lt))}},es=class{constructor(t,e,s,a,r){this.mesh=t,this.skin=e,this.slotIndex=s,this.parent=a,this.inheritDeform=r}};function ss(e,s,a,r){let i=e[0],n=is(i,"time",0),o=is(i,"value",a)*r,h=0;for(let t=0;;t++){s.setFrame(t,n,o);var l=e[t+1];if(!l)return s.shrink(h),s;var c=is(l,"time",0),d=is(l,"value",a)*r;i.curve&&(h=rs(i.curve,s,h,t,0,n,c,o,d,r)),n=c,o=d,i=l}}function as(e,s,a,r,i,n){let o=e[0],h=is(o,"time",0),l=is(o,a,i)*n,c=is(o,r,i)*n,d=0;for(let t=0;;t++){s.setFrame(t,h,l,c);var u=e[t+1];if(!u)return s.shrink(d),s;var m=is(u,"time",0),f=is(u,a,i)*n,p=is(u,r,i)*n,g=o.curve;g&&(d=rs(g,s,d,t,0,h,m,l,f,n),d=rs(g,s,d,t,1,h,m,c,p,n)),h=m,l=f,c=p,o=u}}function rs(t,e,s,a,r,i,n,o,h,l){if("stepped"==t)return e.setStepped(a),s;var c=r<<2,d=t[c],u=t[1+c]*l,m=t[2+c],l=t[3+c]*l;return e.setBezier(s,a,r,i,o,d,u,m,l,n,h),s+1}function is(t,e,s){return void 0!==t[e]?t[e]:s}void 0===Math.fround&&(Math.fround=(Me=new Float32Array(1),function(t){return Me[0]=t,Me[0]}));var ns=class{constructor(t,e){this.jitterX=0,this.jitterY=0,this.jitterX=t,this.jitterY=e}begin(t){}transform(t,e,s,a){t.x+=G.randomTriangular(-this.jitterX,this.jitterY),t.y+=G.randomTriangular(-this.jitterX,this.jitterY)}end(){}},os=class{constructor(t){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=t}begin(t){this.worldX=t.x+this.centerX,this.worldY=t.y+this.centerY}transform(t,e,s,a){var r=this.angle*G.degreesToRadians,i=t.x-this.worldX,n=t.y-this.worldY,o=Math.sqrt(i*i+n*n);o<this.radius&&(r=os.interpolation.apply(0,r,(this.radius-o)/this.radius),o=Math.cos(r),r=Math.sin(r),t.x=o*i-r*n+this.worldX,t.y=r*i+o*n+this.worldY)}end(){}},hs=os;return hs.interpolation=new h(2),t})();pc.extend(pc,function(){function r(t,e,s){var a=s&&s.lexicographical,s=s&&s.zeroExtend,r=t.split("."),i=e.split(".");function n(t){return(a?/^\d+[A-Za-z]*$/:/^\d+$/).test(t)}if(!r.every(n)||!i.every(n))return NaN;if(s){for(;r.length<i.length;)r.push("0");for(;i.length<r.length;)i.push("0")}a||(r=r.map(Number),i=i.map(Number));for(var o=0;o<r.length;++o){if(i.length==o)return 1;if(r[o]!=i[o])return r[o]>i[o]?1:-1}return r.length!=i.length?-1:0}function i(t){this._image={width:t.width,height:t.height},this.pcTexture=t}var o=0,h=1,l=2,s={9728:pc.FILTER_NEAREST,9729:pc.FILTER_LINEAR,9984:pc.FILTER_NEAREST_MIPMAP_NEAREST,9985:pc.FILTER_LINEAR_MIPMAP_NEAREST,9986:pc.FILTER_NEAREST_MIPMAP_LINEAR,9987:pc.FILTER_LINEAR_MIPMAP_LINEAR},a={33648:pc.ADDRESS_MIRRORED_REPEAT,33071:pc.ADDRESS_CLAMP_TO_EDGE,10487:pc.ADDRESS_REPEAT},c=[0,1,2,2,3,0];i.prototype={setFilters:function(t,e){this.pcTexture.minFilter=s[t],this.pcTexture.magFilter=s[e]},setWraps:function(t,e){this.pcTexture.addressU=a[t],this.pcTexture.addressV=a[e]},getImage:function(){return this._image}};function t(t,e,s,a){this._app=t,this._position=new pc.Vec3,e=new spine.TextureAtlas(e,function(t){return new i(a[t])}),(e=new spine.SkeletonJson(new spine.AtlasAttachmentLoader(e))).scale*=.01,s=e.readSkeletonData(s),this.skeletonVersion=s.version,this._spine_3_6_0=r(this.skeletonVersion,"3.6.0")<=0,this._spine_3_7_99=r(this.skeletonVersion,"3.7.99")<=0,this.skeleton=new spine.Skeleton(s),this.skeleton.updateWorldTransform(),this.stateData=new spine.AnimationStateData(this.skeleton.data),this.states=[new spine.AnimationState(this.stateData)],this.clipper=new spine.SkeletonClipping,this._node=new pc.GraphNode,this._meshes=[],this._meshInstances=[],this._materials={},this._tint={},this._aabb=new pc.BoundingBox,this._aabbTempArray=[],this._aabbTempOffset=new pc.Vec2,this._aabbTempSize=new pc.Vec2,this._renderCounts={vertexCount:0,indexCount:0},this._vertexFormat=null,this._vertexBuffer=null,this._indexBuffer=null,this._priority=0,this._timeScale=1,this._layers=[pc.LAYERID_UI],this.init(),this.autoUpdate=!0,this._hidden=!1}return t.prototype.destroy=function(){this.removeFromLayers();for(var t=0;t<this._meshInstances.length;t++)this._meshInstances[t].mesh.vertexBuffer=null,this._meshInstances[t].mesh.indexBuffer.length=0,this._meshInstances[t].material=null;this._vertexBuffer&&(this._vertexBuffer.destroy(),this._vertexBuffer=null),this._indexBuffer&&(this._indexBuffer.destroy(),this._indexBuffer=null),this._meshInstances=[],this.skeleton=null,this.stateData=null,this.state=null,this._materials={},this._node=null},t.prototype.hide=function(){if(!this._hidden){for(var t=0,e=this._meshInstances.length;t<e;t++)this._meshInstances[t].visible=!1;this._hidden=!0}},t.prototype.show=function(){if(this._hidden){for(var t=0,e=this._meshInstances.length;t<e;t++)this._meshInstances[t].visible=!0;this._hidden=!1}},t.prototype.init=function(){this._vertexFormat=new pc.VertexFormat(this._app.graphicsDevice,[{semantic:pc.SEMANTIC_POSITION,components:2,type:pc.TYPE_FLOAT32},{semantic:pc.SEMANTIC_NORMAL,components:4,type:pc.TYPE_UINT8,normalize:!0},{semantic:pc.SEMANTIC_TEXCOORD0,components:2,type:pc.TYPE_FLOAT32},{semantic:pc.SEMANTIC_COLOR,components:4,type:pc.TYPE_UINT8,normalize:!0}]);for(var t=this.skeleton.drawOrder,e=0,s=t.length;e<s;e++)this.initSlot(t[e])},t.prototype.initSlot=function(t){t.positions=[],t.uvs=[],t.indices=[],t.vertexColor={},t._active={name:"",type:o},this.initAttachment(t)},t.prototype.createMaterial=function(t){var e=new pc.StandardMaterial;return e.shadingModel=pc.SPECULAR_BLINN,e.diffuse=new pc.Color(1,1,1),e.emissiveMap=t,e.emissiveMapChannel="rgb",e.emissiveVertexColor=!0,e.emissiveVertexColorChannel="rgb",e.opacityMap=t,e.opacityMapChannel="a",e.opacityVertexColor=!0,e.opacityVertexColorChannel="a",e.depthWrite=!1,e.cull=pc.CULLFACE_NONE,e.blendType=pc.BLEND_PREMULTIPLIED,this._spine_3_6_0&&(t=["gl_FragColor.rgb *= vVertexColor.a;","gl_FragColor.a = dAlpha;"].join("\n"),e.chunks.outputAlphaPremulPS=t),e.update(),e},t.prototype.initAttachment=function(t){var e,s=t.attachment;s&&(t._active.name=s.name,s instanceof spine.RegionAttachment?t._active.type=l:s instanceof spine.MeshAttachment&&(t._active.type=h),s.region&&s.region.texture&&((e=s.region.texture.pcTexture)&&(e instanceof pc.StandardMaterial?(this._materials[e.name]=e,t.material=e.name):(s=null,e.name?s=e.name:e.getSource()instanceof Image&&(s=e.getSource().getAttribute("src")),s&&(void 0===this._materials[s]&&(e=this.createMaterial(e),this._materials[s]=e),t.material=s)))))},t.prototype.updateSlot=function(t,e){var s=t.attachment,a=s.name,r=s instanceof spine.RegionAttachment?l:s instanceof spine.MeshAttachment?h:o;t._active.name===a&&t._active.type==r||this.initAttachment(t),t.positions.length=0,s instanceof spine.RegionAttachment?s.computeWorldVertices(t.bone,t.positions,0,2):s instanceof spine.MeshAttachment&&s.computeWorldVertices(t,0,s.worldVerticesLength,t.positions,0,2);a=this._tint[a];t.vertexColor={r:Math.round(255*t.color.r*(a?a.r:1)),g:Math.round(255*t.color.g*(a?a.g:1)),b:Math.round(255*t.color.b*(a?a.b:1)),a:Math.round(255*t.color.a*(a?a.a:1))};a=s.triangles||c;if(e.isClipping()){e.clipTriangles(t.positions,0,a,a.length,s.uvs,spine.Color.WHITE,spine.Color.WHITE,!1),t.positions.length=0,t.uvs.length=0;for(var i=e.clippedVertices.length,n=0;n<i;n+=8)t.positions.push(e.clippedVertices[n],e.clippedVertices[n+1]),t.uvs.push(e.clippedVertices[n+6],1-e.clippedVertices[n+7]);t.indices=e.clippedTriangles.slice()}else{for(t.uvs.length=0,i=t.positions.length,n=0;n<i;n+=2)t.uvs.push(s.uvs[n],1-s.uvs[n+1]);t.indices=a}this._renderCounts.vertexCount+=t.positions.length/2,this._renderCounts.indexCount+=t.indices.length},t.prototype.updateSkeleton=function(t){this._renderCounts.vertexCount=0,this._renderCounts.indexCount=0;for(var e=this.clipper,s=!1,s=!0,a=this.skeleton.drawOrder,r=a.length,i=0;i<r;i++){var n,o=a[i];this._spine_3_7_99||o.bone.active?s?(n=o.getAttachment())instanceof spine.ClippingAttachment?e.clipStart(o,n):n instanceof spine.RegionAttachment||n instanceof spine.MeshAttachment?this.updateSlot(o,e):this._spine_3_7_99||e.clipEndWithSlot(o):e.clipEndWithSlot(o):e.clipEndWithSlot(o)}},t.prototype.render=function(){if(this._meshInstances.forEach(function(t){t.material=null}),this.removeFromLayers(),this._meshes=[],(this._meshInstances.length=0)<this._renderCounts.indexCount&&0<this._renderCounts.vertexCount){this.skeleton.getBounds(this._aabbTempOffset,this._aabbTempSize,this._aabbTempArray),this._aabb.center=new pc.Vec3(this._aabbTempOffset.x,this._aabbTempOffset.y,0),this._aabb.halfExtents=new pc.Vec3(.5*this._aabbTempSize.x,.5*this._aabbTempSize.y,0),(!this._vertexBuffer||this._vertexBuffer.getNumVertices()<this._renderCounts.vertexCount)&&(this._vertexBuffer&&this._vertexBuffer.destroy(),this._vertexBuffer=new pc.VertexBuffer(this._app.graphicsDevice,this._vertexFormat,this._renderCounts.vertexCount)),(!this._indexBuffer||this._indexBuffer.getNumIndices()<this._renderCounts.indexCount)&&(this._indexBuffer&&this._indexBuffer.destroy(),this._indexBuffer=new pc.IndexBuffer(this._app.graphicsDevice,pc.INDEXFORMAT_UINT16,this._renderCounts.indexCount));for(var t=null,e=0,s=0,a=new pc.VertexIterator(this._vertexBuffer),r=new Uint16Array(this._indexBuffer.lock()),i=0,n=0,o=this.skeleton.drawOrder,h=o.length,l=0;l<h;l++){var c=o[l];if(c.attachment&&c.material&&0<c.positions.length&&0<c.indices.length){t&&t!==c.material&&(this.SubmitBatch(e,s,t),t=c.material,e=i,s=0);for(var t=c.material,d=c.positions,u=c.vertexColor.r,m=c.vertexColor.g,f=c.vertexColor.b,p=c.vertexColor.a,g=c.uvs,v=d.length/2,x=0;x<v;x++)a.element[pc.SEMANTIC_POSITION].set(d[2*x],d[2*x+1]),a.element[pc.SEMANTIC_NORMAL].set(0,255,0,0),a.element[pc.SEMANTIC_COLOR].set(u,m,f,p),a.element[pc.SEMANTIC_TEXCOORD0].set(g[2*x],1-g[2*x+1]),a.next();var b=c.indices,w=b.length;for(x=0;x<w;x++)r[i+x]=b[x]+n;s+=w,i+=w,n+=v}}a.end(),this._indexBuffer.unlock(),this.SubmitBatch(e,s,t)}this.addToLayers()},t.prototype.SubmitBatch=function(t,e,s){var a;0<e&&((a=new pc.Mesh).vertexBuffer=this._vertexBuffer,a.indexBuffer[0]=this._indexBuffer,a.primitive[0].type=pc.PRIMITIVE_TRIANGLES,a.primitive[0].base=t,a.primitive[0].count=e,a.primitive[0].indexed=!0,a.aabb=this._aabb,this._meshes.push(a),(s=new pc.MeshInstance(this._node,a,this._materials[s])).drawOrder=this.priority+this._meshInstances.length,s.visible=!this._hidden,this._meshInstances.push(s))},t.prototype.update=function(t){if(!this._hidden){t*=this._timeScale;for(var e=this.states.length,s=0;s<e;s++)this.states[s].update(t);for(s=0;s<e;s++)this.states[s].apply(this.skeleton);this.autoUpdate&&this.skeleton.updateWorldTransform(),this.updateSkeleton(),this.render()}},t.prototype.setPosition=function(t){this._position.copy(t)},t.prototype.setTint=function(t,e){this._tint[t]=e},t.prototype.removeFromLayers=function(){if(this._meshInstances.length)for(var t=0;t<this._layers.length;t++){var e=this._app.scene.layers.getLayerById(this._layers[t]);e&&e.removeMeshInstances(this._meshInstances)}},t.prototype.addToLayers=function(){if(this._meshInstances.length)for(var t=0;t<this._layers.length;t++){var e=this._app.scene.layers.getLayerById(this._layers[t]);e&&e.addMeshInstances(this._meshInstances)}},Object.defineProperty(t.prototype,"state",{get:function(){return this.states[0]}}),Object.defineProperty(t.prototype,"priority",{get:function(){return this._priority},set:function(t){this._priority=t}}),Object.defineProperty(t.prototype,"timeScale",{get:function(){return this._timeScale},set:function(t){this._timeScale=t}}),Object.defineProperty(t.prototype,"layers",{get:function(){return this._layers},set:function(t){this.removeFromLayers(),this._layers=t||[],this.addToLayers()}}),{Spine:t}}()),pc.extend(pc,function(){function t(t){pc.ComponentSystem.call(this,t),this.id="spine",this.ComponentType=pc.SpineComponent,this.DataType=pc.SpineComponentData,this.schema=["enabled","atlasAsset","textureAssets","skeletonAsset","atlasData","textures","skeletonData","speed","spine"],this.on("beforeremove",this.onBeforeRemove,this),this.app.systems.on("update",this.onUpdate,this)}return(t.prototype=Object.create(pc.ComponentSystem.prototype)).constructor=t,Object.assign(t.prototype,{initializeComponentData:function(t,e,s){pc.ComponentSystem.prototype.initializeComponentData.call(this.system,t,e,["enabled","atlasAsset","textureAssets","skeletonAsset","atlasData","textures","skeletonData","spine"])},onBeforeRemove:function(t,e){var s=t.spine.data;s.spine&&s.spine.destroy(),t.spine.removeComponent()},onUpdate:function(t){var e,s,a,r=this.store;for(e in r)!r.hasOwnProperty(e)||(a=(s=r[e]).data).enabled&&s.entity.enabled&&a.spine&&(a.spine.setPosition(s.entity.getPosition()),a.spine.update(a.speed*t))}}),{SpineComponentSystem:t}}()),pc.extend(pc,function(){function t(t,e){pc.Component.call(this,t,e),this.on("set_atlasAsset",this.onSetAsset,this),this.on("set_textureAssets",this.onSetAssets,this),this.on("set_skeletonAsset",this.onSetAsset,this),this.on("set_atlasData",this.onSetResource,this),this.on("set_textures",this.onSetResource,this),this.on("set_skeletonData",this.onSetResource,this)}return(t.prototype=Object.create(pc.Component.prototype)).constructor=t,Object.assign(t.prototype,{_createSpine:function(){this.data.spine&&(this.data.spine.destroy(),this.data.spine=null);for(var t={},e=0,s=this.textureAssets.length;e<s;e++){var a=this.system.app.assets.get(this.textureAssets[e]),r=a.name||(a.file?a.file.filename:null),i=(r=r||pc.path.getBasename(a.file.url)).indexOf("?");t[r=-1!==i?r.substring(0,i):r]=a.resource}this.data.spine=new pc.Spine(this.system.app,this.atlasData,this.skeletonData,t),this.state=this.data.spine.state,this.states=this.data.spine.states,this.skeleton=this.data.spine.skeleton,this.entity.addChild(this.data.spine._node)},_onAssetReady:function(t){"texture"===t.type&&this.textures.push(t.resource),"json"===t.type&&(this.skeletonData=t.resource),"text"===t.type&&(this.atlasData=t.resource)},_onAssetAdd:function(t){t.off("change",this.onAssetChanged,this),t.on("change",this.onAssetChanged,this),t.off("remove",this.onAssetRemoved,this),t.on("remove",this.onAssetRemoved,this),t.ready(this._onAssetReady,this),this.system.app.assets.load(t)},onSetResource:function(){this.data.atlasData&&this.data.textures.length&&this.data.skeletonData&&this._createSpine()},onSetAsset:function(t,e,s){var a=this.system.app.assets,r=null;e&&(r=a.get(e))&&(r.off("change",this.onAssetChanged),r.off("remove",this.onAssetRemoved)),s&&((e=s)instanceof pc.Asset&&(e=s.id,this.data[t]=e),(r=a.get(e))?this._onAssetAdd(r):a.on("add:"+e))},onSetAssets:function(t,e,s){var a=this.system.app.assets,r=null;if(e.length)for(n=0,o=e.length;n<o;n++)(r=a.get(e[n]))&&(r.off("change",this.onAssetChanged),r.off("remove",this.onAssetRemoved));if(s&&s.length)for(var i=s.map(function(t){return t instanceof pc.Asset?t.id:t}),n=0,o=s.length;n<o;n++)(r=a.get(i[n]))?this._onAssetAdd(r):a.on("add:"+i[n])},onAssetChanged:function(t,e,s,a){},onAssetRemoved:function(t){},onEnable:function(){pc.Component.prototype.onEnable.call(this);var t=this.data.spine;t&&t.addToLayers()},onDisable:function(){pc.Component.prototype.onDisable.call(this);var t=this.data.spine;t&&t.removeFromLayers()},hide:function(){this.data.spine&&this.data.spine.hide()},show:function(){this.data.spine&&this.data.spine.show()},removeComponent:function(){var t;if(this.atlasAsset&&(t=this.system.app.assets.get(this.atlasAsset))&&(t.off("change",this.onAssetChanged),t.off("remove",this.onAssetRemoved)),this.skeletonAsset&&(t=this.system.app.assets.get(this.skeletonAsset))&&(t.off("change",this.onAssetChanged),t.off("remove",this.onAssetRemoved)),this.textureAssets&&this.textureAssets.length)for(var e=0;e<this.textureAssets.length;e++)(t=this.system.app.assets.get(this.textureAssets[e]))&&(t.off("change",this.onAssetChanged),t.off("remove",this.onAssetRemoved))}}),{SpineComponent:t}}()),pc.extend(pc,{SpineComponentData:function(){this.enabled=!0,this.atlasAsset=null,this.textureAssets=[],this.skeletonAsset=null,this.speed=1,this.spine=null,this.atlasData=null,this.textures=[],this.skeletonData=null}}),function(){var t,e;pc.Application.registerPlugin?pc.Application.registerPlugin("spine",function(t){new pc.SpineComponentSystem(t)}):(t=pc.Application.getApplication(),e=new pc.SpineComponentSystem(t),t.systems.add(e))}();