var spine=function(t){"use strict";function e(t){var e=Object.create(null);return t&&Object.keys(t).forEach((function(a){if("default"!==a){var n=Object.getOwnPropertyDescriptor(t,a);Object.defineProperty(e,a,n.get?n:{enumerable:!0,get:function(){return t[a]}})}})),e.default=t,Object.freeze(e)}var a=e(t);function n(){n=function(){return e};var t,e={},a=Object.prototype,r=a.hasOwnProperty,i=Object.defineProperty||function(t,e,a){t[e]=a.value},s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",h=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function u(t,e,a){return Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,a){return t[e]=a}}function c(t,e,a,n){var r=e&&e.prototype instanceof y?e:y,s=Object.create(r.prototype),o=new F(n||[]);return i(s,"_invoke",{value:T(t,a,o)}),s}function f(t,e,a){try{return{type:"normal",arg:t.call(e,a)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var d="suspendedStart",v="suspendedYield",m="executing",p="completed",g={};function y(){}function k(){}function b(){}var x={};u(x,o,(function(){return this}));var w=Object.getPrototypeOf,A=w&&w(w(Y([])));A&&A!==a&&r.call(A,o)&&(x=A);var I=b.prototype=y.prototype=Object.create(x);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function a(n,i,s,o){var h=f(t[n],t,i);if("throw"!==h.type){var l=h.arg,u=l.value;return u&&"object"==typeof u&&r.call(u,"__await")?e.resolve(u.__await).then((function(t){a("next",t,s,o)}),(function(t){a("throw",t,s,o)})):e.resolve(u).then((function(t){l.value=t,s(l)}),(function(t){return a("throw",t,s,o)}))}o(h.arg)}var n;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,n){a(t,r,e,n)}))}return n=n?n.then(i,i):i()}})}function T(e,a,n){var r=d;return function(i,s){if(r===m)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw s;return{value:t,done:!0}}for(n.method=i,n.arg=s;;){var o=n.delegate;if(o){var h=R(o,n);if(h){if(h===g)continue;return h}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=m;var l=f(e,a,n);if("normal"===l.type){if(r=n.done?p:v,l.arg===g)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r=p,n.method="throw",n.arg=l.arg)}}}function R(e,a){var n=a.method,r=e.iterator[n];if(r===t)return a.delegate=null,"throw"===n&&e.iterator.return&&(a.method="return",a.arg=t,R(e,a),"throw"===a.method)||"return"!==n&&(a.method="throw",a.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=f(r,e.iterator,a.arg);if("throw"===i.type)return a.method="throw",a.arg=i.arg,a.delegate=null,g;var s=i.arg;return s?s.done?(a[e.resultName]=s.value,a.next=e.nextLoc,"return"!==a.method&&(a.method="next",a.arg=t),a.delegate=null,g):s:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,g)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function F(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function Y(e){if(e||""===e){var a=e[o];if(a)return a.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function a(){for(;++n<e.length;)if(r.call(e,n))return a.value=e[n],a.done=!1,a;return a.value=t,a.done=!0,a};return i.next=i}}throw new TypeError(typeof e+" is not iterable")}return k.prototype=b,i(I,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:k,configurable:!0}),k.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===k||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,l,"GeneratorFunction")),t.prototype=Object.create(I),t},e.awrap=function(t){return{__await:t}},E(S.prototype),u(S.prototype,h,(function(){return this})),e.AsyncIterator=S,e.async=function(t,a,n,r,i){void 0===i&&(i=Promise);var s=new S(c(t,a,n,r),i);return e.isGeneratorFunction(a)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},E(I),u(I,l,"Generator"),u(I,o,(function(){return this})),u(I,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),a=[];for(var n in e)a.push(n);return a.reverse(),function t(){for(;a.length;){var n=a.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=Y,F.prototype={constructor:F,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(M),!e)for(var a in this)"t"===a.charAt(0)&&r.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var a=this;function n(n,r){return o.type="throw",o.arg=e,a.next=n,r&&(a.method="next",a.arg=t),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],o=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var h=r.call(s,"catchLoc"),l=r.call(s,"finallyLoc");if(h&&l){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var a=this.tryEntries.length-1;a>=0;--a){var n=this.tryEntries[a];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=t,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),M(a),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.tryLoc===t){var n=a.completion;if("throw"===n.type){var r=n.arg;M(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,a,n){return this.delegate={iterator:Y(e),resultName:a,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,b(n.key),n)}}function o(t,e,a){return e&&s(t.prototype,e),a&&s(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function h(t,e,a){return(e=b(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}function u(t){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},u(t)}function c(t,e){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},c(t,e)}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,n=u(t);if(e){var r=u(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return function(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return f(t)}(this,a)}}function v(){return v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,a){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(arguments.length<3?t:a):r.value}},v.apply(this,arguments)}function m(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var n,r,i,s,o=[],h=!0,l=!1;try{if(i=(a=a.call(t)).next,0===e){if(Object(a)!==a)return;h=!1}else for(;!(h=(n=i.call(a)).done)&&(o.push(n.value),o.length!==e);h=!0);}catch(t){l=!0,r=t}finally{try{if(!h&&null!=a.return&&(s=a.return(),Object(s)!==s))return}finally{if(l)throw r}}return o}}(t,e)||g(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t){return function(t){if(Array.isArray(t))return y(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||g(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){if(t){if("string"==typeof t)return y(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?y(t,e):void 0}}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function k(t,e){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=g(t))||e&&t&&"number"==typeof t.length){a&&(t=a);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return s=t.done,t},e:function(t){o=!0,i=t},f:function(){try{s||null==a.return||a.return()}finally{if(o)throw i}}}}function b(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var n=a.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}var x=function(){function t(){i(this,t),this.array=new Array}return o(t,[{key:"add",value:function(t){var e=this.contains(t);return this.array[0|t]=0|t,!e}},{key:"contains",value:function(t){return null!=this.array[0|t]}},{key:"remove",value:function(t){this.array[0|t]=void 0}},{key:"clear",value:function(){this.array.length=0}}]),t}(),w=function(){function t(){i(this,t),this.entries={},this.size=0}return o(t,[{key:"add",value:function(t){var e=this.entries[t];return this.entries[t]=!0,!e&&(this.size++,!0)}},{key:"addAll",value:function(t){for(var e=this.size,a=0,n=t.length;a<n;a++)this.add(t[a]);return e!=this.size}},{key:"contains",value:function(t){return this.entries[t]}},{key:"clear",value:function(){this.entries={},this.size=0}}]),t}(),A=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;i(this,t),this.r=e,this.g=a,this.b=n,this.a=r}return o(t,[{key:"set",value:function(t,e,a,n){return this.r=t,this.g=e,this.b=a,this.a=n,this.clamp()}},{key:"setFromColor",value:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this}},{key:"setFromString",value:function(t){return t="#"==t.charAt(0)?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=8!=t.length?1:parseInt(t.substr(6,2),16)/255,this}},{key:"add",value:function(t,e,a,n){return this.r+=t,this.g+=e,this.b+=a,this.a+=n,this.clamp()}},{key:"clamp",value:function(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this}}],[{key:"rgba8888ToColor",value:function(t,e){t.r=((4278190080&e)>>>24)/255,t.g=((16711680&e)>>>16)/255,t.b=((65280&e)>>>8)/255,t.a=(255&e)/255}},{key:"rgb888ToColor",value:function(t,e){t.r=((16711680&e)>>>16)/255,t.g=((65280&e)>>>8)/255,t.b=(255&e)/255}},{key:"fromString",value:function(e){return(new t).setFromString(e)}}]),t}();A.WHITE=new A(1,1,1,1),A.RED=new A(1,0,0,1),A.GREEN=new A(0,1,0,1),A.BLUE=new A(0,0,1,1),A.MAGENTA=new A(1,0,1,1);var I=function(){function t(){i(this,t)}return o(t,null,[{key:"clamp",value:function(t,e,a){return t<e?e:t>a?a:t}},{key:"cosDeg",value:function(e){return Math.cos(e*t.degRad)}},{key:"sinDeg",value:function(e){return Math.sin(e*t.degRad)}},{key:"signum",value:function(t){return t>0?1:t<0?-1:0}},{key:"toInt",value:function(t){return t>0?Math.floor(t):Math.ceil(t)}},{key:"cbrt",value:function(t){var e=Math.pow(Math.abs(t),1/3);return t<0?-e:e}},{key:"randomTriangular",value:function(e,a){return t.randomTriangularWith(e,a,.5*(e+a))}},{key:"randomTriangularWith",value:function(t,e,a){var n=Math.random(),r=e-t;return n<=(a-t)/r?t+Math.sqrt(n*r*(a-t)):e-Math.sqrt((1-n)*r*(e-a))}},{key:"isPowerOfTwo",value:function(t){return t&&0==(t&t-1)}}]),t}();I.PI=3.1415927,I.PI2=2*I.PI,I.radiansToDegrees=180/I.PI,I.radDeg=I.radiansToDegrees,I.degreesToRadians=I.PI/180,I.degRad=I.degreesToRadians;var E=function(){function t(){i(this,t)}return o(t,[{key:"apply",value:function(t,e,a){return t+(e-t)*this.applyInternal(a)}}]),t}(),S=function(t){l(a,t);var e=d(a);function a(t){var n;return i(this,a),(n=e.call(this)).power=2,n.power=t,n}return o(a,[{key:"applyInternal",value:function(t){return t<=.5?Math.pow(2*t,this.power)/2:Math.pow(2*(t-1),this.power)/(this.power%2==0?-2:2)+1}}]),a}(E),T=function(t){l(a,t);var e=d(a);function a(t){return i(this,a),e.call(this,t)}return o(a,[{key:"applyInternal",value:function(t){return Math.pow(t-1,this.power)*(this.power%2==0?-1:1)+1}}]),a}(S),R=function(){function t(){i(this,t)}return o(t,null,[{key:"arrayCopy",value:function(t,e,a,n,r){for(var i=e,s=n;i<e+r;i++,s++)a[s]=t[i]}},{key:"arrayFill",value:function(t,e,a,n){for(var r=e;r<a;r++)t[r]=n}},{key:"setArraySize",value:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=t.length;if(n==e)return t;if(t.length=e,n<e)for(var r=n;r<e;r++)t[r]=a;return t}},{key:"ensureArrayCapacity",value:function(e,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e.length>=a?e:t.setArraySize(e,a,n)}},{key:"newArray",value:function(t,e){for(var a=new Array(t),n=0;n<t;n++)a[n]=e;return a}},{key:"newFloatArray",value:function(e){if(t.SUPPORTS_TYPED_ARRAYS)return new Float32Array(e);for(var a=new Array(e),n=0;n<a.length;n++)a[n]=0;return a}},{key:"newShortArray",value:function(e){if(t.SUPPORTS_TYPED_ARRAYS)return new Int16Array(e);for(var a=new Array(e),n=0;n<a.length;n++)a[n]=0;return a}},{key:"toFloatArray",value:function(e){return t.SUPPORTS_TYPED_ARRAYS?new Float32Array(e):e}},{key:"toSinglePrecision",value:function(e){return t.SUPPORTS_TYPED_ARRAYS?Math.fround(e):e}},{key:"webkit602BugfixHelper",value:function(t,e){}},{key:"contains",value:function(t,e){for(var a=0;a<t.length;a++)if(t[a]==e)return!0;return!1}},{key:"enumValue",value:function(t,e){return t[e[0].toUpperCase()+e.slice(1)]}}]),t}();R.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array;var C=function(){function t(){i(this,t)}return o(t,null,[{key:"logBones",value:function(t){for(var e=0;e<t.bones.length;e++){var a=t.bones[e];console.log(a.data.name+", "+a.a+", "+a.b+", "+a.c+", "+a.d+", "+a.worldX+", "+a.worldY)}}}]),t}(),M=function(){function t(e){i(this,t),this.items=new Array,this.instantiator=e}return o(t,[{key:"obtain",value:function(){return this.items.length>0?this.items.pop():this.instantiator()}},{key:"free",value:function(t){t.reset&&t.reset(),this.items.push(t)}},{key:"freeAll",value:function(t){for(var e=0;e<t.length;e++)this.free(t[e])}},{key:"clear",value:function(){this.items.length=0}}]),t}(),F=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;i(this,t),this.x=e,this.y=a}return o(t,[{key:"set",value:function(t,e){return this.x=t,this.y=e,this}},{key:"length",value:function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)}},{key:"normalize",value:function(){var t=this.length();return 0!=t&&(this.x/=t,this.y/=t),this}}]),t}(),Y=function(){function t(){i(this,t),this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}return o(t,[{key:"update",value:function(){var t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)}}]),t}(),X=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;i(this,t),this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(e)}return o(t,[{key:"hasEnoughData",value:function(){return this.addedValues>=this.values.length}},{key:"addValue",value:function(t){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=t,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0}},{key:"getMean",value:function(){if(this.hasEnoughData()){if(this.dirty){for(var t=0,e=0;e<this.values.length;e++)t+=this.values[e];this.mean=t/this.values.length,this.dirty=!1}return this.mean}return 0}}]),t}(),L=o((function t(e){if(i(this,t),!e)throw new Error("name cannot be null.");this.name=e})),N=function(t){l(a,t);var e=d(a);function a(t){var n;return i(this,a),(n=e.call(this,t)).id=a.nextID++,n.bones=null,n.vertices=null,n.worldVerticesLength=0,n.deformAttachment=f(n),n}return o(a,[{key:"computeWorldVertices",value:function(t,e,a,n,r,i){a=r+(a>>1)*i;var s=t.bone.skeleton,o=t.deform,h=this.vertices,l=this.bones;if(l){for(var u=0,c=0,f=0;f<e;f+=2){var d=l[u];u+=d+1,c+=d}var v=s.bones;if(0==o.length)for(var m=r,p=3*c;m<a;m+=i){var g=0,y=0,k=l[u++];for(k+=u;u<k;u++,p+=3){var b=v[l[u]],x=h[p],w=h[p+1],A=h[p+2];g+=(x*b.a+w*b.b+b.worldX)*A,y+=(x*b.c+w*b.d+b.worldY)*A}n[m]=g,n[m+1]=y}else for(var I=o,E=r,S=3*c,T=c<<1;E<a;E+=i){var R=0,C=0,M=l[u++];for(M+=u;u<M;u++,S+=3,T+=2){var F=v[l[u]],Y=h[S]+I[T],X=h[S+1]+I[T+1],L=h[S+2];R+=(Y*F.a+X*F.b+F.worldX)*L,C+=(Y*F.c+X*F.d+F.worldY)*L}n[E]=R,n[E+1]=C}}else{o.length>0&&(h=o);for(var N=t.bone,P=N.worldX,_=N.worldY,O=N.a,B=N.b,D=N.c,V=N.d,U=e,W=r;W<a;U+=2,W+=i){var j=h[U],q=h[U+1];n[W]=j*O+q*B+P,n[W+1]=j*D+q*V+_}}}},{key:"copyTo",value:function(t){this.bones?(t.bones=new Array(this.bones.length),R.arrayCopy(this.bones,0,t.bones,0,this.bones.length)):t.bones=null,this.vertices?(t.vertices=R.newFloatArray(this.vertices.length),R.arrayCopy(this.vertices,0,t.vertices,0,this.vertices.length)):t.vertices=null,t.worldVerticesLength=this.worldVerticesLength,t.deformAttachment=this.deformAttachment}}]),a}(L);N.nextID=0;var P,_,O=function(){function t(e,a,n){if(i(this,t),this.timelines=null,this.timelineIds=null,!e)throw new Error("name cannot be null.");this.name=e,this.setTimelines(a),this.duration=n}return o(t,[{key:"setTimelines",value:function(t){if(!t)throw new Error("timelines cannot be null.");this.timelines=t,this.timelineIds=new w;for(var e=0;e<t.length;e++)this.timelineIds.addAll(t[e].getPropertyIds())}},{key:"hasTimeline",value:function(t){for(var e=0;e<t.length;e++)if(this.timelineIds.contains(t[e]))return!0;return!1}},{key:"apply",value:function(t,e,a,n,r,i,s,o){if(!t)throw new Error("skeleton cannot be null.");n&&0!=this.duration&&(a%=this.duration,e>0&&(e%=this.duration));for(var h=this.timelines,l=0,u=h.length;l<u;l++)h[l].apply(t,e,a,r,i,s,o)}}]),t}();!function(t){t[t.setup=0]="setup",t[t.first=1]="first",t[t.replace=2]="replace",t[t.add=3]="add"}(P||(P={})),function(t){t[t.mixIn=0]="mixIn",t[t.mixOut=1]="mixOut"}(_||(_={}));var B=0,D=1,V=2,U=3,W=4,j=5,q=6,G=7,z=8,H=9,$=10,J=11,Q=12,Z=13,K=14,tt=15,et=16,at=17,nt=18,rt=function(){function t(e,a){i(this,t),this.propertyIds=null,this.frames=null,this.propertyIds=a,this.frames=R.newFloatArray(e*this.getFrameEntries())}return o(t,[{key:"getPropertyIds",value:function(){return this.propertyIds}},{key:"getFrameEntries",value:function(){return 1}},{key:"getFrameCount",value:function(){return this.frames.length/this.getFrameEntries()}},{key:"getDuration",value:function(){return this.frames[this.frames.length-this.getFrameEntries()]}}],[{key:"search1",value:function(t,e){for(var a=t.length,n=1;n<a;n++)if(t[n]>e)return n-1;return a-1}},{key:"search",value:function(t,e,a){for(var n=t.length,r=a;r<n;r+=a)if(t[r]>e)return r-a;return n-a}}]),t}(),it=function(t){l(a,t);var e=d(a);function a(t,n,r){var s;return i(this,a),(s=e.call(this,t,r)).curves=null,s.curves=R.newFloatArray(t+18*n),s.curves[t-1]=1,s}return o(a,[{key:"setLinear",value:function(t){this.curves[t]=0}},{key:"setStepped",value:function(t){this.curves[t]=1}},{key:"shrink",value:function(t){var e=this.getFrameCount()+18*t;if(this.curves.length>e){var a=R.newFloatArray(e);R.arrayCopy(this.curves,0,a,0,e),this.curves=a}}},{key:"setBezier",value:function(t,e,a,n,r,i,s,o,h,l,u){var c=this.curves,f=this.getFrameCount()+18*t;0==a&&(c[e]=2+f);for(var d=.03*(n-2*i+o),v=.03*(r-2*s+h),m=.006*(3*(i-o)-n+l),p=.006*(3*(s-h)-r+u),g=2*d+m,y=2*v+p,k=.3*(i-n)+d+.16666667*m,b=.3*(s-r)+v+.16666667*p,x=n+k,w=r+b,A=f+18;f<A;f+=2)c[f]=x,c[f+1]=w,k+=g,b+=y,g+=m,y+=p,x+=k,w+=b}},{key:"getBezierValue",value:function(t,e,a,n){var r=this.curves;if(r[n]>t){var i=this.frames[e],s=this.frames[e+a];return s+(t-i)/(r[n]-i)*(r[n+1]-s)}var o=n+18;for(n+=2;n<o;n+=2)if(r[n]>=t){var h=r[n-2],l=r[n-1];return l+(t-h)/(r[n]-h)*(r[n+1]-l)}e+=this.getFrameEntries();var u=r[o-2],c=r[o-1];return c+(t-u)/(this.frames[e]-u)*(this.frames[e+a]-c)}}]),a}(rt),st=function(t){l(a,t);var e=d(a);function a(t,n,r){return i(this,a),e.call(this,t,n,[r])}return o(a,[{key:"getFrameEntries",value:function(){return 2}},{key:"setFrame",value:function(t,e,a){t<<=1,this.frames[t]=e,this.frames[t+1]=a}},{key:"getCurveValue",value:function(t){for(var e=this.frames,a=e.length-2,n=2;n<=a;n+=2)if(e[n]>t){a=n-2;break}var r=this.curves[a>>1];switch(r){case 0:var i=e[a],s=e[a+1];return s+(t-i)/(e[a+2]-i)*(e[a+2+1]-s);case 1:return e[a+1]}return this.getBezierValue(t,a,1,r-2)}}]),a}(it),ot=function(t){l(a,t);var e=d(a);function a(t,n,r,s){return i(this,a),e.call(this,t,n,[r,s])}return o(a,[{key:"getFrameEntries",value:function(){return 3}},{key:"setFrame",value:function(t,e,a,n){t*=3,this.frames[t]=e,this.frames[t+1]=a,this.frames[t+2]=n}}]),a}(it),ht=function(t){l(a,t);var e=d(a);function a(t,n,r){var s;return i(this,a),(s=e.call(this,t,n,B+"|"+r)).boneIndex=0,s.boneIndex=r,s}return o(a,[{key:"apply",value:function(t,e,a,n,r,i,s){var o=t.bones[this.boneIndex];if(o.active)if(a<this.frames[0])switch(i){case P.setup:return void(o.rotation=o.data.rotation);case P.first:o.rotation+=(o.data.rotation-o.rotation)*r}else{var h=this.getCurveValue(a);switch(i){case P.setup:o.rotation=o.data.rotation+h*r;break;case P.first:case P.replace:h+=o.data.rotation-o.rotation;case P.add:o.rotation+=h*r}}}}]),a}(st),lt=function(t){l(a,t);var e=d(a);function a(t,n,r){var s;return i(this,a),(s=e.call(this,t,n,D+"|"+r,V+"|"+r)).boneIndex=0,s.boneIndex=r,s}return o(a,[{key:"apply",value:function(t,e,a,n,r,i,s){var o=t.bones[this.boneIndex];if(o.active){var h=this.frames;if(a<h[0])switch(i){case P.setup:return o.x=o.data.x,void(o.y=o.data.y);case P.first:o.x+=(o.data.x-o.x)*r,o.y+=(o.data.y-o.y)*r}else{var l=0,u=0,c=rt.search(h,a,3),f=this.curves[c/3];switch(f){case 0:var d=h[c];l=h[c+1],u=h[c+2];var v=(a-d)/(h[c+3]-d);l+=(h[c+3+1]-l)*v,u+=(h[c+3+2]-u)*v;break;case 1:l=h[c+1],u=h[c+2];break;default:l=this.getBezierValue(a,c,1,f-2),u=this.getBezierValue(a,c,2,f+18-2)}switch(i){case P.setup:o.x=o.data.x+l*r,o.y=o.data.y+u*r;break;case P.first:case P.replace:o.x+=(o.data.x+l-o.x)*r,o.y+=(o.data.y+u-o.y)*r;break;case P.add:o.x+=l*r,o.y+=u*r}}}}}]),a}(ot),ut=function(t){l(a,t);var e=d(a);function a(t,n,r){var s;return i(this,a),(s=e.call(this,t,n,D+"|"+r)).boneIndex=0,s.boneIndex=r,s}return o(a,[{key:"apply",value:function(t,e,a,n,r,i,s){var o=t.bones[this.boneIndex];if(o.active)if(a<this.frames[0])switch(i){case P.setup:return void(o.x=o.data.x);case P.first:o.x+=(o.data.x-o.x)*r}else{var h=this.getCurveValue(a);switch(i){case P.setup:o.x=o.data.x+h*r;break;case P.first:case P.replace:o.x+=(o.data.x+h-o.x)*r;break;case P.add:o.x+=h*r}}}}]),a}(st),ct=function(t){l(a,t);var e=d(a);function a(t,n,r){var s;return i(this,a),(s=e.call(this,t,n,V+"|"+r)).boneIndex=0,s.boneIndex=r,s}return o(a,[{key:"apply",value:function(t,e,a,n,r,i,s){var o=t.bones[this.boneIndex];if(o.active)if(a<this.frames[0])switch(i){case P.setup:return void(o.y=o.data.y);case P.first:o.y+=(o.data.y-o.y)*r}else{var h=this.getCurveValue(a);switch(i){case P.setup:o.y=o.data.y+h*r;break;case P.first:case P.replace:o.y+=(o.data.y+h-o.y)*r;break;case P.add:o.y+=h*r}}}}]),a}(st),ft=function(t){l(a,t);var e=d(a);function a(t,n,r){var s;return i(this,a),(s=e.call(this,t,n,U+"|"+r,W+"|"+r)).boneIndex=0,s.boneIndex=r,s}return o(a,[{key:"apply",value:function(t,e,a,n,r,i,s){var o=t.bones[this.boneIndex];if(o.active){var h=this.frames;if(a<h[0])switch(i){case P.setup:return o.scaleX=o.data.scaleX,void(o.scaleY=o.data.scaleY);case P.first:o.scaleX+=(o.data.scaleX-o.scaleX)*r,o.scaleY+=(o.data.scaleY-o.scaleY)*r}else{var l,u,c=rt.search(h,a,3),f=this.curves[c/3];switch(f){case 0:var d=h[c];l=h[c+1],u=h[c+2];var v=(a-d)/(h[c+3]-d);l+=(h[c+3+1]-l)*v,u+=(h[c+3+2]-u)*v;break;case 1:l=h[c+1],u=h[c+2];break;default:l=this.getBezierValue(a,c,1,f-2),u=this.getBezierValue(a,c,2,f+18-2)}if(l*=o.data.scaleX,u*=o.data.scaleY,1==r)i==P.add?(o.scaleX+=l-o.data.scaleX,o.scaleY+=u-o.data.scaleY):(o.scaleX=l,o.scaleY=u);else{var m=0,p=0;if(s==_.mixOut)switch(i){case P.setup:m=o.data.scaleX,p=o.data.scaleY,o.scaleX=m+(Math.abs(l)*I.signum(m)-m)*r,o.scaleY=p+(Math.abs(u)*I.signum(p)-p)*r;break;case P.first:case P.replace:m=o.scaleX,p=o.scaleY,o.scaleX=m+(Math.abs(l)*I.signum(m)-m)*r,o.scaleY=p+(Math.abs(u)*I.signum(p)-p)*r;break;case P.add:o.scaleX+=(l-o.data.scaleX)*r,o.scaleY+=(u-o.data.scaleY)*r}else switch(i){case P.setup:m=Math.abs(o.data.scaleX)*I.signum(l),p=Math.abs(o.data.scaleY)*I.signum(u),o.scaleX=m+(l-m)*r,o.scaleY=p+(u-p)*r;break;case P.first:case P.replace:m=Math.abs(o.scaleX)*I.signum(l),p=Math.abs(o.scaleY)*I.signum(u),o.scaleX=m+(l-m)*r,o.scaleY=p+(u-p)*r;break;case P.add:o.scaleX+=(l-o.data.scaleX)*r,o.scaleY+=(u-o.data.scaleY)*r}}}}}}]),a}(ot),dt=function(t){l(a,t);var e=d(a);function a(t,n,r){var s;return i(this,a),(s=e.call(this,t,n,U+"|"+r)).boneIndex=0,s.boneIndex=r,s}return o(a,[{key:"apply",value:function(t,e,a,n,r,i,s){var o=t.bones[this.boneIndex];if(o.active)if(a<this.frames[0])switch(i){case P.setup:return void(o.scaleX=o.data.scaleX);case P.first:o.scaleX+=(o.data.scaleX-o.scaleX)*r}else{var h=this.getCurveValue(a)*o.data.scaleX;if(1==r)i==P.add?o.scaleX+=h-o.data.scaleX:o.scaleX=h;else{var l=0;if(s==_.mixOut)switch(i){case P.setup:l=o.data.scaleX,o.scaleX=l+(Math.abs(h)*I.signum(l)-l)*r;break;case P.first:case P.replace:l=o.scaleX,o.scaleX=l+(Math.abs(h)*I.signum(l)-l)*r;break;case P.add:o.scaleX+=(h-o.data.scaleX)*r}else switch(i){case P.setup:l=Math.abs(o.data.scaleX)*I.signum(h),o.scaleX=l+(h-l)*r;break;case P.first:case P.replace:l=Math.abs(o.scaleX)*I.signum(h),o.scaleX=l+(h-l)*r;break;case P.add:o.scaleX+=(h-o.data.scaleX)*r}}}}}]),a}(st),vt=function(t){l(a,t);var e=d(a);function a(t,n,r){var s;return i(this,a),(s=e.call(this,t,n,W+"|"+r)).boneIndex=0,s.boneIndex=r,s}return o(a,[{key:"apply",value:function(t,e,a,n,r,i,s){var o=t.bones[this.boneIndex];if(o.active)if(a<this.frames[0])switch(i){case P.setup:return void(o.scaleY=o.data.scaleY);case P.first:o.scaleY+=(o.data.scaleY-o.scaleY)*r}else{var h=this.getCurveValue(a)*o.data.scaleY;if(1==r)i==P.add?o.scaleY+=h-o.data.scaleY:o.scaleY=h;else{var l=0;if(s==_.mixOut)switch(i){case P.setup:l=o.data.scaleY,o.scaleY=l+(Math.abs(h)*I.signum(l)-l)*r;break;case P.first:case P.replace:l=o.scaleY,o.scaleY=l+(Math.abs(h)*I.signum(l)-l)*r;break;case P.add:o.scaleY+=(h-o.data.scaleY)*r}else switch(i){case P.setup:l=Math.abs(o.data.scaleY)*I.signum(h),o.scaleY=l+(h-l)*r;break;case P.first:case P.replace:l=Math.abs(o.scaleY)*I.signum(h),o.scaleY=l+(h-l)*r;break;case P.add:o.scaleY+=(h-o.data.scaleY)*r}}}}}]),a}(st),mt=function(t){l(a,t);var e=d(a);function a(t,n,r){var s;return i(this,a),(s=e.call(this,t,n,j+"|"+r,q+"|"+r)).boneIndex=0,s.boneIndex=r,s}return o(a,[{key:"apply",value:function(t,e,a,n,r,i,s){var o=t.bones[this.boneIndex];if(o.active){var h=this.frames;if(a<h[0])switch(i){case P.setup:return o.shearX=o.data.shearX,void(o.shearY=o.data.shearY);case P.first:o.shearX+=(o.data.shearX-o.shearX)*r,o.shearY+=(o.data.shearY-o.shearY)*r}else{var l=0,u=0,c=rt.search(h,a,3),f=this.curves[c/3];switch(f){case 0:var d=h[c];l=h[c+1],u=h[c+2];var v=(a-d)/(h[c+3]-d);l+=(h[c+3+1]-l)*v,u+=(h[c+3+2]-u)*v;break;case 1:l=h[c+1],u=h[c+2];break;default:l=this.getBezierValue(a,c,1,f-2),u=this.getBezierValue(a,c,2,f+18-2)}switch(i){case P.setup:o.shearX=o.data.shearX+l*r,o.shearY=o.data.shearY+u*r;break;case P.first:case P.replace:o.shearX+=(o.data.shearX+l-o.shearX)*r,o.shearY+=(o.data.shearY+u-o.shearY)*r;break;case P.add:o.shearX+=l*r,o.shearY+=u*r}}}}}]),a}(ot),pt=function(t){l(a,t);var e=d(a);function a(t,n,r){var s;return i(this,a),(s=e.call(this,t,n,j+"|"+r)).boneIndex=0,s.boneIndex=r,s}return o(a,[{key:"apply",value:function(t,e,a,n,r,i,s){var o=t.bones[this.boneIndex];if(o.active)if(a<this.frames[0])switch(i){case P.setup:return void(o.shearX=o.data.shearX);case P.first:o.shearX+=(o.data.shearX-o.shearX)*r}else{var h=this.getCurveValue(a);switch(i){case P.setup:o.shearX=o.data.shearX+h*r;break;case P.first:case P.replace:o.shearX+=(o.data.shearX+h-o.shearX)*r;break;case P.add:o.shearX+=h*r}}}}]),a}(st),gt=function(t){l(a,t);var e=d(a);function a(t,n,r){var s;return i(this,a),(s=e.call(this,t,n,q+"|"+r)).boneIndex=0,s.boneIndex=r,s}return o(a,[{key:"apply",value:function(t,e,a,n,r,i,s){var o=t.bones[this.boneIndex];if(o.active)if(a<this.frames[0])switch(i){case P.setup:return void(o.shearY=o.data.shearY);case P.first:o.shearY+=(o.data.shearY-o.shearY)*r}else{var h=this.getCurveValue(a);switch(i){case P.setup:o.shearY=o.data.shearY+h*r;break;case P.first:case P.replace:o.shearY+=(o.data.shearY+h-o.shearY)*r;break;case P.add:o.shearY+=h*r}}}}]),a}(st),yt=function(t){l(a,t);var e=d(a);function a(t,n,r){var s;return i(this,a),(s=e.call(this,t,n,[G+"|"+r,z+"|"+r])).slotIndex=0,s.slotIndex=r,s}return o(a,[{key:"getFrameEntries",value:function(){return 5}},{key:"setFrame",value:function(t,e,a,n,r,i){t*=5,this.frames[t]=e,this.frames[t+1]=a,this.frames[t+2]=n,this.frames[t+3]=r,this.frames[t+4]=i}},{key:"apply",value:function(t,e,a,n,r,i,s){var o=t.slots[this.slotIndex];if(o.bone.active){var h=this.frames,l=o.color;if(a<h[0]){var u=o.data.color;switch(i){case P.setup:return void l.setFromColor(u);case P.first:l.add((u.r-l.r)*r,(u.g-l.g)*r,(u.b-l.b)*r,(u.a-l.a)*r)}}else{var c=0,f=0,d=0,v=0,m=rt.search(h,a,5),p=this.curves[m/5];switch(p){case 0:var g=h[m];c=h[m+1],f=h[m+2],d=h[m+3],v=h[m+4];var y=(a-g)/(h[m+5]-g);c+=(h[m+5+1]-c)*y,f+=(h[m+5+2]-f)*y,d+=(h[m+5+3]-d)*y,v+=(h[m+5+4]-v)*y;break;case 1:c=h[m+1],f=h[m+2],d=h[m+3],v=h[m+4];break;default:c=this.getBezierValue(a,m,1,p-2),f=this.getBezierValue(a,m,2,p+18-2),d=this.getBezierValue(a,m,3,p+36-2),v=this.getBezierValue(a,m,4,p+54-2)}1==r?l.set(c,f,d,v):(i==P.setup&&l.setFromColor(o.data.color),l.add((c-l.r)*r,(f-l.g)*r,(d-l.b)*r,(v-l.a)*r))}}}}]),a}(it),kt=function(t){l(a,t);var e=d(a);function a(t,n,r){var s;return i(this,a),(s=e.call(this,t,n,[G+"|"+r])).slotIndex=0,s.slotIndex=r,s}return o(a,[{key:"getFrameEntries",value:function(){return 4}},{key:"setFrame",value:function(t,e,a,n,r){t<<=2,this.frames[t]=e,this.frames[t+1]=a,this.frames[t+2]=n,this.frames[t+3]=r}},{key:"apply",value:function(t,e,a,n,r,i,s){var o=t.slots[this.slotIndex];if(o.bone.active){var h=this.frames,l=o.color;if(a<h[0]){var u=o.data.color;switch(i){case P.setup:return l.r=u.r,l.g=u.g,void(l.b=u.b);case P.first:l.r+=(u.r-l.r)*r,l.g+=(u.g-l.g)*r,l.b+=(u.b-l.b)*r}}else{var c=0,f=0,d=0,v=rt.search(h,a,4),m=this.curves[v>>2];switch(m){case 0:var p=h[v];c=h[v+1],f=h[v+2],d=h[v+3];var g=(a-p)/(h[v+4]-p);c+=(h[v+4+1]-c)*g,f+=(h[v+4+2]-f)*g,d+=(h[v+4+3]-d)*g;break;case 1:c=h[v+1],f=h[v+2],d=h[v+3];break;default:c=this.getBezierValue(a,v,1,m-2),f=this.getBezierValue(a,v,2,m+18-2),d=this.getBezierValue(a,v,3,m+36-2)}if(1==r)l.r=c,l.g=f,l.b=d;else{if(i==P.setup){var y=o.data.color;l.r=y.r,l.g=y.g,l.b=y.b}l.r+=(c-l.r)*r,l.g+=(f-l.g)*r,l.b+=(d-l.b)*r}}}}}]),a}(it),bt=function(t){l(a,t);var e=d(a);function a(t,n,r){var s;return i(this,a),(s=e.call(this,t,n,z+"|"+r)).slotIndex=0,s.slotIndex=r,s}return o(a,[{key:"apply",value:function(t,e,a,n,r,i,s){var o=t.slots[this.slotIndex];if(o.bone.active){var h=o.color;if(a<this.frames[0]){var l=o.data.color;switch(i){case P.setup:return void(h.a=l.a);case P.first:h.a+=(l.a-h.a)*r}}else{var u=this.getCurveValue(a);1==r?h.a=u:(i==P.setup&&(h.a=o.data.color.a),h.a+=(u-h.a)*r)}}}}]),a}(st),xt=function(t){l(a,t);var e=d(a);function a(t,n,r){var s;return i(this,a),(s=e.call(this,t,n,[G+"|"+r,z+"|"+r,H+"|"+r])).slotIndex=0,s.slotIndex=r,s}return o(a,[{key:"getFrameEntries",value:function(){return 8}},{key:"setFrame",value:function(t,e,a,n,r,i,s,o,h){t<<=3,this.frames[t]=e,this.frames[t+1]=a,this.frames[t+2]=n,this.frames[t+3]=r,this.frames[t+4]=i,this.frames[t+5]=s,this.frames[t+6]=o,this.frames[t+7]=h}},{key:"apply",value:function(t,e,a,n,r,i,s){var o=t.slots[this.slotIndex];if(o.bone.active){var h=this.frames,l=o.color,u=o.darkColor;if(a<h[0]){var c=o.data.color,f=o.data.darkColor;switch(i){case P.setup:return l.setFromColor(c),u.r=f.r,u.g=f.g,void(u.b=f.b);case P.first:l.add((c.r-l.r)*r,(c.g-l.g)*r,(c.b-l.b)*r,(c.a-l.a)*r),u.r+=(f.r-u.r)*r,u.g+=(f.g-u.g)*r,u.b+=(f.b-u.b)*r}}else{var d=0,v=0,m=0,p=0,g=0,y=0,k=0,b=rt.search(h,a,8),x=this.curves[b>>3];switch(x){case 0:var w=h[b];d=h[b+1],v=h[b+2],m=h[b+3],p=h[b+4],g=h[b+5],y=h[b+6],k=h[b+7];var A=(a-w)/(h[b+8]-w);d+=(h[b+8+1]-d)*A,v+=(h[b+8+2]-v)*A,m+=(h[b+8+3]-m)*A,p+=(h[b+8+4]-p)*A,g+=(h[b+8+5]-g)*A,y+=(h[b+8+6]-y)*A,k+=(h[b+8+7]-k)*A;break;case 1:d=h[b+1],v=h[b+2],m=h[b+3],p=h[b+4],g=h[b+5],y=h[b+6],k=h[b+7];break;default:d=this.getBezierValue(a,b,1,x-2),v=this.getBezierValue(a,b,2,x+18-2),m=this.getBezierValue(a,b,3,x+36-2),p=this.getBezierValue(a,b,4,x+54-2),g=this.getBezierValue(a,b,5,x+72-2),y=this.getBezierValue(a,b,6,x+90-2),k=this.getBezierValue(a,b,7,x+108-2)}if(1==r)l.set(d,v,m,p),u.r=g,u.g=y,u.b=k;else{if(i==P.setup){l.setFromColor(o.data.color);var I=o.data.darkColor;u.r=I.r,u.g=I.g,u.b=I.b}l.add((d-l.r)*r,(v-l.g)*r,(m-l.b)*r,(p-l.a)*r),u.r+=(g-u.r)*r,u.g+=(y-u.g)*r,u.b+=(k-u.b)*r}}}}}]),a}(it),wt=function(t){l(a,t);var e=d(a);function a(t,n,r){var s;return i(this,a),(s=e.call(this,t,n,[G+"|"+r,H+"|"+r])).slotIndex=0,s.slotIndex=r,s}return o(a,[{key:"getFrameEntries",value:function(){return 7}},{key:"setFrame",value:function(t,e,a,n,r,i,s,o){t*=7,this.frames[t]=e,this.frames[t+1]=a,this.frames[t+2]=n,this.frames[t+3]=r,this.frames[t+4]=i,this.frames[t+5]=s,this.frames[t+6]=o}},{key:"apply",value:function(t,e,a,n,r,i,s){var o=t.slots[this.slotIndex];if(o.bone.active){var h=this.frames,l=o.color,u=o.darkColor;if(a<h[0]){var c=o.data.color,f=o.data.darkColor;switch(i){case P.setup:return l.r=c.r,l.g=c.g,l.b=c.b,u.r=f.r,u.g=f.g,void(u.b=f.b);case P.first:l.r+=(c.r-l.r)*r,l.g+=(c.g-l.g)*r,l.b+=(c.b-l.b)*r,u.r+=(f.r-u.r)*r,u.g+=(f.g-u.g)*r,u.b+=(f.b-u.b)*r}}else{var d=0,v=0,m=0,p=0,g=0,y=0,k=rt.search(h,a,7),b=this.curves[k/7];switch(b){case 0:var x=h[k];d=h[k+1],v=h[k+2],m=h[k+3],p=h[k+4],g=h[k+5],y=h[k+6];var w=(a-x)/(h[k+7]-x);d+=(h[k+7+1]-d)*w,v+=(h[k+7+2]-v)*w,m+=(h[k+7+3]-m)*w,p+=(h[k+7+4]-p)*w,g+=(h[k+7+5]-g)*w,y+=(h[k+7+6]-y)*w;break;case 1:d=h[k+1],v=h[k+2],m=h[k+3],p=h[k+4],g=h[k+5],y=h[k+6];break;default:d=this.getBezierValue(a,k,1,b-2),v=this.getBezierValue(a,k,2,b+18-2),m=this.getBezierValue(a,k,3,b+36-2),p=this.getBezierValue(a,k,4,b+54-2),g=this.getBezierValue(a,k,5,b+72-2),y=this.getBezierValue(a,k,6,b+90-2)}if(1==r)l.r=d,l.g=v,l.b=m,u.r=p,u.g=g,u.b=y;else{if(i==P.setup){var A=o.data.color,I=o.data.darkColor;l.r=A.r,l.g=A.g,l.b=A.b,u.r=I.r,u.g=I.g,u.b=I.b}l.r+=(d-l.r)*r,l.g+=(v-l.g)*r,l.b+=(m-l.b)*r,u.r+=(p-u.r)*r,u.g+=(g-u.g)*r,u.b+=(y-u.b)*r}}}}}]),a}(it),At=function(t){l(a,t);var e=d(a);function a(t,n){var r;return i(this,a),(r=e.call(this,t,[$+"|"+n])).slotIndex=0,r.slotIndex=n,r.attachmentNames=new Array(t),r}return o(a,[{key:"getFrameCount",value:function(){return this.frames.length}},{key:"setFrame",value:function(t,e,a){this.frames[t]=e,this.attachmentNames[t]=a}},{key:"apply",value:function(t,e,a,n,r,i,s){var o=t.slots[this.slotIndex];o.bone.active&&(s!=_.mixOut?a<this.frames[0]?i!=P.setup&&i!=P.first||this.setAttachment(t,o,o.data.attachmentName):this.setAttachment(t,o,this.attachmentNames[rt.search1(this.frames,a)]):i==P.setup&&this.setAttachment(t,o,o.data.attachmentName))}},{key:"setAttachment",value:function(t,e,a){e.setAttachment(a?t.getAttachment(this.slotIndex,a):null)}}]),a}(rt),It=function(t){l(a,t);var e=d(a);function a(t,n,r,s){var o;return i(this,a),(o=e.call(this,t,n,[J+"|"+r+"|"+s.id])).slotIndex=0,o.attachment=null,o.vertices=null,o.slotIndex=r,o.attachment=s,o.vertices=new Array(t),o}return o(a,[{key:"getFrameCount",value:function(){return this.frames.length}},{key:"setFrame",value:function(t,e,a){this.frames[t]=e,this.vertices[t]=a}},{key:"setBezier",value:function(t,e,a,n,r,i,s,o,h,l,u){var c=this.curves,f=this.getFrameCount()+18*t;0==a&&(c[e]=2+f);for(var d=.03*(n-2*i+o),v=.03*h-.06*s,m=.006*(3*(i-o)-n+l),p=.018*(s-h+.33333333),g=2*d+m,y=2*v+p,k=.3*(i-n)+d+.16666667*m,b=.3*s+v+.16666667*p,x=n+k,w=b,A=f+18;f<A;f+=2)c[f]=x,c[f+1]=w,k+=g,b+=y,g+=m,y+=p,x+=k,w+=b}},{key:"getCurvePercent",value:function(t,e){var a=this.curves,n=a[e];switch(n){case 0:var r=this.frames[e];return(t-r)/(this.frames[e+this.getFrameEntries()]-r);case 1:return 0}if(a[n-=2]>t){var i=this.frames[e];return a[n+1]*(t-i)/(a[n]-i)}var s=n+18;for(n+=2;n<s;n+=2)if(a[n]>=t){var o=a[n-2],h=a[n-1];return h+(t-o)/(a[n]-o)*(a[n+1]-h)}var l=a[s-2],u=a[s-1];return u+(1-u)*(t-l)/(this.frames[e+this.getFrameEntries()]-l)}},{key:"apply",value:function(t,e,a,n,r,i,s){var o=t.slots[this.slotIndex];if(o.bone.active){var h=o.getAttachment();if(h instanceof N&&h.deformAttachment==this.attachment){var l=o.deform;0==l.length&&(i=P.setup);var u=this.vertices,c=u[0].length,f=this.frames;if(a<f[0]){var d=h;switch(i){case P.setup:return void(l.length=0);case P.first:if(1==r)return void(l.length=0);if(l.length=c,d.bones){r=1-r;for(m=0;m<c;m++)l[m]*=r}else for(var v=d.vertices,m=0;m<c;m++)l[m]+=(v[m]-l[m])*r}}else if(l.length=c,a>=f[f.length-1]){var p=u[f.length-1];if(1==r)if(i==P.add){var g=h;if(g.bones)for(var y=0;y<c;y++)l[y]+=p[y];else for(var k=g.vertices,b=0;b<c;b++)l[b]+=p[b]-k[b]}else R.arrayCopy(p,0,l,0,c);else switch(i){case P.setup:var x=h;if(x.bones)for(var w=0;w<c;w++)l[w]=p[w]*r;else for(var A=x.vertices,I=0;I<c;I++){var E=A[I];l[I]=E+(p[I]-E)*r}break;case P.first:case P.replace:for(var S=0;S<c;S++)l[S]+=(p[S]-l[S])*r;break;case P.add:var T=h;if(T.bones)for(var C=0;C<c;C++)l[C]+=p[C]*r;else for(var M=T.vertices,F=0;F<c;F++)l[F]+=(p[F]-M[F])*r}}else{var Y=rt.search1(f,a),X=this.getCurvePercent(a,Y),L=u[Y],_=u[Y+1];if(1==r)if(i==P.add){var O=h;if(O.bones)for(var B=0;B<c;B++){var D=L[B];l[B]+=D+(_[B]-D)*X}else for(var V=O.vertices,U=0;U<c;U++){var W=L[U];l[U]+=W+(_[U]-W)*X-V[U]}}else for(var j=0;j<c;j++){var q=L[j];l[j]=q+(_[j]-q)*X}else switch(i){case P.setup:var G=h;if(G.bones)for(var z=0;z<c;z++){var H=L[z];l[z]=(H+(_[z]-H)*X)*r}else for(var $=G.vertices,J=0;J<c;J++){var Q=L[J],Z=$[J];l[J]=Z+(Q+(_[J]-Q)*X-Z)*r}break;case P.first:case P.replace:for(var K=0;K<c;K++){var tt=L[K];l[K]+=(tt+(_[K]-tt)*X-l[K])*r}break;case P.add:var et=h;if(et.bones)for(var at=0;at<c;at++){var nt=L[at];l[at]+=(nt+(_[at]-nt)*X)*r}else for(var it=et.vertices,st=0;st<c;st++){var ot=L[st];l[st]+=(ot+(_[st]-ot)*X-it[st])*r}}}}}}}]),a}(it),Et=function(t){l(a,t);var e=d(a);function a(t){var n;return i(this,a),(n=e.call(this,t,a.propertyIds)).events=null,n.events=new Array(t),n}return o(a,[{key:"getFrameCount",value:function(){return this.frames.length}},{key:"setFrame",value:function(t,e){this.frames[t]=e.time,this.events[t]=e}},{key:"apply",value:function(t,e,a,n,r,i,s){if(n){var o=this.frames,h=this.frames.length;if(e>a)this.apply(t,e,Number.MAX_VALUE,n,r,i,s),e=-1;else if(e>=o[h-1])return;if(!(a<o[0])){var l=0;if(e<o[0])l=0;else for(var u=o[l=rt.search1(o,e)+1];l>0&&o[l-1]==u;)l--;for(;l<h&&a>=o[l];l++)n.push(this.events[l])}}}}]),a}(rt);Et.propertyIds=[""+Q];var St=function(t){l(a,t);var e=d(a);function a(t){var n;return i(this,a),(n=e.call(this,t,a.propertyIds)).drawOrders=null,n.drawOrders=new Array(t),n}return o(a,[{key:"getFrameCount",value:function(){return this.frames.length}},{key:"setFrame",value:function(t,e,a){this.frames[t]=e,this.drawOrders[t]=a}},{key:"apply",value:function(t,e,a,n,r,i,s){if(s!=_.mixOut)if(a<this.frames[0])i!=P.setup&&i!=P.first||R.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);else{var o=this.drawOrders[rt.search1(this.frames,a)];if(o)for(var h=t.drawOrder,l=t.slots,u=0,c=o.length;u<c;u++)h[u]=l[o[u]];else R.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length)}else i==P.setup&&R.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length)}}]),a}(rt);St.propertyIds=[""+Z];var Tt,Rt=function(t){l(a,t);var e=d(a);function a(t,n,r){var s;return i(this,a),(s=e.call(this,t,n,[K+"|"+r])).ikConstraintIndex=0,s.ikConstraintIndex=r,s}return o(a,[{key:"getFrameEntries",value:function(){return 6}},{key:"setFrame",value:function(t,e,a,n,r,i,s){t*=6,this.frames[t]=e,this.frames[t+1]=a,this.frames[t+2]=n,this.frames[t+3]=r,this.frames[t+4]=i?1:0,this.frames[t+5]=s?1:0}},{key:"apply",value:function(t,e,a,n,r,i,s){var o=t.ikConstraints[this.ikConstraintIndex];if(o.active){var h=this.frames;if(a<h[0])switch(i){case P.setup:return o.mix=o.data.mix,o.softness=o.data.softness,o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,void(o.stretch=o.data.stretch);case P.first:o.mix+=(o.data.mix-o.mix)*r,o.softness+=(o.data.softness-o.softness)*r,o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,o.stretch=o.data.stretch}else{var l=0,u=0,c=rt.search(h,a,6),f=this.curves[c/6];switch(f){case 0:var d=h[c];l=h[c+1],u=h[c+2];var v=(a-d)/(h[c+6]-d);l+=(h[c+6+1]-l)*v,u+=(h[c+6+2]-u)*v;break;case 1:l=h[c+1],u=h[c+2];break;default:l=this.getBezierValue(a,c,1,f-2),u=this.getBezierValue(a,c,2,f+18-2)}i==P.setup?(o.mix=o.data.mix+(l-o.data.mix)*r,o.softness=o.data.softness+(u-o.data.softness)*r,s==_.mixOut?(o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,o.stretch=o.data.stretch):(o.bendDirection=h[c+3],o.compress=0!=h[c+4],o.stretch=0!=h[c+5])):(o.mix+=(l-o.mix)*r,o.softness+=(u-o.softness)*r,s==_.mixIn&&(o.bendDirection=h[c+3],o.compress=0!=h[c+4],o.stretch=0!=h[c+5]))}}}}]),a}(it),Ct=function(t){l(a,t);var e=d(a);function a(t,n,r){var s;return i(this,a),(s=e.call(this,t,n,[tt+"|"+r])).transformConstraintIndex=0,s.transformConstraintIndex=r,s}return o(a,[{key:"getFrameEntries",value:function(){return 7}},{key:"setFrame",value:function(t,e,a,n,r,i,s,o){var h=this.frames;h[t*=7]=e,h[t+1]=a,h[t+2]=n,h[t+3]=r,h[t+4]=i,h[t+5]=s,h[t+6]=o}},{key:"apply",value:function(t,e,a,n,r,i,s){var o=t.transformConstraints[this.transformConstraintIndex];if(o.active){var h=this.frames;if(a<h[0]){var l=o.data;switch(i){case P.setup:return o.mixRotate=l.mixRotate,o.mixX=l.mixX,o.mixY=l.mixY,o.mixScaleX=l.mixScaleX,o.mixScaleY=l.mixScaleY,void(o.mixShearY=l.mixShearY);case P.first:o.mixRotate+=(l.mixRotate-o.mixRotate)*r,o.mixX+=(l.mixX-o.mixX)*r,o.mixY+=(l.mixY-o.mixY)*r,o.mixScaleX+=(l.mixScaleX-o.mixScaleX)*r,o.mixScaleY+=(l.mixScaleY-o.mixScaleY)*r,o.mixShearY+=(l.mixShearY-o.mixShearY)*r}}else{var u,c,f,d,v,m,p=rt.search(h,a,7),g=this.curves[p/7];switch(g){case 0:var y=h[p];u=h[p+1],c=h[p+2],f=h[p+3],d=h[p+4],v=h[p+5],m=h[p+6];var k=(a-y)/(h[p+7]-y);u+=(h[p+7+1]-u)*k,c+=(h[p+7+2]-c)*k,f+=(h[p+7+3]-f)*k,d+=(h[p+7+4]-d)*k,v+=(h[p+7+5]-v)*k,m+=(h[p+7+6]-m)*k;break;case 1:u=h[p+1],c=h[p+2],f=h[p+3],d=h[p+4],v=h[p+5],m=h[p+6];break;default:u=this.getBezierValue(a,p,1,g-2),c=this.getBezierValue(a,p,2,g+18-2),f=this.getBezierValue(a,p,3,g+36-2),d=this.getBezierValue(a,p,4,g+54-2),v=this.getBezierValue(a,p,5,g+72-2),m=this.getBezierValue(a,p,6,g+90-2)}if(i==P.setup){var b=o.data;o.mixRotate=b.mixRotate+(u-b.mixRotate)*r,o.mixX=b.mixX+(c-b.mixX)*r,o.mixY=b.mixY+(f-b.mixY)*r,o.mixScaleX=b.mixScaleX+(d-b.mixScaleX)*r,o.mixScaleY=b.mixScaleY+(v-b.mixScaleY)*r,o.mixShearY=b.mixShearY+(m-b.mixShearY)*r}else o.mixRotate+=(u-o.mixRotate)*r,o.mixX+=(c-o.mixX)*r,o.mixY+=(f-o.mixY)*r,o.mixScaleX+=(d-o.mixScaleX)*r,o.mixScaleY+=(v-o.mixScaleY)*r,o.mixShearY+=(m-o.mixShearY)*r}}}}]),a}(it),Mt=function(t){l(a,t);var e=d(a);function a(t,n,r){var s;return i(this,a),(s=e.call(this,t,n,et+"|"+r)).pathConstraintIndex=0,s.pathConstraintIndex=r,s}return o(a,[{key:"apply",value:function(t,e,a,n,r,i,s){var o=t.pathConstraints[this.pathConstraintIndex];if(o.active)if(a<this.frames[0])switch(i){case P.setup:return void(o.position=o.data.position);case P.first:o.position+=(o.data.position-o.position)*r}else{var h=this.getCurveValue(a);i==P.setup?o.position=o.data.position+(h-o.data.position)*r:o.position+=(h-o.position)*r}}}]),a}(st),Ft=function(t){l(a,t);var e=d(a);function a(t,n,r){var s;return i(this,a),(s=e.call(this,t,n,at+"|"+r)).pathConstraintIndex=0,s.pathConstraintIndex=r,s}return o(a,[{key:"apply",value:function(t,e,a,n,r,i,s){var o=t.pathConstraints[this.pathConstraintIndex];if(o.active)if(a<this.frames[0])switch(i){case P.setup:return void(o.spacing=o.data.spacing);case P.first:o.spacing+=(o.data.spacing-o.spacing)*r}else{var h=this.getCurveValue(a);i==P.setup?o.spacing=o.data.spacing+(h-o.data.spacing)*r:o.spacing+=(h-o.spacing)*r}}}]),a}(st),Yt=function(t){l(a,t);var e=d(a);function a(t,n,r){var s;return i(this,a),(s=e.call(this,t,n,[nt+"|"+r])).pathConstraintIndex=0,s.pathConstraintIndex=r,s}return o(a,[{key:"getFrameEntries",value:function(){return 4}},{key:"setFrame",value:function(t,e,a,n,r){var i=this.frames;i[t<<=2]=e,i[t+1]=a,i[t+2]=n,i[t+3]=r}},{key:"apply",value:function(t,e,a,n,r,i,s){var o=t.pathConstraints[this.pathConstraintIndex];if(o.active){var h=this.frames;if(a<h[0])switch(i){case P.setup:return o.mixRotate=o.data.mixRotate,o.mixX=o.data.mixX,void(o.mixY=o.data.mixY);case P.first:o.mixRotate+=(o.data.mixRotate-o.mixRotate)*r,o.mixX+=(o.data.mixX-o.mixX)*r,o.mixY+=(o.data.mixY-o.mixY)*r}else{var l,u,c,f=rt.search(h,a,4),d=this.curves[f>>2];switch(d){case 0:var v=h[f];l=h[f+1],u=h[f+2],c=h[f+3];var m=(a-v)/(h[f+4]-v);l+=(h[f+4+1]-l)*m,u+=(h[f+4+2]-u)*m,c+=(h[f+4+3]-c)*m;break;case 1:l=h[f+1],u=h[f+2],c=h[f+3];break;default:l=this.getBezierValue(a,f,1,d-2),u=this.getBezierValue(a,f,2,d+18-2),c=this.getBezierValue(a,f,3,d+36-2)}if(i==P.setup){var p=o.data;o.mixRotate=p.mixRotate+(l-p.mixRotate)*r,o.mixX=p.mixX+(u-p.mixX)*r,o.mixY=p.mixY+(c-p.mixY)*r}else o.mixRotate+=(l-o.mixRotate)*r,o.mixX+=(u-o.mixX)*r,o.mixY+=(c-o.mixY)*r}}}}]),a}(it),Xt=function(){function t(e){i(this,t),this.data=null,this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new Nt(this),this.propertyIDs=new w,this.animationsChanged=!1,this.trackEntryPool=new M((function(){return new Lt})),this.data=e}return o(t,[{key:"update",value:function(t){t*=this.timeScale;for(var e=this.tracks,a=0,n=e.length;a<n;a++){var r=e[a];if(r){r.animationLast=r.nextAnimationLast,r.trackLast=r.nextTrackLast;var i=t*r.timeScale;if(r.delay>0){if(r.delay-=i,r.delay>0)continue;i=-r.delay,r.delay=0}var s=r.next;if(s){var o=r.trackLast-s.delay;if(o>=0){for(s.delay=0,s.trackTime+=0==r.timeScale?0:(o/r.timeScale+t)*s.timeScale,r.trackTime+=i,this.setCurrent(a,s,!0);s.mixingFrom;)s.mixTime+=t,s=s.mixingFrom;continue}}else if(r.trackLast>=r.trackEnd&&!r.mixingFrom){e[a]=null,this.queue.end(r),this.clearNext(r);continue}if(r.mixingFrom&&this.updateMixingFrom(r,t)){var h=r.mixingFrom;for(r.mixingFrom=null,h&&(h.mixingTo=null);h;)this.queue.end(h),h=h.mixingFrom}r.trackTime+=i}}this.queue.drain()}},{key:"updateMixingFrom",value:function(t,e){var a=t.mixingFrom;if(!a)return!0;var n=this.updateMixingFrom(a,e);return a.animationLast=a.nextAnimationLast,a.trackLast=a.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration?(0!=a.totalAlpha&&0!=t.mixDuration||(t.mixingFrom=a.mixingFrom,a.mixingFrom&&(a.mixingFrom.mixingTo=t),t.interruptAlpha=a.interruptAlpha,this.queue.end(a)),n):(a.trackTime+=e*a.timeScale,t.mixTime+=e,!1)}},{key:"apply",value:function(t){if(!t)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var e=this.events,a=this.tracks,n=!1,r=0,i=a.length;r<i;r++){var s=a[r];if(s&&!(s.delay>0)){n=!0;var o=0==r?P.first:s.mixBlend,h=s.alpha;s.mixingFrom?h*=this.applyMixingFrom(s,t,o):s.trackTime>=s.trackEnd&&!s.next&&(h=0);var l=s.animationLast,u=s.getAnimationTime(),c=u,f=e;s.reverse&&(c=s.animation.duration-c,f=null);var d=s.animation.timelines,v=d.length;if(0==r&&1==h||o==P.add)for(var m=0;m<v;m++){R.webkit602BugfixHelper(h,o);var p=d[m];p instanceof At?this.applyAttachmentTimeline(p,t,c,o,!0):p.apply(t,l,c,f,h,o,_.mixIn)}else{var g=s.timelineMode,y=s.timelinesRotation.length!=v<<1;y&&(s.timelinesRotation.length=v<<1);for(var k=0;k<v;k++){var b=d[k],x=g[k]==Bt?o:P.setup;b instanceof ht?this.applyRotateTimeline(b,t,c,h,x,s.timelinesRotation,k<<1,y):b instanceof At?this.applyAttachmentTimeline(b,t,c,o,!0):(R.webkit602BugfixHelper(h,o),b.apply(t,l,c,f,h,x,_.mixIn))}}this.queueEvents(s,u),e.length=0,s.nextAnimationLast=u,s.nextTrackLast=s.trackTime}}for(var w=this.unkeyedState+jt,A=t.slots,I=0,E=t.slots.length;I<E;I++){var S=A[I];if(S.attachmentState==w){var T=S.data.attachmentName;S.setAttachment(T?t.getAttachment(S.data.index,T):null)}}return this.unkeyedState+=2,this.queue.drain(),n}},{key:"applyMixingFrom",value:function(t,e,a){var n=t.mixingFrom;n.mixingFrom&&this.applyMixingFrom(n,e,a);var r=0;0==t.mixDuration?(r=1,a==P.first&&(a=P.setup)):((r=t.mixTime/t.mixDuration)>1&&(r=1),a!=P.first&&(a=n.mixBlend));var i=r<n.attachmentThreshold,s=r<n.drawOrderThreshold,o=n.animation.timelines,h=o.length,l=n.alpha*t.interruptAlpha,u=l*(1-r),c=n.animationLast,f=n.getAnimationTime(),d=f,v=null;if(n.reverse?d=n.animation.duration-d:r<n.eventThreshold&&(v=this.events),a==P.add)for(var m=0;m<h;m++)o[m].apply(e,c,d,v,u,a,_.mixOut);else{var p=n.timelineMode,g=n.timelineHoldMix,y=n.timelinesRotation.length!=h<<1;y&&(n.timelinesRotation.length=h<<1),n.totalAlpha=0;for(var k=0;k<h;k++){var b=o[k],x=_.mixOut,w=void 0,A=0;switch(p[k]){case Bt:if(!s&&b instanceof St)continue;w=a,A=u;break;case Dt:w=P.setup,A=u;break;case Vt:w=a,A=l;break;case Ut:w=P.setup,A=l;break;default:w=P.setup;var I=g[k];A=l*Math.max(0,1-I.mixTime/I.mixDuration)}n.totalAlpha+=A,b instanceof ht?this.applyRotateTimeline(b,e,d,A,w,n.timelinesRotation,k<<1,y):b instanceof At?this.applyAttachmentTimeline(b,e,d,w,i):(R.webkit602BugfixHelper(A,a),s&&b instanceof St&&w==P.setup&&(x=_.mixIn),b.apply(e,c,d,v,A,w,x))}}return t.mixDuration>0&&this.queueEvents(n,f),this.events.length=0,n.nextAnimationLast=f,n.nextTrackLast=n.trackTime,r}},{key:"applyAttachmentTimeline",value:function(t,e,a,n,r){var i=e.slots[t.slotIndex];i.bone.active&&(a<t.frames[0]?n!=P.setup&&n!=P.first||this.setAttachment(e,i,i.data.attachmentName,r):this.setAttachment(e,i,t.attachmentNames[rt.search1(t.frames,a)],r),i.attachmentState<=this.unkeyedState&&(i.attachmentState=this.unkeyedState+jt))}},{key:"setAttachment",value:function(t,e,a,n){e.setAttachment(a?t.getAttachment(e.data.index,a):null),n&&(e.attachmentState=this.unkeyedState+qt)}},{key:"applyRotateTimeline",value:function(t,e,a,n,r,i,s,o){if(o&&(i[s]=0),1!=n){var h=e.bones[t.boneIndex];if(h.active){var l=0,u=0;if(a<t.frames[0])switch(r){case P.setup:h.rotation=h.data.rotation;default:return;case P.first:l=h.rotation,u=h.data.rotation}else l=r==P.setup?h.data.rotation:h.rotation,u=h.data.rotation+t.getCurveValue(a);var c=0,f=u-l;if(0==(f-=360*(16384-(16384.499999999996-f/360|0))))c=i[s];else{var d=0,v=0;o?(d=0,v=f):(d=i[s],v=i[s+1]);var m=f>0,p=d>=0;I.signum(v)!=I.signum(f)&&Math.abs(v)<=90&&(Math.abs(d)>180&&(d+=360*I.signum(d)),p=m),c=f+d-d%360,p!=m&&(c+=360*I.signum(d)),i[s]=c}i[s+1]=f,h.rotation=l+c*n}}else t.apply(e,0,a,null,1,r,_.mixIn)}},{key:"queueEvents",value:function(t,e){for(var a=t.animationStart,n=t.animationEnd,r=n-a,i=t.trackLast%r,s=this.events,o=0,h=s.length;o<h;o++){var l=s[o];if(l.time<i)break;l.time>n||this.queue.event(t,l)}for((t.loop?0==r||i>t.trackTime%r:e>=n&&t.animationLast<n)&&this.queue.complete(t);o<h;o++){var u=s[o];u.time<a||this.queue.event(t,u)}}},{key:"clearTracks",value:function(){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var e=0,a=this.tracks.length;e<a;e++)this.clearTrack(e);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()}},{key:"clearTrack",value:function(t){if(!(t>=this.tracks.length)){var e=this.tracks[t];if(e){this.queue.end(e),this.clearNext(e);for(var a=e;;){var n=a.mixingFrom;if(!n)break;this.queue.end(n),a.mixingFrom=null,a.mixingTo=null,a=n}this.tracks[e.trackIndex]=null,this.queue.drain()}}}},{key:"setCurrent",value:function(t,e,a){var n=this.expandToIndex(t);this.tracks[t]=e,e.previous=null,n&&(a&&this.queue.interrupt(n),e.mixingFrom=n,n.mixingTo=e,e.mixTime=0,n.mixingFrom&&n.mixDuration>0&&(e.interruptAlpha*=Math.min(1,n.mixTime/n.mixDuration)),n.timelinesRotation.length=0),this.queue.start(e)}},{key:"setAnimation",value:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this.data.skeletonData.findAnimation(e);if(!n)throw new Error("Animation not found: "+e);return this.setAnimationWith(t,n,a)}},{key:"setAnimationWith",value:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)throw new Error("animation cannot be null.");var n=!0,r=this.expandToIndex(t);r&&(-1==r.nextTrackLast?(this.tracks[t]=r.mixingFrom,this.queue.interrupt(r),this.queue.end(r),this.clearNext(r),r=r.mixingFrom,n=!1):this.clearNext(r));var i=this.trackEntry(t,e,a,r);return this.setCurrent(t,i,n),this.queue.drain(),i}},{key:"addAnimation",value:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=this.data.skeletonData.findAnimation(e);if(!r)throw new Error("Animation not found: "+e);return this.addAnimationWith(t,r,a,n)}},{key:"addAnimationWith",value:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!e)throw new Error("animation cannot be null.");var r=this.expandToIndex(t);if(r)for(;r.next;)r=r.next;var i=this.trackEntry(t,e,a,r);return r?(r.next=i,i.previous=r,n<=0&&(n+=r.getTrackComplete()-i.mixDuration)):(this.setCurrent(t,i,!0),this.queue.drain()),i.delay=n,i}},{key:"setEmptyAnimation",value:function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.setAnimationWith(e,t.emptyAnimation(),!1);return n.mixDuration=a,n.trackEnd=a,n}},{key:"addEmptyAnimation",value:function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.addAnimationWith(e,t.emptyAnimation(),!1,n);return n<=0&&(r.delay+=r.mixDuration-a),r.mixDuration=a,r.trackEnd=a,r}},{key:"setEmptyAnimations",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var a=0,n=this.tracks.length;a<n;a++){var r=this.tracks[a];r&&this.setEmptyAnimation(r.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()}},{key:"expandToIndex",value:function(t){return t<this.tracks.length?this.tracks[t]:(R.ensureArrayCapacity(this.tracks,t+1,null),this.tracks.length=t+1,null)}},{key:"trackEntry",value:function(t,e,a,n){var r=this.trackEntryPool.obtain();return r.reset(),r.trackIndex=t,r.animation=e,r.loop=a,r.holdPrevious=!1,r.eventThreshold=0,r.attachmentThreshold=0,r.drawOrderThreshold=0,r.animationStart=0,r.animationEnd=e.duration,r.animationLast=-1,r.nextAnimationLast=-1,r.delay=0,r.trackTime=0,r.trackLast=-1,r.nextTrackLast=-1,r.trackEnd=Number.MAX_VALUE,r.timeScale=1,r.alpha=1,r.interruptAlpha=1,r.mixTime=0,r.mixDuration=n?this.data.getMix(n.animation,e):0,r.mixBlend=P.replace,r}},{key:"clearNext",value:function(t){for(var e=t.next;e;)this.queue.dispose(e),e=e.next;t.next=null}},{key:"_animationsChanged",value:function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var t=this.tracks,e=0,a=t.length;e<a;e++){var n=t[e];if(n){for(;n.mixingFrom;)n=n.mixingFrom;do{n.mixingTo&&n.mixBlend==P.add||this.computeHold(n),n=n.mixingTo}while(n)}}}},{key:"computeHold",value:function(t){var e=t.mixingTo,a=t.animation.timelines,n=t.animation.timelines.length,r=t.timelineMode;r.length=n;var i=t.timelineHoldMix;i.length=0;var s=this.propertyIDs;if(e&&e.holdPrevious)for(var o=0;o<n;o++)r[o]=s.addAll(a[o].getPropertyIds())?Ut:Vt;else t:for(var h=0;h<n;h++){var l=a[h],u=l.getPropertyIds();if(s.addAll(u))if(!e||l instanceof At||l instanceof St||l instanceof Et||!e.animation.hasTimeline(u))r[h]=Dt;else{for(var c=e.mixingTo;c;c=c.mixingTo)if(!c.animation.hasTimeline(u)){if(t.mixDuration>0){r[h]=Wt,i[h]=c;continue t}break}r[h]=Ut}else r[h]=Bt}}},{key:"getCurrent",value:function(t){return t>=this.tracks.length?null:this.tracks[t]}},{key:"addListener",value:function(t){if(!t)throw new Error("listener cannot be null.");this.listeners.push(t)}},{key:"removeListener",value:function(t){var e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)}},{key:"clearListeners",value:function(){this.listeners.length=0}},{key:"clearListenerNotifications",value:function(){this.queue.clear()}}],[{key:"emptyAnimation",value:function(){return Gt||(Gt=new O("<empty>",[],0)),Gt}}]),t}(),Lt=function(){function t(){i(this,t),this.animation=null,this.previous=null,this.next=null,this.mixingFrom=null,this.mixingTo=null,this.listener=null,this.trackIndex=0,this.loop=!1,this.holdPrevious=!1,this.reverse=!1,this.eventThreshold=0,this.attachmentThreshold=0,this.drawOrderThreshold=0,this.animationStart=0,this.animationEnd=0,this.animationLast=0,this.nextAnimationLast=0,this.delay=0,this.trackTime=0,this.trackLast=0,this.nextTrackLast=0,this.trackEnd=0,this.timeScale=0,this.alpha=0,this.mixTime=0,this.mixDuration=0,this.interruptAlpha=0,this.totalAlpha=0,this.mixBlend=P.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}return o(t,[{key:"reset",value:function(){this.next=null,this.previous=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0}},{key:"getAnimationTime",value:function(){if(this.loop){var t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)}},{key:"setAnimationLast",value:function(t){this.animationLast=t,this.nextAnimationLast=t}},{key:"isComplete",value:function(){return this.trackTime>=this.animationEnd-this.animationStart}},{key:"resetRotationDirections",value:function(){this.timelinesRotation.length=0}},{key:"getTrackComplete",value:function(){var t=this.animationEnd-this.animationStart;if(0!=t){if(this.loop)return t*(1+(this.trackTime/t|0));if(this.trackTime<t)return t}return this.trackTime}}]),t}(),Nt=function(){function t(e){i(this,t),this.objects=[],this.drainDisabled=!1,this.animState=null,this.animState=e}return o(t,[{key:"start",value:function(t){this.objects.push(Tt.start),this.objects.push(t),this.animState.animationsChanged=!0}},{key:"interrupt",value:function(t){this.objects.push(Tt.interrupt),this.objects.push(t)}},{key:"end",value:function(t){this.objects.push(Tt.end),this.objects.push(t),this.animState.animationsChanged=!0}},{key:"dispose",value:function(t){this.objects.push(Tt.dispose),this.objects.push(t)}},{key:"complete",value:function(t){this.objects.push(Tt.complete),this.objects.push(t)}},{key:"event",value:function(t,e){this.objects.push(Tt.event),this.objects.push(t),this.objects.push(e)}},{key:"drain",value:function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var t=this.objects,e=this.animState.listeners,a=0;a<t.length;a+=2){var n=t[a],r=t[a+1];switch(n){case Tt.start:r.listener&&r.listener.start&&r.listener.start(r);for(var i=0;i<e.length;i++)e[i].start&&e[i].start(r);break;case Tt.interrupt:r.listener&&r.listener.interrupt&&r.listener.interrupt(r);for(var s=0;s<e.length;s++)e[s].interrupt&&e[s].interrupt(r);break;case Tt.end:r.listener&&r.listener.end&&r.listener.end(r);for(var o=0;o<e.length;o++)e[o].end&&e[o].end(r);case Tt.dispose:r.listener&&r.listener.dispose&&r.listener.dispose(r);for(var h=0;h<e.length;h++)e[h].dispose&&e[h].dispose(r);this.animState.trackEntryPool.free(r);break;case Tt.complete:r.listener&&r.listener.complete&&r.listener.complete(r);for(var l=0;l<e.length;l++)e[l].complete&&e[l].complete(r);break;case Tt.event:var u=t[2+a++];r.listener&&r.listener.event&&r.listener.event(r,u);for(var c=0;c<e.length;c++)e[c].event&&e[c].event(r,u)}}this.clear(),this.drainDisabled=!1}}},{key:"clear",value:function(){this.objects.length=0}}]),t}();!function(t){t[t.start=0]="start",t[t.interrupt=1]="interrupt",t[t.end=2]="end",t[t.dispose=3]="dispose",t[t.complete=4]="complete",t[t.event=5]="event"}(Tt||(Tt={}));var Pt,_t,Ot=function(){function t(){i(this,t)}return o(t,[{key:"start",value:function(t){}},{key:"interrupt",value:function(t){}},{key:"end",value:function(t){}},{key:"dispose",value:function(t){}},{key:"complete",value:function(t){}},{key:"event",value:function(t,e){}}]),t}(),Bt=0,Dt=1,Vt=2,Ut=3,Wt=4,jt=1,qt=2,Gt=null,zt=function(){function t(e){if(i(this,t),this.skeletonData=null,this.animationToMixTime={},this.defaultMix=0,!e)throw new Error("skeletonData cannot be null.");this.skeletonData=e}return o(t,[{key:"setMix",value:function(t,e,a){var n=this.skeletonData.findAnimation(t);if(!n)throw new Error("Animation not found: "+t);var r=this.skeletonData.findAnimation(e);if(!r)throw new Error("Animation not found: "+e);this.setMixWith(n,r,a)}},{key:"setMixWith",value:function(t,e,a){if(!t)throw new Error("from cannot be null.");if(!e)throw new Error("to cannot be null.");var n=t.name+"."+e.name;this.animationToMixTime[n]=a}},{key:"getMix",value:function(t,e){var a=t.name+"."+e.name,n=this.animationToMixTime[a];return void 0===n?this.defaultMix:n}}]),t}(),Ht=function(t){l(a,t);var e=d(a);function a(t){var n;return i(this,a),(n=e.call(this,t)).color=new A(1,1,1,1),n}return o(a,[{key:"copy",value:function(){var t=new a(this.name);return this.copyTo(t),t.color.setFromColor(this.color),t}}]),a}(N),$t=function(t){l(a,t);var e=d(a);function a(t){var n;return i(this,a),(n=e.call(this,t)).endSlot=null,n.color=new A(.2275,.2275,.8078,1),n}return o(a,[{key:"copy",value:function(){var t=new a(this.name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t}}]),a}(N),Jt=function(){function t(e){i(this,t),this._image=e}return o(t,[{key:"getImage",value:function(){return this._image}}]),t}();!function(t){t[t.Nearest=9728]="Nearest",t[t.Linear=9729]="Linear",t[t.MipMap=9987]="MipMap",t[t.MipMapNearestNearest=9984]="MipMapNearestNearest",t[t.MipMapLinearNearest=9985]="MipMapLinearNearest",t[t.MipMapNearestLinear=9986]="MipMapNearestLinear",t[t.MipMapLinearLinear=9987]="MipMapLinearLinear"}(Pt||(Pt={})),function(t){t[t.MirroredRepeat=33648]="MirroredRepeat",t[t.ClampToEdge=33071]="ClampToEdge",t[t.Repeat=10497]="Repeat"}(_t||(_t={}));var Qt=o((function t(){i(this,t),this.u=0,this.v=0,this.u2=0,this.v2=0,this.width=0,this.height=0,this.degrees=0,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0})),Zt=function(t){l(a,t);var e=d(a);function a(){return i(this,a),e.apply(this,arguments)}return o(a,[{key:"setFilters",value:function(t,e){}},{key:"setWraps",value:function(t,e){}},{key:"dispose",value:function(){}}]),a}(Jt),Kt=function(){function t(e){i(this,t),this.pages=new Array,this.regions=new Array;for(var a=new te(e),n=new Array(4),r=null,s=null,o={size:function(){r.width=parseInt(n[1]),r.height=parseInt(n[2])},format:function(){},filter:function(){r.minFilter=R.enumValue(Pt,n[1]),r.magFilter=R.enumValue(Pt,n[2])},repeat:function(){-1!=n[1].indexOf("x")&&(r.uWrap=_t.Repeat),-1!=n[1].indexOf("y")&&(r.vWrap=_t.Repeat)},pma:function(){r.pma="true"==n[1]}},h={xy:function(){s.x=parseInt(n[1]),s.y=parseInt(n[2])},size:function(){s.width=parseInt(n[1]),s.height=parseInt(n[2])},bounds:function(){s.x=parseInt(n[1]),s.y=parseInt(n[2]),s.width=parseInt(n[3]),s.height=parseInt(n[4])},offset:function(){s.offsetX=parseInt(n[1]),s.offsetY=parseInt(n[2])},orig:function(){s.originalWidth=parseInt(n[1]),s.originalHeight=parseInt(n[2])},offsets:function(){s.offsetX=parseInt(n[1]),s.offsetY=parseInt(n[2]),s.originalWidth=parseInt(n[3]),s.originalHeight=parseInt(n[4])},rotate:function(){var t=n[1];"true"==t?s.degrees=90:"false"!=t&&(s.degrees=parseInt(t))},index:function(){s.index=parseInt(n[1])}},l=a.readLine();l&&0==l.trim().length;)l=a.readLine();for(;l&&0!=l.trim().length&&0!=a.readEntry(n,l);)l=a.readLine();for(var u=null,c=null;null!==l;)if(0==l.trim().length)r=null,l=a.readLine();else if(r){for((s=new ae).page=r,s.name=l;;){var f=a.readEntry(n,l=a.readLine());if(0==f)break;var d=h[n[0]];if(d)d();else{u||(u=[],c=[]),u.push(n[0]);for(var v=[],m=0;m<f;m++)v.push(parseInt(n[m+1]));c.push(v)}}0==s.originalWidth&&0==s.originalHeight&&(s.originalWidth=s.width,s.originalHeight=s.height),u&&u.length>0&&(s.names=u,s.values=c,u=null,c=null),s.u=s.x/r.width,s.v=s.y/r.height,90==s.degrees?(s.u2=(s.x+s.height)/r.width,s.v2=(s.y+s.width)/r.height):(s.u2=(s.x+s.width)/r.width,s.v2=(s.y+s.height)/r.height),this.regions.push(s)}else{for((r=new ee).name=l.trim();0!=a.readEntry(n,l=a.readLine());){var p=o[n[0]];p&&p()}this.pages.push(r)}}return o(t,[{key:"findRegion",value:function(t){for(var e=0;e<this.regions.length;e++)if(this.regions[e].name==t)return this.regions[e];return null}},{key:"setTextures",value:function(t){var e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=k(this.pages);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.setTexture(t.get(a+r.name))}}catch(t){n.e(t)}finally{n.f()}}},{key:"dispose",value:function(){for(var t=0;t<this.pages.length;t++)this.pages[t].texture.dispose()}}]),t}(),te=function(){function t(e){i(this,t),this.lines=null,this.index=0,this.lines=e.split(/\r\n|\r|\n/)}return o(t,[{key:"readLine",value:function(){return this.index>=this.lines.length?null:this.lines[this.index++]}},{key:"readEntry",value:function(t,e){if(!e)return 0;if(0==(e=e.trim()).length)return 0;var a=e.indexOf(":");if(-1==a)return 0;t[0]=e.substr(0,a).trim();for(var n=1,r=a+1;;n++){var i=e.indexOf(",",r);if(-1==i)return t[n]=e.substr(r).trim(),n;if(t[n]=e.substr(r,i-r).trim(),r=i+1,4==n)return 4}}}]),t}(),ee=function(){function t(){i(this,t),this.name=null,this.minFilter=Pt.Nearest,this.magFilter=Pt.Nearest,this.uWrap=_t.ClampToEdge,this.vWrap=_t.ClampToEdge,this.texture=null,this.width=0,this.height=0,this.pma=!1}return o(t,[{key:"setTexture",value:function(t){this.texture=t,t.setFilters(this.minFilter,this.magFilter),t.setWraps(this.uWrap,this.vWrap)}}]),t}(),ae=function(t){l(a,t);var e=d(a);function a(){var t;return i(this,a),(t=e.apply(this,arguments)).page=null,t.name=null,t.x=0,t.y=0,t.offsetX=0,t.offsetY=0,t.originalWidth=0,t.originalHeight=0,t.index=0,t.degrees=0,t.names=null,t.values=null,t}return o(a)}(Qt),ne=function(t){l(a,t);var e=d(a);function a(t){var n;return i(this,a),(n=e.call(this,t)).region=null,n.path=null,n.regionUVs=null,n.uvs=null,n.triangles=null,n.color=new A(1,1,1,1),n.width=0,n.height=0,n.hullLength=0,n.edges=null,n.parentMesh=null,n.tempColor=new A(0,0,0,0),n}return o(a,[{key:"updateUVs",value:function(){var t=this.regionUVs;this.uvs&&this.uvs.length==t.length||(this.uvs=R.newFloatArray(t.length));var e=this.uvs,a=this.uvs.length,n=this.region.u,r=this.region.v,i=0,s=0;if(this.region instanceof ae){var o=this.region,h=o.page.texture.getImage(),l=h.width,u=h.height;switch(o.degrees){case 90:n-=(o.originalHeight-o.offsetY-o.height)/l,r-=(o.originalWidth-o.offsetX-o.width)/u,i=o.originalHeight/l,s=o.originalWidth/u;for(var c=0;c<a;c+=2)e[c]=n+t[c+1]*i,e[c+1]=r+(1-t[c])*s;return;case 180:n-=(o.originalWidth-o.offsetX-o.width)/l,r-=o.offsetY/u,i=o.originalWidth/l,s=o.originalHeight/u;for(var f=0;f<a;f+=2)e[f]=n+(1-t[f])*i,e[f+1]=r+(1-t[f+1])*s;return;case 270:n-=o.offsetY/l,r-=o.offsetX/u,i=o.originalHeight/l,s=o.originalWidth/u;for(var d=0;d<a;d+=2)e[d]=n+(1-t[d+1])*i,e[d+1]=r+t[d]*s;return}n-=o.offsetX/l,r-=(o.originalHeight-o.offsetY-o.height)/u,i=o.originalWidth/l,s=o.originalHeight/u}else this.region?(i=this.region.u2-n,s=this.region.v2-r):(n=r=0,i=s=1);for(var v=0;v<a;v+=2)e[v]=n+t[v]*i,e[v+1]=r+t[v+1]*s}},{key:"getParentMesh",value:function(){return this.parentMesh}},{key:"setParentMesh",value:function(t){this.parentMesh=t,t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)}},{key:"copy",value:function(){if(this.parentMesh)return this.newLinkedMesh();var t=new a(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),this.copyTo(t),t.regionUVs=new Array(this.regionUVs.length),R.arrayCopy(this.regionUVs,0,t.regionUVs,0,this.regionUVs.length),t.uvs=new Array(this.uvs.length),R.arrayCopy(this.uvs,0,t.uvs,0,this.uvs.length),t.triangles=new Array(this.triangles.length),R.arrayCopy(this.triangles,0,t.triangles,0,this.triangles.length),t.hullLength=this.hullLength,this.edges&&(t.edges=new Array(this.edges.length),R.arrayCopy(this.edges,0,t.edges,0,this.edges.length)),t.width=this.width,t.height=this.height,t}},{key:"newLinkedMesh",value:function(){var t=new a(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),t.deformAttachment=this.deformAttachment,t.setParentMesh(this.parentMesh?this.parentMesh:this),t.updateUVs(),t}}]),a}(N),re=function(t){l(a,t);var e=d(a);function a(t){var n;return i(this,a),(n=e.call(this,t)).lengths=null,n.closed=!1,n.constantSpeed=!1,n.color=new A(1,1,1,1),n}return o(a,[{key:"copy",value:function(){var t=new a(this.name);return this.copyTo(t),t.lengths=new Array(this.lengths.length),R.arrayCopy(this.lengths,0,t.lengths,0,this.lengths.length),t.closed=closed,t.constantSpeed=this.constantSpeed,t.color.setFromColor(this.color),t}}]),a}(N),ie=function(t){l(a,t);var e=d(a);function a(t){var n;return i(this,a),(n=e.call(this,t)).x=0,n.y=0,n.rotation=0,n.color=new A(.38,.94,0,1),n}return o(a,[{key:"computeWorldPosition",value:function(t,e){return e.x=this.x*t.a+this.y*t.b+t.worldX,e.y=this.x*t.c+this.y*t.d+t.worldY,e}},{key:"computeWorldRotation",value:function(t){var e=I.cosDeg(this.rotation),a=I.sinDeg(this.rotation),n=e*t.a+a*t.b,r=e*t.c+a*t.d;return Math.atan2(r,n)*I.radDeg}},{key:"copy",value:function(){var t=new a(this.name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t}}]),a}(N),se=function(t){l(a,t);var e=d(a);function a(t){var n;return i(this,a),(n=e.call(this,t)).x=0,n.y=0,n.scaleX=1,n.scaleY=1,n.rotation=0,n.width=0,n.height=0,n.color=new A(1,1,1,1),n.path=null,n.rendererObject=null,n.region=null,n.offset=R.newFloatArray(8),n.uvs=R.newFloatArray(8),n.tempColor=new A(1,1,1,1),n}return o(a,[{key:"updateOffset",value:function(){this.region;var t=this.width/this.region.originalWidth*this.scaleX,e=this.height/this.region.originalHeight*this.scaleY,a=-this.width/2*this.scaleX+this.region.offsetX*t,n=-this.height/2*this.scaleY+this.region.offsetY*e,r=a+this.region.width*t,i=n+this.region.height*e,s=this.rotation*Math.PI/180,o=Math.cos(s),h=Math.sin(s),l=this.x,u=this.y,c=a*o+l,f=a*h,d=n*o+u,v=n*h,m=r*o+l,p=r*h,g=i*o+u,y=i*h,k=this.offset;k[0]=c-v,k[1]=d+f,k[2]=c-y,k[3]=g+f,k[4]=m-y,k[5]=g+p,k[6]=m-v,k[7]=d+p}},{key:"setRegion",value:function(t){this.region=t;var e=this.uvs;90==t.degrees?(e[2]=t.u,e[3]=t.v2,e[4]=t.u,e[5]=t.v,e[6]=t.u2,e[7]=t.v,e[0]=t.u2,e[1]=t.v2):(e[0]=t.u,e[1]=t.v2,e[2]=t.u,e[3]=t.v,e[4]=t.u2,e[5]=t.v,e[6]=t.u2,e[7]=t.v2)}},{key:"computeWorldVertices",value:function(t,e,a,n){var r=this.offset,i=t.worldX,s=t.worldY,o=t.a,h=t.b,l=t.c,u=t.d,c=0,f=0;c=r[0],f=r[1],e[a]=c*o+f*h+i,e[a+1]=c*l+f*u+s,a+=n,c=r[2],f=r[3],e[a]=c*o+f*h+i,e[a+1]=c*l+f*u+s,a+=n,c=r[4],f=r[5],e[a]=c*o+f*h+i,e[a+1]=c*l+f*u+s,a+=n,c=r[6],f=r[7],e[a]=c*o+f*h+i,e[a+1]=c*l+f*u+s}},{key:"copy",value:function(){var t=new a(this.name);return t.region=this.region,t.rendererObject=this.rendererObject,t.path=this.path,t.x=this.x,t.y=this.y,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.rotation=this.rotation,t.width=this.width,t.height=this.height,R.arrayCopy(this.uvs,0,t.uvs,0,8),R.arrayCopy(this.offset,0,t.offset,0,8),t.color.setFromColor(this.color),t}}]),a}(L);se.X1=0,se.Y1=1,se.C1R=2,se.C1G=3,se.C1B=4,se.C1A=5,se.U1=6,se.V1=7,se.X2=8,se.Y2=9,se.C2R=10,se.C2G=11,se.C2B=12,se.C2A=13,se.U2=14,se.V2=15,se.X3=16,se.Y3=17,se.C3R=18,se.C3G=19,se.C3B=20,se.C3A=21,se.U3=22,se.V3=23,se.X4=24,se.Y4=25,se.C4R=26,se.C4G=27,se.C4B=28,se.C4A=29,se.U4=30,se.V4=31;var oe,he=function(){function t(e){i(this,t),this.atlas=null,this.atlas=e}return o(t,[{key:"newRegionAttachment",value:function(t,e,a){var n=this.atlas.findRegion(a);if(!n)throw new Error("Region not found in atlas: "+a+" (region attachment: "+e+")");n.renderObject=n;var r=new se(e);return r.setRegion(n),r}},{key:"newMeshAttachment",value:function(t,e,a){var n=this.atlas.findRegion(a);if(!n)throw new Error("Region not found in atlas: "+a+" (mesh attachment: "+e+")");n.renderObject=n;var r=new ne(e);return r.region=n,r}},{key:"newBoundingBoxAttachment",value:function(t,e){return new Ht(e)}},{key:"newPathAttachment",value:function(t,e){return new re(e)}},{key:"newPointAttachment",value:function(t,e){return new ie(e)}},{key:"newClippingAttachment",value:function(t,e){return new $t(e)}}]),t}(),le=o((function t(e,a,n){if(i(this,t),this.index=0,this.name=null,this.parent=null,this.length=0,this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=oe.Normal,this.skinRequired=!1,this.color=new A,e<0)throw new Error("index must be >= 0.");if(!a)throw new Error("name cannot be null.");this.index=e,this.name=a,this.parent=n}));!function(t){t[t.Normal=0]="Normal",t[t.OnlyTranslation=1]="OnlyTranslation",t[t.NoRotationOrReflection=2]="NoRotationOrReflection",t[t.NoScale=3]="NoScale",t[t.NoScaleOrReflection=4]="NoScaleOrReflection"}(oe||(oe={}));var ue,ce,fe,de=function(){function t(e,a,n){if(i(this,t),this.data=null,this.skeleton=null,this.parent=null,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.a=0,this.b=0,this.c=0,this.d=0,this.worldY=0,this.worldX=0,this.sorted=!1,this.active=!1,!e)throw new Error("data cannot be null.");if(!a)throw new Error("skeleton cannot be null.");this.data=e,this.skeleton=a,this.parent=n,this.setToSetupPose()}return o(t,[{key:"isActive",value:function(){return this.active}},{key:"update",value:function(){this.updateWorldTransformWith(this.ax,this.ay,this.arotation,this.ascaleX,this.ascaleY,this.ashearX,this.ashearY)}},{key:"updateWorldTransform",value:function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)}},{key:"updateWorldTransformWith",value:function(t,e,a,n,r,i,s){this.ax=t,this.ay=e,this.arotation=a,this.ascaleX=n,this.ascaleY=r,this.ashearX=i,this.ashearY=s;var o=this.parent;if(!o){var h=this.skeleton,l=a+90+s,u=h.scaleX,c=h.scaleY;return this.a=I.cosDeg(a+i)*n*u,this.b=I.cosDeg(l)*r*u,this.c=I.sinDeg(a+i)*n*c,this.d=I.sinDeg(l)*r*c,this.worldX=t*u+h.x,void(this.worldY=e*c+h.y)}var f=o.a,d=o.b,v=o.c,m=o.d;switch(this.worldX=f*t+d*e+o.worldX,this.worldY=v*t+m*e+o.worldY,this.data.transformMode){case oe.Normal:var p=a+90+s,g=I.cosDeg(a+i)*n,y=I.cosDeg(p)*r,k=I.sinDeg(a+i)*n,b=I.sinDeg(p)*r;return this.a=f*g+d*k,this.b=f*y+d*b,this.c=v*g+m*k,void(this.d=v*y+m*b);case oe.OnlyTranslation:var x=a+90+s;this.a=I.cosDeg(a+i)*n,this.b=I.cosDeg(x)*r,this.c=I.sinDeg(a+i)*n,this.d=I.sinDeg(x)*r;break;case oe.NoRotationOrReflection:var w=f*f+v*v,A=0;w>1e-4?(w=Math.abs(f*m-d*v)/w,f/=this.skeleton.scaleX,d=(v/=this.skeleton.scaleY)*w,m=f*w,A=Math.atan2(v,f)*I.radDeg):(f=0,v=0,A=90-Math.atan2(m,d)*I.radDeg);var E=a+i-A,S=a+s-A+90,T=I.cosDeg(E)*n,R=I.cosDeg(S)*r,C=I.sinDeg(E)*n,M=I.sinDeg(S)*r;this.a=f*T-d*C,this.b=f*R-d*M,this.c=v*T+m*C,this.d=v*R+m*M;break;case oe.NoScale:case oe.NoScaleOrReflection:var F=I.cosDeg(a),Y=I.sinDeg(a),X=(f*F+d*Y)/this.skeleton.scaleX,L=(v*F+m*Y)/this.skeleton.scaleY,N=Math.sqrt(X*X+L*L);N>1e-5&&(N=1/N),X*=N,L*=N,N=Math.sqrt(X*X+L*L),this.data.transformMode==oe.NoScale&&f*m-d*v<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(N=-N);var P=Math.PI/2+Math.atan2(L,X),_=Math.cos(P)*N,O=Math.sin(P)*N,B=I.cosDeg(i)*n,D=I.cosDeg(90+s)*r,V=I.sinDeg(i)*n,U=I.sinDeg(90+s)*r;this.a=X*B+_*V,this.b=X*D+_*U,this.c=L*B+O*V,this.d=L*D+O*U}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY}},{key:"setToSetupPose",value:function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY}},{key:"getWorldRotationX",value:function(){return Math.atan2(this.c,this.a)*I.radDeg}},{key:"getWorldRotationY",value:function(){return Math.atan2(this.d,this.b)*I.radDeg}},{key:"getWorldScaleX",value:function(){return Math.sqrt(this.a*this.a+this.c*this.c)}},{key:"getWorldScaleY",value:function(){return Math.sqrt(this.b*this.b+this.d*this.d)}},{key:"updateAppliedTransform",value:function(){var t=this.parent;if(!t)return this.ax=this.worldX-this.skeleton.x,this.ay=this.worldY-this.skeleton.y,this.arotation=Math.atan2(this.c,this.a)*I.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,void(this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*I.radDeg);var e=t.a,a=t.b,n=t.c,r=t.d,i=1/(e*r-a*n),s=this.worldX-t.worldX,o=this.worldY-t.worldY;this.ax=s*r*i-o*a*i,this.ay=o*e*i-s*n*i;var h=i*r,l=i*e,u=i*a,c=i*n,f=h*this.a-u*this.c,d=h*this.b-u*this.d,v=l*this.c-c*this.a,m=l*this.d-c*this.b;if(this.ashearX=0,this.ascaleX=Math.sqrt(f*f+v*v),this.ascaleX>1e-4){var p=f*m-d*v;this.ascaleY=p/this.ascaleX,this.ashearY=Math.atan2(f*d+v*m,p)*I.radDeg,this.arotation=Math.atan2(v,f)*I.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(d*d+m*m),this.ashearY=0,this.arotation=90-Math.atan2(m,d)*I.radDeg}},{key:"worldToLocal",value:function(t){var e=1/(this.a*this.d-this.b*this.c),a=t.x-this.worldX,n=t.y-this.worldY;return t.x=a*this.d*e-n*this.b*e,t.y=n*this.a*e-a*this.c*e,t}},{key:"localToWorld",value:function(t){var e=t.x,a=t.y;return t.x=e*this.a+a*this.b+this.worldX,t.y=e*this.c+a*this.d+this.worldY,t}},{key:"worldToLocalRotation",value:function(t){var e=I.sinDeg(t),a=I.cosDeg(t);return Math.atan2(this.a*e-this.c*a,this.d*a-this.b*e)*I.radDeg+this.rotation-this.shearX}},{key:"localToWorldRotation",value:function(t){t-=this.rotation-this.shearX;var e=I.sinDeg(t),a=I.cosDeg(t);return Math.atan2(a*this.c+e*this.d,a*this.a+e*this.b)*I.radDeg}},{key:"rotateWorld",value:function(t){var e=this.a,a=this.b,n=this.c,r=this.d,i=I.cosDeg(t),s=I.sinDeg(t);this.a=i*e-s*n,this.b=i*a-s*r,this.c=s*e+i*n,this.d=s*a+i*r}}]),t}(),ve=o((function t(e,a,n){i(this,t),this.name=e,this.order=a,this.skinRequired=n})),me=function(){function t(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;i(this,t),this.pathPrefix=null,this.assets={},this.errors={},this.toLoad=0,this.loaded=0,this.textureLoader=e,this.pathPrefix=a,this.downloader=n||new pe}return o(t,[{key:"start",value:function(t){return this.toLoad++,this.pathPrefix+t}},{key:"success",value:function(t,e,a){this.toLoad--,this.loaded++,this.assets[e]=a,t&&t(e,a)}},{key:"error",value:function(t,e,a){this.toLoad--,this.loaded++,this.errors[e]=a,t&&t(e,a)}},{key:"loadAll",value:function(){var t=this;return new Promise((function(e,a){requestAnimationFrame((function n(){t.isLoadingComplete()?t.hasErrors()?a(t.errors):e(t):requestAnimationFrame(n)}))}))}},{key:"setRawDataURI",value:function(t,e){this.downloader.rawDataUris[this.pathPrefix+t]=e}},{key:"loadBinary",value:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t=this.start(t),this.downloader.downloadBinary(t,(function(n){e.success(a,t,n)}),(function(a,r){e.error(n,t,"Couldn't load binary ".concat(t,": status ").concat(a,", ").concat(r))}))}},{key:"loadText",value:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t=this.start(t),this.downloader.downloadText(t,(function(n){e.success(a,t,n)}),(function(a,r){e.error(n,t,"Couldn't load text ".concat(t,": status ").concat(a,", ").concat(r))}))}},{key:"loadJson",value:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t=this.start(t),this.downloader.downloadJson(t,(function(n){e.success(a,t,n)}),(function(a,r){e.error(n,t,"Couldn't load JSON ".concat(t,": status ").concat(a,", ").concat(r))}))}},{key:"loadTexture",value:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(t=this.start(t),!!("undefined"==typeof window||"undefined"==typeof navigator||!window.document))fetch(t,{mode:"cors"}).then((function(a){return a.ok?a.blob():(e.error(n,t,"Couldn't load image: ".concat(t)),null)})).then((function(t){return t?createImageBitmap(t,{premultiplyAlpha:"none",colorSpaceConversion:"none"}):null})).then((function(n){n&&e.success(a,t,e.textureLoader(n))}));else{var r=new Image;r.crossOrigin="anonymous",r.onload=function(){e.success(a,t,e.textureLoader(r))},r.onerror=function(){e.error(n,t,"Couldn't load image: ".concat(t))},this.downloader.rawDataUris[t]&&(t=this.downloader.rawDataUris[t]),r.src=t}}},{key:"loadTextureAtlas",value:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=t.lastIndexOf("/"),s=i>=0?t.substring(0,i+1):"";t=this.start(t),this.downloader.downloadText(t,(function(i){try{var o,h=new Kt(i),l=h.pages.length,u=!1,c=k(h.pages);try{var f=function(){var i=o.value;e.loadTexture(null==r?s+i.name:r[i.name],(function(n,r){u||(i.setTexture(r),0==--l&&e.success(a,t,h))}),(function(a,r){u||e.error(n,t,"Couldn't load texture atlas ".concat(t," page image: ").concat(a)),u=!0}))};for(c.s();!(o=c.n()).done;)f()}catch(t){c.e(t)}finally{c.f()}}catch(a){e.error(n,t,"Couldn't parse texture atlas ".concat(t,": ").concat(a.message))}}),(function(a,r){e.error(n,t,"Couldn't load texture atlas ".concat(t,": status ").concat(a,", ").concat(r))}))}},{key:"get",value:function(t){return this.assets[this.pathPrefix+t]}},{key:"require",value:function(t){t=this.pathPrefix+t;var e=this.assets[t];if(e)return e;var a=this.errors[t];throw Error("Asset not found: "+t+(a?"\n"+a:""))}},{key:"remove",value:function(t){t=this.pathPrefix+t;var e=this.assets[t];return e.dispose&&e.dispose(),delete this.assets[t],e}},{key:"removeAll",value:function(){for(var t in this.assets){var e=this.assets[t];e.dispose&&e.dispose()}this.assets={}}},{key:"isLoadingComplete",value:function(){return 0==this.toLoad}},{key:"getToLoad",value:function(){return this.toLoad}},{key:"getLoaded",value:function(){return this.loaded}},{key:"dispose",value:function(){this.removeAll()}},{key:"hasErrors",value:function(){return Object.keys(this.errors).length>0}},{key:"getErrors",value:function(){return this.errors}}]),t}(),pe=function(){function t(){i(this,t),this.callbacks={},this.rawDataUris={}}return o(t,[{key:"dataUriToString",value:function(t){if(!t.startsWith("data:"))throw new Error("Not a data URI.");var e=t.indexOf("base64,");return-1!=e?(e+=7,atob(t.substr(e))):t.substr(t.indexOf(",")+1)}},{key:"base64ToUint8Array",value:function(t){for(var e=window.atob(t),a=e.length,n=new Uint8Array(a),r=0;r<a;r++)n[r]=e.charCodeAt(r);return n}},{key:"dataUriToUint8Array",value:function(t){if(!t.startsWith("data:"))throw new Error("Not a data URI.");var e=t.indexOf("base64,");if(-1==e)throw new Error("Not a binary data URI.");return e+=7,this.base64ToUint8Array(t.substr(e))}},{key:"downloadText",value:function(t,e,a){var n=this;if(!this.start(t,e,a))if(this.rawDataUris[t])try{var r=this.rawDataUris[t];this.finish(t,200,this.dataUriToString(r))}catch(e){this.finish(t,400,JSON.stringify(e))}else{var i=new XMLHttpRequest;i.overrideMimeType("text/html"),i.open("GET",t,!0);var s=function(){n.finish(t,i.status,i.responseText)};i.onload=s,i.onerror=s,i.send()}}},{key:"downloadJson",value:function(t,e,a){this.downloadText(t,(function(t){e(JSON.parse(t))}),a)}},{key:"downloadBinary",value:function(t,e,a){var n=this;if(!this.start(t,e,a))if(this.rawDataUris[t])try{var r=this.rawDataUris[t];this.finish(t,200,this.dataUriToUint8Array(r))}catch(e){this.finish(t,400,JSON.stringify(e))}else{var i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="arraybuffer";var s=function(){n.finish(t,i.status,i.response)};i.onload=function(){200==i.status||0==i.status?n.finish(t,200,new Uint8Array(i.response)):s()},i.onerror=s,i.send()}}},{key:"start",value:function(t,e,a){var n=this.callbacks[t];try{if(n)return!0;this.callbacks[t]=n=[]}finally{n.push(e,a)}}},{key:"finish",value:function(t,e,a){var n=this.callbacks[t];delete this.callbacks[t];for(var r=200==e||0==e?[a]:[e,a],i=r.length-1,s=n.length;i<s;i+=2)n[i].apply(null,r)}}]),t}(),ge=o((function t(e,a){if(i(this,t),this.data=null,this.intValue=0,this.floatValue=0,this.stringValue=null,this.time=0,this.volume=0,this.balance=0,!a)throw new Error("data cannot be null.");this.time=e,this.data=a})),ye=o((function t(e){i(this,t),this.name=null,this.intValue=0,this.floatValue=0,this.stringValue=null,this.audioPath=null,this.volume=0,this.balance=0,this.name=e})),ke=function(){function t(e,a){if(i(this,t),this.data=null,this.bones=null,this.target=null,this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,!e)throw new Error("data cannot be null.");if(!a)throw new Error("skeleton cannot be null.");this.data=e,this.mix=e.mix,this.softness=e.softness,this.bendDirection=e.bendDirection,this.compress=e.compress,this.stretch=e.stretch,this.bones=new Array;for(var n=0;n<e.bones.length;n++)this.bones.push(a.findBone(e.bones[n].name));this.target=a.findBone(e.target.name)}return o(t,[{key:"isActive",value:function(){return this.active}},{key:"update",value:function(){if(0!=this.mix){var t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.data.uniform,this.softness,this.mix)}}}},{key:"apply1",value:function(t,e,a,n,r,i,s){var o=t.parent,h=o.a,l=o.b,u=o.c,c=o.d,f=-t.ashearX-t.arotation,d=0,v=0;switch(t.data.transformMode){case oe.OnlyTranslation:d=e-t.worldX,v=a-t.worldY;break;case oe.NoRotationOrReflection:var m=Math.abs(h*c-l*u)/(h*h+u*u),p=h/t.skeleton.scaleX,g=u/t.skeleton.scaleY;l=-g*m*t.skeleton.scaleX,c=p*m*t.skeleton.scaleY,f+=Math.atan2(g,p)*I.radDeg;default:var y=e-o.worldX,k=a-o.worldY,b=h*c-l*u;d=(y*c-k*l)/b-t.ax,v=(k*h-y*u)/b-t.ay}f+=Math.atan2(v,d)*I.radDeg,t.ascaleX<0&&(f+=180),f>180?f-=360:f<-180&&(f+=360);var x=t.ascaleX,w=t.ascaleY;if(n||r){switch(t.data.transformMode){case oe.NoScale:case oe.NoScaleOrReflection:d=e-t.worldX,v=a-t.worldY}var A=t.data.length*x,E=Math.sqrt(d*d+v*v);if(n&&E<A||r&&E>A&&A>1e-4){var S=(E/A-1)*s+1;x*=S,i&&(w*=S)}}t.updateWorldTransformWith(t.ax,t.ay,t.arotation+f*s,x,w,t.ashearX,t.ashearY)}},{key:"apply2",value:function(t,e,a,n,r,i,s,o,h){var l=t.ax,u=t.ay,c=t.ascaleX,f=t.ascaleY,d=c,v=f,m=e.ascaleX,p=0,g=0,y=0;c<0?(c=-c,p=180,y=-1):(p=0,y=1),f<0&&(f=-f,y=-y),m<0?(m=-m,g=180):g=0;var k=e.ax,b=0,x=0,w=0,A=t.a,E=t.b,S=t.c,T=t.d,R=Math.abs(c-f)<=1e-4;!R||i?(b=0,x=A*k+t.worldX,w=S*k+t.worldY):(x=A*k+E*(b=e.ay)+t.worldX,w=S*k+T*b+t.worldY);var C=t.parent;A=C.a,E=C.b,S=C.c;var M,F,Y=1/(A*(T=C.d)-E*S),X=x-C.worldX,L=w-C.worldY,N=(X*T-L*E)*Y-l,P=(L*A-X*S)*Y-u,_=Math.sqrt(N*N+P*P),O=e.data.length*m;if(_<1e-4)return this.apply1(t,a,n,!1,i,!1,h),void e.updateWorldTransformWith(k,b,0,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY);var B=((X=a-C.worldX)*T-(L=n-C.worldY)*E)*Y-l,D=(L*A-X*S)*Y-u,V=B*B+D*D;if(0!=o){o*=c*(m+1)*.5;var U=Math.sqrt(V),W=U-_-O*c+o;if(W>0){var j=Math.min(1,W/(2*o))-1;V=(B-=(j=(W-o*(1-j*j))/U)*B)*B+(D-=j*D)*D}}t:if(R){var q=(V-_*_-(O*=c)*O)/(2*_*O);q<-1?(q=-1,F=Math.PI*r):q>1?(q=1,F=0,i&&(d*=A=(Math.sqrt(V)/(_+O)-1)*h+1,s&&(v*=A))):F=Math.acos(q)*r,A=_+O*q,E=O*Math.sin(F),M=Math.atan2(D*A-B*E,B*A+D*E)}else{var G=(A=c*O)*A,z=(E=f*O)*E,H=Math.atan2(D,B),$=-2*z*_,J=z-G;if((T=$*$-4*J*(S=z*_*_+G*V-G*z))>=0){var Q=Math.sqrt(T);$<0&&(Q=-Q);var Z=(Q=.5*-($+Q))/J,K=S/Q,tt=Math.abs(Z)<Math.abs(K)?Z:K;if(tt*tt<=V){L=Math.sqrt(V-tt*tt)*r,M=H-Math.atan2(L,tt),F=Math.atan2(L/f,(tt-_)/c);break t}}var et=I.PI,at=_-A,nt=at*at,rt=0,it=0,st=_+A,ot=st*st,ht=0;(S=-A*_/(G-z))>=-1&&S<=1&&(S=Math.acos(S),(T=(X=A*Math.cos(S)+_)*X+(L=E*Math.sin(S))*L)<nt&&(et=S,nt=T,at=X,rt=L),T>ot&&(it=S,ot=T,st=X,ht=L)),V<=.5*(nt+ot)?(M=H-Math.atan2(rt*r,at),F=et*r):(M=H-Math.atan2(ht*r,st),F=it*r)}var lt=Math.atan2(b,k)*y,ut=t.arotation;(M=(M-lt)*I.radDeg+p-ut)>180?M-=360:M<-180&&(M+=360),t.updateWorldTransformWith(l,u,ut+M*h,d,v,0,0),ut=e.arotation,(F=((F+lt)*I.radDeg-e.ashearX)*y+g-ut)>180?F-=360:F<-180&&(F+=360),e.updateWorldTransformWith(k,b,ut+F*h,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)}}]),t}(),be=function(t){l(a,t);var e=d(a);function a(t){var n;return i(this,a),(n=e.call(this,t,0,!1)).bones=new Array,n.target=null,n.bendDirection=1,n.compress=!1,n.stretch=!1,n.uniform=!1,n.mix=1,n.softness=0,n}return o(a)}(ve),xe=function(t){l(a,t);var e=d(a);function a(t){var n;return i(this,a),(n=e.call(this,t,0,!1)).bones=new Array,n.target=null,n.positionMode=null,n.spacingMode=null,n.rotateMode=null,n.offsetRotation=0,n.position=0,n.spacing=0,n.mixRotate=0,n.mixX=0,n.mixY=0,n}return o(a)}(ve);!function(t){t[t.Fixed=0]="Fixed",t[t.Percent=1]="Percent"}(ue||(ue={})),function(t){t[t.Length=0]="Length",t[t.Fixed=1]="Fixed",t[t.Percent=2]="Percent",t[t.Proportional=3]="Proportional"}(ce||(ce={})),function(t){t[t.Tangent=0]="Tangent",t[t.Chain=1]="Chain",t[t.ChainScale=2]="ChainScale"}(fe||(fe={}));var we=function(){function t(e,a){if(i(this,t),this.data=null,this.bones=null,this.target=null,this.position=0,this.spacing=0,this.mixRotate=0,this.mixX=0,this.mixY=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,!e)throw new Error("data cannot be null.");if(!a)throw new Error("skeleton cannot be null.");this.data=e,this.bones=new Array;for(var n=0,r=e.bones.length;n<r;n++)this.bones.push(a.findBone(e.bones[n].name));this.target=a.findSlot(e.target.name),this.position=e.position,this.spacing=e.spacing,this.mixRotate=e.mixRotate,this.mixX=e.mixX,this.mixY=e.mixY}return o(t,[{key:"isActive",value:function(){return this.active}},{key:"update",value:function(){var e=this.target.getAttachment();if(e instanceof re){var a=this.mixRotate,n=this.mixX,r=this.mixY;if(0!=a||0!=n||0!=r){var i=this.data,s=i.rotateMode==fe.Tangent,o=i.rotateMode==fe.ChainScale,h=this.bones,l=h.length,u=s?l:l+1,c=R.setArraySize(this.spaces,u),f=o?this.lengths=R.setArraySize(this.lengths,l):null,d=this.spacing;switch(i.spacingMode){case ce.Percent:if(o)for(var v=0,m=u-1;v<m;v++){var p=h[v],g=p.data.length;if(g<t.epsilon)f[v]=0;else{var y=g*p.a,k=g*p.c;f[v]=Math.sqrt(y*y+k*k)}}R.arrayFill(c,1,u,d);break;case ce.Proportional:for(var b=0,x=0,w=u-1;x<w;){var A=h[x],E=A.data.length;if(E<t.epsilon)o&&(f[x]=0),c[++x]=d;else{var S=E*A.a,T=E*A.c,C=Math.sqrt(S*S+T*T);o&&(f[x]=C),c[++x]=C,b+=C}}if(b>0){b=u/b*d;for(var M=1;M<u;M++)c[M]*=b}break;default:for(var F=i.spacingMode==ce.Length,Y=0,X=u-1;Y<X;){var L=h[Y],N=L.data.length;if(N<t.epsilon)o&&(f[Y]=0),c[++Y]=d;else{var P=N*L.a,_=N*L.c,O=Math.sqrt(P*P+_*_);o&&(f[Y]=O),c[++Y]=(F?N+d:d)*O/N}}}var B=this.computeWorldPositions(e,u,s),D=B[0],V=B[1],U=i.offsetRotation,W=!1;if(0==U)W=i.rotateMode==fe.Chain;else{W=!1;var j=this.target.bone;U*=j.a*j.d-j.b*j.c>0?I.degRad:-I.degRad}for(var q=0,G=3;q<l;q++,G+=3){var z=h[q];z.worldX+=(D-z.worldX)*n,z.worldY+=(V-z.worldY)*r;var H=B[G],$=B[G+1],J=H-D,Q=$-V;if(o){var Z=f[q];if(0!=Z){var K=(Math.sqrt(J*J+Q*Q)/Z-1)*a+1;z.a*=K,z.c*=K}}if(D=H,V=$,a>0){var tt=z.a,et=z.b,at=z.c,nt=z.d,rt=0,it=0,st=0;if(rt=s?B[G-1]:0==c[q+1]?B[G+2]:Math.atan2(Q,J),rt-=Math.atan2(at,tt),W){it=Math.cos(rt),st=Math.sin(rt);var ot=z.data.length;D+=(ot*(it*tt-st*at)-J)*a,V+=(ot*(st*tt+it*at)-Q)*a}else rt+=U;rt>I.PI?rt-=I.PI2:rt<-I.PI&&(rt+=I.PI2),rt*=a,it=Math.cos(rt),st=Math.sin(rt),z.a=it*tt-st*at,z.b=it*et-st*nt,z.c=st*tt+it*at,z.d=st*et+it*nt}z.updateAppliedTransform()}}}}},{key:"computeWorldPositions",value:function(e,a,n){var r=this.target,i=this.position,s=this.spaces,o=R.setArraySize(this.positions,3*a+2),h=null,l=e.closed,u=e.worldVerticesLength,c=u/6,f=t.NONE;if(!e.constantSpeed){var d,v=e.lengths,m=v[c-=l?1:2];switch(this.data.positionMode==ue.Percent&&(i*=m),this.data.spacingMode){case ce.Percent:d=m;break;case ce.Proportional:d=m/a;break;default:d=1}h=R.setArraySize(this.world,8);for(var p=0,g=0,y=0;p<a;p++,g+=3){var k=s[p]*d,b=i+=k;if(l)(b%=m)<0&&(b+=m),y=0;else{if(b<0){f!=t.BEFORE&&(f=t.BEFORE,e.computeWorldVertices(r,2,4,h,0,2)),this.addBeforePosition(b,h,0,o,g);continue}if(b>m){f!=t.AFTER&&(f=t.AFTER,e.computeWorldVertices(r,u-6,4,h,0,2)),this.addAfterPosition(b-m,h,0,o,g);continue}}for(;;y++){var x=v[y];if(!(b>x)){if(0==y)b/=x;else{var w=v[y-1];b=(b-w)/(x-w)}break}}y!=f&&(f=y,l&&y==c?(e.computeWorldVertices(r,u-4,4,h,0,2),e.computeWorldVertices(r,0,4,h,4,2)):e.computeWorldVertices(r,6*y+2,8,h,0,2)),this.addCurvePosition(b,h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],o,g,n||p>0&&0==k)}return o}l?(u+=2,h=R.setArraySize(this.world,u),e.computeWorldVertices(r,2,u-4,h,0,2),e.computeWorldVertices(r,0,2,h,u-4,2),h[u-2]=h[0],h[u-1]=h[1]):(c--,u-=4,h=R.setArraySize(this.world,u),e.computeWorldVertices(r,2,u,h,0,2));for(var A,I=R.setArraySize(this.curves,c),E=0,S=h[0],T=h[1],C=0,M=0,F=0,Y=0,X=0,L=0,N=0,P=0,_=0,O=0,B=0,D=0,V=0,U=0,W=0,j=2;W<c;W++,j+=6)C=h[j],M=h[j+1],F=h[j+2],Y=h[j+3],B=2*(N=.1875*(S-2*C+F))+(_=.09375*(3*(C-F)-S+(X=h[j+4]))),D=2*(P=.1875*(T-2*M+Y))+(O=.09375*(3*(M-Y)-T+(L=h[j+5]))),V=.75*(C-S)+N+.16666667*_,U=.75*(M-T)+P+.16666667*O,E+=Math.sqrt(V*V+U*U),V+=B,U+=D,B+=_,D+=O,E+=Math.sqrt(V*V+U*U),V+=B,U+=D,E+=Math.sqrt(V*V+U*U),V+=B+_,U+=D+O,E+=Math.sqrt(V*V+U*U),I[W]=E,S=X,T=L;switch(this.data.positionMode==ue.Percent&&(i*=E),this.data.spacingMode){case ce.Percent:A=E;break;case ce.Proportional:A=E/a;break;default:A=1}for(var q=this.segments,G=0,z=0,H=0,$=0,J=0;z<a;z++,H+=3){var Q=s[z]*A,Z=i+=Q;if(l)(Z%=E)<0&&(Z+=E),$=0;else{if(Z<0){this.addBeforePosition(Z,h,0,o,H);continue}if(Z>E){this.addAfterPosition(Z-E,h,u-4,o,H);continue}}for(;;$++){var K=I[$];if(!(Z>K)){if(0==$)Z/=K;else{var tt=I[$-1];Z=(Z-tt)/(K-tt)}break}}if($!=f){f=$;var et=6*$;for(S=h[et],T=h[et+1],C=h[et+2],M=h[et+3],F=h[et+4],Y=h[et+5],B=2*(N=.03*(S-2*C+F))+(_=.006*(3*(C-F)-S+(X=h[et+6]))),D=2*(P=.03*(T-2*M+Y))+(O=.006*(3*(M-Y)-T+(L=h[et+7]))),V=.3*(C-S)+N+.16666667*_,U=.3*(M-T)+P+.16666667*O,G=Math.sqrt(V*V+U*U),q[0]=G,et=1;et<8;et++)V+=B,U+=D,B+=_,D+=O,G+=Math.sqrt(V*V+U*U),q[et]=G;V+=B,U+=D,G+=Math.sqrt(V*V+U*U),q[8]=G,V+=B+_,U+=D+O,G+=Math.sqrt(V*V+U*U),q[9]=G,J=0}for(Z*=G;;J++){var at=q[J];if(!(Z>at)){if(0==J)Z/=at;else{var nt=q[J-1];Z=J+(Z-nt)/(at-nt)}break}}this.addCurvePosition(.1*Z,S,T,C,M,F,Y,X,L,o,H,n||z>0&&0==Q)}return o}},{key:"addBeforePosition",value:function(t,e,a,n,r){var i=e[a],s=e[a+1],o=e[a+2]-i,h=e[a+3]-s,l=Math.atan2(h,o);n[r]=i+t*Math.cos(l),n[r+1]=s+t*Math.sin(l),n[r+2]=l}},{key:"addAfterPosition",value:function(t,e,a,n,r){var i=e[a+2],s=e[a+3],o=i-e[a],h=s-e[a+1],l=Math.atan2(h,o);n[r]=i+t*Math.cos(l),n[r+1]=s+t*Math.sin(l),n[r+2]=l}},{key:"addCurvePosition",value:function(t,e,a,n,r,i,s,o,h,l,u,c){if(0==t||isNaN(t))return l[u]=e,l[u+1]=a,void(l[u+2]=Math.atan2(r-a,n-e));var f=t*t,d=f*t,v=1-t,m=v*v,p=m*v,g=v*t,y=3*g,k=v*y,b=y*t,x=e*p+n*k+i*b+o*d,w=a*p+r*k+s*b+h*d;l[u]=x,l[u+1]=w,c&&(l[u+2]=t<.001?Math.atan2(r-a,n-e):Math.atan2(w-(a*m+r*g*2+s*f),x-(e*m+n*g*2+i*f)))}}]),t}();we.NONE=-1,we.BEFORE=-2,we.AFTER=-3,we.epsilon=1e-5;var Ae,Ie=function(){function t(e,a){if(i(this,t),this.data=null,this.bone=null,this.color=null,this.darkColor=null,this.attachment=null,this.attachmentTime=0,this.attachmentState=0,this.deform=new Array,!e)throw new Error("data cannot be null.");if(!a)throw new Error("bone cannot be null.");this.data=e,this.bone=a,this.color=new A,this.darkColor=e.darkColor?new A:null,this.setToSetupPose()}return o(t,[{key:"getSkeleton",value:function(){return this.bone.skeleton}},{key:"getAttachment",value:function(){return this.attachment}},{key:"setAttachment",value:function(t){this.attachment!=t&&(t instanceof N&&this.attachment instanceof N&&t.deformAttachment==this.attachment.deformAttachment||(this.deform.length=0),this.attachment=t,this.attachmentTime=this.bone.skeleton.time)}},{key:"setAttachmentTime",value:function(t){this.attachmentTime=this.bone.skeleton.time-t}},{key:"getAttachmentTime",value:function(){return this.bone.skeleton.time-this.attachmentTime}},{key:"setToSetupPose",value:function(){this.color.setFromColor(this.data.color),this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName?(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName))):this.attachment=null}}]),t}(),Ee=function(){function t(e,a){if(i(this,t),this.data=null,this.bones=null,this.target=null,this.mixRotate=0,this.mixX=0,this.mixY=0,this.mixScaleX=0,this.mixScaleY=0,this.mixShearY=0,this.temp=new F,this.active=!1,!e)throw new Error("data cannot be null.");if(!a)throw new Error("skeleton cannot be null.");this.data=e,this.mixRotate=e.mixRotate,this.mixX=e.mixX,this.mixY=e.mixY,this.mixScaleX=e.mixScaleX,this.mixScaleY=e.mixScaleY,this.mixShearY=e.mixShearY,this.bones=new Array;for(var n=0;n<e.bones.length;n++)this.bones.push(a.findBone(e.bones[n].name));this.target=a.findBone(e.target.name)}return o(t,[{key:"isActive",value:function(){return this.active}},{key:"update",value:function(){0==this.mixRotate&&0==this.mixX&&0==this.mixY&&0==this.mixScaleX&&0==this.mixScaleX&&0==this.mixShearY||(this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld())}},{key:"applyAbsoluteWorld",value:function(){for(var t=this.mixRotate,e=this.mixX,a=this.mixY,n=this.mixScaleX,r=this.mixScaleY,i=this.mixShearY,s=0!=e||0!=a,o=this.target,h=o.a,l=o.b,u=o.c,c=o.d,f=h*c-l*u>0?I.degRad:-I.degRad,d=this.data.offsetRotation*f,v=this.data.offsetShearY*f,m=this.bones,p=0,g=m.length;p<g;p++){var y=m[p];if(0!=t){var k=y.a,b=y.b,x=y.c,w=y.d,A=Math.atan2(u,h)-Math.atan2(x,k)+d;A>I.PI?A-=I.PI2:A<-I.PI&&(A+=I.PI2),A*=t;var E=Math.cos(A),S=Math.sin(A);y.a=E*k-S*x,y.b=E*b-S*w,y.c=S*k+E*x,y.d=S*b+E*w}if(s){var T=this.temp;o.localToWorld(T.set(this.data.offsetX,this.data.offsetY)),y.worldX+=(T.x-y.worldX)*e,y.worldY+=(T.y-y.worldY)*a}if(0!=n){var R=Math.sqrt(y.a*y.a+y.c*y.c);0!=R&&(R=(R+(Math.sqrt(h*h+u*u)-R+this.data.offsetScaleX)*n)/R),y.a*=R,y.c*=R}if(0!=r){var C=Math.sqrt(y.b*y.b+y.d*y.d);0!=C&&(C=(C+(Math.sqrt(l*l+c*c)-C+this.data.offsetScaleY)*r)/C),y.b*=C,y.d*=C}if(i>0){var M=y.b,F=y.d,Y=Math.atan2(F,M),X=Math.atan2(c,l)-Math.atan2(u,h)-(Y-Math.atan2(y.c,y.a));X>I.PI?X-=I.PI2:X<-I.PI&&(X+=I.PI2),X=Y+(X+v)*i;var L=Math.sqrt(M*M+F*F);y.b=Math.cos(X)*L,y.d=Math.sin(X)*L}y.updateAppliedTransform()}}},{key:"applyRelativeWorld",value:function(){for(var t=this.mixRotate,e=this.mixX,a=this.mixY,n=this.mixScaleX,r=this.mixScaleY,i=this.mixShearY,s=0!=e||0!=a,o=this.target,h=o.a,l=o.b,u=o.c,c=o.d,f=h*c-l*u>0?I.degRad:-I.degRad,d=this.data.offsetRotation*f,v=this.data.offsetShearY*f,m=this.bones,p=0,g=m.length;p<g;p++){var y=m[p];if(0!=t){var k=y.a,b=y.b,x=y.c,w=y.d,A=Math.atan2(u,h)+d;A>I.PI?A-=I.PI2:A<-I.PI&&(A+=I.PI2),A*=t;var E=Math.cos(A),S=Math.sin(A);y.a=E*k-S*x,y.b=E*b-S*w,y.c=S*k+E*x,y.d=S*b+E*w}if(s){var T=this.temp;o.localToWorld(T.set(this.data.offsetX,this.data.offsetY)),y.worldX+=T.x*e,y.worldY+=T.y*a}if(0!=n){var R=(Math.sqrt(h*h+u*u)-1+this.data.offsetScaleX)*n+1;y.a*=R,y.c*=R}if(0!=r){var C=(Math.sqrt(l*l+c*c)-1+this.data.offsetScaleY)*r+1;y.b*=C,y.d*=C}if(i>0){var M=Math.atan2(c,l)-Math.atan2(u,h);M>I.PI?M-=I.PI2:M<-I.PI&&(M+=I.PI2);var F=y.b,Y=y.d;M=Math.atan2(Y,F)+(M-I.PI/2+v)*i;var X=Math.sqrt(F*F+Y*Y);y.b=Math.cos(M)*X,y.d=Math.sin(M)*X}y.updateAppliedTransform()}}},{key:"applyAbsoluteLocal",value:function(){for(var t=this.mixRotate,e=this.mixX,a=this.mixY,n=this.mixScaleX,r=this.mixScaleY,i=this.mixShearY,s=this.target,o=this.bones,h=0,l=o.length;h<l;h++){var u=o[h],c=u.arotation;if(0!=t){var f=s.arotation-c+this.data.offsetRotation;c+=(f-=360*(16384-(16384.499999999996-f/360|0)))*t}var d=u.ax,v=u.ay;d+=(s.ax-d+this.data.offsetX)*e,v+=(s.ay-v+this.data.offsetY)*a;var m=u.ascaleX,p=u.ascaleY;0!=n&&0!=m&&(m=(m+(s.ascaleX-m+this.data.offsetScaleX)*n)/m),0!=r&&0!=p&&(p=(p+(s.ascaleY-p+this.data.offsetScaleY)*r)/p);var g=u.ashearY;if(0!=i){var y=s.ashearY-g+this.data.offsetShearY;g+=(y-=360*(16384-(16384.499999999996-y/360|0)))*i}u.updateWorldTransformWith(d,v,c,m,p,u.ashearX,g)}}},{key:"applyRelativeLocal",value:function(){for(var t=this.mixRotate,e=this.mixX,a=this.mixY,n=this.mixScaleX,r=this.mixScaleY,i=this.mixShearY,s=this.target,o=this.bones,h=0,l=o.length;h<l;h++){var u=o[h],c=u.arotation+(s.arotation+this.data.offsetRotation)*t,f=u.ax+(s.ax+this.data.offsetX)*e,d=u.ay+(s.ay+this.data.offsetY)*a,v=u.ascaleX*((s.ascaleX-1+this.data.offsetScaleX)*n+1),m=u.ascaleY*((s.ascaleY-1+this.data.offsetScaleY)*r+1),p=u.ashearY+(s.ashearY+this.data.offsetShearY)*i;u.updateWorldTransformWith(f,d,c,v,m,u.ashearX,p)}}}]),t}(),Se=function(){function t(e){if(i(this,t),this.data=null,this.bones=null,this.slots=null,this.drawOrder=null,this.ikConstraints=null,this.transformConstraints=null,this.pathConstraints=null,this._updateCache=new Array,this.skin=null,this.color=null,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,!e)throw new Error("data cannot be null.");this.data=e,this.bones=new Array;for(var a=0;a<e.bones.length;a++){var n=e.bones[a],r=void 0;if(n.parent){var s=this.bones[n.parent.index];r=new de(n,this,s),s.children.push(r)}else r=new de(n,this,null);this.bones.push(r)}this.slots=new Array,this.drawOrder=new Array;for(var o=0;o<e.slots.length;o++){var h=e.slots[o],l=this.bones[h.boneData.index],u=new Ie(h,l);this.slots.push(u),this.drawOrder.push(u)}this.ikConstraints=new Array;for(var c=0;c<e.ikConstraints.length;c++){var f=e.ikConstraints[c];this.ikConstraints.push(new ke(f,this))}this.transformConstraints=new Array;for(var d=0;d<e.transformConstraints.length;d++){var v=e.transformConstraints[d];this.transformConstraints.push(new Ee(v,this))}this.pathConstraints=new Array;for(var m=0;m<e.pathConstraints.length;m++){var p=e.pathConstraints[m];this.pathConstraints.push(new we(p,this))}this.color=new A(1,1,1,1),this.updateCache()}return o(t,[{key:"updateCache",value:function(){var t=this._updateCache;t.length=0;for(var e=this.bones,a=0,n=e.length;a<n;a++){var r=e[a];r.sorted=r.data.skinRequired,r.active=!r.sorted}if(this.skin)for(var i=this.skin.bones,s=0,o=this.skin.bones.length;s<o;s++){var h=this.bones[i[s].index];do{h.sorted=!1,h.active=!0,h=h.parent}while(h)}var l=this.ikConstraints,u=this.transformConstraints,c=this.pathConstraints,f=l.length,d=u.length,v=c.length,m=f+d+v;t:for(var p=0;p<m;p++){for(var g=0;g<f;g++){var y=l[g];if(y.data.order==p){this.sortIkConstraint(y);continue t}}for(var k=0;k<d;k++){var b=u[k];if(b.data.order==p){this.sortTransformConstraint(b);continue t}}for(var x=0;x<v;x++){var w=c[x];if(w.data.order==p){this.sortPathConstraint(w);continue t}}}for(var A=0,I=e.length;A<I;A++)this.sortBone(e[A])}},{key:"sortIkConstraint",value:function(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&R.contains(this.skin.constraints,t.data,!0)),t.active){var e=t.target;this.sortBone(e);var a=t.bones,n=a[0];if(this.sortBone(n),1==a.length)this._updateCache.push(t),this.sortReset(n.children);else{var r=a[a.length-1];this.sortBone(r),this._updateCache.push(t),this.sortReset(n.children),r.sorted=!0}}}},{key:"sortPathConstraint",value:function(t){if(t.active=t.target.bone.isActive()&&(!t.data.skinRequired||this.skin&&R.contains(this.skin.constraints,t.data,!0)),t.active){var e=t.target,a=e.data.index,n=e.bone;this.skin&&this.sortPathConstraintAttachment(this.skin,a,n),this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,a,n);for(var r=0,i=this.data.skins.length;r<i;r++)this.sortPathConstraintAttachment(this.data.skins[r],a,n);var s=e.getAttachment();s instanceof re&&this.sortPathConstraintAttachmentWith(s,n);for(var o=t.bones,h=o.length,l=0;l<h;l++)this.sortBone(o[l]);this._updateCache.push(t);for(var u=0;u<h;u++)this.sortReset(o[u].children);for(var c=0;c<h;c++)o[c].sorted=!0}}},{key:"sortTransformConstraint",value:function(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&R.contains(this.skin.constraints,t.data,!0)),t.active){this.sortBone(t.target);var e=t.bones,a=e.length;if(t.data.local)for(var n=0;n<a;n++){var r=e[n];this.sortBone(r.parent),this.sortBone(r)}else for(var i=0;i<a;i++)this.sortBone(e[i]);this._updateCache.push(t);for(var s=0;s<a;s++)this.sortReset(e[s].children);for(var o=0;o<a;o++)e[o].sorted=!0}}},{key:"sortPathConstraintAttachment",value:function(t,e,a){var n=t.attachments[e];if(n)for(var r in n)this.sortPathConstraintAttachmentWith(n[r],a)}},{key:"sortPathConstraintAttachmentWith",value:function(t,e){if(t instanceof re){var a=t.bones;if(a)for(var n=this.bones,r=0,i=a.length;r<i;){var s=a[r++];for(s+=r;r<s;)this.sortBone(n[a[r++]])}else this.sortBone(e)}}},{key:"sortBone",value:function(t){if(!t.sorted){var e=t.parent;e&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}}},{key:"sortReset",value:function(t){for(var e=0,a=t.length;e<a;e++){var n=t[e];n.active&&(n.sorted&&this.sortReset(n.children),n.sorted=!1)}}},{key:"updateWorldTransform",value:function(){for(var t=this.bones,e=0,a=t.length;e<a;e++){var n=t[e];n.ax=n.x,n.ay=n.y,n.arotation=n.rotation,n.ascaleX=n.scaleX,n.ascaleY=n.scaleY,n.ashearX=n.shearX,n.ashearY=n.shearY}for(var r=this._updateCache,i=0,s=r.length;i<s;i++)r[i].update()}},{key:"updateWorldTransformWith",value:function(t){var e=this.getRootBone(),a=t.a,n=t.b,r=t.c,i=t.d;e.worldX=a*this.x+n*this.y+t.worldX,e.worldY=r*this.x+i*this.y+t.worldY;var s=e.rotation+90+e.shearY,o=I.cosDeg(e.rotation+e.shearX)*e.scaleX,h=I.cosDeg(s)*e.scaleY,l=I.sinDeg(e.rotation+e.shearX)*e.scaleX,u=I.sinDeg(s)*e.scaleY;e.a=(a*o+n*l)*this.scaleX,e.b=(a*h+n*u)*this.scaleX,e.c=(r*o+i*l)*this.scaleY,e.d=(r*h+i*u)*this.scaleY;for(var c=this._updateCache,f=0,d=c.length;f<d;f++){var v=c[f];v!=e&&v.update()}}},{key:"setToSetupPose",value:function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()}},{key:"setBonesToSetupPose",value:function(){for(var t=this.bones,e=0,a=t.length;e<a;e++)t[e].setToSetupPose();for(var n=this.ikConstraints,r=0,i=n.length;r<i;r++){var s=n[r];s.mix=s.data.mix,s.softness=s.data.softness,s.bendDirection=s.data.bendDirection,s.compress=s.data.compress,s.stretch=s.data.stretch}for(var o=this.transformConstraints,h=0,l=o.length;h<l;h++){var u=o[h],c=u.data;u.mixRotate=c.mixRotate,u.mixX=c.mixX,u.mixY=c.mixY,u.mixScaleX=c.mixScaleX,u.mixScaleY=c.mixScaleY,u.mixShearY=c.mixShearY}for(var f=this.pathConstraints,d=0,v=f.length;d<v;d++){var m=f[d],p=m.data;m.position=p.position,m.spacing=p.spacing,m.mixRotate=p.mixRotate,m.mixX=p.mixX,m.mixY=p.mixY}}},{key:"setSlotsToSetupPose",value:function(){var t=this.slots;R.arrayCopy(t,0,this.drawOrder,0,t.length);for(var e=0,a=t.length;e<a;e++)t[e].setToSetupPose()}},{key:"getRootBone",value:function(){return 0==this.bones.length?null:this.bones[0]}},{key:"findBone",value:function(t){if(!t)throw new Error("boneName cannot be null.");for(var e=this.bones,a=0,n=e.length;a<n;a++){var r=e[a];if(r.data.name==t)return r}return null}},{key:"findSlot",value:function(t){if(!t)throw new Error("slotName cannot be null.");for(var e=this.slots,a=0,n=e.length;a<n;a++){var r=e[a];if(r.data.name==t)return r}return null}},{key:"setSkinByName",value:function(t){var e=this.data.findSkin(t);if(!e)throw new Error("Skin not found: "+t);this.setSkin(e)}},{key:"setSkin",value:function(t){if(t!=this.skin){if(t)if(this.skin)t.attachAll(this,this.skin);else for(var e=this.slots,a=0,n=e.length;a<n;a++){var r=e[a],i=r.data.attachmentName;if(i){var s=t.getAttachment(a,i);s&&r.setAttachment(s)}}this.skin=t,this.updateCache()}}},{key:"getAttachmentByName",value:function(t,e){return this.getAttachment(this.data.findSlot(t).index,e)}},{key:"getAttachment",value:function(t,e){if(!e)throw new Error("attachmentName cannot be null.");if(this.skin){var a=this.skin.getAttachment(t,e);if(a)return a}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null}},{key:"setAttachment",value:function(t,e){if(!t)throw new Error("slotName cannot be null.");for(var a=this.slots,n=0,r=a.length;n<r;n++){var i=a[n];if(i.data.name==t){var s=null;if(e&&!(s=this.getAttachment(n,e)))throw new Error("Attachment not found: "+e+", for slot: "+t);return void i.setAttachment(s)}}throw new Error("Slot not found: "+t)}},{key:"findIkConstraint",value:function(t){if(!t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,a=0,n=e.length;a<n;a++){var r=e[a];if(r.data.name==t)return r}return null}},{key:"findTransformConstraint",value:function(t){if(!t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,a=0,n=e.length;a<n;a++){var r=e[a];if(r.data.name==t)return r}return null}},{key:"findPathConstraint",value:function(t){if(!t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,a=0,n=e.length;a<n;a++){var r=e[a];if(r.data.name==t)return r}return null}},{key:"getBoundsRect",value:function(){var t=new F,e=new F;return this.getBounds(t,e),{x:t.x,y:t.y,width:e.x,height:e.y}}},{key:"getBounds",value:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Array(2);if(!t)throw new Error("offset cannot be null.");if(!e)throw new Error("size cannot be null.");for(var n=this.drawOrder,r=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY,h=0,l=n.length;h<l;h++){var u=n[h];if(u.bone.active){var c=0,f=null,d=u.getAttachment();if(d instanceof se)c=8,f=R.setArraySize(a,c,0),d.computeWorldVertices(u.bone,f,0,2);else if(d instanceof ne){var v=d;c=v.worldVerticesLength,f=R.setArraySize(a,c,0),v.computeWorldVertices(u,0,c,f,0,2)}if(f)for(var m=0,p=f.length;m<p;m+=2){var g=f[m],y=f[m+1];r=Math.min(r,g),i=Math.min(i,y),s=Math.max(s,g),o=Math.max(o,y)}}}t.set(r,i),e.set(s-r,o-i)}},{key:"update",value:function(t){this.time+=t}}]),t}(),Te=function(){function t(){i(this,t),this.name=null,this.bones=new Array,this.slots=new Array,this.skins=new Array,this.defaultSkin=null,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.x=0,this.y=0,this.width=0,this.height=0,this.version=null,this.hash=null,this.fps=0,this.imagesPath=null,this.audioPath=null}return o(t,[{key:"findBone",value:function(t){if(!t)throw new Error("boneName cannot be null.");for(var e=this.bones,a=0,n=e.length;a<n;a++){var r=e[a];if(r.name==t)return r}return null}},{key:"findSlot",value:function(t){if(!t)throw new Error("slotName cannot be null.");for(var e=this.slots,a=0,n=e.length;a<n;a++){var r=e[a];if(r.name==t)return r}return null}},{key:"findSkin",value:function(t){if(!t)throw new Error("skinName cannot be null.");for(var e=this.skins,a=0,n=e.length;a<n;a++){var r=e[a];if(r.name==t)return r}return null}},{key:"findEvent",value:function(t){if(!t)throw new Error("eventDataName cannot be null.");for(var e=this.events,a=0,n=e.length;a<n;a++){var r=e[a];if(r.name==t)return r}return null}},{key:"findAnimation",value:function(t){if(!t)throw new Error("animationName cannot be null.");for(var e=this.animations,a=0,n=e.length;a<n;a++){var r=e[a];if(r.name==t)return r}return null}},{key:"findIkConstraint",value:function(t){if(!t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,a=0,n=e.length;a<n;a++){var r=e[a];if(r.name==t)return r}return null}},{key:"findTransformConstraint",value:function(t){if(!t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,a=0,n=e.length;a<n;a++){var r=e[a];if(r.name==t)return r}return null}},{key:"findPathConstraint",value:function(t){if(!t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,a=0,n=e.length;a<n;a++){var r=e[a];if(r.name==t)return r}return null}}]),t}(),Re=o((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;i(this,t),this.slotIndex=e,this.name=a,this.attachment=n})),Ce=function(){function t(e){if(i(this,t),this.name=null,this.attachments=new Array,this.bones=Array(),this.constraints=new Array,!e)throw new Error("name cannot be null.");this.name=e}return o(t,[{key:"setAttachment",value:function(t,e,a){if(!a)throw new Error("attachment cannot be null.");var n=this.attachments;t>=n.length&&(n.length=t+1),n[t]||(n[t]={}),n[t][e]=a}},{key:"addSkin",value:function(t){for(var e=0;e<t.bones.length;e++){for(var a=t.bones[e],n=!1,r=0;r<this.bones.length;r++)if(this.bones[r]==a){n=!0;break}n||this.bones.push(a)}for(var i=0;i<t.constraints.length;i++){for(var s=t.constraints[i],o=!1,h=0;h<this.constraints.length;h++)if(this.constraints[h]==s){o=!0;break}o||this.constraints.push(s)}for(var l=t.getAttachments(),u=0;u<l.length;u++){var c=l[u];this.setAttachment(c.slotIndex,c.name,c.attachment)}}},{key:"copySkin",value:function(t){for(var e=0;e<t.bones.length;e++){for(var a=t.bones[e],n=!1,r=0;r<this.bones.length;r++)if(this.bones[r]==a){n=!0;break}n||this.bones.push(a)}for(var i=0;i<t.constraints.length;i++){for(var s=t.constraints[i],o=!1,h=0;h<this.constraints.length;h++)if(this.constraints[h]==s){o=!0;break}o||this.constraints.push(s)}for(var l=t.getAttachments(),u=0;u<l.length;u++){var c=l[u];c.attachment&&(c.attachment instanceof ne?(c.attachment=c.attachment.newLinkedMesh(),this.setAttachment(c.slotIndex,c.name,c.attachment)):(c.attachment=c.attachment.copy(),this.setAttachment(c.slotIndex,c.name,c.attachment)))}}},{key:"getAttachment",value:function(t,e){var a=this.attachments[t];return a?a[e]:null}},{key:"removeAttachment",value:function(t,e){var a=this.attachments[t];a&&(a[e]=null)}},{key:"getAttachments",value:function(){for(var t=new Array,e=0;e<this.attachments.length;e++){var a=this.attachments[e];if(a)for(var n in a){var r=a[n];r&&t.push(new Re(e,n,r))}}return t}},{key:"getAttachmentsForSlot",value:function(t,e){var a=this.attachments[t];if(a)for(var n in a){var r=a[n];r&&e.push(new Re(t,n,r))}}},{key:"clear",value:function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0}},{key:"attachAll",value:function(t,e){for(var a=0,n=0;n<t.slots.length;n++){var r=t.slots[n],i=r.getAttachment();if(i&&a<e.attachments.length){var s=e.attachments[a];for(var o in s){if(i==s[o]){var h=this.getAttachment(a,o);h&&r.setAttachment(h);break}}}a++}}}]),t}(),Me=o((function t(e,a,n){if(i(this,t),this.index=0,this.name=null,this.boneData=null,this.color=new A(1,1,1,1),this.darkColor=null,this.attachmentName=null,this.blendMode=null,e<0)throw new Error("index must be >= 0.");if(!a)throw new Error("name cannot be null.");if(!n)throw new Error("boneData cannot be null.");this.index=e,this.name=a,this.boneData=n}));!function(t){t[t.Normal=0]="Normal",t[t.Additive=1]="Additive",t[t.Multiply=2]="Multiply",t[t.Screen=3]="Screen"}(Ae||(Ae={}));var Fe,Ye=function(t){l(a,t);var e=d(a);function a(t){var n;return i(this,a),(n=e.call(this,t,0,!1)).bones=new Array,n.target=null,n.mixRotate=0,n.mixX=0,n.mixY=0,n.mixScaleX=0,n.mixScaleY=0,n.mixShearY=0,n.offsetRotation=0,n.offsetX=0,n.offsetY=0,n.offsetScaleX=0,n.offsetScaleY=0,n.offsetShearY=0,n.relative=!1,n.local=!1,n}return o(a)}(ve),Xe=function(){function t(e){i(this,t),this.scale=1,this.attachmentLoader=null,this.linkedMeshes=new Array,this.attachmentLoader=e}return o(t,[{key:"readSkeletonData",value:function(t){var e=this.scale,a=new Te;a.name="";var n=new Le(t),r=n.readInt32(),i=n.readInt32();a.hash=0==i&&0==r?null:i.toString(16)+r.toString(16),a.version=n.readString(),a.x=n.readFloat(),a.y=n.readFloat(),a.width=n.readFloat(),a.height=n.readFloat();var s=n.readBoolean();s&&(a.fps=n.readFloat(),a.imagesPath=n.readString(),a.audioPath=n.readString());var o=0;o=n.readInt(!0);for(var h=0;h<o;h++)n.strings.push(n.readString());o=n.readInt(!0);for(var l=0;l<o;l++){var u=n.readString(),c=0==l?null:a.bones[n.readInt(!0)],f=new le(l,u,c);f.rotation=n.readFloat(),f.x=n.readFloat()*e,f.y=n.readFloat()*e,f.scaleX=n.readFloat(),f.scaleY=n.readFloat(),f.shearX=n.readFloat(),f.shearY=n.readFloat(),f.length=n.readFloat()*e,f.transformMode=n.readInt(!0),f.skinRequired=n.readBoolean(),s&&A.rgba8888ToColor(f.color,n.readInt32()),a.bones.push(f)}o=n.readInt(!0);for(var d=0;d<o;d++){var v=n.readString(),m=a.bones[n.readInt(!0)],p=new Me(d,v,m);A.rgba8888ToColor(p.color,n.readInt32());var g=n.readInt32();-1!=g&&A.rgb888ToColor(p.darkColor=new A,g),p.attachmentName=n.readStringRef(),p.blendMode=n.readInt(!0),a.slots.push(p)}o=n.readInt(!0);for(var y,k=0;k<o;k++){var b=new be(n.readString());b.order=n.readInt(!0),b.skinRequired=n.readBoolean(),y=n.readInt(!0);for(var x=0;x<y;x++)b.bones.push(a.bones[n.readInt(!0)]);b.target=a.bones[n.readInt(!0)],b.mix=n.readFloat(),b.softness=n.readFloat()*e,b.bendDirection=n.readByte(),b.compress=n.readBoolean(),b.stretch=n.readBoolean(),b.uniform=n.readBoolean(),a.ikConstraints.push(b)}o=n.readInt(!0);for(var w,I=0;I<o;I++){var E=new Ye(n.readString());E.order=n.readInt(!0),E.skinRequired=n.readBoolean(),w=n.readInt(!0);for(var S=0;S<w;S++)E.bones.push(a.bones[n.readInt(!0)]);E.target=a.bones[n.readInt(!0)],E.local=n.readBoolean(),E.relative=n.readBoolean(),E.offsetRotation=n.readFloat(),E.offsetX=n.readFloat()*e,E.offsetY=n.readFloat()*e,E.offsetScaleX=n.readFloat(),E.offsetScaleY=n.readFloat(),E.offsetShearY=n.readFloat(),E.mixRotate=n.readFloat(),E.mixX=n.readFloat(),E.mixY=n.readFloat(),E.mixScaleX=n.readFloat(),E.mixScaleY=n.readFloat(),E.mixShearY=n.readFloat(),a.transformConstraints.push(E)}o=n.readInt(!0);for(var T,C=0;C<o;C++){var M=new xe(n.readString());M.order=n.readInt(!0),M.skinRequired=n.readBoolean(),T=n.readInt(!0);for(var F=0;F<T;F++)M.bones.push(a.bones[n.readInt(!0)]);M.target=a.slots[n.readInt(!0)],M.positionMode=n.readInt(!0),M.spacingMode=n.readInt(!0),M.rotateMode=n.readInt(!0),M.offsetRotation=n.readFloat(),M.position=n.readFloat(),M.positionMode==ue.Fixed&&(M.position*=e),M.spacing=n.readFloat(),M.spacingMode!=ce.Length&&M.spacingMode!=ce.Fixed||(M.spacing*=e),M.mixRotate=n.readFloat(),M.mixX=n.readFloat(),M.mixY=n.readFloat(),a.pathConstraints.push(M)}var Y=this.readSkin(n,a,!0,s);Y&&(a.defaultSkin=Y,a.skins.push(Y));var X=a.skins.length;for(R.setArraySize(a.skins,o=X+n.readInt(!0));X<o;X++)a.skins[X]=this.readSkin(n,a,!1,s);o=this.linkedMeshes.length;for(var L=0;L<o;L++){var N=this.linkedMeshes[L],P=(N.skin?a.findSkin(N.skin):a.defaultSkin).getAttachment(N.slotIndex,N.parent);N.mesh.deformAttachment=N.inheritDeform?P:N.mesh,N.mesh.setParentMesh(P),N.mesh.updateUVs()}this.linkedMeshes.length=0,o=n.readInt(!0);for(var _=0;_<o;_++){var O=new ye(n.readStringRef());O.intValue=n.readInt(!1),O.floatValue=n.readFloat(),O.stringValue=n.readString(),O.audioPath=n.readString(),O.audioPath&&(O.volume=n.readFloat(),O.balance=n.readFloat()),a.events.push(O)}o=n.readInt(!0);for(var B=0;B<o;B++)a.animations.push(this.readAnimation(n,n.readString(),a));return a}},{key:"readSkin",value:function(t,e,a,n){var r=null,i=0;if(a){if(0==(i=t.readInt(!0)))return null;r=new Ce("default")}else{(r=new Ce(t.readStringRef())).bones.length=t.readInt(!0);for(var s=0,o=r.bones.length;s<o;s++)r.bones[s]=e.bones[t.readInt(!0)];for(var h=0,l=t.readInt(!0);h<l;h++)r.constraints.push(e.ikConstraints[t.readInt(!0)]);for(var u=0,c=t.readInt(!0);u<c;u++)r.constraints.push(e.transformConstraints[t.readInt(!0)]);for(var f=0,d=t.readInt(!0);f<d;f++)r.constraints.push(e.pathConstraints[t.readInt(!0)]);i=t.readInt(!0)}for(var v=0;v<i;v++)for(var m=t.readInt(!0),p=0,g=t.readInt(!0);p<g;p++){var y=t.readStringRef(),k=this.readAttachment(t,e,r,m,y,n);k&&r.setAttachment(m,y,k)}return r}},{key:"readAttachment",value:function(t,e,a,n,r,i){var s=this.scale,o=t.readStringRef();switch(o||(o=r),t.readByte()){case Fe.Region:var h=t.readStringRef(),l=t.readFloat(),u=t.readFloat(),c=t.readFloat(),f=t.readFloat(),d=t.readFloat(),v=t.readFloat(),m=t.readFloat(),p=t.readInt32();h||(h=o);var g=this.attachmentLoader.newRegionAttachment(a,o,h);return g?(g.path=h,g.x=u*s,g.y=c*s,g.scaleX=f,g.scaleY=d,g.rotation=l,g.width=v*s,g.height=m*s,A.rgba8888ToColor(g.color,p),g.updateOffset(),g):null;case Fe.BoundingBox:var y=t.readInt(!0),k=this.readVertices(t,y),b=i?t.readInt32():0,x=this.attachmentLoader.newBoundingBoxAttachment(a,o);return x?(x.worldVerticesLength=y<<1,x.vertices=k.vertices,x.bones=k.bones,i&&A.rgba8888ToColor(x.color,b),x):null;case Fe.Mesh:var w=t.readStringRef(),I=t.readInt32(),E=t.readInt(!0),S=this.readFloatArray(t,E<<1,1),T=this.readShortArray(t),C=this.readVertices(t,E),M=t.readInt(!0),F=null,Y=0,X=0;i&&(F=this.readShortArray(t),Y=t.readFloat(),X=t.readFloat()),w||(w=o);var L=this.attachmentLoader.newMeshAttachment(a,o,w);return L?(L.path=w,A.rgba8888ToColor(L.color,I),L.bones=C.bones,L.vertices=C.vertices,L.worldVerticesLength=E<<1,L.triangles=T,L.regionUVs=S,L.updateUVs(),L.hullLength=M<<1,i&&(L.edges=F,L.width=Y*s,L.height=X*s),L):null;case Fe.LinkedMesh:var N=t.readStringRef(),P=t.readInt32(),_=t.readStringRef(),O=t.readStringRef(),B=t.readBoolean(),D=0,V=0;i&&(D=t.readFloat(),V=t.readFloat()),N||(N=o);var U=this.attachmentLoader.newMeshAttachment(a,o,N);return U?(U.path=N,A.rgba8888ToColor(U.color,P),i&&(U.width=D*s,U.height=V*s),this.linkedMeshes.push(new Ne(U,_,n,O,B)),U):null;case Fe.Path:for(var W=t.readBoolean(),j=t.readBoolean(),q=t.readInt(!0),G=this.readVertices(t,q),z=R.newArray(q/3,0),H=0,$=z.length;H<$;H++)z[H]=t.readFloat()*s;var J=i?t.readInt32():0,Q=this.attachmentLoader.newPathAttachment(a,o);return Q?(Q.closed=W,Q.constantSpeed=j,Q.worldVerticesLength=q<<1,Q.vertices=G.vertices,Q.bones=G.bones,Q.lengths=z,i&&A.rgba8888ToColor(Q.color,J),Q):null;case Fe.Point:var Z=t.readFloat(),K=t.readFloat(),tt=t.readFloat(),et=i?t.readInt32():0,at=this.attachmentLoader.newPointAttachment(a,o);return at?(at.x=K*s,at.y=tt*s,at.rotation=Z,i&&A.rgba8888ToColor(at.color,et),at):null;case Fe.Clipping:var nt=t.readInt(!0),rt=t.readInt(!0),it=this.readVertices(t,rt),st=i?t.readInt32():0,ot=this.attachmentLoader.newClippingAttachment(a,o);return ot?(ot.endSlot=e.slots[nt],ot.worldVerticesLength=rt<<1,ot.vertices=it.vertices,ot.bones=it.bones,i&&A.rgba8888ToColor(ot.color,st),ot):null}return null}},{key:"readVertices",value:function(t,e){var a=this.scale,n=e<<1,r=new Pe;if(!t.readBoolean())return r.vertices=this.readFloatArray(t,n,a),r;for(var i=new Array,s=new Array,o=0;o<e;o++){var h=t.readInt(!0);s.push(h);for(var l=0;l<h;l++)s.push(t.readInt(!0)),i.push(t.readFloat()*a),i.push(t.readFloat()*a),i.push(t.readFloat())}return r.vertices=R.toFloatArray(i),r.bones=s,r}},{key:"readFloatArray",value:function(t,e,a){var n=new Array(e);if(1==a)for(var r=0;r<e;r++)n[r]=t.readFloat();else for(var i=0;i<e;i++)n[i]=t.readFloat()*a;return n}},{key:"readShortArray",value:function(t){for(var e=t.readInt(!0),a=new Array(e),n=0;n<e;n++)a[n]=t.readShort();return a}},{key:"readAnimation",value:function(t,e,a){t.readInt(!0);var n=new Array,r=this.scale;new A,new A;for(var i=0,s=t.readInt(!0);i<s;i++)for(var o=t.readInt(!0),h=0,l=t.readInt(!0);h<l;h++){var u=t.readByte(),c=t.readInt(!0),f=c-1;switch(u){case Qe:for(var d=new At(c,o),v=0;v<c;v++)d.setFrame(v,t.readFloat(),t.readStringRef());n.push(d);break;case Ze:for(var m=t.readInt(!0),p=new yt(c,m,o),g=t.readFloat(),y=t.readUnsignedByte()/255,k=t.readUnsignedByte()/255,b=t.readUnsignedByte()/255,x=t.readUnsignedByte()/255,w=0,I=0;p.setFrame(w,g,y,k,b,x),w!=f;w++){var E=t.readFloat(),S=t.readUnsignedByte()/255,T=t.readUnsignedByte()/255,C=t.readUnsignedByte()/255,M=t.readUnsignedByte()/255;switch(t.readByte()){case sa:p.setStepped(w);break;case oa:Be(t,p,I++,w,0,g,E,y,S,1),Be(t,p,I++,w,1,g,E,k,T,1),Be(t,p,I++,w,2,g,E,b,C,1),Be(t,p,I++,w,3,g,E,x,M,1)}g=E,y=S,k=T,b=C,x=M}n.push(p);break;case Ke:for(var F=t.readInt(!0),Y=new kt(c,F,o),X=t.readFloat(),L=t.readUnsignedByte()/255,N=t.readUnsignedByte()/255,P=t.readUnsignedByte()/255,_=0,B=0;Y.setFrame(_,X,L,N,P),_!=f;_++){var D=t.readFloat(),V=t.readUnsignedByte()/255,U=t.readUnsignedByte()/255,W=t.readUnsignedByte()/255;switch(t.readByte()){case sa:Y.setStepped(_);break;case oa:Be(t,Y,B++,_,0,X,D,L,V,1),Be(t,Y,B++,_,1,X,D,N,U,1),Be(t,Y,B++,_,2,X,D,P,W,1)}X=D,L=V,N=U,P=W}n.push(Y);break;case ta:for(var j=t.readInt(!0),q=new xt(c,j,o),G=t.readFloat(),z=t.readUnsignedByte()/255,H=t.readUnsignedByte()/255,$=t.readUnsignedByte()/255,J=t.readUnsignedByte()/255,Q=t.readUnsignedByte()/255,Z=t.readUnsignedByte()/255,K=t.readUnsignedByte()/255,tt=0,et=0;q.setFrame(tt,G,z,H,$,J,Q,Z,K),tt!=f;tt++){var at=t.readFloat(),nt=t.readUnsignedByte()/255,rt=t.readUnsignedByte()/255,it=t.readUnsignedByte()/255,st=t.readUnsignedByte()/255,ot=t.readUnsignedByte()/255,Tt=t.readUnsignedByte()/255,Xt=t.readUnsignedByte()/255;switch(t.readByte()){case sa:q.setStepped(tt);break;case oa:Be(t,q,et++,tt,0,G,at,z,nt,1),Be(t,q,et++,tt,1,G,at,H,rt,1),Be(t,q,et++,tt,2,G,at,$,it,1),Be(t,q,et++,tt,3,G,at,J,st,1),Be(t,q,et++,tt,4,G,at,Q,ot,1),Be(t,q,et++,tt,5,G,at,Z,Tt,1),Be(t,q,et++,tt,6,G,at,K,Xt,1)}G=at,z=nt,H=rt,$=it,J=st,Q=ot,Z=Tt,K=Xt}n.push(q);break;case ea:for(var Lt=t.readInt(!0),Nt=new wt(c,Lt,o),Pt=t.readFloat(),_t=t.readUnsignedByte()/255,Ot=t.readUnsignedByte()/255,Bt=t.readUnsignedByte()/255,Dt=t.readUnsignedByte()/255,Vt=t.readUnsignedByte()/255,Ut=t.readUnsignedByte()/255,Wt=0,jt=0;Nt.setFrame(Wt,Pt,_t,Ot,Bt,Dt,Vt,Ut),Wt!=f;Wt++){var qt=t.readFloat(),Gt=t.readUnsignedByte()/255,zt=t.readUnsignedByte()/255,Ht=t.readUnsignedByte()/255,$t=t.readUnsignedByte()/255,Jt=t.readUnsignedByte()/255,Qt=t.readUnsignedByte()/255;switch(t.readByte()){case sa:Nt.setStepped(Wt);break;case oa:Be(t,Nt,jt++,Wt,0,Pt,qt,_t,Gt,1),Be(t,Nt,jt++,Wt,1,Pt,qt,Ot,zt,1),Be(t,Nt,jt++,Wt,2,Pt,qt,Bt,Ht,1),Be(t,Nt,jt++,Wt,3,Pt,qt,Dt,$t,1),Be(t,Nt,jt++,Wt,4,Pt,qt,Vt,Jt,1),Be(t,Nt,jt++,Wt,5,Pt,qt,Ut,Qt,1)}Pt=qt,_t=Gt,Ot=zt,Bt=Ht,Dt=$t,Vt=Jt,Ut=Qt}n.push(Nt);break;case aa:for(var Zt=new bt(c,t.readInt(!0),o),Kt=t.readFloat(),te=t.readUnsignedByte()/255,ee=0,ae=0;Zt.setFrame(ee,Kt,te),ee!=f;ee++){var ne=t.readFloat(),re=t.readUnsignedByte()/255;switch(t.readByte()){case sa:Zt.setStepped(ee);break;case oa:Be(t,Zt,ae++,ee,0,Kt,ne,te,re,1)}Kt=ne,te=re}n.push(Zt)}}for(var ie=0,se=t.readInt(!0);ie<se;ie++)for(var oe=t.readInt(!0),he=0,le=t.readInt(!0);he<le;he++){var fe=t.readByte(),de=t.readInt(!0),ve=t.readInt(!0);switch(fe){case Ve:n.push(_e(t,new ht(de,ve,oe),1));break;case Ue:n.push(Oe(t,new lt(de,ve,oe),r));break;case We:n.push(_e(t,new ut(de,ve,oe),r));break;case je:n.push(_e(t,new ct(de,ve,oe),r));break;case qe:n.push(Oe(t,new ft(de,ve,oe),1));break;case Ge:n.push(_e(t,new dt(de,ve,oe),1));break;case ze:n.push(_e(t,new vt(de,ve,oe),1));break;case He:n.push(Oe(t,new mt(de,ve,oe),1));break;case $e:n.push(_e(t,new pt(de,ve,oe),1));break;case Je:n.push(_e(t,new gt(de,ve,oe),1))}}for(var me=0,pe=t.readInt(!0);me<pe;me++){for(var ye=t.readInt(!0),ke=t.readInt(!0),be=ke-1,xe=new Rt(ke,t.readInt(!0),ye),we=t.readFloat(),Ae=t.readFloat(),Ie=t.readFloat()*r,Ee=0,Se=0;xe.setFrame(Ee,we,Ae,Ie,t.readByte(),t.readBoolean(),t.readBoolean()),Ee!=be;Ee++){var Te=t.readFloat(),Re=t.readFloat(),Ce=t.readFloat()*r;switch(t.readByte()){case sa:xe.setStepped(Ee);break;case oa:Be(t,xe,Se++,Ee,0,we,Te,Ae,Re,1),Be(t,xe,Se++,Ee,1,we,Te,Ie,Ce,r)}we=Te,Ae=Re,Ie=Ce}n.push(xe)}for(var Me=0,Fe=t.readInt(!0);Me<Fe;Me++){for(var Ye=t.readInt(!0),Xe=t.readInt(!0),Le=Xe-1,Ne=new Ct(Xe,t.readInt(!0),Ye),Pe=t.readFloat(),De=t.readFloat(),ha=t.readFloat(),la=t.readFloat(),ua=t.readFloat(),ca=t.readFloat(),fa=t.readFloat(),da=0,va=0;Ne.setFrame(da,Pe,De,ha,la,ua,ca,fa),da!=Le;da++){var ma=t.readFloat(),pa=t.readFloat(),ga=t.readFloat(),ya=t.readFloat(),ka=t.readFloat(),ba=t.readFloat(),xa=t.readFloat();switch(t.readByte()){case sa:Ne.setStepped(da);break;case oa:Be(t,Ne,va++,da,0,Pe,ma,De,pa,1),Be(t,Ne,va++,da,1,Pe,ma,ha,ga,1),Be(t,Ne,va++,da,2,Pe,ma,la,ya,1),Be(t,Ne,va++,da,3,Pe,ma,ua,ka,1),Be(t,Ne,va++,da,4,Pe,ma,ca,ba,1),Be(t,Ne,va++,da,5,Pe,ma,fa,xa,1)}Pe=ma,De=pa,ha=ga,la=ya,ua=ka,ca=ba,fa=xa}n.push(Ne)}for(var wa=0,Aa=t.readInt(!0);wa<Aa;wa++)for(var Ia=t.readInt(!0),Ea=a.pathConstraints[Ia],Sa=0,Ta=t.readInt(!0);Sa<Ta;Sa++)switch(t.readByte()){case na:n.push(_e(t,new Mt(t.readInt(!0),t.readInt(!0),Ia),Ea.positionMode==ue.Fixed?r:1));break;case ra:n.push(_e(t,new Ft(t.readInt(!0),t.readInt(!0),Ia),Ea.spacingMode==ce.Length||Ea.spacingMode==ce.Fixed?r:1));break;case ia:for(var Ra=new Yt(t.readInt(!0),t.readInt(!0),Ia),Ca=t.readFloat(),Ma=t.readFloat(),Fa=t.readFloat(),Ya=t.readFloat(),Xa=0,La=0,Na=Ra.getFrameCount()-1;Ra.setFrame(Xa,Ca,Ma,Fa,Ya),Xa!=Na;Xa++){var Pa=t.readFloat(),_a=t.readFloat(),Oa=t.readFloat(),Ba=t.readFloat();switch(t.readByte()){case sa:Ra.setStepped(Xa);break;case oa:Be(t,Ra,La++,Xa,0,Ca,Pa,Ma,_a,1),Be(t,Ra,La++,Xa,1,Ca,Pa,Fa,Oa,1),Be(t,Ra,La++,Xa,2,Ca,Pa,Ya,Ba,1)}Ca=Pa,Ma=_a,Fa=Oa,Ya=Ba}n.push(Ra)}for(var Da=0,Va=t.readInt(!0);Da<Va;Da++)for(var Ua=a.skins[t.readInt(!0)],Wa=0,ja=t.readInt(!0);Wa<ja;Wa++)for(var qa=t.readInt(!0),Ga=0,za=t.readInt(!0);Ga<za;Ga++){for(var Ha=t.readStringRef(),$a=Ua.getAttachment(qa,Ha),Ja=$a.bones,Qa=$a.vertices,Za=Ja?Qa.length/3*2:Qa.length,Ka=t.readInt(!0),tn=Ka-1,en=t.readInt(!0),an=new It(Ka,en,qa,$a),nn=t.readFloat(),rn=0,sn=0;;rn++){var on=void 0,hn=t.readInt(!0);if(0==hn)on=Ja?R.newFloatArray(Za):Qa;else{on=R.newFloatArray(Za);var ln=t.readInt(!0);if(hn+=ln,1==r)for(var un=ln;un<hn;un++)on[un]=t.readFloat();else for(var cn=ln;cn<hn;cn++)on[cn]=t.readFloat()*r;if(!Ja)for(var fn=0,dn=on.length;fn<dn;fn++)on[fn]+=Qa[fn]}if(an.setFrame(rn,nn,on),rn==tn)break;var vn=t.readFloat();switch(t.readByte()){case sa:an.setStepped(rn);break;case oa:Be(t,an,sn++,rn,0,nn,vn,0,1,1)}nn=vn}n.push(an)}var mn=t.readInt(!0);if(mn>0){for(var pn=new St(mn),gn=a.slots.length,yn=0;yn<mn;yn++){for(var kn=t.readFloat(),bn=t.readInt(!0),xn=R.newArray(gn,0),wn=gn-1;wn>=0;wn--)xn[wn]=-1;for(var An=R.newArray(gn-bn,0),In=0,En=0,Sn=0;Sn<bn;Sn++){for(var Tn=t.readInt(!0);In!=Tn;)An[En++]=In++;xn[In+t.readInt(!0)]=In++}for(;In<gn;)An[En++]=In++;for(var Rn=gn-1;Rn>=0;Rn--)-1==xn[Rn]&&(xn[Rn]=An[--En]);pn.setFrame(yn,kn,xn)}n.push(pn)}var Cn=t.readInt(!0);if(Cn>0){for(var Mn=new Et(Cn),Fn=0;Fn<Cn;Fn++){var Yn=t.readFloat(),Xn=a.events[t.readInt(!0)],Ln=new ge(Yn,Xn);Ln.intValue=t.readInt(!1),Ln.floatValue=t.readFloat(),Ln.stringValue=t.readBoolean()?t.readString():Xn.stringValue,Ln.data.audioPath&&(Ln.volume=t.readFloat(),Ln.balance=t.readFloat()),Mn.setFrame(Fn,Ln)}n.push(Mn)}for(var Nn=0,Pn=0,_n=n.length;Pn<_n;Pn++)Nn=Math.max(Nn,n[Pn].getDuration());return new O(e,n,Nn)}}]),t}(),Le=function(){function t(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Array,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new DataView(e.buffer);i(this,t),this.strings=a,this.index=n,this.buffer=r}return o(t,[{key:"readByte",value:function(){return this.buffer.getInt8(this.index++)}},{key:"readUnsignedByte",value:function(){return this.buffer.getUint8(this.index++)}},{key:"readShort",value:function(){var t=this.buffer.getInt16(this.index);return this.index+=2,t}},{key:"readInt32",value:function(){var t=this.buffer.getInt32(this.index);return this.index+=4,t}},{key:"readInt",value:function(t){var e=this.readByte(),a=127&e;return 0!=(128&e)&&(a|=(127&(e=this.readByte()))<<7,0!=(128&e)&&(a|=(127&(e=this.readByte()))<<14,0!=(128&e)&&(a|=(127&(e=this.readByte()))<<21,0!=(128&e)&&(a|=(127&(e=this.readByte()))<<28)))),t?a:a>>>1^-(1&a)}},{key:"readStringRef",value:function(){var t=this.readInt(!0);return 0==t?null:this.strings[t-1]}},{key:"readString",value:function(){var t=this.readInt(!0);switch(t){case 0:return null;case 1:return""}t--;for(var e="",a=0;a<t;){var n=this.readUnsignedByte();switch(n>>4){case 12:case 13:e+=String.fromCharCode((31&n)<<6|63&this.readByte()),a+=2;break;case 14:e+=String.fromCharCode((15&n)<<12|(63&this.readByte())<<6|63&this.readByte()),a+=3;break;default:e+=String.fromCharCode(n),a++}}return e}},{key:"readFloat",value:function(){var t=this.buffer.getFloat32(this.index);return this.index+=4,t}},{key:"readBoolean",value:function(){return 0!=this.readByte()}}]),t}(),Ne=o((function t(e,a,n,r,s){i(this,t),this.mesh=e,this.skin=a,this.slotIndex=n,this.parent=r,this.inheritDeform=s})),Pe=o((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;i(this,t),this.bones=e,this.vertices=a}));function _e(t,e,a){for(var n=t.readFloat(),r=t.readFloat()*a,i=0,s=0,o=e.getFrameCount()-1;e.setFrame(i,n,r),i!=o;i++){var h=t.readFloat(),l=t.readFloat()*a;switch(t.readByte()){case sa:e.setStepped(i);break;case oa:Be(t,e,s++,i,0,n,h,r,l,a)}n=h,r=l}return e}function Oe(t,e,a){for(var n=t.readFloat(),r=t.readFloat()*a,i=t.readFloat()*a,s=0,o=0,h=e.getFrameCount()-1;e.setFrame(s,n,r,i),s!=h;s++){var l=t.readFloat(),u=t.readFloat()*a,c=t.readFloat()*a;switch(t.readByte()){case sa:e.setStepped(s);break;case oa:Be(t,e,o++,s,0,n,l,r,u,a),Be(t,e,o++,s,1,n,l,i,c,a)}n=l,r=u,i=c}return e}function Be(t,e,a,n,r,i,s,o,h,l){e.setBezier(a,n,r,i,o,t.readFloat(),t.readFloat()*l,t.readFloat(),t.readFloat()*l,s,h)}!function(t){t[t.Region=0]="Region",t[t.BoundingBox=1]="BoundingBox",t[t.Mesh=2]="Mesh",t[t.LinkedMesh=3]="LinkedMesh",t[t.Path=4]="Path",t[t.Point=5]="Point",t[t.Clipping=6]="Clipping"}(Fe||(Fe={}));var De,Ve=0,Ue=1,We=2,je=3,qe=4,Ge=5,ze=6,He=7,$e=8,Je=9,Qe=0,Ze=1,Ke=2,ta=3,ea=4,aa=5,na=0,ra=1,ia=2,sa=1,oa=2,ha=function(){function t(){i(this,t),this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new M((function(){return R.newFloatArray(16)}))}return o(t,[{key:"update",value:function(t,e){if(!t)throw new Error("skeleton cannot be null.");var a=this.boundingBoxes,n=this.polygons,r=this.polygonPool,i=t.slots,s=i.length;a.length=0,r.freeAll(n),n.length=0;for(var o=0;o<s;o++){var h=i[o];if(h.bone.active){var l=h.getAttachment();if(l instanceof Ht){var u=l;a.push(u);var c=r.obtain();c.length!=u.worldVerticesLength&&(c=R.newFloatArray(u.worldVerticesLength)),n.push(c),u.computeWorldVertices(h,0,u.worldVerticesLength,c,0,2)}}}e?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)}},{key:"aabbCompute",value:function(){for(var t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY,r=this.polygons,i=0,s=r.length;i<s;i++)for(var o=r[i],h=o,l=0,u=o.length;l<u;l+=2){var c=h[l],f=h[l+1];t=Math.min(t,c),e=Math.min(e,f),a=Math.max(a,c),n=Math.max(n,f)}this.minX=t,this.minY=e,this.maxX=a,this.maxY=n}},{key:"aabbContainsPoint",value:function(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY}},{key:"aabbIntersectsSegment",value:function(t,e,a,n){var r=this.minX,i=this.minY,s=this.maxX,o=this.maxY;if(t<=r&&a<=r||e<=i&&n<=i||t>=s&&a>=s||e>=o&&n>=o)return!1;var h=(n-e)/(a-t),l=h*(r-t)+e;if(l>i&&l<o)return!0;if((l=h*(s-t)+e)>i&&l<o)return!0;var u=(i-e)/h+t;return u>r&&u<s||(u=(o-e)/h+t)>r&&u<s}},{key:"aabbIntersectsSkeleton",value:function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY}},{key:"containsPoint",value:function(t,e){for(var a=this.polygons,n=0,r=a.length;n<r;n++)if(this.containsPointPolygon(a[n],t,e))return this.boundingBoxes[n];return null}},{key:"containsPointPolygon",value:function(t,e,a){for(var n=t,r=t.length,i=r-2,s=!1,o=0;o<r;o+=2){var h=n[o+1],l=n[i+1];if(h<a&&l>=a||l<a&&h>=a){var u=n[o];u+(a-h)/(l-h)*(n[i]-u)<e&&(s=!s)}i=o}return s}},{key:"intersectsSegment",value:function(t,e,a,n){for(var r=this.polygons,i=0,s=r.length;i<s;i++)if(this.intersectsSegmentPolygon(r[i],t,e,a,n))return this.boundingBoxes[i];return null}},{key:"intersectsSegmentPolygon",value:function(t,e,a,n,r){for(var i=t,s=t.length,o=e-n,h=a-r,l=e*r-a*n,u=i[s-2],c=i[s-1],f=0;f<s;f+=2){var d=i[f],v=i[f+1],m=u*v-c*d,p=u-d,g=c-v,y=o*g-h*p,k=(l*p-o*m)/y;if((k>=u&&k<=d||k>=d&&k<=u)&&(k>=e&&k<=n||k>=n&&k<=e)){var b=(l*g-h*m)/y;if((b>=c&&b<=v||b>=v&&b<=c)&&(b>=a&&b<=r||b>=r&&b<=a))return!0}u=d,c=v}return!1}},{key:"getPolygon",value:function(t){if(!t)throw new Error("boundingBox cannot be null.");var e=this.boundingBoxes.indexOf(t);return-1==e?null:this.polygons[e]}},{key:"getWidth",value:function(){return this.maxX-this.minX}},{key:"getHeight",value:function(){return this.maxY-this.minY}}]),t}(),la=function(){function t(){i(this,t),this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new M((function(){return new Array})),this.polygonIndicesPool=new M((function(){return new Array}))}return o(t,[{key:"triangulate",value:function(e){var a=e,n=e.length>>1,r=this.indicesArray;r.length=0;for(var i=0;i<n;i++)r[i]=i;var s=this.isConcaveArray;s.length=0;for(var o=0,h=n;o<h;++o)s[o]=t.isConcave(o,n,a,r);var l=this.triangles;for(l.length=0;n>3;){for(var u=n-1,c=0,f=1;;){t:if(!s[c]){for(var d=r[u]<<1,v=r[c]<<1,m=r[f]<<1,p=a[d],g=a[d+1],y=a[v],k=a[v+1],b=a[m],x=a[m+1],w=(f+1)%n;w!=u;w=(w+1)%n)if(s[w]){var A=r[w]<<1,I=a[A],E=a[A+1];if(t.positiveArea(b,x,p,g,I,E)&&t.positiveArea(p,g,y,k,I,E)&&t.positiveArea(y,k,b,x,I,E))break t}break}if(0==f){do{if(!s[c])break;c--}while(c>0);break}u=c,c=f,f=(f+1)%n}l.push(r[(n+c-1)%n]),l.push(r[c]),l.push(r[(c+1)%n]),r.splice(c,1),s.splice(c,1);var S=(--n+c-1)%n,T=c==n?0:c;s[S]=t.isConcave(S,n,a,r),s[T]=t.isConcave(T,n,a,r)}return 3==n&&(l.push(r[2]),l.push(r[0]),l.push(r[1])),l}},{key:"decompose",value:function(e,a){var n=e,r=this.convexPolygons;this.polygonPool.freeAll(r),r.length=0;var i=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(i),i.length=0;var s=this.polygonIndicesPool.obtain();s.length=0;var o=this.polygonPool.obtain();o.length=0;for(var h=-1,l=0,u=0,c=a.length;u<c;u+=3){var f=a[u]<<1,d=a[u+1]<<1,v=a[u+2]<<1,m=n[f],p=n[f+1],g=n[d],y=n[d+1],k=n[v],b=n[v+1],x=!1;if(h==f){var w=o.length-4,A=t.winding(o[w],o[w+1],o[w+2],o[w+3],k,b),I=t.winding(k,b,o[0],o[1],o[2],o[3]);A==l&&I==l&&(o.push(k),o.push(b),s.push(v),x=!0)}x||(o.length>0?(r.push(o),i.push(s)):(this.polygonPool.free(o),this.polygonIndicesPool.free(s)),(o=this.polygonPool.obtain()).length=0,o.push(m),o.push(p),o.push(g),o.push(y),o.push(k),o.push(b),(s=this.polygonIndicesPool.obtain()).length=0,s.push(f),s.push(d),s.push(v),l=t.winding(m,p,g,y,k,b),h=f)}o.length>0&&(r.push(o),i.push(s));for(var E=0,S=r.length;E<S;E++)if(0!=(s=i[E]).length)for(var T=s[0],R=s[s.length-1],C=(o=r[E]).length-4,M=o[C],F=o[C+1],Y=o[C+2],X=o[C+3],L=o[0],N=o[1],P=o[2],_=o[3],O=t.winding(M,F,Y,X,L,N),B=0;B<S;B++)if(B!=E){var D=i[B];if(3==D.length){var V=D[0],U=D[1],W=D[2],j=r[B],q=j[j.length-2],G=j[j.length-1];if(V==T&&U==R){var z=t.winding(M,F,Y,X,q,G),H=t.winding(q,G,L,N,P,_);z==O&&H==O&&(j.length=0,D.length=0,o.push(q),o.push(G),s.push(W),M=Y,F=X,Y=q,X=G,B=0)}}}for(var $=r.length-1;$>=0;$--)0==(o=r[$]).length&&(r.splice($,1),this.polygonPool.free(o),s=i[$],i.splice($,1),this.polygonIndicesPool.free(s));return r}}],[{key:"isConcave",value:function(t,e,a,n){var r=n[(e+t-1)%e]<<1,i=n[t]<<1,s=n[(t+1)%e]<<1;return!this.positiveArea(a[r],a[r+1],a[i],a[i+1],a[s],a[s+1])}},{key:"positiveArea",value:function(t,e,a,n,r,i){return t*(i-n)+a*(e-i)+r*(n-e)>=0}},{key:"winding",value:function(t,e,a,n,r,i){var s=a-t,o=n-e;return r*o-i*s+s*e-t*o>=0?1:-1}}]),t}(),ua=function(){function t(){i(this,t),this.triangulator=new la,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array}return o(t,[{key:"clipStart",value:function(e,a){if(this.clipAttachment)return 0;this.clipAttachment=a;var n=a.worldVerticesLength,r=R.setArraySize(this.clippingPolygon,n);a.computeWorldVertices(e,0,n,r,0,2);var i=this.clippingPolygon;t.makeClockwise(i);for(var s=this.clippingPolygons=this.triangulator.decompose(i,this.triangulator.triangulate(i)),o=0,h=s.length;o<h;o++){var l=s[o];t.makeClockwise(l),l.push(l[0]),l.push(l[1])}return s.length}},{key:"clipEndWithSlot",value:function(t){this.clipAttachment&&this.clipAttachment.endSlot==t.data&&this.clipEnd()}},{key:"clipEnd",value:function(){this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)}},{key:"isClipping",value:function(){return null!=this.clipAttachment}},{key:"clipTriangles",value:function(t,e,a,n,r,i,s,o){var h=this.clipOutput,l=this.clippedVertices,u=this.clippedTriangles,c=this.clippingPolygons,f=this.clippingPolygons.length,d=o?12:8,v=0;l.length=0,u.length=0;t:for(var m=0;m<n;m+=3)for(var p=a[m]<<1,g=t[p],y=t[p+1],k=r[p],b=r[p+1],x=t[p=a[m+1]<<1],w=t[p+1],A=r[p],I=r[p+1],E=t[p=a[m+2]<<1],S=t[p+1],T=r[p],C=r[p+1],M=0;M<f;M++){var F=l.length;if(!this.clip(g,y,x,w,E,S,c[M],h)){var Y=R.setArraySize(l,F+3*d);Y[F]=g,Y[F+1]=y,Y[F+2]=i.r,Y[F+3]=i.g,Y[F+4]=i.b,Y[F+5]=i.a,o?(Y[F+6]=k,Y[F+7]=b,Y[F+8]=s.r,Y[F+9]=s.g,Y[F+10]=s.b,Y[F+11]=s.a,Y[F+12]=x,Y[F+13]=w,Y[F+14]=i.r,Y[F+15]=i.g,Y[F+16]=i.b,Y[F+17]=i.a,Y[F+18]=A,Y[F+19]=I,Y[F+20]=s.r,Y[F+21]=s.g,Y[F+22]=s.b,Y[F+23]=s.a,Y[F+24]=E,Y[F+25]=S,Y[F+26]=i.r,Y[F+27]=i.g,Y[F+28]=i.b,Y[F+29]=i.a,Y[F+30]=T,Y[F+31]=C,Y[F+32]=s.r,Y[F+33]=s.g,Y[F+34]=s.b,Y[F+35]=s.a):(Y[F+6]=k,Y[F+7]=b,Y[F+8]=x,Y[F+9]=w,Y[F+10]=i.r,Y[F+11]=i.g,Y[F+12]=i.b,Y[F+13]=i.a,Y[F+14]=A,Y[F+15]=I,Y[F+16]=E,Y[F+17]=S,Y[F+18]=i.r,Y[F+19]=i.g,Y[F+20]=i.b,Y[F+21]=i.a,Y[F+22]=T,Y[F+23]=C),F=u.length;var X=R.setArraySize(u,F+3);X[F]=v,X[F+1]=v+1,X[F+2]=v+2,v+=3;continue t}var L=h.length;if(0!=L){for(var N=w-S,P=E-x,_=g-E,O=S-y,B=1/(N*_+P*(y-S)),D=L>>1,V=this.clipOutput,U=R.setArraySize(l,F+D*d),W=0;W<L;W+=2){var j=V[W],q=V[W+1];U[F]=j,U[F+1]=q,U[F+2]=i.r,U[F+3]=i.g,U[F+4]=i.b,U[F+5]=i.a;var G=j-E,z=q-S,H=(N*G+P*z)*B,$=(O*G+_*z)*B,J=1-H-$;U[F+6]=k*H+A*$+T*J,U[F+7]=b*H+I*$+C*J,o&&(U[F+8]=s.r,U[F+9]=s.g,U[F+10]=s.b,U[F+11]=s.a),F+=d}F=u.length;var Q=R.setArraySize(u,F+3*(D-2));D--;for(var Z=1;Z<D;Z++)Q[F]=v,Q[F+1]=v+Z,Q[F+2]=v+Z+1,F+=3;v+=D+1}}}},{key:"clip",value:function(t,e,a,n,r,i,s,o){var h=o,l=!1,u=null;s.length%4>=2?(u=o,o=this.scratch):u=this.scratch,u.length=0,u.push(t),u.push(e),u.push(a),u.push(n),u.push(r),u.push(i),u.push(t),u.push(e),o.length=0;for(var c=s,f=s.length-4,d=0;;d+=2){for(var v=c[d],m=c[d+1],p=c[d+2],g=c[d+3],y=v-p,k=m-g,b=u,x=u.length-2,w=o.length,A=0;A<x;A+=2){var I=b[A],E=b[A+1],S=b[A+2],T=b[A+3],R=y*(T-g)-k*(S-p)>0;if(y*(E-g)-k*(I-p)>0){if(R){o.push(S),o.push(T);continue}var C=T-E,M=S-I,F=C*(p-v)-M*(g-m);if(Math.abs(F)>1e-6){var Y=(M*(m-E)-C*(v-I))/F;o.push(v+(p-v)*Y),o.push(m+(g-m)*Y)}else o.push(v),o.push(m)}else if(R){var X=T-E,L=S-I,N=X*(p-v)-L*(g-m);if(Math.abs(N)>1e-6){var P=(L*(m-E)-X*(v-I))/N;o.push(v+(p-v)*P),o.push(m+(g-m)*P)}else o.push(v),o.push(m);o.push(S),o.push(T)}l=!0}if(w==o.length)return h.length=0,!0;if(o.push(o[0]),o.push(o[1]),d==f)break;var _=o;(o=u).length=0,u=_}if(h!=o){h.length=0;for(var O=0,B=o.length-2;O<B;O++)h[O]=o[O]}else h.length=h.length-2;return l}}],[{key:"makeClockwise",value:function(t){for(var e=t,a=t.length,n=e[a-2]*e[1]-e[0]*e[a-1],r=0,i=0,s=0,o=0,h=a-3;o<h;o+=2)r=e[o],i=e[o+1],s=e[o+2],n+=r*e[o+3]-s*i;if(!(n<0))for(var l=0,u=a-2,c=a>>1;l<c;l+=2){var f=e[l],d=e[l+1],v=u-l;e[l]=e[v],e[l+1]=e[v+1],e[v]=f,e[v+1]=d}}}]),t}(),ca=function(){function t(e){i(this,t),this.attachmentLoader=null,this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=e}return o(t,[{key:"readSkeletonData",value:function(t){var e=this.scale,a=new Te,n="string"==typeof t?JSON.parse(t):t,r=n.skeleton;if(r&&(a.hash=r.hash,a.version=r.spine,a.x=r.x,a.y=r.y,a.width=r.width,a.height=r.height,a.fps=r.fps,a.imagesPath=r.images),n.bones)for(var i=0;i<n.bones.length;i++){var s=n.bones[i],o=null,h=pa(s,"parent",null);h&&(o=a.findBone(h));var l=new le(a.bones.length,s.name,o);l.length=pa(s,"length",0)*e,l.x=pa(s,"x",0)*e,l.y=pa(s,"y",0)*e,l.rotation=pa(s,"rotation",0),l.scaleX=pa(s,"scaleX",1),l.scaleY=pa(s,"scaleY",1),l.shearX=pa(s,"shearX",0),l.shearY=pa(s,"shearY",0),l.transformMode=R.enumValue(oe,pa(s,"transform","Normal")),l.skinRequired=pa(s,"skin",!1);var u=pa(s,"color",null);u&&l.color.setFromString(u),a.bones.push(l)}if(n.slots)for(var c=0;c<n.slots.length;c++){var f=n.slots[c],d=a.findBone(f.bone),v=new Me(a.slots.length,f.name,d),m=pa(f,"color",null);m&&v.color.setFromString(m);var p=pa(f,"dark",null);p&&(v.darkColor=A.fromString(p)),v.attachmentName=pa(f,"attachment",null),v.blendMode=R.enumValue(Ae,pa(f,"blend","normal")),a.slots.push(v)}if(n.ik)for(var g=0;g<n.ik.length;g++){var y=n.ik[g],k=new be(y.name);k.order=pa(y,"order",0),k.skinRequired=pa(y,"skin",!1);for(var b=0;b<y.bones.length;b++)k.bones.push(a.findBone(y.bones[b]));k.target=a.findBone(y.target),k.mix=pa(y,"mix",1),k.softness=pa(y,"softness",0)*e,k.bendDirection=pa(y,"bendPositive",!0)?1:-1,k.compress=pa(y,"compress",!1),k.stretch=pa(y,"stretch",!1),k.uniform=pa(y,"uniform",!1),a.ikConstraints.push(k)}if(n.transform)for(var x=0;x<n.transform.length;x++){var w=n.transform[x],I=new Ye(w.name);I.order=pa(w,"order",0),I.skinRequired=pa(w,"skin",!1);for(var E=0;E<w.bones.length;E++)I.bones.push(a.findBone(w.bones[E]));var S=w.target;I.target=a.findBone(S),I.local=pa(w,"local",!1),I.relative=pa(w,"relative",!1),I.offsetRotation=pa(w,"rotation",0),I.offsetX=pa(w,"x",0)*e,I.offsetY=pa(w,"y",0)*e,I.offsetScaleX=pa(w,"scaleX",0),I.offsetScaleY=pa(w,"scaleY",0),I.offsetShearY=pa(w,"shearY",0),I.mixRotate=pa(w,"mixRotate",1),I.mixX=pa(w,"mixX",1),I.mixY=pa(w,"mixY",I.mixX),I.mixScaleX=pa(w,"mixScaleX",1),I.mixScaleY=pa(w,"mixScaleY",I.mixScaleX),I.mixShearY=pa(w,"mixShearY",1),a.transformConstraints.push(I)}if(n.path)for(var T=0;T<n.path.length;T++){var C=n.path[T],M=new xe(C.name);M.order=pa(C,"order",0),M.skinRequired=pa(C,"skin",!1);for(var F=0;F<C.bones.length;F++)M.bones.push(a.findBone(C.bones[F]));var Y=C.target;M.target=a.findSlot(Y),M.positionMode=R.enumValue(ue,pa(C,"positionMode","Percent")),M.spacingMode=R.enumValue(ce,pa(C,"spacingMode","Length")),M.rotateMode=R.enumValue(fe,pa(C,"rotateMode","Tangent")),M.offsetRotation=pa(C,"rotation",0),M.position=pa(C,"position",0),M.positionMode==ue.Fixed&&(M.position*=e),M.spacing=pa(C,"spacing",0),M.spacingMode!=ce.Length&&M.spacingMode!=ce.Fixed||(M.spacing*=e),M.mixRotate=pa(C,"mixRotate",1),M.mixX=pa(C,"mixX",1),M.mixY=pa(C,"mixY",M.mixX),a.pathConstraints.push(M)}if(n.skins)for(var X=0;X<n.skins.length;X++){var L=n.skins[X],N=new Ce(L.name);if(L.bones)for(var P=0;P<L.bones.length;P++)N.bones.push(a.findBone(L.bones[P]));if(L.ik)for(var _=0;_<L.ik.length;_++)N.constraints.push(a.findIkConstraint(L.ik[_]));if(L.transform)for(var O=0;O<L.transform.length;O++)N.constraints.push(a.findTransformConstraint(L.transform[O]));if(L.path)for(var B=0;B<L.path.length;B++)N.constraints.push(a.findPathConstraint(L.path[B]));for(var D in L.attachments){var V=a.findSlot(D),U=L.attachments[D];for(var W in U){var j=this.readAttachment(U[W],N,V.index,W,a);j&&N.setAttachment(V.index,W,j)}}a.skins.push(N),"default"==N.name&&(a.defaultSkin=N)}for(var q=0,G=this.linkedMeshes.length;q<G;q++){var z=this.linkedMeshes[q],H=(z.skin?a.findSkin(z.skin):a.defaultSkin).getAttachment(z.slotIndex,z.parent);z.mesh.deformAttachment=z.inheritDeform?H:z.mesh,z.mesh.setParentMesh(H),z.mesh.updateUVs()}if(this.linkedMeshes.length=0,n.events)for(var $ in n.events){var J=n.events[$],Q=new ye($);Q.intValue=pa(J,"int",0),Q.floatValue=pa(J,"float",0),Q.stringValue=pa(J,"string",""),Q.audioPath=pa(J,"audio",null),Q.audioPath&&(Q.volume=pa(J,"volume",1),Q.balance=pa(J,"balance",0)),a.events.push(Q)}if(n.animations)for(var Z in n.animations){var K=n.animations[Z];this.readAnimation(K,Z,a)}return a}},{key:"readAttachment",value:function(t,e,a,n,r){var i=this.scale;switch(n=pa(t,"name",n),pa(t,"type","region")){case"region":var s=pa(t,"path",n),o=this.attachmentLoader.newRegionAttachment(e,n,s);if(!o)return null;o.path=s,o.x=pa(t,"x",0)*i,o.y=pa(t,"y",0)*i,o.scaleX=pa(t,"scaleX",1),o.scaleY=pa(t,"scaleY",1),o.rotation=pa(t,"rotation",0),o.width=t.width*i,o.height=t.height*i;var h=pa(t,"color",null);return h&&o.color.setFromString(h),o.updateOffset(),o;case"boundingbox":var l=this.attachmentLoader.newBoundingBoxAttachment(e,n);if(!l)return null;this.readVertices(t,l,t.vertexCount<<1);var u=pa(t,"color",null);return u&&l.color.setFromString(u),l;case"mesh":case"linkedmesh":var c=pa(t,"path",n),f=this.attachmentLoader.newMeshAttachment(e,n,c);if(!f)return null;f.path=c;var d=pa(t,"color",null);d&&f.color.setFromString(d),f.width=pa(t,"width",0)*i,f.height=pa(t,"height",0)*i;var v=pa(t,"parent",null);if(v)return this.linkedMeshes.push(new fa(f,pa(t,"skin",null),a,v,pa(t,"deform",!0))),f;var m=t.uvs;return this.readVertices(t,f,m.length),f.triangles=t.triangles,f.regionUVs=m,f.updateUVs(),f.edges=pa(t,"edges",null),f.hullLength=2*pa(t,"hull",0),f;case"path":var p=this.attachmentLoader.newPathAttachment(e,n);if(!p)return null;p.closed=pa(t,"closed",!1),p.constantSpeed=pa(t,"constantSpeed",!0);var g=t.vertexCount;this.readVertices(t,p,g<<1);for(var y=R.newArray(g/3,0),k=0;k<t.lengths.length;k++)y[k]=t.lengths[k]*i;p.lengths=y;var b=pa(t,"color",null);return b&&p.color.setFromString(b),p;case"point":var x=this.attachmentLoader.newPointAttachment(e,n);if(!x)return null;x.x=pa(t,"x",0)*i,x.y=pa(t,"y",0)*i,x.rotation=pa(t,"rotation",0);var w=pa(t,"color",null);return w&&x.color.setFromString(w),x;case"clipping":var A=this.attachmentLoader.newClippingAttachment(e,n);if(!A)return null;var I=pa(t,"end",null);I&&(A.endSlot=r.findSlot(I));var E=t.vertexCount;this.readVertices(t,A,E<<1);var S=pa(t,"color",null);return S&&A.color.setFromString(S),A}return null}},{key:"readVertices",value:function(t,e,a){var n=this.scale;e.worldVerticesLength=a;var r=t.vertices;if(a!=r.length){for(var i=new Array,s=new Array,o=0,h=r.length;o<h;){var l=r[o++];s.push(l);for(var u=o+4*l;o<u;o+=4)s.push(r[o]),i.push(r[o+1]*n),i.push(r[o+2]*n),i.push(r[o+3])}e.bones=s,e.vertices=R.toFloatArray(i)}else{var c=R.toFloatArray(r);if(1!=n)for(var f=0,d=r.length;f<d;f++)c[f]*=n;e.vertices=c}}},{key:"readAnimation",value:function(t,e,a){var n=this.scale,r=new Array;if(t.slots)for(var i in t.slots){var s=t.slots[i],o=a.findSlot(i).index;for(var h in s){var l=s[h];if(l){var u=l.length;if("attachment"==h){for(var c=new At(u,o),f=0;f<u;f++){var d=l[f];c.setFrame(f,pa(d,"time",0),d.name)}r.push(c)}else if("rgba"==h){for(var v=new yt(u,u<<2,o),m=l[0],p=pa(m,"time",0),g=A.fromString(m.color),y=0,k=0;;y++){v.setFrame(y,p,g.r,g.g,g.b,g.a);var b=l[y+1];if(!b){v.shrink(k);break}var x=pa(b,"time",0),w=A.fromString(b.color),I=m.curve;I&&(k=ma(I,v,k,y,0,p,x,g.r,w.r,1),k=ma(I,v,k,y,1,p,x,g.g,w.g,1),k=ma(I,v,k,y,2,p,x,g.b,w.b,1),k=ma(I,v,k,y,3,p,x,g.a,w.a,1)),p=x,g=w,m=b}r.push(v)}else if("rgb"==h){for(var E=new kt(u,3*u,o),S=l[0],T=pa(S,"time",0),C=A.fromString(S.color),M=0,F=0;;M++){E.setFrame(M,T,C.r,C.g,C.b);var Y=l[M+1];if(!Y){E.shrink(F);break}var X=pa(Y,"time",0),L=A.fromString(Y.color),N=S.curve;N&&(F=ma(N,E,F,M,0,T,X,C.r,L.r,1),F=ma(N,E,F,M,1,T,X,C.g,L.g,1),F=ma(N,E,F,M,2,T,X,C.b,L.b,1)),T=X,C=L,S=Y}r.push(E)}else if("alpha"==h)r.push(da(l,new bt(u,u,o),0,1));else if("rgba2"==h){for(var P=new xt(u,7*u,o),_=l[0],B=pa(_,"time",0),D=A.fromString(_.light),V=A.fromString(_.dark),U=0,W=0;;U++){P.setFrame(U,B,D.r,D.g,D.b,D.a,V.r,V.g,V.b);var j=l[U+1];if(!j){P.shrink(W);break}var q=pa(j,"time",0),G=A.fromString(j.light),z=A.fromString(j.dark),H=_.curve;H&&(W=ma(H,P,W,U,0,B,q,D.r,G.r,1),W=ma(H,P,W,U,1,B,q,D.g,G.g,1),W=ma(H,P,W,U,2,B,q,D.b,G.b,1),W=ma(H,P,W,U,3,B,q,D.a,G.a,1),W=ma(H,P,W,U,4,B,q,V.r,z.r,1),W=ma(H,P,W,U,5,B,q,V.g,z.g,1),W=ma(H,P,W,U,6,B,q,V.b,z.b,1)),B=q,D=G,V=z,_=j}r.push(P)}else if("rgb2"==h){for(var $=new wt(u,6*u,o),J=l[0],Q=pa(J,"time",0),Z=A.fromString(J.light),K=A.fromString(J.dark),tt=0,et=0;;tt++){$.setFrame(tt,Q,Z.r,Z.g,Z.b,K.r,K.g,K.b);var at=l[tt+1];if(!at){$.shrink(et);break}var nt=pa(at,"time",0),rt=A.fromString(at.light),it=A.fromString(at.dark),st=J.curve;st&&(et=ma(st,$,et,tt,0,Q,nt,Z.r,rt.r,1),et=ma(st,$,et,tt,1,Q,nt,Z.g,rt.g,1),et=ma(st,$,et,tt,2,Q,nt,Z.b,rt.b,1),et=ma(st,$,et,tt,3,Q,nt,K.r,it.r,1),et=ma(st,$,et,tt,4,Q,nt,K.g,it.g,1),et=ma(st,$,et,tt,5,Q,nt,K.b,it.b,1)),Q=nt,Z=rt,K=it,J=at}r.push($)}}}}if(t.bones)for(var ot in t.bones){var Tt=t.bones[ot],Xt=a.findBone(ot).index;for(var Lt in Tt){var Nt=Tt[Lt],Pt=Nt.length;if(0!=Pt)if("rotate"===Lt)r.push(da(Nt,new ht(Pt,Pt,Xt),0,1));else if("translate"===Lt){var _t=new lt(Pt,Pt<<1,Xt);r.push(va(Nt,_t,"x","y",0,n))}else if("translatex"===Lt){var Ot=new ut(Pt,Pt,Xt);r.push(da(Nt,Ot,0,n))}else if("translatey"===Lt){var Bt=new ct(Pt,Pt,Xt);r.push(da(Nt,Bt,0,n))}else if("scale"===Lt){var Dt=new ft(Pt,Pt<<1,Xt);r.push(va(Nt,Dt,"x","y",1,1))}else if("scalex"===Lt){var Vt=new dt(Pt,Pt,Xt);r.push(da(Nt,Vt,1,1))}else if("scaley"===Lt){var Ut=new vt(Pt,Pt,Xt);r.push(da(Nt,Ut,1,1))}else if("shear"===Lt){var Wt=new mt(Pt,Pt<<1,Xt);r.push(va(Nt,Wt,"x","y",0,1))}else if("shearx"===Lt){var jt=new pt(Pt,Pt,Xt);r.push(da(Nt,jt,0,1))}else if("sheary"===Lt){var qt=new gt(Pt,Pt,Xt);r.push(da(Nt,qt,0,1))}}}if(t.ik)for(var Gt in t.ik){var zt=t.ik[Gt],Ht=zt[0];if(Ht){for(var $t=a.findIkConstraint(Gt),Jt=a.ikConstraints.indexOf($t),Qt=new Rt(zt.length,zt.length<<1,Jt),Zt=pa(Ht,"time",0),Kt=pa(Ht,"mix",1),te=pa(Ht,"softness",0)*n,ee=0,ae=0;;ee++){Qt.setFrame(ee,Zt,Kt,te,pa(Ht,"bendPositive",!0)?1:-1,pa(Ht,"compress",!1),pa(Ht,"stretch",!1));var ne=zt[ee+1];if(!ne){Qt.shrink(ae);break}var re=pa(ne,"time",0),ie=pa(ne,"mix",1),se=pa(ne,"softness",0)*n,oe=Ht.curve;oe&&(ae=ma(oe,Qt,ae,ee,0,Zt,re,Kt,ie,1),ae=ma(oe,Qt,ae,ee,1,Zt,re,te,se,n)),Zt=re,Kt=ie,te=se,Ht=ne}r.push(Qt)}}if(t.transform)for(var he in t.transform){var le=t.transform[he],fe=le[0];if(fe){for(var de=a.findTransformConstraint(he),ve=a.transformConstraints.indexOf(de),me=new Ct(le.length,6*le.length,ve),pe=pa(fe,"time",0),ye=pa(fe,"mixRotate",1),ke=pa(fe,"mixX",1),be=pa(fe,"mixY",ke),xe=pa(fe,"mixScaleX",1),we=pa(fe,"mixScaleY",xe),Ae=pa(fe,"mixShearY",1),Ie=0,Ee=0;;Ie++){me.setFrame(Ie,pe,ye,ke,be,xe,we,Ae);var Se=le[Ie+1];if(!Se){me.shrink(Ee);break}var Te=pa(Se,"time",0),Re=pa(Se,"mixRotate",1),Ce=pa(Se,"mixX",1),Me=pa(Se,"mixY",Ce),Fe=pa(Se,"mixScaleX",1),Ye=pa(Se,"mixScaleY",Fe),Xe=pa(Se,"mixShearY",1),Le=fe.curve;Le&&(Ee=ma(Le,me,Ee,Ie,0,pe,Te,ye,Re,1),Ee=ma(Le,me,Ee,Ie,1,pe,Te,ke,Ce,1),Ee=ma(Le,me,Ee,Ie,2,pe,Te,be,Me,1),Ee=ma(Le,me,Ee,Ie,3,pe,Te,xe,Fe,1),Ee=ma(Le,me,Ee,Ie,4,pe,Te,we,Ye,1),Ee=ma(Le,me,Ee,Ie,5,pe,Te,Ae,Xe,1)),pe=Te,ye=Re,ke=Ce,be=Me,xe=Fe,we=Ye,xe=Fe,fe=Se}r.push(me)}}if(t.path)for(var Ne in t.path){var Pe=t.path[Ne],_e=a.findPathConstraint(Ne),Oe=a.pathConstraints.indexOf(_e);for(var Be in Pe){var De=Pe[Be],Ve=De[0];if(Ve){var Ue=De.length;if("position"===Be){var We=new Mt(Ue,Ue,Oe);r.push(da(De,We,0,_e.positionMode==ue.Fixed?n:1))}else if("spacing"===Be){var je=new Ft(Ue,Ue,Oe);r.push(da(De,je,0,_e.spacingMode==ce.Length||_e.spacingMode==ce.Fixed?n:1))}else if("mix"===Be){for(var qe=new Yt(Ue,3*Ue,Oe),Ge=pa(Ve,"time",0),ze=pa(Ve,"mixRotate",1),He=pa(Ve,"mixX",1),$e=pa(Ve,"mixY",He),Je=0,Qe=0;;Je++){qe.setFrame(Je,Ge,ze,He,$e);var Ze=De[Je+1];if(!Ze){qe.shrink(Qe);break}var Ke=pa(Ze,"time",0),ta=pa(Ze,"mixRotate",1),ea=pa(Ze,"mixX",1),aa=pa(Ze,"mixY",ea),na=Ve.curve;na&&(Qe=ma(na,qe,Qe,Je,0,Ge,Ke,ze,ta,1),Qe=ma(na,qe,Qe,Je,1,Ge,Ke,He,ea,1),Qe=ma(na,qe,Qe,Je,2,Ge,Ke,$e,aa,1)),Ge=Ke,ze=ta,He=ea,$e=aa,Ve=Ze}r.push(qe)}}}}if(t.deform)for(var ra in t.deform){var ia=t.deform[ra],sa=a.findSkin(ra);for(var oa in ia){var ha=ia[oa],la=a.findSlot(oa).index;for(var ua in ha){var ca=ha[ua],fa=ca[0];if(fa){for(var ga=sa.getAttachment(la,ua),ya=ga.bones,ka=ga.vertices,ba=ya?ka.length/3*2:ka.length,xa=new It(ca.length,ca.length,la,ga),wa=pa(fa,"time",0),Aa=0,Ia=0;;Aa++){var Ea=void 0,Sa=pa(fa,"vertices",null);if(Sa){Ea=R.newFloatArray(ba);var Ta=pa(fa,"offset",0);if(R.arrayCopy(Sa,0,Ea,Ta,Sa.length),1!=n)for(var Ra=Ta,Ca=Ra+Sa.length;Ra<Ca;Ra++)Ea[Ra]*=n;if(!ya)for(var Ma=0;Ma<ba;Ma++)Ea[Ma]+=ka[Ma]}else Ea=ya?R.newFloatArray(ba):ka;xa.setFrame(Aa,wa,Ea);var Fa=ca[Aa+1];if(!Fa){xa.shrink(Ia);break}var Ya=pa(Fa,"time",0),Xa=fa.curve;Xa&&(Ia=ma(Xa,xa,Ia,Aa,0,wa,Ya,0,1,1)),wa=Ya,fa=Fa}r.push(xa)}}}}if(t.drawOrder){for(var La=new St(t.drawOrder.length),Na=a.slots.length,Pa=0,_a=0;_a<t.drawOrder.length;_a++,Pa++){var Oa=t.drawOrder[_a],Ba=null,Da=pa(Oa,"offsets",null);if(Da){Ba=R.newArray(Na,-1);for(var Va=R.newArray(Na-Da.length,0),Ua=0,Wa=0,ja=0;ja<Da.length;ja++){for(var qa=Da[ja],Ga=a.findSlot(qa.slot).index;Ua!=Ga;)Va[Wa++]=Ua++;Ba[Ua+qa.offset]=Ua++}for(;Ua<Na;)Va[Wa++]=Ua++;for(var za=Na-1;za>=0;za--)-1==Ba[za]&&(Ba[za]=Va[--Wa])}La.setFrame(Pa,pa(Oa,"time",0),Ba)}r.push(La)}if(t.events){for(var Ha=new Et(t.events.length),$a=0,Ja=0;Ja<t.events.length;Ja++,$a++){var Qa=t.events[Ja],Za=a.findEvent(Qa.name),Ka=new ge(R.toSinglePrecision(pa(Qa,"time",0)),Za);Ka.intValue=pa(Qa,"int",Za.intValue),Ka.floatValue=pa(Qa,"float",Za.floatValue),Ka.stringValue=pa(Qa,"string",Za.stringValue),Ka.data.audioPath&&(Ka.volume=pa(Qa,"volume",1),Ka.balance=pa(Qa,"balance",0)),Ha.setFrame($a,Ka)}r.push(Ha)}for(var tn=0,en=0,an=r.length;en<an;en++)tn=Math.max(tn,r[en].getDuration());a.animations.push(new O(e,r,tn))}}]),t}(),fa=o((function t(e,a,n,r,s){i(this,t),this.mesh=e,this.skin=a,this.slotIndex=n,this.parent=r,this.inheritDeform=s}));function da(t,e,a,n){for(var r=t[0],i=pa(r,"time",0),s=pa(r,"value",a)*n,o=0,h=0;;h++){e.setFrame(h,i,s);var l=t[h+1];if(!l)return e.shrink(o),e;var u=pa(l,"time",0),c=pa(l,"value",a)*n;r.curve&&(o=ma(r.curve,e,o,h,0,i,u,s,c,n)),i=u,s=c,r=l}}function va(t,e,a,n,r,i){for(var s=t[0],o=pa(s,"time",0),h=pa(s,a,r)*i,l=pa(s,n,r)*i,u=0,c=0;;c++){e.setFrame(c,o,h,l);var f=t[c+1];if(!f)return e.shrink(u),e;var d=pa(f,"time",0),v=pa(f,a,r)*i,m=pa(f,n,r)*i,p=s.curve;p&&(u=ma(p,e,u,c,0,o,d,h,v,i),u=ma(p,e,u,c,1,o,d,l,m,i)),o=d,h=v,l=m,s=f}}function ma(t,e,a,n,r,i,s,o,h,l){if("stepped"==t)return e.setStepped(n),a;var u=r<<2,c=t[u],f=t[u+1]*l,d=t[u+2],v=t[u+3]*l;return e.setBezier(a,n,r,i,o,c,f,d,v,s,h),a+1}function pa(t,e,a){return void 0!==t[e]?t[e]:a}void 0===Math.fround&&(Math.fround=(De=new Float32Array(1),function(t){return De[0]=t,De[0]}));var ga=function(){function t(e,a){i(this,t),this.jitterX=0,this.jitterY=0,this.jitterX=e,this.jitterY=a}return o(t,[{key:"begin",value:function(t){}},{key:"transform",value:function(t,e,a,n){t.x+=I.randomTriangular(-this.jitterX,this.jitterY),t.y+=I.randomTriangular(-this.jitterX,this.jitterY)}},{key:"end",value:function(){}}]),t}(),ya=function(){function t(e){i(this,t),this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=e}return o(t,[{key:"begin",value:function(t){this.worldX=t.x+this.centerX,this.worldY=t.y+this.centerY}},{key:"transform",value:function(e,a,n,r){var i=this.angle*I.degreesToRadians,s=e.x-this.worldX,o=e.y-this.worldY,h=Math.sqrt(s*s+o*o);if(h<this.radius){var l=t.interpolation.apply(0,i,(this.radius-h)/this.radius),u=Math.cos(l),c=Math.sin(l);e.x=u*s-c*o+this.worldX,e.y=c*s+u*o+this.worldY}}},{key:"end",value:function(){}}]),t}();ya.interpolation=new T(2);var ka=Object.freeze({__proto__:null,AlphaTimeline:bt,Animation:O,AnimationState:Xt,AnimationStateAdapter:Ot,AnimationStateData:zt,AssetManagerBase:me,AtlasAttachmentLoader:he,Attachment:L,AttachmentTimeline:At,BinaryInput:Le,get BlendMode(){return Ae},Bone:de,BoneData:le,BoundingBoxAttachment:Ht,CURRENT:qt,ClippingAttachment:$t,Color:A,ConstraintData:ve,CurveTimeline:it,CurveTimeline1:st,CurveTimeline2:ot,DebugUtils:C,DeformTimeline:It,Downloader:pe,DrawOrderTimeline:St,Event:ge,EventData:ye,EventQueue:Nt,EventTimeline:Et,get EventType(){return Tt},FIRST:Dt,FakeTexture:Zt,HOLD_FIRST:Ut,HOLD_MIX:Wt,HOLD_SUBSEQUENT:Vt,IkConstraint:ke,IkConstraintData:be,IkConstraintTimeline:Rt,IntSet:x,Interpolation:E,JitterEffect:ga,MathUtils:I,MeshAttachment:ne,get MixBlend(){return P},get MixDirection(){return _},PathAttachment:re,PathConstraint:we,PathConstraintData:xe,PathConstraintMixTimeline:Yt,PathConstraintPositionTimeline:Mt,PathConstraintSpacingTimeline:Ft,PointAttachment:ie,Pool:M,get PositionMode(){return ue},Pow:S,PowOut:T,RGB2Timeline:wt,RGBA2Timeline:xt,RGBATimeline:yt,RGBTimeline:kt,RegionAttachment:se,get RotateMode(){return fe},RotateTimeline:ht,SETUP:jt,SUBSEQUENT:Bt,ScaleTimeline:ft,ScaleXTimeline:dt,ScaleYTimeline:vt,ShearTimeline:mt,ShearXTimeline:pt,ShearYTimeline:gt,Skeleton:Se,SkeletonBinary:Xe,SkeletonBounds:ha,SkeletonClipping:ua,SkeletonData:Te,SkeletonJson:ca,Skin:Ce,SkinEntry:Re,Slot:Ie,SlotData:Me,get SpacingMode(){return ce},StringSet:w,SwirlEffect:ya,Texture:Jt,TextureAtlas:Kt,TextureAtlasPage:ee,TextureAtlasRegion:ae,get TextureFilter(){return Pt},TextureRegion:Qt,get TextureWrap(){return _t},TimeKeeper:Y,Timeline:rt,TrackEntry:Lt,TransformConstraint:Ee,TransformConstraintData:Ye,TransformConstraintTimeline:Ct,get TransformMode(){return oe},TranslateTimeline:lt,TranslateXTimeline:ut,TranslateYTimeline:ct,Triangulator:la,Utils:R,Vector2:F,VertexAttachment:N,WindowedMean:X}),ba={9728:t.FILTER_NEAREST,9729:t.FILTER_LINEAR,9984:t.FILTER_NEAREST_MIPMAP_NEAREST,9985:t.FILTER_LINEAR_MIPMAP_NEAREST,9986:t.FILTER_NEAREST_MIPMAP_LINEAR,9987:t.FILTER_LINEAR_MIPMAP_LINEAR},xa={33648:t.ADDRESS_MIRRORED_REPEAT,33071:t.ADDRESS_CLAMP_TO_EDGE,10487:t.ADDRESS_REPEAT},wa=function(){function t(e){i(this,t),this._image={width:e.width,height:e.height},this.pcTexture=e}return o(t,[{key:"setFilters",value:function(t,e){this.pcTexture.minFilter=ba[t],this.pcTexture.magFilter=ba[e]}},{key:"setWraps",value:function(t,e){this.pcTexture.addressU=xa[t],this.pcTexture.addressV=xa[e]}},{key:"getImage",value:function(){return this._image}},{key:"dispose",value:function(){this.pcTexture.destroy()}}]),t}();function Aa(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ia={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},Ea=Aa(Ia),Sa="object"===("undefined"==typeof process?"undefined":r(process))&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){for(var t,e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];return(t=console).error.apply(t,["SEMVER"].concat(a))}:function(){},Ta=Sa;Aa(Ta);var Ra={exports:{}};!function(t,e){var a=Ia.MAX_SAFE_COMPONENT_LENGTH,n=Ia.MAX_SAFE_BUILD_LENGTH,r=Ia.MAX_LENGTH,i=Ta,s=(e=t.exports={}).re=[],o=e.safeRe=[],h=e.src=[],l=e.t={},u=0,c="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",r],[c,n]],d=function(t,e,a){var n=function(t){for(var e=0,a=f;e<a.length;e++){var n=m(a[e],2),r=n[0],i=n[1];t=t.split("".concat(r,"*")).join("".concat(r,"{0,").concat(i,"}")).split("".concat(r,"+")).join("".concat(r,"{1,").concat(i,"}"))}return t}(e),r=u++;i(t,r,e),l[t]=r,h[r]=e,s[r]=new RegExp(e,a?"g":void 0),o[r]=new RegExp(n,a?"g":void 0)};d("NUMERICIDENTIFIER","0|[1-9]\\d*"),d("NUMERICIDENTIFIERLOOSE","\\d+"),d("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-]".concat(c,"*")),d("MAINVERSION","(".concat(h[l.NUMERICIDENTIFIER],")\\.")+"(".concat(h[l.NUMERICIDENTIFIER],")\\.")+"(".concat(h[l.NUMERICIDENTIFIER],")")),d("MAINVERSIONLOOSE","(".concat(h[l.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(h[l.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(h[l.NUMERICIDENTIFIERLOOSE],")")),d("PRERELEASEIDENTIFIER","(?:".concat(h[l.NUMERICIDENTIFIER],"|").concat(h[l.NONNUMERICIDENTIFIER],")")),d("PRERELEASEIDENTIFIERLOOSE","(?:".concat(h[l.NUMERICIDENTIFIERLOOSE],"|").concat(h[l.NONNUMERICIDENTIFIER],")")),d("PRERELEASE","(?:-(".concat(h[l.PRERELEASEIDENTIFIER],"(?:\\.").concat(h[l.PRERELEASEIDENTIFIER],")*))")),d("PRERELEASELOOSE","(?:-?(".concat(h[l.PRERELEASEIDENTIFIERLOOSE],"(?:\\.").concat(h[l.PRERELEASEIDENTIFIERLOOSE],")*))")),d("BUILDIDENTIFIER","".concat(c,"+")),d("BUILD","(?:\\+(".concat(h[l.BUILDIDENTIFIER],"(?:\\.").concat(h[l.BUILDIDENTIFIER],")*))")),d("FULLPLAIN","v?".concat(h[l.MAINVERSION]).concat(h[l.PRERELEASE],"?").concat(h[l.BUILD],"?")),d("FULL","^".concat(h[l.FULLPLAIN],"$")),d("LOOSEPLAIN","[v=\\s]*".concat(h[l.MAINVERSIONLOOSE]).concat(h[l.PRERELEASELOOSE],"?").concat(h[l.BUILD],"?")),d("LOOSE","^".concat(h[l.LOOSEPLAIN],"$")),d("GTLT","((?:<|>)?=?)"),d("XRANGEIDENTIFIERLOOSE","".concat(h[l.NUMERICIDENTIFIERLOOSE],"|x|X|\\*")),d("XRANGEIDENTIFIER","".concat(h[l.NUMERICIDENTIFIER],"|x|X|\\*")),d("XRANGEPLAIN","[v=\\s]*(".concat(h[l.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(h[l.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(h[l.XRANGEIDENTIFIER],")")+"(?:".concat(h[l.PRERELEASE],")?").concat(h[l.BUILD],"?")+")?)?"),d("XRANGEPLAINLOOSE","[v=\\s]*(".concat(h[l.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(h[l.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(h[l.XRANGEIDENTIFIERLOOSE],")")+"(?:".concat(h[l.PRERELEASELOOSE],")?").concat(h[l.BUILD],"?")+")?)?"),d("XRANGE","^".concat(h[l.GTLT],"\\s*").concat(h[l.XRANGEPLAIN],"$")),d("XRANGELOOSE","^".concat(h[l.GTLT],"\\s*").concat(h[l.XRANGEPLAINLOOSE],"$")),d("COERCE","".concat("(^|[^\\d])(\\d{1,").concat(a,"})")+"(?:\\.(\\d{1,".concat(a,"}))?")+"(?:\\.(\\d{1,".concat(a,"}))?")+"(?:$|[^\\d])"),d("COERCERTL",h[l.COERCE],!0),d("LONETILDE","(?:~>?)"),d("TILDETRIM","(\\s*)".concat(h[l.LONETILDE],"\\s+"),!0),e.tildeTrimReplace="$1~",d("TILDE","^".concat(h[l.LONETILDE]).concat(h[l.XRANGEPLAIN],"$")),d("TILDELOOSE","^".concat(h[l.LONETILDE]).concat(h[l.XRANGEPLAINLOOSE],"$")),d("LONECARET","(?:\\^)"),d("CARETTRIM","(\\s*)".concat(h[l.LONECARET],"\\s+"),!0),e.caretTrimReplace="$1^",d("CARET","^".concat(h[l.LONECARET]).concat(h[l.XRANGEPLAIN],"$")),d("CARETLOOSE","^".concat(h[l.LONECARET]).concat(h[l.XRANGEPLAINLOOSE],"$")),d("COMPARATORLOOSE","^".concat(h[l.GTLT],"\\s*(").concat(h[l.LOOSEPLAIN],")$|^$")),d("COMPARATOR","^".concat(h[l.GTLT],"\\s*(").concat(h[l.FULLPLAIN],")$|^$")),d("COMPARATORTRIM","(\\s*)".concat(h[l.GTLT],"\\s*(").concat(h[l.LOOSEPLAIN],"|").concat(h[l.XRANGEPLAIN],")"),!0),e.comparatorTrimReplace="$1$2$3",d("HYPHENRANGE","^\\s*(".concat(h[l.XRANGEPLAIN],")")+"\\s+-\\s+"+"(".concat(h[l.XRANGEPLAIN],")")+"\\s*$"),d("HYPHENRANGELOOSE","^\\s*(".concat(h[l.XRANGEPLAINLOOSE],")")+"\\s+-\\s+"+"(".concat(h[l.XRANGEPLAINLOOSE],")")+"\\s*$"),d("STAR","(<|>)?=?\\s*\\*"),d("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),d("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(Ra,Ra.exports);var Ca=Ra.exports;Aa(Ca);var Ma=Object.freeze({loose:!0}),Fa=Object.freeze({}),Ya=function(t){return t?"object"!==r(t)?Ma:t:Fa};Aa(Ya);var Xa=/^[0-9]+$/,La=function(t,e){var a=Xa.test(t),n=Xa.test(e);return a&&n&&(t=+t,e=+e),t===e?0:a&&!n?-1:n&&!a?1:t<e?-1:1},Na={compareIdentifiers:La,rcompareIdentifiers:function(t,e){return La(e,t)}};Aa(Na);var Pa=Ta,_a=Ia.MAX_LENGTH,Oa=Ia.MAX_SAFE_INTEGER,Ba=Ca.safeRe,Da=Ca.t,Va=Ya,Ua=Na.compareIdentifiers,Wa=function(){function t(e,a){if(i(this,t),a=Va(a),e instanceof t){if(e.loose===!!a.loose&&e.includePrerelease===!!a.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError('Invalid version. Must be a string. Got type "'.concat(r(e),'".'));if(e.length>_a)throw new TypeError("version is longer than ".concat(_a," characters"));Pa("SemVer",e,a),this.options=a,this.loose=!!a.loose,this.includePrerelease=!!a.includePrerelease;var n=e.trim().match(a.loose?Ba[Da.LOOSE]:Ba[Da.FULL]);if(!n)throw new TypeError("Invalid Version: ".concat(e));if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Oa||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Oa||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Oa||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map((function(t){if(/^[0-9]+$/.test(t)){var e=+t;if(e>=0&&e<Oa)return e}return t})):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}return o(t,[{key:"format",value:function(){return this.version="".concat(this.major,".").concat(this.minor,".").concat(this.patch),this.prerelease.length&&(this.version+="-".concat(this.prerelease.join("."))),this.version}},{key:"toString",value:function(){return this.version}},{key:"compare",value:function(e){if(Pa("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if("string"==typeof e&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}},{key:"compareMain",value:function(e){return e instanceof t||(e=new t(e,this.options)),Ua(this.major,e.major)||Ua(this.minor,e.minor)||Ua(this.patch,e.patch)}},{key:"comparePre",value:function(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var a=0;do{var n=this.prerelease[a],r=e.prerelease[a];if(Pa("prerelease compare",a,n,r),void 0===n&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===n)return-1;if(n!==r)return Ua(n,r)}while(++a)}},{key:"compareBuild",value:function(e){e instanceof t||(e=new t(e,this.options));var a=0;do{var n=this.build[a],r=e.build[a];if(Pa("prerelease compare",a,n,r),void 0===n&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===n)return-1;if(n!==r)return Ua(n,r)}while(++a)}},{key:"inc",value:function(t,e,a){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e,a);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e,a);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e,a),this.inc("pre",e,a);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",e,a),this.inc("pre",e,a);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":var n=Number(a)?1:0;if(!e&&!1===a)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[n];else{for(var r=this.prerelease.length;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);if(-1===r){if(e===this.prerelease.join(".")&&!1===a)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(n)}}if(e){var i=[e,n];!1===a&&(i=[e]),0===Ua(this.prerelease[0],e)?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break;default:throw new Error("invalid increment argument: ".concat(t))}return this.raw=this.format(),this.build.length&&(this.raw+="+".concat(this.build.join("."))),this}}]),t}(),ja=Wa;Aa(ja);var qa=ja,Ga=function(t,e){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t instanceof qa)return t;try{return new qa(t,e)}catch(t){if(!a)return null;throw t}};Aa(Ga);var za,Ha,$a=Ga,Ja=Aa((function(t,e){var a=$a(t,e);return a?a.version:null})),Qa=ja,Za=Ga,Ka=Ca.safeRe,tn=Ca.t,en=Aa((function(t,e){if(t instanceof Qa)return t;if("number"==typeof t&&(t=String(t)),"string"!=typeof t)return null;var a=null;if((e=e||{}).rtl){for(var n;(n=Ka[tn.COERCERTL].exec(t))&&(!a||a.index+a[0].length!==t.length);)a&&n.index+n[0].length===a.index+a[0].length||(a=n),Ka[tn.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;Ka[tn.COERCERTL].lastIndex=-1}else a=t.match(Ka[tn.COERCE]);return null===a?null:Za("".concat(a[2],".").concat(a[3]||"0",".").concat(a[4]||"0"),e)}));var an=nn;function nn(t){var e=this;if(e instanceof nn||(e=new nn),e.tail=null,e.head=null,e.length=0,t&&"function"==typeof t.forEach)t.forEach((function(t){e.push(t)}));else if(arguments.length>0)for(var a=0,n=arguments.length;a<n;a++)e.push(arguments[a]);return e}function rn(t,e,a){var n=e===t.head?new hn(a,null,e,t):new hn(a,e,e.next,t);return null===n.next&&(t.tail=n),null===n.prev&&(t.head=n),t.length++,n}function sn(t,e){t.tail=new hn(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function on(t,e){t.head=new hn(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function hn(t,e,a,n){if(!(this instanceof hn))return new hn(t,e,a,n);this.list=n,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,a?(a.prev=this,this.next=a):this.next=null}nn.Node=hn,nn.create=nn,nn.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,a=t.prev;return e&&(e.prev=a),a&&(a.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=a),t.list.length--,t.next=null,t.prev=null,t.list=null,e},nn.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}},nn.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}},nn.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)sn(this,arguments[t]);return this.length},nn.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)on(this,arguments[t]);return this.length},nn.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}},nn.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}},nn.prototype.forEach=function(t,e){e=e||this;for(var a=this.head,n=0;null!==a;n++)t.call(e,a.value,n,this),a=a.next},nn.prototype.forEachReverse=function(t,e){e=e||this;for(var a=this.tail,n=this.length-1;null!==a;n--)t.call(e,a.value,n,this),a=a.prev},nn.prototype.get=function(t){for(var e=0,a=this.head;null!==a&&e<t;e++)a=a.next;if(e===t&&null!==a)return a.value},nn.prototype.getReverse=function(t){for(var e=0,a=this.tail;null!==a&&e<t;e++)a=a.prev;if(e===t&&null!==a)return a.value},nn.prototype.map=function(t,e){e=e||this;for(var a=new nn,n=this.head;null!==n;)a.push(t.call(e,n.value,this)),n=n.next;return a},nn.prototype.mapReverse=function(t,e){e=e||this;for(var a=new nn,n=this.tail;null!==n;)a.push(t.call(e,n.value,this)),n=n.prev;return a},nn.prototype.reduce=function(t,e){var a,n=this.head;if(arguments.length>1)a=e;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");n=this.head.next,a=this.head.value}for(var r=0;null!==n;r++)a=t(a,n.value,r),n=n.next;return a},nn.prototype.reduceReverse=function(t,e){var a,n=this.tail;if(arguments.length>1)a=e;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");n=this.tail.prev,a=this.tail.value}for(var r=this.length-1;null!==n;r--)a=t(a,n.value,r),n=n.prev;return a},nn.prototype.toArray=function(){for(var t=new Array(this.length),e=0,a=this.head;null!==a;e++)t[e]=a.value,a=a.next;return t},nn.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,a=this.tail;null!==a;e++)t[e]=a.value,a=a.prev;return t},nn.prototype.slice=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var a=new nn;if(e<t||e<0)return a;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=0,r=this.head;null!==r&&n<t;n++)r=r.next;for(;null!==r&&n<e;n++,r=r.next)a.push(r.value);return a},nn.prototype.sliceReverse=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var a=new nn;if(e<t||e<0)return a;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=this.length,r=this.tail;null!==r&&n>e;n--)r=r.prev;for(;null!==r&&n>t;n--,r=r.prev)a.push(r.value);return a},nn.prototype.splice=function(t,e){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var a=0,n=this.head;null!==n&&a<t;a++)n=n.next;var r=[];for(a=0;n&&a<e;a++)r.push(n.value),n=this.removeNode(n);null===n&&(n=this.tail),n!==this.head&&n!==this.tail&&(n=n.prev);for(a=0;a<(arguments.length<=2?0:arguments.length-2);a++)n=rn(this,n,a+2<2||arguments.length<=a+2?void 0:arguments[a+2]);return r},nn.prototype.reverse=function(){for(var t=this.head,e=this.tail,a=t;null!==a;a=a.prev){var n=a.prev;a.prev=a.next,a.next=n}return this.head=e,this.tail=t,this};try{(Ha||(Ha=1,za=function(t){t.prototype[Symbol.iterator]=n().mark((function t(){var e;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this.head;case 1:if(!e){t.next=7;break}return t.next=4,e.value;case 4:e=e.next,t.next=1;break;case 7:case"end":return t.stop()}}),t,this)}))}),za)(nn)}catch(t){}Aa(an);var ln=an,un=Symbol("max"),cn=Symbol("length"),fn=Symbol("lengthCalculator"),dn=Symbol("allowStale"),vn=Symbol("maxAge"),mn=Symbol("dispose"),pn=Symbol("noDisposeOnSet"),gn=Symbol("lruList"),yn=Symbol("cache"),kn=Symbol("updateAgeOnGet"),bn=function(){return 1},xn=function(){function t(e){if(i(this,t),"number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[un]=e.max||1/0;var a=e.length||bn;if(this[fn]="function"!=typeof a?bn:a,this[dn]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[vn]=e.maxAge||0,this[mn]=e.dispose,this[pn]=e.noDisposeOnSet||!1,this[kn]=e.updateAgeOnGet||!1,this.reset()}return o(t,[{key:"max",get:function(){return this[un]},set:function(t){if("number"!=typeof t||t<0)throw new TypeError("max must be a non-negative number");this[un]=t||1/0,In(this)}},{key:"allowStale",get:function(){return this[dn]},set:function(t){this[dn]=!!t}},{key:"maxAge",get:function(){return this[vn]},set:function(t){if("number"!=typeof t)throw new TypeError("maxAge must be a non-negative number");this[vn]=t,In(this)}},{key:"lengthCalculator",get:function(){return this[fn]},set:function(t){var e=this;"function"!=typeof t&&(t=bn),t!==this[fn]&&(this[fn]=t,this[cn]=0,this[gn].forEach((function(t){t.length=e[fn](t.value,t.key),e[cn]+=t.length}))),In(this)}},{key:"length",get:function(){return this[cn]}},{key:"itemCount",get:function(){return this[gn].length}},{key:"rforEach",value:function(t,e){e=e||this;for(var a=this[gn].tail;null!==a;){var n=a.prev;Tn(this,t,a,e),a=n}}},{key:"forEach",value:function(t,e){e=e||this;for(var a=this[gn].head;null!==a;){var n=a.next;Tn(this,t,a,e),a=n}}},{key:"keys",value:function(){return this[gn].toArray().map((function(t){return t.key}))}},{key:"values",value:function(){return this[gn].toArray().map((function(t){return t.value}))}},{key:"reset",value:function(){var t=this;this[mn]&&this[gn]&&this[gn].length&&this[gn].forEach((function(e){return t[mn](e.key,e.value)})),this[yn]=new Map,this[gn]=new ln,this[cn]=0}},{key:"dump",value:function(){var t=this;return this[gn].map((function(e){return!An(t,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}})).toArray().filter((function(t){return t}))}},{key:"dumpLru",value:function(){return this[gn]}},{key:"set",value:function(t,e,a){if((a=a||this[vn])&&"number"!=typeof a)throw new TypeError("maxAge must be a number");var n=a?Date.now():0,r=this[fn](e,t);if(this[yn].has(t)){if(r>this[un])return En(this,this[yn].get(t)),!1;var i=this[yn].get(t).value;return this[mn]&&(this[pn]||this[mn](t,i.value)),i.now=n,i.maxAge=a,i.value=e,this[cn]+=r-i.length,i.length=r,this.get(t),In(this),!0}var s=new Sn(t,e,r,n,a);return s.length>this[un]?(this[mn]&&this[mn](t,e),!1):(this[cn]+=s.length,this[gn].unshift(s),this[yn].set(t,this[gn].head),In(this),!0)}},{key:"has",value:function(t){if(!this[yn].has(t))return!1;var e=this[yn].get(t).value;return!An(this,e)}},{key:"get",value:function(t){return wn(this,t,!0)}},{key:"peek",value:function(t){return wn(this,t,!1)}},{key:"pop",value:function(){var t=this[gn].tail;return t?(En(this,t),t.value):null}},{key:"del",value:function(t){En(this,this[yn].get(t))}},{key:"load",value:function(t){this.reset();for(var e=Date.now(),a=t.length-1;a>=0;a--){var n=t[a],r=n.e||0;if(0===r)this.set(n.k,n.v);else{var i=r-e;i>0&&this.set(n.k,n.v,i)}}}},{key:"prune",value:function(){var t=this;this[yn].forEach((function(e,a){return wn(t,a,!1)}))}}]),t}(),wn=function(t,e,a){var n=t[yn].get(e);if(n){var r=n.value;if(An(t,r)){if(En(t,n),!t[dn])return}else a&&(t[kn]&&(n.value.now=Date.now()),t[gn].unshiftNode(n));return r.value}},An=function(t,e){if(!e||!e.maxAge&&!t[vn])return!1;var a=Date.now()-e.now;return e.maxAge?a>e.maxAge:t[vn]&&a>t[vn]},In=function(t){if(t[cn]>t[un])for(var e=t[gn].tail;t[cn]>t[un]&&null!==e;){var a=e.prev;En(t,e),e=a}},En=function(t,e){if(e){var a=e.value;t[mn]&&t[mn](a.key,a.value),t[cn]-=a.length,t[yn].delete(a.key),t[gn].removeNode(e)}},Sn=o((function t(e,a,n,r,s){i(this,t),this.key=e,this.value=a,this.length=n,this.now=r,this.maxAge=s||0})),Tn=function(t,e,a,n){var r=a.value;An(t,r)&&(En(t,a),t[dn]||(r=void 0)),r&&e.call(n,r.value,r.key,t)},Rn=xn;Aa(Rn);var Cn=ja,Mn=function(t,e,a){return new Cn(t,a).compare(new Cn(e,a))};Aa(Mn);var Fn=Mn,Yn=function(t,e,a){return 0===Fn(t,e,a)};Aa(Yn);var Xn=Mn,Ln=function(t,e,a){return 0!==Xn(t,e,a)};Aa(Ln);var Nn=Mn,Pn=function(t,e,a){return Nn(t,e,a)>0};Aa(Pn);var _n=Mn,On=function(t,e,a){return _n(t,e,a)>=0};Aa(On);var Bn=Mn,Dn=function(t,e,a){return Bn(t,e,a)<0};Aa(Dn);var Vn=Mn,Un=function(t,e,a){return Vn(t,e,a)<=0};Aa(Un);var Wn,jn,qn,Gn,zn=Yn,Hn=Ln,$n=Pn,Jn=On,Qn=Dn,Zn=Un,Kn=function(t,e,a,n){switch(e){case"===":return"object"===r(t)&&(t=t.version),"object"===r(a)&&(a=a.version),t===a;case"!==":return"object"===r(t)&&(t=t.version),"object"===r(a)&&(a=a.version),t!==a;case"":case"=":case"==":return zn(t,a,n);case"!=":return Hn(t,a,n);case">":return $n(t,a,n);case">=":return Jn(t,a,n);case"<":return Qn(t,a,n);case"<=":return Zn(t,a,n);default:throw new TypeError("Invalid operator: ".concat(e))}};function tr(){if(Gn)return qn;Gn=1;var t=function(){function t(e,r){var s=this;if(i(this,t),r=a(r),e instanceof t)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new t(e.raw,r);if(e instanceof n)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map((function(t){return s.parseRange(t.trim())})).filter((function(t){return t.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: ".concat(this.raw));if(this.set.length>1){var o=this.set[0];if(this.set=this.set.filter((function(t){return!m(t[0])})),0===this.set.length)this.set=[o];else if(this.set.length>1){var h,l=k(this.set);try{for(l.s();!(h=l.n()).done;){var u=h.value;if(1===u.length&&g(u[0])){this.set=[u];break}}}catch(t){l.e(t)}finally{l.f()}}}this.format()}return o(t,[{key:"format",value:function(){return this.range=this.set.map((function(t){return t.join(" ").trim()})).join("||").trim(),this.range}},{key:"toString",value:function(){return this.range}},{key:"parseRange",value:function(t){var a=this,i=((this.options.includePrerelease&&d)|(this.options.loose&&v))+":"+t,s=e.get(i);if(s)return s;var o=this.options.loose,g=o?h[l.HYPHENRANGELOOSE]:h[l.HYPHENRANGE];t=t.replace(g,M(this.options.includePrerelease)),r("hyphen replace",t),t=t.replace(h[l.COMPARATORTRIM],u),r("comparator trim",t),t=t.replace(h[l.TILDETRIM],c),r("tilde trim",t),t=t.replace(h[l.CARETTRIM],f),r("caret trim",t);var y=t.split(" ").map((function(t){return b(t,a.options)})).join(" ").split(/\s+/).map((function(t){return C(t,a.options)}));o&&(y=y.filter((function(t){return r("loose invalid filter",t,a.options),!!t.match(h[l.COMPARATORLOOSE])}))),r("range list",y);var x,w=new Map,A=y.map((function(t){return new n(t,a.options)})),I=k(A);try{for(I.s();!(x=I.n()).done;){var E=x.value;if(m(E))return[E];w.set(E.value,E)}}catch(t){I.e(t)}finally{I.f()}w.size>1&&w.has("")&&w.delete("");var S=p(w.values());return e.set(i,S),S}},{key:"intersects",value:function(e,a){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some((function(t){return y(t,a)&&e.set.some((function(e){return y(e,a)&&t.every((function(t){return e.every((function(e){return t.intersects(e,a)}))}))}))}))}},{key:"test",value:function(t){if(!t)return!1;if("string"==typeof t)try{t=new s(t,this.options)}catch(t){return!1}for(var e=0;e<this.set.length;e++)if(F(this.set[e],t,this.options))return!0;return!1}}]),t}();qn=t;var e=new Rn({max:1e3}),a=Ya,n=function(){if(jn)return Wn;jn=1;var t=Symbol("SemVer ANY"),e=function(){function e(n,r){if(i(this,e),r=a(r),n instanceof e){if(n.loose===!!r.loose)return n;n=n.value}n=n.trim().split(/\s+/).join(" "),h("comparator",n,r),this.options=r,this.loose=!!r.loose,this.parse(n),this.semver===t?this.value="":this.value=this.operator+this.semver.version,h("comp",this)}return o(e,[{key:"parse",value:function(e){var a=this.options.loose?n[r.COMPARATORLOOSE]:n[r.COMPARATOR],i=e.match(a);if(!i)throw new TypeError("Invalid comparator: ".concat(e));this.operator=void 0!==i[1]?i[1]:"","="===this.operator&&(this.operator=""),i[2]?this.semver=new l(i[2],this.options.loose):this.semver=t}},{key:"toString",value:function(){return this.value}},{key:"test",value:function(e){if(h("Comparator.test",e,this.options.loose),this.semver===t||e===t)return!0;if("string"==typeof e)try{e=new l(e,this.options)}catch(t){return!1}return s(e,this.operator,this.semver,this.options)}},{key:"intersects",value:function(t,n){if(!(t instanceof e))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new u(t.value,n).test(this.value):""===t.operator?""===t.value||new u(this.value,n).test(t.semver):!((n=a(n)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===t.value)||!n.includePrerelease&&(this.value.startsWith("<0.0.0")||t.value.startsWith("<0.0.0"))||(!this.operator.startsWith(">")||!t.operator.startsWith(">"))&&(!this.operator.startsWith("<")||!t.operator.startsWith("<"))&&(this.semver.version!==t.semver.version||!this.operator.includes("=")||!t.operator.includes("="))&&!(s(this.semver,"<",t.semver,n)&&this.operator.startsWith(">")&&t.operator.startsWith("<"))&&!(s(this.semver,">",t.semver,n)&&this.operator.startsWith("<")&&t.operator.startsWith(">")))}}],[{key:"ANY",get:function(){return t}}]),e}();Wn=e;var a=Ya,n=Ca.safeRe,r=Ca.t,s=Kn,h=Ta,l=ja,u=tr();return Wn}(),r=Ta,s=ja,h=Ca.safeRe,l=Ca.t,u=Ca.comparatorTrimReplace,c=Ca.tildeTrimReplace,f=Ca.caretTrimReplace,d=Ia.FLAG_INCLUDE_PRERELEASE,v=Ia.FLAG_LOOSE,m=function(t){return"<0.0.0-0"===t.value},g=function(t){return""===t.value},y=function(t,e){for(var a=!0,n=t.slice(),r=n.pop();a&&n.length;)a=n.every((function(t){return r.intersects(t,e)})),r=n.pop();return a},b=function(t,e){return r("comp",t,e),t=I(t,e),r("caret",t),t=w(t,e),r("tildes",t),t=S(t,e),r("xrange",t),t=R(t,e),r("stars",t),t},x=function(t){return!t||"x"===t.toLowerCase()||"*"===t},w=function(t,e){return t.trim().split(/\s+/).map((function(t){return A(t,e)})).join(" ")},A=function(t,e){var a=e.loose?h[l.TILDELOOSE]:h[l.TILDE];return t.replace(a,(function(e,a,n,i,s){var o;return r("tilde",t,e,a,n,i,s),x(a)?o="":x(n)?o=">=".concat(a,".0.0 <").concat(+a+1,".0.0-0"):x(i)?o=">=".concat(a,".").concat(n,".0 <").concat(a,".").concat(+n+1,".0-0"):s?(r("replaceTilde pr",s),o=">=".concat(a,".").concat(n,".").concat(i,"-").concat(s," <").concat(a,".").concat(+n+1,".0-0")):o=">=".concat(a,".").concat(n,".").concat(i," <").concat(a,".").concat(+n+1,".0-0"),r("tilde return",o),o}))},I=function(t,e){return t.trim().split(/\s+/).map((function(t){return E(t,e)})).join(" ")},E=function(t,e){r("caret",t,e);var a=e.loose?h[l.CARETLOOSE]:h[l.CARET],n=e.includePrerelease?"-0":"";return t.replace(a,(function(e,a,i,s,o){var h;return r("caret",t,e,a,i,s,o),x(a)?h="":x(i)?h=">=".concat(a,".0.0").concat(n," <").concat(+a+1,".0.0-0"):x(s)?h="0"===a?">=".concat(a,".").concat(i,".0").concat(n," <").concat(a,".").concat(+i+1,".0-0"):">=".concat(a,".").concat(i,".0").concat(n," <").concat(+a+1,".0.0-0"):o?(r("replaceCaret pr",o),h="0"===a?"0"===i?">=".concat(a,".").concat(i,".").concat(s,"-").concat(o," <").concat(a,".").concat(i,".").concat(+s+1,"-0"):">=".concat(a,".").concat(i,".").concat(s,"-").concat(o," <").concat(a,".").concat(+i+1,".0-0"):">=".concat(a,".").concat(i,".").concat(s,"-").concat(o," <").concat(+a+1,".0.0-0")):(r("no pr"),h="0"===a?"0"===i?">=".concat(a,".").concat(i,".").concat(s).concat(n," <").concat(a,".").concat(i,".").concat(+s+1,"-0"):">=".concat(a,".").concat(i,".").concat(s).concat(n," <").concat(a,".").concat(+i+1,".0-0"):">=".concat(a,".").concat(i,".").concat(s," <").concat(+a+1,".0.0-0")),r("caret return",h),h}))},S=function(t,e){return r("replaceXRanges",t,e),t.split(/\s+/).map((function(t){return T(t,e)})).join(" ")},T=function(t,e){t=t.trim();var a=e.loose?h[l.XRANGELOOSE]:h[l.XRANGE];return t.replace(a,(function(a,n,i,s,o,h){r("xRange",t,a,n,i,s,o,h);var l=x(i),u=l||x(s),c=u||x(o),f=c;return"="===n&&f&&(n=""),h=e.includePrerelease?"-0":"",l?a=">"===n||"<"===n?"<0.0.0-0":"*":n&&f?(u&&(s=0),o=0,">"===n?(n=">=",u?(i=+i+1,s=0,o=0):(s=+s+1,o=0)):"<="===n&&(n="<",u?i=+i+1:s=+s+1),"<"===n&&(h="-0"),a="".concat(n+i,".").concat(s,".").concat(o).concat(h)):u?a=">=".concat(i,".0.0").concat(h," <").concat(+i+1,".0.0-0"):c&&(a=">=".concat(i,".").concat(s,".0").concat(h," <").concat(i,".").concat(+s+1,".0-0")),r("xRange return",a),a}))},R=function(t,e){return r("replaceStars",t,e),t.trim().replace(h[l.STAR],"")},C=function(t,e){return r("replaceGTE0",t,e),t.trim().replace(h[e.includePrerelease?l.GTE0PRE:l.GTE0],"")},M=function(t){return function(e,a,n,r,i,s,o,h,l,u,c,f,d){return a=x(n)?"":x(r)?">=".concat(n,".0.0").concat(t?"-0":""):x(i)?">=".concat(n,".").concat(r,".0").concat(t?"-0":""):s?">=".concat(a):">=".concat(a).concat(t?"-0":""),h=x(l)?"":x(u)?"<".concat(+l+1,".0.0-0"):x(c)?"<".concat(l,".").concat(+u+1,".0-0"):f?"<=".concat(l,".").concat(u,".").concat(c,"-").concat(f):t?"<".concat(l,".").concat(u,".").concat(+c+1,"-0"):"<=".concat(h),"".concat(a," ").concat(h).trim()}},F=function(t,e,a){for(var i=0;i<t.length;i++)if(!t[i].test(e))return!1;if(e.prerelease.length&&!a.includePrerelease){for(var s=0;s<t.length;s++)if(r(t[s].semver),t[s].semver!==n.ANY&&t[s].semver.prerelease.length>0){var o=t[s].semver;if(o.major===e.major&&o.minor===e.minor&&o.patch===e.patch)return!0}return!1}return!0};return qn}Aa(Kn);var er,ar,nr=tr(),rr=function(t,e,a){try{e=new nr(e,a)}catch(t){return!1}return e.test(t)},ir={valid:Ja,coerce:en,satisfies:Aa(rr),SEMVER_SPEC_VERSION:Ea.SEMVER_SPEC_VERSION},sr=0,or=1,hr=2,lr=[0,1,2,2,3,0],ur=function(){function t(e,n,r,s){var o;if(i(this,t),h(this,"autoUpdate",!0),h(this,"skeleton",void 0),h(this,"states",void 0),this._app=e,this._position=new a.Vec3,1===Kt.length){var l,u=k((o=new Kt(n)).pages);try{for(u.s();!(l=u.n()).done;){var c=l.value;c.setTexture(new wa(s[c.name]))}}catch(t){u.e(t)}finally{u.f()}}else o=new Kt(n,(function(t){return new wa(s[t])}));var f=new ca(new he(o));f.scale*=.01;var d=f.readSkeletonData(r);this.skeletonVersion=ir.valid(ir.coerce(d.version)),this._spine_3_6_0=ir.satisfies(this.skeletonVersion,"<=3.6.0"),this._spine_3_7_99=ir.satisfies(this.skeletonVersion,"<=3.7.99"),this._spine_4_0_X=ir.satisfies(this.skeletonVersion,"~4.0.0"),this._spine_4_1_X=ir.satisfies(this.skeletonVersion,"~4.1.23"),this.skeleton=new Se(d),this.skeleton.updateWorldTransform(),this.stateData=new zt(this.skeleton.data),this.states=[new Xt(this.stateData)],this.clipper=new ua,this._node=new a.GraphNode,this._meshes=[],this._meshInstances=[],this._materials={},this._tint={},this._aabb=new a.BoundingBox,this._aabbTempArray=[],this._aabbTempOffset=new a.Vec2,this._aabbTempSize=new a.Vec2,this._renderCounts={vertexCount:0,indexCount:0},this._vertexFormat=null,this._vertexBuffer=null,this._indexBuffer=null,this._priority=0,this._timeScale=1,this._layers=[a.LAYERID_UI],this.init(),this._hidden=!1}return o(t,[{key:"destroy",value:function(){this.removeFromLayers();for(var t=0;t<this._meshInstances.length;t++)this._meshInstances[t].mesh.vertexBuffer=null,this._meshInstances[t].mesh.indexBuffer.length=0,this._meshInstances[t].material=null;this._vertexBuffer&&(this._vertexBuffer.destroy(),this._vertexBuffer=null),this._indexBuffer&&(this._indexBuffer.destroy(),this._indexBuffer=null),this._meshInstances=[],this.skeleton=null,this.stateData=null,this._materials={},this._node=null}},{key:"hide",value:function(){if(!this._hidden){for(var t=0,e=this._meshInstances.length;t<e;t++)this._meshInstances[t].visible=!1;this._hidden=!0}}},{key:"show",value:function(){if(this._hidden){for(var t=0,e=this._meshInstances.length;t<e;t++)this._meshInstances[t].visible=!0;this._hidden=!1}}},{key:"init",value:function(){this._vertexFormat=new a.VertexFormat(this._app.graphicsDevice,[{semantic:a.SEMANTIC_POSITION,components:2,type:a.TYPE_FLOAT32},{semantic:a.SEMANTIC_NORMAL,components:4,type:a.TYPE_UINT8,normalize:!0},{semantic:a.SEMANTIC_TEXCOORD0,components:2,type:a.TYPE_FLOAT32},{semantic:a.SEMANTIC_COLOR,components:4,type:a.TYPE_UINT8,normalize:!0}]);for(var t=this.skeleton.drawOrder,e=0,n=t.length;e<n;e++)this.initSlot(t[e])}},{key:"initSlot",value:function(t){t.positions=[],t.uvs=[],t.indices=[],t.vertexColor={},t._active={name:"",type:sr},this.initAttachment(t)}},{key:"createMaterial",value:function(t){var e=new a.StandardMaterial;if(e.emissiveMap=t,e.emissiveVertexColor=!0,e.opacityMap=t,e.opacityVertexColor=!0,e.depthWrite=!1,e.cull=a.CULLFACE_NONE,e.blendType=a.BLEND_PREMULTIPLIED,this._spine_3_6_0){var n=["gl_FragColor.rgb *= vVertexColor.a;","gl_FragColor.a = dAlpha;"].join("\n");e.chunks.outputAlphaPremulPS=n}return e.update(),e}},{key:"initAttachment",value:function(t){var e=t.attachment;if(e){t._active.name=e.name,e instanceof se?t._active.type=hr:e instanceof ne&&(t._active.type=or);var n=null;if(e.region&&(e.region.texture&&(n=e.region.texture.pcTexture),e.region.page&&e.region.page.texture&&(n=e.region.page.texture.pcTexture)),n)if(n instanceof a.StandardMaterial)this._materials[n.name]=n,t.material=n.name;else{var r=null;if(n.name?r=n.name:n.getSource()instanceof Image&&(r=n.getSource().getAttribute("src")),r){if(void 0===this._materials[r]){var i=this.createMaterial(n);this._materials[r]=i}t.material=r}}}}},{key:"updateSlot",value:function(t,e){var a=t.attachment,n=a.name,r=a instanceof se?hr:a instanceof ne?or:sr;t._active.name===n&&t._active.type===r||this.initAttachment(t),t.positions.length=0,a instanceof se?this._spine_4_1_X?a.computeWorldVertices(t,t.positions,0,2):a.computeWorldVertices(t.bone,t.positions,0,2):a instanceof ne&&a.computeWorldVertices(t,0,a.worldVerticesLength,t.positions,0,2);var i=this._tint[n];t.vertexColor={r:Math.round(255*t.color.r*(i?i.r:1)),g:Math.round(255*t.color.g*(i?i.g:1)),b:Math.round(255*t.color.b*(i?i.b:1)),a:Math.round(255*t.color.a*(i?i.a:1))};var s,o,h=a.triangles||lr;if(e.isClipping()){e.clipTriangles(t.positions,0,h,h.length,a.uvs,A.WHITE,A.WHITE,false),t.positions.length=0,t.uvs.length=0;for(o=e.clippedVertices.length,s=0;s<o;s+=8)t.positions.push(e.clippedVertices[s],e.clippedVertices[s+1]),t.uvs.push(e.clippedVertices[s+6],1-e.clippedVertices[s+7]);t.indices=e.clippedTriangles.slice()}else{for(t.uvs.length=0,o=t.positions.length,s=0;s<o;s+=2)t.uvs.push(a.uvs[s],1-a.uvs[s+1]);t.indices=h}this._renderCounts.vertexCount+=t.positions.length/2,this._renderCounts.indexCount+=t.indices.length}},{key:"updateSkeleton",value:function(t){this._renderCounts.vertexCount=0,this._renderCounts.indexCount=0;var e=this.clipper;for(var a=this.skeleton.drawOrder,n=a.length,r=0;r<n;r++){var i=a[r];if(this._spine_3_7_99||i.bone.active){0;var s=i.getAttachment();s instanceof $t?e.clipStart(i,s):s instanceof se||s instanceof ne?this.updateSlot(i,e):this._spine_3_7_99||e.clipEndWithSlot(i)}else e.clipEndWithSlot(i)}}},{key:"render",value:function(){if(this._meshInstances.forEach((function(t){t.material=null})),this.removeFromLayers(),this._meshes=[],this._meshInstances.length=0,this._renderCounts.indexCount>0&&this._renderCounts.vertexCount>0){this.skeleton.getBounds(this._aabbTempOffset,this._aabbTempSize,this._aabbTempArray),this._aabb.center=new a.Vec3(this._aabbTempOffset.x,this._aabbTempOffset.y,0),this._aabb.halfExtents=new a.Vec3(.5*this._aabbTempSize.x,.5*this._aabbTempSize.y,0),(!this._vertexBuffer||this._vertexBuffer.getNumVertices()<this._renderCounts.vertexCount)&&(this._vertexBuffer&&this._vertexBuffer.destroy(),this._vertexBuffer=new a.VertexBuffer(this._app.graphicsDevice,this._vertexFormat,this._renderCounts.vertexCount)),(!this._indexBuffer||this._indexBuffer.getNumIndices()<this._renderCounts.indexCount)&&(this._indexBuffer&&this._indexBuffer.destroy(),this._indexBuffer=new a.IndexBuffer(this._app.graphicsDevice,a.INDEXFORMAT_UINT16,this._renderCounts.indexCount));for(var t=null,e=0,n=0,r=new a.VertexIterator(this._vertexBuffer),i=new Uint16Array(this._indexBuffer.lock()),s=0,o=0,h=this.skeleton.drawOrder,l=h.length,u=0;u<l;u++){var c=h[u];if(c.attachment&&c.material&&c.positions.length>0&&c.indices.length>0){t&&t!==c.material&&(this.SubmitBatch(e,n,t),t=c.material,e=s,n=0),t=c.material;var f=c.positions,d=c.vertexColor.r,v=c.vertexColor.g,m=c.vertexColor.b,p=c.vertexColor.a,g=c.uvs,y=void 0,k=f.length/2;for(y=0;y<k;y++)r.element[a.SEMANTIC_POSITION].set(f[2*y],f[2*y+1]),r.element[a.SEMANTIC_NORMAL].set(0,255,0,0),r.element[a.SEMANTIC_COLOR].set(d,v,m,p),r.element[a.SEMANTIC_TEXCOORD0].set(g[2*y],1-g[2*y+1]),r.next();var b=c.indices,x=b.length;for(y=0;y<x;y++)i[s+y]=b[y]+o;n+=x,s+=x,o+=k}}r.end(),this._indexBuffer.unlock(),this.SubmitBatch(e,n,t)}this.addToLayers()}},{key:"SubmitBatch",value:function(t,e,n){if(e>0){var r=new a.Mesh(this._app.graphicsDevice);r.vertexBuffer=this._vertexBuffer,r.indexBuffer[0]=this._indexBuffer,r.primitive[0].type=a.PRIMITIVE_TRIANGLES,r.primitive[0].base=t,r.primitive[0].count=e,r.primitive[0].indexed=!0,r.aabb=this._aabb,this._meshes.push(r);var i=new a.MeshInstance(r,this._materials[n],this._node);i.drawOrder=this.priority+this._meshInstances.length,i.visible=!this._hidden,this._meshInstances.push(i)}}},{key:"update",value:function(t){if(!this._hidden){var e;t*=this._timeScale;var a=this.states.length;for(e=0;e<a;e++)this.states[e].update(t);for(e=0;e<a;e++)this.states[e].apply(this.skeleton);this.autoUpdate&&this.skeleton.updateWorldTransform(),this.updateSkeleton(),this.render()}}},{key:"setPosition",value:function(t){this._position.copy(t)}},{key:"setTint",value:function(t,e){this._tint[t]=e}},{key:"removeFromLayers",value:function(){if(this._meshInstances.length)for(var t=0;t<this._layers.length;t++){var e=this._app.scene.layers.getLayerById(this._layers[t]);e&&e.removeMeshInstances(this._meshInstances)}}},{key:"addToLayers",value:function(){if(this._meshInstances.length)for(var t=0;t<this._layers.length;t++){var e=this._app.scene.layers.getLayerById(this._layers[t]);e&&e.addMeshInstances(this._meshInstances)}}},{key:"state",get:function(){return this.states[0]}},{key:"priority",get:function(){return this._priority},set:function(t){this._priority=t}},{key:"timeScale",get:function(){return this._timeScale},set:function(t){this._timeScale=t}},{key:"layers",get:function(){return this._layers},set:function(t){this.removeFromLayers(),this._layers=t||[],this.addToLayers()}}]),t}(),cr=function(e){l(n,e);var a=d(n);function n(t,e){var r;return i(this,n),(r=a.call(this,t,e)).on("set_atlasAsset",r.onSetAsset,f(r)),r.on("set_textureAssets",r.onSetAssets,f(r)),r.on("set_skeletonAsset",r.onSetAsset,f(r)),r.on("set_atlasData",r.onSetResource,f(r)),r.on("set_textures",r.onSetResource,f(r)),r.on("set_skeletonData",r.onSetResource,f(r)),r}return o(n,[{key:"_createSpine",value:function(){this.data.spine&&(this.data.spine.destroy(),this.data.spine=null);for(var e={},a=0,n=this.textureAssets.length;a<n;a++){var r=this.system.app.assets.get(this.textureAssets[a]),i=r.name?r.name:r.file?r.file.filename:null;i||(i=t.path.getBasename(r.file.url));var s=i.indexOf("?");-1!==s&&(i=i.substring(0,s)),e[i]=r.resource}this.data.spine=new ur(this.system.app,this.atlasData,this.skeletonData,e),this.state=this.data.spine.state,this.states=this.data.spine.states,this.skeleton=this.data.spine.skeleton,this.entity.addChild(this.data.spine._node)}},{key:"_onAssetReady",value:function(t){var e=t.type,a=t.resource;"texture"===e&&this.textures.push(a),"json"===e&&(this.skeletonData=a),"text"===e&&(this.atlasData=a)}},{key:"_onAssetAdd",value:function(t){t.off("change",this.onAssetChanged,this),t.on("change",this.onAssetChanged,this),t.off("remove",this.onAssetRemoved,this),t.on("remove",this.onAssetRemoved,this),t.ready(this._onAssetReady,this),this.system.app.assets.load(t)}},{key:"onSetResource",value:function(){this.data.atlasData&&this.data.textures.length&&this.data.skeletonData&&this._createSpine()}},{key:"onSetAsset",value:function(e,a,n){var r=this.system.app.assets,i=null;if(a&&(i=r.get(a))&&(i.off("change",this.onAssetChanged),i.off("remove",this.onAssetRemoved)),n){var s=n;n instanceof t.Asset&&(s=n.id,this.data[e]=s),(i=r.get(s))?this._onAssetAdd(i):r.on("add:".concat(s))}}},{key:"onSetAssets",value:function(e,a,n){var r,i,s=this.system.app.assets,o=null;if(a.length)for(r=0,i=a.length;r<i;r++)(o=s.get(a[r]))&&(o.off("change",this.onAssetChanged),o.off("remove",this.onAssetRemoved));if(n&&n.length){var h=n.map((function(e){return e instanceof t.Asset?e.id:e}));for(r=0,i=n.length;r<i;r++)(o=s.get(h[r]))?this._onAssetAdd(o):s.on("add:".concat(h[r]))}}},{key:"onAssetChanged",value:function(t,e,a,n){}},{key:"onAssetRemoved",value:function(t){}},{key:"onEnable",value:function(){t.Component.prototype.onEnable.call(this);var e=this.data.spine;e&&e.addToLayers()}},{key:"onDisable",value:function(){t.Component.prototype.onDisable.call(this);var e=this.data.spine;e&&e.removeFromLayers()}},{key:"hide",value:function(){this.data.spine&&this.data.spine.hide()}},{key:"show",value:function(){this.data.spine&&this.data.spine.show()}},{key:"removeComponent",value:function(){var t;if(this.atlasAsset&&(t=this.system.app.assets.get(this.atlasAsset))&&(t.off("change",this.onAssetChanged),t.off("remove",this.onAssetRemoved)),this.skeletonAsset&&(t=this.system.app.assets.get(this.skeletonAsset))&&(t.off("change",this.onAssetChanged),t.off("remove",this.onAssetRemoved)),this.textureAssets&&this.textureAssets.length)for(var e=0;e<this.textureAssets.length;e++)(t=this.system.app.assets.get(this.textureAssets[e]))&&(t.off("change",this.onAssetChanged),t.off("remove",this.onAssetRemoved))}}]),n}(t.Component),fr=o((function t(){i(this,t),this.enabled=!0,this.atlasAsset=null,this.textureAssets=[],this.skeletonAsset=null,this.speed=1,this.spine=null,this.atlasData=null,this.textures=[],this.skeletonData=null})),dr=function(t){l(a,t);var e=d(a);function a(t){var n;return i(this,a),(n=e.call(this,t)).id="spine",n.ComponentType=cr,n.DataType=fr,n.schema=["enabled","atlasAsset","textureAssets","skeletonAsset","atlasData","textures","skeletonData","speed","spine"],n.on("beforeremove",n.onBeforeRemove,f(n)),n.app.systems.on("update",n.onUpdate,f(n)),n}return o(a,[{key:"initializeComponentData",value:function(t,e,n){n=["enabled","atlasAsset","textureAssets","skeletonAsset","atlasData","textures","skeletonData","spine"],v(u(a.prototype),"initializeComponentData",this).call(this,t,e,n)}},{key:"onBeforeRemove",value:function(t,e){var a=t.spine.data;a.spine&&a.spine.destroy(),t.spine.removeComponent()}},{key:"onUpdate",value:function(t){var e=this.store;for(var a in e)if(e.hasOwnProperty(a)){var n=e[a],r=n.data;r.enabled&&n.entity.enabled&&r.spine&&(r.spine.setPosition(n.entity.getPosition()),r.spine.update(r.speed*t))}}}]),a}(t.ComponentSystem);return er=a.Application.getApplication(),ar=new dr(er),er.systems.add(ar),ka}(pc);
