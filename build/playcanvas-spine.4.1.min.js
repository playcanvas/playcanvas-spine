/* Copyright 2015-2021 PlayCanvas Ltd */
"use strict";var spine=(()=>{var f,g=Object.defineProperty,v=Object.getOwnPropertyDescriptor,x=Object.getOwnPropertyNames,b=Object.prototype.hasOwnProperty,y={},A=y,I={AlphaTimeline:()=>Pe,Animation:()=>ge,AnimationState:()=>ut,AnimationStateAdapter:()=>ft,AnimationStateData:()=>It,AssetManagerBase:()=>Vt,AtlasAttachmentLoader:()=>Pt,Attachment:()=>Y,AttachmentTimeline:()=>xe,BinaryInput:()=>me,BlendMode:()=>ce,Bone:()=>Ot,BoneData:()=>Bt,BoundingBoxAttachment:()=>Et,CURRENT:()=>At,ClippingAttachment:()=>St,Color:()=>pe,ConstraintData:()=>$t,CurveTimeline:()=>t,CurveTimeline1:()=>o,CurveTimeline2:()=>ht,DebugUtils:()=>C,DeformTimeline:()=>Oe,Downloader:()=>Ut,DrawOrderTimeline:()=>be,Event:()=>je,EventData:()=>qt,EventQueue:()=>pt,EventTimeline:()=>we,EventType:()=>u,FIRST:()=>vt,FakeTexture:()=>Mt,HOLD_FIRST:()=>wt,HOLD_MIX:()=>bt,HOLD_SUBSEQUENT:()=>xt,IkConstraint:()=>Wt,IkConstraintData:()=>jt,IkConstraintTimeline:()=>$e,IntSet:()=>E,Interpolation:()=>k,MathUtils:()=>q,MeshAttachment:()=>m,MixBlend:()=>_,MixDirection:()=>D,PathAttachment:()=>l,PathConstraint:()=>c,PathConstraintData:()=>zt,PathConstraintMixTimeline:()=>We,PathConstraintPositionTimeline:()=>Ue,PathConstraintSpacingTimeline:()=>qe,PointAttachment:()=>_t,Pool:()=>a,PositionMode:()=>Gt,Pow:()=>T,PowOut:()=>R,RGB2Timeline:()=>De,RGBA2Timeline:()=>Be,RGBATimeline:()=>_e,RGBTimeline:()=>Le,RegionAttachment:()=>p,RotateMode:()=>ee,RotateTimeline:()=>ve,SETUP:()=>yt,SUBSEQUENT:()=>gt,ScaleTimeline:()=>Ce,ScaleXTimeline:()=>Me,ScaleYTimeline:()=>Fe,SequenceTimeline:()=>ye,ShearTimeline:()=>Ye,ShearXTimeline:()=>Xe,ShearYTimeline:()=>Ne,Skeleton:()=>ie,SkeletonBinary:()=>ue,SkeletonBounds:()=>xs,SkeletonClipping:()=>ws,SkeletonData:()=>ne,SkeletonJson:()=>bs,Skin:()=>he,SkinEntry:()=>oe,Slot:()=>se,SlotData:()=>le,SpacingMode:()=>te,StringSet:()=>S,Texture:()=>kt,TextureAtlas:()=>Ft,TextureAtlasPage:()=>Xt,TextureAtlasRegion:()=>Nt,TextureFilter:()=>Tt,TextureRegion:()=>Ct,TextureWrap:()=>Rt,TimeKeeper:()=>M,Timeline:()=>B,TrackEntry:()=>mt,TransformConstraint:()=>re,TransformConstraintData:()=>de,TransformConstraintTimeline:()=>Ve,TransformMode:()=>Dt,TranslateTimeline:()=>ke,TranslateXTimeline:()=>Te,TranslateYTimeline:()=>Re,Triangulator:()=>L,Utils:()=>fe,Vector2:()=>i,VertexAttachment:()=>P,WindowedMean:()=>F};for(f in I)g(A,f,{get:I[f],enumerable:!0});var E=class{constructor(){this.array=new Array}add(t){var e=this.contains(t);return this.array[0|t]=0|t,!e}contains(t){return null!=this.array[0|t]}remove(t){this.array[0|t]=void 0}clear(){this.array.length=0}},S=class{constructor(){this.entries={},this.size=0}add(t){var e=this.entries[t];return this.entries[t]=!0,!e&&(this.size++,!0)}addAll(t){for(var e=this.size,s=0,r=t.length;s<r;s++)this.add(t[s]);return e!=this.size}contains(t){return this.entries[t]}clear(){this.entries={},this.size=0}},e=class{constructor(t=0,e=0,s=0,r=0){this.r=t,this.g=e,this.b=s,this.a=r}set(t,e,s,r){return this.r=t,this.g=e,this.b=s,this.a=r,this.clamp()}setFromColor(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this}setFromString(t){return t="#"==t.charAt(0)?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=8!=t.length?1:parseInt(t.substr(6,2),16)/255,this}add(t,e,s,r){return this.r+=t,this.g+=e,this.b+=s,this.a+=r,this.clamp()}clamp(){return this.r<0?this.r=0:1<this.r&&(this.r=1),this.g<0?this.g=0:1<this.g&&(this.g=1),this.b<0?this.b=0:1<this.b&&(this.b=1),this.a<0?this.a=0:1<this.a&&(this.a=1),this}static rgba8888ToColor(t,e){t.r=((4278190080&e)>>>24)/255,t.g=((16711680&e)>>>16)/255,t.b=((65280&e)>>>8)/255,t.a=(255&e)/255}static rgb888ToColor(t,e){t.r=((16711680&e)>>>16)/255,t.g=((65280&e)>>>8)/255,t.b=(255&e)/255}static fromString(t){return(new e).setFromString(t)}},pe=e,s=(pe.WHITE=new e(1,1,1,1),pe.RED=new e(1,0,0,1),pe.GREEN=new e(0,1,0,1),pe.BLUE=new e(0,0,1,1),pe.MAGENTA=new e(1,0,1,1),class{static clamp(t,e,s){return t<e?e:s<t?s:t}static cosDeg(t){return Math.cos(t*s.degRad)}static sinDeg(t){return Math.sin(t*s.degRad)}static signum(t){return 0<t?1:t<0?-1:0}static toInt(t){return 0<t?Math.floor(t):Math.ceil(t)}static cbrt(t){var e=Math.pow(Math.abs(t),1/3);return t<0?-e:e}static randomTriangular(t,e){return s.randomTriangularWith(t,e,.5*(t+e))}static randomTriangularWith(t,e,s){var r=Math.random(),a=e-t;return r<=(s-t)/a?t+Math.sqrt(r*a*(s-t)):e-Math.sqrt((1-r)*a*(e-s))}static isPowerOfTwo(t){return t&&0==(t&t-1)}}),q=s,k=(q.PI=3.1415927,q.PI2=2*s.PI,q.radiansToDegrees=180/s.PI,q.radDeg=s.radiansToDegrees,q.degreesToRadians=s.PI/180,q.degRad=s.degreesToRadians,class{apply(t,e,s){return t+(e-t)*this.applyInternal(s)}}),T=class extends k{constructor(t){super(),this.power=2,this.power=t}applyInternal(t){return t<=.5?Math.pow(2*t,this.power)/2:Math.pow(2*(t-1),this.power)/(this.power%2==0?-2:2)+1}},R=class extends T{constructor(t){super(t)}applyInternal(t){return Math.pow(t-1,this.power)*(this.power%2==0?-1:1)+1}},r=class{static arrayCopy(s,r,a,i,n){for(let t=r,e=i;t<r+n;t++,e++)a[e]=s[t]}static arrayFill(e,s,r,a){for(let t=s;t<r;t++)e[t]=a}static setArraySize(e,s,r=0){var a=e.length;if(a!=s&&a<(e.length=s))for(let t=a;t<s;t++)e[t]=r;return e}static ensureArrayCapacity(t,e,s=0){return t.length>=e?t:r.setArraySize(t,e,s)}static newArray(e,s){var r=new Array(e);for(let t=0;t<e;t++)r[t]=s;return r}static newFloatArray(t){if(r.SUPPORTS_TYPED_ARRAYS)return new Float32Array(t);var e=new Array(t);for(let t=0;t<e.length;t++)e[t]=0;return e}static newShortArray(t){if(r.SUPPORTS_TYPED_ARRAYS)return new Int16Array(t);var e=new Array(t);for(let t=0;t<e.length;t++)e[t]=0;return e}static toFloatArray(t){return r.SUPPORTS_TYPED_ARRAYS?new Float32Array(t):t}static toSinglePrecision(t){return r.SUPPORTS_TYPED_ARRAYS?Math.fround(t):t}static webkit602BugfixHelper(t,e){}static contains(t,e,s=0){for(var r=0;r<t.length;r++)if(t[r]==e)return!0;return!1}static enumValue(t,e){return t[e[0].toUpperCase()+e.slice(1)]}},fe=r,C=(fe.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array,class{static logBones(e){for(let t=0;t<e.bones.length;t++){var s=e.bones[t];console.log(s.data.name+", "+s.a+", "+s.b+", "+s.c+", "+s.d+", "+s.worldX+", "+s.worldY)}}}),a=class{constructor(t){this.items=new Array,this.instantiator=t}obtain(){return 0<this.items.length?this.items.pop():this.instantiator()}free(t){t.reset&&t.reset(),this.items.push(t)}freeAll(e){for(let t=0;t<e.length;t++)this.free(e[t])}clear(){this.items.length=0}},i=class{constructor(t=0,e=0){this.x=t,this.y=e}set(t,e){return this.x=t,this.y=e,this}length(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)}normalize(){var t=this.length();return 0!=t&&(this.x/=t,this.y/=t),this}},M=class{constructor(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}update(){var t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,1<this.frameTime&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)}},F=class{constructor(t=32){this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(t)}hasEnoughData(){return this.addedValues>=this.values.length}addValue(t){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=t,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0}getMean(){if(this.hasEnoughData()){if(this.dirty){let e=0;for(let t=0;t<this.values.length;t++)e+=this.values[t];this.mean=e/this.values.length,this.dirty=!1}return this.mean}return 0}},Y=class{constructor(t){if(!t)throw new Error("name cannot be null.");this.name=t}},X=class extends Y{constructor(t){super(t),this.id=X.nextID++,this.bones=null,this.vertices=[],this.worldVerticesLength=0,this.timelineAttachment=this}computeWorldVertices(t,s,n,o,h,l){n=h+(n>>1)*l;var r=t.bone.skeleton,a=t.deform;let c=this.vertices;var d=this.bones;if(d){let i=0,e=0;for(let t=0;t<s;t+=2){var u=d[i];i+=u+1,e+=u}var m=r.bones;if(0==a.length)for(let s=h,r=3*e;s<n;s+=l){let t=0,e=0;var p=d[i++];for(p+=i;i<p;i++,r+=3){var f=m[d[i]],g=c[r],v=c[r+1],x=c[r+2];t+=(g*f.a+v*f.b+f.worldX)*x,e+=(g*f.c+v*f.d+f.worldY)*x}o[s]=t,o[s+1]=e}else{var w=a;for(let s=h,r=3*e,a=e<<1;s<n;s+=l){let t=0,e=0;var b=d[i++];for(b+=i;i<b;i++,r+=3,a+=2){var y=m[d[i]],A=c[r]+w[a],I=c[r+1]+w[a+1],E=c[r+2];t+=(A*y.a+I*y.b+y.worldX)*E,e+=(A*y.c+I*y.d+y.worldY)*E}o[s]=t,o[s+1]=e}}}else{0<a.length&&(c=a);var r=t.bone,i=r.worldX,S=r.worldY,k=r.a,T=r.b,R=r.c,C=r.d;for(let t=s,e=h;e<n;t+=2,e+=l){var M=c[t],F=c[t+1];o[e]=M*k+F*T+i,o[e+1]=M*R+F*C+S}}}copyTo(t){this.bones?(t.bones=new Array(this.bones.length),fe.arrayCopy(this.bones,0,t.bones,0,this.bones.length)):t.bones=null,this.vertices&&(t.vertices=fe.newFloatArray(this.vertices.length),fe.arrayCopy(this.vertices,0,t.vertices,0,this.vertices.length)),t.worldVerticesLength=this.worldVerticesLength,t.timelineAttachment=this.timelineAttachment}},P=X,n=(P.nextID=0,class{constructor(t){this.id=n.nextID(),this.start=0,this.digits=0,this.setupIndex=0,this.regions=new Array(t)}copy(){var t=new n(this.regions.length);return fe.arrayCopy(this.regions,0,t.regions,0,this.regions.length),t.start=this.start,t.digits=this.digits,t.setupIndex=this.setupIndex,t}apply(t,e){let s=t.sequenceIndex;(s=-1==s?this.setupIndex:s)>=this.regions.length&&(s=this.regions.length-1);t=this.regions[s];e.region!=t&&(e.region=t,e.updateRegion())}getPath(e,t){let s=e;e=(this.start+t).toString();for(let t=this.digits-e.length;0<t;t--)s+="0";return s+=e}static nextID(){return n._nextID++}}),N=n,Se=(N._nextID=0,(t=>(t[t.hold=0]="hold",t[t.once=1]="once",t[t.loop=2]="loop",t[t.pingpong=3]="pingpong",t[t.onceReverse=4]="onceReverse",t[t.loopReverse=5]="loopReverse",t[t.pingpongReverse=6]="pingpongReverse",t))({})),Zt=[0,1,2,3,4,5,6],ge=class{constructor(t,e,s){if(this.timelines=[],this.timelineIds=new S,!t)throw new Error("name cannot be null.");this.name=t,this.setTimelines(e),this.duration=s}setTimelines(t){if(!t)throw new Error("timelines cannot be null.");this.timelines=t,this.timelineIds.clear();for(var e=0;e<t.length;e++)this.timelineIds.addAll(t[e].getPropertyIds())}hasTimeline(e){for(let t=0;t<e.length;t++)if(this.timelineIds.contains(e[t]))return!0;return!1}apply(s,r,a,t,i,n,o,h){if(!s)throw new Error("skeleton cannot be null.");t&&0!=this.duration&&(a%=this.duration,0<r)&&(r%=this.duration);var l=this.timelines;for(let t=0,e=l.length;t<e;t++)l[t].apply(s,r,a,i,n,o,h)}},_=(t=>(t[t.setup=0]="setup",t[t.first=1]="first",t[t.replace=2]="replace",t[t.add=3]="add",t))(_||{}),D=(t=>(t[t.mixIn=0]="mixIn",t[t.mixOut=1]="mixOut",t))(D||{}),O=0,$=1,U=2,W=3,j=4,z=5,G=6,H=7,J=8,K=9,Q=10,Z=11,tt=12,et=13,st=14,rt=15,at=16,it=17,nt=18,ot=19,B=class{constructor(t,e){this.propertyIds=e,this.frames=fe.newFloatArray(t*this.getFrameEntries())}getPropertyIds(){return this.propertyIds}getFrameEntries(){return 1}getFrameCount(){return this.frames.length/this.getFrameEntries()}getDuration(){return this.frames[this.frames.length-this.getFrameEntries()]}static search1(e,s){var r=e.length;for(let t=1;t<r;t++)if(e[t]>s)return t-1;return r-1}static search(e,s,r){var a=e.length;for(let t=r;t<a;t+=r)if(e[t]>s)return t-r;return a-r}},t=class extends B{constructor(t,e,s){super(t,s),this.curves=fe.newFloatArray(t+18*e),this.curves[t-1]=1}setLinear(t){this.curves[t]=0}setStepped(t){this.curves[t]=1}shrink(t){var e,t=this.getFrameCount()+18*t;this.curves.length>t&&(e=fe.newFloatArray(t),fe.arrayCopy(this.curves,0,e,0,t),this.curves=e)}setBezier(t,e,s,r,a,i,n,o,h,l,c){var d=this.curves;let u=this.getFrameCount()+18*t;0==s&&(d[e]=2+u);var t=.03*(r-2*i+o),s=.03*(a-2*n+h),m=.006*(3*(i-o)-r+l),p=.006*(3*(n-h)-a+c);let f=2*t+m,g=2*s+p,v=.3*(i-r)+t+.16666667*m,x=.3*(n-a)+s+.16666667*p,w=r+v,b=a+x;for(var y=u+18;u<y;u+=2)d[u]=w,d[u+1]=b,v+=f,x+=g,f+=m,g+=p,w+=v,b+=x}getBezierValue(t,e,s,r){var a=this.curves;if(a[r]>t)return h=this.frames[e],(l=this.frames[e+s])+(t-h)/(a[r]-h)*(a[r+1]-l);var i,n,o=r+18;for(r+=2;r<o;r+=2)if(a[r]>=t)return i=a[r-2],(n=a[r-1])+(t-i)/(a[r]-i)*(a[r+1]-n);e+=this.getFrameEntries();var h=a[o-2],l=a[o-1];return l+(t-h)/(this.frames[e]-h)*(this.frames[e+s]-l)}},o=class extends t{constructor(t,e,s){super(t,e,[s])}getFrameEntries(){return 2}setFrame(t,e,s){this.frames[t<<=1]=e,this.frames[t+1]=s}getCurveValue(e){var s=this.frames;let r=s.length-2;for(let t=2;t<=r;t+=2)if(s[t]>e){r=t-2;break}var t=this.curves[r>>1];switch(t){case 0:var a=s[r],i=s[r+1];return i+(e-a)/(s[r+2]-a)*(s[r+2+1]-i);case 1:return s[r+1]}return this.getBezierValue(e,r,1,t-2)}},ht=class extends t{constructor(t,e,s,r){super(t,e,[s,r])}getFrameEntries(){return 3}setFrame(t,e,s,r){this.frames[t*=3]=e,this.frames[t+1]=s,this.frames[t+2]=r}},ve=class extends o{constructor(t,e,s){super(t,e,O+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,r,a,i,n){var o=t.bones[this.boneIndex];if(o.active)if(s<this.frames[0])switch(i){case 0:return void(o.rotation=o.data.rotation);case 1:o.rotation+=(o.data.rotation-o.rotation)*a}else{let t=this.getCurveValue(s);switch(i){case 0:o.rotation=o.data.rotation+t*a;break;case 1:case 2:t+=o.data.rotation-o.rotation;case 3:o.rotation+=t*a}}}},ke=class extends ht{constructor(t,e,s){super(t,e,$+"|"+s,U+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,r,a,i,n){var o=t.bones[this.boneIndex];if(o.active){var h=this.frames;if(s<h[0])switch(i){case 0:return o.x=o.data.x,void(o.y=o.data.y);case 1:o.x+=(o.data.x-o.x)*a,o.y+=(o.data.y-o.y)*a}else{let t=0,e=0;var l=B.search(h,s,3),c=this.curves[l/3];switch(c){case 0:var d=h[l],d=(t=h[l+1],e=h[l+2],(s-d)/(h[l+3]-d));t+=(h[l+3+1]-t)*d,e+=(h[l+3+2]-e)*d;break;case 1:t=h[l+1],e=h[l+2];break;default:t=this.getBezierValue(s,l,1,c-2),e=this.getBezierValue(s,l,2,c+18-2)}switch(i){case 0:o.x=o.data.x+t*a,o.y=o.data.y+e*a;break;case 1:case 2:o.x+=(o.data.x+t-o.x)*a,o.y+=(o.data.y+e-o.y)*a;break;case 3:o.x+=t*a,o.y+=e*a}}}}},Te=class extends o{constructor(t,e,s){super(t,e,$+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,r,a,i,n){var o=t.bones[this.boneIndex];if(o.active)if(s<this.frames[0])switch(i){case 0:return void(o.x=o.data.x);case 1:o.x+=(o.data.x-o.x)*a}else{var h=this.getCurveValue(s);switch(i){case 0:o.x=o.data.x+h*a;break;case 1:case 2:o.x+=(o.data.x+h-o.x)*a;break;case 3:o.x+=h*a}}}},Re=class extends o{constructor(t,e,s){super(t,e,U+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,r,a,i,n){var o=t.bones[this.boneIndex];if(o.active)if(s<this.frames[0])switch(i){case 0:return void(o.y=o.data.y);case 1:o.y+=(o.data.y-o.y)*a}else{var h=this.getCurveValue(s);switch(i){case 0:o.y=o.data.y+h*a;break;case 1:case 2:o.y+=(o.data.y+h-o.y)*a;break;case 3:o.y+=h*a}}}},Ce=class extends ht{constructor(t,e,s){super(t,e,W+"|"+s,j+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,a,s,i,n,o){var h=t.bones[this.boneIndex];if(h.active){var l=this.frames;if(a<l[0])switch(n){case 0:return h.scaleX=h.data.scaleX,void(h.scaleY=h.data.scaleY);case 1:h.scaleX+=(h.data.scaleX-h.scaleX)*i,h.scaleY+=(h.data.scaleY-h.scaleY)*i}else{let s,r;var c=B.search(l,a,3),d=this.curves[c/3];switch(d){case 0:var u=l[c],u=(s=l[c+1],r=l[c+2],(a-u)/(l[c+3]-u));s+=(l[c+3+1]-s)*u,r+=(l[c+3+2]-r)*u;break;case 1:s=l[c+1],r=l[c+2];break;default:s=this.getBezierValue(a,c,1,d-2),r=this.getBezierValue(a,c,2,d+18-2)}if(s*=h.data.scaleX,r*=h.data.scaleY,1==i)3==n?(h.scaleX+=s-h.data.scaleX,h.scaleY+=r-h.data.scaleY):(h.scaleX=s,h.scaleY=r);else{let t=0,e=0;if(1==o)switch(n){case 0:t=h.data.scaleX,e=h.data.scaleY,h.scaleX=t+(Math.abs(s)*q.signum(t)-t)*i,h.scaleY=e+(Math.abs(r)*q.signum(e)-e)*i;break;case 1:case 2:t=h.scaleX,e=h.scaleY,h.scaleX=t+(Math.abs(s)*q.signum(t)-t)*i,h.scaleY=e+(Math.abs(r)*q.signum(e)-e)*i;break;case 3:h.scaleX+=(s-h.data.scaleX)*i,h.scaleY+=(r-h.data.scaleY)*i}else switch(n){case 0:t=Math.abs(h.data.scaleX)*q.signum(s),e=Math.abs(h.data.scaleY)*q.signum(r),h.scaleX=t+(s-t)*i,h.scaleY=e+(r-e)*i;break;case 1:case 2:t=Math.abs(h.scaleX)*q.signum(s),e=Math.abs(h.scaleY)*q.signum(r),h.scaleX=t+(s-t)*i,h.scaleY=e+(r-e)*i;break;case 3:h.scaleX+=(s-h.data.scaleX)*i,h.scaleY+=(r-h.data.scaleY)*i}}}}}},Me=class extends o{constructor(t,e,s){super(t,e,W+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,r,a,i,n){var o=t.bones[this.boneIndex];if(o.active)if(s<this.frames[0])switch(i){case 0:return void(o.scaleX=o.data.scaleX);case 1:o.scaleX+=(o.data.scaleX-o.scaleX)*a}else{var h=this.getCurveValue(s)*o.data.scaleX;if(1==a)3==i?o.scaleX+=h-o.data.scaleX:o.scaleX=h;else{let t=0;if(1==n)switch(i){case 0:t=o.data.scaleX,o.scaleX=t+(Math.abs(h)*q.signum(t)-t)*a;break;case 1:case 2:t=o.scaleX,o.scaleX=t+(Math.abs(h)*q.signum(t)-t)*a;break;case 3:o.scaleX+=(h-o.data.scaleX)*a}else switch(i){case 0:t=Math.abs(o.data.scaleX)*q.signum(h),o.scaleX=t+(h-t)*a;break;case 1:case 2:t=Math.abs(o.scaleX)*q.signum(h),o.scaleX=t+(h-t)*a;break;case 3:o.scaleX+=(h-o.data.scaleX)*a}}}}},Fe=class extends o{constructor(t,e,s){super(t,e,j+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,r,a,i,n){var o=t.bones[this.boneIndex];if(o.active)if(s<this.frames[0])switch(i){case 0:return void(o.scaleY=o.data.scaleY);case 1:o.scaleY+=(o.data.scaleY-o.scaleY)*a}else{var h=this.getCurveValue(s)*o.data.scaleY;if(1==a)3==i?o.scaleY+=h-o.data.scaleY:o.scaleY=h;else{let t=0;if(1==n)switch(i){case 0:t=o.data.scaleY,o.scaleY=t+(Math.abs(h)*q.signum(t)-t)*a;break;case 1:case 2:t=o.scaleY,o.scaleY=t+(Math.abs(h)*q.signum(t)-t)*a;break;case 3:o.scaleY+=(h-o.data.scaleY)*a}else switch(i){case 0:t=Math.abs(o.data.scaleY)*q.signum(h),o.scaleY=t+(h-t)*a;break;case 1:case 2:t=Math.abs(o.scaleY)*q.signum(h),o.scaleY=t+(h-t)*a;break;case 3:o.scaleY+=(h-o.data.scaleY)*a}}}}},Ye=class extends ht{constructor(t,e,s){super(t,e,z+"|"+s,G+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,r,a,i,n){var o=t.bones[this.boneIndex];if(o.active){var h=this.frames;if(s<h[0])switch(i){case 0:return o.shearX=o.data.shearX,void(o.shearY=o.data.shearY);case 1:o.shearX+=(o.data.shearX-o.shearX)*a,o.shearY+=(o.data.shearY-o.shearY)*a}else{let t=0,e=0;var l=B.search(h,s,3),c=this.curves[l/3];switch(c){case 0:var d=h[l],d=(t=h[l+1],e=h[l+2],(s-d)/(h[l+3]-d));t+=(h[l+3+1]-t)*d,e+=(h[l+3+2]-e)*d;break;case 1:t=h[l+1],e=h[l+2];break;default:t=this.getBezierValue(s,l,1,c-2),e=this.getBezierValue(s,l,2,c+18-2)}switch(i){case 0:o.shearX=o.data.shearX+t*a,o.shearY=o.data.shearY+e*a;break;case 1:case 2:o.shearX+=(o.data.shearX+t-o.shearX)*a,o.shearY+=(o.data.shearY+e-o.shearY)*a;break;case 3:o.shearX+=t*a,o.shearY+=e*a}}}}},Xe=class extends o{constructor(t,e,s){super(t,e,z+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,r,a,i,n){var o=t.bones[this.boneIndex];if(o.active)if(s<this.frames[0])switch(i){case 0:return void(o.shearX=o.data.shearX);case 1:o.shearX+=(o.data.shearX-o.shearX)*a}else{var h=this.getCurveValue(s);switch(i){case 0:o.shearX=o.data.shearX+h*a;break;case 1:case 2:o.shearX+=(o.data.shearX+h-o.shearX)*a;break;case 3:o.shearX+=h*a}}}},Ne=class extends o{constructor(t,e,s){super(t,e,G+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,r,a,i,n){var o=t.bones[this.boneIndex];if(o.active)if(s<this.frames[0])switch(i){case 0:return void(o.shearY=o.data.shearY);case 1:o.shearY+=(o.data.shearY-o.shearY)*a}else{var h=this.getCurveValue(s);switch(i){case 0:o.shearY=o.data.shearY+h*a;break;case 1:case 2:o.shearY+=(o.data.shearY+h-o.shearY)*a;break;case 3:o.shearY+=h*a}}}},_e=class extends t{constructor(t,e,s){super(t,e,[H+"|"+s,J+"|"+s]),this.slotIndex=0,this.slotIndex=s}getFrameEntries(){return 5}setFrame(t,e,s,r,a,i){this.frames[t*=5]=e,this.frames[t+1]=s,this.frames[t+2]=r,this.frames[t+3]=a,this.frames[t+4]=i}apply(a,t,i,e,n,o,s){a=a.slots[this.slotIndex];if(a.bone.active){var h=this.frames,l=a.color;if(i<h[0]){var r=a.data.color;switch(o){case 0:return void l.setFromColor(r);case 1:l.add((r.r-l.r)*n,(r.g-l.g)*n,(r.b-l.b)*n,(r.a-l.a)*n)}}else{let t=0,e=0,s=0,r=0;var c=B.search(h,i,5),d=this.curves[c/5];switch(d){case 0:var u=h[c],u=(t=h[c+1],e=h[c+2],s=h[c+3],r=h[c+4],(i-u)/(h[c+5]-u));t+=(h[c+5+1]-t)*u,e+=(h[c+5+2]-e)*u,s+=(h[c+5+3]-s)*u,r+=(h[c+5+4]-r)*u;break;case 1:t=h[c+1],e=h[c+2],s=h[c+3],r=h[c+4];break;default:t=this.getBezierValue(i,c,1,d-2),e=this.getBezierValue(i,c,2,d+18-2),s=this.getBezierValue(i,c,3,d+36-2),r=this.getBezierValue(i,c,4,d+54-2)}1==n?l.set(t,e,s,r):(0==o&&l.setFromColor(a.data.color),l.add((t-l.r)*n,(e-l.g)*n,(s-l.b)*n,(r-l.a)*n))}}}},Le=class extends t{constructor(t,e,s){super(t,e,[H+"|"+s]),this.slotIndex=0,this.slotIndex=s}getFrameEntries(){return 4}setFrame(t,e,s,r,a){this.frames[t<<=2]=e,this.frames[t+1]=s,this.frames[t+2]=r,this.frames[t+3]=a}apply(r,t,a,e,i,n,s){r=r.slots[this.slotIndex];if(r.bone.active){var o=this.frames,h=r.color;if(a<o[0]){var l=r.data.color;switch(n){case 0:return h.r=l.r,h.g=l.g,void(h.b=l.b);case 1:h.r+=(l.r-h.r)*i,h.g+=(l.g-h.g)*i,h.b+=(l.b-h.b)*i}}else{let t=0,e=0,s=0;var c=B.search(o,a,4),d=this.curves[c>>2];switch(d){case 0:var u=o[c],u=(t=o[c+1],e=o[c+2],s=o[c+3],(a-u)/(o[c+4]-u));t+=(o[c+4+1]-t)*u,e+=(o[c+4+2]-e)*u,s+=(o[c+4+3]-s)*u;break;case 1:t=o[c+1],e=o[c+2],s=o[c+3];break;default:t=this.getBezierValue(a,c,1,d-2),e=this.getBezierValue(a,c,2,d+18-2),s=this.getBezierValue(a,c,3,d+36-2)}1==i?(h.r=t,h.g=e,h.b=s):(0==n&&(n=r.data.color,h.r=n.r,h.g=n.g,h.b=n.b),h.r+=(t-h.r)*i,h.g+=(e-h.g)*i,h.b+=(s-h.b)*i)}}}},Pe=class extends o{constructor(t,e,s){super(t,e,J+"|"+s),this.slotIndex=0,this.slotIndex=s}apply(t,e,s,r,a,i,n){t=t.slots[this.slotIndex];if(t.bone.active){var o=t.color;if(s<this.frames[0]){var h=t.data.color;switch(i){case 0:return void(o.a=h.a);case 1:o.a+=(h.a-o.a)*a}}else{s=this.getCurveValue(s);1==a?o.a=s:(0==i&&(o.a=t.data.color.a),o.a+=(s-o.a)*a)}}}},Be=class extends t{constructor(t,e,s){super(t,e,[H+"|"+s,J+"|"+s,K+"|"+s]),this.slotIndex=0,this.slotIndex=s}getFrameEntries(){return 8}setFrame(t,e,s,r,a,i,n,o,h){this.frames[t<<=3]=e,this.frames[t+1]=s,this.frames[t+2]=r,this.frames[t+3]=a,this.frames[t+4]=i,this.frames[t+5]=n,this.frames[t+6]=o,this.frames[t+7]=h}apply(o,t,h,e,l,c,s){o=o.slots[this.slotIndex];if(o.bone.active){var d=this.frames,u=o.color,m=o.darkColor;if(h<d[0]){var r=o.data.color,a=o.data.darkColor;switch(c){case 0:return u.setFromColor(r),m.r=a.r,m.g=a.g,void(m.b=a.b);case 1:u.add((r.r-u.r)*l,(r.g-u.g)*l,(r.b-u.b)*l,(r.a-u.a)*l),m.r+=(a.r-m.r)*l,m.g+=(a.g-m.g)*l,m.b+=(a.b-m.b)*l}}else{let t=0,e=0,s=0,r=0,a=0,i=0,n=0;var p=B.search(d,h,8),f=this.curves[p>>3];switch(f){case 0:var g=d[p],g=(t=d[p+1],e=d[p+2],s=d[p+3],r=d[p+4],a=d[p+5],i=d[p+6],n=d[p+7],(h-g)/(d[p+8]-g));t+=(d[p+8+1]-t)*g,e+=(d[p+8+2]-e)*g,s+=(d[p+8+3]-s)*g,r+=(d[p+8+4]-r)*g,a+=(d[p+8+5]-a)*g,i+=(d[p+8+6]-i)*g,n+=(d[p+8+7]-n)*g;break;case 1:t=d[p+1],e=d[p+2],s=d[p+3],r=d[p+4],a=d[p+5],i=d[p+6],n=d[p+7];break;default:t=this.getBezierValue(h,p,1,f-2),e=this.getBezierValue(h,p,2,f+18-2),s=this.getBezierValue(h,p,3,f+36-2),r=this.getBezierValue(h,p,4,f+54-2),a=this.getBezierValue(h,p,5,f+72-2),i=this.getBezierValue(h,p,6,f+90-2),n=this.getBezierValue(h,p,7,f+108-2)}1==l?(u.set(t,e,s,r),m.r=a,m.g=i,m.b=n):(0==c&&(u.setFromColor(o.data.color),c=o.data.darkColor,m.r=c.r,m.g=c.g,m.b=c.b),u.add((t-u.r)*l,(e-u.g)*l,(s-u.b)*l,(r-u.a)*l),m.r+=(a-m.r)*l,m.g+=(i-m.g)*l,m.b+=(n-m.b)*l)}}}},De=class extends t{constructor(t,e,s){super(t,e,[H+"|"+s,K+"|"+s]),this.slotIndex=0,this.slotIndex=s}getFrameEntries(){return 7}setFrame(t,e,s,r,a,i,n,o){this.frames[t*=7]=e,this.frames[t+1]=s,this.frames[t+2]=r,this.frames[t+3]=a,this.frames[t+4]=i,this.frames[t+5]=n,this.frames[t+6]=o}apply(n,t,o,e,h,l,s){n=n.slots[this.slotIndex];if(n.bone.active){var c=this.frames,d=n.color,u=n.darkColor;if(o<c[0]){var r=n.data.color,a=n.data.darkColor;switch(l){case 0:return d.r=r.r,d.g=r.g,d.b=r.b,u.r=a.r,u.g=a.g,void(u.b=a.b);case 1:d.r+=(r.r-d.r)*h,d.g+=(r.g-d.g)*h,d.b+=(r.b-d.b)*h,u.r+=(a.r-u.r)*h,u.g+=(a.g-u.g)*h,u.b+=(a.b-u.b)*h}}else{let t=0,e=0,s=0,r=0,a=0,i=0;var m=B.search(c,o,7),p=this.curves[m/7];switch(p){case 0:var f=c[m],f=(t=c[m+1],e=c[m+2],s=c[m+3],r=c[m+4],a=c[m+5],i=c[m+6],(o-f)/(c[m+7]-f));t+=(c[m+7+1]-t)*f,e+=(c[m+7+2]-e)*f,s+=(c[m+7+3]-s)*f,r+=(c[m+7+4]-r)*f,a+=(c[m+7+5]-a)*f,i+=(c[m+7+6]-i)*f;break;case 1:t=c[m+1],e=c[m+2],s=c[m+3],r=c[m+4],a=c[m+5],i=c[m+6];break;default:t=this.getBezierValue(o,m,1,p-2),e=this.getBezierValue(o,m,2,p+18-2),s=this.getBezierValue(o,m,3,p+36-2),r=this.getBezierValue(o,m,4,p+54-2),a=this.getBezierValue(o,m,5,p+72-2),i=this.getBezierValue(o,m,6,p+90-2)}1==h?(d.r=t,d.g=e,d.b=s,u.r=r,u.g=a,u.b=i):(0==l&&(l=n.data.color,n=n.data.darkColor,d.r=l.r,d.g=l.g,d.b=l.b,u.r=n.r,u.g=n.g,u.b=n.b),d.r+=(t-d.r)*h,d.g+=(e-d.g)*h,d.b+=(s-d.b)*h,u.r+=(r-u.r)*h,u.g+=(a-u.g)*h,u.b+=(i-u.b)*h)}}}},xe=class extends B{constructor(t,e){super(t,[Q+"|"+e]),this.slotIndex=0,this.slotIndex=e,this.attachmentNames=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e,s){this.frames[t]=e,this.attachmentNames[t]=s}apply(t,e,s,r,a,i,n){var o=t.slots[this.slotIndex];o.bone.active&&(1==n?0==i&&this.setAttachment(t,o,o.data.attachmentName):s<this.frames[0]?0!=i&&1!=i||this.setAttachment(t,o,o.data.attachmentName):this.setAttachment(t,o,this.attachmentNames[B.search1(this.frames,s)]))}setAttachment(t,e,s){e.setAttachment(s?t.getAttachment(this.slotIndex,s):null)}},Oe=class extends t{constructor(t,e,s,r){super(t,e,[Z+"|"+s+"|"+r.id]),this.slotIndex=0,this.slotIndex=s,this.attachment=r,this.vertices=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e,s){this.frames[t]=e,this.vertices[t]=s}setBezier(t,e,s,r,a,i,n,o,h,l,c){var d=this.curves;let u=this.getFrameCount()+18*t;0==s&&(d[e]=2+u);var t=.03*(r-2*i+o),s=.03*h-.06*n,m=.006*(3*(i-o)-r+l),p=.018*(n-h+.33333333);let f=2*t+m,g=2*s+p,v=.3*(i-r)+t+.16666667*m,x=.3*n+s+.16666667*p,w=r+v,b=x;for(var y=u+18;u<y;u+=2)d[u]=w,d[u+1]=b,v+=f,x+=g,f+=m,g+=p,w+=v,b+=x}getCurvePercent(t,e){var s=this.curves;let r=s[e];switch(r){case 0:var a=this.frames[e];return(t-a)/(this.frames[e+this.getFrameEntries()]-a);case 1:return 0}if(s[r-=2]>t)return h=this.frames[e],s[r+1]*(t-h)/(s[r]-h);var i,n,o=r+18;for(r+=2;r<o;r+=2)if(s[r]>=t)return i=s[r-2],(n=s[r-1])+(t-i)/(s[r]-i)*(s[r+1]-n);var h=s[o-2],l=s[o-1];return l+(1-l)*(t-h)/(this.frames[e+this.getFrameEntries()]-h)}apply(t,e,s,_,r,a,L){t=t.slots[this.slotIndex];if(t.bone.active){var i=t.getAttachment();if(i&&i instanceof P&&i.timelineAttachment==this.attachment){var n=t.deform,t=(0==n.length&&(a=0),this.vertices),o=t[0].length,h=this.frames;if(s<h[0])switch(a){case 0:return void(n.length=0);case 1:if(1==r)return void(n.length=0);n.length=o;var l=i;if(l.bones){r=1-r;for(d=0;d<o;d++)n[d]*=r}else for(var c=l.vertices,d=0;d<o;d++)n[d]+=(c[d]-n[d])*r}else if(n.length=o,s>=h[h.length-1]){var u=t[h.length-1];if(1==r)if(3==a){var m=i;if(m.bones)for(let t=0;t<o;t++)n[t]+=u[t];else{var p=m.vertices;for(let t=0;t<o;t++)n[t]+=u[t]-p[t]}}else fe.arrayCopy(u,0,n,0,o);else switch(a){case 0:var f=i;if(f.bones)for(let t=0;t<o;t++)n[t]=u[t]*r;else{var g=f.vertices;for(let t=0;t<o;t++){var v=g[t];n[t]=v+(u[t]-v)*r}}break;case 1:case 2:for(let t=0;t<o;t++)n[t]+=(u[t]-n[t])*r;break;case 3:f=i;if(f.bones)for(let t=0;t<o;t++)n[t]+=u[t]*r;else{var x=f.vertices;for(let t=0;t<o;t++)n[t]+=(u[t]-x[t])*r}}}else{var m=B.search1(h,s),w=this.getCurvePercent(s,m),b=t[m],y=t[m+1];if(1==r)if(3==a){h=i;if(h.bones)for(let t=0;t<o;t++){var A=b[t];n[t]+=A+(y[t]-A)*w}else{var I=h.vertices;for(let t=0;t<o;t++){var E=b[t];n[t]+=E+(y[t]-E)*w-I[t]}}}else for(let t=0;t<o;t++){var S=b[t];n[t]=S+(y[t]-S)*w}else switch(a){case 0:var k=i;if(k.bones)for(let t=0;t<o;t++){var T=b[t];n[t]=(T+(y[t]-T)*w)*r}else{var R=k.vertices;for(let t=0;t<o;t++){var C=b[t],M=R[t];n[t]=M+(C+(y[t]-C)*w-M)*r}}break;case 1:case 2:for(let t=0;t<o;t++){var F=b[t];n[t]+=(F+(y[t]-F)*w-n[t])*r}break;case 3:k=i;if(k.bones)for(let t=0;t<o;t++){var Y=b[t];n[t]+=(Y+(y[t]-Y)*w)*r}else{var X=k.vertices;for(let t=0;t<o;t++){var N=b[t];n[t]+=(N+(y[t]-N)*w-X[t])*r}}}}}}}},lt=class extends B{constructor(t){super(t,lt.propertyIds),this.events=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e){this.frames[t]=e.time,this.events[t]=e}apply(t,e,s,r,a,i,n){if(r){var o=this.frames,h=this.frames.length;if(s<e)this.apply(t,e,Number.MAX_VALUE,r,a,i,n),e=-1;else if(e>=o[h-1])return;if(!(s<o[0])){let t=0;if(e<o[0])t=0;else for(var l=o[t=B.search1(o,e)+1];0<t&&o[t-1]==l;)t--;for(;t<h&&s>=o[t];t++)r.push(this.events[t])}}}},we=lt,ct=(we.propertyIds=[""+tt],class extends B{constructor(t){super(t,ct.propertyIds),this.drawOrders=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e,s){this.frames[t]=e,this.drawOrders[t]=s}apply(t,e,s,r,a,i,n){if(1==n)0==i&&fe.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);else if(s<this.frames[0])0!=i&&1!=i||fe.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);else{var n=B.search1(this.frames,s),o=this.drawOrders[n];if(o){var h=t.drawOrder,l=t.slots;for(let t=0,e=o.length;t<e;t++)h[t]=l[o[t]]}else fe.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length)}}}),be=ct,$e=(be.propertyIds=[""+et],class extends t{constructor(t,e,s){super(t,e,[st+"|"+s]),this.ikConstraintIndex=0,this.ikConstraintIndex=s}getFrameEntries(){return 6}setFrame(t,e,s,r,a,i,n){this.frames[t*=6]=e,this.frames[t+1]=s,this.frames[t+2]=r,this.frames[t+3]=a,this.frames[t+4]=i?1:0,this.frames[t+5]=n?1:0}apply(t,e,s,r,a,i,n){var o=t.ikConstraints[this.ikConstraintIndex];if(o.active){var h=this.frames;if(s<h[0])switch(i){case 0:return o.mix=o.data.mix,o.softness=o.data.softness,o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,void(o.stretch=o.data.stretch);case 1:o.mix+=(o.data.mix-o.mix)*a,o.softness+=(o.data.softness-o.softness)*a,o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,o.stretch=o.data.stretch}else{let t=0,e=0;var l=B.search(h,s,6),c=this.curves[l/6];switch(c){case 0:var d=h[l],d=(t=h[l+1],e=h[l+2],(s-d)/(h[l+6]-d));t+=(h[l+6+1]-t)*d,e+=(h[l+6+2]-e)*d;break;case 1:t=h[l+1],e=h[l+2];break;default:t=this.getBezierValue(s,l,1,c-2),e=this.getBezierValue(s,l,2,c+18-2)}0==i?(o.mix=o.data.mix+(t-o.data.mix)*a,o.softness=o.data.softness+(e-o.data.softness)*a,1==n?(o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,o.stretch=o.data.stretch):(o.bendDirection=h[l+3],o.compress=0!=h[l+4],o.stretch=0!=h[l+5])):(o.mix+=(t-o.mix)*a,o.softness+=(e-o.softness)*a,0==n&&(o.bendDirection=h[l+3],o.compress=0!=h[l+4],o.stretch=0!=h[l+5]))}}}}),Ve=class extends t{constructor(t,e,s){super(t,e,[rt+"|"+s]),this.transformConstraintIndex=0,this.transformConstraintIndex=s}getFrameEntries(){return 7}setFrame(t,e,s,r,a,i,n,o){var h=this.frames;h[t*=7]=e,h[t+1]=s,h[t+2]=r,h[t+3]=a,h[t+4]=i,h[t+5]=n,h[t+6]=o}apply(n,t,o,e,h,l,s){var c=n.transformConstraints[this.transformConstraintIndex];if(c.active){var d=this.frames;if(o<d[0]){var r=c.data;switch(l){case 0:return c.mixRotate=r.mixRotate,c.mixX=r.mixX,c.mixY=r.mixY,c.mixScaleX=r.mixScaleX,c.mixScaleY=r.mixScaleY,void(c.mixShearY=r.mixShearY);case 1:c.mixRotate+=(r.mixRotate-c.mixRotate)*h,c.mixX+=(r.mixX-c.mixX)*h,c.mixY+=(r.mixY-c.mixY)*h,c.mixScaleX+=(r.mixScaleX-c.mixScaleX)*h,c.mixScaleY+=(r.mixScaleY-c.mixScaleY)*h,c.mixShearY+=(r.mixShearY-c.mixShearY)*h}}else{let t,e,s,r,a,i;var u=B.search(d,o,7),m=this.curves[u/7];switch(m){case 0:var p=d[u],p=(t=d[u+1],e=d[u+2],s=d[u+3],r=d[u+4],a=d[u+5],i=d[u+6],(o-p)/(d[u+7]-p));t+=(d[u+7+1]-t)*p,e+=(d[u+7+2]-e)*p,s+=(d[u+7+3]-s)*p,r+=(d[u+7+4]-r)*p,a+=(d[u+7+5]-a)*p,i+=(d[u+7+6]-i)*p;break;case 1:t=d[u+1],e=d[u+2],s=d[u+3],r=d[u+4],a=d[u+5],i=d[u+6];break;default:t=this.getBezierValue(o,u,1,m-2),e=this.getBezierValue(o,u,2,m+18-2),s=this.getBezierValue(o,u,3,m+36-2),r=this.getBezierValue(o,u,4,m+54-2),a=this.getBezierValue(o,u,5,m+72-2),i=this.getBezierValue(o,u,6,m+90-2)}0==l?(n=c.data,c.mixRotate=n.mixRotate+(t-n.mixRotate)*h,c.mixX=n.mixX+(e-n.mixX)*h,c.mixY=n.mixY+(s-n.mixY)*h,c.mixScaleX=n.mixScaleX+(r-n.mixScaleX)*h,c.mixScaleY=n.mixScaleY+(a-n.mixScaleY)*h,c.mixShearY=n.mixShearY+(i-n.mixShearY)*h):(c.mixRotate+=(t-c.mixRotate)*h,c.mixX+=(e-c.mixX)*h,c.mixY+=(s-c.mixY)*h,c.mixScaleX+=(r-c.mixScaleX)*h,c.mixScaleY+=(a-c.mixScaleY)*h,c.mixShearY+=(i-c.mixShearY)*h)}}}},Ue=class extends o{constructor(t,e,s){super(t,e,at+"|"+s),this.pathConstraintIndex=0,this.pathConstraintIndex=s}apply(t,e,s,r,a,i,n){var o=t.pathConstraints[this.pathConstraintIndex];if(o.active)if(s<this.frames[0])switch(i){case 0:return void(o.position=o.data.position);case 1:o.position+=(o.data.position-o.position)*a}else{t=this.getCurveValue(s);0==i?o.position=o.data.position+(t-o.data.position)*a:o.position+=(t-o.position)*a}}},qe=class extends o{constructor(t,e,s){super(t,e,it+"|"+s),this.pathConstraintIndex=0,this.pathConstraintIndex=s}apply(t,e,s,r,a,i,n){var o=t.pathConstraints[this.pathConstraintIndex];if(o.active)if(s<this.frames[0])switch(i){case 0:return void(o.spacing=o.data.spacing);case 1:o.spacing+=(o.data.spacing-o.spacing)*a}else{t=this.getCurveValue(s);0==i?o.spacing=o.data.spacing+(t-o.data.spacing)*a:o.spacing+=(t-o.spacing)*a}}},We=class extends t{constructor(t,e,s){super(t,e,[nt+"|"+s]),this.pathConstraintIndex=0,this.pathConstraintIndex=s}getFrameEntries(){return 4}setFrame(t,e,s,r,a){var i=this.frames;i[t<<=2]=e,i[t+1]=s,i[t+2]=r,i[t+3]=a}apply(r,t,a,e,i,n,s){var o=r.pathConstraints[this.pathConstraintIndex];if(o.active){var h=this.frames;if(a<h[0])switch(n){case 0:return o.mixRotate=o.data.mixRotate,o.mixX=o.data.mixX,void(o.mixY=o.data.mixY);case 1:o.mixRotate+=(o.data.mixRotate-o.mixRotate)*i,o.mixX+=(o.data.mixX-o.mixX)*i,o.mixY+=(o.data.mixY-o.mixY)*i}else{let t,e,s;var l=B.search(h,a,4),c=this.curves[l>>2];switch(c){case 0:var d=h[l],d=(t=h[l+1],e=h[l+2],s=h[l+3],(a-d)/(h[l+4]-d));t+=(h[l+4+1]-t)*d,e+=(h[l+4+2]-e)*d,s+=(h[l+4+3]-s)*d;break;case 1:t=h[l+1],e=h[l+2],s=h[l+3];break;default:t=this.getBezierValue(a,l,1,c-2),e=this.getBezierValue(a,l,2,c+18-2),s=this.getBezierValue(a,l,3,c+36-2)}0==n?(r=o.data,o.mixRotate=r.mixRotate+(t-r.mixRotate)*i,o.mixX=r.mixX+(e-r.mixX)*i,o.mixY=r.mixY+(s-r.mixY)*i):(o.mixRotate+=(t-o.mixRotate)*i,o.mixX+=(e-o.mixX)*i,o.mixY+=(s-o.mixY)*i)}}}},d=class extends B{constructor(t,e,s){super(t,[ot+"|"+e+"|"+s.sequence.id]),this.slotIndex=e,this.attachment=s}getFrameEntries(){return d.ENTRIES}getSlotIndex(){return this.slotIndex}getAttachment(){return this.attachment}setFrame(t,e,s,r,a){var i=this.frames;i[t*=d.ENTRIES]=e,i[t+d.MODE]=s|r<<4,i[t+d.DELAY]=a}apply(s,t,r,e,a,i,n){s=s.slots[this.slotIndex];if(s.bone.active){var o=s.attachment,h=this.attachment;if(o==h||o instanceof P&&o.timelineAttachment==h){o=this.frames;if(r<o[0])0!=i&&1!=i||(s.sequenceIndex=-1);else{var h=B.search(o,r,d.ENTRIES),i=o[h],l=o[h+d.MODE],o=o[h+d.DELAY];if(this.attachment.sequence){let t=l>>4,e=this.attachment.sequence.regions.length;h=Zt[15&l];if(0!=h)switch(t+=(r-i)/o+1e-5|0,h){case 1:t=Math.min(e-1,t);break;case 2:t%=e;break;case 3:var c=(e<<1)-2;(t=0==c?0:t%c)>=e&&(t=c-t);break;case 4:t=Math.max(e-1-t,0);break;case 5:t=e-1-t%e;break;case 6:c=(e<<1)-2;(t=0==c?0:(t+e-1)%c)>=e&&(t=c-t)}s.sequenceIndex=t}}}}}},ye=d,dt=(ye.ENTRIES=3,ye.MODE=1,ye.DELAY=2,class{constructor(t){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new pt(this),this.propertyIDs=new S,this.animationsChanged=!1,this.trackEntryPool=new a(()=>new mt),this.data=t}static emptyAnimation(){return dt._emptyAnimation}update(r){r*=this.timeScale;var a=this.tracks;for(let s=0,t=a.length;s<t;s++){var i=a[s];if(i){i.animationLast=i.nextAnimationLast,i.trackLast=i.nextTrackLast;let t=r*i.timeScale;if(0<i.delay){if(i.delay-=t,0<i.delay)continue;t=-i.delay,i.delay=0}let e=i.next;if(e){var n=i.trackLast-e.delay;if(0<=n){for(e.delay=0,e.trackTime+=0==i.timeScale?0:(n/i.timeScale+r)*e.timeScale,i.trackTime+=t,this.setCurrent(s,e,!0);e.mixingFrom;)e.mixTime+=r,e=e.mixingFrom;continue}}else if(i.trackLast>=i.trackEnd&&!i.mixingFrom){a[s]=null,this.queue.end(i),this.clearNext(i);continue}if(i.mixingFrom&&this.updateMixingFrom(i,r)){let t=i.mixingFrom;for(i.mixingFrom=null,t&&(t.mixingTo=null);t;)this.queue.end(t),t=t.mixingFrom}i.trackTime+=t}}this.queue.drain()}updateMixingFrom(t,e){var s,r=t.mixingFrom;return!r||(s=this.updateMixingFrom(r,e),r.animationLast=r.nextAnimationLast,r.trackLast=r.nextTrackLast,0<t.mixTime&&t.mixTime>=t.mixDuration?(0!=r.totalAlpha&&0!=t.mixDuration||(t.mixingFrom=r.mixingFrom,r.mixingFrom&&(r.mixingFrom.mixingTo=t),t.interruptAlpha=r.interruptAlpha,this.queue.end(r)),s):(r.trackTime+=e*r.timeScale,t.mixTime+=e,!1))}apply(n){if(!n)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();var o=this.events,e=this.tracks;let h=!1;for(let i=0,t=e.length;i<t;i++){var l=e[i];if(l&&!(0<l.delay)){h=!0;var c=0==i?1:l.mixBlend;let e=l.alpha,s=(l.mixingFrom?e*=this.applyMixingFrom(l,n,c):l.trackTime>=l.trackEnd&&!l.next&&(e=0),l.animationLast),t=l.getAnimationTime(),r=t,a=o;l.reverse&&(r=l.animation.duration-r,a=null);var d=l.animation.timelines,u=d.length;if(0==i&&1==e||3==c)for(let t=0;t<u;t++){fe.webkit602BugfixHelper(e,c);var m=d[t];m instanceof xe?this.applyAttachmentTimeline(m,n,r,c,!0):m.apply(n,s,r,a,e,c,0)}else{var p=l.timelineMode,f=l.shortestRotation,g=!f&&l.timelinesRotation.length!=u<<1;g&&(l.timelinesRotation.length=u<<1);for(let t=0;t<u;t++){var v=d[t],x=p[t]==gt?c:0;!f&&v instanceof ve?this.applyRotateTimeline(v,n,r,e,x,l.timelinesRotation,t<<1,g):v instanceof xe?this.applyAttachmentTimeline(v,n,r,c,!0):(fe.webkit602BugfixHelper(e,c),v.apply(n,s,r,a,e,x,0))}}this.queueEvents(l,t),o.length=0,l.nextAnimationLast=t,l.nextTrackLast=l.trackTime}}for(var t=this.unkeyedState+yt,s=n.slots,r=0,a=n.slots.length;r<a;r++){var i,w=s[r];w.attachmentState==t&&(i=w.data.attachmentName,w.setAttachment(i?n.getAttachment(w.data.index,i):null))}return this.unkeyedState+=2,this.queue.drain(),h}applyMixingFrom(t,a,i){var n=t.mixingFrom;n.mixingFrom&&this.applyMixingFrom(n,a,i);let e=0;0==t.mixDuration?(e=1)==i&&(i=0):(1<(e=t.mixTime/t.mixDuration)&&(e=1),1!=i&&(i=n.mixBlend));var o=e<n.attachmentThreshold,h=e<n.drawOrderThreshold,l=n.animation.timelines,s=l.length,c=n.alpha*t.interruptAlpha,d=c*(1-e);let u=n.animationLast,r=n.getAnimationTime(),m=r,p=null;if(n.reverse?m=n.animation.duration-m:e<n.eventThreshold&&(p=this.events),3==i)for(let t=0;t<s;t++)l[t].apply(a,u,m,p,d,i,1);else{var f=n.timelineMode,g=n.timelineHoldMix,v=n.shortestRotation,x=!v&&n.timelinesRotation.length!=s<<1;x&&(n.timelinesRotation.length=s<<1);for(let r=n.totalAlpha=0;r<s;r++){var w=l[r];let t=1,e,s=0;switch(f[r]){case gt:if(!h&&w instanceof be)continue;e=i,s=d;break;case vt:e=0,s=d;break;case xt:e=i,s=c;break;case wt:e=0,s=c;break;default:e=0;var b=g[r];s=c*Math.max(0,1-b.mixTime/b.mixDuration)}n.totalAlpha+=s,!v&&w instanceof ve?this.applyRotateTimeline(w,a,m,s,e,n.timelinesRotation,r<<1,x):w instanceof xe?this.applyAttachmentTimeline(w,a,m,e,o):(fe.webkit602BugfixHelper(s,i),h&&w instanceof be&&0==e&&(t=0),w.apply(a,u,m,p,s,e,t))}}return 0<t.mixDuration&&this.queueEvents(n,r),this.events.length=0,n.nextAnimationLast=r,n.nextTrackLast=n.trackTime,e}applyAttachmentTimeline(t,e,s,r,a){var i=e.slots[t.slotIndex];i.bone.active&&(s<t.frames[0]?0!=r&&1!=r||this.setAttachment(e,i,i.data.attachmentName,a):this.setAttachment(e,i,t.attachmentNames[B.search1(t.frames,s)],a),i.attachmentState<=this.unkeyedState)&&(i.attachmentState=this.unkeyedState+yt)}setAttachment(t,e,s,r){e.setAttachment(s?t.getAttachment(e.data.index,s):null),r&&(e.attachmentState=this.unkeyedState+At)}applyRotateTimeline(s,t,r,n,o,h,l,c){if(c&&(h[l]=0),1==n)s.apply(t,0,r,null,1,o,0);else{var d=t.bones[s.boneIndex];if(d.active){let t=0,e=0;if(r<s.frames[0])switch(o){case 0:d.rotation=d.data.rotation;default:return;case 1:t=d.rotation,e=d.data.rotation}else t=(0==o?d.data:d).rotation,e=d.data.rotation+s.getCurveValue(r);let a=0,i=e-t;if(0==(i-=360*(16384-(16384.499999999996-i/360|0))))a=h[l];else{let t=0,e=0,s=(e=c?(t=0,i):(t=h[l],h[l+1]),0<i),r=0<=t;q.signum(e)!=q.signum(i)&&Math.abs(e)<=90&&(180<Math.abs(t)&&(t+=360*q.signum(t)),r=s),a=i+t-t%360,r!=s&&(a+=360*q.signum(t)),h[l]=a}h[l+1]=i,d.rotation=t+a*n}}}queueEvents(t,e){var s=t.animationStart,r=t.animationEnd,a=r-s,i=t.trackLast%a,n=this.events;let o=0,h=n.length;for(;o<h;o++){var l=n[o];if(l.time<i)break;l.time>r||this.queue.event(t,l)}let c=!1;for((c=t.loop?0==a||i>t.trackTime%a:r<=e&&t.animationLast<r)&&this.queue.complete(t);o<h;o++){var d=n[o];d.time<s||this.queue.event(t,d)}}clearTracks(){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let t=0,e=this.tracks.length;t<e;t++)this.clearTrack(t);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()}clearTrack(e){if(!(e>=this.tracks.length)){e=this.tracks[e];if(e){this.queue.end(e),this.clearNext(e);let t=e;for(;;){var s=t.mixingFrom;if(!s)break;this.queue.end(s),t.mixingFrom=null,t.mixingTo=null,t=s}this.tracks[e.trackIndex]=null,this.queue.drain()}}}setCurrent(t,e,s){var r=this.expandToIndex(t);(this.tracks[t]=e).previous=null,r&&(s&&this.queue.interrupt(r),((e.mixingFrom=r).mixingTo=e).mixTime=0,r.mixingFrom&&0<r.mixDuration&&(e.interruptAlpha*=Math.min(1,r.mixTime/r.mixDuration)),r.timelinesRotation.length=0),this.queue.start(e)}setAnimation(t,e,s=!1){var r=this.data.skeletonData.findAnimation(e);if(r)return this.setAnimationWith(t,r,s);throw new Error("Animation not found: "+e)}setAnimationWith(t,e,s=!1){if(!e)throw new Error("animation cannot be null.");let r=!0,a=this.expandToIndex(t);a&&(-1==a.nextTrackLast?(this.tracks[t]=a.mixingFrom,this.queue.interrupt(a),this.queue.end(a),this.clearNext(a),a=a.mixingFrom,r=!1):this.clearNext(a));e=this.trackEntry(t,e,s,a);return this.setCurrent(t,e,r),this.queue.drain(),e}addAnimation(t,e,s=!1,r=0){var a=this.data.skeletonData.findAnimation(e);if(a)return this.addAnimationWith(t,a,s,r);throw new Error("Animation not found: "+e)}addAnimationWith(t,e,s=!1,r=0){if(!e)throw new Error("animation cannot be null.");let a=this.expandToIndex(t);if(a)for(;a.next;)a=a.next;e=this.trackEntry(t,e,s,a);return a?((a.next=e).previous=a,r<=0&&(r+=a.getTrackComplete()-e.mixDuration)):(this.setCurrent(t,e,!0),this.queue.drain()),e.delay=r,e}setEmptyAnimation(t,e=0){t=this.setAnimationWith(t,dt.emptyAnimation(),!1);return t.mixDuration=e,t.trackEnd=e,t}addEmptyAnimation(t,e=0,s=0){t=this.addAnimationWith(t,dt.emptyAnimation(),!1,s);return s<=0&&(t.delay+=t.mixDuration-e),t.mixDuration=e,t.trackEnd=e,t}setEmptyAnimations(s=0){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let t=0,e=this.tracks.length;t<e;t++){var r=this.tracks[t];r&&this.setEmptyAnimation(r.trackIndex,s)}this.queue.drainDisabled=t,this.queue.drain()}expandToIndex(t){return t<this.tracks.length?this.tracks[t]:(fe.ensureArrayCapacity(this.tracks,t+1,null),this.tracks.length=t+1,null)}trackEntry(t,e,s,r){var a=this.trackEntryPool.obtain();return a.reset(),a.trackIndex=t,a.animation=e,a.loop=s,a.holdPrevious=!1,a.reverse=!1,a.shortestRotation=!1,a.eventThreshold=0,a.attachmentThreshold=0,a.drawOrderThreshold=0,a.animationStart=0,a.animationEnd=e.duration,a.animationLast=-1,a.nextAnimationLast=-1,a.delay=0,a.trackTime=0,a.trackLast=-1,a.nextTrackLast=-1,a.trackEnd=Number.MAX_VALUE,a.timeScale=1,a.alpha=1,a.mixTime=0,a.mixDuration=r?this.data.getMix(r.animation,e):0,a.interruptAlpha=1,a.totalAlpha=0,a.mixBlend=2,a}clearNext(t){let e=t.next;for(;e;)this.queue.dispose(e),e=e.next;t.next=null}_animationsChanged(){this.animationsChanged=!1,this.propertyIDs.clear();var s=this.tracks;for(let e=0,t=s.length;e<t;e++){let t=s[e];if(t){for(;t.mixingFrom;)t=t.mixingFrom;for(;t.mixingTo&&3==t.mixBlend||this.computeHold(t),t=t.mixingTo;);}}}computeHold(s){var r=s.mixingTo,a=s.animation.timelines,i=s.animation.timelines.length,n=s.timelineMode,o=(n.length=i,s.timelineHoldMix),h=(o.length=0,this.propertyIDs);if(r&&r.holdPrevious)for(let t=0;t<i;t++)n[t]=h.addAll(a[t].getPropertyIds())?wt:xt;else t:for(let e=0;e<i;e++){var t=a[e],l=t.getPropertyIds();if(h.addAll(l))if(!r||t instanceof xe||t instanceof be||t instanceof we||!r.animation.hasTimeline(l))n[e]=vt;else{for(let t=r.mixingTo;t;t=t.mixingTo)if(!t.animation.hasTimeline(l)){if(0<s.mixDuration){n[e]=bt,o[e]=t;continue t}break}n[e]=wt}else n[e]=gt}}getCurrent(t){return t>=this.tracks.length?null:this.tracks[t]}addListener(t){if(!t)throw new Error("listener cannot be null.");this.listeners.push(t)}removeListener(t){t=this.listeners.indexOf(t);0<=t&&this.listeners.splice(t,1)}clearListeners(){this.listeners.length=0}clearListenerNotifications(){this.queue.clear()}}),ut=dt,mt=(ut._emptyAnimation=new ge("<empty>",[],0),class{constructor(){this.animation=null,this.previous=null,this.next=null,this.mixingFrom=null,this.mixingTo=null,this.listener=null,this.trackIndex=0,this.loop=!1,this.holdPrevious=!1,this.reverse=!1,this.shortestRotation=!1,this.eventThreshold=0,this.attachmentThreshold=0,this.drawOrderThreshold=0,this.animationStart=0,this.animationEnd=0,this.animationLast=0,this.nextAnimationLast=0,this.delay=0,this.trackTime=0,this.trackLast=0,this.nextTrackLast=0,this.trackEnd=0,this.timeScale=0,this.alpha=0,this.mixTime=0,this.mixDuration=0,this.interruptAlpha=0,this.totalAlpha=0,this.mixBlend=2,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}reset(){this.next=null,this.previous=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0}getAnimationTime(){var t;return this.loop?0==(t=this.animationEnd-this.animationStart)?this.animationStart:this.trackTime%t+this.animationStart:Math.min(this.trackTime+this.animationStart,this.animationEnd)}setAnimationLast(t){this.animationLast=t,this.nextAnimationLast=t}isComplete(){return this.trackTime>=this.animationEnd-this.animationStart}resetRotationDirections(){this.timelinesRotation.length=0}getTrackComplete(){var t=this.animationEnd-this.animationStart;if(0!=t){if(this.loop)return t*(1+(this.trackTime/t|0));if(this.trackTime<t)return t}return this.trackTime}}),pt=class{constructor(t){this.objects=[],this.drainDisabled=!1,this.animState=t}start(t){this.objects.push(u.start),this.objects.push(t),this.animState.animationsChanged=!0}interrupt(t){this.objects.push(u.interrupt),this.objects.push(t)}end(t){this.objects.push(u.end),this.objects.push(t),this.animState.animationsChanged=!0}dispose(t){this.objects.push(u.dispose),this.objects.push(t)}complete(t){this.objects.push(u.complete),this.objects.push(t)}event(t,e){this.objects.push(u.event),this.objects.push(t),this.objects.push(e)}drain(){if(!this.drainDisabled){this.drainDisabled=!0;var e=this.objects,s=this.animState.listeners;for(let t=0;t<e.length;t+=2){var r=e[t],a=e[t+1];switch(r){case u.start:a.listener&&a.listener.start&&a.listener.start(a);for(let t=0;t<s.length;t++){var i=s[t];i.start&&i.start(a)}break;case u.interrupt:a.listener&&a.listener.interrupt&&a.listener.interrupt(a);for(let t=0;t<s.length;t++){var n=s[t];n.interrupt&&n.interrupt(a)}break;case u.end:a.listener&&a.listener.end&&a.listener.end(a);for(let t=0;t<s.length;t++){var o=s[t];o.end&&o.end(a)}case u.dispose:a.listener&&a.listener.dispose&&a.listener.dispose(a);for(let t=0;t<s.length;t++){var h=s[t];h.dispose&&h.dispose(a)}this.animState.trackEntryPool.free(a);break;case u.complete:a.listener&&a.listener.complete&&a.listener.complete(a);for(let t=0;t<s.length;t++){var l=s[t];l.complete&&l.complete(a)}break;case u.event:var c=e[2+t++];a.listener&&a.listener.event&&a.listener.event(a,c);for(let t=0;t<s.length;t++){var d=s[t];d.event&&d.event(a,c)}}}this.clear(),this.drainDisabled=!1}}clear(){this.objects.length=0}},u=(t=>(t[t.start=0]="start",t[t.interrupt=1]="interrupt",t[t.end=2]="end",t[t.dispose=3]="dispose",t[t.complete=4]="complete",t[t.event=5]="event",t))(u||{}),ft=class{start(t){}interrupt(t){}end(t){}dispose(t){}complete(t){}event(t,e){}},gt=0,vt=1,xt=2,wt=3,bt=4,yt=1,At=2,It=class{constructor(t){if(this.animationToMixTime={},this.defaultMix=0,!t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}setMix(t,e,s){var r=this.skeletonData.findAnimation(t);if(!r)throw new Error("Animation not found: "+t);t=this.skeletonData.findAnimation(e);if(!t)throw new Error("Animation not found: "+e);this.setMixWith(r,t,s)}setMixWith(t,e,s){if(!t)throw new Error("from cannot be null.");if(!e)throw new Error("to cannot be null.");t=t.name+"."+e.name;this.animationToMixTime[t]=s}getMix(t,e){t=t.name+"."+e.name,e=this.animationToMixTime[t];return void 0===e?this.defaultMix:e}},Et=class extends P{constructor(t){super(t),this.color=new pe(1,1,1,1)}copy(){var t=new Et(this.name);return this.copyTo(t),t.color.setFromColor(this.color),t}},St=class extends P{constructor(t){super(t),this.endSlot=null,this.color=new pe(.2275,.2275,.8078,1)}copy(){var t=new St(this.name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t}},kt=class{constructor(t){this._image=t}getImage(){return this._image}},Tt=(t=>(t[t.Nearest=9728]="Nearest",t[t.Linear=9729]="Linear",t[t.MipMap=9987]="MipMap",t[t.MipMapNearestNearest=9984]="MipMapNearestNearest",t[t.MipMapLinearNearest=9985]="MipMapLinearNearest",t[t.MipMapNearestLinear=9986]="MipMapNearestLinear",t[t.MipMapLinearLinear=9987]="MipMapLinearLinear",t))(Tt||{}),Rt=(t=>(t[t.MirroredRepeat=33648]="MirroredRepeat",t[t.ClampToEdge=33071]="ClampToEdge",t[t.Repeat=10497]="Repeat",t))(Rt||{}),Ct=class{constructor(){this.u=0,this.v=0,this.u2=0,this.v2=0,this.width=0,this.height=0,this.degrees=0,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0}},Mt=class extends kt{setFilters(t,e){}setWraps(t,e){}dispose(){}},Ft=class{constructor(t){this.pages=new Array,this.regions=new Array;var e=new Yt(t);let s=new Array(4);var r={size:t=>{t.width=parseInt(s[1]),t.height=parseInt(s[2])},format:()=>{},filter:t=>{t.minFilter=fe.enumValue(Tt,s[1]),t.magFilter=fe.enumValue(Tt,s[2])},repeat:t=>{-1!=s[1].indexOf("x")&&(t.uWrap=10497),-1!=s[1].indexOf("y")&&(t.vWrap=10497)},pma:t=>{t.pma="true"==s[1]}},a={xy:t=>{t.x=parseInt(s[1]),t.y=parseInt(s[2])},size:t=>{t.width=parseInt(s[1]),t.height=parseInt(s[2])},bounds:t=>{t.x=parseInt(s[1]),t.y=parseInt(s[2]),t.width=parseInt(s[3]),t.height=parseInt(s[4])},offset:t=>{t.offsetX=parseInt(s[1]),t.offsetY=parseInt(s[2])},orig:t=>{t.originalWidth=parseInt(s[1]),t.originalHeight=parseInt(s[2])},offsets:t=>{t.offsetX=parseInt(s[1]),t.offsetY=parseInt(s[2]),t.originalWidth=parseInt(s[3]),t.originalHeight=parseInt(s[4])},rotate:t=>{var e=s[1];"true"==e?t.degrees=90:"false"!=e&&(t.degrees=parseInt(e))},index:t=>{t.index=parseInt(s[1])}};let i=e.readLine();for(;i&&0==i.trim().length;)i=e.readLine();for(;;){if(!i||0==i.trim().length)break;if(0==e.readEntry(s,i))break;i=e.readLine()}let n=null,o=null,h=null;for(;;){if(null===i)break;if(0==i.trim().length)n=null,i=e.readLine();else if(n){for(var l=new Nt(n,i);;){var c=e.readEntry(s,i=e.readLine());if(0==c)break;var d=a[s[0]];if(d)d(l);else{o=o||[],h=h||[],o.push(s[0]);var u=[];for(let t=0;t<c;t++)u.push(parseInt(s[t+1]));h.push(u)}}0==l.originalWidth&&0==l.originalHeight&&(l.originalWidth=l.width,l.originalHeight=l.height),o&&0<o.length&&h&&0<h.length&&(l.names=o,l.values=h,o=null,h=null),l.u=l.x/n.width,l.v=l.y/n.height,90==l.degrees?(l.u2=(l.x+l.height)/n.width,l.v2=(l.y+l.width)/n.height):(l.u2=(l.x+l.width)/n.width,l.v2=(l.y+l.height)/n.height),this.regions.push(l)}else{for(n=new Xt(i.trim());;){if(0==e.readEntry(s,i=e.readLine()))break;var m=r[s[0]];m&&m(n)}this.pages.push(n)}}}findRegion(e){for(let t=0;t<this.regions.length;t++)if(this.regions[t].name==e)return this.regions[t];return null}setTextures(t,e=""){for(var s of this.pages)s.setTexture(t.get(e+s.name))}dispose(){var e;for(let t=0;t<this.pages.length;t++)null!=(e=this.pages[t].texture)&&e.dispose()}},Yt=class{constructor(t){this.index=0,this.lines=t.split(/\r\n|\r|\n/)}readLine(){return this.index>=this.lines.length?null:this.lines[this.index++]}readEntry(s,r){if(!r)return 0;if(0==(r=r.trim()).length)return 0;var a=r.indexOf(":");if(-1==a)return 0;s[0]=r.substr(0,a).trim();for(let t=1,e=a+1;;t++){var i=r.indexOf(",",e);if(-1==i)return s[t]=r.substr(e).trim(),t;if(s[t]=r.substr(e,i-e).trim(),e=i+1,4==t)return 4}}},Xt=class{constructor(t){this.minFilter=9728,this.magFilter=9728,this.uWrap=33071,this.vWrap=33071,this.texture=null,this.width=0,this.height=0,this.pma=!1,this.regions=new Array,this.name=t}setTexture(t){(this.texture=t).setFilters(this.minFilter,this.magFilter),t.setWraps(this.uWrap,this.vWrap);for(var e of this.regions)e.texture=t}},Nt=class extends Ct{constructor(t,e){super(),this.x=0,this.y=0,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0,this.index=0,this.degrees=0,this.names=null,this.values=null,this.page=t,this.name=e,t.regions.push(this)}},m=class extends P{constructor(t,e){super(t),this.region=null,this.regionUVs=[],this.uvs=[],this.triangles=[],this.color=new pe(1,1,1,1),this.width=0,this.height=0,this.hullLength=0,this.edges=[],this.parentMesh=null,this.sequence=null,this.tempColor=new pe(0,0,0,0),this.path=e}updateRegion(){if(!this.region)throw new Error("Region not set.");var e=this.regionUVs,s=(this.uvs&&this.uvs.length==e.length||(this.uvs=fe.newFloatArray(e.length)),this.uvs),r=this.uvs.length;let a=this.region.u,i=this.region.v,n=0,o=0;if(this.region instanceof Nt){var t=this.region,h=t.page.texture.getImage(),l=h.width,c=h.height;switch(t.degrees){case 90:a-=(t.originalHeight-t.offsetY-t.height)/l,i-=(t.originalWidth-t.offsetX-t.width)/c,n=t.originalHeight/l,o=t.originalWidth/c;for(let t=0;t<r;t+=2)s[t]=a+e[t+1]*n,s[t+1]=i+(1-e[t])*o;return;case 180:a-=(t.originalWidth-t.offsetX-t.width)/l,i-=t.offsetY/c,n=t.originalWidth/l,o=t.originalHeight/c;for(let t=0;t<r;t+=2)s[t]=a+(1-e[t])*n,s[t+1]=i+(1-e[t+1])*o;return;case 270:a-=t.offsetY/l,i-=t.offsetX/c,n=t.originalHeight/l,o=t.originalWidth/c;for(let t=0;t<r;t+=2)s[t]=a+(1-e[t+1])*n,s[t+1]=i+e[t]*o;return}a-=t.offsetX/l,i-=(t.originalHeight-t.offsetY-t.height)/c,n=t.originalWidth/l,o=t.originalHeight/c}else this.region?(n=this.region.u2-a,o=this.region.v2-i):(a=i=0,n=o=1);for(let t=0;t<r;t+=2)s[t]=a+e[t]*n,s[t+1]=i+e[t+1]*o}getParentMesh(){return this.parentMesh}setParentMesh(t){(this.parentMesh=t)&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)}copy(){var t;return this.parentMesh?this.newLinkedMesh():((t=new m(this.name,this.path)).region=this.region,t.color.setFromColor(this.color),this.copyTo(t),t.regionUVs=new Array(this.regionUVs.length),fe.arrayCopy(this.regionUVs,0,t.regionUVs,0,this.regionUVs.length),t.uvs=new Array(this.uvs.length),fe.arrayCopy(this.uvs,0,t.uvs,0,this.uvs.length),t.triangles=new Array(this.triangles.length),fe.arrayCopy(this.triangles,0,t.triangles,0,this.triangles.length),t.hullLength=this.hullLength,t.sequence=null!=this.sequence?this.sequence.copy():null,this.edges&&(t.edges=new Array(this.edges.length),fe.arrayCopy(this.edges,0,t.edges,0,this.edges.length)),t.width=this.width,t.height=this.height,t)}computeWorldVertices(t,e,s,r,a,i){null!=this.sequence&&this.sequence.apply(t,this),super.computeWorldVertices(t,e,s,r,a,i)}newLinkedMesh(){var t=new m(this.name,this.path);return t.region=this.region,t.color.setFromColor(this.color),t.timelineAttachment=this.timelineAttachment,t.setParentMesh(this.parentMesh||this),null!=t.region&&t.updateRegion(),t}},l=class extends P{constructor(t){super(t),this.lengths=[],this.closed=!1,this.constantSpeed=!1,this.color=new pe(1,1,1,1)}copy(){var t=new l(this.name);return this.copyTo(t),t.lengths=new Array(this.lengths.length),fe.arrayCopy(this.lengths,0,t.lengths,0,this.lengths.length),t.closed=closed,t.constantSpeed=this.constantSpeed,t.color.setFromColor(this.color),t}},_t=class extends P{constructor(t){super(t),this.x=0,this.y=0,this.rotation=0,this.color=new pe(.38,.94,0,1)}computeWorldPosition(t,e){return e.x=this.x*t.a+this.y*t.b+t.worldX,e.y=this.x*t.c+this.y*t.d+t.worldY,e}computeWorldRotation(t){var e=q.cosDeg(this.rotation),s=q.sinDeg(this.rotation),r=e*t.a+s*t.b,e=e*t.c+s*t.d;return Math.atan2(e,r)*q.radDeg}copy(){var t=new _t(this.name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t}},Lt=class extends Y{constructor(t,e){super(t),this.x=0,this.y=0,this.scaleX=1,this.scaleY=1,this.rotation=0,this.width=0,this.height=0,this.color=new pe(1,1,1,1),this.region=null,this.sequence=null,this.offset=fe.newFloatArray(8),this.uvs=fe.newFloatArray(8),this.tempColor=new pe(1,1,1,1),this.path=e}updateRegion(){if(!this.region)throw new Error("Region not set.");var t,e,s,r,a,i,n,o,h,l,c,d,u=this.region,m=this.uvs;null==u?(m[0]=0,m[1]=0,m[2]=0,m[3]=1,m[4]=1,m[5]=1,m[6]=1,m[7]=0):(h=this.width/this.region.originalWidth*this.scaleX,c=this.height/this.region.originalHeight*this.scaleY,r=-this.width/2*this.scaleX+this.region.offsetX*h,t=-this.height/2*this.scaleY+this.region.offsetY*c,h=r+this.region.width*h,c=t+this.region.height*c,e=this.rotation*Math.PI/180,n=Math.cos(e),e=Math.sin(e),s=this.x,a=r*e,i=t*n+(l=this.y),o=h*n+s,h*=e,l=c*n+l,c*=e,(d=this.offset)[0]=(r=r*n+s)-(n=t*e),d[1]=i+a,d[2]=r-c,d[3]=l+a,d[4]=o-c,d[5]=l+h,d[6]=o-n,d[7]=i+h,90==u.degrees?(m[0]=u.u2,m[1]=u.v2,m[2]=u.u,m[3]=u.v2,m[4]=u.u,m[5]=u.v,m[6]=u.u2,m[7]=u.v):(m[0]=u.u,m[1]=u.v2,m[2]=u.u,m[3]=u.v,m[4]=u.u2,m[5]=u.v,m[6]=u.u2,m[7]=u.v2))}computeWorldVertices(t,e,s,r){null!=this.sequence&&this.sequence.apply(t,this);var t=t.bone,a=this.offset,i=t.worldX,n=t.worldY,o=t.a,h=t.b,l=t.c,t=t.d,c=a[0],d=a[1];e[s]=c*o+d*h+i,e[s+1]=c*l+d*t+n,c=a[2],d=a[3],e[s+=r]=c*o+d*h+i,e[s+1]=c*l+d*t+n,c=a[4],d=a[5],e[s+=r]=c*o+d*h+i,e[s+1]=c*l+d*t+n,c=a[6],d=a[7],e[s+=r]=c*o+d*h+i,e[s+1]=c*l+d*t+n}copy(){var t=new Lt(this.name,this.path);return t.region=this.region,t.x=this.x,t.y=this.y,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.rotation=this.rotation,t.width=this.width,t.height=this.height,fe.arrayCopy(this.uvs,0,t.uvs,0,8),fe.arrayCopy(this.offset,0,t.offset,0,8),t.color.setFromColor(this.color),t.sequence=null!=this.sequence?this.sequence.copy():null,t}},p=Lt,Pt=(p.X1=0,p.Y1=1,p.C1R=2,p.C1G=3,p.C1B=4,p.C1A=5,p.U1=6,p.V1=7,p.X2=8,p.Y2=9,p.C2R=10,p.C2G=11,p.C2B=12,p.C2A=13,p.U2=14,p.V2=15,p.X3=16,p.Y3=17,p.C3R=18,p.C3G=19,p.C3B=20,p.C3A=21,p.U3=22,p.V3=23,p.X4=24,p.Y4=25,p.C4R=26,p.C4G=27,p.C4B=28,p.C4A=29,p.U4=30,p.V4=31,class{constructor(t){this.atlas=t}loadSequence(s,r,a){var i=a.regions;for(let t=0,e=i.length;t<e;t++){var n=a.getPath(r,t),o=this.atlas.findRegion(n);if(null==o)throw new Error("Region not found in atlas: "+n+" (sequence: "+s+")");i[t]=o}}newRegionAttachment(t,e,s,r){var a=new p(e,s);if(null!=r)this.loadSequence(e,s,r);else{r=this.atlas.findRegion(s);if(!r)throw new Error("Region not found in atlas: "+s+" (region attachment: "+e+")");a.region=r}return a}newMeshAttachment(t,e,s,r){var a=new m(e,s);if(null!=r)this.loadSequence(e,s,r);else{r=this.atlas.findRegion(s);if(!r)throw new Error("Region not found in atlas: "+s+" (mesh attachment: "+e+")");a.region=r}return a}newBoundingBoxAttachment(t,e){return new Et(e)}newPathAttachment(t,e){return new l(e)}newPointAttachment(t,e){return new _t(e)}newClippingAttachment(t,e){return new St(e)}}),Bt=class{constructor(t,e,s){if(this.index=0,this.parent=null,this.length=0,this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=Dt.Normal,this.skinRequired=!1,this.color=new pe,t<0)throw new Error("index must be >= 0.");if(!e)throw new Error("name cannot be null.");this.index=t,this.name=e,this.parent=s}},Dt=(t=>(t[t.Normal=0]="Normal",t[t.OnlyTranslation=1]="OnlyTranslation",t[t.NoRotationOrReflection=2]="NoRotationOrReflection",t[t.NoScale=3]="NoScale",t[t.NoScaleOrReflection=4]="NoScaleOrReflection",t))(Dt||{}),Ot=class{constructor(t,e,s){if(this.parent=null,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.a=0,this.b=0,this.c=0,this.d=0,this.worldY=0,this.worldX=0,this.sorted=!1,this.active=!1,!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=s,this.setToSetupPose()}isActive(){return this.active}update(){this.updateWorldTransformWith(this.ax,this.ay,this.arotation,this.ascaleX,this.ascaleY,this.ashearX,this.ashearY)}updateWorldTransform(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)}updateWorldTransformWith(t,i,n,o,h,l,c){this.ax=t,this.ay=i,this.arotation=n,this.ascaleX=o,this.ascaleY=h,this.ashearX=l,this.ashearY=c;var e,s,r,d=this.parent;if(d){let e=d.a,s=d.b,r=d.c,a=d.d;switch(this.worldX=e*t+s*i+d.worldX,this.worldY=r*t+a*i+d.worldY,this.data.transformMode){case 0:var u=n+90+c,m=q.cosDeg(n+l)*o,p=q.cosDeg(u)*h,f=q.sinDeg(n+l)*o,u=q.sinDeg(u)*h;return this.a=e*m+s*f,this.b=e*p+s*u,this.c=r*m+a*f,void(this.d=r*p+a*u);case 1:m=n+90+c;this.a=q.cosDeg(n+l)*o,this.b=q.cosDeg(m)*h,this.c=q.sinDeg(n+l)*o,this.d=q.sinDeg(m)*h;break;case 2:{f=e*e+r*r;let t=0;p=n+l-(t=1e-4<f?(f=Math.abs(e*a-s*r)/f,e/=this.skeleton.scaleX,r/=this.skeleton.scaleY,s=r*f,a=e*f,Math.atan2(r,e)*q.radDeg):(e=0,r=0,90-Math.atan2(a,s)*q.radDeg)),u=n+c-t+90,m=q.cosDeg(p)*o,f=q.cosDeg(u)*h,p=q.sinDeg(p)*o,u=q.sinDeg(u)*h;this.a=e*m-s*p,this.b=e*f-s*u,this.c=r*m+a*p,this.d=r*f+a*u;break}case 3:case 4:{m=q.cosDeg(n),p=q.sinDeg(n),f=(e*m+s*p)/this.skeleton.scaleX,u=(r*m+a*p)/this.skeleton.scaleY;let t=Math.sqrt(f*f+u*u);f*=t=1e-5<t?1/t:t,u*=t,t=Math.sqrt(f*f+u*u),3==this.data.transformMode&&e*a-s*r<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(t=-t);var m=Math.PI/2+Math.atan2(u,f),p=Math.cos(m)*t,m=Math.sin(m)*t,g=q.cosDeg(l)*o,v=q.cosDeg(90+c)*h,x=q.sinDeg(l)*o,w=q.sinDeg(90+c)*h;this.a=f*g+p*x,this.b=f*v+p*w,this.c=u*g+m*x,this.d=u*v+m*w;break}}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY}else d=n+90+c,s=(e=this.skeleton).scaleX,r=e.scaleY,this.a=q.cosDeg(n+l)*o*s,this.b=q.cosDeg(d)*h*s,this.c=q.sinDeg(n+l)*o*r,this.d=q.sinDeg(d)*h*r,this.worldX=t*s+e.x,this.worldY=i*r+e.y}setToSetupPose(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY}getWorldRotationX(){return Math.atan2(this.c,this.a)*q.radDeg}getWorldRotationY(){return Math.atan2(this.d,this.b)*q.radDeg}getWorldScaleX(){return Math.sqrt(this.a*this.a+this.c*this.c)}getWorldScaleY(){return Math.sqrt(this.b*this.b+this.d*this.d)}updateAppliedTransform(){var t,e,s,r,a,i,n=this.parent;n?(r=n.a,s=n.b,i=n.c,e=n.d,t=this.worldX-n.worldX,n=this.worldY-n.worldY,this.ax=t*e*(a=1/(r*e-s*i))-n*s*a,this.ay=n*r*a-t*i*a,e=(n=a*e)*this.a-(t=a*s)*this.c,s=n*this.b-t*this.d,r=(n=a*r)*this.c-(t=a*i)*this.a,a=n*this.d-t*this.b,this.ashearX=0,this.ascaleX=Math.sqrt(e*e+r*r),1e-4<this.ascaleX?(this.ascaleY=(i=e*a-s*r)/this.ascaleX,this.ashearY=Math.atan2(e*s+r*a,i)*q.radDeg,this.arotation=Math.atan2(r,e)*q.radDeg):(this.ascaleX=0,this.ascaleY=Math.sqrt(s*s+a*a),this.ashearY=0,this.arotation=90-Math.atan2(a,s)*q.radDeg)):(this.ax=this.worldX-this.skeleton.x,this.ay=this.worldY-this.skeleton.y,this.arotation=Math.atan2(this.c,this.a)*q.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*q.radDeg)}worldToLocal(t){var e=1/(this.a*this.d-this.b*this.c),s=t.x-this.worldX,r=t.y-this.worldY;return t.x=s*this.d*e-r*this.b*e,t.y=r*this.a*e-s*this.c*e,t}localToWorld(t){var e=t.x,s=t.y;return t.x=e*this.a+s*this.b+this.worldX,t.y=e*this.c+s*this.d+this.worldY,t}worldToLocalRotation(t){var e=q.sinDeg(t),t=q.cosDeg(t);return Math.atan2(this.a*e-this.c*t,this.d*t-this.b*e)*q.radDeg+this.rotation-this.shearX}localToWorldRotation(t){t-=this.rotation-this.shearX;var e=q.sinDeg(t),t=q.cosDeg(t);return Math.atan2(t*this.c+e*this.d,t*this.a+e*this.b)*q.radDeg}rotateWorld(t){var e=this.a,s=this.b,r=this.c,a=this.d,i=q.cosDeg(t),t=q.sinDeg(t);this.a=i*e-t*r,this.b=i*s-t*a,this.c=t*e+i*r,this.d=t*s+i*a}},$t=class{constructor(t,e,s){this.name=t,this.order=e,this.skinRequired=s}},Vt=class{constructor(t,e="",s=new Ut){this.pathPrefix="",this.assets={},this.errors={},this.toLoad=0,this.loaded=0,this.textureLoader=t,this.pathPrefix=e,this.downloader=s}start(t){return this.toLoad++,this.pathPrefix+t}success(t,e,s){this.toLoad--,this.loaded++,this.assets[e]=s,t&&t(e,s)}error(t,e,s){this.toLoad--,this.loaded++,this.errors[e]=s,t&&t(e,s)}loadAll(){return new Promise((t,e)=>{let s=()=>{this.isLoadingComplete()?this.hasErrors()?e(this.errors):t(this):requestAnimationFrame(s)};requestAnimationFrame(s)})}setRawDataURI(t,e){this.downloader.rawDataUris[this.pathPrefix+t]=e}loadBinary(s,e=()=>{},r=()=>{}){s=this.start(s),this.downloader.downloadBinary(s,t=>{this.success(e,s,t)},(t,e)=>{this.error(r,s,`Couldn't load binary ${s}: status ${t}, `+e)})}loadText(s,e=()=>{},r=()=>{}){s=this.start(s),this.downloader.downloadText(s,t=>{this.success(e,s,t)},(t,e)=>{this.error(r,s,`Couldn't load text ${s}: status ${t}, `+e)})}loadJson(s,e=()=>{},r=()=>{}){s=this.start(s),this.downloader.downloadJson(s,t=>{this.success(e,s,t)},(t,e)=>{this.error(r,s,`Couldn't load JSON ${s}: status ${t}, `+e)})}loadTexture(e,s=()=>{},r=()=>{}){if(e=this.start(e),!!("undefined"==typeof window||"undefined"==typeof navigator||!window.document))fetch(e,{mode:"cors"}).then(t=>t.ok?t.blob():(this.error(r,e,"Couldn't load image: "+e),null)).then(t=>t?createImageBitmap(t,{premultiplyAlpha:"none",colorSpaceConversion:"none"}):null).then(t=>{t&&this.success(s,e,this.textureLoader(t))});else{let t=new Image;t.crossOrigin="anonymous",t.onload=()=>{this.success(s,e,this.textureLoader(t))},t.onerror=()=>{this.error(r,e,"Couldn't load image: "+e)},this.downloader.rawDataUris[e]&&(e=this.downloader.rawDataUris[e]),t.src=e}}loadTextureAtlas(n,o=()=>{},h=()=>{},e){var t=n.lastIndexOf("/");let l=0<=t?n.substring(0,t+1):"";n=this.start(n),this.downloader.downloadText(n,t=>{try{let r=new Ft(t),a=r.pages.length,i=!1;for(let s of r.pages)this.loadTexture(e?e[s.name]:l+s.name,(t,e)=>{i||(s.setTexture(e),0==--a&&this.success(o,n,r))},(t,e)=>{i||this.error(h,n,`Couldn't load texture atlas ${n} page image: `+t),i=!0})}catch(t){this.error(h,n,`Couldn't parse texture atlas ${n}: `+t.message)}},(t,e)=>{this.error(h,n,`Couldn't load texture atlas ${n}: status ${t}, `+e)})}get(t){return this.assets[this.pathPrefix+t]}require(t){t=this.pathPrefix+t;var e=this.assets[t];if(e)return e;e=this.errors[t];throw Error("Asset not found: "+t+(e?"\n"+e:""))}remove(t){t=this.pathPrefix+t;var e=this.assets[t];return e.dispose&&e.dispose(),delete this.assets[t],e}removeAll(){for(var t in this.assets){t=this.assets[t];t.dispose&&t.dispose()}this.assets={}}isLoadingComplete(){return 0==this.toLoad}getToLoad(){return this.toLoad}getLoaded(){return this.loaded}dispose(){this.removeAll()}hasErrors(){return 0<Object.keys(this.errors).length}getErrors(){return this.errors}},Ut=class{constructor(){this.callbacks={},this.rawDataUris={}}dataUriToString(t){var e;if(t.startsWith("data:"))return-1!=(e=t.indexOf("base64,"))?(e+="base64,".length,atob(t.substr(e))):t.substr(t.indexOf(",")+1);throw new Error("Not a data URI.")}base64ToUint8Array(t){for(var e=window.atob(t),s=e.length,r=new Uint8Array(s),a=0;a<s;a++)r[a]=e.charCodeAt(a);return r}dataUriToUint8Array(t){if(!t.startsWith("data:"))throw new Error("Not a data URI.");var e=t.indexOf("base64,");if(-1==e)throw new Error("Not a binary data URI.");return this.base64ToUint8Array(t.substr(e+="base64,".length))}downloadText(e,s,t){if(!this.start(e,s,t))if(this.rawDataUris[e])try{var r=this.rawDataUris[e];this.finish(e,200,this.dataUriToString(r))}catch(t){this.finish(e,400,JSON.stringify(t))}else{let t=new XMLHttpRequest;t.overrideMimeType("text/html"),t.open("GET",e,!0);s=()=>{this.finish(e,t.status,t.responseText)};t.onload=s,t.onerror=s,t.send()}}downloadJson(t,e,s){this.downloadText(t,t=>{e(JSON.parse(t))},s)}downloadBinary(s,t,e){if(!this.start(s,t,e))if(this.rawDataUris[s])try{var r=this.rawDataUris[s];this.finish(s,200,this.dataUriToUint8Array(r))}catch(t){this.finish(s,400,JSON.stringify(t))}else{let t=new XMLHttpRequest,e=(t.open("GET",s,!0),t.responseType="arraybuffer",()=>{this.finish(s,t.status,t.response)});t.onload=()=>{200==t.status||0==t.status?this.finish(s,200,new Uint8Array(t.response)):e()},t.onerror=e,t.send()}}start(t,e,s){let r=this.callbacks[t];try{if(r)return!0;this.callbacks[t]=r=[]}finally{r.push(e,s)}}finish(t,e,s){var r=this.callbacks[t],a=(delete this.callbacks[t],200==e||0==e?[s]:[e,s]);for(let t=a.length-1,e=r.length;t<e;t+=2)r[t].apply(null,a)}},je=class{constructor(t,e){if(this.intValue=0,this.floatValue=0,this.stringValue=null,this.time=0,this.volume=0,this.balance=0,!e)throw new Error("data cannot be null.");this.time=t,this.data=e}},qt=class{constructor(t){this.intValue=0,this.floatValue=0,this.stringValue=null,this.audioPath=null,this.volume=0,this.balance=0,this.name=t}},Wt=class{constructor(e,s){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,!e)throw new Error("data cannot be null.");if(!s)throw new Error("skeleton cannot be null.");this.data=e,this.mix=e.mix,this.softness=e.softness,this.bendDirection=e.bendDirection,this.compress=e.compress,this.stretch=e.stretch,this.bones=new Array;for(let t=0;t<e.bones.length;t++){var r=s.findBone(e.bones[t].name);if(!r)throw new Error("Couldn't find bone "+e.bones[t].name);this.bones.push(r)}var t=s.findBone(e.target.name);if(!t)throw new Error("Couldn't find bone "+e.target.name);this.target=t}isActive(){return this.active}update(){if(0!=this.mix){var t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.data.uniform,this.softness,this.mix)}}}apply1(t,e,s,r,a,i,n){var o=t.parent;if(!o)throw new Error("IK bone must have parent.");let h=o.a,l=o.b,c=o.c,d=o.d,u=-t.ashearX-t.arotation,m=0,p=0;switch(t.data.transformMode){case 1:m=e-t.worldX,p=s-t.worldY;break;case 2:var f=Math.abs(h*d-l*c)/Math.max(1e-4,h*h+c*c),g=h/t.skeleton.scaleX,v=c/t.skeleton.scaleY;l=-v*f*t.skeleton.scaleX,d=g*f*t.skeleton.scaleY,u+=Math.atan2(v,g)*q.radDeg;default:f=e-o.worldX,v=s-o.worldY,g=h*d-l*c;p=Math.abs(g)<=1e-4?m=0:(m=(f*d-v*l)/g-t.ax,(v*h-f*c)/g-t.ay)}u+=Math.atan2(p,m)*q.radDeg,t.ascaleX<0&&(u+=180),180<u?u-=360:u<-180&&(u+=360);let x=t.ascaleX,w=t.ascaleY;if(r||a){switch(t.data.transformMode){case 3:case 4:m=e-t.worldX,p=s-t.worldY}var b=t.data.length*x,y=Math.sqrt(m*m+p*p);(r&&y<b||a&&b<y&&1e-4<b)&&(r=(y/b-1)*n+1,x*=r,i)&&(w*=r)}t.updateWorldTransformWith(t.ax,t.ay,t.arotation+u*n,x,w,t.ashearX,t.ashearY)}apply2(t,e,s,r,d,a,B,i,n){let o=t.ax,u=t.ay,m=t.ascaleX,p=t.ascaleY,D=m,O=p,f=e.ascaleX,g=0,$=0,v=0,x=(v=m<0?(m=-m,g=180,-1):(g=0,1),p<0&&(p=-p,v=-v),$=f<0?(f=-f,180):0,e.ax),w=0,h=0,l=0,b=t.a,y=t.b,A=t.c,I=t.d;var V=Math.abs(m-p)<=1e-4,E=(l=!V||a?(w=0,h=b*x+t.worldX,A*x+t.worldY):(w=e.ay,h=b*x+y*w+t.worldX,A*x+I*w+t.worldY),t.parent);if(!E)throw new Error("IK parent must itself have a parent.");b=E.a,y=E.b,A=E.c,I=E.d;let S=b*I-y*A,k=h-E.worldX,T=l-E.worldY;S=Math.abs(S)<=1e-4?0:1/S;var R=(k*I-T*y)*S-o,C=(T*b-k*A)*S-u;let M=Math.sqrt(R*R+C*C),F=e.data.length*f,Y,X;if(M<1e-4)this.apply1(t,s,r,!1,a,!1,n),e.updateWorldTransformWith(x,w,0,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY);else{let h=((k=s-E.worldX)*I-(T=r-E.worldY)*y)*S-o,l=(T*b-k*A)*S-u,c=h*h+l*l;0!=i&&(i*=m*(f+1)*.5,0<(C=(R=Math.sqrt(c))-M-F*m+i))&&(s=(C-i*(1-(s=Math.min(1,C/(2*i))-1)*s))/R,h-=s*h,l-=s*l,c=h*h+l*l);t:if(V){F*=m;let t=(c-M*M-F*F)/(2*M*F);t<-1?(t=-1,X=Math.PI*d):1<t?(t=1,X=0,a&&(b=(Math.sqrt(c)/(M+F)-1)*n+1,D*=b,B)&&(O*=b)):X=Math.acos(t)*d,b=M+F*t,y=F*Math.sin(X),Y=Math.atan2(l*b-h*y,h*b+l*y)}else{b=m*F,y=p*F;var N=b*b,_=y*y,U=Math.atan2(l,h),L=-2*_*M,P=_-N;if(0<=(I=L*L-4*P*(A=_*M*M+N*c-N*_))){let t=Math.sqrt(I);L=(t=.5*-(L+(t=L<0?-t:t)))/P,P=A/t,L=Math.abs(L)<Math.abs(P)?L:P;if(L*L<=c){T=Math.sqrt(c-L*L)*d,Y=U-Math.atan2(T,L),X=Math.atan2(T/p,(L-M)/m);break t}}let t=q.PI,e=M-b,s=e*e,r=0,a=0,i=M+b,n=i*i,o=0;-1<=(A=-b*M/(N-_))&&A<=1&&(A=Math.acos(A),(I=(k=b*Math.cos(A)+M)*k+(T=y*Math.sin(A))*T)<s&&(t=A,s=I,e=k,r=T),I>n)&&(a=A,n=I,i=k,o=T),X=c<=.5*(s+n)?(Y=U-Math.atan2(r*d,e),t*d):(Y=U-Math.atan2(o*d,i),a*d)}r=Math.atan2(w,x)*v,E=t.arotation;180<(Y=(Y-r)*q.radDeg+g-E)?Y-=360:Y<-180&&(Y+=360),t.updateWorldTransformWith(o,u,E+Y*n,D,O,0,0),E=e.arotation,180<(X=((X+r)*q.radDeg-e.ashearX)*v+$-E)?X-=360:X<-180&&(X+=360),e.updateWorldTransformWith(x,w,E+X*n,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)}}},jt=class extends $t{constructor(t){super(t,0,!1),this.bones=new Array,this._target=null,this.bendDirection=1,this.compress=!1,this.stretch=!1,this.uniform=!1,this.mix=1,this.softness=0}set target(t){this._target=t}get target(){if(this._target)return this._target;throw new Error("BoneData not set.")}},zt=class extends $t{constructor(t){super(t,0,!1),this.bones=new Array,this._target=null,this.positionMode=Gt.Fixed,this.spacingMode=te.Fixed,this.rotateMode=ee.Chain,this.offsetRotation=0,this.position=0,this.spacing=0,this.mixRotate=0,this.mixX=0,this.mixY=0}set target(t){this._target=t}get target(){if(this._target)return this._target;throw new Error("SlotData not set.")}},Gt=(t=>(t[t.Fixed=0]="Fixed",t[t.Percent=1]="Percent",t))(Gt||{}),te=(t=>(t[t.Length=0]="Length",t[t.Fixed=1]="Fixed",t[t.Percent=2]="Percent",t[t.Proportional=3]="Proportional",t))(te||{}),ee=(t=>(t[t.Tangent=0]="Tangent",t[t.Chain=1]="Chain",t[t.ChainScale=2]="ChainScale",t))(ee||{}),V=class{constructor(s,r){if(this.position=0,this.spacing=0,this.mixRotate=0,this.mixX=0,this.mixY=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,!s)throw new Error("data cannot be null.");if(!r)throw new Error("skeleton cannot be null.");this.data=s,this.bones=new Array;for(let t=0,e=s.bones.length;t<e;t++){var a=r.findBone(s.bones[t].name);if(!a)throw new Error(`Couldn't find bone ${s.bones[t].name}.`);this.bones.push(a)}var t=r.findSlot(s.target.name);if(!t)throw new Error("Couldn't find target bone "+s.target.name);this.target=t,this.position=s.position,this.spacing=s.spacing,this.mixRotate=s.mixRotate,this.mixX=s.mixX,this.mixY=s.mixY}isActive(){return this.active}update(){var t=this.target.getAttachment();if(t instanceof l){var m=this.mixRotate,e=this.mixX,s=this.mixY;if(0!=m||0!=e||0!=s){var r=this.data,p=0==r.rotateMode,a=2==r.rotateMode,i=this.bones,n=i.length,o=p?n:n+1,f=fe.setArraySize(this.spaces,o),g=a?this.lengths=fe.setArraySize(this.lengths,n):[],h=this.spacing;switch(r.spacingMode){case 2:if(a)for(let t=0,e=o-1;t<e;t++){var v,x=i[t],w=x.data.length;w<V.epsilon?g[t]=0:(v=w*x.a,w=w*x.c,g[t]=Math.sqrt(v*v+w*w))}fe.arrayFill(f,1,o,h);break;case 3:let s=0;for(let t=0,e=o-1;t<e;){var b,y=i[t],A=y.data.length;A<V.epsilon?(a&&(g[t]=0),f[++t]=h):(b=A*y.a,A=A*y.c,y=Math.sqrt(b*b+A*A),a&&(g[t]=y),f[++t]=y,s+=y)}if(0<s){s=o/s*h;for(let t=1;t<o;t++)f[t]*=s}break;default:var I=0==r.spacingMode;for(let t=0,e=o-1;t<e;){var E,S=i[t],k=S.data.length;k<V.epsilon?(a&&(g[t]=0),f[++t]=h):(E=k*S.a,S=k*S.c,E=Math.sqrt(E*E+S*S),a&&(g[t]=E),f[++t]=(I?k+h:h)*E/k)}}var T=this.computeWorldPositions(t,o,p);let l=T[0],c=T[1],d=r.offsetRotation,u=!1;0==d?u=1==r.rotateMode:(u=!1,t=this.target.bone,d*=0<t.a*t.d-t.b*t.c?q.degRad:-q.degRad);for(let o=0,h=3;o<n;o++,h+=3){var R,C=i[o],M=(C.worldX+=(l-C.worldX)*e,C.worldY+=(c-C.worldY)*s,T[h]),F=T[h+1],Y=M-l,X=F-c;if(a&&0!=(R=g[o])&&(R=(Math.sqrt(Y*Y+X*X)/R-1)*m+1,C.a*=R,C.c*=R),l=M,c=F,0<m){let t=C.a,e=C.b,s=C.c,r=C.d,a=0,i=0,n=0;a=p?T[h-1]:0==f[o+1]?T[h+2]:Math.atan2(X,Y),a-=Math.atan2(s,t),u?(i=Math.cos(a),n=Math.sin(a),R=C.data.length,l+=(R*(i*t-n*s)-Y)*m,c+=(R*(n*t+i*s)-X)*m):a+=d,a>q.PI?a-=q.PI2:a<-q.PI&&(a+=q.PI2),a*=m,i=Math.cos(a),n=Math.sin(a),C.a=i*t-n*s,C.b=i*e-n*r,C.c=n*t+i*s,C.d=n*e+i*r}C.updateAppliedTransform()}}}}computeWorldPositions(E,t,S){var k=this.target;let T=this.position,R=this.spaces,C=fe.setArraySize(this.positions,3*t+2),M=this.world;var F=E.closed;let Y=E.worldVerticesLength,X=Y/6,N=V.NONE;if(E.constantSpeed){F?(Y+=2,M=fe.setArraySize(this.world,Y),E.computeWorldVertices(k,2,Y-4,M,0,2),E.computeWorldVertices(k,0,2,M,Y-4,2),M[Y-2]=M[0],M[Y-1]=M[1]):(X--,Y-=4,M=fe.setArraySize(this.world,Y),E.computeWorldVertices(k,2,Y,M,0,2));var _=fe.setArraySize(this.curves,X);let i=0,n=M[0],o=M[1],h=0,l=0,c=0,d=0,u=0,m=0,p=0,f=0,g=0,v=0,x=0,w=0,b=0,y=0;for(let t=0,e=2;t<X;t++,e+=6)h=M[e],l=M[e+1],c=M[e+2],d=M[e+3],u=M[e+4],m=M[e+5],p=.1875*(n-2*h+c),f=.1875*(o-2*l+d),g=.09375*(3*(h-c)-n+u),v=.09375*(3*(l-d)-o+m),x=2*p+g,w=2*f+v,b=.75*(h-n)+p+.16666667*g,y=.75*(l-o)+f+.16666667*v,i+=Math.sqrt(b*b+y*y),b+=x,y+=w,x+=g,w+=v,i+=Math.sqrt(b*b+y*y),b+=x,y+=w,i+=Math.sqrt(b*b+y*y),b+=x+g,y+=w+v,i+=Math.sqrt(b*b+y*y),_[t]=i,n=u,o=m;1==this.data.positionMode&&(T*=i);let A;switch(this.data.spacingMode){case 2:A=i;break;case 3:A=i/t;break;default:A=1}var L=this.segments;let I=0;for(let e=0,s=0,r=0,a=0;e<t;e++,s+=3){var P=R[e]*A;let t=T+=P;if(F)(t%=i)<0&&(t+=i),r=0;else{if(t<0){this.addBeforePosition(t,M,0,C,s);continue}if(t>i){this.addAfterPosition(t-i,M,Y-4,C,s);continue}}for(;;r++){var B,D=_[r];if(!(t>D)){0==r?t/=D:(B=_[r-1],t=(t-B)/(D-B));break}}if(r!=N){let t=6*(N=r);for(n=M[t],o=M[t+1],h=M[t+2],l=M[t+3],c=M[t+4],d=M[t+5],u=M[t+6],m=M[t+7],p=.03*(n-2*h+c),f=.03*(o-2*l+d),g=.006*(3*(h-c)-n+u),v=.006*(3*(l-d)-o+m),x=2*p+g,w=2*f+v,b=.3*(h-n)+p+.16666667*g,y=.3*(l-o)+f+.16666667*v,I=Math.sqrt(b*b+y*y),L[0]=I,t=1;t<8;t++)b+=x,y+=w,x+=g,w+=v,I+=Math.sqrt(b*b+y*y),L[t]=I;b+=x,y+=w,I+=Math.sqrt(b*b+y*y),L[8]=I,b+=x+g,y+=w+v,I+=Math.sqrt(b*b+y*y),L[9]=I,a=0}for(t*=I;;a++){var O,$=L[a];if(!(t>$)){0==a?t/=$:(O=L[a-1],t=a+(t-O)/($-O));break}}this.addCurvePosition(.1*t,n,o,h,l,c,d,u,m,C,s,S||0<e&&0==P)}}else{var i=E.lengths,n=i[X-=F?1:2];1==this.data.positionMode&&(T*=n);let a;switch(this.data.spacingMode){case 2:a=n;break;case 3:a=n/t;break;default:a=1}M=fe.setArraySize(this.world,8);for(let e=0,s=0,r=0;e<t;e++,s+=3){var o=R[e]*a;let t=T+=o;if(F)(t%=n)<0&&(t+=n),r=0;else{if(t<0){N!=V.BEFORE&&(N=V.BEFORE,E.computeWorldVertices(k,2,4,M,0,2)),this.addBeforePosition(t,M,0,C,s);continue}if(t>n){N!=V.AFTER&&(N=V.AFTER,E.computeWorldVertices(k,Y-6,4,M,0,2)),this.addAfterPosition(t-n,M,0,C,s);continue}}for(;;r++){var h,l=i[r];if(!(t>l)){0==r?t/=l:(h=i[r-1],t=(t-h)/(l-h));break}}r!=N&&(N=r,F&&r==X?(E.computeWorldVertices(k,Y-4,4,M,0,2),E.computeWorldVertices(k,0,4,M,4,2)):E.computeWorldVertices(k,6*r+2,8,M,0,2)),this.addCurvePosition(t,M[0],M[1],M[2],M[3],M[4],M[5],M[6],M[7],C,s,S||0<e&&0==o)}}return C}addBeforePosition(t,e,s,r,a){var i=e[s],n=e[s+1],o=e[s+2]-i,e=e[s+3]-n,s=Math.atan2(e,o);r[a]=i+t*Math.cos(s),r[a+1]=n+t*Math.sin(s),r[a+2]=s}addAfterPosition(t,e,s,r,a){var i=e[s+2],n=e[s+3],o=i-e[s],e=n-e[s+1],s=Math.atan2(e,o);r[a]=i+t*Math.cos(s),r[a+1]=n+t*Math.sin(s),r[a+2]=s}addCurvePosition(t,e,s,r,a,i,n,o,h,l,c,d){var u,m,p,f,g,v,x;0==t||isNaN(t)?(l[c]=e,l[c+1]=s,l[c+2]=Math.atan2(a-s,r-e)):(x=s*(v=(m=(p=1-t)*p)*p)+a*(f=p*(g=3*(p=p*t)))+n*(g=g*t)+h*(u=(h=t*t)*t),l[c]=v=e*v+r*f+i*g+o*u,l[c+1]=x,d&&(l[c+2]=t<.001?Math.atan2(a-s,r-e):Math.atan2(x-(s*m+a*p*2+n*h),v-(e*m+r*p*2+i*h))))}},c=V,se=(c.NONE=-1,c.BEFORE=-2,c.AFTER=-3,c.epsilon=1e-5,class{constructor(t,e){if(this.darkColor=null,this.attachment=null,this.attachmentState=0,this.sequenceIndex=-1,this.deform=new Array,!t)throw new Error("data cannot be null.");if(!e)throw new Error("bone cannot be null.");this.data=t,this.bone=e,this.color=new pe,this.darkColor=t.darkColor?new pe:null,this.setToSetupPose()}getSkeleton(){return this.bone.skeleton}getAttachment(){return this.attachment}setAttachment(t){this.attachment!=t&&(t instanceof P&&this.attachment instanceof P&&t.timelineAttachment==this.attachment.timelineAttachment||(this.deform.length=0),this.attachment=t,this.sequenceIndex=-1)}setToSetupPose(){this.color.setFromColor(this.data.color),this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName?(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName))):this.attachment=null}}),re=class{constructor(e,s){if(this.mixRotate=0,this.mixX=0,this.mixY=0,this.mixScaleX=0,this.mixScaleY=0,this.mixShearY=0,this.temp=new i,this.active=!1,!e)throw new Error("data cannot be null.");if(!s)throw new Error("skeleton cannot be null.");this.data=e,this.mixRotate=e.mixRotate,this.mixX=e.mixX,this.mixY=e.mixY,this.mixScaleX=e.mixScaleX,this.mixScaleY=e.mixScaleY,this.mixShearY=e.mixShearY,this.bones=new Array;for(let t=0;t<e.bones.length;t++){var r=s.findBone(e.bones[t].name);if(!r)throw new Error(`Couldn't find bone ${e.bones[t].name}.`);this.bones.push(r)}var t=s.findBone(e.target.name);if(!t)throw new Error(`Couldn't find target bone ${e.target.name}.`);this.target=t}isActive(){return this.active}update(){0==this.mixRotate&&0==this.mixX&&0==this.mixY&&0==this.mixScaleX&&0==this.mixScaleY&&0==this.mixShearY||(this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld())}applyAbsoluteWorld(){var s=this.mixRotate,r=this.mixX,a=this.mixY,i=this.mixScaleX,n=this.mixScaleY,o=this.mixShearY,h=0!=r||0!=a,l=this.target,c=l.a,d=l.b,u=l.c,m=l.d,t=0<c*m-d*u?q.degRad:-q.degRad,p=this.data.offsetRotation*t,f=this.data.offsetShearY*t,g=this.bones;for(let t=0,e=g.length;t<e;t++){var v=g[t];if(0!=s){var x=v.a,w=v.b,b=v.c,y=v.d;let t=Math.atan2(u,c)-Math.atan2(b,x)+p;t>q.PI?t-=q.PI2:t<-q.PI&&(t+=q.PI2),t*=s;var A=Math.cos(t),I=Math.sin(t);v.a=A*x-I*b,v.b=A*w-I*y,v.c=I*x+A*b,v.d=I*w+A*y}if(h&&(x=this.temp,l.localToWorld(x.set(this.data.offsetX,this.data.offsetY)),v.worldX+=(x.x-v.worldX)*r,v.worldY+=(x.y-v.worldY)*a),0!=i){let t=Math.sqrt(v.a*v.a+v.c*v.c);0!=t&&(t=(t+(Math.sqrt(c*c+u*u)-t+this.data.offsetScaleX)*i)/t),v.a*=t,v.c*=t}if(0!=n){let t=Math.sqrt(v.b*v.b+v.d*v.d);0!=t&&(t=(t+(Math.sqrt(d*d+m*m)-t+this.data.offsetScaleY)*n)/t),v.b*=t,v.d*=t}if(0<o){b=v.b,I=v.d,w=Math.atan2(I,b);let t=Math.atan2(m,d)-Math.atan2(u,c)-(w-Math.atan2(v.c,v.a));t>q.PI?t-=q.PI2:t<-q.PI&&(t+=q.PI2),t=w+(t+f)*o;A=Math.sqrt(b*b+I*I);v.b=Math.cos(t)*A,v.d=Math.sin(t)*A}v.updateAppliedTransform()}}applyRelativeWorld(){var s=this.mixRotate,r=this.mixX,a=this.mixY,i=this.mixScaleX,n=this.mixScaleY,o=this.mixShearY,h=0!=r||0!=a,l=this.target,c=l.a,d=l.b,u=l.c,m=l.d,t=0<c*m-d*u?q.degRad:-q.degRad,p=this.data.offsetRotation*t,f=this.data.offsetShearY*t,g=this.bones;for(let t=0,e=g.length;t<e;t++){var v=g[t];if(0!=s){var x=v.a,w=v.b,b=v.c,y=v.d;let t=Math.atan2(u,c)+p;t>q.PI?t-=q.PI2:t<-q.PI&&(t+=q.PI2),t*=s;var A=Math.cos(t),I=Math.sin(t);v.a=A*x-I*b,v.b=A*w-I*y,v.c=I*x+A*b,v.d=I*w+A*y}if(h&&(x=this.temp,l.localToWorld(x.set(this.data.offsetX,this.data.offsetY)),v.worldX+=x.x*r,v.worldY+=x.y*a),0!=i&&(b=(Math.sqrt(c*c+u*u)-1+this.data.offsetScaleX)*i+1,v.a*=b,v.c*=b),0!=n&&(I=(Math.sqrt(d*d+m*m)-1+this.data.offsetScaleY)*n+1,v.b*=I,v.d*=I),0<o){let t=Math.atan2(m,d)-Math.atan2(u,c);t>q.PI?t-=q.PI2:t<-q.PI&&(t+=q.PI2);w=v.b,A=v.d,y=(t=Math.atan2(A,w)+(t-q.PI/2+f)*o,Math.sqrt(w*w+A*A));v.b=Math.cos(t)*y,v.d=Math.sin(t)*y}v.updateAppliedTransform()}}applyAbsoluteLocal(){var i=this.mixRotate,n=this.mixX,o=this.mixY,h=this.mixScaleX,l=this.mixScaleY,c=this.mixShearY,d=this.target,u=this.bones;for(let a=0,t=u.length;a<t;a++){var m=u[a];let t=m.arotation;0!=i&&(f=d.arotation-t+this.data.offsetRotation,f-=360*(16384-(16384.499999999996-f/360|0)),t+=f*i);var p,f=m.ax,g=m.ay;f+=(d.ax-f+this.data.offsetX)*n,g+=(d.ay-g+this.data.offsetY)*o;let e=m.ascaleX,s=m.ascaleY,r=(0!=h&&0!=e&&(e=(e+(d.ascaleX-e+this.data.offsetScaleX)*h)/e),0!=l&&0!=s&&(s=(s+(d.ascaleY-s+this.data.offsetScaleY)*l)/s),m.ashearY);0!=c&&(p=d.ashearY-r+this.data.offsetShearY,p-=360*(16384-(16384.499999999996-p/360|0)),r+=p*c),m.updateWorldTransformWith(f,g,t,e,s,m.ashearX,r)}}applyRelativeLocal(){var s=this.mixRotate,r=this.mixX,a=this.mixY,i=this.mixScaleX,n=this.mixScaleY,o=this.mixShearY,h=this.target,l=this.bones;for(let t=0,e=l.length;t<e;t++){var c=l[t],d=c.arotation+(h.arotation+this.data.offsetRotation)*s,u=c.ax+(h.ax+this.data.offsetX)*r,m=c.ay+(h.ay+this.data.offsetY)*a,p=c.ascaleX*((h.ascaleX-1+this.data.offsetScaleX)*i+1),f=c.ascaleY*((h.ascaleY-1+this.data.offsetScaleY)*n+1),g=c.ashearY+(h.ashearY+this.data.offsetShearY)*o;c.updateWorldTransformWith(u,m,d,p,f,c.ashearX,g)}}},ae=class{constructor(s){if(this._updateCache=new Array,this.skin=null,this.scaleX=1,this._scaleY=1,this.x=0,this.y=0,!s)throw new Error("data cannot be null.");this.data=s,this.bones=new Array;for(let e=0;e<s.bones.length;e++){var r,a=s.bones[e];let t;a.parent?(r=this.bones[a.parent.index],t=new Ot(a,this,r),r.children.push(t)):t=new Ot(a,this,null),this.bones.push(t)}this.slots=new Array,this.drawOrder=new Array;for(let t=0;t<s.slots.length;t++){var e=s.slots[t],i=this.bones[e.boneData.index],e=new se(e,i);this.slots.push(e),this.drawOrder.push(e)}this.ikConstraints=new Array;for(let t=0;t<s.ikConstraints.length;t++){var n=s.ikConstraints[t];this.ikConstraints.push(new Wt(n,this))}this.transformConstraints=new Array;for(let t=0;t<s.transformConstraints.length;t++){var o=s.transformConstraints[t];this.transformConstraints.push(new re(o,this))}this.pathConstraints=new Array;for(let t=0;t<s.pathConstraints.length;t++){var h=s.pathConstraints[t];this.pathConstraints.push(new c(h,this))}this.color=new pe(1,1,1,1),this.updateCache()}get scaleY(){return ae.yDown?-this._scaleY:this._scaleY}set scaleY(t){this._scaleY=t}updateCache(){this._updateCache.length=0;var s=this.bones;for(let t=0,e=s.length;t<e;t++){var r=s[t];r.sorted=r.data.skinRequired,r.active=!r.sorted}if(this.skin){var a=this.skin.bones;for(let e=0,t=this.skin.bones.length;e<t;e++){let t=this.bones[a[e].index];for(;t.sorted=!1,t.active=!0,t=t.parent;);}}var i=this.ikConstraints,n=this.transformConstraints,o=this.pathConstraints,h=i.length,l=n.length,c=o.length,t=h+l+c;t:for(let e=0;e<t;e++){for(let t=0;t<h;t++){var d=i[t];if(d.data.order==e){this.sortIkConstraint(d);continue t}}for(let t=0;t<l;t++){var u=n[t];if(u.data.order==e){this.sortTransformConstraint(u);continue t}}for(let t=0;t<c;t++){var m=o[t];if(m.data.order==e){this.sortPathConstraint(m);continue t}}}for(let t=0,e=s.length;t<e;t++)this.sortBone(s[t])}sortIkConstraint(t){var e,s;t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&fe.contains(this.skin.constraints,t.data,!0)),t.active&&(s=t.target,this.sortBone(s),e=(s=t.bones)[0],this.sortBone(e),1==s.length?(this._updateCache.push(t),this.sortReset(e.children)):(s=s[s.length-1],this.sortBone(s),this._updateCache.push(t),this.sortReset(e.children),s.sorted=!0))}sortPathConstraint(t){if(t.active=t.target.bone.isActive()&&(!t.data.skinRequired||this.skin&&fe.contains(this.skin.constraints,t.data,!0)),t.active){var e=t.target,s=e.data.index,r=e.bone;this.skin&&this.sortPathConstraintAttachment(this.skin,s,r),this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,s,r);for(let t=0,e=this.data.skins.length;t<e;t++)this.sortPathConstraintAttachment(this.data.skins[t],s,r);var e=e.getAttachment(),a=(e instanceof l&&this.sortPathConstraintAttachmentWith(e,r),t.bones),i=a.length;for(let t=0;t<i;t++)this.sortBone(a[t]);this._updateCache.push(t);for(let t=0;t<i;t++)this.sortReset(a[t].children);for(let t=0;t<i;t++)a[t].sorted=!0}}sortTransformConstraint(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&fe.contains(this.skin.constraints,t.data,!0)),t.active){this.sortBone(t.target);var e=t.bones,s=e.length;if(t.data.local)for(let t=0;t<s;t++){var r=e[t];this.sortBone(r.parent),this.sortBone(r)}else for(let t=0;t<s;t++)this.sortBone(e[t]);this._updateCache.push(t);for(let t=0;t<s;t++)this.sortReset(e[t].children);for(let t=0;t<s;t++)e[t].sorted=!0}}sortPathConstraintAttachment(t,e,s){var r=t.attachments[e];if(r)for(var a in r)this.sortPathConstraintAttachmentWith(r[a],s)}sortPathConstraintAttachmentWith(t,e){if(t instanceof l){var s=t.bones;if(s){var r=this.bones;for(let t=0,e=s.length;t<e;){var a=s[t++];for(a+=t;t<a;)this.sortBone(r[s[t++]])}}else this.sortBone(e)}}sortBone(t){var e;t&&!t.sorted&&((e=t.parent)&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t))}sortReset(s){for(let t=0,e=s.length;t<e;t++){var r=s[t];r.active&&(r.sorted&&this.sortReset(r.children),r.sorted=!1)}}updateWorldTransform(){var s=this.bones;for(let t=0,e=s.length;t<e;t++){var r=s[t];r.ax=r.x,r.ay=r.y,r.arotation=r.rotation,r.ascaleX=r.scaleX,r.ascaleY=r.scaleY,r.ashearX=r.shearX,r.ashearY=r.shearY}var a=this._updateCache;for(let t=0,e=a.length;t<e;t++)a[t].update()}updateWorldTransformWith(t){var s=this.getRootBone();if(!s)throw new Error("Root bone must not be null.");var e=t.a,r=t.b,a=t.c,i=t.d,t=(s.worldX=e*this.x+r*this.y+t.worldX,s.worldY=a*this.x+i*this.y+t.worldY,s.rotation+90+s.shearY),n=q.cosDeg(s.rotation+s.shearX)*s.scaleX,o=q.cosDeg(t)*s.scaleY,h=q.sinDeg(s.rotation+s.shearX)*s.scaleX,t=q.sinDeg(t)*s.scaleY,l=(s.a=(e*n+r*h)*this.scaleX,s.b=(e*o+r*t)*this.scaleX,s.c=(a*n+i*h)*this.scaleY,s.d=(a*o+i*t)*this.scaleY,this._updateCache);for(let t=0,e=l.length;t<e;t++){var c=l[t];c!=s&&c.update()}}setToSetupPose(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()}setBonesToSetupPose(){var s=this.bones;for(let t=0,e=s.length;t<e;t++)s[t].setToSetupPose();var r=this.ikConstraints;for(let t=0,e=r.length;t<e;t++){var a=r[t];a.mix=a.data.mix,a.softness=a.data.softness,a.bendDirection=a.data.bendDirection,a.compress=a.data.compress,a.stretch=a.data.stretch}var i=this.transformConstraints;for(let t=0,e=i.length;t<e;t++){var n=i[t],o=n.data;n.mixRotate=o.mixRotate,n.mixX=o.mixX,n.mixY=o.mixY,n.mixScaleX=o.mixScaleX,n.mixScaleY=o.mixScaleY,n.mixShearY=o.mixShearY}var h=this.pathConstraints;for(let t=0,e=h.length;t<e;t++){var l=h[t],c=l.data;l.position=c.position,l.spacing=c.spacing,l.mixRotate=c.mixRotate,l.mixX=c.mixX,l.mixY=c.mixY}}setSlotsToSetupPose(){var s=this.slots;fe.arrayCopy(s,0,this.drawOrder,0,s.length);for(let t=0,e=s.length;t<e;t++)s[t].setToSetupPose()}getRootBone(){return 0==this.bones.length?null:this.bones[0]}findBone(s){if(!s)throw new Error("boneName cannot be null.");var r=this.bones;for(let t=0,e=r.length;t<e;t++){var a=r[t];if(a.data.name==s)return a}return null}findSlot(s){if(!s)throw new Error("slotName cannot be null.");var r=this.slots;for(let t=0,e=r.length;t<e;t++){var a=r[t];if(a.data.name==s)return a}return null}setSkinByName(t){var e=this.data.findSkin(t);if(!e)throw new Error("Skin not found: "+t);this.setSkin(e)}setSkin(s){if(s!=this.skin){if(s)if(this.skin)s.attachAll(this,this.skin);else{var r=this.slots;for(let t=0,e=r.length;t<e;t++){var a=r[t],i=a.data.attachmentName;i&&(i=s.getAttachment(t,i))&&a.setAttachment(i)}}this.skin=s,this.updateCache()}}getAttachmentByName(t,e){var s=this.data.findSlot(t);if(s)return this.getAttachment(s.index,e);throw new Error("Can't find slot with name "+t)}getAttachment(t,e){if(!e)throw new Error("attachmentName cannot be null.");if(this.skin){var s=this.skin.getAttachment(t,e);if(s)return s}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null}setAttachment(s,r){if(!s)throw new Error("slotName cannot be null.");var a=this.slots;for(let e=0,t=a.length;e<t;e++){var i=a[e];if(i.data.name==s){let t=null;if(r&&!(t=this.getAttachment(e,r)))throw new Error("Attachment not found: "+r+", for slot: "+s);return void i.setAttachment(t)}}throw new Error("Slot not found: "+s)}findIkConstraint(s){if(!s)throw new Error("constraintName cannot be null.");var r=this.ikConstraints;for(let t=0,e=r.length;t<e;t++){var a=r[t];if(a.data.name==s)return a}return null}findTransformConstraint(s){if(!s)throw new Error("constraintName cannot be null.");var r=this.transformConstraints;for(let t=0,e=r.length;t<e;t++){var a=r[t];if(a.data.name==s)return a}return null}findPathConstraint(s){if(!s)throw new Error("constraintName cannot be null.");var r=this.pathConstraints;for(let t=0,e=r.length;t<e;t++){var a=r[t];if(a.data.name==s)return a}return null}getBoundsRect(){var t=new i,e=new i;return this.getBounds(t,e),{x:t.x,y:t.y,width:e.x,height:e.y}}getBounds(t,e,r=new Array(2)){if(!t)throw new Error("offset cannot be null.");if(!e)throw new Error("size cannot be null.");var s=this.drawOrder;let a=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY;for(let t=0,e=s.length;t<e;t++){var h=s[t];if(h.bone.active){let t=0,s=null;var l=h.getAttachment();if(l instanceof p?(t=8,s=fe.setArraySize(r,t,0),l.computeWorldVertices(h,s,0,2)):l instanceof m&&(l=l,t=l.worldVerticesLength,s=fe.setArraySize(r,t,0),l.computeWorldVertices(h,0,t,s,0,2)),s)for(let t=0,e=s.length;t<e;t+=2){var c=s[t],d=s[t+1];a=Math.min(a,c),i=Math.min(i,d),n=Math.max(n,c),o=Math.max(o,d)}}}t.set(a,i),e.set(n-a,o-i)}},ie=ae,ne=(ie.yDown=!1,class{constructor(){this.name=null,this.bones=new Array,this.slots=new Array,this.skins=new Array,this.defaultSkin=null,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.x=0,this.y=0,this.width=0,this.height=0,this.version=null,this.hash=null,this.fps=0,this.imagesPath=null,this.audioPath=null}findBone(s){if(!s)throw new Error("boneName cannot be null.");var r=this.bones;for(let t=0,e=r.length;t<e;t++){var a=r[t];if(a.name==s)return a}return null}findSlot(s){if(!s)throw new Error("slotName cannot be null.");var r=this.slots;for(let t=0,e=r.length;t<e;t++){var a=r[t];if(a.name==s)return a}return null}findSkin(s){if(!s)throw new Error("skinName cannot be null.");var r=this.skins;for(let t=0,e=r.length;t<e;t++){var a=r[t];if(a.name==s)return a}return null}findEvent(s){if(!s)throw new Error("eventDataName cannot be null.");var r=this.events;for(let t=0,e=r.length;t<e;t++){var a=r[t];if(a.name==s)return a}return null}findAnimation(s){if(!s)throw new Error("animationName cannot be null.");var r=this.animations;for(let t=0,e=r.length;t<e;t++){var a=r[t];if(a.name==s)return a}return null}findIkConstraint(s){if(!s)throw new Error("constraintName cannot be null.");var r=this.ikConstraints;for(let t=0,e=r.length;t<e;t++){var a=r[t];if(a.name==s)return a}return null}findTransformConstraint(s){if(!s)throw new Error("constraintName cannot be null.");var r=this.transformConstraints;for(let t=0,e=r.length;t<e;t++){var a=r[t];if(a.name==s)return a}return null}findPathConstraint(s){if(!s)throw new Error("constraintName cannot be null.");var r=this.pathConstraints;for(let t=0,e=r.length;t<e;t++){var a=r[t];if(a.name==s)return a}return null}}),oe=class{constructor(t=0,e,s){this.slotIndex=t,this.name=e,this.attachment=s}},he=class{constructor(t){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,!t)throw new Error("name cannot be null.");this.name=t}setAttachment(t,e,s){if(!s)throw new Error("attachment cannot be null.");var r=this.attachments;t>=r.length&&(r.length=t+1),r[t]||(r[t]={}),r[t][e]=s}addSkin(s){for(let t=0;t<s.bones.length;t++){var r=s.bones[t];let e=!1;for(let t=0;t<this.bones.length;t++)if(this.bones[t]==r){e=!0;break}e||this.bones.push(r)}for(let t=0;t<s.constraints.length;t++){var a=s.constraints[t];let e=!1;for(let t=0;t<this.constraints.length;t++)if(this.constraints[t]==a){e=!0;break}e||this.constraints.push(a)}var e=s.getAttachments();for(let t=0;t<e.length;t++){var i=e[t];this.setAttachment(i.slotIndex,i.name,i.attachment)}}copySkin(s){for(let t=0;t<s.bones.length;t++){var r=s.bones[t];let e=!1;for(let t=0;t<this.bones.length;t++)if(this.bones[t]==r){e=!0;break}e||this.bones.push(r)}for(let t=0;t<s.constraints.length;t++){var a=s.constraints[t];let e=!1;for(let t=0;t<this.constraints.length;t++)if(this.constraints[t]==a){e=!0;break}e||this.constraints.push(a)}var e=s.getAttachments();for(let t=0;t<e.length;t++){var i=e[t];i.attachment&&(i.attachment instanceof m?i.attachment=i.attachment.newLinkedMesh():i.attachment=i.attachment.copy(),this.setAttachment(i.slotIndex,i.name,i.attachment))}}getAttachment(t,e){t=this.attachments[t];return t?t[e]:null}removeAttachment(t,e){t=this.attachments[t];t&&delete t[e]}getAttachments(){for(var t=new Array,e=0;e<this.attachments.length;e++){var s=this.attachments[e];if(s)for(var r in s){var a=s[r];a&&t.push(new oe(e,r,a))}}return t}getAttachmentsForSlot(t,e){var s=this.attachments[t];if(s)for(var r in s){var a=s[r];a&&e.push(new oe(t,r,a))}}clear(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0}attachAll(e,s){let r=0;for(let t=0;t<e.slots.length;t++){var a=e.slots[t],i=a.getAttachment();if(i&&r<s.attachments.length){var n,o=s.attachments[r];for(n in o)if(i==o[n]){var h=this.getAttachment(r,n);h&&a.setAttachment(h);break}}r++}}},le=class{constructor(t,e,s){if(this.index=0,this.color=new pe(1,1,1,1),this.darkColor=null,this.attachmentName=null,this.blendMode=ce.Normal,t<0)throw new Error("index must be >= 0.");if(!e)throw new Error("name cannot be null.");if(!s)throw new Error("boneData cannot be null.");this.index=t,this.name=e,this.boneData=s}},ce=(t=>(t[t.Normal=0]="Normal",t[t.Additive=1]="Additive",t[t.Multiply=2]="Multiply",t[t.Screen=3]="Screen",t))(ce||{}),de=class extends $t{constructor(t){super(t,0,!1),this.bones=new Array,this._target=null,this.mixRotate=0,this.mixX=0,this.mixY=0,this.mixScaleX=0,this.mixScaleY=0,this.mixShearY=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,this.relative=!1,this.local=!1}set target(t){this._target=t}get target(){if(this._target)return this._target;throw new Error("BoneData not set.")}},ue=class{constructor(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}readSkeletonData(t){var s=this.scale,r=new ne,a=(r.name="",new me(t)),t=a.readInt32(),e=a.readInt32(),i=(r.hash=0==e&&0==t?null:e.toString(16)+t.toString(16),r.version=a.readString(),r.x=a.readFloat(),r.y=a.readFloat(),r.width=a.readFloat(),r.height=a.readFloat(),a.readBoolean());i&&(r.fps=a.readFloat(),r.imagesPath=a.readString(),r.audioPath=a.readString());let n=0;n=a.readInt(!0);for(let t=0;t<n;t++){var o=a.readString();if(!o)throw new Error("String in string table must not be null.");a.strings.push(o)}n=a.readInt(!0);for(let t=0;t<n;t++){var h=a.readString();if(!h)throw new Error("Bone name must not be null.");var l=0==t?null:r.bones[a.readInt(!0)],h=new Bt(t,h,l);h.rotation=a.readFloat(),h.x=a.readFloat()*s,h.y=a.readFloat()*s,h.scaleX=a.readFloat(),h.scaleY=a.readFloat(),h.shearX=a.readFloat(),h.shearY=a.readFloat(),h.length=a.readFloat()*s,h.transformMode=a.readInt(!0),h.skinRequired=a.readBoolean(),i&&pe.rgba8888ToColor(h.color,a.readInt32()),r.bones.push(h)}n=a.readInt(!0);for(let t=0;t<n;t++){var c=a.readString();if(!c)throw new Error("Slot name must not be null.");var d=r.bones[a.readInt(!0)],c=new le(t,c,d),d=(pe.rgba8888ToColor(c.color,a.readInt32()),a.readInt32());-1!=d&&pe.rgb888ToColor(c.darkColor=new pe,d),c.attachmentName=a.readStringRef(),c.blendMode=a.readInt(!0),r.slots.push(c)}n=a.readInt(!0);for(let t=0,e;t<n;t++){var u=a.readString();if(!u)throw new Error("IK constraint data name must not be null.");var m=new jt(u);m.order=a.readInt(!0),m.skinRequired=a.readBoolean(),e=a.readInt(!0);for(let t=0;t<e;t++)m.bones.push(r.bones[a.readInt(!0)]);m.target=r.bones[a.readInt(!0)],m.mix=a.readFloat(),m.softness=a.readFloat()*s,m.bendDirection=a.readByte(),m.compress=a.readBoolean(),m.stretch=a.readBoolean(),m.uniform=a.readBoolean(),r.ikConstraints.push(m)}n=a.readInt(!0);for(let t=0,e;t<n;t++){var p=a.readString();if(!p)throw new Error("Transform constraint data name must not be null.");var f=new de(p);f.order=a.readInt(!0),f.skinRequired=a.readBoolean(),e=a.readInt(!0);for(let t=0;t<e;t++)f.bones.push(r.bones[a.readInt(!0)]);f.target=r.bones[a.readInt(!0)],f.local=a.readBoolean(),f.relative=a.readBoolean(),f.offsetRotation=a.readFloat(),f.offsetX=a.readFloat()*s,f.offsetY=a.readFloat()*s,f.offsetScaleX=a.readFloat(),f.offsetScaleY=a.readFloat(),f.offsetShearY=a.readFloat(),f.mixRotate=a.readFloat(),f.mixX=a.readFloat(),f.mixY=a.readFloat(),f.mixScaleX=a.readFloat(),f.mixScaleY=a.readFloat(),f.mixShearY=a.readFloat(),r.transformConstraints.push(f)}n=a.readInt(!0);for(let t=0,e;t<n;t++){var g=a.readString();if(!g)throw new Error("Path constraint data name must not be null.");var v=new zt(g);v.order=a.readInt(!0),v.skinRequired=a.readBoolean(),e=a.readInt(!0);for(let t=0;t<e;t++)v.bones.push(r.bones[a.readInt(!0)]);v.target=r.slots[a.readInt(!0)],v.positionMode=a.readInt(!0),v.spacingMode=a.readInt(!0),v.rotateMode=a.readInt(!0),v.offsetRotation=a.readFloat(),v.position=a.readFloat(),0==v.positionMode&&(v.position*=s),v.spacing=a.readFloat(),0!=v.spacingMode&&1!=v.spacingMode||(v.spacing*=s),v.mixRotate=a.readFloat(),v.mixX=a.readFloat(),v.mixY=a.readFloat(),r.pathConstraints.push(v)}e=this.readSkin(a,r,!0,i);e&&(r.defaultSkin=e,r.skins.push(e));{let t=r.skins.length;for(fe.setArraySize(r.skins,n=t+a.readInt(!0));t<n;t++){var x=this.readSkin(a,r,!1,i);if(!x)throw new Error("readSkin() should not have returned null.");r.skins[t]=x}}n=this.linkedMeshes.length;for(let t=0;t<n;t++){var w=this.linkedMeshes[t],b=w.skin?r.findSkin(w.skin):r.defaultSkin;if(!b)throw new Error("Not skin found for linked mesh.");if(!w.parent)throw new Error("Linked mesh parent must not be null");b=b.getAttachment(w.slotIndex,w.parent);if(!b)throw new Error("Parent mesh not found: "+w.parent);w.mesh.timelineAttachment=w.inheritTimeline?b:w.mesh,w.mesh.setParentMesh(b),null!=w.mesh.region&&w.mesh.updateRegion()}this.linkedMeshes.length=0,n=a.readInt(!0);for(let t=0;t<n;t++){var y=a.readStringRef();if(!y)throw new Error;y=new qt(y);y.intValue=a.readInt(!1),y.floatValue=a.readFloat(),y.stringValue=a.readString(),y.audioPath=a.readString(),y.audioPath&&(y.volume=a.readFloat(),y.balance=a.readFloat()),r.events.push(y)}n=a.readInt(!0);for(let t=0;t<n;t++){var A=a.readString();if(!A)throw new Error("Animatio name must not be null.");r.animations.push(this.readAnimation(a,A,r))}return r}readSkin(s,r,t,a){let i=null,e=0;if(t){if(0==(e=s.readInt(!0)))return null;i=new he("default")}else{t=s.readStringRef();if(!t)throw new Error("Skin name must not be null.");(i=new he(t)).bones.length=s.readInt(!0);for(let t=0,e=i.bones.length;t<e;t++)i.bones[t]=r.bones[s.readInt(!0)];for(let t=0,e=s.readInt(!0);t<e;t++)i.constraints.push(r.ikConstraints[s.readInt(!0)]);for(let t=0,e=s.readInt(!0);t<e;t++)i.constraints.push(r.transformConstraints[s.readInt(!0)]);for(let t=0,e=s.readInt(!0);t<e;t++)i.constraints.push(r.pathConstraints[s.readInt(!0)]);e=s.readInt(!0)}for(let t=0;t<e;t++){var n=s.readInt(!0);for(let t=0,e=s.readInt(!0);t<e;t++){var o=s.readStringRef();if(!o)throw new Error("Attachment name must not be null");var h=this.readAttachment(s,r,i,n,o,a);h&&i.setAttachment(n,o,h)}}return i}readAttachment(a,t,i,r,e,n){var o=this.scale;let h=a.readStringRef();switch(h=h||e,a.readByte()){case w.Region:{let t=a.readStringRef();var l=a.readFloat(),c=a.readFloat(),d=a.readFloat(),u=a.readFloat(),m=a.readFloat(),p=a.readFloat(),f=a.readFloat(),g=a.readInt32(),v=this.readSequence(a),x=(t=t||h,this.attachmentLoader.newRegionAttachment(i,h,t,v));return x?(x.path=t,x.x=c*o,x.y=d*o,x.scaleX=u,x.scaleY=m,x.rotation=l,x.width=p*o,x.height=f*o,pe.rgba8888ToColor(x.color,g),null==(x.sequence=v)&&x.updateRegion(),x):null}case w.BoundingBox:c=a.readInt(!0),d=this.readVertices(a,c),u=n?a.readInt32():0,m=this.attachmentLoader.newBoundingBoxAttachment(i,h);return m?(m.worldVerticesLength=c<<1,m.vertices=d.vertices,m.bones=d.bones,n&&pe.rgba8888ToColor(m.color,u),m):null;case w.Mesh:{let t=a.readStringRef();l=a.readInt32(),p=a.readInt(!0),f=this.readFloatArray(a,p<<1,1),g=this.readShortArray(a),v=this.readVertices(a,p),x=a.readInt(!0),c=this.readSequence(a);let e=[],s=0,r=0;n&&(e=this.readShortArray(a),s=a.readFloat(),r=a.readFloat()),t=t||h;d=this.attachmentLoader.newMeshAttachment(i,h,t,c);return d?(d.path=t,pe.rgba8888ToColor(d.color,l),d.bones=v.bones,d.vertices=v.vertices,d.worldVerticesLength=p<<1,d.triangles=g,d.regionUVs=f,null==c&&d.updateRegion(),d.hullLength=x<<1,d.sequence=c,n&&(d.edges=e,d.width=s*o,d.height=r*o),d):null}case w.LinkedMesh:{let t=a.readStringRef();u=a.readInt32(),m=a.readStringRef(),l=a.readStringRef(),v=a.readBoolean(),p=this.readSequence(a);let e=0,s=0;n&&(e=a.readFloat(),s=a.readFloat()),t=t||h;g=this.attachmentLoader.newMeshAttachment(i,h,t,p);return g?(g.path=t,pe.rgba8888ToColor(g.color,u),g.sequence=p,n&&(g.width=e*o,g.height=s*o),this.linkedMeshes.push(new ze(g,m,r,l,v)),g):null}case w.Path:var f=a.readBoolean(),x=a.readBoolean(),c=a.readInt(!0),d=this.readVertices(a,c),s=fe.newArray(c/3,0);for(let t=0,e=s.length;t<e;t++)s[t]=a.readFloat()*o;u=n?a.readInt32():0,p=this.attachmentLoader.newPathAttachment(i,h);return p?(p.closed=f,p.constantSpeed=x,p.worldVerticesLength=c<<1,p.vertices=d.vertices,p.bones=d.bones,p.lengths=s,n&&pe.rgba8888ToColor(p.color,u),p):null;case w.Point:m=a.readFloat(),l=a.readFloat(),v=a.readFloat(),g=n?a.readInt32():0,f=this.attachmentLoader.newPointAttachment(i,h);return f?(f.x=l*o,f.y=v*o,f.rotation=m,n&&pe.rgba8888ToColor(f.color,g),f):null;case w.Clipping:x=a.readInt(!0),c=a.readInt(!0),d=this.readVertices(a,c),u=n?a.readInt32():0,p=this.attachmentLoader.newClippingAttachment(i,h);return p?(p.endSlot=t.slots[x],p.worldVerticesLength=c<<1,p.vertices=d.vertices,p.bones=d.bones,n&&pe.rgba8888ToColor(p.color,u),p):null}return null}readSequence(t){var e;return t.readBoolean()?((e=new N(t.readInt(!0))).start=t.readInt(!0),e.digits=t.readInt(!0),e.setupIndex=t.readInt(!0),e):null}readVertices(e,s){var r=this.scale,t=s<<1,a=new Ge;if(e.readBoolean()){var i=new Array,n=new Array;for(let t=0;t<s;t++){var o=e.readInt(!0);n.push(o);for(let t=0;t<o;t++)n.push(e.readInt(!0)),i.push(e.readFloat()*r),i.push(e.readFloat()*r),i.push(e.readFloat())}a.vertices=fe.toFloatArray(i),a.bones=n}else a.vertices=this.readFloatArray(e,t,r);return a}readFloatArray(e,s,r){var a=new Array(s);if(1==r)for(let t=0;t<s;t++)a[t]=e.readFloat();else for(let t=0;t<s;t++)a[t]=e.readFloat()*r;return a}readShortArray(e){var s=e.readInt(!0),r=new Array(s);for(let t=0;t<s;t++)r[t]=e.readShort();return r}readAnimation(c,t,s){c.readInt(!0);var d=new Array,o=this.scale;new pe,new pe;for(let t=0,e=c.readInt(!0);t<e;t++){var u=c.readInt(!0);for(let t=0,e=c.readInt(!0);t<e;t++){var P=c.readByte(),m=c.readInt(!0),p=m-1;switch(P){case os:var B=new xe(m,u);for(let t=0;t<m;t++)B.setFrame(t,c.readFloat(),c.readStringRef());d.push(B);break;case hs:{var D=c.readInt(!0),h=new _e(m,D,u);let s=c.readFloat(),r=c.readUnsignedByte()/255,a=c.readUnsignedByte()/255,i=c.readUnsignedByte()/255,n=c.readUnsignedByte()/255;for(let t=0,e=0;h.setFrame(t,s,r,a,i,n),t!=p;t++){var l=c.readFloat(),O=c.readUnsignedByte()/255,$=c.readUnsignedByte()/255,V=c.readUnsignedByte()/255,U=c.readUnsignedByte()/255;switch(c.readByte()){case Kt:h.setStepped(t);break;case Qt:Jt(c,h,e++,t,0,s,l,r,O,1),Jt(c,h,e++,t,1,s,l,a,$,1),Jt(c,h,e++,t,2,s,l,i,V,1),Jt(c,h,e++,t,3,s,l,n,U,1)}s=l,r=O,a=$,i=V,n=U}d.push(h);break}case ls:{var D=c.readInt(!0),n=new Le(m,D,u);let s=c.readFloat(),r=c.readUnsignedByte()/255,a=c.readUnsignedByte()/255,i=c.readUnsignedByte()/255;for(let t=0,e=0;n.setFrame(t,s,r,a,i),t!=p;t++){var f=c.readFloat(),q=c.readUnsignedByte()/255,W=c.readUnsignedByte()/255,j=c.readUnsignedByte()/255;switch(c.readByte()){case Kt:n.setStepped(t);break;case Qt:Jt(c,n,e++,t,0,s,f,r,q,1),Jt(c,n,e++,t,1,s,f,a,W,1),Jt(c,n,e++,t,2,s,f,i,j,1)}s=f,r=q,a=W,i=j}d.push(n);break}case cs:{var z=c.readInt(!0),g=new Be(m,z,u);let s=c.readFloat(),r=c.readUnsignedByte()/255,a=c.readUnsignedByte()/255,i=c.readUnsignedByte()/255,n=c.readUnsignedByte()/255,o=c.readUnsignedByte()/255,h=c.readUnsignedByte()/255,l=c.readUnsignedByte()/255;for(let t=0,e=0;g.setFrame(t,s,r,a,i,n,o,h,l),t!=p;t++){var v=c.readFloat(),G=c.readUnsignedByte()/255,H=c.readUnsignedByte()/255,J=c.readUnsignedByte()/255,K=c.readUnsignedByte()/255,Q=c.readUnsignedByte()/255,Z=c.readUnsignedByte()/255,tt=c.readUnsignedByte()/255;switch(c.readByte()){case Kt:g.setStepped(t);break;case Qt:Jt(c,g,e++,t,0,s,v,r,G,1),Jt(c,g,e++,t,1,s,v,a,H,1),Jt(c,g,e++,t,2,s,v,i,J,1),Jt(c,g,e++,t,3,s,v,n,K,1),Jt(c,g,e++,t,4,s,v,o,Q,1),Jt(c,g,e++,t,5,s,v,h,Z,1),Jt(c,g,e++,t,6,s,v,l,tt,1)}s=v,r=G,a=H,i=J,n=K,o=Q,h=Z,l=tt}d.push(g);break}case ds:{var z=c.readInt(!0),x=new De(m,z,u);let s=c.readFloat(),r=c.readUnsignedByte()/255,a=c.readUnsignedByte()/255,i=c.readUnsignedByte()/255,n=c.readUnsignedByte()/255,o=c.readUnsignedByte()/255,h=c.readUnsignedByte()/255;for(let t=0,e=0;x.setFrame(t,s,r,a,i,n,o,h),t!=p;t++){var w=c.readFloat(),et=c.readUnsignedByte()/255,st=c.readUnsignedByte()/255,rt=c.readUnsignedByte()/255,at=c.readUnsignedByte()/255,it=c.readUnsignedByte()/255,nt=c.readUnsignedByte()/255;switch(c.readByte()){case Kt:x.setStepped(t);break;case Qt:Jt(c,x,e++,t,0,s,w,r,et,1),Jt(c,x,e++,t,1,s,w,a,st,1),Jt(c,x,e++,t,2,s,w,i,rt,1),Jt(c,x,e++,t,3,s,w,n,at,1),Jt(c,x,e++,t,4,s,w,o,it,1),Jt(c,x,e++,t,5,s,w,h,nt,1)}s=w,r=et,a=st,i=rt,n=at,o=it,h=nt}d.push(x);break}case us:{var a=new Pe(m,c.readInt(!0),u);let s=c.readFloat(),r=c.readUnsignedByte()/255;for(let t=0,e=0;a.setFrame(t,s,r),t!=p;t++){var ot=c.readFloat(),ht=c.readUnsignedByte()/255;switch(c.readByte()){case Kt:a.setStepped(t);break;case Qt:Jt(c,a,e++,t,0,s,ot,r,ht,1)}s=ot,r=ht}d.push(a)}}}}for(let t=0,e=c.readInt(!0);t<e;t++){var r=c.readInt(!0);for(let t=0,e=c.readInt(!0);t<e;t++){var lt=c.readByte(),i=c.readInt(!0),b=c.readInt(!0);switch(lt){case Ke:d.push(Ht(c,new ve(i,b,r),1));break;case Qe:d.push(He(c,new ke(i,b,r),o));break;case Ze:d.push(Ht(c,new Te(i,b,r),o));break;case ts:d.push(Ht(c,new Re(i,b,r),o));break;case es:d.push(He(c,new Ce(i,b,r),1));break;case ss:d.push(Ht(c,new Me(i,b,r),1));break;case rs:d.push(Ht(c,new Fe(i,b,r),1));break;case as:d.push(He(c,new Ye(i,b,r),1));break;case is:d.push(Ht(c,new Xe(i,b,r),1));break;case ns:d.push(Ht(c,new Ne(i,b,r),1))}}}for(let t=0,e=c.readInt(!0);t<e;t++){var ct=c.readInt(!0),dt=c.readInt(!0),ut=dt-1,y=new $e(dt,c.readInt(!0),ct);let s=c.readFloat(),r=c.readFloat(),a=c.readFloat()*o;for(let t=0,e=0;y.setFrame(t,s,r,a,c.readByte(),c.readBoolean(),c.readBoolean()),t!=ut;t++){var A=c.readFloat(),mt=c.readFloat(),pt=c.readFloat()*o;switch(c.readByte()){case Kt:y.setStepped(t);break;case Qt:Jt(c,y,e++,t,0,s,A,r,mt,1),Jt(c,y,e++,t,1,s,A,a,pt,o)}s=A,r=mt,a=pt}d.push(y)}for(let t=0,e=c.readInt(!0);t<e;t++){var ft=c.readInt(!0),gt=c.readInt(!0),vt=gt-1,I=new Ve(gt,c.readInt(!0),ft);let s=c.readFloat(),r=c.readFloat(),a=c.readFloat(),i=c.readFloat(),n=c.readFloat(),o=c.readFloat(),h=c.readFloat();for(let t=0,e=0;I.setFrame(t,s,r,a,i,n,o,h),t!=vt;t++){var E=c.readFloat(),xt=c.readFloat(),wt=c.readFloat(),bt=c.readFloat(),yt=c.readFloat(),At=c.readFloat(),It=c.readFloat();switch(c.readByte()){case Kt:I.setStepped(t);break;case Qt:Jt(c,I,e++,t,0,s,E,r,xt,1),Jt(c,I,e++,t,1,s,E,a,wt,1),Jt(c,I,e++,t,2,s,E,i,bt,1),Jt(c,I,e++,t,3,s,E,n,yt,1),Jt(c,I,e++,t,4,s,E,o,At,1),Jt(c,I,e++,t,5,s,E,h,It,1)}s=E,r=xt,a=wt,i=bt,n=yt,o=At,h=It}d.push(I)}for(let t=0,e=c.readInt(!0);t<e;t++){var S=c.readInt(!0),k=s.pathConstraints[S];for(let t=0,e=c.readInt(!0);t<e;t++)switch(c.readByte()){case fs:d.push(Ht(c,new Ue(c.readInt(!0),c.readInt(!0),S),0==k.positionMode?o:1));break;case gs:d.push(Ht(c,new qe(c.readInt(!0),c.readInt(!0),S),0==k.spacingMode||1==k.spacingMode?o:1));break;case vs:var T=new We(c.readInt(!0),c.readInt(!0),S);let r=c.readFloat(),a=c.readFloat(),i=c.readFloat(),n=c.readFloat();for(let t=0,e=0,s=T.getFrameCount()-1;T.setFrame(t,r,a,i,n),t!=s;t++){var R=c.readFloat(),Et=c.readFloat(),St=c.readFloat(),kt=c.readFloat();switch(c.readByte()){case Kt:T.setStepped(t);break;case Qt:Jt(c,T,e++,t,0,r,R,a,Et,1),Jt(c,T,e++,t,1,r,R,i,St,1),Jt(c,T,e++,t,2,r,R,n,kt,1)}r=R,a=Et,i=St,n=kt}d.push(T)}}for(let t=0,e=c.readInt(!0);t<e;t++){var Tt=s.skins[c.readInt(!0)];for(let t=0,e=c.readInt(!0);t<e;t++){var C=c.readInt(!0);for(let t=0,e=c.readInt(!0);t<e;t++){var M=c.readStringRef();if(!M)throw new Error("attachmentName must not be null.");var Rt=Tt.getAttachment(C,M),M=c.readByte(),F=c.readInt(!0),Ct=F-1;switch(M){case ms:{var Mt=Rt,Ft=Mt.bones,Y=Mt.vertices,Yt=Ft?Y.length/3*2:Y.length,Xt=c.readInt(!0),X=new Oe(F,Xt,C,Mt);let r=c.readFloat();for(let t=0,e=0;;t++){let s;var N=c.readInt(!0);if(0==N)s=Ft?fe.newFloatArray(Yt):Y;else{s=fe.newFloatArray(Yt);var Nt=c.readInt(!0);if(N+=Nt,1==o)for(let t=Nt;t<N;t++)s[t]=c.readFloat();else for(let t=Nt;t<N;t++)s[t]=c.readFloat()*o;if(!Ft)for(let t=0,e=s.length;t<e;t++)s[t]+=Y[t]}if(X.setFrame(t,r,s),t==Ct)break;var _t=c.readFloat();switch(c.readByte()){case Kt:X.setStepped(t);break;case Qt:Jt(c,X,e++,t,0,r,_t,0,1,1)}r=_t}d.push(X);break}case ps:var Lt=new ye(F,C,Rt);for(let t=0;t<F;t++){var Pt=c.readFloat(),Bt=c.readInt32();Lt.setFrame(t,Pt,Zt[15&Bt],Bt>>4,c.readFloat())}d.push(Lt)}}}}var Dt=c.readInt(!0);if(0<Dt){var Ot=new be(Dt),_=s.slots.length;for(let t=0;t<Dt;t++){var $t=c.readFloat(),Vt=c.readInt(!0),L=fe.newArray(_,0);for(let t=_-1;0<=t;t--)L[t]=-1;var Ut=fe.newArray(_-Vt,0);let e=0,s=0;for(let t=0;t<Vt;t++){for(var qt=c.readInt(!0);e!=qt;)Ut[s++]=e++;L[e+c.readInt(!0)]=e++}for(;e<_;)Ut[s++]=e++;for(let t=_-1;0<=t;t--)-1==L[t]&&(L[t]=Ut[--s]);Ot.setFrame(t,$t,L)}d.push(Ot)}var Wt=c.readInt(!0);if(0<Wt){var jt=new we(Wt);for(let t=0;t<Wt;t++){var e=c.readFloat(),zt=s.events[c.readInt(!0)],e=new je(e,zt);e.intValue=c.readInt(!1),e.floatValue=c.readFloat(),e.stringValue=c.readBoolean()?c.readString():zt.stringValue,e.data.audioPath&&(e.volume=c.readFloat(),e.balance=c.readFloat()),jt.setFrame(t,e)}d.push(jt)}let Gt=0;for(let t=0,e=d.length;t<e;t++)Gt=Math.max(Gt,d[t].getDuration());return new ge(t,d,Gt)}},me=class{constructor(t,e=new Array,s=0,r=new DataView(t.buffer)){this.strings=e,this.index=s,this.buffer=r}readByte(){return this.buffer.getInt8(this.index++)}readUnsignedByte(){return this.buffer.getUint8(this.index++)}readShort(){var t=this.buffer.getInt16(this.index);return this.index+=2,t}readInt32(){var t=this.buffer.getInt32(this.index);return this.index+=4,t}readInt(t){var e=this.readByte();let s=127&e;return 0!=(128&e)&&(e=this.readByte(),s|=(127&e)<<7,0!=(128&e))&&(e=this.readByte(),s|=(127&e)<<14,0!=(128&e))&&(e=this.readByte(),s|=(127&e)<<21,0!=(128&e))&&(e=this.readByte(),s|=(127&e)<<28),t?s:s>>>1^-(1&s)}readStringRef(){var t=this.readInt(!0);return 0==t?null:this.strings[t-1]}readString(){var e=this.readInt(!0);switch(e){case 0:return null;case 1:return""}e--;let s="";for(let t=0;t<e;){var r=this.readUnsignedByte();switch(r>>4){case 12:case 13:s+=String.fromCharCode((31&r)<<6|63&this.readByte()),t+=2;break;case 14:s+=String.fromCharCode((15&r)<<12|(63&this.readByte())<<6|63&this.readByte()),t+=3;break;default:s+=String.fromCharCode(r),t++}}return s}readFloat(){var t=this.buffer.getFloat32(this.index);return this.index+=4,t}readBoolean(){return 0!=this.readByte()}},ze=class{constructor(t,e,s,r,a){this.mesh=t,this.skin=e,this.slotIndex=s,this.parent=r,this.inheritTimeline=a}},Ge=class{constructor(t=null,e=null){this.bones=t,this.vertices=e}},w=(t=>(t[t.Region=0]="Region",t[t.BoundingBox=1]="BoundingBox",t[t.Mesh=2]="Mesh",t[t.LinkedMesh=3]="LinkedMesh",t[t.Path=4]="Path",t[t.Point=5]="Point",t[t.Clipping=6]="Clipping",t))(w||{});function Ht(r,a,i){let n=r.readFloat(),o=r.readFloat()*i;for(let t=0,e=0,s=a.getFrameCount()-1;a.setFrame(t,n,o),t!=s;t++){var h=r.readFloat(),l=r.readFloat()*i;switch(r.readByte()){case Kt:a.setStepped(t);break;case Qt:Jt(r,a,e++,t,0,n,h,o,l,i)}n=h,o=l}return a}function He(r,a,i){let n=r.readFloat(),o=r.readFloat()*i,h=r.readFloat()*i;for(let t=0,e=0,s=a.getFrameCount()-1;a.setFrame(t,n,o,h),t!=s;t++){var l=r.readFloat(),c=r.readFloat()*i,d=r.readFloat()*i;switch(r.readByte()){case Kt:a.setStepped(t);break;case Qt:Jt(r,a,e++,t,0,n,l,o,c,i),Jt(r,a,e++,t,1,n,l,h,d,i)}n=l,o=c,h=d}return a}function Jt(t,e,s,r,a,i,n,o,h,l){e.setBezier(s,r,a,i,o,t.readFloat(),t.readFloat()*l,t.readFloat(),t.readFloat()*l,n,h)}var Je,Ke=0,Qe=1,Ze=2,ts=3,es=4,ss=5,rs=6,as=7,is=8,ns=9,os=0,hs=1,ls=2,cs=3,ds=4,us=5,ms=0,ps=1,fs=0,gs=1,vs=2,Kt=1,Qt=2,xs=class{constructor(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new a(()=>fe.newFloatArray(16))}update(t,e){if(!t)throw new Error("skeleton cannot be null.");var s=this.boundingBoxes,r=this.polygons,a=this.polygonPool,i=t.slots,n=i.length;s.length=0,a.freeAll(r);for(let t=r.length=0;t<n;t++){var o=i[t];if(o.bone.active){var h=o.getAttachment();if(h instanceof Et){s.push(h);let t=a.obtain();t.length!=h.worldVerticesLength&&(t=fe.newFloatArray(h.worldVerticesLength)),r.push(t),h.computeWorldVertices(o,0,h.worldVerticesLength,t,0,2)}}}e?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)}aabbCompute(){let s=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,i=Number.NEGATIVE_INFINITY;var n=this.polygons;for(let t=0,e=n.length;t<e;t++){var o=n[t],h=o;for(let t=0,e=o.length;t<e;t+=2){var l=h[t],c=h[t+1];s=Math.min(s,l),r=Math.min(r,c),a=Math.max(a,l),i=Math.max(i,c)}}this.minX=s,this.minY=r,this.maxX=a,this.maxY=i}aabbContainsPoint(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY}aabbIntersectsSegment(t,e,s,r){var a=this.minX,i=this.minY,n=this.maxX,o=this.maxY;return!(t<=a&&s<=a||e<=i&&r<=i||n<=t&&n<=s||o<=e&&o<=r)&&(i<(s=(r=(r-e)/(s-t))*(a-t)+e)&&s<o||i<(s=r*(n-t)+e)&&s<o||a<(s=(i-e)/r+t)&&s<n||a<(s=(o-e)/r+t)&&s<n)}aabbIntersectsSkeleton(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY}containsPoint(s,r){var a=this.polygons;for(let t=0,e=a.length;t<e;t++)if(this.containsPointPolygon(a[t],s,r))return this.boundingBoxes[t];return null}containsPointPolygon(t,e,s){var r=t,a=t.length;let i=a-2,n=!1;for(let t=0;t<a;t+=2){var o,h=r[t+1],l=r[i+1];(h<s&&s<=l||l<s&&s<=h)&&(o=r[t])+(s-h)/(l-h)*(r[i]-o)<e&&(n=!n),i=t}return n}intersectsSegment(s,r,a,i){var n=this.polygons;for(let t=0,e=n.length;t<e;t++)if(this.intersectsSegmentPolygon(n[t],s,r,a,i))return this.boundingBoxes[t];return null}intersectsSegmentPolygon(t,e,s,r,a){var i=t,n=t.length,o=e-r,h=s-a,l=e*a-s*r;let c=i[n-2],d=i[n-1];for(let t=0;t<n;t+=2){var u=i[t],m=i[t+1],p=c*m-d*u,f=c-u,g=d-m,v=o*g-h*f,f=(l*f-o*p)/v;if((f>=c&&f<=u||u<=f&&f<=c)&&(e<=f&&f<=r||r<=f&&f<=e)){f=(l*g-h*p)/v;if((f>=d&&f<=m||m<=f&&f<=d)&&(s<=f&&f<=a||a<=f&&f<=s))return!0}c=u,d=m}return!1}getPolygon(t){if(t)return-1==(t=this.boundingBoxes.indexOf(t))?null:this.polygons[t];throw new Error("boundingBox cannot be null.")}getWidth(){return this.maxX-this.minX}getHeight(){return this.maxY-this.minY}},L=class{constructor(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new a(()=>new Array),this.polygonIndicesPool=new a(()=>new Array)}triangulate(t){var r=t;let a=t.length>>1;var i=this.indicesArray;for(let t=i.length=0;t<a;t++)i[t]=t;var n=this.isConcaveArray;for(let t=n.length=0,e=a;t<e;++t)n[t]=L.isConcave(t,a,r,i);var o=this.triangles;for(o.length=0;3<a;){let e=a-1,t=0,s=1;for(;;){t:if(!n[t]){var h=i[e]<<1,l=i[t]<<1,c=i[s]<<1,d=r[h],u=r[1+h],m=r[l],p=r[1+l],f=r[c],g=r[1+c];for(let t=(s+1)%a;t!=e;t=(t+1)%a)if(n[t]){var v=i[t]<<1,x=r[v],v=r[1+v];if(L.positiveArea(f,g,d,u,x,v)&&L.positiveArea(d,u,m,p,x,v)&&L.positiveArea(m,p,f,g,x,v))break t}break}if(0==s){for(;n[t]&&0<--t;);break}e=t,s=((t=s)+1)%a}o.push(i[(a+t-1)%a]),o.push(i[t]),o.push(i[(t+1)%a]),i.splice(t,1),n.splice(t,1);var w=(--a+t-1)%a,b=t==a?0:t;n[w]=L.isConcave(w,a,r,i),n[b]=L.isConcave(b,a,r,i)}return 3==a&&(o.push(i[2]),o.push(i[0]),o.push(i[1])),o}decompose(t,s){var r=t,o=this.convexPolygons,h=(this.polygonPool.freeAll(o),o.length=0,this.convexPolygonsIndices);this.polygonIndicesPool.freeAll(h),h.length=0;let l=this.polygonIndicesPool.obtain(),c=(l.length=0,this.polygonPool.obtain()),a=-1,i=c.length=0;for(let e=0,t=s.length;e<t;e+=3){var n,d,u=s[e]<<1,m=s[e+1]<<1,p=s[e+2]<<1,f=r[u],g=r[1+u],v=r[m],x=r[1+m],w=r[p],b=r[1+p];let t=!1;a==u&&(n=c.length-4,n=L.winding(c[n],c[1+n],c[2+n],c[3+n],w,b),d=L.winding(w,b,c[0],c[1],c[2],c[3]),n==i)&&d==i&&(c.push(w),c.push(b),l.push(p),t=!0),t||(0<c.length?(o.push(c),h.push(l)):(this.polygonPool.free(c),this.polygonIndicesPool.free(l)),(c=this.polygonPool.obtain()).length=0,c.push(f),c.push(g),c.push(v),c.push(x),c.push(w),c.push(b),(l=this.polygonIndicesPool.obtain()).length=0,l.push(u),l.push(m),l.push(p),i=L.winding(f,g,v,x,w,b),a=u)}0<c.length&&(o.push(c),h.push(l));for(let i=0,n=o.length;i<n;i++)if(0!=(l=h[i]).length){var y=l[0],A=l[l.length-1],I=(c=o[i]).length-4;let e=c[I],s=c[1+I],r=c[2+I],a=c[3+I];var E,S,k,T,R,C,M,F=c[0],Y=c[1],X=c[2],N=c[3],_=L.winding(e,s,r,a,F,Y);for(let t=0;t<n;t++)t!=i&&(3==(E=h[t]).length&&(C=E[0],M=E[1],S=E[2],T=(k=o[t])[k.length-2],R=k[k.length-1],C==y)&&M==A&&(C=L.winding(e,s,r,a,T,R),M=L.winding(T,R,F,Y,X,N),C==_)&&M==_)&&(k.length=0,E.length=0,c.push(T),c.push(R),l.push(S),e=r,s=a,r=T,a=R,t=0)}for(let t=o.length-1;0<=t;t--)0==(c=o[t]).length&&(o.splice(t,1),this.polygonPool.free(c),l=h[t],h.splice(t,1),this.polygonIndicesPool.free(l));return o}static isConcave(t,e,s,r){var a=r[(e+t-1)%e]<<1,i=r[t]<<1,r=r[(t+1)%e]<<1;return!this.positiveArea(s[a],s[1+a],s[i],s[1+i],s[r],s[1+r])}static positiveArea(t,e,s,r,a,i){return 0<=t*(i-r)+s*(e-i)+a*(r-e)}static winding(t,e,s,r,a,i){s-=t,r-=e;return 0<=a*r-i*s+s*e-t*r?1:-1}},ws=class{constructor(){this.triangulator=new L,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array,this.clipAttachment=null,this.clippingPolygons=null}clipStart(t,e){if(this.clipAttachment)return 0;var s=(this.clipAttachment=e).worldVerticesLength,r=fe.setArraySize(this.clippingPolygon,s),e=(e.computeWorldVertices(t,0,s,r,0,2),this.clippingPolygon),a=(ws.makeClockwise(e),this.clippingPolygons=this.triangulator.decompose(e,this.triangulator.triangulate(e)));for(let t=0,e=a.length;t<e;t++){var i=a[t];ws.makeClockwise(i),i.push(i[0]),i.push(i[1])}return a.length}clipEndWithSlot(t){this.clipAttachment&&this.clipAttachment.endSlot==t.data&&this.clipEnd()}clipEnd(){this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)}isClipping(){return null!=this.clipAttachment}clipTriangles(e,t,s,P,r,a,i,n){var o=this.clipOutput,h=this.clippedVertices,l=this.clippedTriangles,c=this.clippingPolygons,B=c.length,d=n?12:8;let u=0;h.length=0;t:for(let t=l.length=0;t<P;t+=3){var m=s[t]<<1,p=e[m],f=e[1+m],g=r[m],v=r[1+m],x=e[m=s[t+1]<<1],w=e[1+m],b=r[m],y=r[1+m],A=e[m=s[t+2]<<1],I=e[1+m],E=r[m],S=r[1+m];for(let t=0;t<B;t++){let e=h.length;if(!this.clip(p,f,x,w,A,I,c[t],o)){var k=fe.setArraySize(h,e+3*d),k=(k[e]=p,k[e+1]=f,k[e+2]=a.r,k[e+3]=a.g,k[e+4]=a.b,k[e+5]=a.a,n?(k[e+6]=g,k[e+7]=v,k[e+8]=i.r,k[e+9]=i.g,k[e+10]=i.b,k[e+11]=i.a,k[e+12]=x,k[e+13]=w,k[e+14]=a.r,k[e+15]=a.g,k[e+16]=a.b,k[e+17]=a.a,k[e+18]=b,k[e+19]=y,k[e+20]=i.r,k[e+21]=i.g,k[e+22]=i.b,k[e+23]=i.a,k[e+24]=A,k[e+25]=I,k[e+26]=a.r,k[e+27]=a.g,k[e+28]=a.b,k[e+29]=a.a,k[e+30]=E,k[e+31]=S,k[e+32]=i.r,k[e+33]=i.g,k[e+34]=i.b,k[e+35]=i.a):(k[e+6]=g,k[e+7]=v,k[e+8]=x,k[e+9]=w,k[e+10]=a.r,k[e+11]=a.g,k[e+12]=a.b,k[e+13]=a.a,k[e+14]=b,k[e+15]=y,k[e+16]=A,k[e+17]=I,k[e+18]=a.r,k[e+19]=a.g,k[e+20]=a.b,k[e+21]=a.a,k[e+22]=E,k[e+23]=S),e=l.length,fe.setArraySize(l,e+3));k[e]=u,k[e+1]=u+1,k[e+2]=u+2,u+=3;continue t}var T=o.length;if(0!=T){var R=w-I,C=A-x,M=p-A,D=I-f,O=1/(R*M+C*(f-I)),F=T>>1,$=this.clipOutput,Y=fe.setArraySize(h,e+F*d);for(let t=0;t<T;t+=2){var X=$[t],N=$[t+1],X=(Y[e]=X,Y[e+1]=N,Y[e+2]=a.r,Y[e+3]=a.g,Y[e+4]=a.b,Y[e+5]=a.a,X-A),N=N-I,_=(R*X+C*N)*O,X=(D*X+M*N)*O,N=1-_-X;Y[e+6]=g*_+b*X+E*N,Y[e+7]=v*_+y*X+S*N,n&&(Y[e+8]=i.r,Y[e+9]=i.g,Y[e+10]=i.b,Y[e+11]=i.a),e+=d}e=l.length;var L=fe.setArraySize(l,e+3*(F-2));F--;for(let t=1;t<F;t++)L[e]=u,L[e+1]=u+t,L[e+2]=u+t+1,e+=3;u+=1+F}}}}clip(t,e,s,r,a,i,n,o){var h=o;let l=!1,c;2<=n.length%4?(c=o,o=this.scratch):c=this.scratch,c.length=0,c.push(t),c.push(e),c.push(s),c.push(r),c.push(a),c.push(i),c.push(t),c.push(e),o.length=0;var d=n,u=n.length-4;for(let t=0;;t+=2){var m=d[t],p=d[t+1],f=d[t+2],g=d[t+3],v=m-f,x=p-g,w=c,b=c.length-2,y=o.length;for(let t=0;t<b;t+=2){var A=w[t],I=w[t+1],E=w[t+2],S=w[t+3],k=0<v*(S-g)-x*(E-f);if(0<v*(I-g)-x*(A-f)){if(k){o.push(E),o.push(S);continue}var T=S-I,R=E-A,C=T*(f-m)-R*(g-p);1e-6<Math.abs(C)?(o.push(m+(f-m)*(R=(R*(p-I)-T*(m-A))/C)),o.push(p+(g-p)*R)):(o.push(m),o.push(p))}else k&&(R=(T=S-I)*(f-m)-(C=E-A)*(g-p),1e-6<Math.abs(R)?(o.push(m+(f-m)*(k=(C*(p-I)-T*(m-A))/R)),o.push(p+(g-p)*k)):(o.push(m),o.push(p)),o.push(E),o.push(S));l=!0}if(y==o.length)return!(h.length=0);if(o.push(o[0]),o.push(o[1]),t==u)break;y=o;(o=c).length=0,c=y}if(h!=o)for(let t=h.length=0,e=o.length-2;t<e;t++)h[t]=o[t];else h.length=h.length-2;return l}static makeClockwise(r){var a=r,r=r.length;let s=a[r-2]*a[1]-a[0]*a[r-1],i,n,o,h;for(let t=0,e=r-3;t<e;t+=2)i=a[t],n=a[t+1],o=a[t+2],h=a[t+3],s+=i*h-o*n;if(!(s<0))for(let t=0,e=r-2,s=r>>1;t<s;t+=2){var l=a[t],c=a[t+1],d=e-t;a[t]=a[d],a[t+1]=a[1+d],a[d]=l,a[1+d]=c}}},bs=class{constructor(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}readSkeletonData(t){var s=this.scale,r=new ne,a="string"==typeof t?JSON.parse(t):t,t=a.skeleton;if(t&&(r.hash=t.hash,r.version=t.spine,r.x=t.x,r.y=t.y,r.width=t.width,r.height=t.height,r.fps=t.fps,r.imagesPath=t.images),a.bones)for(let e=0;e<a.bones.length;e++){var i=a.bones[e];let t=null;var n=Ee(i,"parent",null),n=(n&&(t=r.findBone(n)),new Bt(r.bones.length,i.name,t)),i=(n.length=Ee(i,"length",0)*s,n.x=Ee(i,"x",0)*s,n.y=Ee(i,"y",0)*s,n.rotation=Ee(i,"rotation",0),n.scaleX=Ee(i,"scaleX",1),n.scaleY=Ee(i,"scaleY",1),n.shearX=Ee(i,"shearX",0),n.shearY=Ee(i,"shearY",0),n.transformMode=fe.enumValue(Dt,Ee(i,"transform","Normal")),n.skinRequired=Ee(i,"skin",!1),Ee(i,"color",null));i&&n.color.setFromString(i),r.bones.push(n)}if(a.slots)for(let t=0;t<a.slots.length;t++){var e=a.slots[t],o=r.findBone(e.bone);if(!o)throw new Error(`Couldn't find bone ${e.bone} for slot `+e.name);var o=new le(r.slots.length,e.name,o),h=Ee(e,"color",null),h=(h&&o.color.setFromString(h),Ee(e,"dark",null));h&&(o.darkColor=pe.fromString(h)),o.attachmentName=Ee(e,"attachment",null),o.blendMode=fe.enumValue(ce,Ee(e,"blend","normal")),r.slots.push(o)}if(a.ik)for(let t=0;t<a.ik.length;t++){var l=a.ik[t],c=new jt(l.name);c.order=Ee(l,"order",0),c.skinRequired=Ee(l,"skin",!1);for(let t=0;t<l.bones.length;t++){var d=r.findBone(l.bones[t]);if(!d)throw new Error(`Couldn't find bone ${l.bones[t]} for IK constraint ${l.name}.`);c.bones.push(d)}var u=r.findBone(l.target);if(!u)throw new Error(`Couldn't find target bone ${l.target} for IK constraint ${l.name}.`);c.target=u,c.mix=Ee(l,"mix",1),c.softness=Ee(l,"softness",0)*s,c.bendDirection=Ee(l,"bendPositive",!0)?1:-1,c.compress=Ee(l,"compress",!1),c.stretch=Ee(l,"stretch",!1),c.uniform=Ee(l,"uniform",!1),r.ikConstraints.push(c)}if(a.transform)for(let t=0;t<a.transform.length;t++){var m=a.transform[t],p=new de(m.name);p.order=Ee(m,"order",0),p.skinRequired=Ee(m,"skin",!1);for(let t=0;t<m.bones.length;t++){var f=m.bones[t],g=r.findBone(f);if(!g)throw new Error(`Couldn't find bone ${f} for transform constraint ${m.name}.`);p.bones.push(g)}var v=m.target,x=r.findBone(v);if(!x)throw new Error(`Couldn't find target bone ${v} for transform constraint ${m.name}.`);p.target=x,p.local=Ee(m,"local",!1),p.relative=Ee(m,"relative",!1),p.offsetRotation=Ee(m,"rotation",0),p.offsetX=Ee(m,"x",0)*s,p.offsetY=Ee(m,"y",0)*s,p.offsetScaleX=Ee(m,"scaleX",0),p.offsetScaleY=Ee(m,"scaleY",0),p.offsetShearY=Ee(m,"shearY",0),p.mixRotate=Ee(m,"mixRotate",1),p.mixX=Ee(m,"mixX",1),p.mixY=Ee(m,"mixY",p.mixX),p.mixScaleX=Ee(m,"mixScaleX",1),p.mixScaleY=Ee(m,"mixScaleY",p.mixScaleX),p.mixShearY=Ee(m,"mixShearY",1),r.transformConstraints.push(p)}if(a.path)for(let t=0;t<a.path.length;t++){var w=a.path[t],b=new zt(w.name);b.order=Ee(w,"order",0),b.skinRequired=Ee(w,"skin",!1);for(let t=0;t<w.bones.length;t++){var y=w.bones[t],A=r.findBone(y);if(!A)throw new Error(`Couldn't find bone ${y} for path constraint ${w.name}.`);b.bones.push(A)}var I=w.target,E=r.findSlot(I);if(!E)throw new Error(`Couldn't find target slot ${I} for path constraint ${w.name}.`);b.target=E,b.positionMode=fe.enumValue(Gt,Ee(w,"positionMode","Percent")),b.spacingMode=fe.enumValue(te,Ee(w,"spacingMode","Length")),b.rotateMode=fe.enumValue(ee,Ee(w,"rotateMode","Tangent")),b.offsetRotation=Ee(w,"rotation",0),b.position=Ee(w,"position",0),0==b.positionMode&&(b.position*=s),b.spacing=Ee(w,"spacing",0),0!=b.spacingMode&&1!=b.spacingMode||(b.spacing*=s),b.mixRotate=Ee(w,"mixRotate",1),b.mixX=Ee(w,"mixX",1),b.mixY=Ee(w,"mixY",b.mixX),r.pathConstraints.push(b)}if(a.skins)for(let t=0;t<a.skins.length;t++){var S,k=a.skins[t],T=new he(k.name);if(k.bones)for(let t=0;t<k.bones.length;t++){var R=k.bones[t],C=r.findBone(R);if(!C)throw new Error(`Couldn't find bone ${R} for skin ${k.name}.`);T.bones.push(C)}if(k.ik)for(let t=0;t<k.ik.length;t++){var L=k.ik[t],P=r.findIkConstraint(L);if(!P)throw new Error(`Couldn't find IK constraint ${L} for skin ${k.name}.`);T.constraints.push(P)}if(k.transform)for(let t=0;t<k.transform.length;t++){var B=k.transform[t],D=r.findTransformConstraint(B);if(!D)throw new Error(`Couldn't find transform constraint ${B} for skin ${k.name}.`);T.constraints.push(D)}if(k.path)for(let t=0;t<k.path.length;t++){var O=k.path[t],$=r.findPathConstraint(O);if(!$)throw new Error(`Couldn't find path constraint ${O} for skin ${k.name}.`);T.constraints.push($)}for(S in k.attachments){var M=r.findSlot(S);if(!M)throw new Error(`Couldn't find slot ${S} for skin ${k.name}.`);var F,V=k.attachments[S];for(F in V){var U=this.readAttachment(V[F],T,M.index,F,r);U&&T.setAttachment(M.index,F,U)}}r.skins.push(T),"default"==T.name&&(r.defaultSkin=T)}for(let t=0,e=this.linkedMeshes.length;t<e;t++){var Y=this.linkedMeshes[t],X=Y.skin?r.findSkin(Y.skin):r.defaultSkin;if(!X)throw new Error("Skin not found: "+Y.skin);X=X.getAttachment(Y.slotIndex,Y.parent);if(!X)throw new Error("Parent mesh not found: "+Y.parent);Y.mesh.timelineAttachment=Y.inheritTimeline?X:Y.mesh,Y.mesh.setParentMesh(X),null!=Y.mesh.region&&Y.mesh.updateRegion()}if(this.linkedMeshes.length=0,a.events)for(var N in a.events){var _=a.events[N],N=new qt(N);N.intValue=Ee(_,"int",0),N.floatValue=Ee(_,"float",0),N.stringValue=Ee(_,"string",""),N.audioPath=Ee(_,"audio",null),N.audioPath&&(N.volume=Ee(_,"volume",1),N.balance=Ee(_,"balance",0)),r.events.push(N)}if(a.animations)for(var q in a.animations){var W=a.animations[q];this.readAnimation(W,q,r)}return r}readAttachment(e,t,s,r,a){var i=this.scale;switch(r=Ee(e,"name",r),Ee(e,"type","region")){case"region":var n=Ee(e,"path",r),o=this.readSequence(Ee(e,"sequence",null)),h=this.attachmentLoader.newRegionAttachment(t,r,n,o);if(!h)return null;h.path=n,h.x=Ee(e,"x",0)*i,h.y=Ee(e,"y",0)*i,h.scaleX=Ee(e,"scaleX",1),h.scaleY=Ee(e,"scaleY",1),h.rotation=Ee(e,"rotation",0),h.width=e.width*i,h.height=e.height*i,h.sequence=o;n=Ee(e,"color",null);return n&&h.color.setFromString(n),null!=h.region&&h.updateRegion(),h;case"boundingbox":o=this.attachmentLoader.newBoundingBoxAttachment(t,r);if(!o)return null;this.readVertices(e,o,e.vertexCount<<1);n=Ee(e,"color",null);return n&&o.color.setFromString(n),o;case"mesh":case"linkedmesh":h=Ee(e,"path",r),n=this.readSequence(Ee(e,"sequence",null)),o=this.attachmentLoader.newMeshAttachment(t,r,h,n);if(!o)return null;o.path=h;h=Ee(e,"color",null),h=(h&&o.color.setFromString(h),o.width=Ee(e,"width",0)*i,o.height=Ee(e,"height",0)*i,o.sequence=n,Ee(e,"parent",null));return h?this.linkedMeshes.push(new ys(o,Ee(e,"skin",null),s,h,Ee(e,"timelines",!0))):(n=e.uvs,this.readVertices(e,o,n.length),o.triangles=e.triangles,o.regionUVs=n,null!=o.region&&o.updateRegion(),o.edges=Ee(e,"edges",null),o.hullLength=2*Ee(e,"hull",0)),o;case"path":h=this.attachmentLoader.newPathAttachment(t,r);if(!h)return null;h.closed=Ee(e,"closed",!1),h.constantSpeed=Ee(e,"constantSpeed",!0);var n=e.vertexCount,l=(this.readVertices(e,h,n<<1),fe.newArray(n/3,0));for(let t=0;t<e.lengths.length;t++)l[t]=e.lengths[t]*i;h.lengths=l;o=Ee(e,"color",null);return o&&h.color.setFromString(o),h;case"point":n=this.attachmentLoader.newPointAttachment(t,r);if(!n)return null;n.x=Ee(e,"x",0)*i,n.y=Ee(e,"y",0)*i,n.rotation=Ee(e,"rotation",0);o=Ee(e,"color",null);return o&&n.color.setFromString(o),n;case"clipping":h=this.attachmentLoader.newClippingAttachment(t,r);return h?((o=Ee(e,"end",null))&&(h.endSlot=a.findSlot(o)),n=e.vertexCount,this.readVertices(e,h,n<<1),(o=Ee(e,"color",null))&&h.color.setFromString(o),h):null}return null}readSequence(t){var e;return null==t?null:((e=new N(Ee(t,"count",0))).start=Ee(t,"start",1),e.digits=Ee(t,"digits",0),e.setupIndex=Ee(t,"setup",0),e)}readVertices(t,e,s){var r=this.scale,a=(e.worldVerticesLength=s,t.vertices);if(s==a.length){var i=fe.toFloatArray(a);if(1!=r)for(let t=0,e=a.length;t<e;t++)i[t]*=r;e.vertices=i}else{var n=new Array,o=new Array;for(let t=0,e=a.length;t<e;){var h=a[t++];o.push(h);for(var l=t+4*h;t<l;t+=4)o.push(a[t]),n.push(a[t+1]*r),n.push(a[t+2]*r),n.push(a[t+3])}e.bones=o,e.vertices=fe.toFloatArray(n)}}readAnimation(s,L,l){var o=this.scale,c=new Array;if(s.slots)for(var P in s.slots){var B=s.slots[P],D=l.findSlot(P);if(!D)throw new Error("Slot not found: "+P);var t,e=D.index;for(t in B){var n=B[t];if(n){var h=n.length;if("attachment"==t){var O=new xe(h,e);for(let t=0;t<h;t++){var $=n[t];O.setFrame(t,Ee($,"time",0),Ee($,"name",null))}c.push(O)}else if("rgba"==t){var i=new _e(h,h<<2,e);let s=n[0],r=Ee(s,"time",0),a=pe.fromString(s.color);for(let t=0,e=0;;t++){i.setFrame(t,r,a.r,a.g,a.b,a.a);var V=n[t+1];if(!V){i.shrink(e);break}var d=Ee(V,"time",0),u=pe.fromString(V.color),m=s.curve;m&&(e=Ie(m,i,e,t,0,r,d,a.r,u.r,1),e=Ie(m,i,e,t,1,r,d,a.g,u.g,1),e=Ie(m,i,e,t,2,r,d,a.b,u.b,1),e=Ie(m,i,e,t,3,r,d,a.a,u.a,1)),r=d,a=u,s=V}c.push(i)}else if("rgb"==t){var p=new Le(h,3*h,e);let s=n[0],r=Ee(s,"time",0),a=pe.fromString(s.color);for(let t=0,e=0;;t++){p.setFrame(t,r,a.r,a.g,a.b);var U=n[t+1];if(!U){p.shrink(e);break}var q=Ee(U,"time",0),W=pe.fromString(U.color),j=s.curve;j&&(e=Ie(j,p,e,t,0,r,q,a.r,W.r,1),e=Ie(j,p,e,t,1,r,q,a.g,W.g,1),e=Ie(j,p,e,t,2,r,q,a.b,W.b,1)),r=q,a=W,s=U}c.push(p)}else if("alpha"==t)c.push(Ae(n,new Pe(h,h,e),0,1));else if("rgba2"==t){var f=new Be(h,7*h,e);let s=n[0],r=Ee(s,"time",0),a=pe.fromString(s.light),i=pe.fromString(s.dark);for(let t=0,e=0;;t++){f.setFrame(t,r,a.r,a.g,a.b,a.a,i.r,i.g,i.b);var g=n[t+1];if(!g){f.shrink(e);break}var v=Ee(g,"time",0),z=pe.fromString(g.light),G=pe.fromString(g.dark),x=s.curve;x&&(e=Ie(x,f,e,t,0,r,v,a.r,z.r,1),e=Ie(x,f,e,t,1,r,v,a.g,z.g,1),e=Ie(x,f,e,t,2,r,v,a.b,z.b,1),e=Ie(x,f,e,t,3,r,v,a.a,z.a,1),e=Ie(x,f,e,t,4,r,v,i.r,G.r,1),e=Ie(x,f,e,t,5,r,v,i.g,G.g,1),e=Ie(x,f,e,t,6,r,v,i.b,G.b,1)),r=v,a=z,i=G,s=g}c.push(f)}else if("rgb2"==t){var w=new De(h,6*h,e);let s=n[0],r=Ee(s,"time",0),a=pe.fromString(s.light),i=pe.fromString(s.dark);for(let t=0,e=0;;t++){w.setFrame(t,r,a.r,a.g,a.b,i.r,i.g,i.b);var H=n[t+1];if(!H){w.shrink(e);break}var b=Ee(H,"time",0),J=pe.fromString(H.light),K=pe.fromString(H.dark),y=s.curve;y&&(e=Ie(y,w,e,t,0,r,b,a.r,J.r,1),e=Ie(y,w,e,t,1,r,b,a.g,J.g,1),e=Ie(y,w,e,t,2,r,b,a.b,J.b,1),e=Ie(y,w,e,t,3,r,b,i.r,K.r,1),e=Ie(y,w,e,t,4,r,b,i.g,K.g,1),e=Ie(y,w,e,t,5,r,b,i.b,K.b,1)),r=b,a=J,i=K,s=H}c.push(w)}}}}if(s.bones)for(var Q in s.bones){var Z=s.bones[Q],tt=l.findBone(Q);if(!tt)throw new Error("Bone not found: "+Q);var r,a=tt.index;for(r in Z){var et,st,rt,at,A=Z[r],I=A.length;0!=I&&("rotate"===r?c.push(Ae(A,new ve(I,I,a),0,1)):"translate"===r?(et=new ke(I,I<<1,a),c.push(As(A,et,"x","y",0,o))):"translatex"===r?(et=new Te(I,I,a),c.push(Ae(A,et,0,o))):"translatey"===r?(st=new Re(I,I,a),c.push(Ae(A,st,0,o))):"scale"===r?(st=new Ce(I,I<<1,a),c.push(As(A,st,"x","y",1,1))):"scalex"===r?(rt=new Me(I,I,a),c.push(Ae(A,rt,1,1))):"scaley"===r?(rt=new Fe(I,I,a),c.push(Ae(A,rt,1,1))):"shear"===r?(at=new Ye(I,I<<1,a),c.push(As(A,at,"x","y",0,1))):"shearx"===r?(at=new Xe(I,I,a),c.push(Ae(A,at,0,1))):"sheary"===r&&(I=new Ne(I,I,a),c.push(Ae(A,I,0,1))))}}if(s.ik)for(var it in s.ik){var nt=s.ik[it];let i=nt[0];if(i){var ot=l.findIkConstraint(it);if(!ot)throw new Error("IK Constraint not found: "+it);var it=l.ikConstraints.indexOf(ot),ht=new $e(nt.length,nt.length<<1,it);let s=Ee(i,"time",0),r=Ee(i,"mix",1),a=Ee(i,"softness",0)*o;for(let t=0,e=0;;t++){ht.setFrame(t,s,r,a,Ee(i,"bendPositive",!0)?1:-1,Ee(i,"compress",!1),Ee(i,"stretch",!1));var lt=nt[t+1];if(!lt){ht.shrink(e);break}var ct=Ee(lt,"time",0),dt=Ee(lt,"mix",1),ut=Ee(lt,"softness",0)*o,mt=i.curve;mt&&(e=Ie(mt,ht,e,t,0,s,ct,r,dt,1),e=Ie(mt,ht,e,t,1,s,ct,a,ut,o)),s=ct,r=dt,a=ut,i=lt}c.push(ht)}}if(s.transform)for(var pt in s.transform){var ft=s.transform[pt];let h=ft[0];if(h){var gt=l.findTransformConstraint(pt);if(!gt)throw new Error("Transform constraint not found: "+pt);var pt=l.transformConstraints.indexOf(gt),E=new Ve(ft.length,6*ft.length,pt);let s=Ee(h,"time",0),r=Ee(h,"mixRotate",1),a=Ee(h,"mixX",1),i=Ee(h,"mixY",a),n=Ee(h,"mixScaleX",1),o=Ee(h,"mixScaleY",n);var vt=Ee(h,"mixShearY",1);for(let t=0,e=0;;t++){E.setFrame(t,s,r,a,i,n,o,vt);var S=ft[t+1];if(!S){E.shrink(e);break}var k=Ee(S,"time",0),xt=Ee(S,"mixRotate",1),wt=Ee(S,"mixX",1),bt=Ee(S,"mixY",wt),yt=Ee(S,"mixScaleX",1),At=Ee(S,"mixScaleY",yt),It=Ee(S,"mixShearY",1),T=h.curve;T&&(e=Ie(T,E,e,t,0,s,k,r,xt,1),e=Ie(T,E,e,t,1,s,k,a,wt,1),e=Ie(T,E,e,t,2,s,k,i,bt,1),e=Ie(T,E,e,t,3,s,k,n,yt,1),e=Ie(T,E,e,t,4,s,k,o,At,1),e=Ie(T,E,e,t,5,s,k,vt,It,1)),s=k,r=xt,a=wt,i=bt,n=yt,o=At,n=yt,h=S}c.push(E)}}if(s.path)for(var Et in s.path){var St=s.path[Et],kt=l.findPathConstraint(Et);if(!kt)throw new Error("Path constraint not found: "+Et);var Tt,Rt=l.pathConstraints.indexOf(kt);for(Tt in St){var Ct=St[Tt];let n=Ct[0];if(n){var R=Ct.length;if("position"===Tt){var Mt=new Ue(R,R,Rt);c.push(Ae(Ct,Mt,0,0==kt.positionMode?o:1))}else if("spacing"===Tt){Mt=new qe(R,R,Rt);c.push(Ae(Ct,Mt,0,0==kt.spacingMode||1==kt.spacingMode?o:1))}else if("mix"===Tt){var C=new We(R,3*R,Rt);let s=Ee(n,"time",0),r=Ee(n,"mixRotate",1),a=Ee(n,"mixX",1),i=Ee(n,"mixY",a);for(let t=0,e=0;;t++){C.setFrame(t,s,r,a,i);var M=Ct[t+1];if(!M){C.shrink(e);break}var Ft=Ee(M,"time",0),Yt=Ee(M,"mixRotate",1),Xt=Ee(M,"mixX",1),Nt=Ee(M,"mixY",Xt),_t=n.curve;_t&&(e=Ie(_t,C,e,t,0,s,Ft,r,Yt,1),e=Ie(_t,C,e,t,1,s,Ft,a,Xt,1),e=Ie(_t,C,e,t,2,s,Ft,i,Nt,1)),s=Ft,r=Yt,a=Xt,i=Nt,n=M}c.push(C)}}}}if(s.attachments)for(var Lt in s.attachments){var Pt,Bt=s.attachments[Lt],Dt=l.findSkin(Lt);if(!Dt)throw new Error("Skin not found: "+Lt);for(Pt in Bt){var Ot=Bt[Pt],$t=l.findSlot(Pt);if(!$t)throw new Error("Slot not found: "+Pt);var Vt,Ut=$t.index;for(Vt in Ot){var qt,Wt=Ot[Vt],jt=Dt.getAttachment(Ut,Vt);for(qt in Wt){var F=Wt[qt];let a=F[0];if(a)if("deform"==qt){var zt=jt.bones,Gt=jt.vertices,Ht=zt?Gt.length/3*2:Gt.length,Jt=new Oe(F.length,F.length,Ut,jt);let r=Ee(a,"time",0);for(let t=0,e=0;;t++){let s;var Y=Ee(a,"vertices",null);if(Y){s=fe.newFloatArray(Ht);var X=Ee(a,"offset",0);if(fe.arrayCopy(Y,0,s,X,Y.length),1!=o)for(let t=X,e=t+Y.length;t<e;t++)s[t]*=o;if(!zt)for(let t=0;t<Ht;t++)s[t]+=Gt[t]}else s=zt?fe.newFloatArray(Ht):Gt;Jt.setFrame(t,r,s);X=F[t+1];if(!X){Jt.shrink(e);break}var Y=Ee(X,"time",0),Kt=a.curve;Kt&&(e=Ie(Kt,Jt,e,t,0,r,Y,0,1,1)),r=Y,a=X}c.push(Jt)}else if("sequence"==qt){var Qt=new ye(F.length,Ut,jt);let e=0;for(let t=0;t<F.length;t++){var Zt=Ee(a,"delay",e),te=Ee(a,"time",0),ee=Se[Ee(a,"mode","hold")],se=Ee(a,"index",0);Qt.setFrame(t,te,ee,se,Zt),e=Zt,a=F[t+1]}c.push(Qt)}}}}}if(s.drawOrder){var re=new be(s.drawOrder.length),ae=l.slots.length;let e=0;for(let t=0;t<s.drawOrder.length;t++,e++){var ie=s.drawOrder[t];let r=null;var ne=Ee(ie,"offsets",null);if(ne){r=fe.newArray(ae,-1);var oe=fe.newArray(ae-ne.length,0);let e=0,s=0;for(let t=0;t<ne.length;t++){var he=ne[t],le=l.findSlot(he.slot);if(!le)throw new Error("Slot not found: "+le);for(var ce=le.index;e!=ce;)oe[s++]=e++;r[e+he.offset]=e++}for(;e<ae;)oe[s++]=e++;for(let t=ae-1;0<=t;t--)-1==r[t]&&(r[t]=oe[--s])}re.setFrame(e,Ee(ie,"time",0),r)}c.push(re)}if(s.events){var de=new we(s.events.length);let e=0;for(let t=0;t<s.events.length;t++,e++){var N=s.events[t],ue=l.findEvent(N.name);if(!ue)throw new Error("Event not found: "+N.name);var _=new je(fe.toSinglePrecision(Ee(N,"time",0)),ue);_.intValue=Ee(N,"int",ue.intValue),_.floatValue=Ee(N,"float",ue.floatValue),_.stringValue=Ee(N,"string",ue.stringValue),_.data.audioPath&&(_.volume=Ee(N,"volume",1),_.balance=Ee(N,"balance",0)),de.setFrame(e,_)}c.push(de)}let me=0;for(let t=0,e=c.length;t<e;t++)me=Math.max(me,c[t].getDuration());l.animations.push(new ge(L,c,me))}},ys=class{constructor(t,e,s,r,a){this.mesh=t,this.skin=e,this.slotIndex=s,this.parent=r,this.inheritTimeline=a}};function Ae(e,s,r,a){let i=e[0],n=Ee(i,"time",0),o=Ee(i,"value",r)*a,h=0;for(let t=0;;t++){s.setFrame(t,n,o);var l=e[t+1];if(!l)return s.shrink(h),s;var c=Ee(l,"time",0),d=Ee(l,"value",r)*a;i.curve&&(h=Ie(i.curve,s,h,t,0,n,c,o,d,a)),n=c,o=d,i=l}}function As(e,s,r,a,i,n){let o=e[0],h=Ee(o,"time",0),l=Ee(o,r,i)*n,c=Ee(o,a,i)*n,d=0;for(let t=0;;t++){s.setFrame(t,h,l,c);var u=e[t+1];if(!u)return s.shrink(d),s;var m=Ee(u,"time",0),p=Ee(u,r,i)*n,f=Ee(u,a,i)*n,g=o.curve;g&&(d=Ie(g,s,d,t,0,h,m,l,p,n),d=Ie(g,s,d,t,1,h,m,c,f,n)),h=m,l=p,c=f,o=u}}function Ie(t,e,s,r,a,i,n,o,h,l){var c,d,u,m;return"stepped"==t?(e.setStepped(r),s):(d=t[c=a<<2],u=t[1+c]*l,m=t[2+c],t=t[3+c]*l,e.setBezier(s,r,a,i,o,d,u,m,t,n,h),s+1)}function Ee(t,e,s){return void 0!==t[e]?t[e]:s}void 0===Math.fround&&(Math.fround=(Je=new Float32Array(1),function(t){return Je[0]=t,Je[0]}));var tt=y,Is=g({},"__esModule",{value:!0}),h=tt,Es=void 0,Ss=void 0;if(h&&"object"==typeof h||"function"==typeof h)for(let t of x(h))b.call(Is,t)||t===Es||g(Is,t,{get:()=>h[t],enumerable:!(Ss=v(h,t))||Ss.enumerable});return Is})(),semver=(pc.extend(pc,function(){function n(t,e,s){var r=s&&s.lexicographical,s=s&&s.zeroExtend,a=t.split("."),i=e.split(".");function n(t){return(r?/^\d+[A-Za-z]*$/:/^\d+$/).test(t)}if(!a.every(n)||!i.every(n))return NaN;if(s){for(;a.length<i.length;)a.push("0");for(;i.length<a.length;)i.push("0")}r||(a=a.map(Number),i=i.map(Number));for(var o=0;o<a.length;++o){if(i.length===o)return 1;if(a[o]!==i[o])return a[o]>i[o]?1:-1}return a.length!==i.length?-1:0}function o(t){this._image={width:t.width,height:t.height},this.pcTexture=t}function t(t,e,s,r){var a;if(this._app=t,this._position=new pc.Vec3,1===spine.TextureAtlas.length)for(const i of(a=new spine.TextureAtlas(e)).pages)i.setTexture(new o(r[i.name]));else a=new spine.TextureAtlas(e,function(t){return new o(r[t])});(t=new spine.SkeletonJson(new spine.AtlasAttachmentLoader(a))).scale*=.01,e=t.readSkeletonData(s),this.skeletonVersion=e.version,this._spine_3_6_0=n(this.skeletonVersion,"3.6.0")<=0,this._spine_3_7_99=n(this.skeletonVersion,"3.7.99")<=0,this._spine_4_1_X=semver.satisfies(semver.valid(semver.coerce(this.skeletonVersion)),"~4.1.23"),this.skeleton=new spine.Skeleton(e),this.skeleton.updateWorldTransform(),this.stateData=new spine.AnimationStateData(this.skeleton.data),this.states=[new spine.AnimationState(this.stateData)],this.clipper=new spine.SkeletonClipping,this._node=new pc.GraphNode,this._meshes=[],this._meshInstances=[],this._materials={},this._tint={},this._aabb=new pc.BoundingBox,this._aabbTempArray=[],this._aabbTempOffset=new pc.Vec2,this._aabbTempSize=new pc.Vec2,this._renderCounts={vertexCount:0,indexCount:0},this._vertexFormat=null,this._vertexBuffer=null,this._indexBuffer=null,this._priority=0,this._timeScale=1,this._layers=[pc.LAYERID_UI],this.init(),this.autoUpdate=!0,this._hidden=!1}var h=0,l=1,c=2,s={9728:pc.FILTER_NEAREST,9729:pc.FILTER_LINEAR,9984:pc.FILTER_NEAREST_MIPMAP_NEAREST,9985:pc.FILTER_LINEAR_MIPMAP_NEAREST,9986:pc.FILTER_NEAREST_MIPMAP_LINEAR,9987:pc.FILTER_LINEAR_MIPMAP_LINEAR},r={33648:pc.ADDRESS_MIRRORED_REPEAT,33071:pc.ADDRESS_CLAMP_TO_EDGE,10487:pc.ADDRESS_REPEAT},d=[0,1,2,2,3,0];o.prototype={setFilters:function(t,e){this.pcTexture.minFilter=s[t],this.pcTexture.magFilter=s[e]},setWraps:function(t,e){this.pcTexture.addressU=r[t],this.pcTexture.addressV=r[e]},getImage:function(){return this._image},dispose:function(){this.pcTexture.destroy()}};return t.prototype.destroy=function(){this.removeFromLayers();for(var t=0;t<this._meshInstances.length;t++)this._meshInstances[t].mesh.vertexBuffer=null,this._meshInstances[t].mesh.indexBuffer.length=0,this._meshInstances[t].material=null;this._vertexBuffer&&(this._vertexBuffer.destroy(),this._vertexBuffer=null),this._indexBuffer&&(this._indexBuffer.destroy(),this._indexBuffer=null),this._meshInstances=[],this.skeleton=null,this.stateData=null,this._materials={},this._node=null},t.prototype.hide=function(){if(!this._hidden){for(var t=0,e=this._meshInstances.length;t<e;t++)this._meshInstances[t].visible=!1;this._hidden=!0}},t.prototype.show=function(){if(this._hidden){for(var t=0,e=this._meshInstances.length;t<e;t++)this._meshInstances[t].visible=!0;this._hidden=!1}},t.prototype.init=function(){this._vertexFormat=new pc.VertexFormat(this._app.graphicsDevice,[{semantic:pc.SEMANTIC_POSITION,components:2,type:pc.TYPE_FLOAT32},{semantic:pc.SEMANTIC_NORMAL,components:4,type:pc.TYPE_UINT8,normalize:!0},{semantic:pc.SEMANTIC_TEXCOORD0,components:2,type:pc.TYPE_FLOAT32},{semantic:pc.SEMANTIC_COLOR,components:4,type:pc.TYPE_UINT8,normalize:!0}]);for(var t=this.skeleton.drawOrder,e=0,s=t.length;e<s;e++)this.initSlot(t[e])},t.prototype.initSlot=function(t){t.positions=[],t.uvs=[],t.indices=[],t.vertexColor={},t._active={name:"",type:h},this.initAttachment(t)},t.prototype.createMaterial=function(t){var e=new pc.StandardMaterial;return e.shadingModel=pc.SPECULAR_BLINN,e.diffuse=new pc.Color(1,1,1),e.emissiveMap=t,e.emissiveMapChannel="rgb",e.emissiveVertexColor=!0,e.emissiveVertexColorChannel="rgb",e.opacityMap=t,e.opacityMapChannel="a",e.opacityVertexColor=!0,e.opacityVertexColorChannel="a",e.depthWrite=!1,e.cull=pc.CULLFACE_NONE,e.blendType=pc.BLEND_PREMULTIPLIED,this._spine_3_6_0&&(t=["gl_FragColor.rgb *= vVertexColor.a;","gl_FragColor.a = dAlpha;"].join("\n"),e.chunks.outputAlphaPremulPS=t),e.update(),e},t.prototype.initAttachment=function(t){var e,s=t.attachment;s&&(t._active.name=s.name,s instanceof spine.RegionAttachment?t._active.type=c:s instanceof spine.MeshAttachment&&(t._active.type=l),s.region)&&s.region.texture&&(s=s.region.texture.pcTexture)&&(s instanceof pc.StandardMaterial?(this._materials[s.name]=s,t.material=s.name):(e=null,s.name?e=s.name:s.getSource()instanceof Image&&(e=s.getSource().getAttribute("src")),e&&(void 0===this._materials[e]&&(s=this.createMaterial(s),this._materials[e]=s),t.material=e)))},t.prototype.updateSlot=function(t,e){var s=t.attachment,r=s.name,a=s instanceof spine.RegionAttachment?c:s instanceof spine.MeshAttachment?l:h,a=(t._active.name===r&&t._active.type===a||this.initAttachment(t),t.positions.length=0,s instanceof spine.RegionAttachment?this._spine_4_1_X?s.computeWorldVertices(t,t.positions,0,2):s.computeWorldVertices(t.bone,t.positions,0,2):s instanceof spine.MeshAttachment&&s.computeWorldVertices(t,0,s.worldVerticesLength,t.positions,0,2),this._tint[r]),r=(t.vertexColor={r:Math.round(255*t.color.r*(a?a.r:1)),g:Math.round(255*t.color.g*(a?a.g:1)),b:Math.round(255*t.color.b*(a?a.b:1)),a:Math.round(255*t.color.a*(a?a.a:1))},s.triangles||d);if(e.isClipping()){e.clipTriangles(t.positions,0,r,r.length,s.uvs,spine.Color.WHITE,spine.Color.WHITE,!1),t.positions.length=0,t.uvs.length=0;for(var i=e.clippedVertices.length,n=0;n<i;n+=8)t.positions.push(e.clippedVertices[n],e.clippedVertices[n+1]),t.uvs.push(e.clippedVertices[n+6],1-e.clippedVertices[n+7]);t.indices=e.clippedTriangles.slice()}else{for(t.uvs.length=0,i=t.positions.length,n=0;n<i;n+=2)t.uvs.push(s.uvs[n],1-s.uvs[n+1]);t.indices=r}this._renderCounts.vertexCount+=t.positions.length/2,this._renderCounts.indexCount+=t.indices.length},t.prototype.updateSkeleton=function(t){this._renderCounts.vertexCount=0,this._renderCounts.indexCount=0;for(var e=this.clipper,s=!1,s=!0,r=this.skeleton.drawOrder,a=r.length,i=0;i<a;i++){var n,o=r[i];this._spine_3_7_99||o.bone.active?s?(n=o.getAttachment())instanceof spine.ClippingAttachment?e.clipStart(o,n):n instanceof spine.RegionAttachment||n instanceof spine.MeshAttachment?this.updateSlot(o,e):this._spine_3_7_99||e.clipEndWithSlot(o):e.clipEndWithSlot(o):e.clipEndWithSlot(o)}},t.prototype.render=function(){if(this._meshInstances.forEach(function(t){t.material=null}),this.removeFromLayers(),this._meshes=[],(this._meshInstances.length=0)<this._renderCounts.indexCount&&0<this._renderCounts.vertexCount){this.skeleton.getBounds(this._aabbTempOffset,this._aabbTempSize,this._aabbTempArray),this._aabb.center=new pc.Vec3(this._aabbTempOffset.x,this._aabbTempOffset.y,0),this._aabb.halfExtents=new pc.Vec3(.5*this._aabbTempSize.x,.5*this._aabbTempSize.y,0),(!this._vertexBuffer||this._vertexBuffer.getNumVertices()<this._renderCounts.vertexCount)&&(this._vertexBuffer&&this._vertexBuffer.destroy(),this._vertexBuffer=new pc.VertexBuffer(this._app.graphicsDevice,this._vertexFormat,this._renderCounts.vertexCount)),(!this._indexBuffer||this._indexBuffer.getNumIndices()<this._renderCounts.indexCount)&&(this._indexBuffer&&this._indexBuffer.destroy(),this._indexBuffer=new pc.IndexBuffer(this._app.graphicsDevice,pc.INDEXFORMAT_UINT16,this._renderCounts.indexCount));for(var t=null,e=0,s=0,r=new pc.VertexIterator(this._vertexBuffer),a=new Uint16Array(this._indexBuffer.lock()),i=0,n=0,o=this.skeleton.drawOrder,h=o.length,l=0;l<h;l++){var c=o[l];if(c.attachment&&c.material&&0<c.positions.length&&0<c.indices.length){t&&t!==c.material&&(this.SubmitBatch(e,s,t),t=c.material,e=i,s=0);for(var t=c.material,d=c.positions,u=c.vertexColor.r,m=c.vertexColor.g,p=c.vertexColor.b,f=c.vertexColor.a,g=c.uvs,v=d.length/2,x=0;x<v;x++)r.element[pc.SEMANTIC_POSITION].set(d[2*x],d[2*x+1]),r.element[pc.SEMANTIC_NORMAL].set(0,255,0,0),r.element[pc.SEMANTIC_COLOR].set(u,m,p,f),r.element[pc.SEMANTIC_TEXCOORD0].set(g[2*x],1-g[2*x+1]),r.next();var w=c.indices,b=w.length;for(x=0;x<b;x++)a[i+x]=w[x]+n;s+=b,i+=b,n+=v}}r.end(),this._indexBuffer.unlock(),this.SubmitBatch(e,s,t)}this.addToLayers()},t.prototype.SubmitBatch=function(t,e,s){var r;0<e&&((r=new pc.Mesh(this._app.graphicsDevice)).vertexBuffer=this._vertexBuffer,r.indexBuffer[0]=this._indexBuffer,r.primitive[0].type=pc.PRIMITIVE_TRIANGLES,r.primitive[0].base=t,r.primitive[0].count=e,r.primitive[0].indexed=!0,r.aabb=this._aabb,this._meshes.push(r),(t=new pc.MeshInstance(this._node,r,this._materials[s])).drawOrder=this.priority+this._meshInstances.length,t.visible=!this._hidden,this._meshInstances.push(t))},t.prototype.update=function(t){if(!this._hidden){t*=this._timeScale;for(var e=this.states.length,s=0;s<e;s++)this.states[s].update(t);for(s=0;s<e;s++)this.states[s].apply(this.skeleton);this.autoUpdate&&this.skeleton.updateWorldTransform(),this.updateSkeleton(),this.render()}},t.prototype.setPosition=function(t){this._position.copy(t)},t.prototype.setTint=function(t,e){this._tint[t]=e},t.prototype.removeFromLayers=function(){if(this._meshInstances.length)for(var t=0;t<this._layers.length;t++){var e=this._app.scene.layers.getLayerById(this._layers[t]);e&&e.removeMeshInstances(this._meshInstances)}},t.prototype.addToLayers=function(){if(this._meshInstances.length)for(var t=0;t<this._layers.length;t++){var e=this._app.scene.layers.getLayerById(this._layers[t]);e&&e.addMeshInstances(this._meshInstances)}},Object.defineProperty(t.prototype,"state",{get:function(){return this.states[0]}}),Object.defineProperty(t.prototype,"priority",{get:function(){return this._priority},set:function(t){this._priority=t}}),Object.defineProperty(t.prototype,"timeScale",{get:function(){return this._timeScale},set:function(t){this._timeScale=t}}),Object.defineProperty(t.prototype,"layers",{get:function(){return this._layers},set:function(t){this.removeFromLayers(),this._layers=t||[],this.addToLayers()}}),{Spine:t}}()),pc.extend(pc,function(){function t(t){pc.ComponentSystem.call(this,t),this.id="spine",this.ComponentType=pc.SpineComponent,this.DataType=pc.SpineComponentData,this.schema=["enabled","atlasAsset","textureAssets","skeletonAsset","atlasData","textures","skeletonData","speed","spine"],this.on("beforeremove",this.onBeforeRemove,this),this.app.systems.on("update",this.onUpdate,this)}return(t.prototype=Object.create(pc.ComponentSystem.prototype)).constructor=t,Object.assign(t.prototype,{initializeComponentData:function(t,e,s){pc.ComponentSystem.prototype.initializeComponentData.call(this.system,t,e,["enabled","atlasAsset","textureAssets","skeletonAsset","atlasData","textures","skeletonData","spine"])},onBeforeRemove:function(t,e){var s=t.spine.data;s.spine&&s.spine.destroy(),t.spine.removeComponent()},onUpdate:function(t){var e,s,r,a=this.store;for(e in a)a.hasOwnProperty(e)&&(r=(s=a[e]).data).enabled&&s.entity.enabled&&r.spine&&(r.spine.setPosition(s.entity.getPosition()),r.spine.update(r.speed*t))}}),{SpineComponentSystem:t}}()),pc.extend(pc,function(){function t(t,e){pc.Component.call(this,t,e),this.on("set_atlasAsset",this.onSetAsset,this),this.on("set_textureAssets",this.onSetAssets,this),this.on("set_skeletonAsset",this.onSetAsset,this),this.on("set_atlasData",this.onSetResource,this),this.on("set_textures",this.onSetResource,this),this.on("set_skeletonData",this.onSetResource,this)}return(t.prototype=Object.create(pc.Component.prototype)).constructor=t,Object.assign(t.prototype,{_createSpine:function(){this.data.spine&&(this.data.spine.destroy(),this.data.spine=null);for(var t={},e=0,s=this.textureAssets.length;e<s;e++){var r=this.system.app.assets.get(this.textureAssets[e]),a=r.name||(r.file?r.file.filename:null),i=(a=a||pc.path.getBasename(r.file.url)).indexOf("?");t[a=-1!==i?a.substring(0,i):a]=r.resource}this.data.spine=new pc.Spine(this.system.app,this.atlasData,this.skeletonData,t),this.state=this.data.spine.state,this.states=this.data.spine.states,this.skeleton=this.data.spine.skeleton,this.entity.addChild(this.data.spine._node)},_onAssetReady:function(t){"texture"===t.type&&this.textures.push(t.resource),"json"===t.type&&(this.skeletonData=t.resource),"text"===t.type&&(this.atlasData=t.resource)},_onAssetAdd:function(t){t.off("change",this.onAssetChanged,this),t.on("change",this.onAssetChanged,this),t.off("remove",this.onAssetRemoved,this),t.on("remove",this.onAssetRemoved,this),t.ready(this._onAssetReady,this),this.system.app.assets.load(t)},onSetResource:function(){this.data.atlasData&&this.data.textures.length&&this.data.skeletonData&&this._createSpine()},onSetAsset:function(t,e,s){var r=this.system.app.assets,a=null;e&&(a=r.get(e))&&(a.off("change",this.onAssetChanged),a.off("remove",this.onAssetRemoved)),s&&((e=s)instanceof pc.Asset&&(e=s.id,this.data[t]=e),(a=r.get(e))?this._onAssetAdd(a):r.on("add:"+e))},onSetAssets:function(t,e,s){var r=this.system.app.assets,a=null;if(e.length)for(n=0,o=e.length;n<o;n++)(a=r.get(e[n]))&&(a.off("change",this.onAssetChanged),a.off("remove",this.onAssetRemoved));if(s&&s.length)for(var i=s.map(function(t){return t instanceof pc.Asset?t.id:t}),n=0,o=s.length;n<o;n++)(a=r.get(i[n]))?this._onAssetAdd(a):r.on("add:"+i[n])},onAssetChanged:function(t,e,s,r){},onAssetRemoved:function(t){},onEnable:function(){pc.Component.prototype.onEnable.call(this);var t=this.data.spine;t&&t.addToLayers()},onDisable:function(){pc.Component.prototype.onDisable.call(this);var t=this.data.spine;t&&t.removeFromLayers()},hide:function(){this.data.spine&&this.data.spine.hide()},show:function(){this.data.spine&&this.data.spine.show()},removeComponent:function(){var t;if(this.atlasAsset&&(t=this.system.app.assets.get(this.atlasAsset))&&(t.off("change",this.onAssetChanged),t.off("remove",this.onAssetRemoved)),this.skeletonAsset&&(t=this.system.app.assets.get(this.skeletonAsset))&&(t.off("change",this.onAssetChanged),t.off("remove",this.onAssetRemoved)),this.textureAssets&&this.textureAssets.length)for(var e=0;e<this.textureAssets.length;e++)(t=this.system.app.assets.get(this.textureAssets[e]))&&(t.off("change",this.onAssetChanged),t.off("remove",this.onAssetRemoved))}}),{SpineComponent:t}}()),pc.extend(pc,{SpineComponentData:function(){this.enabled=!0,this.atlasAsset=null,this.textureAssets=[],this.skeletonAsset=null,this.speed=1,this.spine=null,this.atlasData=null,this.textures=[],this.skeletonData=null}}),(()=>{var s=Object.getOwnPropertyNames,t=(t,e)=>function(){return e||(0,t[s(t)[0]])((e={exports:{}}).exports,e),e.exports},M=t({"node_modules/semver/internal/constants.js"(t,e){var s=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:s,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}}}),F=t({"node_modules/semver/internal/debug.js"(t,e){var s="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};e.exports=s}}),Y=t({"node_modules/semver/internal/re.js"(t,e){var{MAX_SAFE_COMPONENT_LENGTH:s,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:a}=M(),i=F(),n=(t=e.exports={}).re=[],o=t.safeRe=[],h=t.src=[],l=t.t={},c=0,e="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",a],[e,r]],a=(t,e,s)=>{var r=(t=>{for(var[e,s]of d)t=t.split(e+"*").join(`${e}{0,${s}}`).split(e+"+").join(`${e}{1,${s}}`);return t})(e),a=c++;i(t,a,e),l[t]=a,h[a]=e,n[a]=new RegExp(e,s?"g":void 0),o[a]=new RegExp(r,s?"g":void 0)};a("NUMERICIDENTIFIER","0|[1-9]\\d*"),a("NUMERICIDENTIFIERLOOSE","\\d+"),a("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${e}*`),a("MAINVERSION",`(${h[l.NUMERICIDENTIFIER]})\\.(${h[l.NUMERICIDENTIFIER]})\\.(${h[l.NUMERICIDENTIFIER]})`),a("MAINVERSIONLOOSE",`(${h[l.NUMERICIDENTIFIERLOOSE]})\\.(${h[l.NUMERICIDENTIFIERLOOSE]})\\.(${h[l.NUMERICIDENTIFIERLOOSE]})`),a("PRERELEASEIDENTIFIER",`(?:${h[l.NUMERICIDENTIFIER]}|${h[l.NONNUMERICIDENTIFIER]})`),a("PRERELEASEIDENTIFIERLOOSE",`(?:${h[l.NUMERICIDENTIFIERLOOSE]}|${h[l.NONNUMERICIDENTIFIER]})`),a("PRERELEASE",`(?:-(${h[l.PRERELEASEIDENTIFIER]}(?:\\.${h[l.PRERELEASEIDENTIFIER]})*))`),a("PRERELEASELOOSE",`(?:-?(${h[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${h[l.PRERELEASEIDENTIFIERLOOSE]})*))`),a("BUILDIDENTIFIER",e+"+"),a("BUILD",`(?:\\+(${h[l.BUILDIDENTIFIER]}(?:\\.${h[l.BUILDIDENTIFIER]})*))`),a("FULLPLAIN",`v?${h[l.MAINVERSION]}${h[l.PRERELEASE]}?${h[l.BUILD]}?`),a("FULL",`^${h[l.FULLPLAIN]}$`),a("LOOSEPLAIN",`[v=\\s]*${h[l.MAINVERSIONLOOSE]}${h[l.PRERELEASELOOSE]}?${h[l.BUILD]}?`),a("LOOSE",`^${h[l.LOOSEPLAIN]}$`),a("GTLT","((?:<|>)?=?)"),a("XRANGEIDENTIFIERLOOSE",h[l.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*"),a("XRANGEIDENTIFIER",h[l.NUMERICIDENTIFIER]+"|x|X|\\*"),a("XRANGEPLAIN",`[v=\\s]*(${h[l.XRANGEIDENTIFIER]})(?:\\.(${h[l.XRANGEIDENTIFIER]})(?:\\.(${h[l.XRANGEIDENTIFIER]})(?:${h[l.PRERELEASE]})?${h[l.BUILD]}?)?)?`),a("XRANGEPLAINLOOSE",`[v=\\s]*(${h[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${h[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${h[l.XRANGEIDENTIFIERLOOSE]})(?:${h[l.PRERELEASELOOSE]})?${h[l.BUILD]}?)?)?`),a("XRANGE",`^${h[l.GTLT]}\\s*${h[l.XRANGEPLAIN]}$`),a("XRANGELOOSE",`^${h[l.GTLT]}\\s*${h[l.XRANGEPLAINLOOSE]}$`),a("COERCE",`(^|[^\\d])(\\d{1,${s}})(?:\\.(\\d{1,${s}}))?(?:\\.(\\d{1,${s}}))?(?:$|[^\\d])`),a("COERCERTL",h[l.COERCE],!0),a("LONETILDE","(?:~>?)"),a("TILDETRIM",`(\\s*)${h[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",a("TILDE",`^${h[l.LONETILDE]}${h[l.XRANGEPLAIN]}$`),a("TILDELOOSE",`^${h[l.LONETILDE]}${h[l.XRANGEPLAINLOOSE]}$`),a("LONECARET","(?:\\^)"),a("CARETTRIM",`(\\s*)${h[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",a("CARET",`^${h[l.LONECARET]}${h[l.XRANGEPLAIN]}$`),a("CARETLOOSE",`^${h[l.LONECARET]}${h[l.XRANGEPLAINLOOSE]}$`),a("COMPARATORLOOSE",`^${h[l.GTLT]}\\s*(${h[l.LOOSEPLAIN]})$|^$`),a("COMPARATOR",`^${h[l.GTLT]}\\s*(${h[l.FULLPLAIN]})$|^$`),a("COMPARATORTRIM",`(\\s*)${h[l.GTLT]}\\s*(${h[l.LOOSEPLAIN]}|${h[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",a("HYPHENRANGE",`^\\s*(${h[l.XRANGEPLAIN]})\\s+-\\s+(${h[l.XRANGEPLAIN]})\\s*$`),a("HYPHENRANGELOOSE",`^\\s*(${h[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${h[l.XRANGEPLAINLOOSE]})\\s*$`),a("STAR","(<|>)?=?\\s*\\*"),a("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),a("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}}),X=t({"node_modules/semver/internal/parse-options.js"(t,e){var s=Object.freeze({loose:!0}),r=Object.freeze({});e.exports=t=>t?"object"!=typeof t?s:t:r}}),c=t({"node_modules/semver/internal/identifiers.js"(t,e){var a=/^[0-9]+$/,s=(t,e)=>{var s=a.test(t),r=a.test(e);return s&&r&&(t=+t,e=+e),t===e?0:s&&!r||(!r||s)&&t<e?-1:1};e.exports={compareIdentifiers:s,rcompareIdentifiers:(t,e)=>s(e,t)}}}),N=t({"node_modules/semver/classes/semver.js"(t,e){var a=F(),{MAX_LENGTH:s,MAX_SAFE_INTEGER:r}=M(),{safeRe:i,t:n}=Y(),o=X(),h=c()["compareIdentifiers"];e.exports=class l{constructor(t,e){if(e=o(e),t instanceof l){if(t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease)return t;t=t.version}else if("string"!=typeof t)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>s)throw new TypeError(`version is longer than ${s} characters`);a("SemVer",t,e),this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease;e=t.trim().match(e.loose?i[n.LOOSE]:i[n.FULL]);if(!e)throw new TypeError("Invalid Version: "+t);if(this.raw=t,this.major=+e[1],this.minor=+e[2],this.patch=+e[3],this.major>r||this.major<0)throw new TypeError("Invalid major version");if(this.minor>r||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>r||this.patch<0)throw new TypeError("Invalid patch version");e[4]?this.prerelease=e[4].split(".").map(t=>{if(/^[0-9]+$/.test(t)){var e=+t;if(0<=e&&e<r)return e}return t}):this.prerelease=[],this.build=e[5]?e[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.`+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version}toString(){return this.version}compare(t){if(a("SemVer.compare",this.version,this.options,t),!(t instanceof l)){if("string"==typeof t&&t===this.version)return 0;t=new l(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof l||(t=new l(t,this.options)),h(this.major,t.major)||h(this.minor,t.minor)||h(this.patch,t.patch)}comparePre(t){if(t instanceof l||(t=new l(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let e=0;do{var s=this.prerelease[e],r=t.prerelease[e];if(a("prerelease compare",e,s,r),void 0===s&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===s)return-1;if(s!==r)return h(s,r)}while(++e)}compareBuild(t){t instanceof l||(t=new l(t,this.options));let e=0;do{var s=this.build[e],r=t.build[e];if(a("prerelease compare",e,s,r),void 0===s&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===s)return-1;if(s!==r)return h(s,r)}while(++e)}inc(t,e,s){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e,s);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e,s);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e,s),this.inc("pre",e,s);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",e,s),this.inc("pre",e,s);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":var r=Number(s)?1:0;if(!e&&!1===s)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[r];else{let t=this.prerelease.length;for(;0<=--t;)"number"==typeof this.prerelease[t]&&(this.prerelease[t]++,t=-2);if(-1===t){if(e===this.prerelease.join(".")&&!1===s)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(r)}}if(e){let t=!1===s?[e]:[e,r];(0!==h(this.prerelease[0],e)||isNaN(this.prerelease[1]))&&(this.prerelease=t)}break;default:throw new Error("invalid increment argument: "+t)}return this.raw=this.format(),this.build.length&&(this.raw+="+"+this.build.join(".")),this}}}}),r=t({"node_modules/semver/functions/parse.js"(t,e){var r=N();e.exports=(t,e,s=!1)=>{if(t instanceof r)return t;try{return new r(t,e)}catch(t){if(s)throw t;return null}}}}),n=t({"node_modules/semver/functions/valid.js"(t,e){var s=r();e.exports=(t,e)=>{t=s(t,e);return t?t.version:null}}}),o=t({"node_modules/semver/functions/coerce.js"(t,e){var a=N(),i=r(),{safeRe:n,t:o}=Y();e.exports=(t,e)=>{if(t instanceof a)return t;if("string"!=typeof(t="number"==typeof t?String(t):t))return null;let s=null;if((e=e||{}).rtl){for(var r;(r=n[o.COERCERTL].exec(t))&&(!s||s.index+s[0].length!==t.length);)s&&r.index+r[0].length===s.index+s[0].length||(s=r),n[o.COERCERTL].lastIndex=r.index+r[1].length+r[2].length;n[o.COERCERTL].lastIndex=-1}else s=t.match(n[o.COERCE]);return null===s?null:i(`${s[2]}.${s[3]||"0"}.`+(s[4]||"0"),e)}}}),a=t({"node_modules/yallist/iterator.js"(t,e){e.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}}}),b=t({"node_modules/yallist/yallist.js"(t,e){function i(t){var e=this;if((e=e instanceof i?e:new i).tail=null,e.head=null,e.length=0,t&&"function"==typeof t.forEach)t.forEach(function(t){e.push(t)});else if(0<arguments.length)for(var s=0,r=arguments.length;s<r;s++)e.push(arguments[s]);return e}function n(t,e,s,r){if(!(this instanceof n))return new n(t,e,s,r);this.list=r,this.value=t,e?(e.next=this).prev=e:this.prev=null,s?(s.prev=this).next=s:this.next=null}(e.exports=i).Node=n,(i.create=i).prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,s=t.prev;return e&&(e.prev=s),s&&(s.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=s),t.list.length--,t.next=null,t.prev=null,t.list=null,e},i.prototype.unshiftNode=function(t){var e;t!==this.head&&(t.list&&t.list.removeNode(t),e=this.head,t.list=this,(t.next=e)&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++)},i.prototype.pushNode=function(t){var e;t!==this.tail&&(t.list&&t.list.removeNode(t),e=this.tail,t.list=this,(t.prev=e)&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++)},i.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++){r=s=void 0;var s=this,r=arguments[t];s.tail=new n(r,s.tail,null,s),s.head||(s.head=s.tail),s.length++}return this.length},i.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++){r=s=void 0;var s=this,r=arguments[t];s.head=new n(r,null,s.head,s),s.tail||(s.tail=s.head),s.length++}return this.length},i.prototype.pop=function(){var t;if(this.tail)return t=this.tail.value,this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t},i.prototype.shift=function(){var t;if(this.head)return t=this.head.value,this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t},i.prototype.forEach=function(t,e){e=e||this;for(var s=this.head,r=0;null!==s;r++)t.call(e,s.value,r,this),s=s.next},i.prototype.forEachReverse=function(t,e){e=e||this;for(var s=this.tail,r=this.length-1;null!==s;r--)t.call(e,s.value,r,this),s=s.prev},i.prototype.get=function(t){for(var e=0,s=this.head;null!==s&&e<t;e++)s=s.next;if(e===t&&null!==s)return s.value},i.prototype.getReverse=function(t){for(var e=0,s=this.tail;null!==s&&e<t;e++)s=s.prev;if(e===t&&null!==s)return s.value},i.prototype.map=function(t,e){e=e||this;for(var s=new i,r=this.head;null!==r;)s.push(t.call(e,r.value,this)),r=r.next;return s},i.prototype.mapReverse=function(t,e){e=e||this;for(var s=new i,r=this.tail;null!==r;)s.push(t.call(e,r.value,this)),r=r.prev;return s},i.prototype.reduce=function(t,e){var s,r=this.head;if(1<arguments.length)s=e;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");r=this.head.next,s=this.head.value}for(var a=0;null!==r;a++)s=t(s,r.value,a),r=r.next;return s},i.prototype.reduceReverse=function(t,e){var s,r=this.tail;if(1<arguments.length)s=e;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");r=this.tail.prev,s=this.tail.value}for(var a=this.length-1;null!==r;a--)s=t(s,r.value,a),r=r.prev;return s},i.prototype.toArray=function(){for(var t=new Array(this.length),e=0,s=this.head;null!==s;e++)t[e]=s.value,s=s.next;return t},i.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,s=this.tail;null!==s;e++)t[e]=s.value,s=s.prev;return t},i.prototype.slice=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var s=new i;if(!(e<t||e<0)){t<0&&(t=0),e>this.length&&(e=this.length);for(var r=0,a=this.head;null!==a&&r<t;r++)a=a.next;for(;null!==a&&r<e;r++,a=a.next)s.push(a.value)}return s},i.prototype.sliceReverse=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var s=new i;if(!(e<t||e<0)){t<0&&(t=0),e>this.length&&(e=this.length);for(var r=this.length,a=this.tail;null!==a&&e<r;r--)a=a.prev;for(;null!==a&&t<r;r--,a=a.prev)s.push(a.value)}return s},i.prototype.splice=function(t,e,...s){(t=t>this.length?this.length-1:t)<0&&(t=this.length+t);for(var r=0,a=this.head;null!==a&&r<t;r++)a=a.next;for(var i=[],r=0;a&&r<e;r++)i.push(a.value),a=this.removeNode(a);(a=null===a?this.tail:a)!==this.head&&a!==this.tail&&(a=a.prev);for(r=0;r<s.length;r++)a=function(t,e,s){s=e===t.head?new n(s,null,e,t):new n(s,e,e.next,t);null===s.next&&(t.tail=s);null===s.prev&&(t.head=s);return t.length++,s}(this,a,s[r]);return i},i.prototype.reverse=function(){for(var t=this.head,e=this.tail,s=t;null!==s;s=s.prev){var r=s.prev;s.prev=s.next,s.next=r}return this.head=e,this.tail=t,this};try{a()(i)}catch(t){}}}),_=t({"node_modules/lru-cache/index.js"(t,e){var s=b(),n=Symbol("max"),o=Symbol("length"),h=Symbol("lengthCalculator"),i=Symbol("allowStale"),l=Symbol("maxAge"),c=Symbol("dispose"),d=Symbol("noDisposeOnSet"),u=Symbol("lruList"),m=Symbol("cache"),a=Symbol("updateAgeOnGet"),r=()=>1,p=(t,e,s)=>{e=t[m].get(e);if(e){var r=e.value;if(f(t,r)){if(v(t,e),!t[i])return}else s&&(t[a]&&(e.value.now=Date.now()),t[u].unshiftNode(e));return r.value}},f=(t,e)=>{var s;return!(!e||!e.maxAge&&!t[l])&&(s=Date.now()-e.now,e.maxAge?s>e.maxAge:t[l]&&s>t[l])},g=e=>{if(e[o]>e[n])for(let t=e[u].tail;e[o]>e[n]&&null!==t;){var s=t.prev;v(e,t),t=s}},v=(t,e)=>{var s;e&&(s=e.value,t[c]&&t[c](s.key,s.value),t[o]-=s.length,t[m].delete(s.key),t[u].removeNode(e))},x=class{constructor(t,e,s,r,a){this.key=t,this.value=e,this.length=s,this.now=r,this.maxAge=a||0}},w=(t,e,s,r)=>{let a=s.value;f(t,a)&&(v(t,s),t[i]||(a=void 0)),a&&e.call(r,a.value,a.key,t)};e.exports=class{constructor(t){if((t=(t="number"==typeof t?{max:t}:t)||{}).max&&("number"!=typeof t.max||t.max<0))throw new TypeError("max must be a non-negative number");this[n]=t.max||1/0;var e=t.length||r;if(this[h]="function"!=typeof e?r:e,this[i]=t.stale||!1,t.maxAge&&"number"!=typeof t.maxAge)throw new TypeError("maxAge must be a number");this[l]=t.maxAge||0,this[c]=t.dispose,this[d]=t.noDisposeOnSet||!1,this[a]=t.updateAgeOnGet||!1,this.reset()}set max(t){if("number"!=typeof t||t<0)throw new TypeError("max must be a non-negative number");this[n]=t||1/0,g(this)}get max(){return this[n]}set allowStale(t){this[i]=!!t}get allowStale(){return this[i]}set maxAge(t){if("number"!=typeof t)throw new TypeError("maxAge must be a non-negative number");this[l]=t,g(this)}get maxAge(){return this[l]}set lengthCalculator(t){(t="function"!=typeof t?r:t)!==this[h]&&(this[h]=t,this[o]=0,this[u].forEach(t=>{t.length=this[h](t.value,t.key),this[o]+=t.length})),g(this)}get lengthCalculator(){return this[h]}get length(){return this[o]}get itemCount(){return this[u].length}rforEach(e,s){s=s||this;for(let t=this[u].tail;null!==t;){var r=t.prev;w(this,e,t,s),t=r}}forEach(e,s){s=s||this;for(let t=this[u].head;null!==t;){var r=t.next;w(this,e,t,s),t=r}}keys(){return this[u].toArray().map(t=>t.key)}values(){return this[u].toArray().map(t=>t.value)}reset(){this[c]&&this[u]&&this[u].length&&this[u].forEach(t=>this[c](t.key,t.value)),this[m]=new Map,this[u]=new s,this[o]=0}dump(){return this[u].map(t=>!f(this,t)&&{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[u]}set(t,e,s){if((s=s||this[l])&&"number"!=typeof s)throw new TypeError("maxAge must be a number");var r,a=s?Date.now():0,i=this[h](e,t);return this[m].has(t)?i>this[n]?(v(this,this[m].get(t)),!1):(r=this[m].get(t).value,this[c]&&!this[d]&&this[c](t,r.value),r.now=a,r.maxAge=s,r.value=e,this[o]+=i-r.length,r.length=i,this.get(t),g(this),!0):(r=new x(t,e,i,a,s)).length>this[n]?(this[c]&&this[c](t,e),!1):(this[o]+=r.length,this[u].unshift(r),this[m].set(t,this[u].head),g(this),!0)}has(t){return!!this[m].has(t)&&(t=this[m].get(t).value,!f(this,t))}get(t){return p(this,t,!0)}peek(t){return p(this,t,!1)}pop(){var t=this[u].tail;return t?(v(this,t),t.value):null}del(t){v(this,this[m].get(t))}load(e){this.reset();var s=Date.now();for(let t=e.length-1;0<=t;t--){var r=e[t],a=r.e||0;0===a?this.set(r.k,r.v):0<(a=a-s)&&this.set(r.k,r.v,a)}}prune(){this[m].forEach((t,e)=>p(this,e,!1))}}}}),i=t({"node_modules/semver/functions/compare.js"(t,e){var r=N();e.exports=(t,e,s)=>new r(t,s).compare(new r(e,s))}}),d=t({"node_modules/semver/functions/eq.js"(t,e){var r=i();e.exports=(t,e,s)=>0===r(t,e,s)}}),u=t({"node_modules/semver/functions/neq.js"(t,e){var r=i();e.exports=(t,e,s)=>0!==r(t,e,s)}}),m=t({"node_modules/semver/functions/gt.js"(t,e){var r=i();e.exports=(t,e,s)=>0<r(t,e,s)}}),p=t({"node_modules/semver/functions/gte.js"(t,e){var r=i();e.exports=(t,e,s)=>0<=r(t,e,s)}}),f=t({"node_modules/semver/functions/lt.js"(t,e){var r=i();e.exports=(t,e,s)=>r(t,e,s)<0}}),g=t({"node_modules/semver/functions/lte.js"(t,e){var r=i();e.exports=(t,e,s)=>r(t,e,s)<=0}}),v=t({"node_modules/semver/functions/cmp.js"(t,e){var a=d(),i=u(),n=m(),o=p(),h=f(),l=g();e.exports=(t,e,s,r)=>{switch(e){case"===":return(t="object"==typeof t?t.version:t)===(s="object"==typeof s?s.version:s);case"!==":return(t="object"==typeof t?t.version:t)!==(s="object"==typeof s?s.version:s);case"":case"=":case"==":return a(t,s,r);case"!=":return i(t,s,r);case">":return n(t,s,r);case">=":return o(t,s,r);case"<":return h(t,s,r);case"<=":return l(t,s,r);default:throw new TypeError("Invalid operator: "+e)}}}}),L=t({"node_modules/semver/classes/comparator.js"(t,e){var s=Symbol("SemVer ANY"),r=(e.exports=class c{static get ANY(){return s}constructor(t,e){if(e=r(e),t instanceof c){if(t.loose===!!e.loose)return t;t=t.value}t=t.trim().split(/\s+/).join(" "),o("comparator",t,e),this.options=e,this.loose=!!e.loose,this.parse(t),this.semver===s?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(t){var e=this.options.loose?a[i.COMPARATORLOOSE]:a[i.COMPARATOR],e=t.match(e);if(!e)throw new TypeError("Invalid comparator: "+t);this.operator=void 0!==e[1]?e[1]:"","="===this.operator&&(this.operator=""),e[2]?this.semver=new h(e[2],this.options.loose):this.semver=s}toString(){return this.value}test(t){if(o("Comparator.test",t,this.options.loose),this.semver===s||t===s)return!0;if("string"==typeof t)try{t=new h(t,this.options)}catch(t){return!1}return n(t,this.operator,this.semver,this.options)}intersects(t,e){if(t instanceof c)return""===this.operator?""===this.value||new l(t.value,e).test(this.value):""===t.operator?""===t.value||new l(this.value,e).test(t.semver):(!(e=r(e)).includePrerelease||"<0.0.0-0"!==this.value&&"<0.0.0-0"!==t.value)&&!(!e.includePrerelease&&(this.value.startsWith("<0.0.0")||t.value.startsWith("<0.0.0"))||(!this.operator.startsWith(">")||!t.operator.startsWith(">"))&&!(this.operator.startsWith("<")&&t.operator.startsWith("<")||this.semver.version===t.semver.version&&this.operator.includes("=")&&t.operator.includes("=")||n(this.semver,"<",t.semver,e)&&this.operator.startsWith(">")&&t.operator.startsWith("<")||n(this.semver,">",t.semver,e)&&this.operator.startsWith("<")&&t.operator.startsWith(">")));throw new TypeError("a Comparator is required")}},X()),{safeRe:a,t:i}=Y(),n=v(),o=F(),h=N(),l=x()}}),x=t({"node_modules/semver/classes/range.js"(t,e){e.exports=class C{constructor(t,e){if(e=r(e),t instanceof C)return t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease?t:new C(t.raw,e);if(t instanceof h)return this.raw=t.value,this.set=[[t]],this.format(),this;if(this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease,this.raw=t.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(t=>this.parseRange(t.trim())).filter(t=>t.length),!this.set.length)throw new TypeError("Invalid SemVer Range: "+this.raw);if(1<this.set.length){e=this.set[0];if(this.set=this.set.filter(t=>!v(t[0])),0===this.set.length)this.set=[e];else if(1<this.set.length)for(const s of this.set)if(1===s.length&&a(s[0])){this.set=[s];break}}this.format()}format(){return this.range=this.set.map(t=>t.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(t){var e=((this.options.includePrerelease&&f)|(this.options.loose&&g))+":"+t,s=o.get(e);if(s)return s;var s=this.options.loose,r=s?u[m.HYPHENRANGELOOSE]:u[m.HYPHENRANGE];t=t.replace(r,T(this.options.includePrerelease)),d("hyphen replace",t),t=t.replace(u[m.COMPARATORTRIM],l),d("comparator trim",t),t=t.replace(u[m.TILDETRIM],c),d("tilde trim",t),t=t.replace(u[m.CARETTRIM],p),d("caret trim",t);let a=t.split(" ").map(t=>x(t,this.options)).join(" ").split(/\s+/).map(t=>k(t,this.options));s&&(a=a.filter(t=>(d("loose invalid filter",t,this.options),!!t.match(u[m.COMPARATORLOOSE])))),d("range list",a);var i=new Map;for(const n of a.map(t=>new h(t,this.options))){if(v(n))return[n];i.set(n.value,n)}1<i.size&&i.has("")&&i.delete("");r=[...i.values()];return o.set(e,r),r}intersects(t,s){if(t instanceof C)return this.set.some(e=>i(e,s)&&t.set.some(t=>i(t,s)&&e.every(e=>t.every(t=>e.intersects(t,s)))));throw new TypeError("a Range is required")}test(e){if(e){if("string"==typeof e)try{e=new s(e,this.options)}catch(t){return!1}for(let t=0;t<this.set.length;t++)if(R(this.set[t],e,this.options))return!0}return!1}};var o=new(_())({max:1e3}),r=X(),h=L(),d=F(),s=N(),{safeRe:u,t:m,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:p}=Y(),{FLAG_INCLUDE_PRERELEASE:f,FLAG_LOOSE:g}=M(),v=t=>"<0.0.0-0"===t.value,a=t=>""===t.value,i=(t,e)=>{let s=!0;var r=t.slice();let a=r.pop();for(;s&&r.length;)s=r.every(t=>a.intersects(t,e)),a=r.pop();return s},x=(t,e)=>(d("comp",t,e),t=y(t,e),d("caret",t),t=n(t,e),d("tildes",t),t=I(t,e),d("xrange",t),t=S(t,e),d("stars",t),t),w=t=>!t||"x"===t.toLowerCase()||"*"===t,n=(t,e)=>t.trim().split(/\s+/).map(t=>b(t,e)).join(" "),b=(n,t)=>{t=t.loose?u[m.TILDELOOSE]:u[m.TILDE];return n.replace(t,(t,e,s,r,a)=>{d("tilde",n,t,e,s,r,a);let i;return i=w(e)?"":w(s)?`>=${e}.0.0 <${+e+1}.0.0-0`:w(r)?`>=${e}.${s}.0 <${e}.${+s+1}.0-0`:a?(d("replaceTilde pr",a),`>=${e}.${s}.${r}-${a} <${e}.${+s+1}.0-0`):`>=${e}.${s}.${r} <${e}.${+s+1}.0-0`,d("tilde return",i),i})},y=(t,e)=>t.trim().split(/\s+/).map(t=>A(t,e)).join(" "),A=(n,t)=>{d("caret",n,t);var e=t.loose?u[m.CARETLOOSE]:u[m.CARET];const o=t.includePrerelease?"-0":"";return n.replace(e,(t,e,s,r,a)=>{d("caret",n,t,e,s,r,a);let i;return i=w(e)?"":w(s)?`>=${e}.0.0${o} <${+e+1}.0.0-0`:w(r)?"0"===e?`>=${e}.${s}.0${o} <${e}.${+s+1}.0-0`:`>=${e}.${s}.0${o} <${+e+1}.0.0-0`:a?(d("replaceCaret pr",a),"0"===e?"0"===s?`>=${e}.${s}.${r}-${a} <${e}.${s}.${+r+1}-0`:`>=${e}.${s}.${r}-${a} <${e}.${+s+1}.0-0`:`>=${e}.${s}.${r}-${a} <${+e+1}.0.0-0`):(d("no pr"),"0"===e?"0"===s?`>=${e}.${s}.${r}${o} <${e}.${s}.${+r+1}-0`:`>=${e}.${s}.${r}${o} <${e}.${+s+1}.0-0`:`>=${e}.${s}.${r} <${+e+1}.0.0-0`),d("caret return",i),i})},I=(t,e)=>(d("replaceXRanges",t,e),t.split(/\s+/).map(t=>E(t,e)).join(" ")),E=(l,c)=>{l=l.trim();var t=c.loose?u[m.XRANGELOOSE]:u[m.XRANGE];return l.replace(t,(t,e,s,r,a,i)=>{d("xRange",l,t,e,s,r,a,i);var n=w(s),o=n||w(r),h=o||w(a);return"="===e&&h&&(e=""),i=c.includePrerelease?"-0":"",n?t=">"===e||"<"===e?"<0.0.0-0":"*":e&&h?(o&&(r=0),a=0,">"===e?(e=">=",a=o?(s=+s+1,r=0):(r=+r+1,0)):"<="===e&&(e="<",o?s=+s+1:r=+r+1),t=e+s+`.${r}.`+a+(i="<"===e?"-0":i)):o?t=`>=${s}.0.0${i} <${+s+1}.0.0-0`:h&&(t=`>=${s}.${r}.0${i} <${s}.${+r+1}.0-0`),d("xRange return",t),t})},S=(t,e)=>(d("replaceStars",t,e),t.trim().replace(u[m.STAR],"")),k=(t,e)=>(d("replaceGTE0",t,e),t.trim().replace(u[e.includePrerelease?m.GTE0PRE:m.GTE0],"")),T=m=>(t,e,s,r,a,i,n,o,h,l,c,d,u)=>((e=w(s)?"":w(r)?`>=${s}.0.0`+(m?"-0":""):w(a)?`>=${s}.${r}.0`+(m?"-0":""):i?">="+e:">="+e+(m?"-0":""))+" "+(o=w(h)?"":w(l)?`<${+h+1}.0.0-0`:w(c)?`<${h}.${+l+1}.0-0`:d?`<=${h}.${l}.${c}-`+d:m?`<${h}.${l}.${+c+1}-0`:"<="+o)).trim(),R=(e,s,t)=>{for(let t=0;t<e.length;t++)if(!e[t].test(s))return!1;if(!s.prerelease.length||t.includePrerelease)return!0;for(let t=0;t<e.length;t++)if(d(e[t].semver),e[t].semver!==h.ANY&&0<e[t].semver.prerelease.length){var r=e[t].semver;if(r.major===s.major&&r.minor===s.minor&&r.patch===s.patch)return!0}return!1}}}),h=t({"node_modules/semver/functions/satisfies.js"(t,e){var r=x();e.exports=(t,e,s)=>{try{e=new r(e,s)}catch(t){return!1}return e.test(t)}}});return t({"src/semver/index.js"(t,e){var s=M(),r=n(),a=o(),i=h();e.exports={valid:r,coerce:a,satisfies:i,SEMVER_SPEC_VERSION:s.SEMVER_SPEC_VERSION}}})()})());!function(){var t,e;pc.Application.registerPlugin?pc.Application.registerPlugin("spine",function(t){new pc.SpineComponentSystem(t)}):(t=pc.Application.getApplication(),e=new pc.SpineComponentSystem(t),t.systems.add(e))}();