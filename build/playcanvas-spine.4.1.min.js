var spine=function(t){"use strict";function e(t){var e=Object.create(null);return t&&Object.keys(t).forEach((function(s){if("default"!==s){var i=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:function(){return t[s]}})}})),e.default=t,Object.freeze(e)}var s,i=e(t);class r{constructor(){this.entries={},this.size=0}add(t){let e=this.entries[t];return this.entries[t]=!0,!e&&(this.size++,!0)}addAll(t){let e=this.size;for(var s=0,i=t.length;s<i;s++)this.add(t[s]);return e!=this.size}contains(t){return this.entries[t]}clear(){this.entries={},this.size=0}}class a{constructor(t=0,e=0,s=0,i=0){this.r=t,this.g=e,this.b=s,this.a=i}set(t,e,s,i){return this.r=t,this.g=e,this.b=s,this.a=i,this.clamp()}setFromColor(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this}setFromString(t){return t="#"==t.charAt(0)?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=8!=t.length?1:parseInt(t.substr(6,2),16)/255,this}add(t,e,s,i){return this.r+=t,this.g+=e,this.b+=s,this.a+=i,this.clamp()}clamp(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this}static rgba8888ToColor(t,e){t.r=((4278190080&e)>>>24)/255,t.g=((16711680&e)>>>16)/255,t.b=((65280&e)>>>8)/255,t.a=(255&e)/255}static rgb888ToColor(t,e){t.r=((16711680&e)>>>16)/255,t.g=((65280&e)>>>8)/255,t.b=(255&e)/255}static fromString(t){return(new a).setFromString(t)}}a.WHITE=new a(1,1,1,1),a.RED=new a(1,0,0,1),a.GREEN=new a(0,1,0,1),a.BLUE=new a(0,0,1,1),a.MAGENTA=new a(1,0,1,1);class n{static clamp(t,e,s){return t<e?e:t>s?s:t}static cosDeg(t){return Math.cos(t*n.degRad)}static sinDeg(t){return Math.sin(t*n.degRad)}static signum(t){return t>0?1:t<0?-1:0}static toInt(t){return t>0?Math.floor(t):Math.ceil(t)}static cbrt(t){let e=Math.pow(Math.abs(t),1/3);return t<0?-e:e}static randomTriangular(t,e){return n.randomTriangularWith(t,e,.5*(t+e))}static randomTriangularWith(t,e,s){let i=Math.random(),r=e-t;return i<=(s-t)/r?t+Math.sqrt(i*r*(s-t)):e-Math.sqrt((1-i)*r*(e-s))}static isPowerOfTwo(t){return t&&0==(t&t-1)}}n.PI=3.1415927,n.PI2=2*n.PI,n.radiansToDegrees=180/n.PI,n.radDeg=n.radiansToDegrees,n.degreesToRadians=n.PI/180,n.degRad=n.degreesToRadians;class o{apply(t,e,s){return t+(e-t)*this.applyInternal(s)}}class l extends o{constructor(t){super(),this.power=2,this.power=t}applyInternal(t){return t<=.5?Math.pow(2*t,this.power)/2:Math.pow(2*(t-1),this.power)/(this.power%2==0?-2:2)+1}}class h{static arrayCopy(t,e,s,i,r){for(let a=e,n=i;a<e+r;a++,n++)s[n]=t[a]}static arrayFill(t,e,s,i){for(let r=e;r<s;r++)t[r]=i}static setArraySize(t,e,s=0){let i=t.length;if(i==e)return t;if(t.length=e,i<e)for(let r=i;r<e;r++)t[r]=s;return t}static ensureArrayCapacity(t,e,s=0){return t.length>=e?t:h.setArraySize(t,e,s)}static newArray(t,e){let s=new Array(t);for(let i=0;i<t;i++)s[i]=e;return s}static newFloatArray(t){if(h.SUPPORTS_TYPED_ARRAYS)return new Float32Array(t);{let e=new Array(t);for(let t=0;t<e.length;t++)e[t]=0;return e}}static newShortArray(t){if(h.SUPPORTS_TYPED_ARRAYS)return new Int16Array(t);{let e=new Array(t);for(let t=0;t<e.length;t++)e[t]=0;return e}}static toFloatArray(t){return h.SUPPORTS_TYPED_ARRAYS?new Float32Array(t):t}static toSinglePrecision(t){return h.SUPPORTS_TYPED_ARRAYS?Math.fround(t):t}static webkit602BugfixHelper(t,e){}static contains(t,e,s=!0){for(var i=0;i<t.length;i++)if(t[i]==e)return!0;return!1}static enumValue(t,e){return t[e[0].toUpperCase()+e.slice(1)]}}h.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array;class c{constructor(t){this.items=new Array,this.instantiator=t}obtain(){return this.items.length>0?this.items.pop():this.instantiator()}free(t){t.reset&&t.reset(),this.items.push(t)}freeAll(t){for(let e=0;e<t.length;e++)this.free(t[e])}clear(){this.items.length=0}}class d{constructor(t=0,e=0){this.x=t,this.y=e}set(t,e){return this.x=t,this.y=e,this}length(){let t=this.x,e=this.y;return Math.sqrt(t*t+e*e)}normalize(){let t=this.length();return 0!=t&&(this.x/=t,this.y/=t),this}}class u{constructor(t){if(!t)throw new Error("name cannot be null.");this.name=t}}class f extends u{constructor(t){super(t),this.id=f.nextID++,this.bones=null,this.vertices=[],this.worldVerticesLength=0,this.timelineAttachment=this}computeWorldVertices(t,e,s,i,r,a){s=r+(s>>1)*a;let n=t.bone.skeleton,o=t.deform,l=this.vertices,h=this.bones;if(!h){o.length>0&&(l=o);let n=t.bone,h=n.worldX,c=n.worldY,d=n.a,u=n.b,f=n.c,m=n.d;for(let t=e,n=r;n<s;t+=2,n+=a){let e=l[t],s=l[t+1];i[n]=e*d+s*u+h,i[n+1]=e*f+s*m+c}return}let c=0,d=0;for(let t=0;t<e;t+=2){let t=h[c];c+=t+1,d+=t}let u=n.bones;if(0==o.length)for(let t=r,e=3*d;t<s;t+=a){let s=0,r=0,a=h[c++];for(a+=c;c<a;c++,e+=3){let t=u[h[c]],i=l[e],a=l[e+1],n=l[e+2];s+=(i*t.a+a*t.b+t.worldX)*n,r+=(i*t.c+a*t.d+t.worldY)*n}i[t]=s,i[t+1]=r}else{let t=o;for(let e=r,n=3*d,o=d<<1;e<s;e+=a){let s=0,r=0,a=h[c++];for(a+=c;c<a;c++,n+=3,o+=2){let e=u[h[c]],i=l[n]+t[o],a=l[n+1]+t[o+1],d=l[n+2];s+=(i*e.a+a*e.b+e.worldX)*d,r+=(i*e.c+a*e.d+e.worldY)*d}i[e]=s,i[e+1]=r}}}copyTo(t){this.bones?(t.bones=new Array(this.bones.length),h.arrayCopy(this.bones,0,t.bones,0,this.bones.length)):t.bones=null,this.vertices&&(t.vertices=h.newFloatArray(this.vertices.length),h.arrayCopy(this.vertices,0,t.vertices,0,this.vertices.length)),t.worldVerticesLength=this.worldVerticesLength,t.timelineAttachment=this.timelineAttachment}}f.nextID=0;class m{constructor(t){this.id=m.nextID(),this.start=0,this.digits=0,this.setupIndex=0,this.regions=new Array(t)}copy(){let t=new m(this.regions.length);return h.arrayCopy(this.regions,0,t.regions,0,this.regions.length),t.start=this.start,t.digits=this.digits,t.setupIndex=this.setupIndex,t}apply(t,e){let s=t.sequenceIndex;-1==s&&(s=this.setupIndex),s>=this.regions.length&&(s=this.regions.length-1);let i=this.regions[s];e.region!=i&&(e.region=i,e.updateRegion())}getPath(t,e){let s=t,i=(this.start+e).toString();for(let t=this.digits-i.length;t>0;t--)s+="0";return s+=i,s}static nextID(){return m._nextID++}}m._nextID=0,function(t){t[t.hold=0]="hold",t[t.once=1]="once",t[t.loop=2]="loop",t[t.pingpong=3]="pingpong",t[t.onceReverse=4]="onceReverse",t[t.loopReverse=5]="loopReverse",t[t.pingpongReverse=6]="pingpongReverse"}(s||(s={}));const p=[s.hold,s.once,s.loop,s.pingpong,s.onceReverse,s.loopReverse,s.pingpongReverse];class g{constructor(t,e,s){if(this.timelines=[],this.timelineIds=new r,!t)throw new Error("name cannot be null.");this.name=t,this.setTimelines(e),this.duration=s}setTimelines(t){if(!t)throw new Error("timelines cannot be null.");this.timelines=t,this.timelineIds.clear();for(var e=0;e<t.length;e++)this.timelineIds.addAll(t[e].getPropertyIds())}hasTimeline(t){for(let e=0;e<t.length;e++)if(this.timelineIds.contains(t[e]))return!0;return!1}apply(t,e,s,i,r,a,n,o){if(!t)throw new Error("skeleton cannot be null.");i&&0!=this.duration&&(s%=this.duration,e>0&&(e%=this.duration));let l=this.timelines;for(let i=0,h=l.length;i<h;i++)l[i].apply(t,e,s,r,a,n,o)}}var x,w;!function(t){t[t.setup=0]="setup",t[t.first=1]="first",t[t.replace=2]="replace",t[t.add=3]="add"}(x||(x={})),function(t){t[t.mixIn=0]="mixIn",t[t.mixOut=1]="mixOut"}(w||(w={}));const b=0,y=1,v=2,I=3,A=4,E=5,S=6,k=7,T=8,R=9,C=10,M=11,F=12,Y=13,X=14,N=15,L=16,P=17,_=18,B=19;class D{constructor(t,e){this.propertyIds=e,this.frames=h.newFloatArray(t*this.getFrameEntries())}getPropertyIds(){return this.propertyIds}getFrameEntries(){return 1}getFrameCount(){return this.frames.length/this.getFrameEntries()}getDuration(){return this.frames[this.frames.length-this.getFrameEntries()]}static search1(t,e){let s=t.length;for(let i=1;i<s;i++)if(t[i]>e)return i-1;return s-1}static search(t,e,s){let i=t.length;for(let r=s;r<i;r+=s)if(t[r]>e)return r-s;return i-s}}class O extends D{constructor(t,e,s){super(t,s),this.curves=h.newFloatArray(t+18*e),this.curves[t-1]=1}setLinear(t){this.curves[t]=0}setStepped(t){this.curves[t]=1}shrink(t){let e=this.getFrameCount()+18*t;if(this.curves.length>e){let t=h.newFloatArray(e);h.arrayCopy(this.curves,0,t,0,e),this.curves=t}}setBezier(t,e,s,i,r,a,n,o,l,h,c){let d=this.curves,u=this.getFrameCount()+18*t;0==s&&(d[e]=2+u);let f=.03*(i-2*a+o),m=.03*(r-2*n+l),p=.006*(3*(a-o)-i+h),g=.006*(3*(n-l)-r+c),x=2*f+p,w=2*m+g,b=.3*(a-i)+f+.16666667*p,y=.3*(n-r)+m+.16666667*g,v=i+b,I=r+y;for(let t=u+18;u<t;u+=2)d[u]=v,d[u+1]=I,b+=x,y+=w,x+=p,w+=g,v+=b,I+=y}getBezierValue(t,e,s,i){let r=this.curves;if(r[i]>t){let a=this.frames[e],n=this.frames[e+s];return n+(t-a)/(r[i]-a)*(r[i+1]-n)}let a=i+18;for(i+=2;i<a;i+=2)if(r[i]>=t){let e=r[i-2],s=r[i-1];return s+(t-e)/(r[i]-e)*(r[i+1]-s)}e+=this.getFrameEntries();let n=r[a-2],o=r[a-1];return o+(t-n)/(this.frames[e]-n)*(this.frames[e+s]-o)}}class $ extends O{constructor(t,e,s){super(t,e,[s])}getFrameEntries(){return 2}setFrame(t,e,s){t<<=1,this.frames[t]=e,this.frames[t+1]=s}getCurveValue(t){let e=this.frames,s=e.length-2;for(let i=2;i<=s;i+=2)if(e[i]>t){s=i-2;break}let i=this.curves[s>>1];switch(i){case 0:let i=e[s],r=e[s+1];return r+(t-i)/(e[s+2]-i)*(e[s+2+1]-r);case 1:return e[s+1]}return this.getBezierValue(t,s,1,i-2)}}class V extends O{constructor(t,e,s,i){super(t,e,[s,i])}getFrameEntries(){return 3}setFrame(t,e,s,i){t*=3,this.frames[t]=e,this.frames[t+1]=s,this.frames[t+2]=i}}class U extends ${constructor(t,e,s){super(t,e,b+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,r,a,n){let o=t.bones[this.boneIndex];if(!o.active)return;if(s<this.frames[0]){switch(a){case x.setup:return void(o.rotation=o.data.rotation);case x.first:o.rotation+=(o.data.rotation-o.rotation)*r}return}let l=this.getCurveValue(s);switch(a){case x.setup:o.rotation=o.data.rotation+l*r;break;case x.first:case x.replace:l+=o.data.rotation-o.rotation;case x.add:o.rotation+=l*r}}}class q extends V{constructor(t,e,s){super(t,e,y+"|"+s,v+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,r,a,n){let o=t.bones[this.boneIndex];if(!o.active)return;let l=this.frames;if(s<l[0]){switch(a){case x.setup:return o.x=o.data.x,void(o.y=o.data.y);case x.first:o.x+=(o.data.x-o.x)*r,o.y+=(o.data.y-o.y)*r}return}let h=0,c=0,d=D.search(l,s,3),u=this.curves[d/3];switch(u){case 0:let t=l[d];h=l[d+1],c=l[d+2];let e=(s-t)/(l[d+3]-t);h+=(l[d+3+1]-h)*e,c+=(l[d+3+2]-c)*e;break;case 1:h=l[d+1],c=l[d+2];break;default:h=this.getBezierValue(s,d,1,u-2),c=this.getBezierValue(s,d,2,u+18-2)}switch(a){case x.setup:o.x=o.data.x+h*r,o.y=o.data.y+c*r;break;case x.first:case x.replace:o.x+=(o.data.x+h-o.x)*r,o.y+=(o.data.y+c-o.y)*r;break;case x.add:o.x+=h*r,o.y+=c*r}}}class W extends ${constructor(t,e,s){super(t,e,y+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,r,a,n){let o=t.bones[this.boneIndex];if(!o.active)return;if(s<this.frames[0]){switch(a){case x.setup:return void(o.x=o.data.x);case x.first:o.x+=(o.data.x-o.x)*r}return}let l=this.getCurveValue(s);switch(a){case x.setup:o.x=o.data.x+l*r;break;case x.first:case x.replace:o.x+=(o.data.x+l-o.x)*r;break;case x.add:o.x+=l*r}}}class z extends ${constructor(t,e,s){super(t,e,v+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,r,a,n){let o=t.bones[this.boneIndex];if(!o.active)return;if(s<this.frames[0]){switch(a){case x.setup:return void(o.y=o.data.y);case x.first:o.y+=(o.data.y-o.y)*r}return}let l=this.getCurveValue(s);switch(a){case x.setup:o.y=o.data.y+l*r;break;case x.first:case x.replace:o.y+=(o.data.y+l-o.y)*r;break;case x.add:o.y+=l*r}}}class G extends V{constructor(t,e,s){super(t,e,I+"|"+s,A+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,r,a,o){let l=t.bones[this.boneIndex];if(!l.active)return;let h,c,d=this.frames;if(s<d[0]){switch(a){case x.setup:return l.scaleX=l.data.scaleX,void(l.scaleY=l.data.scaleY);case x.first:l.scaleX+=(l.data.scaleX-l.scaleX)*r,l.scaleY+=(l.data.scaleY-l.scaleY)*r}return}let u=D.search(d,s,3),f=this.curves[u/3];switch(f){case 0:let t=d[u];h=d[u+1],c=d[u+2];let e=(s-t)/(d[u+3]-t);h+=(d[u+3+1]-h)*e,c+=(d[u+3+2]-c)*e;break;case 1:h=d[u+1],c=d[u+2];break;default:h=this.getBezierValue(s,u,1,f-2),c=this.getBezierValue(s,u,2,f+18-2)}if(h*=l.data.scaleX,c*=l.data.scaleY,1==r)a==x.add?(l.scaleX+=h-l.data.scaleX,l.scaleY+=c-l.data.scaleY):(l.scaleX=h,l.scaleY=c);else{let t=0,e=0;if(o==w.mixOut)switch(a){case x.setup:t=l.data.scaleX,e=l.data.scaleY,l.scaleX=t+(Math.abs(h)*n.signum(t)-t)*r,l.scaleY=e+(Math.abs(c)*n.signum(e)-e)*r;break;case x.first:case x.replace:t=l.scaleX,e=l.scaleY,l.scaleX=t+(Math.abs(h)*n.signum(t)-t)*r,l.scaleY=e+(Math.abs(c)*n.signum(e)-e)*r;break;case x.add:l.scaleX+=(h-l.data.scaleX)*r,l.scaleY+=(c-l.data.scaleY)*r}else switch(a){case x.setup:t=Math.abs(l.data.scaleX)*n.signum(h),e=Math.abs(l.data.scaleY)*n.signum(c),l.scaleX=t+(h-t)*r,l.scaleY=e+(c-e)*r;break;case x.first:case x.replace:t=Math.abs(l.scaleX)*n.signum(h),e=Math.abs(l.scaleY)*n.signum(c),l.scaleX=t+(h-t)*r,l.scaleY=e+(c-e)*r;break;case x.add:l.scaleX+=(h-l.data.scaleX)*r,l.scaleY+=(c-l.data.scaleY)*r}}}}class j extends ${constructor(t,e,s){super(t,e,I+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,r,a,o){let l=t.bones[this.boneIndex];if(!l.active)return;if(s<this.frames[0]){switch(a){case x.setup:return void(l.scaleX=l.data.scaleX);case x.first:l.scaleX+=(l.data.scaleX-l.scaleX)*r}return}let h=this.getCurveValue(s)*l.data.scaleX;if(1==r)a==x.add?l.scaleX+=h-l.data.scaleX:l.scaleX=h;else{let t=0;if(o==w.mixOut)switch(a){case x.setup:t=l.data.scaleX,l.scaleX=t+(Math.abs(h)*n.signum(t)-t)*r;break;case x.first:case x.replace:t=l.scaleX,l.scaleX=t+(Math.abs(h)*n.signum(t)-t)*r;break;case x.add:l.scaleX+=(h-l.data.scaleX)*r}else switch(a){case x.setup:t=Math.abs(l.data.scaleX)*n.signum(h),l.scaleX=t+(h-t)*r;break;case x.first:case x.replace:t=Math.abs(l.scaleX)*n.signum(h),l.scaleX=t+(h-t)*r;break;case x.add:l.scaleX+=(h-l.data.scaleX)*r}}}}class H extends ${constructor(t,e,s){super(t,e,A+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,r,a,o){let l=t.bones[this.boneIndex];if(!l.active)return;if(s<this.frames[0]){switch(a){case x.setup:return void(l.scaleY=l.data.scaleY);case x.first:l.scaleY+=(l.data.scaleY-l.scaleY)*r}return}let h=this.getCurveValue(s)*l.data.scaleY;if(1==r)a==x.add?l.scaleY+=h-l.data.scaleY:l.scaleY=h;else{let t=0;if(o==w.mixOut)switch(a){case x.setup:t=l.data.scaleY,l.scaleY=t+(Math.abs(h)*n.signum(t)-t)*r;break;case x.first:case x.replace:t=l.scaleY,l.scaleY=t+(Math.abs(h)*n.signum(t)-t)*r;break;case x.add:l.scaleY+=(h-l.data.scaleY)*r}else switch(a){case x.setup:t=Math.abs(l.data.scaleY)*n.signum(h),l.scaleY=t+(h-t)*r;break;case x.first:case x.replace:t=Math.abs(l.scaleY)*n.signum(h),l.scaleY=t+(h-t)*r;break;case x.add:l.scaleY+=(h-l.data.scaleY)*r}}}}class J extends V{constructor(t,e,s){super(t,e,E+"|"+s,S+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,r,a,n){let o=t.bones[this.boneIndex];if(!o.active)return;let l=this.frames;if(s<l[0]){switch(a){case x.setup:return o.shearX=o.data.shearX,void(o.shearY=o.data.shearY);case x.first:o.shearX+=(o.data.shearX-o.shearX)*r,o.shearY+=(o.data.shearY-o.shearY)*r}return}let h=0,c=0,d=D.search(l,s,3),u=this.curves[d/3];switch(u){case 0:let t=l[d];h=l[d+1],c=l[d+2];let e=(s-t)/(l[d+3]-t);h+=(l[d+3+1]-h)*e,c+=(l[d+3+2]-c)*e;break;case 1:h=l[d+1],c=l[d+2];break;default:h=this.getBezierValue(s,d,1,u-2),c=this.getBezierValue(s,d,2,u+18-2)}switch(a){case x.setup:o.shearX=o.data.shearX+h*r,o.shearY=o.data.shearY+c*r;break;case x.first:case x.replace:o.shearX+=(o.data.shearX+h-o.shearX)*r,o.shearY+=(o.data.shearY+c-o.shearY)*r;break;case x.add:o.shearX+=h*r,o.shearY+=c*r}}}class K extends ${constructor(t,e,s){super(t,e,E+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,r,a,n){let o=t.bones[this.boneIndex];if(!o.active)return;if(s<this.frames[0]){switch(a){case x.setup:return void(o.shearX=o.data.shearX);case x.first:o.shearX+=(o.data.shearX-o.shearX)*r}return}let l=this.getCurveValue(s);switch(a){case x.setup:o.shearX=o.data.shearX+l*r;break;case x.first:case x.replace:o.shearX+=(o.data.shearX+l-o.shearX)*r;break;case x.add:o.shearX+=l*r}}}class Q extends ${constructor(t,e,s){super(t,e,S+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,r,a,n){let o=t.bones[this.boneIndex];if(!o.active)return;if(s<this.frames[0]){switch(a){case x.setup:return void(o.shearY=o.data.shearY);case x.first:o.shearY+=(o.data.shearY-o.shearY)*r}return}let l=this.getCurveValue(s);switch(a){case x.setup:o.shearY=o.data.shearY+l*r;break;case x.first:case x.replace:o.shearY+=(o.data.shearY+l-o.shearY)*r;break;case x.add:o.shearY+=l*r}}}class Z extends O{constructor(t,e,s){super(t,e,[k+"|"+s,T+"|"+s]),this.slotIndex=0,this.slotIndex=s}getFrameEntries(){return 5}setFrame(t,e,s,i,r,a){t*=5,this.frames[t]=e,this.frames[t+1]=s,this.frames[t+2]=i,this.frames[t+3]=r,this.frames[t+4]=a}apply(t,e,s,i,r,a,n){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let l=this.frames,h=o.color;if(s<l[0]){let t=o.data.color;switch(a){case x.setup:return void h.setFromColor(t);case x.first:h.add((t.r-h.r)*r,(t.g-h.g)*r,(t.b-h.b)*r,(t.a-h.a)*r)}return}let c=0,d=0,u=0,f=0,m=D.search(l,s,5),p=this.curves[m/5];switch(p){case 0:let t=l[m];c=l[m+1],d=l[m+2],u=l[m+3],f=l[m+4];let e=(s-t)/(l[m+5]-t);c+=(l[m+5+1]-c)*e,d+=(l[m+5+2]-d)*e,u+=(l[m+5+3]-u)*e,f+=(l[m+5+4]-f)*e;break;case 1:c=l[m+1],d=l[m+2],u=l[m+3],f=l[m+4];break;default:c=this.getBezierValue(s,m,1,p-2),d=this.getBezierValue(s,m,2,p+18-2),u=this.getBezierValue(s,m,3,p+36-2),f=this.getBezierValue(s,m,4,p+54-2)}1==r?h.set(c,d,u,f):(a==x.setup&&h.setFromColor(o.data.color),h.add((c-h.r)*r,(d-h.g)*r,(u-h.b)*r,(f-h.a)*r))}}class tt extends O{constructor(t,e,s){super(t,e,[k+"|"+s]),this.slotIndex=0,this.slotIndex=s}getFrameEntries(){return 4}setFrame(t,e,s,i,r){t<<=2,this.frames[t]=e,this.frames[t+1]=s,this.frames[t+2]=i,this.frames[t+3]=r}apply(t,e,s,i,r,a,n){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let l=this.frames,h=o.color;if(s<l[0]){let t=o.data.color;switch(a){case x.setup:return h.r=t.r,h.g=t.g,void(h.b=t.b);case x.first:h.r+=(t.r-h.r)*r,h.g+=(t.g-h.g)*r,h.b+=(t.b-h.b)*r}return}let c=0,d=0,u=0,f=D.search(l,s,4),m=this.curves[f>>2];switch(m){case 0:let t=l[f];c=l[f+1],d=l[f+2],u=l[f+3];let e=(s-t)/(l[f+4]-t);c+=(l[f+4+1]-c)*e,d+=(l[f+4+2]-d)*e,u+=(l[f+4+3]-u)*e;break;case 1:c=l[f+1],d=l[f+2],u=l[f+3];break;default:c=this.getBezierValue(s,f,1,m-2),d=this.getBezierValue(s,f,2,m+18-2),u=this.getBezierValue(s,f,3,m+36-2)}if(1==r)h.r=c,h.g=d,h.b=u;else{if(a==x.setup){let t=o.data.color;h.r=t.r,h.g=t.g,h.b=t.b}h.r+=(c-h.r)*r,h.g+=(d-h.g)*r,h.b+=(u-h.b)*r}}}class et extends ${constructor(t,e,s){super(t,e,T+"|"+s),this.slotIndex=0,this.slotIndex=s}apply(t,e,s,i,r,a,n){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let l=o.color;if(s<this.frames[0]){let t=o.data.color;switch(a){case x.setup:return void(l.a=t.a);case x.first:l.a+=(t.a-l.a)*r}return}let h=this.getCurveValue(s);1==r?l.a=h:(a==x.setup&&(l.a=o.data.color.a),l.a+=(h-l.a)*r)}}class st extends O{constructor(t,e,s){super(t,e,[k+"|"+s,T+"|"+s,R+"|"+s]),this.slotIndex=0,this.slotIndex=s}getFrameEntries(){return 8}setFrame(t,e,s,i,r,a,n,o,l){t<<=3,this.frames[t]=e,this.frames[t+1]=s,this.frames[t+2]=i,this.frames[t+3]=r,this.frames[t+4]=a,this.frames[t+5]=n,this.frames[t+6]=o,this.frames[t+7]=l}apply(t,e,s,i,r,a,n){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let l=this.frames,h=o.color,c=o.darkColor;if(s<l[0]){let t=o.data.color,e=o.data.darkColor;switch(a){case x.setup:return h.setFromColor(t),c.r=e.r,c.g=e.g,void(c.b=e.b);case x.first:h.add((t.r-h.r)*r,(t.g-h.g)*r,(t.b-h.b)*r,(t.a-h.a)*r),c.r+=(e.r-c.r)*r,c.g+=(e.g-c.g)*r,c.b+=(e.b-c.b)*r}return}let d=0,u=0,f=0,m=0,p=0,g=0,w=0,b=D.search(l,s,8),y=this.curves[b>>3];switch(y){case 0:let t=l[b];d=l[b+1],u=l[b+2],f=l[b+3],m=l[b+4],p=l[b+5],g=l[b+6],w=l[b+7];let e=(s-t)/(l[b+8]-t);d+=(l[b+8+1]-d)*e,u+=(l[b+8+2]-u)*e,f+=(l[b+8+3]-f)*e,m+=(l[b+8+4]-m)*e,p+=(l[b+8+5]-p)*e,g+=(l[b+8+6]-g)*e,w+=(l[b+8+7]-w)*e;break;case 1:d=l[b+1],u=l[b+2],f=l[b+3],m=l[b+4],p=l[b+5],g=l[b+6],w=l[b+7];break;default:d=this.getBezierValue(s,b,1,y-2),u=this.getBezierValue(s,b,2,y+18-2),f=this.getBezierValue(s,b,3,y+36-2),m=this.getBezierValue(s,b,4,y+54-2),p=this.getBezierValue(s,b,5,y+72-2),g=this.getBezierValue(s,b,6,y+90-2),w=this.getBezierValue(s,b,7,y+108-2)}if(1==r)h.set(d,u,f,m),c.r=p,c.g=g,c.b=w;else{if(a==x.setup){h.setFromColor(o.data.color);let t=o.data.darkColor;c.r=t.r,c.g=t.g,c.b=t.b}h.add((d-h.r)*r,(u-h.g)*r,(f-h.b)*r,(m-h.a)*r),c.r+=(p-c.r)*r,c.g+=(g-c.g)*r,c.b+=(w-c.b)*r}}}class it extends O{constructor(t,e,s){super(t,e,[k+"|"+s,R+"|"+s]),this.slotIndex=0,this.slotIndex=s}getFrameEntries(){return 7}setFrame(t,e,s,i,r,a,n,o){t*=7,this.frames[t]=e,this.frames[t+1]=s,this.frames[t+2]=i,this.frames[t+3]=r,this.frames[t+4]=a,this.frames[t+5]=n,this.frames[t+6]=o}apply(t,e,s,i,r,a,n){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let l=this.frames,h=o.color,c=o.darkColor;if(s<l[0]){let t=o.data.color,e=o.data.darkColor;switch(a){case x.setup:return h.r=t.r,h.g=t.g,h.b=t.b,c.r=e.r,c.g=e.g,void(c.b=e.b);case x.first:h.r+=(t.r-h.r)*r,h.g+=(t.g-h.g)*r,h.b+=(t.b-h.b)*r,c.r+=(e.r-c.r)*r,c.g+=(e.g-c.g)*r,c.b+=(e.b-c.b)*r}return}let d=0,u=0,f=0,m=0,p=0,g=0,w=D.search(l,s,7),b=this.curves[w/7];switch(b){case 0:let t=l[w];d=l[w+1],u=l[w+2],f=l[w+3],m=l[w+4],p=l[w+5],g=l[w+6];let e=(s-t)/(l[w+7]-t);d+=(l[w+7+1]-d)*e,u+=(l[w+7+2]-u)*e,f+=(l[w+7+3]-f)*e,m+=(l[w+7+4]-m)*e,p+=(l[w+7+5]-p)*e,g+=(l[w+7+6]-g)*e;break;case 1:d=l[w+1],u=l[w+2],f=l[w+3],m=l[w+4],p=l[w+5],g=l[w+6];break;default:d=this.getBezierValue(s,w,1,b-2),u=this.getBezierValue(s,w,2,b+18-2),f=this.getBezierValue(s,w,3,b+36-2),m=this.getBezierValue(s,w,4,b+54-2),p=this.getBezierValue(s,w,5,b+72-2),g=this.getBezierValue(s,w,6,b+90-2)}if(1==r)h.r=d,h.g=u,h.b=f,c.r=m,c.g=p,c.b=g;else{if(a==x.setup){let t=o.data.color,e=o.data.darkColor;h.r=t.r,h.g=t.g,h.b=t.b,c.r=e.r,c.g=e.g,c.b=e.b}h.r+=(d-h.r)*r,h.g+=(u-h.g)*r,h.b+=(f-h.b)*r,c.r+=(m-c.r)*r,c.g+=(p-c.g)*r,c.b+=(g-c.b)*r}}}class rt extends D{constructor(t,e){super(t,[C+"|"+e]),this.slotIndex=0,this.slotIndex=e,this.attachmentNames=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e,s){this.frames[t]=e,this.attachmentNames[t]=s}apply(t,e,s,i,r,a,n){let o=t.slots[this.slotIndex];o.bone.active&&(n!=w.mixOut?s<this.frames[0]?a!=x.setup&&a!=x.first||this.setAttachment(t,o,o.data.attachmentName):this.setAttachment(t,o,this.attachmentNames[D.search1(this.frames,s)]):a==x.setup&&this.setAttachment(t,o,o.data.attachmentName))}setAttachment(t,e,s){e.setAttachment(s?t.getAttachment(this.slotIndex,s):null)}}class at extends O{constructor(t,e,s,i){super(t,e,[M+"|"+s+"|"+i.id]),this.slotIndex=0,this.slotIndex=s,this.attachment=i,this.vertices=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e,s){this.frames[t]=e,this.vertices[t]=s}setBezier(t,e,s,i,r,a,n,o,l,h,c){let d=this.curves,u=this.getFrameCount()+18*t;0==s&&(d[e]=2+u);let f=.03*(i-2*a+o),m=.03*l-.06*n,p=.006*(3*(a-o)-i+h),g=.018*(n-l+.33333333),x=2*f+p,w=2*m+g,b=.3*(a-i)+f+.16666667*p,y=.3*n+m+.16666667*g,v=i+b,I=y;for(let t=u+18;u<t;u+=2)d[u]=v,d[u+1]=I,b+=x,y+=w,x+=p,w+=g,v+=b,I+=y}getCurvePercent(t,e){let s=this.curves,i=s[e];switch(i){case 0:let s=this.frames[e];return(t-s)/(this.frames[e+this.getFrameEntries()]-s);case 1:return 0}if(i-=2,s[i]>t){let r=this.frames[e];return s[i+1]*(t-r)/(s[i]-r)}let r=i+18;for(i+=2;i<r;i+=2)if(s[i]>=t){let e=s[i-2],r=s[i-1];return r+(t-e)/(s[i]-e)*(s[i+1]-r)}let a=s[r-2],n=s[r-1];return n+(1-n)*(t-a)/(this.frames[e+this.getFrameEntries()]-a)}apply(t,e,s,i,r,a,n){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let l=o.getAttachment();if(!l)return;if(!(l instanceof f)||l.timelineAttachment!=this.attachment)return;let c=o.deform;0==c.length&&(a=x.setup);let d=this.vertices,u=d[0].length,m=this.frames;if(s<m[0]){switch(a){case x.setup:return void(c.length=0);case x.first:if(1==r)return void(c.length=0);c.length=u;let t=l;if(t.bones){r=1-r;for(p=0;p<u;p++)c[p]*=r}else{let e=t.vertices;for(var p=0;p<u;p++)c[p]+=(e[p]-c[p])*r}}return}if(c.length=u,s>=m[m.length-1]){let t=d[m.length-1];if(1==r)if(a==x.add){let e=l;if(e.bones)for(let e=0;e<u;e++)c[e]+=t[e];else{let s=e.vertices;for(let e=0;e<u;e++)c[e]+=t[e]-s[e]}}else h.arrayCopy(t,0,c,0,u);else switch(a){case x.setup:{let e=l;if(e.bones)for(let e=0;e<u;e++)c[e]=t[e]*r;else{let s=e.vertices;for(let e=0;e<u;e++){let i=s[e];c[e]=i+(t[e]-i)*r}}break}case x.first:case x.replace:for(let e=0;e<u;e++)c[e]+=(t[e]-c[e])*r;break;case x.add:let e=l;if(e.bones)for(let e=0;e<u;e++)c[e]+=t[e]*r;else{let s=e.vertices;for(let e=0;e<u;e++)c[e]+=(t[e]-s[e])*r}}return}let g=D.search1(m,s),w=this.getCurvePercent(s,g),b=d[g],y=d[g+1];if(1==r)if(a==x.add){let t=l;if(t.bones)for(let t=0;t<u;t++){let e=b[t];c[t]+=e+(y[t]-e)*w}else{let e=t.vertices;for(let t=0;t<u;t++){let s=b[t];c[t]+=s+(y[t]-s)*w-e[t]}}}else for(let t=0;t<u;t++){let e=b[t];c[t]=e+(y[t]-e)*w}else switch(a){case x.setup:{let t=l;if(t.bones)for(let t=0;t<u;t++){let e=b[t];c[t]=(e+(y[t]-e)*w)*r}else{let e=t.vertices;for(let t=0;t<u;t++){let s=b[t],i=e[t];c[t]=i+(s+(y[t]-s)*w-i)*r}}break}case x.first:case x.replace:for(let t=0;t<u;t++){let e=b[t];c[t]+=(e+(y[t]-e)*w-c[t])*r}break;case x.add:let t=l;if(t.bones)for(let t=0;t<u;t++){let e=b[t];c[t]+=(e+(y[t]-e)*w)*r}else{let e=t.vertices;for(let t=0;t<u;t++){let s=b[t];c[t]+=(s+(y[t]-s)*w-e[t])*r}}}}}class nt extends D{constructor(t){super(t,nt.propertyIds),this.events=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e){this.frames[t]=e.time,this.events[t]=e}apply(t,e,s,i,r,a,n){if(!i)return;let o=this.frames,l=this.frames.length;if(e>s)this.apply(t,e,Number.MAX_VALUE,i,r,a,n),e=-1;else if(e>=o[l-1])return;if(s<o[0])return;let h=0;if(e<o[0])h=0;else{h=D.search1(o,e)+1;let t=o[h];for(;h>0&&o[h-1]==t;)h--}for(;h<l&&s>=o[h];h++)i.push(this.events[h])}}nt.propertyIds=[""+F];class ot extends D{constructor(t){super(t,ot.propertyIds),this.drawOrders=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e,s){this.frames[t]=e,this.drawOrders[t]=s}apply(t,e,s,i,r,a,n){if(n==w.mixOut)return void(a==x.setup&&h.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length));if(s<this.frames[0])return void(a!=x.setup&&a!=x.first||h.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length));let o=D.search1(this.frames,s),l=this.drawOrders[o];if(l){let e=t.drawOrder,s=t.slots;for(let t=0,i=l.length;t<i;t++)e[t]=s[l[t]]}else h.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length)}}ot.propertyIds=[""+Y];class lt extends O{constructor(t,e,s){super(t,e,[X+"|"+s]),this.ikConstraintIndex=0,this.ikConstraintIndex=s}getFrameEntries(){return 6}setFrame(t,e,s,i,r,a,n){t*=6,this.frames[t]=e,this.frames[t+1]=s,this.frames[t+2]=i,this.frames[t+3]=r,this.frames[t+4]=a?1:0,this.frames[t+5]=n?1:0}apply(t,e,s,i,r,a,n){let o=t.ikConstraints[this.ikConstraintIndex];if(!o.active)return;let l=this.frames;if(s<l[0]){switch(a){case x.setup:return o.mix=o.data.mix,o.softness=o.data.softness,o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,void(o.stretch=o.data.stretch);case x.first:o.mix+=(o.data.mix-o.mix)*r,o.softness+=(o.data.softness-o.softness)*r,o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,o.stretch=o.data.stretch}return}let h=0,c=0,d=D.search(l,s,6),u=this.curves[d/6];switch(u){case 0:let t=l[d];h=l[d+1],c=l[d+2];let e=(s-t)/(l[d+6]-t);h+=(l[d+6+1]-h)*e,c+=(l[d+6+2]-c)*e;break;case 1:h=l[d+1],c=l[d+2];break;default:h=this.getBezierValue(s,d,1,u-2),c=this.getBezierValue(s,d,2,u+18-2)}a==x.setup?(o.mix=o.data.mix+(h-o.data.mix)*r,o.softness=o.data.softness+(c-o.data.softness)*r,n==w.mixOut?(o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,o.stretch=o.data.stretch):(o.bendDirection=l[d+3],o.compress=0!=l[d+4],o.stretch=0!=l[d+5])):(o.mix+=(h-o.mix)*r,o.softness+=(c-o.softness)*r,n==w.mixIn&&(o.bendDirection=l[d+3],o.compress=0!=l[d+4],o.stretch=0!=l[d+5]))}}class ht extends O{constructor(t,e,s){super(t,e,[N+"|"+s]),this.transformConstraintIndex=0,this.transformConstraintIndex=s}getFrameEntries(){return 7}setFrame(t,e,s,i,r,a,n,o){let l=this.frames;l[t*=7]=e,l[t+1]=s,l[t+2]=i,l[t+3]=r,l[t+4]=a,l[t+5]=n,l[t+6]=o}apply(t,e,s,i,r,a,n){let o=t.transformConstraints[this.transformConstraintIndex];if(!o.active)return;let l,h,c,d,u,f,m=this.frames;if(s<m[0]){let t=o.data;switch(a){case x.setup:return o.mixRotate=t.mixRotate,o.mixX=t.mixX,o.mixY=t.mixY,o.mixScaleX=t.mixScaleX,o.mixScaleY=t.mixScaleY,void(o.mixShearY=t.mixShearY);case x.first:o.mixRotate+=(t.mixRotate-o.mixRotate)*r,o.mixX+=(t.mixX-o.mixX)*r,o.mixY+=(t.mixY-o.mixY)*r,o.mixScaleX+=(t.mixScaleX-o.mixScaleX)*r,o.mixScaleY+=(t.mixScaleY-o.mixScaleY)*r,o.mixShearY+=(t.mixShearY-o.mixShearY)*r}return}let p=D.search(m,s,7),g=this.curves[p/7];switch(g){case 0:let t=m[p];l=m[p+1],h=m[p+2],c=m[p+3],d=m[p+4],u=m[p+5],f=m[p+6];let e=(s-t)/(m[p+7]-t);l+=(m[p+7+1]-l)*e,h+=(m[p+7+2]-h)*e,c+=(m[p+7+3]-c)*e,d+=(m[p+7+4]-d)*e,u+=(m[p+7+5]-u)*e,f+=(m[p+7+6]-f)*e;break;case 1:l=m[p+1],h=m[p+2],c=m[p+3],d=m[p+4],u=m[p+5],f=m[p+6];break;default:l=this.getBezierValue(s,p,1,g-2),h=this.getBezierValue(s,p,2,g+18-2),c=this.getBezierValue(s,p,3,g+36-2),d=this.getBezierValue(s,p,4,g+54-2),u=this.getBezierValue(s,p,5,g+72-2),f=this.getBezierValue(s,p,6,g+90-2)}if(a==x.setup){let t=o.data;o.mixRotate=t.mixRotate+(l-t.mixRotate)*r,o.mixX=t.mixX+(h-t.mixX)*r,o.mixY=t.mixY+(c-t.mixY)*r,o.mixScaleX=t.mixScaleX+(d-t.mixScaleX)*r,o.mixScaleY=t.mixScaleY+(u-t.mixScaleY)*r,o.mixShearY=t.mixShearY+(f-t.mixShearY)*r}else o.mixRotate+=(l-o.mixRotate)*r,o.mixX+=(h-o.mixX)*r,o.mixY+=(c-o.mixY)*r,o.mixScaleX+=(d-o.mixScaleX)*r,o.mixScaleY+=(u-o.mixScaleY)*r,o.mixShearY+=(f-o.mixShearY)*r}}class ct extends ${constructor(t,e,s){super(t,e,L+"|"+s),this.pathConstraintIndex=0,this.pathConstraintIndex=s}apply(t,e,s,i,r,a,n){let o=t.pathConstraints[this.pathConstraintIndex];if(!o.active)return;if(s<this.frames[0]){switch(a){case x.setup:return void(o.position=o.data.position);case x.first:o.position+=(o.data.position-o.position)*r}return}let l=this.getCurveValue(s);a==x.setup?o.position=o.data.position+(l-o.data.position)*r:o.position+=(l-o.position)*r}}class dt extends ${constructor(t,e,s){super(t,e,P+"|"+s),this.pathConstraintIndex=0,this.pathConstraintIndex=s}apply(t,e,s,i,r,a,n){let o=t.pathConstraints[this.pathConstraintIndex];if(!o.active)return;if(s<this.frames[0]){switch(a){case x.setup:return void(o.spacing=o.data.spacing);case x.first:o.spacing+=(o.data.spacing-o.spacing)*r}return}let l=this.getCurveValue(s);a==x.setup?o.spacing=o.data.spacing+(l-o.data.spacing)*r:o.spacing+=(l-o.spacing)*r}}class ut extends O{constructor(t,e,s){super(t,e,[_+"|"+s]),this.pathConstraintIndex=0,this.pathConstraintIndex=s}getFrameEntries(){return 4}setFrame(t,e,s,i,r){let a=this.frames;a[t<<=2]=e,a[t+1]=s,a[t+2]=i,a[t+3]=r}apply(t,e,s,i,r,a,n){let o=t.pathConstraints[this.pathConstraintIndex];if(!o.active)return;let l,h,c,d=this.frames;if(s<d[0]){switch(a){case x.setup:return o.mixRotate=o.data.mixRotate,o.mixX=o.data.mixX,void(o.mixY=o.data.mixY);case x.first:o.mixRotate+=(o.data.mixRotate-o.mixRotate)*r,o.mixX+=(o.data.mixX-o.mixX)*r,o.mixY+=(o.data.mixY-o.mixY)*r}return}let u=D.search(d,s,4),f=this.curves[u>>2];switch(f){case 0:let t=d[u];l=d[u+1],h=d[u+2],c=d[u+3];let e=(s-t)/(d[u+4]-t);l+=(d[u+4+1]-l)*e,h+=(d[u+4+2]-h)*e,c+=(d[u+4+3]-c)*e;break;case 1:l=d[u+1],h=d[u+2],c=d[u+3];break;default:l=this.getBezierValue(s,u,1,f-2),h=this.getBezierValue(s,u,2,f+18-2),c=this.getBezierValue(s,u,3,f+36-2)}if(a==x.setup){let t=o.data;o.mixRotate=t.mixRotate+(l-t.mixRotate)*r,o.mixX=t.mixX+(h-t.mixX)*r,o.mixY=t.mixY+(c-t.mixY)*r}else o.mixRotate+=(l-o.mixRotate)*r,o.mixX+=(h-o.mixX)*r,o.mixY+=(c-o.mixY)*r}}class ft extends D{constructor(t,e,s){super(t,[B+"|"+e+"|"+s.sequence.id]),this.slotIndex=e,this.attachment=s}getFrameEntries(){return ft.ENTRIES}getSlotIndex(){return this.slotIndex}getAttachment(){return this.attachment}setFrame(t,e,s,i,r){let a=this.frames;a[t*=ft.ENTRIES]=e,a[t+ft.MODE]=s|i<<4,a[t+ft.DELAY]=r}apply(t,e,i,r,a,n,o){let l=t.slots[this.slotIndex];if(!l.bone.active)return;let h=l.attachment,c=this.attachment;if(!(h==c||h instanceof f&&h.timelineAttachment==c))return;let d=this.frames;if(i<d[0])return void(n!=x.setup&&n!=x.first||(l.sequenceIndex=-1));let u=D.search(d,i,ft.ENTRIES),m=d[u],g=d[u+ft.MODE],w=d[u+ft.DELAY];if(!this.attachment.sequence)return;let b=g>>4,y=this.attachment.sequence.regions.length,v=p[15&g];if(v!=s.hold)switch(b+=(i-m)/w+1e-5|0,v){case s.once:b=Math.min(y-1,b);break;case s.loop:b%=y;break;case s.pingpong:{let t=(y<<1)-2;b=0==t?0:b%t,b>=y&&(b=t-b);break}case s.onceReverse:b=Math.max(y-1-b,0);break;case s.loopReverse:b=y-1-b%y;break;case s.pingpongReverse:{let t=(y<<1)-2;b=0==t?0:(b+y-1)%t,b>=y&&(b=t-b)}}l.sequenceIndex=b}}ft.ENTRIES=3,ft.MODE=1,ft.DELAY=2;class mt{static emptyAnimation(){return mt._emptyAnimation}constructor(t){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new gt(this),this.propertyIDs=new r,this.animationsChanged=!1,this.trackEntryPool=new c((()=>new pt)),this.data=t}update(t){t*=this.timeScale;let e=this.tracks;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(!i)continue;i.animationLast=i.nextAnimationLast,i.trackLast=i.nextTrackLast;let r=t*i.timeScale;if(i.delay>0){if(i.delay-=r,i.delay>0)continue;r=-i.delay,i.delay=0}let a=i.next;if(a){let e=i.trackLast-a.delay;if(e>=0){for(a.delay=0,a.trackTime+=0==i.timeScale?0:(e/i.timeScale+t)*a.timeScale,i.trackTime+=r,this.setCurrent(s,a,!0);a.mixingFrom;)a.mixTime+=t,a=a.mixingFrom;continue}}else if(i.trackLast>=i.trackEnd&&!i.mixingFrom){e[s]=null,this.queue.end(i),this.clearNext(i);continue}if(i.mixingFrom&&this.updateMixingFrom(i,t)){let t=i.mixingFrom;for(i.mixingFrom=null,t&&(t.mixingTo=null);t;)this.queue.end(t),t=t.mixingFrom}i.trackTime+=r}this.queue.drain()}updateMixingFrom(t,e){let s=t.mixingFrom;if(!s)return!0;let i=this.updateMixingFrom(s,e);return s.animationLast=s.nextAnimationLast,s.trackLast=s.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration?(0!=s.totalAlpha&&0!=t.mixDuration||(t.mixingFrom=s.mixingFrom,s.mixingFrom&&(s.mixingFrom.mixingTo=t),t.interruptAlpha=s.interruptAlpha,this.queue.end(s)),i):(s.trackTime+=e*s.timeScale,t.mixTime+=e,!1)}apply(t){if(!t)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();let e=this.events,s=this.tracks,i=!1;for(let a=0,n=s.length;a<n;a++){let n=s[a];if(!n||n.delay>0)continue;i=!0;let o=0==a?x.first:n.mixBlend,l=n.alpha;n.mixingFrom?l*=this.applyMixingFrom(n,t,o):n.trackTime>=n.trackEnd&&!n.next&&(l=0);let c=n.animationLast,d=n.getAnimationTime(),u=d,f=e;n.reverse&&(u=n.animation.duration-u,f=null);let m=n.animation.timelines,p=m.length;if(0==a&&1==l||o==x.add)for(let e=0;e<p;e++){h.webkit602BugfixHelper(l,o);var r=m[e];r instanceof rt?this.applyAttachmentTimeline(r,t,u,o,!0):r.apply(t,c,u,f,l,o,w.mixIn)}else{let e=n.timelineMode,s=n.shortestRotation,i=!s&&n.timelinesRotation.length!=p<<1;i&&(n.timelinesRotation.length=p<<1);for(let r=0;r<p;r++){let a=m[r],d=e[r]==wt?o:x.setup;!s&&a instanceof U?this.applyRotateTimeline(a,t,u,l,d,n.timelinesRotation,r<<1,i):a instanceof rt?this.applyAttachmentTimeline(a,t,u,o,!0):(h.webkit602BugfixHelper(l,o),a.apply(t,c,u,f,l,d,w.mixIn))}}this.queueEvents(n,d),e.length=0,n.nextAnimationLast=d,n.nextTrackLast=n.trackTime}for(var a=this.unkeyedState+At,n=t.slots,o=0,l=t.slots.length;o<l;o++){var c=n[o];if(c.attachmentState==a){var d=c.data.attachmentName;c.setAttachment(d?t.getAttachment(c.data.index,d):null)}}return this.unkeyedState+=2,this.queue.drain(),i}applyMixingFrom(t,e,s){let i=t.mixingFrom;i.mixingFrom&&this.applyMixingFrom(i,e,s);let r=0;0==t.mixDuration?(r=1,s==x.first&&(s=x.setup)):(r=t.mixTime/t.mixDuration,r>1&&(r=1),s!=x.first&&(s=i.mixBlend));let a=r<i.attachmentThreshold,n=r<i.drawOrderThreshold,o=i.animation.timelines,l=o.length,c=i.alpha*t.interruptAlpha,d=c*(1-r),u=i.animationLast,f=i.getAnimationTime(),m=f,p=null;if(i.reverse?m=i.animation.duration-m:r<i.eventThreshold&&(p=this.events),s==x.add)for(let t=0;t<l;t++)o[t].apply(e,u,m,p,d,s,w.mixOut);else{let t=i.timelineMode,r=i.timelineHoldMix,f=i.shortestRotation,g=!f&&i.timelinesRotation.length!=l<<1;g&&(i.timelinesRotation.length=l<<1),i.totalAlpha=0;for(let b=0;b<l;b++){let l,y=o[b],v=w.mixOut,I=0;switch(t[b]){case wt:if(!n&&y instanceof ot)continue;l=s,I=d;break;case bt:l=x.setup,I=d;break;case yt:l=s,I=c;break;case vt:l=x.setup,I=c;break;default:l=x.setup;let t=r[b];I=c*Math.max(0,1-t.mixTime/t.mixDuration)}i.totalAlpha+=I,!f&&y instanceof U?this.applyRotateTimeline(y,e,m,I,l,i.timelinesRotation,b<<1,g):y instanceof rt?this.applyAttachmentTimeline(y,e,m,l,a):(h.webkit602BugfixHelper(I,s),n&&y instanceof ot&&l==x.setup&&(v=w.mixIn),y.apply(e,u,m,p,I,l,v))}}return t.mixDuration>0&&this.queueEvents(i,f),this.events.length=0,i.nextAnimationLast=f,i.nextTrackLast=i.trackTime,r}applyAttachmentTimeline(t,e,s,i,r){var a=e.slots[t.slotIndex];a.bone.active&&(s<t.frames[0]?i!=x.setup&&i!=x.first||this.setAttachment(e,a,a.data.attachmentName,r):this.setAttachment(e,a,t.attachmentNames[D.search1(t.frames,s)],r),a.attachmentState<=this.unkeyedState&&(a.attachmentState=this.unkeyedState+At))}setAttachment(t,e,s,i){e.setAttachment(s?t.getAttachment(e.data.index,s):null),i&&(e.attachmentState=this.unkeyedState+Et)}applyRotateTimeline(t,e,s,i,r,a,o,l){if(l&&(a[o]=0),1==i)return void t.apply(e,0,s,null,1,r,w.mixIn);let h=e.bones[t.boneIndex];if(!h.active)return;let c=0,d=0;if(s<t.frames[0])switch(r){case x.setup:h.rotation=h.data.rotation;default:return;case x.first:c=h.rotation,d=h.data.rotation}else c=r==x.setup?h.data.rotation:h.rotation,d=h.data.rotation+t.getCurveValue(s);let u=0,f=d-c;if(f-=360*(16384-(16384.499999999996-f/360|0)),0==f)u=a[o];else{let t=0,e=0;l?(t=0,e=f):(t=a[o],e=a[o+1]);let s=f>0,i=t>=0;n.signum(e)!=n.signum(f)&&Math.abs(e)<=90&&(Math.abs(t)>180&&(t+=360*n.signum(t)),i=s),u=f+t-t%360,i!=s&&(u+=360*n.signum(t)),a[o]=u}a[o+1]=f,h.rotation=c+u*i}queueEvents(t,e){let s=t.animationStart,i=t.animationEnd,r=i-s,a=t.trackLast%r,n=this.events,o=0,l=n.length;for(;o<l;o++){let e=n[o];if(e.time<a)break;e.time>i||this.queue.event(t,e)}let h=!1;for(h=t.loop?0==r||a>t.trackTime%r:e>=i&&t.animationLast<i,h&&this.queue.complete(t);o<l;o++){let e=n[o];e.time<s||this.queue.event(t,e)}}clearTracks(){let t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let t=0,e=this.tracks.length;t<e;t++)this.clearTrack(t);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()}clearTrack(t){if(t>=this.tracks.length)return;let e=this.tracks[t];if(!e)return;this.queue.end(e),this.clearNext(e);let s=e;for(;;){let t=s.mixingFrom;if(!t)break;this.queue.end(t),s.mixingFrom=null,s.mixingTo=null,s=t}this.tracks[e.trackIndex]=null,this.queue.drain()}setCurrent(t,e,s){let i=this.expandToIndex(t);this.tracks[t]=e,e.previous=null,i&&(s&&this.queue.interrupt(i),e.mixingFrom=i,i.mixingTo=e,e.mixTime=0,i.mixingFrom&&i.mixDuration>0&&(e.interruptAlpha*=Math.min(1,i.mixTime/i.mixDuration)),i.timelinesRotation.length=0),this.queue.start(e)}setAnimation(t,e,s=!1){let i=this.data.skeletonData.findAnimation(e);if(!i)throw new Error("Animation not found: "+e);return this.setAnimationWith(t,i,s)}setAnimationWith(t,e,s=!1){if(!e)throw new Error("animation cannot be null.");let i=!0,r=this.expandToIndex(t);r&&(-1==r.nextTrackLast?(this.tracks[t]=r.mixingFrom,this.queue.interrupt(r),this.queue.end(r),this.clearNext(r),r=r.mixingFrom,i=!1):this.clearNext(r));let a=this.trackEntry(t,e,s,r);return this.setCurrent(t,a,i),this.queue.drain(),a}addAnimation(t,e,s=!1,i=0){let r=this.data.skeletonData.findAnimation(e);if(!r)throw new Error("Animation not found: "+e);return this.addAnimationWith(t,r,s,i)}addAnimationWith(t,e,s=!1,i=0){if(!e)throw new Error("animation cannot be null.");let r=this.expandToIndex(t);if(r)for(;r.next;)r=r.next;let a=this.trackEntry(t,e,s,r);return r?(r.next=a,a.previous=r,i<=0&&(i+=r.getTrackComplete()-a.mixDuration)):(this.setCurrent(t,a,!0),this.queue.drain()),a.delay=i,a}setEmptyAnimation(t,e=0){let s=this.setAnimationWith(t,mt.emptyAnimation(),!1);return s.mixDuration=e,s.trackEnd=e,s}addEmptyAnimation(t,e=0,s=0){let i=this.addAnimationWith(t,mt.emptyAnimation(),!1,s);return s<=0&&(i.delay+=i.mixDuration-e),i.mixDuration=e,i.trackEnd=e,i}setEmptyAnimations(t=0){let e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let e=0,s=this.tracks.length;e<s;e++){let s=this.tracks[e];s&&this.setEmptyAnimation(s.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()}expandToIndex(t){return t<this.tracks.length?this.tracks[t]:(h.ensureArrayCapacity(this.tracks,t+1,null),this.tracks.length=t+1,null)}trackEntry(t,e,s,i){let r=this.trackEntryPool.obtain();return r.reset(),r.trackIndex=t,r.animation=e,r.loop=s,r.holdPrevious=!1,r.reverse=!1,r.shortestRotation=!1,r.eventThreshold=0,r.attachmentThreshold=0,r.drawOrderThreshold=0,r.animationStart=0,r.animationEnd=e.duration,r.animationLast=-1,r.nextAnimationLast=-1,r.delay=0,r.trackTime=0,r.trackLast=-1,r.nextTrackLast=-1,r.trackEnd=Number.MAX_VALUE,r.timeScale=1,r.alpha=1,r.mixTime=0,r.mixDuration=i?this.data.getMix(i.animation,e):0,r.interruptAlpha=1,r.totalAlpha=0,r.mixBlend=x.replace,r}clearNext(t){let e=t.next;for(;e;)this.queue.dispose(e),e=e.next;t.next=null}_animationsChanged(){this.animationsChanged=!1,this.propertyIDs.clear();let t=this.tracks;for(let e=0,s=t.length;e<s;e++){let s=t[e];if(s){for(;s.mixingFrom;)s=s.mixingFrom;do{s.mixingTo&&s.mixBlend==x.add||this.computeHold(s),s=s.mixingTo}while(s)}}}computeHold(t){let e=t.mixingTo,s=t.animation.timelines,i=t.animation.timelines.length,r=t.timelineMode;r.length=i;let a=t.timelineHoldMix;a.length=0;let n=this.propertyIDs;if(e&&e.holdPrevious)for(let t=0;t<i;t++)r[t]=n.addAll(s[t].getPropertyIds())?vt:yt;else t:for(let o=0;o<i;o++){let i=s[o],l=i.getPropertyIds();if(n.addAll(l))if(!e||i instanceof rt||i instanceof ot||i instanceof nt||!e.animation.hasTimeline(l))r[o]=bt;else{for(let s=e.mixingTo;s;s=s.mixingTo)if(!s.animation.hasTimeline(l)){if(t.mixDuration>0){r[o]=It,a[o]=s;continue t}break}r[o]=vt}else r[o]=wt}}getCurrent(t){return t>=this.tracks.length?null:this.tracks[t]}addListener(t){if(!t)throw new Error("listener cannot be null.");this.listeners.push(t)}removeListener(t){let e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)}clearListeners(){this.listeners.length=0}clearListenerNotifications(){this.queue.clear()}}mt._emptyAnimation=new g("<empty>",[],0);class pt{constructor(){this.animation=null,this.previous=null,this.next=null,this.mixingFrom=null,this.mixingTo=null,this.listener=null,this.trackIndex=0,this.loop=!1,this.holdPrevious=!1,this.reverse=!1,this.shortestRotation=!1,this.eventThreshold=0,this.attachmentThreshold=0,this.drawOrderThreshold=0,this.animationStart=0,this.animationEnd=0,this.animationLast=0,this.nextAnimationLast=0,this.delay=0,this.trackTime=0,this.trackLast=0,this.nextTrackLast=0,this.trackEnd=0,this.timeScale=0,this.alpha=0,this.mixTime=0,this.mixDuration=0,this.interruptAlpha=0,this.totalAlpha=0,this.mixBlend=x.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}reset(){this.next=null,this.previous=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0}getAnimationTime(){if(this.loop){let t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)}setAnimationLast(t){this.animationLast=t,this.nextAnimationLast=t}isComplete(){return this.trackTime>=this.animationEnd-this.animationStart}resetRotationDirections(){this.timelinesRotation.length=0}getTrackComplete(){let t=this.animationEnd-this.animationStart;if(0!=t){if(this.loop)return t*(1+(this.trackTime/t|0));if(this.trackTime<t)return t}return this.trackTime}}class gt{constructor(t){this.objects=[],this.drainDisabled=!1,this.animState=t}start(t){this.objects.push(xt.start),this.objects.push(t),this.animState.animationsChanged=!0}interrupt(t){this.objects.push(xt.interrupt),this.objects.push(t)}end(t){this.objects.push(xt.end),this.objects.push(t),this.animState.animationsChanged=!0}dispose(t){this.objects.push(xt.dispose),this.objects.push(t)}complete(t){this.objects.push(xt.complete),this.objects.push(t)}event(t,e){this.objects.push(xt.event),this.objects.push(t),this.objects.push(e)}drain(){if(this.drainDisabled)return;this.drainDisabled=!0;let t=this.objects,e=this.animState.listeners;for(let s=0;s<t.length;s+=2){let i=t[s],r=t[s+1];switch(i){case xt.start:r.listener&&r.listener.start&&r.listener.start(r);for(let t=0;t<e.length;t++){let s=e[t];s.start&&s.start(r)}break;case xt.interrupt:r.listener&&r.listener.interrupt&&r.listener.interrupt(r);for(let t=0;t<e.length;t++){let s=e[t];s.interrupt&&s.interrupt(r)}break;case xt.end:r.listener&&r.listener.end&&r.listener.end(r);for(let t=0;t<e.length;t++){let s=e[t];s.end&&s.end(r)}case xt.dispose:r.listener&&r.listener.dispose&&r.listener.dispose(r);for(let t=0;t<e.length;t++){let s=e[t];s.dispose&&s.dispose(r)}this.animState.trackEntryPool.free(r);break;case xt.complete:r.listener&&r.listener.complete&&r.listener.complete(r);for(let t=0;t<e.length;t++){let s=e[t];s.complete&&s.complete(r)}break;case xt.event:let i=t[2+s++];r.listener&&r.listener.event&&r.listener.event(r,i);for(let t=0;t<e.length;t++){let s=e[t];s.event&&s.event(r,i)}}}this.clear(),this.drainDisabled=!1}clear(){this.objects.length=0}}var xt;!function(t){t[t.start=0]="start",t[t.interrupt=1]="interrupt",t[t.end=2]="end",t[t.dispose=3]="dispose",t[t.complete=4]="complete",t[t.event=5]="event"}(xt||(xt={}));const wt=0,bt=1,yt=2,vt=3,It=4,At=1,Et=2;class St{constructor(t){if(this.animationToMixTime={},this.defaultMix=0,!t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}setMix(t,e,s){let i=this.skeletonData.findAnimation(t);if(!i)throw new Error("Animation not found: "+t);let r=this.skeletonData.findAnimation(e);if(!r)throw new Error("Animation not found: "+e);this.setMixWith(i,r,s)}setMixWith(t,e,s){if(!t)throw new Error("from cannot be null.");if(!e)throw new Error("to cannot be null.");let i=t.name+"."+e.name;this.animationToMixTime[i]=s}getMix(t,e){let s=t.name+"."+e.name,i=this.animationToMixTime[s];return void 0===i?this.defaultMix:i}}class kt extends f{constructor(t){super(t),this.color=new a(1,1,1,1)}copy(){let t=new kt(this.name);return this.copyTo(t),t.color.setFromColor(this.color),t}}class Tt extends f{constructor(t){super(t),this.endSlot=null,this.color=new a(.2275,.2275,.8078,1)}copy(){let t=new Tt(this.name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t}}class Rt{constructor(t){this._image=t}getImage(){return this._image}}var Ct,Mt,Ft,Yt,Xt,Nt,Lt;!function(t){t[t.Nearest=9728]="Nearest",t[t.Linear=9729]="Linear",t[t.MipMap=9987]="MipMap",t[t.MipMapNearestNearest=9984]="MipMapNearestNearest",t[t.MipMapLinearNearest=9985]="MipMapLinearNearest",t[t.MipMapNearestLinear=9986]="MipMapNearestLinear",t[t.MipMapLinearLinear=9987]="MipMapLinearLinear"}(Ct||(Ct={})),function(t){t[t.MirroredRepeat=33648]="MirroredRepeat",t[t.ClampToEdge=33071]="ClampToEdge",t[t.Repeat=10497]="Repeat"}(Mt||(Mt={}));class Pt{constructor(){this.u=0,this.v=0,this.u2=0,this.v2=0,this.width=0,this.height=0,this.degrees=0,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0}}class _t{constructor(t){this.pages=new Array,this.regions=new Array;let e=new Bt(t),s=new Array(4),i={size:t=>{t.width=parseInt(s[1]),t.height=parseInt(s[2])},format:()=>{},filter:t=>{t.minFilter=h.enumValue(Ct,s[1]),t.magFilter=h.enumValue(Ct,s[2])},repeat:t=>{-1!=s[1].indexOf("x")&&(t.uWrap=Mt.Repeat),-1!=s[1].indexOf("y")&&(t.vWrap=Mt.Repeat)},pma:t=>{t.pma="true"==s[1]}};var r={xy:t=>{t.x=parseInt(s[1]),t.y=parseInt(s[2])},size:t=>{t.width=parseInt(s[1]),t.height=parseInt(s[2])},bounds:t=>{t.x=parseInt(s[1]),t.y=parseInt(s[2]),t.width=parseInt(s[3]),t.height=parseInt(s[4])},offset:t=>{t.offsetX=parseInt(s[1]),t.offsetY=parseInt(s[2])},orig:t=>{t.originalWidth=parseInt(s[1]),t.originalHeight=parseInt(s[2])},offsets:t=>{t.offsetX=parseInt(s[1]),t.offsetY=parseInt(s[2]),t.originalWidth=parseInt(s[3]),t.originalHeight=parseInt(s[4])},rotate:t=>{let e=s[1];"true"==e?t.degrees=90:"false"!=e&&(t.degrees=parseInt(e))},index:t=>{t.index=parseInt(s[1])}};let a=e.readLine();for(;a&&0==a.trim().length;)a=e.readLine();for(;a&&0!=a.trim().length&&0!=e.readEntry(s,a);)a=e.readLine();let n=null,o=null,l=null;for(;null!==a;)if(0==a.trim().length)n=null,a=e.readLine();else if(n){let t=new Ot(n,a);for(;;){let i=e.readEntry(s,a=e.readLine());if(0==i)break;let n=r[s[0]];if(n)n(t);else{o||(o=[]),l||(l=[]),o.push(s[0]);let t=[];for(let e=0;e<i;e++)t.push(parseInt(s[e+1]));l.push(t)}}0==t.originalWidth&&0==t.originalHeight&&(t.originalWidth=t.width,t.originalHeight=t.height),o&&o.length>0&&l&&l.length>0&&(t.names=o,t.values=l,o=null,l=null),t.u=t.x/n.width,t.v=t.y/n.height,90==t.degrees?(t.u2=(t.x+t.height)/n.width,t.v2=(t.y+t.width)/n.height):(t.u2=(t.x+t.width)/n.width,t.v2=(t.y+t.height)/n.height),this.regions.push(t)}else{for(n=new Dt(a.trim());0!=e.readEntry(s,a=e.readLine());){let t=i[s[0]];t&&t(n)}this.pages.push(n)}}findRegion(t){for(let e=0;e<this.regions.length;e++)if(this.regions[e].name==t)return this.regions[e];return null}setTextures(t,e=""){for(let s of this.pages)s.setTexture(t.get(e+s.name))}dispose(){var t;for(let e=0;e<this.pages.length;e++)null===(t=this.pages[e].texture)||void 0===t||t.dispose()}}class Bt{constructor(t){this.index=0,this.lines=t.split(/\r\n|\r|\n/)}readLine(){return this.index>=this.lines.length?null:this.lines[this.index++]}readEntry(t,e){if(!e)return 0;if(0==(e=e.trim()).length)return 0;let s=e.indexOf(":");if(-1==s)return 0;t[0]=e.substr(0,s).trim();for(let i=1,r=s+1;;i++){let s=e.indexOf(",",r);if(-1==s)return t[i]=e.substr(r).trim(),i;if(t[i]=e.substr(r,s-r).trim(),r=s+1,4==i)return 4}}}class Dt{constructor(t){this.minFilter=Ct.Nearest,this.magFilter=Ct.Nearest,this.uWrap=Mt.ClampToEdge,this.vWrap=Mt.ClampToEdge,this.texture=null,this.width=0,this.height=0,this.pma=!1,this.regions=new Array,this.name=t}setTexture(t){this.texture=t,t.setFilters(this.minFilter,this.magFilter),t.setWraps(this.uWrap,this.vWrap);for(let e of this.regions)e.texture=t}}class Ot extends Pt{constructor(t,e){super(),this.x=0,this.y=0,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0,this.index=0,this.degrees=0,this.names=null,this.values=null,this.page=t,this.name=e,t.regions.push(this)}}class $t extends f{constructor(t,e){super(t),this.region=null,this.regionUVs=[],this.uvs=[],this.triangles=[],this.color=new a(1,1,1,1),this.width=0,this.height=0,this.hullLength=0,this.edges=[],this.parentMesh=null,this.sequence=null,this.tempColor=new a(0,0,0,0),this.path=e}updateRegion(){if(!this.region)throw new Error("Region not set.");let t=this.regionUVs;this.uvs&&this.uvs.length==t.length||(this.uvs=h.newFloatArray(t.length));let e=this.uvs,s=this.uvs.length,i=this.region.u,r=this.region.v,a=0,n=0;if(this.region instanceof Ot){let o=this.region,l=o.page.texture.getImage(),h=l.width,c=l.height;switch(o.degrees){case 90:i-=(o.originalHeight-o.offsetY-o.height)/h,r-=(o.originalWidth-o.offsetX-o.width)/c,a=o.originalHeight/h,n=o.originalWidth/c;for(let o=0;o<s;o+=2)e[o]=i+t[o+1]*a,e[o+1]=r+(1-t[o])*n;return;case 180:i-=(o.originalWidth-o.offsetX-o.width)/h,r-=o.offsetY/c,a=o.originalWidth/h,n=o.originalHeight/c;for(let o=0;o<s;o+=2)e[o]=i+(1-t[o])*a,e[o+1]=r+(1-t[o+1])*n;return;case 270:i-=o.offsetY/h,r-=o.offsetX/c,a=o.originalHeight/h,n=o.originalWidth/c;for(let o=0;o<s;o+=2)e[o]=i+(1-t[o+1])*a,e[o+1]=r+t[o]*n;return}i-=o.offsetX/h,r-=(o.originalHeight-o.offsetY-o.height)/c,a=o.originalWidth/h,n=o.originalHeight/c}else this.region?(a=this.region.u2-i,n=this.region.v2-r):(i=r=0,a=n=1);for(let o=0;o<s;o+=2)e[o]=i+t[o]*a,e[o+1]=r+t[o+1]*n}getParentMesh(){return this.parentMesh}setParentMesh(t){this.parentMesh=t,t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)}copy(){if(this.parentMesh)return this.newLinkedMesh();let t=new $t(this.name,this.path);return t.region=this.region,t.color.setFromColor(this.color),this.copyTo(t),t.regionUVs=new Array(this.regionUVs.length),h.arrayCopy(this.regionUVs,0,t.regionUVs,0,this.regionUVs.length),t.uvs=new Array(this.uvs.length),h.arrayCopy(this.uvs,0,t.uvs,0,this.uvs.length),t.triangles=new Array(this.triangles.length),h.arrayCopy(this.triangles,0,t.triangles,0,this.triangles.length),t.hullLength=this.hullLength,t.sequence=null!=this.sequence?this.sequence.copy():null,this.edges&&(t.edges=new Array(this.edges.length),h.arrayCopy(this.edges,0,t.edges,0,this.edges.length)),t.width=this.width,t.height=this.height,t}computeWorldVertices(t,e,s,i,r,a){null!=this.sequence&&this.sequence.apply(t,this),super.computeWorldVertices(t,e,s,i,r,a)}newLinkedMesh(){let t=new $t(this.name,this.path);return t.region=this.region,t.color.setFromColor(this.color),t.timelineAttachment=this.timelineAttachment,t.setParentMesh(this.parentMesh?this.parentMesh:this),null!=t.region&&t.updateRegion(),t}}class Vt extends f{constructor(t){super(t),this.lengths=[],this.closed=!1,this.constantSpeed=!1,this.color=new a(1,1,1,1)}copy(){let t=new Vt(this.name);return this.copyTo(t),t.lengths=new Array(this.lengths.length),h.arrayCopy(this.lengths,0,t.lengths,0,this.lengths.length),t.closed=closed,t.constantSpeed=this.constantSpeed,t.color.setFromColor(this.color),t}}class Ut extends f{constructor(t){super(t),this.x=0,this.y=0,this.rotation=0,this.color=new a(.38,.94,0,1)}computeWorldPosition(t,e){return e.x=this.x*t.a+this.y*t.b+t.worldX,e.y=this.x*t.c+this.y*t.d+t.worldY,e}computeWorldRotation(t){let e=n.cosDeg(this.rotation),s=n.sinDeg(this.rotation),i=e*t.a+s*t.b,r=e*t.c+s*t.d;return Math.atan2(r,i)*n.radDeg}copy(){let t=new Ut(this.name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t}}class qt extends u{constructor(t,e){super(t),this.x=0,this.y=0,this.scaleX=1,this.scaleY=1,this.rotation=0,this.width=0,this.height=0,this.color=new a(1,1,1,1),this.region=null,this.sequence=null,this.offset=h.newFloatArray(8),this.uvs=h.newFloatArray(8),this.tempColor=new a(1,1,1,1),this.path=e}updateRegion(){if(!this.region)throw new Error("Region not set.");let t=this.region,e=this.uvs;if(null==t)return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=1,e[5]=1,e[6]=1,void(e[7]=0);let s=this.width/this.region.originalWidth*this.scaleX,i=this.height/this.region.originalHeight*this.scaleY,r=-this.width/2*this.scaleX+this.region.offsetX*s,a=-this.height/2*this.scaleY+this.region.offsetY*i,n=r+this.region.width*s,o=a+this.region.height*i,l=this.rotation*Math.PI/180,h=Math.cos(l),c=Math.sin(l),d=this.x,u=this.y,f=r*h+d,m=r*c,p=a*h+u,g=a*c,x=n*h+d,w=n*c,b=o*h+u,y=o*c,v=this.offset;v[0]=f-g,v[1]=p+m,v[2]=f-y,v[3]=b+m,v[4]=x-y,v[5]=b+w,v[6]=x-g,v[7]=p+w,90==t.degrees?(e[0]=t.u2,e[1]=t.v2,e[2]=t.u,e[3]=t.v2,e[4]=t.u,e[5]=t.v,e[6]=t.u2,e[7]=t.v):(e[0]=t.u,e[1]=t.v2,e[2]=t.u,e[3]=t.v,e[4]=t.u2,e[5]=t.v,e[6]=t.u2,e[7]=t.v2)}computeWorldVertices(t,e,s,i){null!=this.sequence&&this.sequence.apply(t,this);let r=t.bone,a=this.offset,n=r.worldX,o=r.worldY,l=r.a,h=r.b,c=r.c,d=r.d,u=0,f=0;u=a[0],f=a[1],e[s]=u*l+f*h+n,e[s+1]=u*c+f*d+o,s+=i,u=a[2],f=a[3],e[s]=u*l+f*h+n,e[s+1]=u*c+f*d+o,s+=i,u=a[4],f=a[5],e[s]=u*l+f*h+n,e[s+1]=u*c+f*d+o,s+=i,u=a[6],f=a[7],e[s]=u*l+f*h+n,e[s+1]=u*c+f*d+o}copy(){let t=new qt(this.name,this.path);return t.region=this.region,t.x=this.x,t.y=this.y,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.rotation=this.rotation,t.width=this.width,t.height=this.height,h.arrayCopy(this.uvs,0,t.uvs,0,8),h.arrayCopy(this.offset,0,t.offset,0,8),t.color.setFromColor(this.color),t.sequence=null!=this.sequence?this.sequence.copy():null,t}}qt.X1=0,qt.Y1=1,qt.C1R=2,qt.C1G=3,qt.C1B=4,qt.C1A=5,qt.U1=6,qt.V1=7,qt.X2=8,qt.Y2=9,qt.C2R=10,qt.C2G=11,qt.C2B=12,qt.C2A=13,qt.U2=14,qt.V2=15,qt.X3=16,qt.Y3=17,qt.C3R=18,qt.C3G=19,qt.C3B=20,qt.C3A=21,qt.U3=22,qt.V3=23,qt.X4=24,qt.Y4=25,qt.C4R=26,qt.C4G=27,qt.C4B=28,qt.C4A=29,qt.U4=30,qt.V4=31;class Wt{constructor(t){this.atlas=t}loadSequence(t,e,s){let i=s.regions;for(let r=0,a=i.length;r<a;r++){let a=s.getPath(e,r),n=this.atlas.findRegion(a);if(null==n)throw new Error("Region not found in atlas: "+a+" (sequence: "+t+")");i[r]=n}}newRegionAttachment(t,e,s,i){let r=new qt(e,s);if(null!=i)this.loadSequence(e,s,i);else{let t=this.atlas.findRegion(s);if(!t)throw new Error("Region not found in atlas: "+s+" (region attachment: "+e+")");r.region=t}return r}newMeshAttachment(t,e,s,i){let r=new $t(e,s);if(null!=i)this.loadSequence(e,s,i);else{let t=this.atlas.findRegion(s);if(!t)throw new Error("Region not found in atlas: "+s+" (mesh attachment: "+e+")");r.region=t}return r}newBoundingBoxAttachment(t,e){return new kt(e)}newPathAttachment(t,e){return new Vt(e)}newPointAttachment(t,e){return new Ut(e)}newClippingAttachment(t,e){return new Tt(e)}}class zt{constructor(t,e,s){if(this.index=0,this.parent=null,this.length=0,this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=Ft.Normal,this.skinRequired=!1,this.color=new a,t<0)throw new Error("index must be >= 0.");if(!e)throw new Error("name cannot be null.");this.index=t,this.name=e,this.parent=s}}!function(t){t[t.Normal=0]="Normal",t[t.OnlyTranslation=1]="OnlyTranslation",t[t.NoRotationOrReflection=2]="NoRotationOrReflection",t[t.NoScale=3]="NoScale",t[t.NoScaleOrReflection=4]="NoScaleOrReflection"}(Ft||(Ft={}));class Gt{constructor(t,e,s){if(this.parent=null,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.a=0,this.b=0,this.c=0,this.d=0,this.worldY=0,this.worldX=0,this.sorted=!1,this.active=!1,!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=s,this.setToSetupPose()}isActive(){return this.active}update(){this.updateWorldTransformWith(this.ax,this.ay,this.arotation,this.ascaleX,this.ascaleY,this.ashearX,this.ashearY)}updateWorldTransform(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)}updateWorldTransformWith(t,e,s,i,r,a,o){this.ax=t,this.ay=e,this.arotation=s,this.ascaleX=i,this.ascaleY=r,this.ashearX=a,this.ashearY=o;let l=this.parent;if(!l){let l=this.skeleton,h=s+90+o,c=l.scaleX,d=l.scaleY;return this.a=n.cosDeg(s+a)*i*c,this.b=n.cosDeg(h)*r*c,this.c=n.sinDeg(s+a)*i*d,this.d=n.sinDeg(h)*r*d,this.worldX=t*c+l.x,void(this.worldY=e*d+l.y)}let h=l.a,c=l.b,d=l.c,u=l.d;switch(this.worldX=h*t+c*e+l.worldX,this.worldY=d*t+u*e+l.worldY,this.data.transformMode){case Ft.Normal:{let t=s+90+o,e=n.cosDeg(s+a)*i,l=n.cosDeg(t)*r,f=n.sinDeg(s+a)*i,m=n.sinDeg(t)*r;return this.a=h*e+c*f,this.b=h*l+c*m,this.c=d*e+u*f,void(this.d=d*l+u*m)}case Ft.OnlyTranslation:{let t=s+90+o;this.a=n.cosDeg(s+a)*i,this.b=n.cosDeg(t)*r,this.c=n.sinDeg(s+a)*i,this.d=n.sinDeg(t)*r;break}case Ft.NoRotationOrReflection:{let t=h*h+d*d,e=0;t>1e-4?(t=Math.abs(h*u-c*d)/t,h/=this.skeleton.scaleX,d/=this.skeleton.scaleY,c=d*t,u=h*t,e=Math.atan2(d,h)*n.radDeg):(h=0,d=0,e=90-Math.atan2(u,c)*n.radDeg);let l=s+a-e,f=s+o-e+90,m=n.cosDeg(l)*i,p=n.cosDeg(f)*r,g=n.sinDeg(l)*i,x=n.sinDeg(f)*r;this.a=h*m-c*g,this.b=h*p-c*x,this.c=d*m+u*g,this.d=d*p+u*x;break}case Ft.NoScale:case Ft.NoScaleOrReflection:{let t=n.cosDeg(s),e=n.sinDeg(s),l=(h*t+c*e)/this.skeleton.scaleX,f=(d*t+u*e)/this.skeleton.scaleY,m=Math.sqrt(l*l+f*f);m>1e-5&&(m=1/m),l*=m,f*=m,m=Math.sqrt(l*l+f*f),this.data.transformMode==Ft.NoScale&&h*u-c*d<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(m=-m);let p=Math.PI/2+Math.atan2(f,l),g=Math.cos(p)*m,x=Math.sin(p)*m,w=n.cosDeg(a)*i,b=n.cosDeg(90+o)*r,y=n.sinDeg(a)*i,v=n.sinDeg(90+o)*r;this.a=l*w+g*y,this.b=l*b+g*v,this.c=f*w+x*y,this.d=f*b+x*v;break}}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY}setToSetupPose(){let t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY}getWorldRotationX(){return Math.atan2(this.c,this.a)*n.radDeg}getWorldRotationY(){return Math.atan2(this.d,this.b)*n.radDeg}getWorldScaleX(){return Math.sqrt(this.a*this.a+this.c*this.c)}getWorldScaleY(){return Math.sqrt(this.b*this.b+this.d*this.d)}updateAppliedTransform(){let t=this.parent;if(!t)return this.ax=this.worldX-this.skeleton.x,this.ay=this.worldY-this.skeleton.y,this.arotation=Math.atan2(this.c,this.a)*n.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,void(this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*n.radDeg);let e=t.a,s=t.b,i=t.c,r=t.d,a=1/(e*r-s*i),o=this.worldX-t.worldX,l=this.worldY-t.worldY;this.ax=o*r*a-l*s*a,this.ay=l*e*a-o*i*a;let h=a*r,c=a*e,d=a*s,u=a*i,f=h*this.a-d*this.c,m=h*this.b-d*this.d,p=c*this.c-u*this.a,g=c*this.d-u*this.b;if(this.ashearX=0,this.ascaleX=Math.sqrt(f*f+p*p),this.ascaleX>1e-4){let t=f*g-m*p;this.ascaleY=t/this.ascaleX,this.ashearY=Math.atan2(f*m+p*g,t)*n.radDeg,this.arotation=Math.atan2(p,f)*n.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(m*m+g*g),this.ashearY=0,this.arotation=90-Math.atan2(g,m)*n.radDeg}worldToLocal(t){let e=1/(this.a*this.d-this.b*this.c),s=t.x-this.worldX,i=t.y-this.worldY;return t.x=s*this.d*e-i*this.b*e,t.y=i*this.a*e-s*this.c*e,t}localToWorld(t){let e=t.x,s=t.y;return t.x=e*this.a+s*this.b+this.worldX,t.y=e*this.c+s*this.d+this.worldY,t}worldToLocalRotation(t){let e=n.sinDeg(t),s=n.cosDeg(t);return Math.atan2(this.a*e-this.c*s,this.d*s-this.b*e)*n.radDeg+this.rotation-this.shearX}localToWorldRotation(t){t-=this.rotation-this.shearX;let e=n.sinDeg(t),s=n.cosDeg(t);return Math.atan2(s*this.c+e*this.d,s*this.a+e*this.b)*n.radDeg}rotateWorld(t){let e=this.a,s=this.b,i=this.c,r=this.d,a=n.cosDeg(t),o=n.sinDeg(t);this.a=a*e-o*i,this.b=a*s-o*r,this.c=o*e+a*i,this.d=o*s+a*r}}class jt{constructor(t,e,s){this.name=t,this.order=e,this.skinRequired=s}}class Ht{constructor(){this.callbacks={},this.rawDataUris={}}dataUriToString(t){if(!t.startsWith("data:"))throw new Error("Not a data URI.");let e=t.indexOf("base64,");return-1!=e?(e+=7,atob(t.substr(e))):t.substr(t.indexOf(",")+1)}base64ToUint8Array(t){for(var e=window.atob(t),s=e.length,i=new Uint8Array(s),r=0;r<s;r++)i[r]=e.charCodeAt(r);return i}dataUriToUint8Array(t){if(!t.startsWith("data:"))throw new Error("Not a data URI.");let e=t.indexOf("base64,");if(-1==e)throw new Error("Not a binary data URI.");return e+=7,this.base64ToUint8Array(t.substr(e))}downloadText(t,e,s){if(this.start(t,e,s))return;if(this.rawDataUris[t]){try{let e=this.rawDataUris[t];this.finish(t,200,this.dataUriToString(e))}catch(e){this.finish(t,400,JSON.stringify(e))}return}let i=new XMLHttpRequest;i.overrideMimeType("text/html"),i.open("GET",t,!0);let r=()=>{this.finish(t,i.status,i.responseText)};i.onload=r,i.onerror=r,i.send()}downloadJson(t,e,s){this.downloadText(t,(t=>{e(JSON.parse(t))}),s)}downloadBinary(t,e,s){if(this.start(t,e,s))return;if(this.rawDataUris[t]){try{let e=this.rawDataUris[t];this.finish(t,200,this.dataUriToUint8Array(e))}catch(e){this.finish(t,400,JSON.stringify(e))}return}let i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="arraybuffer";let r=()=>{this.finish(t,i.status,i.response)};i.onload=()=>{200==i.status||0==i.status?this.finish(t,200,new Uint8Array(i.response)):r()},i.onerror=r,i.send()}start(t,e,s){let i=this.callbacks[t];try{if(i)return!0;this.callbacks[t]=i=[]}finally{i.push(e,s)}}finish(t,e,s){let i=this.callbacks[t];delete this.callbacks[t];let r=200==e||0==e?[s]:[e,s];for(let t=r.length-1,e=i.length;t<e;t+=2)i[t].apply(null,r)}}class Jt{constructor(t,e){if(this.intValue=0,this.floatValue=0,this.stringValue=null,this.time=0,this.volume=0,this.balance=0,!e)throw new Error("data cannot be null.");this.time=t,this.data=e}}class Kt{constructor(t){this.intValue=0,this.floatValue=0,this.stringValue=null,this.audioPath=null,this.volume=0,this.balance=0,this.name=t}}class Qt{constructor(t,e){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(let s=0;s<t.bones.length;s++){let i=e.findBone(t.bones[s].name);if(!i)throw new Error(`Couldn't find bone ${t.bones[s].name}`);this.bones.push(i)}let s=e.findBone(t.target.name);if(!s)throw new Error(`Couldn't find bone ${t.target.name}`);this.target=s}isActive(){return this.active}update(){if(0==this.mix)return;let t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.data.uniform,this.softness,this.mix)}}apply1(t,e,s,i,r,a,o){let l=t.parent;if(!l)throw new Error("IK bone must have parent.");let h=l.a,c=l.b,d=l.c,u=l.d,f=-t.ashearX-t.arotation,m=0,p=0;switch(t.data.transformMode){case Ft.OnlyTranslation:m=e-t.worldX,p=s-t.worldY;break;case Ft.NoRotationOrReflection:let i=Math.abs(h*u-c*d)/Math.max(1e-4,h*h+d*d),r=h/t.skeleton.scaleX,a=d/t.skeleton.scaleY;c=-a*i*t.skeleton.scaleX,u=r*i*t.skeleton.scaleY,f+=Math.atan2(a,r)*n.radDeg;default:let o=e-l.worldX,g=s-l.worldY,x=h*u-c*d;Math.abs(x)<=1e-4?(m=0,p=0):(m=(o*u-g*c)/x-t.ax,p=(g*h-o*d)/x-t.ay)}f+=Math.atan2(p,m)*n.radDeg,t.ascaleX<0&&(f+=180),f>180?f-=360:f<-180&&(f+=360);let g=t.ascaleX,x=t.ascaleY;if(i||r){switch(t.data.transformMode){case Ft.NoScale:case Ft.NoScaleOrReflection:m=e-t.worldX,p=s-t.worldY}let n=t.data.length*g,l=Math.sqrt(m*m+p*p);if(i&&l<n||r&&l>n&&n>1e-4){let t=(l/n-1)*o+1;g*=t,a&&(x*=t)}}t.updateWorldTransformWith(t.ax,t.ay,t.arotation+f*o,g,x,t.ashearX,t.ashearY)}apply2(t,e,s,i,r,a,o,l,h){let c=t.ax,d=t.ay,u=t.ascaleX,f=t.ascaleY,m=u,p=f,g=e.ascaleX,x=0,w=0,b=0;u<0?(u=-u,x=180,b=-1):(x=0,b=1),f<0&&(f=-f,b=-b),g<0?(g=-g,w=180):w=0;let y=e.ax,v=0,I=0,A=0,E=t.a,S=t.b,k=t.c,T=t.d,R=Math.abs(u-f)<=1e-4;!R||a?(v=0,I=E*y+t.worldX,A=k*y+t.worldY):(v=e.ay,I=E*y+S*v+t.worldX,A=k*y+T*v+t.worldY);let C=t.parent;if(!C)throw new Error("IK parent must itself have a parent.");E=C.a,S=C.b,k=C.c,T=C.d;let M=E*T-S*k,F=I-C.worldX,Y=A-C.worldY;M=Math.abs(M)<=1e-4?0:1/M;let X,N,L=(F*T-Y*S)*M-c,P=(Y*E-F*k)*M-d,_=Math.sqrt(L*L+P*P),B=e.data.length*g;if(_<1e-4)return this.apply1(t,s,i,!1,a,!1,h),void e.updateWorldTransformWith(y,v,0,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY);F=s-C.worldX,Y=i-C.worldY;let D=(F*T-Y*S)*M-c,O=(Y*E-F*k)*M-d,$=D*D+O*O;if(0!=l){l*=u*(g+1)*.5;let t=Math.sqrt($),e=t-_-B*u+l;if(e>0){let s=Math.min(1,e/(2*l))-1;s=(e-l*(1-s*s))/t,D-=s*D,O-=s*O,$=D*D+O*O}}t:if(R){B*=u;let t=($-_*_-B*B)/(2*_*B);t<-1?(t=-1,N=Math.PI*r):t>1?(t=1,N=0,a&&(E=(Math.sqrt($)/(_+B)-1)*h+1,m*=E,o&&(p*=E))):N=Math.acos(t)*r,E=_+B*t,S=B*Math.sin(N),X=Math.atan2(O*E-D*S,D*E+O*S)}else{E=u*B,S=f*B;let t=E*E,e=S*S,s=Math.atan2(O,D);k=e*_*_+t*$-t*e;let i=-2*e*_,a=e-t;if(T=i*i-4*a*k,T>=0){let t=Math.sqrt(T);i<0&&(t=-t),t=.5*-(i+t);let e=t/a,n=k/t,o=Math.abs(e)<Math.abs(n)?e:n;if(o*o<=$){Y=Math.sqrt($-o*o)*r,X=s-Math.atan2(Y,o),N=Math.atan2(Y/f,(o-_)/u);break t}}let o=n.PI,l=_-E,h=l*l,c=0,d=0,m=_+E,p=m*m,g=0;k=-E*_/(t-e),k>=-1&&k<=1&&(k=Math.acos(k),F=E*Math.cos(k)+_,Y=S*Math.sin(k),T=F*F+Y*Y,T<h&&(o=k,h=T,l=F,c=Y),T>p&&(d=k,p=T,m=F,g=Y)),$<=.5*(h+p)?(X=s-Math.atan2(c*r,l),N=o*r):(X=s-Math.atan2(g*r,m),N=d*r)}let V=Math.atan2(v,y)*b,U=t.arotation;X=(X-V)*n.radDeg+x-U,X>180?X-=360:X<-180&&(X+=360),t.updateWorldTransformWith(c,d,U+X*h,m,p,0,0),U=e.arotation,N=((N+V)*n.radDeg-e.ashearX)*b+w-U,N>180?N-=360:N<-180&&(N+=360),e.updateWorldTransformWith(y,v,U+N*h,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)}}class Zt extends jt{set target(t){this._target=t}get target(){if(this._target)return this._target;throw new Error("BoneData not set.")}constructor(t){super(t,0,!1),this.bones=new Array,this._target=null,this.bendDirection=1,this.compress=!1,this.stretch=!1,this.uniform=!1,this.mix=1,this.softness=0}}class te extends jt{set target(t){this._target=t}get target(){if(this._target)return this._target;throw new Error("SlotData not set.")}constructor(t){super(t,0,!1),this.bones=new Array,this._target=null,this.positionMode=Yt.Fixed,this.spacingMode=Xt.Fixed,this.rotateMode=Nt.Chain,this.offsetRotation=0,this.position=0,this.spacing=0,this.mixRotate=0,this.mixX=0,this.mixY=0}}!function(t){t[t.Fixed=0]="Fixed",t[t.Percent=1]="Percent"}(Yt||(Yt={})),function(t){t[t.Length=0]="Length",t[t.Fixed=1]="Fixed",t[t.Percent=2]="Percent",t[t.Proportional=3]="Proportional"}(Xt||(Xt={})),function(t){t[t.Tangent=0]="Tangent",t[t.Chain=1]="Chain",t[t.ChainScale=2]="ChainScale"}(Nt||(Nt={}));class ee{constructor(t,e){if(this.position=0,this.spacing=0,this.mixRotate=0,this.mixX=0,this.mixY=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(let s=0,i=t.bones.length;s<i;s++){let i=e.findBone(t.bones[s].name);if(!i)throw new Error(`Couldn't find bone ${t.bones[s].name}.`);this.bones.push(i)}let s=e.findSlot(t.target.name);if(!s)throw new Error(`Couldn't find target bone ${t.target.name}`);this.target=s,this.position=t.position,this.spacing=t.spacing,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY}isActive(){return this.active}update(){let t=this.target.getAttachment();if(!(t instanceof Vt))return;let e=this.mixRotate,s=this.mixX,i=this.mixY;if(0==e&&0==s&&0==i)return;let r=this.data,a=r.rotateMode==Nt.Tangent,o=r.rotateMode==Nt.ChainScale,l=this.bones,c=l.length,d=a?c:c+1,u=h.setArraySize(this.spaces,d),f=o?this.lengths=h.setArraySize(this.lengths,c):[],m=this.spacing;switch(r.spacingMode){case Xt.Percent:if(o)for(let t=0,e=d-1;t<e;t++){let e=l[t],s=e.data.length;if(s<ee.epsilon)f[t]=0;else{let i=s*e.a,r=s*e.c;f[t]=Math.sqrt(i*i+r*r)}}h.arrayFill(u,1,d,m);break;case Xt.Proportional:let t=0;for(let e=0,s=d-1;e<s;){let s=l[e],i=s.data.length;if(i<ee.epsilon)o&&(f[e]=0),u[++e]=m;else{let r=i*s.a,a=i*s.c,n=Math.sqrt(r*r+a*a);o&&(f[e]=n),u[++e]=n,t+=n}}if(t>0){t=d/t*m;for(let e=1;e<d;e++)u[e]*=t}break;default:let e=r.spacingMode==Xt.Length;for(let t=0,s=d-1;t<s;){let s=l[t],i=s.data.length;if(i<ee.epsilon)o&&(f[t]=0),u[++t]=m;else{let r=i*s.a,a=i*s.c,n=Math.sqrt(r*r+a*a);o&&(f[t]=n),u[++t]=(e?i+m:m)*n/i}}}let p=this.computeWorldPositions(t,d,a),g=p[0],x=p[1],w=r.offsetRotation,b=!1;if(0==w)b=r.rotateMode==Nt.Chain;else{b=!1;let t=this.target.bone;w*=t.a*t.d-t.b*t.c>0?n.degRad:-n.degRad}for(let t=0,r=3;t<c;t++,r+=3){let h=l[t];h.worldX+=(g-h.worldX)*s,h.worldY+=(x-h.worldY)*i;let c=p[r],d=p[r+1],m=c-g,y=d-x;if(o){let s=f[t];if(0!=s){let t=(Math.sqrt(m*m+y*y)/s-1)*e+1;h.a*=t,h.c*=t}}if(g=c,x=d,e>0){let s=h.a,i=h.b,o=h.c,l=h.d,c=0,d=0,f=0;if(c=a?p[r-1]:0==u[t+1]?p[r+2]:Math.atan2(y,m),c-=Math.atan2(o,s),b){d=Math.cos(c),f=Math.sin(c);let t=h.data.length;g+=(t*(d*s-f*o)-m)*e,x+=(t*(f*s+d*o)-y)*e}else c+=w;c>n.PI?c-=n.PI2:c<-n.PI&&(c+=n.PI2),c*=e,d=Math.cos(c),f=Math.sin(c),h.a=d*s-f*o,h.b=d*i-f*l,h.c=f*s+d*o,h.d=f*i+d*l}h.updateAppliedTransform()}}computeWorldPositions(t,e,s){let i=this.target,r=this.position,a=this.spaces,n=h.setArraySize(this.positions,3*e+2),o=this.world,l=t.closed,c=t.worldVerticesLength,d=c/6,u=ee.NONE;if(!t.constantSpeed){let f=t.lengths;d-=l?1:2;let m,p=f[d];switch(this.data.positionMode==Yt.Percent&&(r*=p),this.data.spacingMode){case Xt.Percent:m=p;break;case Xt.Proportional:m=p/e;break;default:m=1}o=h.setArraySize(this.world,8);for(let h=0,g=0,x=0;h<e;h++,g+=3){let e=a[h]*m;r+=e;let w=r;if(l)w%=p,w<0&&(w+=p),x=0;else{if(w<0){u!=ee.BEFORE&&(u=ee.BEFORE,t.computeWorldVertices(i,2,4,o,0,2)),this.addBeforePosition(w,o,0,n,g);continue}if(w>p){u!=ee.AFTER&&(u=ee.AFTER,t.computeWorldVertices(i,c-6,4,o,0,2)),this.addAfterPosition(w-p,o,0,n,g);continue}}for(;;x++){let t=f[x];if(!(w>t)){if(0==x)w/=t;else{let e=f[x-1];w=(w-e)/(t-e)}break}}x!=u&&(u=x,l&&x==d?(t.computeWorldVertices(i,c-4,4,o,0,2),t.computeWorldVertices(i,0,4,o,4,2)):t.computeWorldVertices(i,6*x+2,8,o,0,2)),this.addCurvePosition(w,o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],n,g,s||h>0&&0==e)}return n}l?(c+=2,o=h.setArraySize(this.world,c),t.computeWorldVertices(i,2,c-4,o,0,2),t.computeWorldVertices(i,0,2,o,c-4,2),o[c-2]=o[0],o[c-1]=o[1]):(d--,c-=4,o=h.setArraySize(this.world,c),t.computeWorldVertices(i,2,c,o,0,2));let f,m=h.setArraySize(this.curves,d),p=0,g=o[0],x=o[1],w=0,b=0,y=0,v=0,I=0,A=0,E=0,S=0,k=0,T=0,R=0,C=0,M=0,F=0;for(let t=0,e=2;t<d;t++,e+=6)w=o[e],b=o[e+1],y=o[e+2],v=o[e+3],I=o[e+4],A=o[e+5],E=.1875*(g-2*w+y),S=.1875*(x-2*b+v),k=.09375*(3*(w-y)-g+I),T=.09375*(3*(b-v)-x+A),R=2*E+k,C=2*S+T,M=.75*(w-g)+E+.16666667*k,F=.75*(b-x)+S+.16666667*T,p+=Math.sqrt(M*M+F*F),M+=R,F+=C,R+=k,C+=T,p+=Math.sqrt(M*M+F*F),M+=R,F+=C,p+=Math.sqrt(M*M+F*F),M+=R+k,F+=C+T,p+=Math.sqrt(M*M+F*F),m[t]=p,g=I,x=A;switch(this.data.positionMode==Yt.Percent&&(r*=p),this.data.spacingMode){case Xt.Percent:f=p;break;case Xt.Proportional:f=p/e;break;default:f=1}let Y=this.segments,X=0;for(let t=0,i=0,h=0,d=0;t<e;t++,i+=3){let e=a[t]*f;r+=e;let N=r;if(l)N%=p,N<0&&(N+=p),h=0;else{if(N<0){this.addBeforePosition(N,o,0,n,i);continue}if(N>p){this.addAfterPosition(N-p,o,c-4,n,i);continue}}for(;;h++){let t=m[h];if(!(N>t)){if(0==h)N/=t;else{let e=m[h-1];N=(N-e)/(t-e)}break}}if(h!=u){u=h;let t=6*h;for(g=o[t],x=o[t+1],w=o[t+2],b=o[t+3],y=o[t+4],v=o[t+5],I=o[t+6],A=o[t+7],E=.03*(g-2*w+y),S=.03*(x-2*b+v),k=.006*(3*(w-y)-g+I),T=.006*(3*(b-v)-x+A),R=2*E+k,C=2*S+T,M=.3*(w-g)+E+.16666667*k,F=.3*(b-x)+S+.16666667*T,X=Math.sqrt(M*M+F*F),Y[0]=X,t=1;t<8;t++)M+=R,F+=C,R+=k,C+=T,X+=Math.sqrt(M*M+F*F),Y[t]=X;M+=R,F+=C,X+=Math.sqrt(M*M+F*F),Y[8]=X,M+=R+k,F+=C+T,X+=Math.sqrt(M*M+F*F),Y[9]=X,d=0}for(N*=X;;d++){let t=Y[d];if(!(N>t)){if(0==d)N/=t;else{let e=Y[d-1];N=d+(N-e)/(t-e)}break}}this.addCurvePosition(.1*N,g,x,w,b,y,v,I,A,n,i,s||t>0&&0==e)}return n}addBeforePosition(t,e,s,i,r){let a=e[s],n=e[s+1],o=e[s+2]-a,l=e[s+3]-n,h=Math.atan2(l,o);i[r]=a+t*Math.cos(h),i[r+1]=n+t*Math.sin(h),i[r+2]=h}addAfterPosition(t,e,s,i,r){let a=e[s+2],n=e[s+3],o=a-e[s],l=n-e[s+1],h=Math.atan2(l,o);i[r]=a+t*Math.cos(h),i[r+1]=n+t*Math.sin(h),i[r+2]=h}addCurvePosition(t,e,s,i,r,a,n,o,l,h,c,d){if(0==t||isNaN(t))return h[c]=e,h[c+1]=s,void(h[c+2]=Math.atan2(r-s,i-e));let u=t*t,f=u*t,m=1-t,p=m*m,g=p*m,x=m*t,w=3*x,b=m*w,y=w*t,v=e*g+i*b+a*y+o*f,I=s*g+r*b+n*y+l*f;h[c]=v,h[c+1]=I,d&&(h[c+2]=t<.001?Math.atan2(r-s,i-e):Math.atan2(I-(s*p+r*x*2+n*u),v-(e*p+i*x*2+a*u)))}}ee.NONE=-1,ee.BEFORE=-2,ee.AFTER=-3,ee.epsilon=1e-5;class se{constructor(t,e){if(this.darkColor=null,this.attachment=null,this.attachmentState=0,this.sequenceIndex=-1,this.deform=new Array,!t)throw new Error("data cannot be null.");if(!e)throw new Error("bone cannot be null.");this.data=t,this.bone=e,this.color=new a,this.darkColor=t.darkColor?new a:null,this.setToSetupPose()}getSkeleton(){return this.bone.skeleton}getAttachment(){return this.attachment}setAttachment(t){this.attachment!=t&&(t instanceof f&&this.attachment instanceof f&&t.timelineAttachment==this.attachment.timelineAttachment||(this.deform.length=0),this.attachment=t,this.sequenceIndex=-1)}setToSetupPose(){this.color.setFromColor(this.data.color),this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName?(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName))):this.attachment=null}}class ie{constructor(t,e){if(this.mixRotate=0,this.mixX=0,this.mixY=0,this.mixScaleX=0,this.mixScaleY=0,this.mixShearY=0,this.temp=new d,this.active=!1,!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY,this.mixScaleX=t.mixScaleX,this.mixScaleY=t.mixScaleY,this.mixShearY=t.mixShearY,this.bones=new Array;for(let s=0;s<t.bones.length;s++){let i=e.findBone(t.bones[s].name);if(!i)throw new Error(`Couldn't find bone ${t.bones[s].name}.`);this.bones.push(i)}let s=e.findBone(t.target.name);if(!s)throw new Error(`Couldn't find target bone ${t.target.name}.`);this.target=s}isActive(){return this.active}update(){0==this.mixRotate&&0==this.mixX&&0==this.mixY&&0==this.mixScaleX&&0==this.mixScaleY&&0==this.mixShearY||(this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld())}applyAbsoluteWorld(){let t=this.mixRotate,e=this.mixX,s=this.mixY,i=this.mixScaleX,r=this.mixScaleY,a=this.mixShearY,o=0!=e||0!=s,l=this.target,h=l.a,c=l.b,d=l.c,u=l.d,f=h*u-c*d>0?n.degRad:-n.degRad,m=this.data.offsetRotation*f,p=this.data.offsetShearY*f,g=this.bones;for(let f=0,x=g.length;f<x;f++){let x=g[f];if(0!=t){let e=x.a,s=x.b,i=x.c,r=x.d,a=Math.atan2(d,h)-Math.atan2(i,e)+m;a>n.PI?a-=n.PI2:a<-n.PI&&(a+=n.PI2),a*=t;let o=Math.cos(a),l=Math.sin(a);x.a=o*e-l*i,x.b=o*s-l*r,x.c=l*e+o*i,x.d=l*s+o*r}if(o){let t=this.temp;l.localToWorld(t.set(this.data.offsetX,this.data.offsetY)),x.worldX+=(t.x-x.worldX)*e,x.worldY+=(t.y-x.worldY)*s}if(0!=i){let t=Math.sqrt(x.a*x.a+x.c*x.c);0!=t&&(t=(t+(Math.sqrt(h*h+d*d)-t+this.data.offsetScaleX)*i)/t),x.a*=t,x.c*=t}if(0!=r){let t=Math.sqrt(x.b*x.b+x.d*x.d);0!=t&&(t=(t+(Math.sqrt(c*c+u*u)-t+this.data.offsetScaleY)*r)/t),x.b*=t,x.d*=t}if(a>0){let t=x.b,e=x.d,s=Math.atan2(e,t),i=Math.atan2(u,c)-Math.atan2(d,h)-(s-Math.atan2(x.c,x.a));i>n.PI?i-=n.PI2:i<-n.PI&&(i+=n.PI2),i=s+(i+p)*a;let r=Math.sqrt(t*t+e*e);x.b=Math.cos(i)*r,x.d=Math.sin(i)*r}x.updateAppliedTransform()}}applyRelativeWorld(){let t=this.mixRotate,e=this.mixX,s=this.mixY,i=this.mixScaleX,r=this.mixScaleY,a=this.mixShearY,o=0!=e||0!=s,l=this.target,h=l.a,c=l.b,d=l.c,u=l.d,f=h*u-c*d>0?n.degRad:-n.degRad,m=this.data.offsetRotation*f,p=this.data.offsetShearY*f,g=this.bones;for(let f=0,x=g.length;f<x;f++){let x=g[f];if(0!=t){let e=x.a,s=x.b,i=x.c,r=x.d,a=Math.atan2(d,h)+m;a>n.PI?a-=n.PI2:a<-n.PI&&(a+=n.PI2),a*=t;let o=Math.cos(a),l=Math.sin(a);x.a=o*e-l*i,x.b=o*s-l*r,x.c=l*e+o*i,x.d=l*s+o*r}if(o){let t=this.temp;l.localToWorld(t.set(this.data.offsetX,this.data.offsetY)),x.worldX+=t.x*e,x.worldY+=t.y*s}if(0!=i){let t=(Math.sqrt(h*h+d*d)-1+this.data.offsetScaleX)*i+1;x.a*=t,x.c*=t}if(0!=r){let t=(Math.sqrt(c*c+u*u)-1+this.data.offsetScaleY)*r+1;x.b*=t,x.d*=t}if(a>0){let t=Math.atan2(u,c)-Math.atan2(d,h);t>n.PI?t-=n.PI2:t<-n.PI&&(t+=n.PI2);let e=x.b,s=x.d;t=Math.atan2(s,e)+(t-n.PI/2+p)*a;let i=Math.sqrt(e*e+s*s);x.b=Math.cos(t)*i,x.d=Math.sin(t)*i}x.updateAppliedTransform()}}applyAbsoluteLocal(){let t=this.mixRotate,e=this.mixX,s=this.mixY,i=this.mixScaleX,r=this.mixScaleY,a=this.mixShearY,n=this.target,o=this.bones;for(let l=0,h=o.length;l<h;l++){let h=o[l],c=h.arotation;if(0!=t){let e=n.arotation-c+this.data.offsetRotation;e-=360*(16384-(16384.499999999996-e/360|0)),c+=e*t}let d=h.ax,u=h.ay;d+=(n.ax-d+this.data.offsetX)*e,u+=(n.ay-u+this.data.offsetY)*s;let f=h.ascaleX,m=h.ascaleY;0!=i&&0!=f&&(f=(f+(n.ascaleX-f+this.data.offsetScaleX)*i)/f),0!=r&&0!=m&&(m=(m+(n.ascaleY-m+this.data.offsetScaleY)*r)/m);let p=h.ashearY;if(0!=a){let t=n.ashearY-p+this.data.offsetShearY;t-=360*(16384-(16384.499999999996-t/360|0)),p+=t*a}h.updateWorldTransformWith(d,u,c,f,m,h.ashearX,p)}}applyRelativeLocal(){let t=this.mixRotate,e=this.mixX,s=this.mixY,i=this.mixScaleX,r=this.mixScaleY,a=this.mixShearY,n=this.target,o=this.bones;for(let l=0,h=o.length;l<h;l++){let h=o[l],c=h.arotation+(n.arotation+this.data.offsetRotation)*t,d=h.ax+(n.ax+this.data.offsetX)*e,u=h.ay+(n.ay+this.data.offsetY)*s,f=h.ascaleX*((n.ascaleX-1+this.data.offsetScaleX)*i+1),m=h.ascaleY*((n.ascaleY-1+this.data.offsetScaleY)*r+1),p=h.ashearY+(n.ashearY+this.data.offsetShearY)*a;h.updateWorldTransformWith(d,u,c,f,m,h.ashearX,p)}}}class re{get scaleY(){return re.yDown?-this._scaleY:this._scaleY}set scaleY(t){this._scaleY=t}constructor(t){if(this._updateCache=new Array,this.skin=null,this.scaleX=1,this._scaleY=1,this.x=0,this.y=0,!t)throw new Error("data cannot be null.");this.data=t,this.bones=new Array;for(let e=0;e<t.bones.length;e++){let s,i=t.bones[e];if(i.parent){let t=this.bones[i.parent.index];s=new Gt(i,this,t),t.children.push(s)}else s=new Gt(i,this,null);this.bones.push(s)}this.slots=new Array,this.drawOrder=new Array;for(let e=0;e<t.slots.length;e++){let s=t.slots[e],i=this.bones[s.boneData.index],r=new se(s,i);this.slots.push(r),this.drawOrder.push(r)}this.ikConstraints=new Array;for(let e=0;e<t.ikConstraints.length;e++){let s=t.ikConstraints[e];this.ikConstraints.push(new Qt(s,this))}this.transformConstraints=new Array;for(let e=0;e<t.transformConstraints.length;e++){let s=t.transformConstraints[e];this.transformConstraints.push(new ie(s,this))}this.pathConstraints=new Array;for(let e=0;e<t.pathConstraints.length;e++){let s=t.pathConstraints[e];this.pathConstraints.push(new ee(s,this))}this.color=new a(1,1,1,1),this.updateCache()}updateCache(){this._updateCache.length=0;let t=this.bones;for(let e=0,s=t.length;e<s;e++){let s=t[e];s.sorted=s.data.skinRequired,s.active=!s.sorted}if(this.skin){let t=this.skin.bones;for(let e=0,s=this.skin.bones.length;e<s;e++){let s=this.bones[t[e].index];do{s.sorted=!1,s.active=!0,s=s.parent}while(s)}}let e=this.ikConstraints,s=this.transformConstraints,i=this.pathConstraints,r=e.length,a=s.length,n=i.length,o=r+a+n;t:for(let t=0;t<o;t++){for(let s=0;s<r;s++){let i=e[s];if(i.data.order==t){this.sortIkConstraint(i);continue t}}for(let e=0;e<a;e++){let i=s[e];if(i.data.order==t){this.sortTransformConstraint(i);continue t}}for(let e=0;e<n;e++){let s=i[e];if(s.data.order==t){this.sortPathConstraint(s);continue t}}}for(let e=0,s=t.length;e<s;e++)this.sortBone(t[e])}sortIkConstraint(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&h.contains(this.skin.constraints,t.data,!0)),!t.active)return;let e=t.target;this.sortBone(e);let s=t.bones,i=s[0];if(this.sortBone(i),1==s.length)this._updateCache.push(t),this.sortReset(i.children);else{let e=s[s.length-1];this.sortBone(e),this._updateCache.push(t),this.sortReset(i.children),e.sorted=!0}}sortPathConstraint(t){if(t.active=t.target.bone.isActive()&&(!t.data.skinRequired||this.skin&&h.contains(this.skin.constraints,t.data,!0)),!t.active)return;let e=t.target,s=e.data.index,i=e.bone;this.skin&&this.sortPathConstraintAttachment(this.skin,s,i),this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,s,i);for(let t=0,e=this.data.skins.length;t<e;t++)this.sortPathConstraintAttachment(this.data.skins[t],s,i);let r=e.getAttachment();r instanceof Vt&&this.sortPathConstraintAttachmentWith(r,i);let a=t.bones,n=a.length;for(let t=0;t<n;t++)this.sortBone(a[t]);this._updateCache.push(t);for(let t=0;t<n;t++)this.sortReset(a[t].children);for(let t=0;t<n;t++)a[t].sorted=!0}sortTransformConstraint(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&h.contains(this.skin.constraints,t.data,!0)),!t.active)return;this.sortBone(t.target);let e=t.bones,s=e.length;if(t.data.local)for(let t=0;t<s;t++){let s=e[t];this.sortBone(s.parent),this.sortBone(s)}else for(let t=0;t<s;t++)this.sortBone(e[t]);this._updateCache.push(t);for(let t=0;t<s;t++)this.sortReset(e[t].children);for(let t=0;t<s;t++)e[t].sorted=!0}sortPathConstraintAttachment(t,e,s){let i=t.attachments[e];if(i)for(let t in i)this.sortPathConstraintAttachmentWith(i[t],s)}sortPathConstraintAttachmentWith(t,e){if(!(t instanceof Vt))return;let s=t.bones;if(s){let t=this.bones;for(let e=0,i=s.length;e<i;){let i=s[e++];for(i+=e;e<i;)this.sortBone(t[s[e++]])}}else this.sortBone(e)}sortBone(t){if(!t)return;if(t.sorted)return;let e=t.parent;e&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}sortReset(t){for(let e=0,s=t.length;e<s;e++){let s=t[e];s.active&&(s.sorted&&this.sortReset(s.children),s.sorted=!1)}}updateWorldTransform(){let t=this.bones;for(let e=0,s=t.length;e<s;e++){let s=t[e];s.ax=s.x,s.ay=s.y,s.arotation=s.rotation,s.ascaleX=s.scaleX,s.ascaleY=s.scaleY,s.ashearX=s.shearX,s.ashearY=s.shearY}let e=this._updateCache;for(let t=0,s=e.length;t<s;t++)e[t].update()}updateWorldTransformWith(t){let e=this.getRootBone();if(!e)throw new Error("Root bone must not be null.");let s=t.a,i=t.b,r=t.c,a=t.d;e.worldX=s*this.x+i*this.y+t.worldX,e.worldY=r*this.x+a*this.y+t.worldY;let o=e.rotation+90+e.shearY,l=n.cosDeg(e.rotation+e.shearX)*e.scaleX,h=n.cosDeg(o)*e.scaleY,c=n.sinDeg(e.rotation+e.shearX)*e.scaleX,d=n.sinDeg(o)*e.scaleY;e.a=(s*l+i*c)*this.scaleX,e.b=(s*h+i*d)*this.scaleX,e.c=(r*l+a*c)*this.scaleY,e.d=(r*h+a*d)*this.scaleY;let u=this._updateCache;for(let t=0,s=u.length;t<s;t++){let s=u[t];s!=e&&s.update()}}setToSetupPose(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()}setBonesToSetupPose(){let t=this.bones;for(let e=0,s=t.length;e<s;e++)t[e].setToSetupPose();let e=this.ikConstraints;for(let t=0,s=e.length;t<s;t++){let s=e[t];s.mix=s.data.mix,s.softness=s.data.softness,s.bendDirection=s.data.bendDirection,s.compress=s.data.compress,s.stretch=s.data.stretch}let s=this.transformConstraints;for(let t=0,e=s.length;t<e;t++){let e=s[t],i=e.data;e.mixRotate=i.mixRotate,e.mixX=i.mixX,e.mixY=i.mixY,e.mixScaleX=i.mixScaleX,e.mixScaleY=i.mixScaleY,e.mixShearY=i.mixShearY}let i=this.pathConstraints;for(let t=0,e=i.length;t<e;t++){let e=i[t],s=e.data;e.position=s.position,e.spacing=s.spacing,e.mixRotate=s.mixRotate,e.mixX=s.mixX,e.mixY=s.mixY}}setSlotsToSetupPose(){let t=this.slots;h.arrayCopy(t,0,this.drawOrder,0,t.length);for(let e=0,s=t.length;e<s;e++)t[e].setToSetupPose()}getRootBone(){return 0==this.bones.length?null:this.bones[0]}findBone(t){if(!t)throw new Error("boneName cannot be null.");let e=this.bones;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(i.data.name==t)return i}return null}findSlot(t){if(!t)throw new Error("slotName cannot be null.");let e=this.slots;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(i.data.name==t)return i}return null}setSkinByName(t){let e=this.data.findSkin(t);if(!e)throw new Error("Skin not found: "+t);this.setSkin(e)}setSkin(t){if(t!=this.skin){if(t)if(this.skin)t.attachAll(this,this.skin);else{let e=this.slots;for(let s=0,i=e.length;s<i;s++){let i=e[s],r=i.data.attachmentName;if(r){let e=t.getAttachment(s,r);e&&i.setAttachment(e)}}}this.skin=t,this.updateCache()}}getAttachmentByName(t,e){let s=this.data.findSlot(t);if(!s)throw new Error(`Can't find slot with name ${t}`);return this.getAttachment(s.index,e)}getAttachment(t,e){if(!e)throw new Error("attachmentName cannot be null.");if(this.skin){let s=this.skin.getAttachment(t,e);if(s)return s}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null}setAttachment(t,e){if(!t)throw new Error("slotName cannot be null.");let s=this.slots;for(let i=0,r=s.length;i<r;i++){let r=s[i];if(r.data.name==t){let s=null;if(e&&(s=this.getAttachment(i,e),!s))throw new Error("Attachment not found: "+e+", for slot: "+t);return void r.setAttachment(s)}}throw new Error("Slot not found: "+t)}findIkConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let e=this.ikConstraints;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(i.data.name==t)return i}return null}findTransformConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let e=this.transformConstraints;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(i.data.name==t)return i}return null}findPathConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let e=this.pathConstraints;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(i.data.name==t)return i}return null}getBoundsRect(){let t=new d,e=new d;return this.getBounds(t,e),{x:t.x,y:t.y,width:e.x,height:e.y}}getBounds(t,e,s=new Array(2)){if(!t)throw new Error("offset cannot be null.");if(!e)throw new Error("size cannot be null.");let i=this.drawOrder,r=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY;for(let t=0,e=i.length;t<e;t++){let e=i[t];if(!e.bone.active)continue;let l=0,c=null,d=e.getAttachment();if(d instanceof qt)l=8,c=h.setArraySize(s,l,0),d.computeWorldVertices(e,c,0,2);else if(d instanceof $t){let t=d;l=t.worldVerticesLength,c=h.setArraySize(s,l,0),t.computeWorldVertices(e,0,l,c,0,2)}if(c)for(let t=0,e=c.length;t<e;t+=2){let e=c[t],s=c[t+1];r=Math.min(r,e),a=Math.min(a,s),n=Math.max(n,e),o=Math.max(o,s)}}t.set(r,a),e.set(n-r,o-a)}}re.yDown=!1;class ae{constructor(){this.name=null,this.bones=new Array,this.slots=new Array,this.skins=new Array,this.defaultSkin=null,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.x=0,this.y=0,this.width=0,this.height=0,this.version=null,this.hash=null,this.fps=0,this.imagesPath=null,this.audioPath=null}findBone(t){if(!t)throw new Error("boneName cannot be null.");let e=this.bones;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(i.name==t)return i}return null}findSlot(t){if(!t)throw new Error("slotName cannot be null.");let e=this.slots;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(i.name==t)return i}return null}findSkin(t){if(!t)throw new Error("skinName cannot be null.");let e=this.skins;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(i.name==t)return i}return null}findEvent(t){if(!t)throw new Error("eventDataName cannot be null.");let e=this.events;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(i.name==t)return i}return null}findAnimation(t){if(!t)throw new Error("animationName cannot be null.");let e=this.animations;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(i.name==t)return i}return null}findIkConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let e=this.ikConstraints;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(i.name==t)return i}return null}findTransformConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let e=this.transformConstraints;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(i.name==t)return i}return null}findPathConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let e=this.pathConstraints;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(i.name==t)return i}return null}}class ne{constructor(t=0,e,s){this.slotIndex=t,this.name=e,this.attachment=s}}class oe{constructor(t){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,!t)throw new Error("name cannot be null.");this.name=t}setAttachment(t,e,s){if(!s)throw new Error("attachment cannot be null.");let i=this.attachments;t>=i.length&&(i.length=t+1),i[t]||(i[t]={}),i[t][e]=s}addSkin(t){for(let e=0;e<t.bones.length;e++){let s=t.bones[e],i=!1;for(let t=0;t<this.bones.length;t++)if(this.bones[t]==s){i=!0;break}i||this.bones.push(s)}for(let e=0;e<t.constraints.length;e++){let s=t.constraints[e],i=!1;for(let t=0;t<this.constraints.length;t++)if(this.constraints[t]==s){i=!0;break}i||this.constraints.push(s)}let e=t.getAttachments();for(let t=0;t<e.length;t++){var s=e[t];this.setAttachment(s.slotIndex,s.name,s.attachment)}}copySkin(t){for(let e=0;e<t.bones.length;e++){let s=t.bones[e],i=!1;for(let t=0;t<this.bones.length;t++)if(this.bones[t]==s){i=!0;break}i||this.bones.push(s)}for(let e=0;e<t.constraints.length;e++){let s=t.constraints[e],i=!1;for(let t=0;t<this.constraints.length;t++)if(this.constraints[t]==s){i=!0;break}i||this.constraints.push(s)}let e=t.getAttachments();for(let t=0;t<e.length;t++){var s=e[t];s.attachment&&(s.attachment instanceof $t?(s.attachment=s.attachment.newLinkedMesh(),this.setAttachment(s.slotIndex,s.name,s.attachment)):(s.attachment=s.attachment.copy(),this.setAttachment(s.slotIndex,s.name,s.attachment)))}}getAttachment(t,e){let s=this.attachments[t];return s?s[e]:null}removeAttachment(t,e){let s=this.attachments[t];s&&delete s[e]}getAttachments(){let t=new Array;for(var e=0;e<this.attachments.length;e++){let s=this.attachments[e];if(s)for(let i in s){let r=s[i];r&&t.push(new ne(e,i,r))}}return t}getAttachmentsForSlot(t,e){let s=this.attachments[t];if(s)for(let i in s){let r=s[i];r&&e.push(new ne(t,i,r))}}clear(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0}attachAll(t,e){let s=0;for(let i=0;i<t.slots.length;i++){let r=t.slots[i],a=r.getAttachment();if(a&&s<e.attachments.length){let t=e.attachments[s];for(let e in t){if(a==t[e]){let t=this.getAttachment(s,e);t&&r.setAttachment(t);break}}}s++}}}class le{constructor(t,e,s){if(this.index=0,this.color=new a(1,1,1,1),this.darkColor=null,this.attachmentName=null,this.blendMode=Lt.Normal,t<0)throw new Error("index must be >= 0.");if(!e)throw new Error("name cannot be null.");if(!s)throw new Error("boneData cannot be null.");this.index=t,this.name=e,this.boneData=s}}!function(t){t[t.Normal=0]="Normal",t[t.Additive=1]="Additive",t[t.Multiply=2]="Multiply",t[t.Screen=3]="Screen"}(Lt||(Lt={}));class he extends jt{set target(t){this._target=t}get target(){if(this._target)return this._target;throw new Error("BoneData not set.")}constructor(t){super(t,0,!1),this.bones=new Array,this._target=null,this.mixRotate=0,this.mixX=0,this.mixY=0,this.mixScaleX=0,this.mixScaleY=0,this.mixShearY=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,this.relative=!1,this.local=!1}}class ce{constructor(t,e=new Array,s=0,i=new DataView(t.buffer)){this.strings=e,this.index=s,this.buffer=i}readByte(){return this.buffer.getInt8(this.index++)}readUnsignedByte(){return this.buffer.getUint8(this.index++)}readShort(){let t=this.buffer.getInt16(this.index);return this.index+=2,t}readInt32(){let t=this.buffer.getInt32(this.index);return this.index+=4,t}readInt(t){let e=this.readByte(),s=127&e;return 0!=(128&e)&&(e=this.readByte(),s|=(127&e)<<7,0!=(128&e)&&(e=this.readByte(),s|=(127&e)<<14,0!=(128&e)&&(e=this.readByte(),s|=(127&e)<<21,0!=(128&e)&&(e=this.readByte(),s|=(127&e)<<28)))),t?s:s>>>1^-(1&s)}readStringRef(){let t=this.readInt(!0);return 0==t?null:this.strings[t-1]}readString(){let t=this.readInt(!0);switch(t){case 0:return null;case 1:return""}t--;let e="";for(let s=0;s<t;){let t=this.readUnsignedByte();switch(t>>4){case 12:case 13:e+=String.fromCharCode((31&t)<<6|63&this.readByte()),s+=2;break;case 14:e+=String.fromCharCode((15&t)<<12|(63&this.readByte())<<6|63&this.readByte()),s+=3;break;default:e+=String.fromCharCode(t),s++}}return e}readFloat(){let t=this.buffer.getFloat32(this.index);return this.index+=4,t}readBoolean(){return 0!=this.readByte()}}let de=class{constructor(t,e,s,i,r){this.mesh=t,this.skin=e,this.slotIndex=s,this.parent=i,this.inheritTimeline=r}};class ue{constructor(t=null,e=null){this.bones=t,this.vertices=e}}var fe;function me(t,e,s){let i=t.readFloat(),r=t.readFloat()*s;for(let a=0,n=0,o=e.getFrameCount()-1;e.setFrame(a,i,r),a!=o;a++){let o=t.readFloat(),l=t.readFloat()*s;switch(t.readByte()){case Be:e.setStepped(a);break;case De:ge(t,e,n++,a,0,i,o,r,l,s)}i=o,r=l}return e}function pe(t,e,s){let i=t.readFloat(),r=t.readFloat()*s,a=t.readFloat()*s;for(let n=0,o=0,l=e.getFrameCount()-1;e.setFrame(n,i,r,a),n!=l;n++){let l=t.readFloat(),h=t.readFloat()*s,c=t.readFloat()*s;switch(t.readByte()){case Be:e.setStepped(n);break;case De:ge(t,e,o++,n,0,i,l,r,h,s),ge(t,e,o++,n,1,i,l,a,c,s)}i=l,r=h,a=c}return e}function ge(t,e,s,i,r,a,n,o,l,h){e.setBezier(s,i,r,a,o,t.readFloat(),t.readFloat()*h,t.readFloat(),t.readFloat()*h,n,l)}!function(t){t[t.Region=0]="Region",t[t.BoundingBox=1]="BoundingBox",t[t.Mesh=2]="Mesh",t[t.LinkedMesh=3]="LinkedMesh",t[t.Path=4]="Path",t[t.Point=5]="Point",t[t.Clipping=6]="Clipping"}(fe||(fe={}));const xe=0,we=1,be=2,ye=3,ve=4,Ie=5,Ae=6,Ee=7,Se=8,ke=9,Te=0,Re=1,Ce=2,Me=3,Fe=4,Ye=5,Xe=0,Ne=1,Le=0,Pe=1,_e=2,Be=1,De=2;class Oe{constructor(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new c((()=>new Array)),this.polygonIndicesPool=new c((()=>new Array))}triangulate(t){let e=t,s=t.length>>1,i=this.indicesArray;i.length=0;for(let t=0;t<s;t++)i[t]=t;let r=this.isConcaveArray;r.length=0;for(let t=0,a=s;t<a;++t)r[t]=Oe.isConcave(t,s,e,i);let a=this.triangles;for(a.length=0;s>3;){let t=s-1,n=0,o=1;for(;;){t:if(!r[n]){let a=i[t]<<1,l=i[n]<<1,h=i[o]<<1,c=e[a],d=e[a+1],u=e[l],f=e[l+1],m=e[h],p=e[h+1];for(let a=(o+1)%s;a!=t;a=(a+1)%s){if(!r[a])continue;let t=i[a]<<1,s=e[t],n=e[t+1];if(Oe.positiveArea(m,p,c,d,s,n)&&Oe.positiveArea(c,d,u,f,s,n)&&Oe.positiveArea(u,f,m,p,s,n))break t}break}if(0==o){do{if(!r[n])break;n--}while(n>0);break}t=n,n=o,o=(o+1)%s}a.push(i[(s+n-1)%s]),a.push(i[n]),a.push(i[(n+1)%s]),i.splice(n,1),r.splice(n,1),s--;let l=(s+n-1)%s,h=n==s?0:n;r[l]=Oe.isConcave(l,s,e,i),r[h]=Oe.isConcave(h,s,e,i)}return 3==s&&(a.push(i[2]),a.push(i[0]),a.push(i[1])),a}decompose(t,e){let s=t,i=this.convexPolygons;this.polygonPool.freeAll(i),i.length=0;let r=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(r),r.length=0;let a=this.polygonIndicesPool.obtain();a.length=0;let n=this.polygonPool.obtain();n.length=0;let o=-1,l=0;for(let t=0,h=e.length;t<h;t+=3){let h=e[t]<<1,c=e[t+1]<<1,d=e[t+2]<<1,u=s[h],f=s[h+1],m=s[c],p=s[c+1],g=s[d],x=s[d+1],w=!1;if(o==h){let t=n.length-4,e=Oe.winding(n[t],n[t+1],n[t+2],n[t+3],g,x),s=Oe.winding(g,x,n[0],n[1],n[2],n[3]);e==l&&s==l&&(n.push(g),n.push(x),a.push(d),w=!0)}w||(n.length>0?(i.push(n),r.push(a)):(this.polygonPool.free(n),this.polygonIndicesPool.free(a)),n=this.polygonPool.obtain(),n.length=0,n.push(u),n.push(f),n.push(m),n.push(p),n.push(g),n.push(x),a=this.polygonIndicesPool.obtain(),a.length=0,a.push(h),a.push(c),a.push(d),l=Oe.winding(u,f,m,p,g,x),o=h)}n.length>0&&(i.push(n),r.push(a));for(let t=0,e=i.length;t<e;t++){if(a=r[t],0==a.length)continue;let s=a[0],o=a[a.length-1];n=i[t];let l=n.length-4,h=n[l],c=n[l+1],d=n[l+2],u=n[l+3],f=n[0],m=n[1],p=n[2],g=n[3],x=Oe.winding(h,c,d,u,f,m);for(let l=0;l<e;l++){if(l==t)continue;let e=r[l];if(3!=e.length)continue;let w=e[0],b=e[1],y=e[2],v=i[l],I=v[v.length-2],A=v[v.length-1];if(w!=s||b!=o)continue;let E=Oe.winding(h,c,d,u,I,A),S=Oe.winding(I,A,f,m,p,g);E==x&&S==x&&(v.length=0,e.length=0,n.push(I),n.push(A),a.push(y),h=d,c=u,d=I,u=A,l=0)}}for(let t=i.length-1;t>=0;t--)n=i[t],0==n.length&&(i.splice(t,1),this.polygonPool.free(n),a=r[t],r.splice(t,1),this.polygonIndicesPool.free(a));return i}static isConcave(t,e,s,i){let r=i[(e+t-1)%e]<<1,a=i[t]<<1,n=i[(t+1)%e]<<1;return!this.positiveArea(s[r],s[r+1],s[a],s[a+1],s[n],s[n+1])}static positiveArea(t,e,s,i,r,a){return t*(a-i)+s*(e-a)+r*(i-e)>=0}static winding(t,e,s,i,r,a){let n=s-t,o=i-e;return r*o-a*n+n*e-t*o>=0?1:-1}}class $e{constructor(){this.triangulator=new Oe,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array,this.clipAttachment=null,this.clippingPolygons=null}clipStart(t,e){if(this.clipAttachment)return 0;this.clipAttachment=e;let s=e.worldVerticesLength,i=h.setArraySize(this.clippingPolygon,s);e.computeWorldVertices(t,0,s,i,0,2);let r=this.clippingPolygon;$e.makeClockwise(r);let a=this.clippingPolygons=this.triangulator.decompose(r,this.triangulator.triangulate(r));for(let t=0,e=a.length;t<e;t++){let e=a[t];$e.makeClockwise(e),e.push(e[0]),e.push(e[1])}return a.length}clipEndWithSlot(t){this.clipAttachment&&this.clipAttachment.endSlot==t.data&&this.clipEnd()}clipEnd(){this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)}isClipping(){return null!=this.clipAttachment}clipTriangles(t,e,s,i,r,a,n,o){let l=this.clipOutput,c=this.clippedVertices,d=this.clippedTriangles,u=this.clippingPolygons,f=u.length,m=o?12:8,p=0;c.length=0,d.length=0;t:for(let e=0;e<i;e+=3){let i=s[e]<<1,g=t[i],x=t[i+1],w=r[i],b=r[i+1];i=s[e+1]<<1;let y=t[i],v=t[i+1],I=r[i],A=r[i+1];i=s[e+2]<<1;let E=t[i],S=t[i+1],k=r[i],T=r[i+1];for(let t=0;t<f;t++){let e=c.length;if(!this.clip(g,x,y,v,E,S,u[t],l)){let t=h.setArraySize(c,e+3*m);t[e]=g,t[e+1]=x,t[e+2]=a.r,t[e+3]=a.g,t[e+4]=a.b,t[e+5]=a.a,o?(t[e+6]=w,t[e+7]=b,t[e+8]=n.r,t[e+9]=n.g,t[e+10]=n.b,t[e+11]=n.a,t[e+12]=y,t[e+13]=v,t[e+14]=a.r,t[e+15]=a.g,t[e+16]=a.b,t[e+17]=a.a,t[e+18]=I,t[e+19]=A,t[e+20]=n.r,t[e+21]=n.g,t[e+22]=n.b,t[e+23]=n.a,t[e+24]=E,t[e+25]=S,t[e+26]=a.r,t[e+27]=a.g,t[e+28]=a.b,t[e+29]=a.a,t[e+30]=k,t[e+31]=T,t[e+32]=n.r,t[e+33]=n.g,t[e+34]=n.b,t[e+35]=n.a):(t[e+6]=w,t[e+7]=b,t[e+8]=y,t[e+9]=v,t[e+10]=a.r,t[e+11]=a.g,t[e+12]=a.b,t[e+13]=a.a,t[e+14]=I,t[e+15]=A,t[e+16]=E,t[e+17]=S,t[e+18]=a.r,t[e+19]=a.g,t[e+20]=a.b,t[e+21]=a.a,t[e+22]=k,t[e+23]=T),e=d.length;let s=h.setArraySize(d,e+3);s[e]=p,s[e+1]=p+1,s[e+2]=p+2,p+=3;continue t}{let t=l.length;if(0==t)continue;let s=v-S,i=E-y,r=g-E,u=S-x,f=1/(s*r+i*(x-S)),R=t>>1,C=this.clipOutput,M=h.setArraySize(c,e+R*m);for(let l=0;l<t;l+=2){let t=C[l],h=C[l+1];M[e]=t,M[e+1]=h,M[e+2]=a.r,M[e+3]=a.g,M[e+4]=a.b,M[e+5]=a.a;let c=t-E,d=h-S,p=(s*c+i*d)*f,g=(u*c+r*d)*f,x=1-p-g;M[e+6]=w*p+I*g+k*x,M[e+7]=b*p+A*g+T*x,o&&(M[e+8]=n.r,M[e+9]=n.g,M[e+10]=n.b,M[e+11]=n.a),e+=m}e=d.length;let F=h.setArraySize(d,e+3*(R-2));R--;for(let t=1;t<R;t++)F[e]=p,F[e+1]=p+t,F[e+2]=p+t+1,e+=3;p+=R+1}}}}clip(t,e,s,i,r,a,n,o){let l,h=o,c=!1;n.length%4>=2?(l=o,o=this.scratch):l=this.scratch,l.length=0,l.push(t),l.push(e),l.push(s),l.push(i),l.push(r),l.push(a),l.push(t),l.push(e),o.length=0;let d=n,u=n.length-4;for(let t=0;;t+=2){let e=d[t],s=d[t+1],i=d[t+2],r=d[t+3],a=e-i,n=s-r,f=l,m=l.length-2,p=o.length;for(let t=0;t<m;t+=2){let l=f[t],h=f[t+1],d=f[t+2],u=f[t+3],m=a*(u-r)-n*(d-i)>0;if(a*(h-r)-n*(l-i)>0){if(m){o.push(d),o.push(u);continue}let t=u-h,a=d-l,n=t*(i-e)-a*(r-s);if(Math.abs(n)>1e-6){let c=(a*(s-h)-t*(e-l))/n;o.push(e+(i-e)*c),o.push(s+(r-s)*c)}else o.push(e),o.push(s)}else if(m){let t=u-h,a=d-l,n=t*(i-e)-a*(r-s);if(Math.abs(n)>1e-6){let c=(a*(s-h)-t*(e-l))/n;o.push(e+(i-e)*c),o.push(s+(r-s)*c)}else o.push(e),o.push(s);o.push(d),o.push(u)}c=!0}if(p==o.length)return h.length=0,!0;if(o.push(o[0]),o.push(o[1]),t==u)break;let g=o;(o=l).length=0,l=g}if(h!=o){h.length=0;for(let t=0,e=o.length-2;t<e;t++)h[t]=o[t]}else h.length=h.length-2;return c}static makeClockwise(t){let e=t,s=t.length,i=e[s-2]*e[1]-e[0]*e[s-1],r=0,a=0,n=0,o=0;for(let t=0,l=s-3;t<l;t+=2)r=e[t],a=e[t+1],n=e[t+2],o=e[t+3],i+=r*o-n*a;if(!(i<0))for(let t=0,i=s-2,r=s>>1;t<r;t+=2){let s=e[t],r=e[t+1],a=i-t;e[t]=e[a],e[t+1]=e[a+1],e[a]=s,e[a+1]=r}}}class Ve{constructor(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}readSkeletonData(t){let e=this.scale,s=new ae,i="string"==typeof t?JSON.parse(t):t,r=i.skeleton;if(r&&(s.hash=r.hash,s.version=r.spine,s.x=r.x,s.y=r.y,s.width=r.width,s.height=r.height,s.fps=r.fps,s.imagesPath=r.images),i.bones)for(let t=0;t<i.bones.length;t++){let r=i.bones[t],a=null,n=Ge(r,"parent",null);n&&(a=s.findBone(n));let o=new zt(s.bones.length,r.name,a);o.length=Ge(r,"length",0)*e,o.x=Ge(r,"x",0)*e,o.y=Ge(r,"y",0)*e,o.rotation=Ge(r,"rotation",0),o.scaleX=Ge(r,"scaleX",1),o.scaleY=Ge(r,"scaleY",1),o.shearX=Ge(r,"shearX",0),o.shearY=Ge(r,"shearY",0),o.transformMode=h.enumValue(Ft,Ge(r,"transform","Normal")),o.skinRequired=Ge(r,"skin",!1);let l=Ge(r,"color",null);l&&o.color.setFromString(l),s.bones.push(o)}if(i.slots)for(let t=0;t<i.slots.length;t++){let e=i.slots[t],r=s.findBone(e.bone);if(!r)throw new Error(`Couldn't find bone ${e.bone} for slot ${e.name}`);let n=new le(s.slots.length,e.name,r),o=Ge(e,"color",null);o&&n.color.setFromString(o);let l=Ge(e,"dark",null);l&&(n.darkColor=a.fromString(l)),n.attachmentName=Ge(e,"attachment",null),n.blendMode=h.enumValue(Lt,Ge(e,"blend","normal")),s.slots.push(n)}if(i.ik)for(let t=0;t<i.ik.length;t++){let r=i.ik[t],a=new Zt(r.name);a.order=Ge(r,"order",0),a.skinRequired=Ge(r,"skin",!1);for(let t=0;t<r.bones.length;t++){let e=s.findBone(r.bones[t]);if(!e)throw new Error(`Couldn't find bone ${r.bones[t]} for IK constraint ${r.name}.`);a.bones.push(e)}let n=s.findBone(r.target);if(!n)throw new Error(`Couldn't find target bone ${r.target} for IK constraint ${r.name}.`);a.target=n,a.mix=Ge(r,"mix",1),a.softness=Ge(r,"softness",0)*e,a.bendDirection=Ge(r,"bendPositive",!0)?1:-1,a.compress=Ge(r,"compress",!1),a.stretch=Ge(r,"stretch",!1),a.uniform=Ge(r,"uniform",!1),s.ikConstraints.push(a)}if(i.transform)for(let t=0;t<i.transform.length;t++){let r=i.transform[t],a=new he(r.name);a.order=Ge(r,"order",0),a.skinRequired=Ge(r,"skin",!1);for(let t=0;t<r.bones.length;t++){let e=r.bones[t],i=s.findBone(e);if(!i)throw new Error(`Couldn't find bone ${e} for transform constraint ${r.name}.`);a.bones.push(i)}let n=r.target,o=s.findBone(n);if(!o)throw new Error(`Couldn't find target bone ${n} for transform constraint ${r.name}.`);a.target=o,a.local=Ge(r,"local",!1),a.relative=Ge(r,"relative",!1),a.offsetRotation=Ge(r,"rotation",0),a.offsetX=Ge(r,"x",0)*e,a.offsetY=Ge(r,"y",0)*e,a.offsetScaleX=Ge(r,"scaleX",0),a.offsetScaleY=Ge(r,"scaleY",0),a.offsetShearY=Ge(r,"shearY",0),a.mixRotate=Ge(r,"mixRotate",1),a.mixX=Ge(r,"mixX",1),a.mixY=Ge(r,"mixY",a.mixX),a.mixScaleX=Ge(r,"mixScaleX",1),a.mixScaleY=Ge(r,"mixScaleY",a.mixScaleX),a.mixShearY=Ge(r,"mixShearY",1),s.transformConstraints.push(a)}if(i.path)for(let t=0;t<i.path.length;t++){let r=i.path[t],a=new te(r.name);a.order=Ge(r,"order",0),a.skinRequired=Ge(r,"skin",!1);for(let t=0;t<r.bones.length;t++){let e=r.bones[t],i=s.findBone(e);if(!i)throw new Error(`Couldn't find bone ${e} for path constraint ${r.name}.`);a.bones.push(i)}let n=r.target,o=s.findSlot(n);if(!o)throw new Error(`Couldn't find target slot ${n} for path constraint ${r.name}.`);a.target=o,a.positionMode=h.enumValue(Yt,Ge(r,"positionMode","Percent")),a.spacingMode=h.enumValue(Xt,Ge(r,"spacingMode","Length")),a.rotateMode=h.enumValue(Nt,Ge(r,"rotateMode","Tangent")),a.offsetRotation=Ge(r,"rotation",0),a.position=Ge(r,"position",0),a.positionMode==Yt.Fixed&&(a.position*=e),a.spacing=Ge(r,"spacing",0),a.spacingMode!=Xt.Length&&a.spacingMode!=Xt.Fixed||(a.spacing*=e),a.mixRotate=Ge(r,"mixRotate",1),a.mixX=Ge(r,"mixX",1),a.mixY=Ge(r,"mixY",a.mixX),s.pathConstraints.push(a)}if(i.skins)for(let t=0;t<i.skins.length;t++){let e=i.skins[t],r=new oe(e.name);if(e.bones)for(let t=0;t<e.bones.length;t++){let i=e.bones[t],a=s.findBone(i);if(!a)throw new Error(`Couldn't find bone ${i} for skin ${e.name}.`);r.bones.push(a)}if(e.ik)for(let t=0;t<e.ik.length;t++){let i=e.ik[t],a=s.findIkConstraint(i);if(!a)throw new Error(`Couldn't find IK constraint ${i} for skin ${e.name}.`);r.constraints.push(a)}if(e.transform)for(let t=0;t<e.transform.length;t++){let i=e.transform[t],a=s.findTransformConstraint(i);if(!a)throw new Error(`Couldn't find transform constraint ${i} for skin ${e.name}.`);r.constraints.push(a)}if(e.path)for(let t=0;t<e.path.length;t++){let i=e.path[t],a=s.findPathConstraint(i);if(!a)throw new Error(`Couldn't find path constraint ${i} for skin ${e.name}.`);r.constraints.push(a)}for(let t in e.attachments){let i=s.findSlot(t);if(!i)throw new Error(`Couldn't find slot ${t} for skin ${e.name}.`);let a=e.attachments[t];for(let t in a){let e=this.readAttachment(a[t],r,i.index,t,s);e&&r.setAttachment(i.index,t,e)}}s.skins.push(r),"default"==r.name&&(s.defaultSkin=r)}for(let t=0,e=this.linkedMeshes.length;t<e;t++){let e=this.linkedMeshes[t],i=e.skin?s.findSkin(e.skin):s.defaultSkin;if(!i)throw new Error(`Skin not found: ${e.skin}`);let r=i.getAttachment(e.slotIndex,e.parent);if(!r)throw new Error(`Parent mesh not found: ${e.parent}`);e.mesh.timelineAttachment=e.inheritTimeline?r:e.mesh,e.mesh.setParentMesh(r),null!=e.mesh.region&&e.mesh.updateRegion()}if(this.linkedMeshes.length=0,i.events)for(let t in i.events){let e=i.events[t],r=new Kt(t);r.intValue=Ge(e,"int",0),r.floatValue=Ge(e,"float",0),r.stringValue=Ge(e,"string",""),r.audioPath=Ge(e,"audio",null),r.audioPath&&(r.volume=Ge(e,"volume",1),r.balance=Ge(e,"balance",0)),s.events.push(r)}if(i.animations)for(let t in i.animations){let e=i.animations[t];this.readAnimation(e,t,s)}return s}readAttachment(t,e,s,i,r){let a=this.scale;switch(i=Ge(t,"name",i),Ge(t,"type","region")){case"region":{let s=Ge(t,"path",i),r=this.readSequence(Ge(t,"sequence",null)),n=this.attachmentLoader.newRegionAttachment(e,i,s,r);if(!n)return null;n.path=s,n.x=Ge(t,"x",0)*a,n.y=Ge(t,"y",0)*a,n.scaleX=Ge(t,"scaleX",1),n.scaleY=Ge(t,"scaleY",1),n.rotation=Ge(t,"rotation",0),n.width=t.width*a,n.height=t.height*a,n.sequence=r;let o=Ge(t,"color",null);return o&&n.color.setFromString(o),null!=n.region&&n.updateRegion(),n}case"boundingbox":{let s=this.attachmentLoader.newBoundingBoxAttachment(e,i);if(!s)return null;this.readVertices(t,s,t.vertexCount<<1);let r=Ge(t,"color",null);return r&&s.color.setFromString(r),s}case"mesh":case"linkedmesh":{let r=Ge(t,"path",i),n=this.readSequence(Ge(t,"sequence",null)),o=this.attachmentLoader.newMeshAttachment(e,i,r,n);if(!o)return null;o.path=r;let l=Ge(t,"color",null);l&&o.color.setFromString(l),o.width=Ge(t,"width",0)*a,o.height=Ge(t,"height",0)*a,o.sequence=n;let h=Ge(t,"parent",null);if(h)return this.linkedMeshes.push(new Ue(o,Ge(t,"skin",null),s,h,Ge(t,"timelines",!0))),o;let c=t.uvs;return this.readVertices(t,o,c.length),o.triangles=t.triangles,o.regionUVs=c,null!=o.region&&o.updateRegion(),o.edges=Ge(t,"edges",null),o.hullLength=2*Ge(t,"hull",0),o}case"path":{let s=this.attachmentLoader.newPathAttachment(e,i);if(!s)return null;s.closed=Ge(t,"closed",!1),s.constantSpeed=Ge(t,"constantSpeed",!0);let r=t.vertexCount;this.readVertices(t,s,r<<1);let n=h.newArray(r/3,0);for(let e=0;e<t.lengths.length;e++)n[e]=t.lengths[e]*a;s.lengths=n;let o=Ge(t,"color",null);return o&&s.color.setFromString(o),s}case"point":{let s=this.attachmentLoader.newPointAttachment(e,i);if(!s)return null;s.x=Ge(t,"x",0)*a,s.y=Ge(t,"y",0)*a,s.rotation=Ge(t,"rotation",0);let r=Ge(t,"color",null);return r&&s.color.setFromString(r),s}case"clipping":{let s=this.attachmentLoader.newClippingAttachment(e,i);if(!s)return null;let a=Ge(t,"end",null);a&&(s.endSlot=r.findSlot(a));let n=t.vertexCount;this.readVertices(t,s,n<<1);let o=Ge(t,"color",null);return o&&s.color.setFromString(o),s}}return null}readSequence(t){if(null==t)return null;let e=new m(Ge(t,"count",0));return e.start=Ge(t,"start",1),e.digits=Ge(t,"digits",0),e.setupIndex=Ge(t,"setup",0),e}readVertices(t,e,s){let i=this.scale;e.worldVerticesLength=s;let r=t.vertices;if(s==r.length){let t=h.toFloatArray(r);if(1!=i)for(let e=0,s=r.length;e<s;e++)t[e]*=i;return void(e.vertices=t)}let a=new Array,n=new Array;for(let t=0,e=r.length;t<e;){let e=r[t++];n.push(e);for(let s=t+4*e;t<s;t+=4)n.push(r[t]),a.push(r[t+1]*i),a.push(r[t+2]*i),a.push(r[t+3])}e.bones=n,e.vertices=h.toFloatArray(a)}readAnimation(t,e,i){let r=this.scale,n=new Array;if(t.slots)for(let e in t.slots){let s=t.slots[e],r=i.findSlot(e);if(!r)throw new Error("Slot not found: "+e);let o=r.index;for(let t in s){let e=s[t];if(!e)continue;let i=e.length;if("attachment"==t){let t=new rt(i,o);for(let s=0;s<i;s++){let i=e[s];t.setFrame(s,Ge(i,"time",0),Ge(i,"name",null))}n.push(t)}else if("rgba"==t){let t=new Z(i,i<<2,o),s=e[0],r=Ge(s,"time",0),l=a.fromString(s.color);for(let i=0,n=0;;i++){t.setFrame(i,r,l.r,l.g,l.b,l.a);let o=e[i+1];if(!o){t.shrink(n);break}let h=Ge(o,"time",0),c=a.fromString(o.color),d=s.curve;d&&(n=ze(d,t,n,i,0,r,h,l.r,c.r,1),n=ze(d,t,n,i,1,r,h,l.g,c.g,1),n=ze(d,t,n,i,2,r,h,l.b,c.b,1),n=ze(d,t,n,i,3,r,h,l.a,c.a,1)),r=h,l=c,s=o}n.push(t)}else if("rgb"==t){let t=new tt(i,3*i,o),s=e[0],r=Ge(s,"time",0),l=a.fromString(s.color);for(let i=0,n=0;;i++){t.setFrame(i,r,l.r,l.g,l.b);let o=e[i+1];if(!o){t.shrink(n);break}let h=Ge(o,"time",0),c=a.fromString(o.color),d=s.curve;d&&(n=ze(d,t,n,i,0,r,h,l.r,c.r,1),n=ze(d,t,n,i,1,r,h,l.g,c.g,1),n=ze(d,t,n,i,2,r,h,l.b,c.b,1)),r=h,l=c,s=o}n.push(t)}else if("alpha"==t)n.push(qe(e,new et(i,i,o),0,1));else if("rgba2"==t){let t=new st(i,7*i,o),s=e[0],r=Ge(s,"time",0),l=a.fromString(s.light),h=a.fromString(s.dark);for(let i=0,n=0;;i++){t.setFrame(i,r,l.r,l.g,l.b,l.a,h.r,h.g,h.b);let o=e[i+1];if(!o){t.shrink(n);break}let c=Ge(o,"time",0),d=a.fromString(o.light),u=a.fromString(o.dark),f=s.curve;f&&(n=ze(f,t,n,i,0,r,c,l.r,d.r,1),n=ze(f,t,n,i,1,r,c,l.g,d.g,1),n=ze(f,t,n,i,2,r,c,l.b,d.b,1),n=ze(f,t,n,i,3,r,c,l.a,d.a,1),n=ze(f,t,n,i,4,r,c,h.r,u.r,1),n=ze(f,t,n,i,5,r,c,h.g,u.g,1),n=ze(f,t,n,i,6,r,c,h.b,u.b,1)),r=c,l=d,h=u,s=o}n.push(t)}else if("rgb2"==t){let t=new it(i,6*i,o),s=e[0],r=Ge(s,"time",0),l=a.fromString(s.light),h=a.fromString(s.dark);for(let i=0,n=0;;i++){t.setFrame(i,r,l.r,l.g,l.b,h.r,h.g,h.b);let o=e[i+1];if(!o){t.shrink(n);break}let c=Ge(o,"time",0),d=a.fromString(o.light),u=a.fromString(o.dark),f=s.curve;f&&(n=ze(f,t,n,i,0,r,c,l.r,d.r,1),n=ze(f,t,n,i,1,r,c,l.g,d.g,1),n=ze(f,t,n,i,2,r,c,l.b,d.b,1),n=ze(f,t,n,i,3,r,c,h.r,u.r,1),n=ze(f,t,n,i,4,r,c,h.g,u.g,1),n=ze(f,t,n,i,5,r,c,h.b,u.b,1)),r=c,l=d,h=u,s=o}n.push(t)}}}if(t.bones)for(let e in t.bones){let s=t.bones[e],a=i.findBone(e);if(!a)throw new Error("Bone not found: "+e);let o=a.index;for(let t in s){let e=s[t],i=e.length;if(0!=i)if("rotate"===t)n.push(qe(e,new U(i,i,o),0,1));else if("translate"===t){let t=new q(i,i<<1,o);n.push(We(e,t,"x","y",0,r))}else if("translatex"===t){let t=new W(i,i,o);n.push(qe(e,t,0,r))}else if("translatey"===t){let t=new z(i,i,o);n.push(qe(e,t,0,r))}else if("scale"===t){let t=new G(i,i<<1,o);n.push(We(e,t,"x","y",1,1))}else if("scalex"===t){let t=new j(i,i,o);n.push(qe(e,t,1,1))}else if("scaley"===t){let t=new H(i,i,o);n.push(qe(e,t,1,1))}else if("shear"===t){let t=new J(i,i<<1,o);n.push(We(e,t,"x","y",0,1))}else if("shearx"===t){let t=new K(i,i,o);n.push(qe(e,t,0,1))}else if("sheary"===t){let t=new Q(i,i,o);n.push(qe(e,t,0,1))}}}if(t.ik)for(let e in t.ik){let s=t.ik[e],a=s[0];if(!a)continue;let o=i.findIkConstraint(e);if(!o)throw new Error("IK Constraint not found: "+e);let l=i.ikConstraints.indexOf(o),h=new lt(s.length,s.length<<1,l),c=Ge(a,"time",0),d=Ge(a,"mix",1),u=Ge(a,"softness",0)*r;for(let t=0,e=0;;t++){h.setFrame(t,c,d,u,Ge(a,"bendPositive",!0)?1:-1,Ge(a,"compress",!1),Ge(a,"stretch",!1));let i=s[t+1];if(!i){h.shrink(e);break}let n=Ge(i,"time",0),o=Ge(i,"mix",1),l=Ge(i,"softness",0)*r,f=a.curve;f&&(e=ze(f,h,e,t,0,c,n,d,o,1),e=ze(f,h,e,t,1,c,n,u,l,r)),c=n,d=o,u=l,a=i}n.push(h)}if(t.transform)for(let e in t.transform){let s=t.transform[e],r=s[0];if(!r)continue;let a=i.findTransformConstraint(e);if(!a)throw new Error("Transform constraint not found: "+e);let o=i.transformConstraints.indexOf(a),l=new ht(s.length,6*s.length,o),h=Ge(r,"time",0),c=Ge(r,"mixRotate",1),d=Ge(r,"mixX",1),u=Ge(r,"mixY",d),f=Ge(r,"mixScaleX",1),m=Ge(r,"mixScaleY",f),p=Ge(r,"mixShearY",1);for(let t=0,e=0;;t++){l.setFrame(t,h,c,d,u,f,m,p);let i=s[t+1];if(!i){l.shrink(e);break}let a=Ge(i,"time",0),n=Ge(i,"mixRotate",1),o=Ge(i,"mixX",1),g=Ge(i,"mixY",o),x=Ge(i,"mixScaleX",1),w=Ge(i,"mixScaleY",x),b=Ge(i,"mixShearY",1),y=r.curve;y&&(e=ze(y,l,e,t,0,h,a,c,n,1),e=ze(y,l,e,t,1,h,a,d,o,1),e=ze(y,l,e,t,2,h,a,u,g,1),e=ze(y,l,e,t,3,h,a,f,x,1),e=ze(y,l,e,t,4,h,a,m,w,1),e=ze(y,l,e,t,5,h,a,p,b,1)),h=a,c=n,d=o,u=g,f=x,m=w,f=x,r=i}n.push(l)}if(t.path)for(let e in t.path){let s=t.path[e],a=i.findPathConstraint(e);if(!a)throw new Error("Path constraint not found: "+e);let o=i.pathConstraints.indexOf(a);for(let t in s){let e=s[t],i=e[0];if(!i)continue;let l=e.length;if("position"===t){let t=new ct(l,l,o);n.push(qe(e,t,0,a.positionMode==Yt.Fixed?r:1))}else if("spacing"===t){let t=new dt(l,l,o);n.push(qe(e,t,0,a.spacingMode==Xt.Length||a.spacingMode==Xt.Fixed?r:1))}else if("mix"===t){let t=new ut(l,3*l,o),s=Ge(i,"time",0),r=Ge(i,"mixRotate",1),a=Ge(i,"mixX",1),h=Ge(i,"mixY",a);for(let n=0,o=0;;n++){t.setFrame(n,s,r,a,h);let l=e[n+1];if(!l){t.shrink(o);break}let c=Ge(l,"time",0),d=Ge(l,"mixRotate",1),u=Ge(l,"mixX",1),f=Ge(l,"mixY",u),m=i.curve;m&&(o=ze(m,t,o,n,0,s,c,r,d,1),o=ze(m,t,o,n,1,s,c,a,u,1),o=ze(m,t,o,n,2,s,c,h,f,1)),s=c,r=d,a=u,h=f,i=l}n.push(t)}}}if(t.attachments)for(let e in t.attachments){let a=t.attachments[e],o=i.findSkin(e);if(!o)throw new Error("Skin not found: "+e);for(let t in a){let e=a[t],l=i.findSlot(t);if(!l)throw new Error("Slot not found: "+t);let c=l.index;for(let t in e){let i=e[t],a=o.getAttachment(c,t);for(let t in i){let e=i[t],o=e[0];if(o)if("deform"==t){let t=a.bones,s=a.vertices,i=t?s.length/3*2:s.length,l=new at(e.length,e.length,c,a),d=Ge(o,"time",0);for(let a=0,n=0;;a++){let c,u=Ge(o,"vertices",null);if(u){c=h.newFloatArray(i);let e=Ge(o,"offset",0);if(h.arrayCopy(u,0,c,e,u.length),1!=r)for(let t=e,s=t+u.length;t<s;t++)c[t]*=r;if(!t)for(let t=0;t<i;t++)c[t]+=s[t]}else c=t?h.newFloatArray(i):s;l.setFrame(a,d,c);let f=e[a+1];if(!f){l.shrink(n);break}let m=Ge(f,"time",0),p=o.curve;p&&(n=ze(p,l,n,a,0,d,m,0,1,1)),d=m,o=f}n.push(l)}else if("sequence"==t){let t=new ft(e.length,c,a),i=0;for(let r=0;r<e.length;r++){let a=Ge(o,"delay",i),n=Ge(o,"time",0),l=s[Ge(o,"mode","hold")],h=Ge(o,"index",0);t.setFrame(r,n,l,h,a),i=a,o=e[r+1]}n.push(t)}}}}}if(t.drawOrder){let e=new ot(t.drawOrder.length),s=i.slots.length,r=0;for(let a=0;a<t.drawOrder.length;a++,r++){let n=t.drawOrder[a],o=null,l=Ge(n,"offsets",null);if(l){o=h.newArray(s,-1);let t=h.newArray(s-l.length,0),e=0,r=0;for(let s=0;s<l.length;s++){let a=l[s],n=i.findSlot(a.slot);if(!n)throw new Error("Slot not found: "+n);let h=n.index;for(;e!=h;)t[r++]=e++;o[e+a.offset]=e++}for(;e<s;)t[r++]=e++;for(let e=s-1;e>=0;e--)-1==o[e]&&(o[e]=t[--r])}e.setFrame(r,Ge(n,"time",0),o)}n.push(e)}if(t.events){let e=new nt(t.events.length),s=0;for(let r=0;r<t.events.length;r++,s++){let a=t.events[r],n=i.findEvent(a.name);if(!n)throw new Error("Event not found: "+a.name);let o=new Jt(h.toSinglePrecision(Ge(a,"time",0)),n);o.intValue=Ge(a,"int",n.intValue),o.floatValue=Ge(a,"float",n.floatValue),o.stringValue=Ge(a,"string",n.stringValue),o.data.audioPath&&(o.volume=Ge(a,"volume",1),o.balance=Ge(a,"balance",0)),e.setFrame(s,o)}n.push(e)}let o=0;for(let t=0,e=n.length;t<e;t++)o=Math.max(o,n[t].getDuration());i.animations.push(new g(e,n,o))}}class Ue{constructor(t,e,s,i,r){this.mesh=t,this.skin=e,this.slotIndex=s,this.parent=i,this.inheritTimeline=r}}function qe(t,e,s,i){let r=t[0],a=Ge(r,"time",0),n=Ge(r,"value",s)*i,o=0;for(let l=0;;l++){e.setFrame(l,a,n);let h=t[l+1];if(!h)return e.shrink(o),e;let c=Ge(h,"time",0),d=Ge(h,"value",s)*i;r.curve&&(o=ze(r.curve,e,o,l,0,a,c,n,d,i)),a=c,n=d,r=h}}function We(t,e,s,i,r,a){let n=t[0],o=Ge(n,"time",0),l=Ge(n,s,r)*a,h=Ge(n,i,r)*a,c=0;for(let d=0;;d++){e.setFrame(d,o,l,h);let u=t[d+1];if(!u)return e.shrink(c),e;let f=Ge(u,"time",0),m=Ge(u,s,r)*a,p=Ge(u,i,r)*a,g=n.curve;g&&(c=ze(g,e,c,d,0,o,f,l,m,a),c=ze(g,e,c,d,1,o,f,h,p,a)),o=f,l=m,h=p,n=u}}function ze(t,e,s,i,r,a,n,o,l,h){if("stepped"==t)return e.setStepped(i),s;let c=r<<2,d=t[c],u=t[c+1]*h,f=t[c+2],m=t[c+3]*h;return e.setBezier(s,i,r,a,o,d,u,f,m,n,l),s+1}function Ge(t,e,s){return void 0!==t[e]?t[e]:s}var je;void 0===Math.fround&&(Math.fround=(je=new Float32Array(1),function(t){return je[0]=t,je[0]}));var He=Object.freeze({__proto__:null,AlphaTimeline:et,Animation:g,AnimationState:mt,AnimationStateAdapter:class{start(t){}interrupt(t){}end(t){}dispose(t){}complete(t){}event(t,e){}},AnimationStateData:St,AssetManagerBase:class{constructor(t,e="",s=new Ht){this.pathPrefix="",this.assets={},this.errors={},this.toLoad=0,this.loaded=0,this.textureLoader=t,this.pathPrefix=e,this.downloader=s}start(t){return this.toLoad++,this.pathPrefix+t}success(t,e,s){this.toLoad--,this.loaded++,this.assets[e]=s,t&&t(e,s)}error(t,e,s){this.toLoad--,this.loaded++,this.errors[e]=s,t&&t(e,s)}loadAll(){return new Promise(((t,e)=>{let s=()=>{this.isLoadingComplete()?this.hasErrors()?e(this.errors):t(this):requestAnimationFrame(s)};requestAnimationFrame(s)}))}setRawDataURI(t,e){this.downloader.rawDataUris[this.pathPrefix+t]=e}loadBinary(t,e=(()=>{}),s=(()=>{})){t=this.start(t),this.downloader.downloadBinary(t,(s=>{this.success(e,t,s)}),((e,i)=>{this.error(s,t,`Couldn't load binary ${t}: status ${e}, ${i}`)}))}loadText(t,e=(()=>{}),s=(()=>{})){t=this.start(t),this.downloader.downloadText(t,(s=>{this.success(e,t,s)}),((e,i)=>{this.error(s,t,`Couldn't load text ${t}: status ${e}, ${i}`)}))}loadJson(t,e=(()=>{}),s=(()=>{})){t=this.start(t),this.downloader.downloadJson(t,(s=>{this.success(e,t,s)}),((e,i)=>{this.error(s,t,`Couldn't load JSON ${t}: status ${e}, ${i}`)}))}loadTexture(t,e=(()=>{}),s=(()=>{})){if(t=this.start(t),!!("undefined"==typeof window||"undefined"==typeof navigator||!window.document))fetch(t,{mode:"cors"}).then((e=>e.ok?e.blob():(this.error(s,t,`Couldn't load image: ${t}`),null))).then((t=>t?createImageBitmap(t,{premultiplyAlpha:"none",colorSpaceConversion:"none"}):null)).then((s=>{s&&this.success(e,t,this.textureLoader(s))}));else{let i=new Image;i.crossOrigin="anonymous",i.onload=()=>{this.success(e,t,this.textureLoader(i))},i.onerror=()=>{this.error(s,t,`Couldn't load image: ${t}`)},this.downloader.rawDataUris[t]&&(t=this.downloader.rawDataUris[t]),i.src=t}}loadTextureAtlas(t,e=(()=>{}),s=(()=>{}),i){let r=t.lastIndexOf("/"),a=r>=0?t.substring(0,r+1):"";t=this.start(t),this.downloader.downloadText(t,(r=>{try{let n=new _t(r),o=n.pages.length,l=!1;for(let r of n.pages)this.loadTexture(i?i[r.name]:a+r.name,((s,i)=>{l||(r.setTexture(i),0==--o&&this.success(e,t,n))}),((e,i)=>{l||this.error(s,t,`Couldn't load texture atlas ${t} page image: ${e}`),l=!0}))}catch(e){this.error(s,t,`Couldn't parse texture atlas ${t}: ${e.message}`)}}),((e,i)=>{this.error(s,t,`Couldn't load texture atlas ${t}: status ${e}, ${i}`)}))}get(t){return this.assets[this.pathPrefix+t]}require(t){t=this.pathPrefix+t;let e=this.assets[t];if(e)return e;let s=this.errors[t];throw Error("Asset not found: "+t+(s?"\n"+s:""))}remove(t){t=this.pathPrefix+t;let e=this.assets[t];return e.dispose&&e.dispose(),delete this.assets[t],e}removeAll(){for(let t in this.assets){let e=this.assets[t];e.dispose&&e.dispose()}this.assets={}}isLoadingComplete(){return 0==this.toLoad}getToLoad(){return this.toLoad}getLoaded(){return this.loaded}dispose(){this.removeAll()}hasErrors(){return Object.keys(this.errors).length>0}getErrors(){return this.errors}},AtlasAttachmentLoader:Wt,Attachment:u,AttachmentTimeline:rt,BinaryInput:ce,get BlendMode(){return Lt},Bone:Gt,BoneData:zt,BoundingBoxAttachment:kt,CURRENT:Et,ClippingAttachment:Tt,Color:a,ConstraintData:jt,CurveTimeline:O,CurveTimeline1:$,CurveTimeline2:V,DebugUtils:class{static logBones(t){for(let e=0;e<t.bones.length;e++){let s=t.bones[e];console.log(s.data.name+", "+s.a+", "+s.b+", "+s.c+", "+s.d+", "+s.worldX+", "+s.worldY)}}},DeformTimeline:at,Downloader:Ht,DrawOrderTimeline:ot,Event:Jt,EventData:Kt,EventQueue:gt,EventTimeline:nt,get EventType(){return xt},FIRST:bt,FakeTexture:class extends Rt{setFilters(t,e){}setWraps(t,e){}dispose(){}},HOLD_FIRST:vt,HOLD_MIX:It,HOLD_SUBSEQUENT:yt,IkConstraint:Qt,IkConstraintData:Zt,IkConstraintTimeline:lt,IntSet:class{constructor(){this.array=new Array}add(t){let e=this.contains(t);return this.array[0|t]=0|t,!e}contains(t){return null!=this.array[0|t]}remove(t){this.array[0|t]=void 0}clear(){this.array.length=0}},Interpolation:o,MathUtils:n,MeshAttachment:$t,get MixBlend(){return x},get MixDirection(){return w},PathAttachment:Vt,PathConstraint:ee,PathConstraintData:te,PathConstraintMixTimeline:ut,PathConstraintPositionTimeline:ct,PathConstraintSpacingTimeline:dt,PointAttachment:Ut,Pool:c,get PositionMode(){return Yt},Pow:l,PowOut:class extends l{constructor(t){super(t)}applyInternal(t){return Math.pow(t-1,this.power)*(this.power%2==0?-1:1)+1}},RGB2Timeline:it,RGBA2Timeline:st,RGBATimeline:Z,RGBTimeline:tt,RegionAttachment:qt,get RotateMode(){return Nt},RotateTimeline:U,SETUP:At,SUBSEQUENT:wt,ScaleTimeline:G,ScaleXTimeline:j,ScaleYTimeline:H,SequenceTimeline:ft,ShearTimeline:J,ShearXTimeline:K,ShearYTimeline:Q,Skeleton:re,SkeletonBinary:class{constructor(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}readSkeletonData(t){let e=this.scale,s=new ae;s.name="";let i=new ce(t),r=i.readInt32(),n=i.readInt32();s.hash=0==n&&0==r?null:n.toString(16)+r.toString(16),s.version=i.readString(),s.x=i.readFloat(),s.y=i.readFloat(),s.width=i.readFloat(),s.height=i.readFloat();let o=i.readBoolean();o&&(s.fps=i.readFloat(),s.imagesPath=i.readString(),s.audioPath=i.readString());let l=0;l=i.readInt(!0);for(let t=0;t<l;t++){let t=i.readString();if(!t)throw new Error("String in string table must not be null.");i.strings.push(t)}l=i.readInt(!0);for(let t=0;t<l;t++){let r=i.readString();if(!r)throw new Error("Bone name must not be null.");let n=0==t?null:s.bones[i.readInt(!0)],l=new zt(t,r,n);l.rotation=i.readFloat(),l.x=i.readFloat()*e,l.y=i.readFloat()*e,l.scaleX=i.readFloat(),l.scaleY=i.readFloat(),l.shearX=i.readFloat(),l.shearY=i.readFloat(),l.length=i.readFloat()*e,l.transformMode=i.readInt(!0),l.skinRequired=i.readBoolean(),o&&a.rgba8888ToColor(l.color,i.readInt32()),s.bones.push(l)}l=i.readInt(!0);for(let t=0;t<l;t++){let e=i.readString();if(!e)throw new Error("Slot name must not be null.");let r=s.bones[i.readInt(!0)],n=new le(t,e,r);a.rgba8888ToColor(n.color,i.readInt32());let o=i.readInt32();-1!=o&&a.rgb888ToColor(n.darkColor=new a,o),n.attachmentName=i.readStringRef(),n.blendMode=i.readInt(!0),s.slots.push(n)}l=i.readInt(!0);for(let t,r=0;r<l;r++){let r=i.readString();if(!r)throw new Error("IK constraint data name must not be null.");let a=new Zt(r);a.order=i.readInt(!0),a.skinRequired=i.readBoolean(),t=i.readInt(!0);for(let e=0;e<t;e++)a.bones.push(s.bones[i.readInt(!0)]);a.target=s.bones[i.readInt(!0)],a.mix=i.readFloat(),a.softness=i.readFloat()*e,a.bendDirection=i.readByte(),a.compress=i.readBoolean(),a.stretch=i.readBoolean(),a.uniform=i.readBoolean(),s.ikConstraints.push(a)}l=i.readInt(!0);for(let t,r=0;r<l;r++){let r=i.readString();if(!r)throw new Error("Transform constraint data name must not be null.");let a=new he(r);a.order=i.readInt(!0),a.skinRequired=i.readBoolean(),t=i.readInt(!0);for(let e=0;e<t;e++)a.bones.push(s.bones[i.readInt(!0)]);a.target=s.bones[i.readInt(!0)],a.local=i.readBoolean(),a.relative=i.readBoolean(),a.offsetRotation=i.readFloat(),a.offsetX=i.readFloat()*e,a.offsetY=i.readFloat()*e,a.offsetScaleX=i.readFloat(),a.offsetScaleY=i.readFloat(),a.offsetShearY=i.readFloat(),a.mixRotate=i.readFloat(),a.mixX=i.readFloat(),a.mixY=i.readFloat(),a.mixScaleX=i.readFloat(),a.mixScaleY=i.readFloat(),a.mixShearY=i.readFloat(),s.transformConstraints.push(a)}l=i.readInt(!0);for(let t,r=0;r<l;r++){let r=i.readString();if(!r)throw new Error("Path constraint data name must not be null.");let a=new te(r);a.order=i.readInt(!0),a.skinRequired=i.readBoolean(),t=i.readInt(!0);for(let e=0;e<t;e++)a.bones.push(s.bones[i.readInt(!0)]);a.target=s.slots[i.readInt(!0)],a.positionMode=i.readInt(!0),a.spacingMode=i.readInt(!0),a.rotateMode=i.readInt(!0),a.offsetRotation=i.readFloat(),a.position=i.readFloat(),a.positionMode==Yt.Fixed&&(a.position*=e),a.spacing=i.readFloat(),a.spacingMode!=Xt.Length&&a.spacingMode!=Xt.Fixed||(a.spacing*=e),a.mixRotate=i.readFloat(),a.mixX=i.readFloat(),a.mixY=i.readFloat(),s.pathConstraints.push(a)}let c=this.readSkin(i,s,!0,o);c&&(s.defaultSkin=c,s.skins.push(c));{let t=s.skins.length;for(h.setArraySize(s.skins,l=t+i.readInt(!0));t<l;t++){let e=this.readSkin(i,s,!1,o);if(!e)throw new Error("readSkin() should not have returned null.");s.skins[t]=e}}l=this.linkedMeshes.length;for(let t=0;t<l;t++){let e=this.linkedMeshes[t],i=e.skin?s.findSkin(e.skin):s.defaultSkin;if(!i)throw new Error("Not skin found for linked mesh.");if(!e.parent)throw new Error("Linked mesh parent must not be null");let r=i.getAttachment(e.slotIndex,e.parent);if(!r)throw new Error(`Parent mesh not found: ${e.parent}`);e.mesh.timelineAttachment=e.inheritTimeline?r:e.mesh,e.mesh.setParentMesh(r),null!=e.mesh.region&&e.mesh.updateRegion()}this.linkedMeshes.length=0,l=i.readInt(!0);for(let t=0;t<l;t++){let t=i.readStringRef();if(!t)throw new Error;let e=new Kt(t);e.intValue=i.readInt(!1),e.floatValue=i.readFloat(),e.stringValue=i.readString(),e.audioPath=i.readString(),e.audioPath&&(e.volume=i.readFloat(),e.balance=i.readFloat()),s.events.push(e)}l=i.readInt(!0);for(let t=0;t<l;t++){let t=i.readString();if(!t)throw new Error("Animatio name must not be null.");s.animations.push(this.readAnimation(i,t,s))}return s}readSkin(t,e,s,i){let r=null,a=0;if(s){if(a=t.readInt(!0),0==a)return null;r=new oe("default")}else{let s=t.readStringRef();if(!s)throw new Error("Skin name must not be null.");r=new oe(s),r.bones.length=t.readInt(!0);for(let s=0,i=r.bones.length;s<i;s++)r.bones[s]=e.bones[t.readInt(!0)];for(let s=0,i=t.readInt(!0);s<i;s++)r.constraints.push(e.ikConstraints[t.readInt(!0)]);for(let s=0,i=t.readInt(!0);s<i;s++)r.constraints.push(e.transformConstraints[t.readInt(!0)]);for(let s=0,i=t.readInt(!0);s<i;s++)r.constraints.push(e.pathConstraints[t.readInt(!0)]);a=t.readInt(!0)}for(let s=0;s<a;s++){let s=t.readInt(!0);for(let a=0,n=t.readInt(!0);a<n;a++){let a=t.readStringRef();if(!a)throw new Error("Attachment name must not be null");let n=this.readAttachment(t,e,r,s,a,i);n&&r.setAttachment(s,a,n)}}return r}readAttachment(t,e,s,i,r,n){let o=this.scale,l=t.readStringRef();switch(l||(l=r),t.readByte()){case fe.Region:{let e=t.readStringRef(),i=t.readFloat(),r=t.readFloat(),n=t.readFloat(),h=t.readFloat(),c=t.readFloat(),d=t.readFloat(),u=t.readFloat(),f=t.readInt32(),m=this.readSequence(t);e||(e=l);let p=this.attachmentLoader.newRegionAttachment(s,l,e,m);return p?(p.path=e,p.x=r*o,p.y=n*o,p.scaleX=h,p.scaleY=c,p.rotation=i,p.width=d*o,p.height=u*o,a.rgba8888ToColor(p.color,f),p.sequence=m,null==m&&p.updateRegion(),p):null}case fe.BoundingBox:{let e=t.readInt(!0),i=this.readVertices(t,e),r=n?t.readInt32():0,o=this.attachmentLoader.newBoundingBoxAttachment(s,l);return o?(o.worldVerticesLength=e<<1,o.vertices=i.vertices,o.bones=i.bones,n&&a.rgba8888ToColor(o.color,r),o):null}case fe.Mesh:{let e=t.readStringRef(),i=t.readInt32(),r=t.readInt(!0),h=this.readFloatArray(t,r<<1,1),c=this.readShortArray(t),d=this.readVertices(t,r),u=t.readInt(!0),f=this.readSequence(t),m=[],p=0,g=0;n&&(m=this.readShortArray(t),p=t.readFloat(),g=t.readFloat()),e||(e=l);let x=this.attachmentLoader.newMeshAttachment(s,l,e,f);return x?(x.path=e,a.rgba8888ToColor(x.color,i),x.bones=d.bones,x.vertices=d.vertices,x.worldVerticesLength=r<<1,x.triangles=c,x.regionUVs=h,null==f&&x.updateRegion(),x.hullLength=u<<1,x.sequence=f,n&&(x.edges=m,x.width=p*o,x.height=g*o),x):null}case fe.LinkedMesh:{let e=t.readStringRef(),r=t.readInt32(),h=t.readStringRef(),c=t.readStringRef(),d=t.readBoolean(),u=this.readSequence(t),f=0,m=0;n&&(f=t.readFloat(),m=t.readFloat()),e||(e=l);let p=this.attachmentLoader.newMeshAttachment(s,l,e,u);return p?(p.path=e,a.rgba8888ToColor(p.color,r),p.sequence=u,n&&(p.width=f*o,p.height=m*o),this.linkedMeshes.push(new de(p,h,i,c,d)),p):null}case fe.Path:{let e=t.readBoolean(),i=t.readBoolean(),r=t.readInt(!0),c=this.readVertices(t,r),d=h.newArray(r/3,0);for(let e=0,s=d.length;e<s;e++)d[e]=t.readFloat()*o;let u=n?t.readInt32():0,f=this.attachmentLoader.newPathAttachment(s,l);return f?(f.closed=e,f.constantSpeed=i,f.worldVerticesLength=r<<1,f.vertices=c.vertices,f.bones=c.bones,f.lengths=d,n&&a.rgba8888ToColor(f.color,u),f):null}case fe.Point:{let e=t.readFloat(),i=t.readFloat(),r=t.readFloat(),h=n?t.readInt32():0,c=this.attachmentLoader.newPointAttachment(s,l);return c?(c.x=i*o,c.y=r*o,c.rotation=e,n&&a.rgba8888ToColor(c.color,h),c):null}case fe.Clipping:{let i=t.readInt(!0),r=t.readInt(!0),o=this.readVertices(t,r),h=n?t.readInt32():0,c=this.attachmentLoader.newClippingAttachment(s,l);return c?(c.endSlot=e.slots[i],c.worldVerticesLength=r<<1,c.vertices=o.vertices,c.bones=o.bones,n&&a.rgba8888ToColor(c.color,h),c):null}}return null}readSequence(t){if(!t.readBoolean())return null;let e=new m(t.readInt(!0));return e.start=t.readInt(!0),e.digits=t.readInt(!0),e.setupIndex=t.readInt(!0),e}readVertices(t,e){let s=this.scale,i=e<<1,r=new ue;if(!t.readBoolean())return r.vertices=this.readFloatArray(t,i,s),r;let a=new Array,n=new Array;for(let i=0;i<e;i++){let e=t.readInt(!0);n.push(e);for(let i=0;i<e;i++)n.push(t.readInt(!0)),a.push(t.readFloat()*s),a.push(t.readFloat()*s),a.push(t.readFloat())}return r.vertices=h.toFloatArray(a),r.bones=n,r}readFloatArray(t,e,s){let i=new Array(e);if(1==s)for(let s=0;s<e;s++)i[s]=t.readFloat();else for(let r=0;r<e;r++)i[r]=t.readFloat()*s;return i}readShortArray(t){let e=t.readInt(!0),s=new Array(e);for(let i=0;i<e;i++)s[i]=t.readShort();return s}readAnimation(t,e,s){t.readInt(!0);let i=new Array,r=this.scale;for(let e=0,s=t.readInt(!0);e<s;e++){let e=t.readInt(!0);for(let s=0,r=t.readInt(!0);s<r;s++){let s=t.readByte(),r=t.readInt(!0),a=r-1;switch(s){case Te:{let s=new rt(r,e);for(let e=0;e<r;e++)s.setFrame(e,t.readFloat(),t.readStringRef());i.push(s);break}case Re:{let s=t.readInt(!0),n=new Z(r,s,e),o=t.readFloat(),l=t.readUnsignedByte()/255,h=t.readUnsignedByte()/255,c=t.readUnsignedByte()/255,d=t.readUnsignedByte()/255;for(let e=0,s=0;n.setFrame(e,o,l,h,c,d),e!=a;e++){let i=t.readFloat(),r=t.readUnsignedByte()/255,a=t.readUnsignedByte()/255,u=t.readUnsignedByte()/255,f=t.readUnsignedByte()/255;switch(t.readByte()){case Be:n.setStepped(e);break;case De:ge(t,n,s++,e,0,o,i,l,r,1),ge(t,n,s++,e,1,o,i,h,a,1),ge(t,n,s++,e,2,o,i,c,u,1),ge(t,n,s++,e,3,o,i,d,f,1)}o=i,l=r,h=a,c=u,d=f}i.push(n);break}case Ce:{let s=t.readInt(!0),n=new tt(r,s,e),o=t.readFloat(),l=t.readUnsignedByte()/255,h=t.readUnsignedByte()/255,c=t.readUnsignedByte()/255;for(let e=0,s=0;n.setFrame(e,o,l,h,c),e!=a;e++){let i=t.readFloat(),r=t.readUnsignedByte()/255,a=t.readUnsignedByte()/255,d=t.readUnsignedByte()/255;switch(t.readByte()){case Be:n.setStepped(e);break;case De:ge(t,n,s++,e,0,o,i,l,r,1),ge(t,n,s++,e,1,o,i,h,a,1),ge(t,n,s++,e,2,o,i,c,d,1)}o=i,l=r,h=a,c=d}i.push(n);break}case Me:{let s=t.readInt(!0),n=new st(r,s,e),o=t.readFloat(),l=t.readUnsignedByte()/255,h=t.readUnsignedByte()/255,c=t.readUnsignedByte()/255,d=t.readUnsignedByte()/255,u=t.readUnsignedByte()/255,f=t.readUnsignedByte()/255,m=t.readUnsignedByte()/255;for(let e=0,s=0;n.setFrame(e,o,l,h,c,d,u,f,m),e!=a;e++){let i=t.readFloat(),r=t.readUnsignedByte()/255,a=t.readUnsignedByte()/255,p=t.readUnsignedByte()/255,g=t.readUnsignedByte()/255,x=t.readUnsignedByte()/255,w=t.readUnsignedByte()/255,b=t.readUnsignedByte()/255;switch(t.readByte()){case Be:n.setStepped(e);break;case De:ge(t,n,s++,e,0,o,i,l,r,1),ge(t,n,s++,e,1,o,i,h,a,1),ge(t,n,s++,e,2,o,i,c,p,1),ge(t,n,s++,e,3,o,i,d,g,1),ge(t,n,s++,e,4,o,i,u,x,1),ge(t,n,s++,e,5,o,i,f,w,1),ge(t,n,s++,e,6,o,i,m,b,1)}o=i,l=r,h=a,c=p,d=g,u=x,f=w,m=b}i.push(n);break}case Fe:{let s=t.readInt(!0),n=new it(r,s,e),o=t.readFloat(),l=t.readUnsignedByte()/255,h=t.readUnsignedByte()/255,c=t.readUnsignedByte()/255,d=t.readUnsignedByte()/255,u=t.readUnsignedByte()/255,f=t.readUnsignedByte()/255;for(let e=0,s=0;n.setFrame(e,o,l,h,c,d,u,f),e!=a;e++){let i=t.readFloat(),r=t.readUnsignedByte()/255,a=t.readUnsignedByte()/255,m=t.readUnsignedByte()/255,p=t.readUnsignedByte()/255,g=t.readUnsignedByte()/255,x=t.readUnsignedByte()/255;switch(t.readByte()){case Be:n.setStepped(e);break;case De:ge(t,n,s++,e,0,o,i,l,r,1),ge(t,n,s++,e,1,o,i,h,a,1),ge(t,n,s++,e,2,o,i,c,m,1),ge(t,n,s++,e,3,o,i,d,p,1),ge(t,n,s++,e,4,o,i,u,g,1),ge(t,n,s++,e,5,o,i,f,x,1)}o=i,l=r,h=a,c=m,d=p,u=g,f=x}i.push(n);break}case Ye:{let s=new et(r,t.readInt(!0),e),n=t.readFloat(),o=t.readUnsignedByte()/255;for(let e=0,i=0;s.setFrame(e,n,o),e!=a;e++){let r=t.readFloat(),a=t.readUnsignedByte()/255;switch(t.readByte()){case Be:s.setStepped(e);break;case De:ge(t,s,i++,e,0,n,r,o,a,1)}n=r,o=a}i.push(s)}}}}for(let e=0,s=t.readInt(!0);e<s;e++){let e=t.readInt(!0);for(let s=0,a=t.readInt(!0);s<a;s++){let s=t.readByte(),a=t.readInt(!0),n=t.readInt(!0);switch(s){case xe:i.push(me(t,new U(a,n,e),1));break;case we:i.push(pe(t,new q(a,n,e),r));break;case be:i.push(me(t,new W(a,n,e),r));break;case ye:i.push(me(t,new z(a,n,e),r));break;case ve:i.push(pe(t,new G(a,n,e),1));break;case Ie:i.push(me(t,new j(a,n,e),1));break;case Ae:i.push(me(t,new H(a,n,e),1));break;case Ee:i.push(pe(t,new J(a,n,e),1));break;case Se:i.push(me(t,new K(a,n,e),1));break;case ke:i.push(me(t,new Q(a,n,e),1))}}}for(let e=0,s=t.readInt(!0);e<s;e++){let e=t.readInt(!0),s=t.readInt(!0),a=s-1,n=new lt(s,t.readInt(!0),e),o=t.readFloat(),l=t.readFloat(),h=t.readFloat()*r;for(let e=0,s=0;n.setFrame(e,o,l,h,t.readByte(),t.readBoolean(),t.readBoolean()),e!=a;e++){let i=t.readFloat(),a=t.readFloat(),c=t.readFloat()*r;switch(t.readByte()){case Be:n.setStepped(e);break;case De:ge(t,n,s++,e,0,o,i,l,a,1),ge(t,n,s++,e,1,o,i,h,c,r)}o=i,l=a,h=c}i.push(n)}for(let e=0,s=t.readInt(!0);e<s;e++){let e=t.readInt(!0),s=t.readInt(!0),r=s-1,a=new ht(s,t.readInt(!0),e),n=t.readFloat(),o=t.readFloat(),l=t.readFloat(),h=t.readFloat(),c=t.readFloat(),d=t.readFloat(),u=t.readFloat();for(let e=0,s=0;a.setFrame(e,n,o,l,h,c,d,u),e!=r;e++){let i=t.readFloat(),r=t.readFloat(),f=t.readFloat(),m=t.readFloat(),p=t.readFloat(),g=t.readFloat(),x=t.readFloat();switch(t.readByte()){case Be:a.setStepped(e);break;case De:ge(t,a,s++,e,0,n,i,o,r,1),ge(t,a,s++,e,1,n,i,l,f,1),ge(t,a,s++,e,2,n,i,h,m,1),ge(t,a,s++,e,3,n,i,c,p,1),ge(t,a,s++,e,4,n,i,d,g,1),ge(t,a,s++,e,5,n,i,u,x,1)}n=i,o=r,l=f,h=m,c=p,d=g,u=x}i.push(a)}for(let e=0,a=t.readInt(!0);e<a;e++){let e=t.readInt(!0),a=s.pathConstraints[e];for(let s=0,n=t.readInt(!0);s<n;s++)switch(t.readByte()){case Le:i.push(me(t,new ct(t.readInt(!0),t.readInt(!0),e),a.positionMode==Yt.Fixed?r:1));break;case Pe:i.push(me(t,new dt(t.readInt(!0),t.readInt(!0),e),a.spacingMode==Xt.Length||a.spacingMode==Xt.Fixed?r:1));break;case _e:let s=new ut(t.readInt(!0),t.readInt(!0),e),n=t.readFloat(),o=t.readFloat(),l=t.readFloat(),h=t.readFloat();for(let e=0,i=0,r=s.getFrameCount()-1;s.setFrame(e,n,o,l,h),e!=r;e++){let r=t.readFloat(),a=t.readFloat(),c=t.readFloat(),d=t.readFloat();switch(t.readByte()){case Be:s.setStepped(e);break;case De:ge(t,s,i++,e,0,n,r,o,a,1),ge(t,s,i++,e,1,n,r,l,c,1),ge(t,s,i++,e,2,n,r,h,d,1)}n=r,o=a,l=c,h=d}i.push(s)}}for(let e=0,a=t.readInt(!0);e<a;e++){let e=s.skins[t.readInt(!0)];for(let s=0,a=t.readInt(!0);s<a;s++){let s=t.readInt(!0);for(let a=0,n=t.readInt(!0);a<n;a++){let a=t.readStringRef();if(!a)throw new Error("attachmentName must not be null.");let n=e.getAttachment(s,a),o=t.readByte(),l=t.readInt(!0),c=l-1;switch(o){case Xe:{let e=n,a=e.bones,o=e.vertices,d=a?o.length/3*2:o.length,u=t.readInt(!0),f=new at(l,u,s,e),m=t.readFloat();for(let e=0,s=0;;e++){let i,n=t.readInt(!0);if(0==n)i=a?h.newFloatArray(d):o;else{i=h.newFloatArray(d);let e=t.readInt(!0);if(n+=e,1==r)for(let s=e;s<n;s++)i[s]=t.readFloat();else for(let s=e;s<n;s++)i[s]=t.readFloat()*r;if(!a)for(let t=0,e=i.length;t<e;t++)i[t]+=o[t]}if(f.setFrame(e,m,i),e==c)break;let l=t.readFloat();switch(t.readByte()){case Be:f.setStepped(e);break;case De:ge(t,f,s++,e,0,m,l,0,1,1)}m=l}i.push(f);break}case Ne:{let e=new ft(l,s,n);for(let s=0;s<l;s++){let i=t.readFloat(),r=t.readInt32();e.setFrame(s,i,p[15&r],r>>4,t.readFloat())}i.push(e);break}}}}}let a=t.readInt(!0);if(a>0){let e=new ot(a),r=s.slots.length;for(let s=0;s<a;s++){let i=t.readFloat(),a=t.readInt(!0),n=h.newArray(r,0);for(let t=r-1;t>=0;t--)n[t]=-1;let o=h.newArray(r-a,0),l=0,c=0;for(let e=0;e<a;e++){let e=t.readInt(!0);for(;l!=e;)o[c++]=l++;n[l+t.readInt(!0)]=l++}for(;l<r;)o[c++]=l++;for(let t=r-1;t>=0;t--)-1==n[t]&&(n[t]=o[--c]);e.setFrame(s,i,n)}i.push(e)}let n=t.readInt(!0);if(n>0){let e=new nt(n);for(let i=0;i<n;i++){let r=t.readFloat(),a=s.events[t.readInt(!0)],n=new Jt(r,a);n.intValue=t.readInt(!1),n.floatValue=t.readFloat(),n.stringValue=t.readBoolean()?t.readString():a.stringValue,n.data.audioPath&&(n.volume=t.readFloat(),n.balance=t.readFloat()),e.setFrame(i,n)}i.push(e)}let o=0;for(let t=0,e=i.length;t<e;t++)o=Math.max(o,i[t].getDuration());return new g(e,i,o)}},SkeletonBounds:class{constructor(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new c((()=>h.newFloatArray(16)))}update(t,e){if(!t)throw new Error("skeleton cannot be null.");let s=this.boundingBoxes,i=this.polygons,r=this.polygonPool,a=t.slots,n=a.length;s.length=0,r.freeAll(i),i.length=0;for(let t=0;t<n;t++){let e=a[t];if(!e.bone.active)continue;let n=e.getAttachment();if(n instanceof kt){let t=n;s.push(t);let a=r.obtain();a.length!=t.worldVerticesLength&&(a=h.newFloatArray(t.worldVerticesLength)),i.push(a),t.computeWorldVertices(e,0,t.worldVerticesLength,a,0,2)}}e?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)}aabbCompute(){let t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,i=Number.NEGATIVE_INFINITY,r=this.polygons;for(let a=0,n=r.length;a<n;a++){let n=r[a],o=n;for(let r=0,a=n.length;r<a;r+=2){let a=o[r],n=o[r+1];t=Math.min(t,a),e=Math.min(e,n),s=Math.max(s,a),i=Math.max(i,n)}}this.minX=t,this.minY=e,this.maxX=s,this.maxY=i}aabbContainsPoint(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY}aabbIntersectsSegment(t,e,s,i){let r=this.minX,a=this.minY,n=this.maxX,o=this.maxY;if(t<=r&&s<=r||e<=a&&i<=a||t>=n&&s>=n||e>=o&&i>=o)return!1;let l=(i-e)/(s-t),h=l*(r-t)+e;if(h>a&&h<o)return!0;if(h=l*(n-t)+e,h>a&&h<o)return!0;let c=(a-e)/l+t;return c>r&&c<n||(c=(o-e)/l+t,c>r&&c<n)}aabbIntersectsSkeleton(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY}containsPoint(t,e){let s=this.polygons;for(let i=0,r=s.length;i<r;i++)if(this.containsPointPolygon(s[i],t,e))return this.boundingBoxes[i];return null}containsPointPolygon(t,e,s){let i=t,r=t.length,a=r-2,n=!1;for(let t=0;t<r;t+=2){let r=i[t+1],o=i[a+1];if(r<s&&o>=s||o<s&&r>=s){let l=i[t];l+(s-r)/(o-r)*(i[a]-l)<e&&(n=!n)}a=t}return n}intersectsSegment(t,e,s,i){let r=this.polygons;for(let a=0,n=r.length;a<n;a++)if(this.intersectsSegmentPolygon(r[a],t,e,s,i))return this.boundingBoxes[a];return null}intersectsSegmentPolygon(t,e,s,i,r){let a=t,n=t.length,o=e-i,l=s-r,h=e*r-s*i,c=a[n-2],d=a[n-1];for(let t=0;t<n;t+=2){let n=a[t],u=a[t+1],f=c*u-d*n,m=c-n,p=d-u,g=o*p-l*m,x=(h*m-o*f)/g;if((x>=c&&x<=n||x>=n&&x<=c)&&(x>=e&&x<=i||x>=i&&x<=e)){let t=(h*p-l*f)/g;if((t>=d&&t<=u||t>=u&&t<=d)&&(t>=s&&t<=r||t>=r&&t<=s))return!0}c=n,d=u}return!1}getPolygon(t){if(!t)throw new Error("boundingBox cannot be null.");let e=this.boundingBoxes.indexOf(t);return-1==e?null:this.polygons[e]}getWidth(){return this.maxX-this.minX}getHeight(){return this.maxY-this.minY}},SkeletonClipping:$e,SkeletonData:ae,SkeletonJson:Ve,Skin:oe,SkinEntry:ne,Slot:se,SlotData:le,get SpacingMode(){return Xt},StringSet:r,Texture:Rt,TextureAtlas:_t,TextureAtlasPage:Dt,TextureAtlasRegion:Ot,get TextureFilter(){return Ct},TextureRegion:Pt,get TextureWrap(){return Mt},TimeKeeper:class{constructor(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}update(){let t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)}},Timeline:D,TrackEntry:pt,TransformConstraint:ie,TransformConstraintData:he,TransformConstraintTimeline:ht,get TransformMode(){return Ft},TranslateTimeline:q,TranslateXTimeline:W,TranslateYTimeline:z,Triangulator:Oe,Utils:h,Vector2:d,VertexAttachment:f,WindowedMean:class{constructor(t=32){this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(t)}hasEnoughData(){return this.addedValues>=this.values.length}addValue(t){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=t,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0}getMean(){if(this.hasEnoughData()){if(this.dirty){let t=0;for(let e=0;e<this.values.length;e++)t+=this.values[e];this.mean=t/this.values.length,this.dirty=!1}return this.mean}return 0}}});const Je={9728:t.FILTER_NEAREST,9729:t.FILTER_LINEAR,9984:t.FILTER_NEAREST_MIPMAP_NEAREST,9985:t.FILTER_LINEAR_MIPMAP_NEAREST,9986:t.FILTER_NEAREST_MIPMAP_LINEAR,9987:t.FILTER_LINEAR_MIPMAP_LINEAR},Ke={33648:t.ADDRESS_MIRRORED_REPEAT,33071:t.ADDRESS_CLAMP_TO_EDGE,10487:t.ADDRESS_REPEAT};class Qe{constructor(t){this._image={width:t.width,height:t.height},this.pcTexture=t}setFilters(t,e){this.pcTexture.minFilter=Je[t],this.pcTexture.magFilter=Je[e]}setWraps(t,e){this.pcTexture.addressU=Ke[t],this.pcTexture.addressV=Ke[e]}getImage(){return this._image}dispose(){this.pcTexture.destroy()}}function Ze(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ts={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},es=Ze(ts);var ss="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{},is={exports:{}};!function(t,e){const{MAX_SAFE_COMPONENT_LENGTH:s,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:r}=ts,a=ss,n=(e=t.exports={}).re=[],o=e.safeRe=[],l=e.src=[],h=e.t={};let c=0;const d="[a-zA-Z0-9-]",u=[["\\s",1],["\\d",r],[d,i]],f=(t,e,s)=>{const i=(t=>{for(const[e,s]of u)t=t.split(`${e}*`).join(`${e}{0,${s}}`).split(`${e}+`).join(`${e}{1,${s}}`);return t})(e),r=c++;a(t,r,e),h[t]=r,l[r]=e,n[r]=new RegExp(e,s?"g":void 0),o[r]=new RegExp(i,s?"g":void 0)};f("NUMERICIDENTIFIER","0|[1-9]\\d*"),f("NUMERICIDENTIFIERLOOSE","\\d+"),f("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${d}*`),f("MAINVERSION",`(${l[h.NUMERICIDENTIFIER]})\\.(${l[h.NUMERICIDENTIFIER]})\\.(${l[h.NUMERICIDENTIFIER]})`),f("MAINVERSIONLOOSE",`(${l[h.NUMERICIDENTIFIERLOOSE]})\\.(${l[h.NUMERICIDENTIFIERLOOSE]})\\.(${l[h.NUMERICIDENTIFIERLOOSE]})`),f("PRERELEASEIDENTIFIER",`(?:${l[h.NUMERICIDENTIFIER]}|${l[h.NONNUMERICIDENTIFIER]})`),f("PRERELEASEIDENTIFIERLOOSE",`(?:${l[h.NUMERICIDENTIFIERLOOSE]}|${l[h.NONNUMERICIDENTIFIER]})`),f("PRERELEASE",`(?:-(${l[h.PRERELEASEIDENTIFIER]}(?:\\.${l[h.PRERELEASEIDENTIFIER]})*))`),f("PRERELEASELOOSE",`(?:-?(${l[h.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[h.PRERELEASEIDENTIFIERLOOSE]})*))`),f("BUILDIDENTIFIER",`${d}+`),f("BUILD",`(?:\\+(${l[h.BUILDIDENTIFIER]}(?:\\.${l[h.BUILDIDENTIFIER]})*))`),f("FULLPLAIN",`v?${l[h.MAINVERSION]}${l[h.PRERELEASE]}?${l[h.BUILD]}?`),f("FULL",`^${l[h.FULLPLAIN]}$`),f("LOOSEPLAIN",`[v=\\s]*${l[h.MAINVERSIONLOOSE]}${l[h.PRERELEASELOOSE]}?${l[h.BUILD]}?`),f("LOOSE",`^${l[h.LOOSEPLAIN]}$`),f("GTLT","((?:<|>)?=?)"),f("XRANGEIDENTIFIERLOOSE",`${l[h.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),f("XRANGEIDENTIFIER",`${l[h.NUMERICIDENTIFIER]}|x|X|\\*`),f("XRANGEPLAIN",`[v=\\s]*(${l[h.XRANGEIDENTIFIER]})(?:\\.(${l[h.XRANGEIDENTIFIER]})(?:\\.(${l[h.XRANGEIDENTIFIER]})(?:${l[h.PRERELEASE]})?${l[h.BUILD]}?)?)?`),f("XRANGEPLAINLOOSE",`[v=\\s]*(${l[h.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[h.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[h.XRANGEIDENTIFIERLOOSE]})(?:${l[h.PRERELEASELOOSE]})?${l[h.BUILD]}?)?)?`),f("XRANGE",`^${l[h.GTLT]}\\s*${l[h.XRANGEPLAIN]}$`),f("XRANGELOOSE",`^${l[h.GTLT]}\\s*${l[h.XRANGEPLAINLOOSE]}$`),f("COERCE",`(^|[^\\d])(\\d{1,${s}})(?:\\.(\\d{1,${s}}))?(?:\\.(\\d{1,${s}}))?(?:$|[^\\d])`),f("COERCERTL",l[h.COERCE],!0),f("LONETILDE","(?:~>?)"),f("TILDETRIM",`(\\s*)${l[h.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",f("TILDE",`^${l[h.LONETILDE]}${l[h.XRANGEPLAIN]}$`),f("TILDELOOSE",`^${l[h.LONETILDE]}${l[h.XRANGEPLAINLOOSE]}$`),f("LONECARET","(?:\\^)"),f("CARETTRIM",`(\\s*)${l[h.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",f("CARET",`^${l[h.LONECARET]}${l[h.XRANGEPLAIN]}$`),f("CARETLOOSE",`^${l[h.LONECARET]}${l[h.XRANGEPLAINLOOSE]}$`),f("COMPARATORLOOSE",`^${l[h.GTLT]}\\s*(${l[h.LOOSEPLAIN]})$|^$`),f("COMPARATOR",`^${l[h.GTLT]}\\s*(${l[h.FULLPLAIN]})$|^$`),f("COMPARATORTRIM",`(\\s*)${l[h.GTLT]}\\s*(${l[h.LOOSEPLAIN]}|${l[h.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",f("HYPHENRANGE",`^\\s*(${l[h.XRANGEPLAIN]})\\s+-\\s+(${l[h.XRANGEPLAIN]})\\s*$`),f("HYPHENRANGELOOSE",`^\\s*(${l[h.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[h.XRANGEPLAINLOOSE]})\\s*$`),f("STAR","(<|>)?=?\\s*\\*"),f("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),f("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(is,is.exports);var rs=is.exports;const as=Object.freeze({loose:!0}),ns=Object.freeze({});var os=t=>t?"object"!=typeof t?as:t:ns;const ls=/^[0-9]+$/,hs=(t,e)=>{const s=ls.test(t),i=ls.test(e);return s&&i&&(t=+t,e=+e),t===e?0:s&&!i?-1:i&&!s?1:t<e?-1:1};var cs={compareIdentifiers:hs,rcompareIdentifiers:(t,e)=>hs(e,t)};const ds=ss,{MAX_LENGTH:us,MAX_SAFE_INTEGER:fs}=ts,{safeRe:ms,t:ps}=rs,gs=os,{compareIdentifiers:xs}=cs;var ws=class t{constructor(e,s){if(s=gs(s),e instanceof t){if(e.loose===!!s.loose&&e.includePrerelease===!!s.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>us)throw new TypeError(`version is longer than ${us} characters`);ds("SemVer",e,s),this.options=s,this.loose=!!s.loose,this.includePrerelease=!!s.includePrerelease;const i=e.trim().match(s.loose?ms[ps.LOOSE]:ms[ps.FULL]);if(!i)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>fs||this.major<0)throw new TypeError("Invalid major version");if(this.minor>fs||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>fs||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map((t=>{if(/^[0-9]+$/.test(t)){const e=+t;if(e>=0&&e<fs)return e}return t})):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(ds("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if("string"==typeof e&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),xs(this.major,e.major)||xs(this.minor,e.minor)||xs(this.patch,e.patch)}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let s=0;do{const t=this.prerelease[s],i=e.prerelease[s];if(ds("prerelease compare",s,t,i),void 0===t&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===t)return-1;if(t!==i)return xs(t,i)}while(++s)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let s=0;do{const t=this.build[s],i=e.build[s];if(ds("prerelease compare",s,t,i),void 0===t&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===t)return-1;if(t!==i)return xs(t,i)}while(++s)}inc(t,e,s){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e,s);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e,s);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e,s),this.inc("pre",e,s);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",e,s),this.inc("pre",e,s);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const t=Number(s)?1:0;if(!e&&!1===s)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[t];else{let i=this.prerelease.length;for(;--i>=0;)"number"==typeof this.prerelease[i]&&(this.prerelease[i]++,i=-2);if(-1===i){if(e===this.prerelease.join(".")&&!1===s)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(t)}}if(e){let i=[e,t];!1===s&&(i=[e]),0===xs(this.prerelease[0],e)?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};const bs=ws;var ys=(t,e,s=!1)=>{if(t instanceof bs)return t;try{return new bs(t,e)}catch(t){if(!s)return null;throw t}};const vs=ys;var Is=Ze(((t,e)=>{const s=vs(t,e);return s?s.version:null}));const As=ws,Es=ys,{safeRe:Ss,t:ks}=rs;var Ts,Rs,Cs=Ze(((t,e)=>{if(t instanceof As)return t;if("number"==typeof t&&(t=String(t)),"string"!=typeof t)return null;let s=null;if((e=e||{}).rtl){let e;for(;(e=Ss[ks.COERCERTL].exec(t))&&(!s||s.index+s[0].length!==t.length);)s&&e.index+e[0].length===s.index+s[0].length||(s=e),Ss[ks.COERCERTL].lastIndex=e.index+e[1].length+e[2].length;Ss[ks.COERCERTL].lastIndex=-1}else s=t.match(Ss[ks.COERCE]);return null===s?null:Es(`${s[2]}.${s[3]||"0"}.${s[4]||"0"}`,e)}));var Ms=Fs;function Fs(t){var e=this;if(e instanceof Fs||(e=new Fs),e.tail=null,e.head=null,e.length=0,t&&"function"==typeof t.forEach)t.forEach((function(t){e.push(t)}));else if(arguments.length>0)for(var s=0,i=arguments.length;s<i;s++)e.push(arguments[s]);return e}function Ys(t,e,s){var i=e===t.head?new Ls(s,null,e,t):new Ls(s,e,e.next,t);return null===i.next&&(t.tail=i),null===i.prev&&(t.head=i),t.length++,i}function Xs(t,e){t.tail=new Ls(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function Ns(t,e){t.head=new Ls(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function Ls(t,e,s,i){if(!(this instanceof Ls))return new Ls(t,e,s,i);this.list=i,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,s?(s.prev=this,this.next=s):this.next=null}Fs.Node=Ls,Fs.create=Fs,Fs.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,s=t.prev;return e&&(e.prev=s),s&&(s.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=s),t.list.length--,t.next=null,t.prev=null,t.list=null,e},Fs.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}},Fs.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}},Fs.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)Xs(this,arguments[t]);return this.length},Fs.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)Ns(this,arguments[t]);return this.length},Fs.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}},Fs.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}},Fs.prototype.forEach=function(t,e){e=e||this;for(var s=this.head,i=0;null!==s;i++)t.call(e,s.value,i,this),s=s.next},Fs.prototype.forEachReverse=function(t,e){e=e||this;for(var s=this.tail,i=this.length-1;null!==s;i--)t.call(e,s.value,i,this),s=s.prev},Fs.prototype.get=function(t){for(var e=0,s=this.head;null!==s&&e<t;e++)s=s.next;if(e===t&&null!==s)return s.value},Fs.prototype.getReverse=function(t){for(var e=0,s=this.tail;null!==s&&e<t;e++)s=s.prev;if(e===t&&null!==s)return s.value},Fs.prototype.map=function(t,e){e=e||this;for(var s=new Fs,i=this.head;null!==i;)s.push(t.call(e,i.value,this)),i=i.next;return s},Fs.prototype.mapReverse=function(t,e){e=e||this;for(var s=new Fs,i=this.tail;null!==i;)s.push(t.call(e,i.value,this)),i=i.prev;return s},Fs.prototype.reduce=function(t,e){var s,i=this.head;if(arguments.length>1)s=e;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");i=this.head.next,s=this.head.value}for(var r=0;null!==i;r++)s=t(s,i.value,r),i=i.next;return s},Fs.prototype.reduceReverse=function(t,e){var s,i=this.tail;if(arguments.length>1)s=e;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");i=this.tail.prev,s=this.tail.value}for(var r=this.length-1;null!==i;r--)s=t(s,i.value,r),i=i.prev;return s},Fs.prototype.toArray=function(){for(var t=new Array(this.length),e=0,s=this.head;null!==s;e++)t[e]=s.value,s=s.next;return t},Fs.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,s=this.tail;null!==s;e++)t[e]=s.value,s=s.prev;return t},Fs.prototype.slice=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var s=new Fs;if(e<t||e<0)return s;t<0&&(t=0),e>this.length&&(e=this.length);for(var i=0,r=this.head;null!==r&&i<t;i++)r=r.next;for(;null!==r&&i<e;i++,r=r.next)s.push(r.value);return s},Fs.prototype.sliceReverse=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var s=new Fs;if(e<t||e<0)return s;t<0&&(t=0),e>this.length&&(e=this.length);for(var i=this.length,r=this.tail;null!==r&&i>e;i--)r=r.prev;for(;null!==r&&i>t;i--,r=r.prev)s.push(r.value);return s},Fs.prototype.splice=function(t,e,...s){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var i=0,r=this.head;null!==r&&i<t;i++)r=r.next;var a=[];for(i=0;r&&i<e;i++)a.push(r.value),r=this.removeNode(r);null===r&&(r=this.tail),r!==this.head&&r!==this.tail&&(r=r.prev);for(i=0;i<s.length;i++)r=Ys(this,r,s[i]);return a},Fs.prototype.reverse=function(){for(var t=this.head,e=this.tail,s=t;null!==s;s=s.prev){var i=s.prev;s.prev=s.next,s.next=i}return this.head=e,this.tail=t,this};try{(Rs||(Rs=1,Ts=function(t){t.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),Ts)(Fs)}catch(t){}const Ps=Ms,_s=Symbol("max"),Bs=Symbol("length"),Ds=Symbol("lengthCalculator"),Os=Symbol("allowStale"),$s=Symbol("maxAge"),Vs=Symbol("dispose"),Us=Symbol("noDisposeOnSet"),qs=Symbol("lruList"),Ws=Symbol("cache"),zs=Symbol("updateAgeOnGet"),Gs=()=>1;const js=(t,e,s)=>{const i=t[Ws].get(e);if(i){const e=i.value;if(Hs(t,e)){if(Ks(t,i),!t[Os])return}else s&&(t[zs]&&(i.value.now=Date.now()),t[qs].unshiftNode(i));return e.value}},Hs=(t,e)=>{if(!e||!e.maxAge&&!t[$s])return!1;const s=Date.now()-e.now;return e.maxAge?s>e.maxAge:t[$s]&&s>t[$s]},Js=t=>{if(t[Bs]>t[_s])for(let e=t[qs].tail;t[Bs]>t[_s]&&null!==e;){const s=e.prev;Ks(t,e),e=s}},Ks=(t,e)=>{if(e){const s=e.value;t[Vs]&&t[Vs](s.key,s.value),t[Bs]-=s.length,t[Ws].delete(s.key),t[qs].removeNode(e)}};class Qs{constructor(t,e,s,i,r){this.key=t,this.value=e,this.length=s,this.now=i,this.maxAge=r||0}}const Zs=(t,e,s,i)=>{let r=s.value;Hs(t,r)&&(Ks(t,s),t[Os]||(r=void 0)),r&&e.call(i,r.value,r.key,t)};var ti=class{constructor(t){if("number"==typeof t&&(t={max:t}),t||(t={}),t.max&&("number"!=typeof t.max||t.max<0))throw new TypeError("max must be a non-negative number");this[_s]=t.max||1/0;const e=t.length||Gs;if(this[Ds]="function"!=typeof e?Gs:e,this[Os]=t.stale||!1,t.maxAge&&"number"!=typeof t.maxAge)throw new TypeError("maxAge must be a number");this[$s]=t.maxAge||0,this[Vs]=t.dispose,this[Us]=t.noDisposeOnSet||!1,this[zs]=t.updateAgeOnGet||!1,this.reset()}set max(t){if("number"!=typeof t||t<0)throw new TypeError("max must be a non-negative number");this[_s]=t||1/0,Js(this)}get max(){return this[_s]}set allowStale(t){this[Os]=!!t}get allowStale(){return this[Os]}set maxAge(t){if("number"!=typeof t)throw new TypeError("maxAge must be a non-negative number");this[$s]=t,Js(this)}get maxAge(){return this[$s]}set lengthCalculator(t){"function"!=typeof t&&(t=Gs),t!==this[Ds]&&(this[Ds]=t,this[Bs]=0,this[qs].forEach((t=>{t.length=this[Ds](t.value,t.key),this[Bs]+=t.length}))),Js(this)}get lengthCalculator(){return this[Ds]}get length(){return this[Bs]}get itemCount(){return this[qs].length}rforEach(t,e){e=e||this;for(let s=this[qs].tail;null!==s;){const i=s.prev;Zs(this,t,s,e),s=i}}forEach(t,e){e=e||this;for(let s=this[qs].head;null!==s;){const i=s.next;Zs(this,t,s,e),s=i}}keys(){return this[qs].toArray().map((t=>t.key))}values(){return this[qs].toArray().map((t=>t.value))}reset(){this[Vs]&&this[qs]&&this[qs].length&&this[qs].forEach((t=>this[Vs](t.key,t.value))),this[Ws]=new Map,this[qs]=new Ps,this[Bs]=0}dump(){return this[qs].map((t=>!Hs(this,t)&&{k:t.key,v:t.value,e:t.now+(t.maxAge||0)})).toArray().filter((t=>t))}dumpLru(){return this[qs]}set(t,e,s){if((s=s||this[$s])&&"number"!=typeof s)throw new TypeError("maxAge must be a number");const i=s?Date.now():0,r=this[Ds](e,t);if(this[Ws].has(t)){if(r>this[_s])return Ks(this,this[Ws].get(t)),!1;const a=this[Ws].get(t).value;return this[Vs]&&(this[Us]||this[Vs](t,a.value)),a.now=i,a.maxAge=s,a.value=e,this[Bs]+=r-a.length,a.length=r,this.get(t),Js(this),!0}const a=new Qs(t,e,r,i,s);return a.length>this[_s]?(this[Vs]&&this[Vs](t,e),!1):(this[Bs]+=a.length,this[qs].unshift(a),this[Ws].set(t,this[qs].head),Js(this),!0)}has(t){if(!this[Ws].has(t))return!1;const e=this[Ws].get(t).value;return!Hs(this,e)}get(t){return js(this,t,!0)}peek(t){return js(this,t,!1)}pop(){const t=this[qs].tail;return t?(Ks(this,t),t.value):null}del(t){Ks(this,this[Ws].get(t))}load(t){this.reset();const e=Date.now();for(let s=t.length-1;s>=0;s--){const i=t[s],r=i.e||0;if(0===r)this.set(i.k,i.v);else{const t=r-e;t>0&&this.set(i.k,i.v,t)}}}prune(){this[Ws].forEach(((t,e)=>js(this,e,!1)))}};const ei=ws;var si=(t,e,s)=>new ei(t,s).compare(new ei(e,s));const ii=si;const ri=si;const ai=si;const ni=si;const oi=si;const li=si;const hi=(t,e,s)=>0===ii(t,e,s),ci=(t,e,s)=>0!==ri(t,e,s),di=(t,e,s)=>ai(t,e,s)>0,ui=(t,e,s)=>ni(t,e,s)>=0,fi=(t,e,s)=>oi(t,e,s)<0,mi=(t,e,s)=>li(t,e,s)<=0;var pi,gi,xi,wi,bi=(t,e,s,i)=>{switch(e){case"===":return"object"==typeof t&&(t=t.version),"object"==typeof s&&(s=s.version),t===s;case"!==":return"object"==typeof t&&(t=t.version),"object"==typeof s&&(s=s.version),t!==s;case"":case"=":case"==":return hi(t,s,i);case"!=":return ci(t,s,i);case">":return di(t,s,i);case">=":return ui(t,s,i);case"<":return fi(t,s,i);case"<=":return mi(t,s,i);default:throw new TypeError(`Invalid operator: ${e}`)}};function yi(){if(wi)return xi;wi=1;class t{constructor(e,r){if(r=s(r),e instanceof t)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new t(e.raw,r);if(e instanceof i)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map((t=>this.parseRange(t.trim()))).filter((t=>t.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const t=this.set[0];if(this.set=this.set.filter((t=>!f(t[0]))),0===this.set.length)this.set=[t];else if(this.set.length>1)for(const t of this.set)if(1===t.length&&m(t[0])){this.set=[t];break}}this.format()}format(){return this.range=this.set.map((t=>t.join(" ").trim())).join("||").trim(),this.range}toString(){return this.range}parseRange(t){const s=((this.options.includePrerelease&&d)|(this.options.loose&&u))+":"+t,a=e.get(s);if(a)return a;const m=this.options.loose,p=m?n[o.HYPHENRANGELOOSE]:n[o.HYPHENRANGE];t=t.replace(p,k(this.options.includePrerelease)),r("hyphen replace",t),t=t.replace(n[o.COMPARATORTRIM],l),r("comparator trim",t),t=t.replace(n[o.TILDETRIM],h),r("tilde trim",t),t=t.replace(n[o.CARETTRIM],c),r("caret trim",t);let x=t.split(" ").map((t=>g(t,this.options))).join(" ").split(/\s+/).map((t=>S(t,this.options)));m&&(x=x.filter((t=>(r("loose invalid filter",t,this.options),!!t.match(n[o.COMPARATORLOOSE]))))),r("range list",x);const w=new Map,b=x.map((t=>new i(t,this.options)));for(const t of b){if(f(t))return[t];w.set(t.value,t)}w.size>1&&w.has("")&&w.delete("");const y=[...w.values()];return e.set(s,y),y}intersects(e,s){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some((t=>p(t,s)&&e.set.some((e=>p(e,s)&&t.every((t=>e.every((e=>t.intersects(e,s)))))))))}test(t){if(!t)return!1;if("string"==typeof t)try{t=new a(t,this.options)}catch(t){return!1}for(let e=0;e<this.set.length;e++)if(T(this.set[e],t,this.options))return!0;return!1}}xi=t;const e=new ti({max:1e3}),s=os,i=function(){if(gi)return pi;gi=1;const t=Symbol("SemVer ANY");class e{static get ANY(){return t}constructor(i,r){if(r=s(r),i instanceof e){if(i.loose===!!r.loose)return i;i=i.value}i=i.trim().split(/\s+/).join(" "),n("comparator",i,r),this.options=r,this.loose=!!r.loose,this.parse(i),this.semver===t?this.value="":this.value=this.operator+this.semver.version,n("comp",this)}parse(e){const s=this.options.loose?i[r.COMPARATORLOOSE]:i[r.COMPARATOR],a=e.match(s);if(!a)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==a[1]?a[1]:"","="===this.operator&&(this.operator=""),a[2]?this.semver=new o(a[2],this.options.loose):this.semver=t}toString(){return this.value}test(e){if(n("Comparator.test",e,this.options.loose),this.semver===t||e===t)return!0;if("string"==typeof e)try{e=new o(e,this.options)}catch(t){return!1}return a(e,this.operator,this.semver,this.options)}intersects(t,i){if(!(t instanceof e))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new l(t.value,i).test(this.value):""===t.operator?""===t.value||new l(this.value,i).test(t.semver):!((i=s(i)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===t.value)||!i.includePrerelease&&(this.value.startsWith("<0.0.0")||t.value.startsWith("<0.0.0"))||(!this.operator.startsWith(">")||!t.operator.startsWith(">"))&&(!this.operator.startsWith("<")||!t.operator.startsWith("<"))&&(this.semver.version!==t.semver.version||!this.operator.includes("=")||!t.operator.includes("="))&&!(a(this.semver,"<",t.semver,i)&&this.operator.startsWith(">")&&t.operator.startsWith("<"))&&!(a(this.semver,">",t.semver,i)&&this.operator.startsWith("<")&&t.operator.startsWith(">")))}}pi=e;const s=os,{safeRe:i,t:r}=rs,a=bi,n=ss,o=ws,l=yi();return pi}(),r=ss,a=ws,{safeRe:n,t:o,comparatorTrimReplace:l,tildeTrimReplace:h,caretTrimReplace:c}=rs,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:u}=ts,f=t=>"<0.0.0-0"===t.value,m=t=>""===t.value,p=(t,e)=>{let s=!0;const i=t.slice();let r=i.pop();for(;s&&i.length;)s=i.every((t=>r.intersects(t,e))),r=i.pop();return s},g=(t,e)=>(r("comp",t,e),t=y(t,e),r("caret",t),t=w(t,e),r("tildes",t),t=I(t,e),r("xrange",t),t=E(t,e),r("stars",t),t),x=t=>!t||"x"===t.toLowerCase()||"*"===t,w=(t,e)=>t.trim().split(/\s+/).map((t=>b(t,e))).join(" "),b=(t,e)=>{const s=e.loose?n[o.TILDELOOSE]:n[o.TILDE];return t.replace(s,((e,s,i,a,n)=>{let o;return r("tilde",t,e,s,i,a,n),x(s)?o="":x(i)?o=`>=${s}.0.0 <${+s+1}.0.0-0`:x(a)?o=`>=${s}.${i}.0 <${s}.${+i+1}.0-0`:n?(r("replaceTilde pr",n),o=`>=${s}.${i}.${a}-${n} <${s}.${+i+1}.0-0`):o=`>=${s}.${i}.${a} <${s}.${+i+1}.0-0`,r("tilde return",o),o}))},y=(t,e)=>t.trim().split(/\s+/).map((t=>v(t,e))).join(" "),v=(t,e)=>{r("caret",t,e);const s=e.loose?n[o.CARETLOOSE]:n[o.CARET],i=e.includePrerelease?"-0":"";return t.replace(s,((e,s,a,n,o)=>{let l;return r("caret",t,e,s,a,n,o),x(s)?l="":x(a)?l=`>=${s}.0.0${i} <${+s+1}.0.0-0`:x(n)?l="0"===s?`>=${s}.${a}.0${i} <${s}.${+a+1}.0-0`:`>=${s}.${a}.0${i} <${+s+1}.0.0-0`:o?(r("replaceCaret pr",o),l="0"===s?"0"===a?`>=${s}.${a}.${n}-${o} <${s}.${a}.${+n+1}-0`:`>=${s}.${a}.${n}-${o} <${s}.${+a+1}.0-0`:`>=${s}.${a}.${n}-${o} <${+s+1}.0.0-0`):(r("no pr"),l="0"===s?"0"===a?`>=${s}.${a}.${n}${i} <${s}.${a}.${+n+1}-0`:`>=${s}.${a}.${n}${i} <${s}.${+a+1}.0-0`:`>=${s}.${a}.${n} <${+s+1}.0.0-0`),r("caret return",l),l}))},I=(t,e)=>(r("replaceXRanges",t,e),t.split(/\s+/).map((t=>A(t,e))).join(" ")),A=(t,e)=>{t=t.trim();const s=e.loose?n[o.XRANGELOOSE]:n[o.XRANGE];return t.replace(s,((s,i,a,n,o,l)=>{r("xRange",t,s,i,a,n,o,l);const h=x(a),c=h||x(n),d=c||x(o),u=d;return"="===i&&u&&(i=""),l=e.includePrerelease?"-0":"",h?s=">"===i||"<"===i?"<0.0.0-0":"*":i&&u?(c&&(n=0),o=0,">"===i?(i=">=",c?(a=+a+1,n=0,o=0):(n=+n+1,o=0)):"<="===i&&(i="<",c?a=+a+1:n=+n+1),"<"===i&&(l="-0"),s=`${i+a}.${n}.${o}${l}`):c?s=`>=${a}.0.0${l} <${+a+1}.0.0-0`:d&&(s=`>=${a}.${n}.0${l} <${a}.${+n+1}.0-0`),r("xRange return",s),s}))},E=(t,e)=>(r("replaceStars",t,e),t.trim().replace(n[o.STAR],"")),S=(t,e)=>(r("replaceGTE0",t,e),t.trim().replace(n[e.includePrerelease?o.GTE0PRE:o.GTE0],"")),k=t=>(e,s,i,r,a,n,o,l,h,c,d,u,f)=>`${s=x(i)?"":x(r)?`>=${i}.0.0${t?"-0":""}`:x(a)?`>=${i}.${r}.0${t?"-0":""}`:n?`>=${s}`:`>=${s}${t?"-0":""}`} ${l=x(h)?"":x(c)?`<${+h+1}.0.0-0`:x(d)?`<${h}.${+c+1}.0-0`:u?`<=${h}.${c}.${d}-${u}`:t?`<${h}.${c}.${+d+1}-0`:`<=${l}`}`.trim(),T=(t,e,s)=>{for(let s=0;s<t.length;s++)if(!t[s].test(e))return!1;if(e.prerelease.length&&!s.includePrerelease){for(let s=0;s<t.length;s++)if(r(t[s].semver),t[s].semver!==i.ANY&&t[s].semver.prerelease.length>0){const i=t[s].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0};return xi}const vi=yi();var Ii=(t,e,s)=>{try{e=new vi(e,s)}catch(t){return!1}return e.test(t)},Ai={valid:Is,coerce:Cs,satisfies:Ze(Ii),SEMVER_SPEC_VERSION:es.SEMVER_SPEC_VERSION};const Ei=0,Si=1,ki=2,Ti=[0,1,2,2,3,0];class Ri{constructor(t,e,s,r){let a;if(this._app=t,this._position=new i.Vec3,1===_t.length){a=new _t(e);for(const t of a.pages)t.setTexture(new Qe(r[t.name]))}else a=new _t(e,(t=>new Qe(r[t])));const n=new Ve(new Wt(a));n.scale*=.01;const o=n.readSkeletonData(s);this.skeletonVersion=Ai.valid(Ai.coerce(o.version)),this._spine_3_6_0=Ai.satisfies(this.skeletonVersion,"<=3.6.0"),this._spine_3_7_99=Ai.satisfies(this.skeletonVersion,"<=3.7.99"),this._spine_4_1_X=Ai.satisfies(this.skeletonVersion,"~4.1.23"),this.skeleton=new re(o),this.skeleton.updateWorldTransform(),this.stateData=new St(this.skeleton.data),this.states=[new mt(this.stateData)],this.clipper=new $e,this._node=new i.GraphNode,this._meshes=[],this._meshInstances=[],this._materials={},this._tint={},this._aabb=new i.BoundingBox,this._aabbTempArray=[],this._aabbTempOffset=new i.Vec2,this._aabbTempSize=new i.Vec2,this._renderCounts={vertexCount:0,indexCount:0},this._vertexFormat=null,this._vertexBuffer=null,this._indexBuffer=null,this._priority=0,this._timeScale=1,this._layers=[i.LAYERID_UI],this.init(),this.autoUpdate=!0,this._hidden=!1}destroy(){this.removeFromLayers();for(let t=0;t<this._meshInstances.length;t++)this._meshInstances[t].mesh.vertexBuffer=null,this._meshInstances[t].mesh.indexBuffer.length=0,this._meshInstances[t].material=null;this._vertexBuffer&&(this._vertexBuffer.destroy(),this._vertexBuffer=null),this._indexBuffer&&(this._indexBuffer.destroy(),this._indexBuffer=null),this._meshInstances=[],this.skeleton=null,this.stateData=null,this._materials={},this._node=null}hide(){if(!this._hidden){for(let t=0,e=this._meshInstances.length;t<e;t++)this._meshInstances[t].visible=!1;this._hidden=!0}}show(){if(this._hidden){for(let t=0,e=this._meshInstances.length;t<e;t++)this._meshInstances[t].visible=!0;this._hidden=!1}}init(){this._vertexFormat=new i.VertexFormat(this._app.graphicsDevice,[{semantic:i.SEMANTIC_POSITION,components:2,type:i.TYPE_FLOAT32},{semantic:i.SEMANTIC_NORMAL,components:4,type:i.TYPE_UINT8,normalize:!0},{semantic:i.SEMANTIC_TEXCOORD0,components:2,type:i.TYPE_FLOAT32},{semantic:i.SEMANTIC_COLOR,components:4,type:i.TYPE_UINT8,normalize:!0}]);const t=this.skeleton.drawOrder;for(let e=0,s=t.length;e<s;e++)this.initSlot(t[e])}initSlot(t){t.positions=[],t.uvs=[],t.indices=[],t.vertexColor={},t._active={name:"",type:Ei},this.initAttachment(t)}createMaterial(t){const e=new i.StandardMaterial;if(e.shadingModel=i.SPECULAR_BLINN,e.diffuse=new i.Color(1,1,1),e.emissiveMap=t,e.emissiveMapChannel="rgb",e.emissiveVertexColor=!0,e.emissiveVertexColorChannel="rgb",e.opacityMap=t,e.opacityMapChannel="a",e.opacityVertexColor=!0,e.opacityVertexColorChannel="a",e.depthWrite=!1,e.cull=i.CULLFACE_NONE,e.blendType=i.BLEND_PREMULTIPLIED,this._spine_3_6_0){const t=["gl_FragColor.rgb *= vVertexColor.a;","gl_FragColor.a = dAlpha;"].join("\n");e.chunks.outputAlphaPremulPS=t}return e.update(),e}initAttachment(t){const e=t.attachment;if(e&&(t._active.name=e.name,e instanceof qt?t._active.type=ki:e instanceof $t&&(t._active.type=Si),e.region&&e.region.texture)){const s=e.region.texture.pcTexture;if(s)if(s instanceof i.StandardMaterial)this._materials[s.name]=s,t.material=s.name;else{let e=null;if(s.name?e=s.name:s.getSource()instanceof Image&&(e=s.getSource().getAttribute("src")),e){if(void 0===this._materials[e]){const t=this.createMaterial(s);this._materials[e]=t}t.material=e}}}}updateSlot(t,e){const s=t.attachment,i=s.name,r=s instanceof qt?ki:s instanceof $t?Si:Ei;t._active.name===i&&t._active.type===r||this.initAttachment(t),t.positions.length=0,s instanceof qt?this._spine_4_1_X?s.computeWorldVertices(t,t.positions,0,2):s.computeWorldVertices(t.bone,t.positions,0,2):s instanceof $t&&s.computeWorldVertices(t,0,s.worldVerticesLength,t.positions,0,2);const n=this._tint[i];t.vertexColor={r:Math.round(255*t.color.r*(n?n.r:1)),g:Math.round(255*t.color.g*(n?n.g:1)),b:Math.round(255*t.color.b*(n?n.b:1)),a:Math.round(255*t.color.a*(n?n.a:1))};const o=s.triangles||Ti;let l,h;if(e.isClipping()){const i=!1;e.clipTriangles(t.positions,0,o,o.length,s.uvs,a.WHITE,a.WHITE,i),t.positions.length=0,t.uvs.length=0;const r=8;for(h=e.clippedVertices.length,l=0;l<h;l+=r)t.positions.push(e.clippedVertices[l],e.clippedVertices[l+1]),t.uvs.push(e.clippedVertices[l+6],1-e.clippedVertices[l+7]);t.indices=e.clippedTriangles.slice()}else{for(t.uvs.length=0,h=t.positions.length,l=0;l<h;l+=2)t.uvs.push(s.uvs[l],1-s.uvs[l+1]);t.indices=o}this._renderCounts.vertexCount+=t.positions.length/2,this._renderCounts.indexCount+=t.indices.length}updateSkeleton(t){this._renderCounts.vertexCount=0,this._renderCounts.indexCount=0;const e=this.clipper;let s=!1;s=!0;const i=this.skeleton.drawOrder,r=i.length;for(let t=0;t<r;t++){const s=i[t];if(!this._spine_3_7_99&&!s.bone.active){e.clipEndWithSlot(s);continue}0;const r=s.getAttachment();r instanceof Tt?e.clipStart(s,r):r instanceof qt||r instanceof $t?this.updateSlot(s,e):this._spine_3_7_99||e.clipEndWithSlot(s)}}render(){if(this._meshInstances.forEach((t=>{t.material=null})),this.removeFromLayers(),this._meshes=[],this._meshInstances.length=0,this._renderCounts.indexCount>0&&this._renderCounts.vertexCount>0){this.skeleton.getBounds(this._aabbTempOffset,this._aabbTempSize,this._aabbTempArray),this._aabb.center=new i.Vec3(this._aabbTempOffset.x,this._aabbTempOffset.y,0),this._aabb.halfExtents=new i.Vec3(.5*this._aabbTempSize.x,.5*this._aabbTempSize.y,0),(!this._vertexBuffer||this._vertexBuffer.getNumVertices()<this._renderCounts.vertexCount)&&(this._vertexBuffer&&this._vertexBuffer.destroy(),this._vertexBuffer=new i.VertexBuffer(this._app.graphicsDevice,this._vertexFormat,this._renderCounts.vertexCount)),(!this._indexBuffer||this._indexBuffer.getNumIndices()<this._renderCounts.indexCount)&&(this._indexBuffer&&this._indexBuffer.destroy(),this._indexBuffer=new i.IndexBuffer(this._app.graphicsDevice,i.INDEXFORMAT_UINT16,this._renderCounts.indexCount));let t=null,e=0,s=0;const r=new i.VertexIterator(this._vertexBuffer),a=new Uint16Array(this._indexBuffer.lock());let n=0,o=0;const l=this.skeleton.drawOrder,h=l.length;for(let c=0;c<h;c++){const h=l[c];if(h.attachment&&h.material&&h.positions.length>0&&h.indices.length>0){t&&t!==h.material&&(this.SubmitBatch(e,s,t),t=h.material,e=n,s=0),t=h.material;const l=h.positions,c=h.vertexColor.r,d=h.vertexColor.g,u=h.vertexColor.b,f=h.vertexColor.a,m=h.uvs;let p;const g=l.length/2;for(p=0;p<g;p++)r.element[i.SEMANTIC_POSITION].set(l[2*p],l[2*p+1]),r.element[i.SEMANTIC_NORMAL].set(0,255,0,0),r.element[i.SEMANTIC_COLOR].set(c,d,u,f),r.element[i.SEMANTIC_TEXCOORD0].set(m[2*p],1-m[2*p+1]),r.next();const x=h.indices,w=x.length;for(p=0;p<w;p++)a[n+p]=x[p]+o;s+=w,n+=w,o+=g}}r.end(),this._indexBuffer.unlock(),this.SubmitBatch(e,s,t)}this.addToLayers()}SubmitBatch(t,e,s){if(e>0){const r=new i.Mesh(this._app.graphicsDevice);r.vertexBuffer=this._vertexBuffer,r.indexBuffer[0]=this._indexBuffer,r.primitive[0].type=i.PRIMITIVE_TRIANGLES,r.primitive[0].base=t,r.primitive[0].count=e,r.primitive[0].indexed=!0,r.aabb=this._aabb,this._meshes.push(r);const a=new i.MeshInstance(this._node,r,this._materials[s]);a.drawOrder=this.priority+this._meshInstances.length,a.visible=!this._hidden,this._meshInstances.push(a)}}update(t){if(this._hidden)return;let e;t*=this._timeScale;const s=this.states.length;for(e=0;e<s;e++)this.states[e].update(t);for(e=0;e<s;e++)this.states[e].apply(this.skeleton);this.autoUpdate&&this.skeleton.updateWorldTransform(),this.updateSkeleton(),this.render()}setPosition(t){this._position.copy(t)}setTint(t,e){this._tint[t]=e}removeFromLayers(){if(this._meshInstances.length)for(let t=0;t<this._layers.length;t++){const e=this._app.scene.layers.getLayerById(this._layers[t]);e&&e.removeMeshInstances(this._meshInstances)}}addToLayers(){if(this._meshInstances.length)for(let t=0;t<this._layers.length;t++){const e=this._app.scene.layers.getLayerById(this._layers[t]);e&&e.addMeshInstances(this._meshInstances)}}get state(){return this.states[0]}set priority(t){this._priority=t}get priority(){return this._priority}set timeScale(t){this._timeScale=t}get timeScale(){return this._timeScale}set layers(t){this.removeFromLayers(),this._layers=t||[],this.addToLayers()}get layers(){return this._layers}}class Ci extends t.Component{constructor(t,e){super(t,e),this.on("set_atlasAsset",this.onSetAsset,this),this.on("set_textureAssets",this.onSetAssets,this),this.on("set_skeletonAsset",this.onSetAsset,this),this.on("set_atlasData",this.onSetResource,this),this.on("set_textures",this.onSetResource,this),this.on("set_skeletonData",this.onSetResource,this)}_createSpine(){this.data.spine&&(this.data.spine.destroy(),this.data.spine=null);const e={};for(let s=0,i=this.textureAssets.length;s<i;s++){const i=this.system.app.assets.get(this.textureAssets[s]);let r=i.name?i.name:i.file?i.file.filename:null;r||(r=t.path.getBasename(i.file.url));const a=r.indexOf("?");-1!==a&&(r=r.substring(0,a)),e[r]=i.resource}this.data.spine=new Ri(this.system.app,this.atlasData,this.skeletonData,e),this.state=this.data.spine.state,this.states=this.data.spine.states,this.skeleton=this.data.spine.skeleton,this.entity.addChild(this.data.spine._node)}_onAssetReady({type:t,resource:e}){"texture"===t&&this.textures.push(e),"json"===t&&(this.skeletonData=e),"text"===t&&(this.atlasData=e)}_onAssetAdd(t){t.off("change",this.onAssetChanged,this),t.on("change",this.onAssetChanged,this),t.off("remove",this.onAssetRemoved,this),t.on("remove",this.onAssetRemoved,this),t.ready(this._onAssetReady,this),this.system.app.assets.load(t)}onSetResource(){this.data.atlasData&&this.data.textures.length&&this.data.skeletonData&&this._createSpine()}onSetAsset(e,s,i){const r=this.system.app.assets;let a=null;if(s&&(a=r.get(s),a&&(a.off("change",this.onAssetChanged),a.off("remove",this.onAssetRemoved))),i){let s=i;i instanceof t.Asset&&(s=i.id,this.data[e]=s),a=r.get(s),a?this._onAssetAdd(a):r.on(`add:${s}`)}}onSetAssets(e,s,i){const r=this.system.app.assets;let a,n,o=null;if(s.length)for(a=0,n=s.length;a<n;a++)o=r.get(s[a]),o&&(o.off("change",this.onAssetChanged),o.off("remove",this.onAssetRemoved));if(i&&i.length){const e=i.map((e=>e instanceof t.Asset?e.id:e));for(a=0,n=i.length;a<n;a++)o=r.get(e[a]),o?this._onAssetAdd(o):r.on(`add:${e[a]}`)}}onAssetChanged(t,e,s,i){}onAssetRemoved(t){}onEnable(){t.Component.prototype.onEnable.call(this);const e=this.data.spine;e&&e.addToLayers()}onDisable(){t.Component.prototype.onDisable.call(this);const e=this.data.spine;e&&e.removeFromLayers()}hide(){this.data.spine&&this.data.spine.hide()}show(){this.data.spine&&this.data.spine.show()}removeComponent(){let t;if(this.atlasAsset&&(t=this.system.app.assets.get(this.atlasAsset),t&&(t.off("change",this.onAssetChanged),t.off("remove",this.onAssetRemoved))),this.skeletonAsset&&(t=this.system.app.assets.get(this.skeletonAsset),t&&(t.off("change",this.onAssetChanged),t.off("remove",this.onAssetRemoved))),this.textureAssets&&this.textureAssets.length)for(let e=0;e<this.textureAssets.length;e++)t=this.system.app.assets.get(this.textureAssets[e]),t&&(t.off("change",this.onAssetChanged),t.off("remove",this.onAssetRemoved))}}class Mi{constructor(){this.enabled=!0,this.atlasAsset=null,this.textureAssets=[],this.skeletonAsset=null,this.speed=1,this.spine=null,this.atlasData=null,this.textures=[],this.skeletonData=null}}class Fi extends t.ComponentSystem{constructor(t){super(t),this.id="spine",this.ComponentType=Ci,this.DataType=Mi,this.schema=["enabled","atlasAsset","textureAssets","skeletonAsset","atlasData","textures","skeletonData","speed","spine"],this.on("beforeremove",this.onBeforeRemove,this),this.app.systems.on("update",this.onUpdate,this)}initializeComponentData(t,e,s){s=["enabled","atlasAsset","textureAssets","skeletonAsset","atlasData","textures","skeletonData","spine"],super.initializeComponentData(t,e,s)}onBeforeRemove(t,e){const s=t.spine.data;s.spine&&s.spine.destroy(),t.spine.removeComponent()}onUpdate(t){const e=this.store;for(const s in e)if(e.hasOwnProperty(s)){const i=e[s],r=i.data;r.enabled&&i.entity.enabled&&r.spine&&(r.spine.setPosition(i.entity.getPosition()),r.spine.update(r.speed*t))}}}return function(){if(i.Application.registerPlugin){i.Application.registerPlugin("spine",(function(t){new Fi(t)}))}else{var t=i.Application.getApplication(),e=new Fi(t);t.systems.add(e)}}(),He}(pc);
