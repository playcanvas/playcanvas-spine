"use strict";var t,e,s;pc.extend(pc,(((t=function(t){pc.ComponentSystem.call(this,t),this.id="spine",this.ComponentType=pc.SpineComponent,this.DataType=pc.SpineComponentData,this.schema=["enabled","atlasAsset","textureAssets","skeletonAsset","atlasData","textures","skeletonData","speed","spine"],this.on("beforeremove",this.onBeforeRemove,this),this.app.systems.on("update",this.onUpdate,this)}).prototype=Object.create(pc.ComponentSystem.prototype)).constructor=t,Object.assign(t.prototype,{initializeComponentData:function(t,e,s){s=["enabled","atlasAsset","textureAssets","skeletonAsset","atlasData","textures","skeletonData","spine"],pc.ComponentSystem.prototype.initializeComponentData.call(this.system,t,e,s)},onBeforeRemove:function(t,e){var s=t.spine.data;s.spine&&s.spine.destroy(),t.spine.removeComponent()},onUpdate:function(t){var e=this.store;for(var s in e)if(e.hasOwnProperty(s)){var i=e[s],r=i.data;r.enabled&&i.entity.enabled&&r.spine&&(r.spine.setPosition(i.entity.getPosition()),r.spine.update(r.speed*t))}}}),{SpineComponentSystem:t})),pc.extend(pc,(((e=function(t,e){pc.Component.call(this,t,e),this.on("set_atlasAsset",this.onSetAsset,this),this.on("set_textureAssets",this.onSetAssets,this),this.on("set_skeletonAsset",this.onSetAsset,this),this.on("set_atlasData",this.onSetResource,this),this.on("set_textures",this.onSetResource,this),this.on("set_skeletonData",this.onSetResource,this)}).prototype=Object.create(pc.Component.prototype)).constructor=e,Object.assign(e.prototype,{_createSpine:function(){this.data.spine&&(this.data.spine.destroy(),this.data.spine=null);for(var t={},e=0,s=this.textureAssets.length;e<s;e++){var i=this.system.app.assets.get(this.textureAssets[e]),r=i.name?i.name:i.file?i.file.filename:null;r||(r=pc.path.getBasename(i.file.url));var n=r.indexOf("?");-1!==n&&(r=r.substring(0,n)),t[r]=i.resource}this.data.spine=new pc.Spine(this.system.app,this.atlasData,this.skeletonData,t),this.state=this.data.spine.state,this.states=this.data.spine.states,this.skeleton=this.data.spine.skeleton,this.entity.addChild(this.data.spine._node)},_onAssetReady:function(t){"texture"===t.type&&this.textures.push(t.resource),"json"===t.type&&(this.skeletonData=t.resource),"text"===t.type&&(this.atlasData=t.resource)},_onAssetAdd:function(t){t.off("change",this.onAssetChanged,this),t.on("change",this.onAssetChanged,this),t.off("remove",this.onAssetRemoved,this),t.on("remove",this.onAssetRemoved,this),t.ready(this._onAssetReady,this),this.system.app.assets.load(t)},onSetResource:function(){this.data.atlasData&&this.data.textures.length&&this.data.skeletonData&&this._createSpine()},onSetAsset:function(t,e,s){var i=this.system.app.assets,r=null;if(e&&(r=i.get(e))&&(r.off("change",this.onAssetChanged),r.off("remove",this.onAssetRemoved)),s){var n=s;s instanceof pc.Asset&&(n=s.id,this.data[t]=n),(r=i.get(n))?this._onAssetAdd(r):i.on("add:"+n)}},onSetAssets:function(t,e,s){var i,r,n=this.system.app.assets,a=null;if(e.length)for(i=0,r=e.length;i<r;i++)(a=n.get(e[i]))&&(a.off("change",this.onAssetChanged),a.off("remove",this.onAssetRemoved));if(s&&s.length){var o=s.map((function(t){return t instanceof pc.Asset?t.id:t}));for(i=0,r=s.length;i<r;i++)(a=n.get(o[i]))?this._onAssetAdd(a):n.on("add:"+o[i])}},onAssetChanged:function(t,e,s,i){},onAssetRemoved:function(t){},onEnable:function(){pc.Component.prototype.onEnable.call(this);var t=this.data.spine;t&&t.addToLayers()},onDisable:function(){pc.Component.prototype.onDisable.call(this);var t=this.data.spine;t&&t.removeFromLayers()},hide:function(){this.data.spine&&this.data.spine.hide()},show:function(){this.data.spine&&this.data.spine.show()},removeComponent:function(){var t;if(this.atlasAsset&&(t=this.system.app.assets.get(this.atlasAsset))&&(t.off("change",this.onAssetChanged),t.off("remove",this.onAssetRemoved)),this.skeletonAsset&&(t=this.system.app.assets.get(this.skeletonAsset))&&(t.off("change",this.onAssetChanged),t.off("remove",this.onAssetRemoved)),this.textureAssets&&this.textureAssets.length)for(var e=0;e<this.textureAssets.length;e++)(t=this.system.app.assets.get(this.textureAssets[e]))&&(t.off("change",this.onAssetChanged),t.off("remove",this.onAssetRemoved))}}),{SpineComponent:e})),pc.extend(pc,{SpineComponentData:function(){this.enabled=!0,this.atlasAsset=null,this.textureAssets=[],this.skeletonAsset=null,this.speed=1,this.spine=null,this.atlasData=null,this.textures=[],this.skeletonData=null}}),function(){if(pc.Application.registerPlugin){pc.Application.registerPlugin("spine",(function(t){new pc.SpineComponentSystem(t)}))}else{var t=pc.Application.getApplication(),e=new pc.SpineComponentSystem(t);t.systems.add(e)}}();class i{constructor(){this.entries={},this.size=0}add(t){let e=this.entries[t];return this.entries[t]=!0,!e&&(this.size++,!0)}addAll(t){let e=this.size;for(var s=0,i=t.length;s<i;s++)this.add(t[s]);return e!=this.size}contains(t){return this.entries[t]}clear(){this.entries={},this.size=0}}class r{constructor(t=0,e=0,s=0,i=0){this.r=t,this.g=e,this.b=s,this.a=i}set(t,e,s,i){return this.r=t,this.g=e,this.b=s,this.a=i,this.clamp()}setFromColor(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this}setFromString(t){return t="#"==t.charAt(0)?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=8!=t.length?1:parseInt(t.substr(6,2),16)/255,this}add(t,e,s,i){return this.r+=t,this.g+=e,this.b+=s,this.a+=i,this.clamp()}clamp(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this}static rgba8888ToColor(t,e){t.r=((4278190080&e)>>>24)/255,t.g=((16711680&e)>>>16)/255,t.b=((65280&e)>>>8)/255,t.a=(255&e)/255}static rgb888ToColor(t,e){t.r=((16711680&e)>>>16)/255,t.g=((65280&e)>>>8)/255,t.b=(255&e)/255}static fromString(t){return(new r).setFromString(t)}}r.WHITE=new r(1,1,1,1),r.RED=new r(1,0,0,1),r.GREEN=new r(0,1,0,1),r.BLUE=new r(0,0,1,1),r.MAGENTA=new r(1,0,1,1);class n{static clamp(t,e,s){return t<e?e:t>s?s:t}static cosDeg(t){return Math.cos(t*n.degRad)}static sinDeg(t){return Math.sin(t*n.degRad)}static signum(t){return t>0?1:t<0?-1:0}static toInt(t){return t>0?Math.floor(t):Math.ceil(t)}static cbrt(t){let e=Math.pow(Math.abs(t),1/3);return t<0?-e:e}static randomTriangular(t,e){return n.randomTriangularWith(t,e,.5*(t+e))}static randomTriangularWith(t,e,s){let i=Math.random(),r=e-t;return i<=(s-t)/r?t+Math.sqrt(i*r*(s-t)):e-Math.sqrt((1-i)*r*(e-s))}static isPowerOfTwo(t){return t&&0==(t&t-1)}}n.PI=3.1415927,n.PI2=2*n.PI,n.radiansToDegrees=180/n.PI,n.radDeg=n.radiansToDegrees,n.degreesToRadians=n.PI/180,n.degRad=n.degreesToRadians;class a{static arrayCopy(t,e,s,i,r){for(let n=e,a=i;n<e+r;n++,a++)s[a]=t[n]}static arrayFill(t,e,s,i){for(let r=e;r<s;r++)t[r]=i}static setArraySize(t,e,s=0){let i=t.length;if(i==e)return t;if(t.length=e,i<e)for(let r=i;r<e;r++)t[r]=s;return t}static ensureArrayCapacity(t,e,s=0){return t.length>=e?t:a.setArraySize(t,e,s)}static newArray(t,e){let s=new Array(t);for(let i=0;i<t;i++)s[i]=e;return s}static newFloatArray(t){if(a.SUPPORTS_TYPED_ARRAYS)return new Float32Array(t);{let e=new Array(t);for(let t=0;t<e.length;t++)e[t]=0;return e}}static newShortArray(t){if(a.SUPPORTS_TYPED_ARRAYS)return new Int16Array(t);{let e=new Array(t);for(let t=0;t<e.length;t++)e[t]=0;return e}}static toFloatArray(t){return a.SUPPORTS_TYPED_ARRAYS?new Float32Array(t):t}static toSinglePrecision(t){return a.SUPPORTS_TYPED_ARRAYS?Math.fround(t):t}static webkit602BugfixHelper(t,e){}static contains(t,e,s=!0){for(var i=0;i<t.length;i++)if(t[i]==e)return!0;return!1}static enumValue(t,e){return t[e[0].toUpperCase()+e.slice(1)]}}a.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array;class o{constructor(t){this.items=new Array,this.instantiator=t}obtain(){return this.items.length>0?this.items.pop():this.instantiator()}free(t){t.reset&&t.reset(),this.items.push(t)}freeAll(t){for(let e=0;e<t.length;e++)this.free(t[e])}clear(){this.items.length=0}}class h{constructor(t=0,e=0){this.x=t,this.y=e}set(t,e){return this.x=t,this.y=e,this}length(){let t=this.x,e=this.y;return Math.sqrt(t*t+e*e)}normalize(){let t=this.length();return 0!=t&&(this.x/=t,this.y/=t),this}}class l{constructor(t){if(!t)throw new Error("name cannot be null.");this.name=t}}class c extends l{constructor(t){super(t),this.id=c.nextID++,this.bones=null,this.vertices=[],this.worldVerticesLength=0,this.timelineAttachment=this}computeWorldVertices(t,e,s,i,r,n){s=r+(s>>1)*n;let a=t.bone.skeleton,o=t.deform,h=this.vertices,l=this.bones;if(!l){o.length>0&&(h=o);let a=t.bone,l=a.worldX,c=a.worldY,u=a.a,d=a.b,f=a.c,p=a.d;for(let t=e,a=r;a<s;t+=2,a+=n){let e=h[t],s=h[t+1];i[a]=e*u+s*d+l,i[a+1]=e*f+s*p+c}return}let c=0,u=0;for(let t=0;t<e;t+=2){let t=l[c];c+=t+1,u+=t}let d=a.bones;if(0==o.length)for(let t=r,e=3*u;t<s;t+=n){let s=0,r=0,n=l[c++];for(n+=c;c<n;c++,e+=3){let t=d[l[c]],i=h[e],n=h[e+1],a=h[e+2];s+=(i*t.a+n*t.b+t.worldX)*a,r+=(i*t.c+n*t.d+t.worldY)*a}i[t]=s,i[t+1]=r}else{let t=o;for(let e=r,a=3*u,o=u<<1;e<s;e+=n){let s=0,r=0,n=l[c++];for(n+=c;c<n;c++,a+=3,o+=2){let e=d[l[c]],i=h[a]+t[o],n=h[a+1]+t[o+1],u=h[a+2];s+=(i*e.a+n*e.b+e.worldX)*u,r+=(i*e.c+n*e.d+e.worldY)*u}i[e]=s,i[e+1]=r}}}copyTo(t){this.bones?(t.bones=new Array(this.bones.length),a.arrayCopy(this.bones,0,t.bones,0,this.bones.length)):t.bones=null,this.vertices&&(t.vertices=a.newFloatArray(this.vertices.length),a.arrayCopy(this.vertices,0,t.vertices,0,this.vertices.length)),t.worldVerticesLength=this.worldVerticesLength,t.timelineAttachment=this.timelineAttachment}}c.nextID=0;class u{constructor(t){this.id=u.nextID(),this.start=0,this.digits=0,this.setupIndex=0,this.regions=new Array(t)}copy(){let t=new u(this.regions.length);return a.arrayCopy(this.regions,0,t.regions,0,this.regions.length),t.start=this.start,t.digits=this.digits,t.setupIndex=this.setupIndex,t}apply(t,e){let s=t.sequenceIndex;-1==s&&(s=this.setupIndex),s>=this.regions.length&&(s=this.regions.length-1);let i=this.regions[s];e.region!=i&&(e.region=i,e.updateRegion())}getPath(t,e){let s=t,i=(this.start+e).toString();for(let t=this.digits-i.length;t>0;t--)s+="0";return s+=i,s}static nextID(){return u._nextID++}}u._nextID=0,function(t){t[t.hold=0]="hold",t[t.once=1]="once",t[t.loop=2]="loop",t[t.pingpong=3]="pingpong",t[t.onceReverse=4]="onceReverse",t[t.loopReverse=5]="loopReverse",t[t.pingpongReverse=6]="pingpongReverse"}(s||(s={}));const d=[s.hold,s.once,s.loop,s.pingpong,s.onceReverse,s.loopReverse,s.pingpongReverse];class f{constructor(t,e,s){if(this.timelines=[],this.timelineIds=new i,!t)throw new Error("name cannot be null.");this.name=t,this.setTimelines(e),this.duration=s}setTimelines(t){if(!t)throw new Error("timelines cannot be null.");this.timelines=t,this.timelineIds.clear();for(var e=0;e<t.length;e++)this.timelineIds.addAll(t[e].getPropertyIds())}hasTimeline(t){for(let e=0;e<t.length;e++)if(this.timelineIds.contains(t[e]))return!0;return!1}apply(t,e,s,i,r,n,a,o){if(!t)throw new Error("skeleton cannot be null.");i&&0!=this.duration&&(s%=this.duration,e>0&&(e%=this.duration));let h=this.timelines;for(let i=0,l=h.length;i<l;i++)h[i].apply(t,e,s,r,n,a,o)}}var p,m;!function(t){t[t.setup=0]="setup",t[t.first=1]="first",t[t.replace=2]="replace",t[t.add=3]="add"}(p||(p={})),function(t){t[t.mixIn=0]="mixIn",t[t.mixOut=1]="mixOut"}(m||(m={}));const g=0,x=1,w=2,b=3,v=4,y=5,E=6,A=7,I=8,S=9,R=10,k=11,C=12,T=13,M=14,Y=15,X=16,N=17,_=18,L=19;class P{constructor(t,e){this.propertyIds=e,this.frames=a.newFloatArray(t*this.getFrameEntries())}getPropertyIds(){return this.propertyIds}getFrameEntries(){return 1}getFrameCount(){return this.frames.length/this.getFrameEntries()}getDuration(){return this.frames[this.frames.length-this.getFrameEntries()]}static search1(t,e){let s=t.length;for(let i=1;i<s;i++)if(t[i]>e)return i-1;return s-1}static search(t,e,s){let i=t.length;for(let r=s;r<i;r+=s)if(t[r]>e)return r-s;return i-s}}class D extends P{constructor(t,e,s){super(t,s),this.curves=a.newFloatArray(t+18*e),this.curves[t-1]=1}setLinear(t){this.curves[t]=0}setStepped(t){this.curves[t]=1}shrink(t){let e=this.getFrameCount()+18*t;if(this.curves.length>e){let t=a.newFloatArray(e);a.arrayCopy(this.curves,0,t,0,e),this.curves=t}}setBezier(t,e,s,i,r,n,a,o,h,l,c){let u=this.curves,d=this.getFrameCount()+18*t;0==s&&(u[e]=2+d);let f=.03*(i-2*n+o),p=.03*(r-2*a+h),m=.006*(3*(n-o)-i+l),g=.006*(3*(a-h)-r+c),x=2*f+m,w=2*p+g,b=.3*(n-i)+f+.16666667*m,v=.3*(a-r)+p+.16666667*g,y=i+b,E=r+v;for(let t=d+18;d<t;d+=2)u[d]=y,u[d+1]=E,b+=x,v+=w,x+=m,w+=g,y+=b,E+=v}getBezierValue(t,e,s,i){let r=this.curves;if(r[i]>t){let n=this.frames[e],a=this.frames[e+s];return a+(t-n)/(r[i]-n)*(r[i+1]-a)}let n=i+18;for(i+=2;i<n;i+=2)if(r[i]>=t){let e=r[i-2],s=r[i-1];return s+(t-e)/(r[i]-e)*(r[i+1]-s)}e+=this.getFrameEntries();let a=r[n-2],o=r[n-1];return o+(t-a)/(this.frames[e]-a)*(this.frames[e+s]-o)}}class O extends D{constructor(t,e,s){super(t,e,[s])}getFrameEntries(){return 2}setFrame(t,e,s){t<<=1,this.frames[t]=e,this.frames[t+1]=s}getCurveValue(t){let e=this.frames,s=e.length-2;for(let i=2;i<=s;i+=2)if(e[i]>t){s=i-2;break}let i=this.curves[s>>1];switch(i){case 0:let i=e[s],r=e[s+1];return r+(t-i)/(e[s+2]-i)*(e[s+2+1]-r);case 1:return e[s+1]}return this.getBezierValue(t,s,1,i-2)}}class $ extends D{constructor(t,e,s,i){super(t,e,[s,i])}getFrameEntries(){return 3}setFrame(t,e,s,i){t*=3,this.frames[t]=e,this.frames[t+1]=s,this.frames[t+2]=i}}class F extends O{constructor(t,e,s){super(t,e,g+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,r,n,a){let o=t.bones[this.boneIndex];if(!o.active)return;if(s<this.frames[0]){switch(n){case p.setup:return void(o.rotation=o.data.rotation);case p.first:o.rotation+=(o.data.rotation-o.rotation)*r}return}let h=this.getCurveValue(s);switch(n){case p.setup:o.rotation=o.data.rotation+h*r;break;case p.first:case p.replace:h+=o.data.rotation-o.rotation;case p.add:o.rotation+=h*r}}}class V extends ${constructor(t,e,s){super(t,e,x+"|"+s,w+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,r,n,a){let o=t.bones[this.boneIndex];if(!o.active)return;let h=this.frames;if(s<h[0]){switch(n){case p.setup:return o.x=o.data.x,void(o.y=o.data.y);case p.first:o.x+=(o.data.x-o.x)*r,o.y+=(o.data.y-o.y)*r}return}let l=0,c=0,u=P.search(h,s,3),d=this.curves[u/3];switch(d){case 0:let t=h[u];l=h[u+1],c=h[u+2];let e=(s-t)/(h[u+3]-t);l+=(h[u+3+1]-l)*e,c+=(h[u+3+2]-c)*e;break;case 1:l=h[u+1],c=h[u+2];break;default:l=this.getBezierValue(s,u,1,d-2),c=this.getBezierValue(s,u,2,d+18-2)}switch(n){case p.setup:o.x=o.data.x+l*r,o.y=o.data.y+c*r;break;case p.first:case p.replace:o.x+=(o.data.x+l-o.x)*r,o.y+=(o.data.y+c-o.y)*r;break;case p.add:o.x+=l*r,o.y+=c*r}}}class B extends O{constructor(t,e,s){super(t,e,x+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,r,n,a){let o=t.bones[this.boneIndex];if(!o.active)return;if(s<this.frames[0]){switch(n){case p.setup:return void(o.x=o.data.x);case p.first:o.x+=(o.data.x-o.x)*r}return}let h=this.getCurveValue(s);switch(n){case p.setup:o.x=o.data.x+h*r;break;case p.first:case p.replace:o.x+=(o.data.x+h-o.x)*r;break;case p.add:o.x+=h*r}}}class q extends O{constructor(t,e,s){super(t,e,w+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,r,n,a){let o=t.bones[this.boneIndex];if(!o.active)return;if(s<this.frames[0]){switch(n){case p.setup:return void(o.y=o.data.y);case p.first:o.y+=(o.data.y-o.y)*r}return}let h=this.getCurveValue(s);switch(n){case p.setup:o.y=o.data.y+h*r;break;case p.first:case p.replace:o.y+=(o.data.y+h-o.y)*r;break;case p.add:o.y+=h*r}}}class W extends ${constructor(t,e,s){super(t,e,b+"|"+s,v+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,r,a,o){let h=t.bones[this.boneIndex];if(!h.active)return;let l,c,u=this.frames;if(s<u[0]){switch(a){case p.setup:return h.scaleX=h.data.scaleX,void(h.scaleY=h.data.scaleY);case p.first:h.scaleX+=(h.data.scaleX-h.scaleX)*r,h.scaleY+=(h.data.scaleY-h.scaleY)*r}return}let d=P.search(u,s,3),f=this.curves[d/3];switch(f){case 0:let t=u[d];l=u[d+1],c=u[d+2];let e=(s-t)/(u[d+3]-t);l+=(u[d+3+1]-l)*e,c+=(u[d+3+2]-c)*e;break;case 1:l=u[d+1],c=u[d+2];break;default:l=this.getBezierValue(s,d,1,f-2),c=this.getBezierValue(s,d,2,f+18-2)}if(l*=h.data.scaleX,c*=h.data.scaleY,1==r)a==p.add?(h.scaleX+=l-h.data.scaleX,h.scaleY+=c-h.data.scaleY):(h.scaleX=l,h.scaleY=c);else{let t=0,e=0;if(o==m.mixOut)switch(a){case p.setup:t=h.data.scaleX,e=h.data.scaleY,h.scaleX=t+(Math.abs(l)*n.signum(t)-t)*r,h.scaleY=e+(Math.abs(c)*n.signum(e)-e)*r;break;case p.first:case p.replace:t=h.scaleX,e=h.scaleY,h.scaleX=t+(Math.abs(l)*n.signum(t)-t)*r,h.scaleY=e+(Math.abs(c)*n.signum(e)-e)*r;break;case p.add:h.scaleX+=(l-h.data.scaleX)*r,h.scaleY+=(c-h.data.scaleY)*r}else switch(a){case p.setup:t=Math.abs(h.data.scaleX)*n.signum(l),e=Math.abs(h.data.scaleY)*n.signum(c),h.scaleX=t+(l-t)*r,h.scaleY=e+(c-e)*r;break;case p.first:case p.replace:t=Math.abs(h.scaleX)*n.signum(l),e=Math.abs(h.scaleY)*n.signum(c),h.scaleX=t+(l-t)*r,h.scaleY=e+(c-e)*r;break;case p.add:h.scaleX+=(l-h.data.scaleX)*r,h.scaleY+=(c-h.data.scaleY)*r}}}}class z extends O{constructor(t,e,s){super(t,e,b+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,r,a,o){let h=t.bones[this.boneIndex];if(!h.active)return;if(s<this.frames[0]){switch(a){case p.setup:return void(h.scaleX=h.data.scaleX);case p.first:h.scaleX+=(h.data.scaleX-h.scaleX)*r}return}let l=this.getCurveValue(s)*h.data.scaleX;if(1==r)a==p.add?h.scaleX+=l-h.data.scaleX:h.scaleX=l;else{let t=0;if(o==m.mixOut)switch(a){case p.setup:t=h.data.scaleX,h.scaleX=t+(Math.abs(l)*n.signum(t)-t)*r;break;case p.first:case p.replace:t=h.scaleX,h.scaleX=t+(Math.abs(l)*n.signum(t)-t)*r;break;case p.add:h.scaleX+=(l-h.data.scaleX)*r}else switch(a){case p.setup:t=Math.abs(h.data.scaleX)*n.signum(l),h.scaleX=t+(l-t)*r;break;case p.first:case p.replace:t=Math.abs(h.scaleX)*n.signum(l),h.scaleX=t+(l-t)*r;break;case p.add:h.scaleX+=(l-h.data.scaleX)*r}}}}class G extends O{constructor(t,e,s){super(t,e,v+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,r,a,o){let h=t.bones[this.boneIndex];if(!h.active)return;if(s<this.frames[0]){switch(a){case p.setup:return void(h.scaleY=h.data.scaleY);case p.first:h.scaleY+=(h.data.scaleY-h.scaleY)*r}return}let l=this.getCurveValue(s)*h.data.scaleY;if(1==r)a==p.add?h.scaleY+=l-h.data.scaleY:h.scaleY=l;else{let t=0;if(o==m.mixOut)switch(a){case p.setup:t=h.data.scaleY,h.scaleY=t+(Math.abs(l)*n.signum(t)-t)*r;break;case p.first:case p.replace:t=h.scaleY,h.scaleY=t+(Math.abs(l)*n.signum(t)-t)*r;break;case p.add:h.scaleY+=(l-h.data.scaleY)*r}else switch(a){case p.setup:t=Math.abs(h.data.scaleY)*n.signum(l),h.scaleY=t+(l-t)*r;break;case p.first:case p.replace:t=Math.abs(h.scaleY)*n.signum(l),h.scaleY=t+(l-t)*r;break;case p.add:h.scaleY+=(l-h.data.scaleY)*r}}}}class U extends ${constructor(t,e,s){super(t,e,y+"|"+s,E+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,r,n,a){let o=t.bones[this.boneIndex];if(!o.active)return;let h=this.frames;if(s<h[0]){switch(n){case p.setup:return o.shearX=o.data.shearX,void(o.shearY=o.data.shearY);case p.first:o.shearX+=(o.data.shearX-o.shearX)*r,o.shearY+=(o.data.shearY-o.shearY)*r}return}let l=0,c=0,u=P.search(h,s,3),d=this.curves[u/3];switch(d){case 0:let t=h[u];l=h[u+1],c=h[u+2];let e=(s-t)/(h[u+3]-t);l+=(h[u+3+1]-l)*e,c+=(h[u+3+2]-c)*e;break;case 1:l=h[u+1],c=h[u+2];break;default:l=this.getBezierValue(s,u,1,d-2),c=this.getBezierValue(s,u,2,d+18-2)}switch(n){case p.setup:o.shearX=o.data.shearX+l*r,o.shearY=o.data.shearY+c*r;break;case p.first:case p.replace:o.shearX+=(o.data.shearX+l-o.shearX)*r,o.shearY+=(o.data.shearY+c-o.shearY)*r;break;case p.add:o.shearX+=l*r,o.shearY+=c*r}}}class j extends O{constructor(t,e,s){super(t,e,y+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,r,n,a){let o=t.bones[this.boneIndex];if(!o.active)return;if(s<this.frames[0]){switch(n){case p.setup:return void(o.shearX=o.data.shearX);case p.first:o.shearX+=(o.data.shearX-o.shearX)*r}return}let h=this.getCurveValue(s);switch(n){case p.setup:o.shearX=o.data.shearX+h*r;break;case p.first:case p.replace:o.shearX+=(o.data.shearX+h-o.shearX)*r;break;case p.add:o.shearX+=h*r}}}class H extends O{constructor(t,e,s){super(t,e,E+"|"+s),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,i,r,n,a){let o=t.bones[this.boneIndex];if(!o.active)return;if(s<this.frames[0]){switch(n){case p.setup:return void(o.shearY=o.data.shearY);case p.first:o.shearY+=(o.data.shearY-o.shearY)*r}return}let h=this.getCurveValue(s);switch(n){case p.setup:o.shearY=o.data.shearY+h*r;break;case p.first:case p.replace:o.shearY+=(o.data.shearY+h-o.shearY)*r;break;case p.add:o.shearY+=h*r}}}class K extends D{constructor(t,e,s){super(t,e,[A+"|"+s,I+"|"+s]),this.slotIndex=0,this.slotIndex=s}getFrameEntries(){return 5}setFrame(t,e,s,i,r,n){t*=5,this.frames[t]=e,this.frames[t+1]=s,this.frames[t+2]=i,this.frames[t+3]=r,this.frames[t+4]=n}apply(t,e,s,i,r,n,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let h=this.frames,l=o.color;if(s<h[0]){let t=o.data.color;switch(n){case p.setup:return void l.setFromColor(t);case p.first:l.add((t.r-l.r)*r,(t.g-l.g)*r,(t.b-l.b)*r,(t.a-l.a)*r)}return}let c=0,u=0,d=0,f=0,m=P.search(h,s,5),g=this.curves[m/5];switch(g){case 0:let t=h[m];c=h[m+1],u=h[m+2],d=h[m+3],f=h[m+4];let e=(s-t)/(h[m+5]-t);c+=(h[m+5+1]-c)*e,u+=(h[m+5+2]-u)*e,d+=(h[m+5+3]-d)*e,f+=(h[m+5+4]-f)*e;break;case 1:c=h[m+1],u=h[m+2],d=h[m+3],f=h[m+4];break;default:c=this.getBezierValue(s,m,1,g-2),u=this.getBezierValue(s,m,2,g+18-2),d=this.getBezierValue(s,m,3,g+36-2),f=this.getBezierValue(s,m,4,g+54-2)}1==r?l.set(c,u,d,f):(n==p.setup&&l.setFromColor(o.data.color),l.add((c-l.r)*r,(u-l.g)*r,(d-l.b)*r,(f-l.a)*r))}}class Z extends D{constructor(t,e,s){super(t,e,[A+"|"+s]),this.slotIndex=0,this.slotIndex=s}getFrameEntries(){return 4}setFrame(t,e,s,i,r){t<<=2,this.frames[t]=e,this.frames[t+1]=s,this.frames[t+2]=i,this.frames[t+3]=r}apply(t,e,s,i,r,n,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let h=this.frames,l=o.color;if(s<h[0]){let t=o.data.color;switch(n){case p.setup:return l.r=t.r,l.g=t.g,void(l.b=t.b);case p.first:l.r+=(t.r-l.r)*r,l.g+=(t.g-l.g)*r,l.b+=(t.b-l.b)*r}return}let c=0,u=0,d=0,f=P.search(h,s,4),m=this.curves[f>>2];switch(m){case 0:let t=h[f];c=h[f+1],u=h[f+2],d=h[f+3];let e=(s-t)/(h[f+4]-t);c+=(h[f+4+1]-c)*e,u+=(h[f+4+2]-u)*e,d+=(h[f+4+3]-d)*e;break;case 1:c=h[f+1],u=h[f+2],d=h[f+3];break;default:c=this.getBezierValue(s,f,1,m-2),u=this.getBezierValue(s,f,2,m+18-2),d=this.getBezierValue(s,f,3,m+36-2)}if(1==r)l.r=c,l.g=u,l.b=d;else{if(n==p.setup){let t=o.data.color;l.r=t.r,l.g=t.g,l.b=t.b}l.r+=(c-l.r)*r,l.g+=(u-l.g)*r,l.b+=(d-l.b)*r}}}class J extends O{constructor(t,e,s){super(t,e,I+"|"+s),this.slotIndex=0,this.slotIndex=s}apply(t,e,s,i,r,n,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let h=o.color;if(s<this.frames[0]){let t=o.data.color;switch(n){case p.setup:return void(h.a=t.a);case p.first:h.a+=(t.a-h.a)*r}return}let l=this.getCurveValue(s);1==r?h.a=l:(n==p.setup&&(h.a=o.data.color.a),h.a+=(l-h.a)*r)}}class Q extends D{constructor(t,e,s){super(t,e,[A+"|"+s,I+"|"+s,S+"|"+s]),this.slotIndex=0,this.slotIndex=s}getFrameEntries(){return 8}setFrame(t,e,s,i,r,n,a,o,h){t<<=3,this.frames[t]=e,this.frames[t+1]=s,this.frames[t+2]=i,this.frames[t+3]=r,this.frames[t+4]=n,this.frames[t+5]=a,this.frames[t+6]=o,this.frames[t+7]=h}apply(t,e,s,i,r,n,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let h=this.frames,l=o.color,c=o.darkColor;if(s<h[0]){let t=o.data.color,e=o.data.darkColor;switch(n){case p.setup:return l.setFromColor(t),c.r=e.r,c.g=e.g,void(c.b=e.b);case p.first:l.add((t.r-l.r)*r,(t.g-l.g)*r,(t.b-l.b)*r,(t.a-l.a)*r),c.r+=(e.r-c.r)*r,c.g+=(e.g-c.g)*r,c.b+=(e.b-c.b)*r}return}let u=0,d=0,f=0,m=0,g=0,x=0,w=0,b=P.search(h,s,8),v=this.curves[b>>3];switch(v){case 0:let t=h[b];u=h[b+1],d=h[b+2],f=h[b+3],m=h[b+4],g=h[b+5],x=h[b+6],w=h[b+7];let e=(s-t)/(h[b+8]-t);u+=(h[b+8+1]-u)*e,d+=(h[b+8+2]-d)*e,f+=(h[b+8+3]-f)*e,m+=(h[b+8+4]-m)*e,g+=(h[b+8+5]-g)*e,x+=(h[b+8+6]-x)*e,w+=(h[b+8+7]-w)*e;break;case 1:u=h[b+1],d=h[b+2],f=h[b+3],m=h[b+4],g=h[b+5],x=h[b+6],w=h[b+7];break;default:u=this.getBezierValue(s,b,1,v-2),d=this.getBezierValue(s,b,2,v+18-2),f=this.getBezierValue(s,b,3,v+36-2),m=this.getBezierValue(s,b,4,v+54-2),g=this.getBezierValue(s,b,5,v+72-2),x=this.getBezierValue(s,b,6,v+90-2),w=this.getBezierValue(s,b,7,v+108-2)}if(1==r)l.set(u,d,f,m),c.r=g,c.g=x,c.b=w;else{if(n==p.setup){l.setFromColor(o.data.color);let t=o.data.darkColor;c.r=t.r,c.g=t.g,c.b=t.b}l.add((u-l.r)*r,(d-l.g)*r,(f-l.b)*r,(m-l.a)*r),c.r+=(g-c.r)*r,c.g+=(x-c.g)*r,c.b+=(w-c.b)*r}}}class tt extends D{constructor(t,e,s){super(t,e,[A+"|"+s,S+"|"+s]),this.slotIndex=0,this.slotIndex=s}getFrameEntries(){return 7}setFrame(t,e,s,i,r,n,a,o){t*=7,this.frames[t]=e,this.frames[t+1]=s,this.frames[t+2]=i,this.frames[t+3]=r,this.frames[t+4]=n,this.frames[t+5]=a,this.frames[t+6]=o}apply(t,e,s,i,r,n,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let h=this.frames,l=o.color,c=o.darkColor;if(s<h[0]){let t=o.data.color,e=o.data.darkColor;switch(n){case p.setup:return l.r=t.r,l.g=t.g,l.b=t.b,c.r=e.r,c.g=e.g,void(c.b=e.b);case p.first:l.r+=(t.r-l.r)*r,l.g+=(t.g-l.g)*r,l.b+=(t.b-l.b)*r,c.r+=(e.r-c.r)*r,c.g+=(e.g-c.g)*r,c.b+=(e.b-c.b)*r}return}let u=0,d=0,f=0,m=0,g=0,x=0,w=P.search(h,s,7),b=this.curves[w/7];switch(b){case 0:let t=h[w];u=h[w+1],d=h[w+2],f=h[w+3],m=h[w+4],g=h[w+5],x=h[w+6];let e=(s-t)/(h[w+7]-t);u+=(h[w+7+1]-u)*e,d+=(h[w+7+2]-d)*e,f+=(h[w+7+3]-f)*e,m+=(h[w+7+4]-m)*e,g+=(h[w+7+5]-g)*e,x+=(h[w+7+6]-x)*e;break;case 1:u=h[w+1],d=h[w+2],f=h[w+3],m=h[w+4],g=h[w+5],x=h[w+6];break;default:u=this.getBezierValue(s,w,1,b-2),d=this.getBezierValue(s,w,2,b+18-2),f=this.getBezierValue(s,w,3,b+36-2),m=this.getBezierValue(s,w,4,b+54-2),g=this.getBezierValue(s,w,5,b+72-2),x=this.getBezierValue(s,w,6,b+90-2)}if(1==r)l.r=u,l.g=d,l.b=f,c.r=m,c.g=g,c.b=x;else{if(n==p.setup){let t=o.data.color,e=o.data.darkColor;l.r=t.r,l.g=t.g,l.b=t.b,c.r=e.r,c.g=e.g,c.b=e.b}l.r+=(u-l.r)*r,l.g+=(d-l.g)*r,l.b+=(f-l.b)*r,c.r+=(m-c.r)*r,c.g+=(g-c.g)*r,c.b+=(x-c.b)*r}}}class et extends P{constructor(t,e){super(t,[R+"|"+e]),this.slotIndex=0,this.slotIndex=e,this.attachmentNames=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e,s){this.frames[t]=e,this.attachmentNames[t]=s}apply(t,e,s,i,r,n,a){let o=t.slots[this.slotIndex];o.bone.active&&(a!=m.mixOut?s<this.frames[0]?n!=p.setup&&n!=p.first||this.setAttachment(t,o,o.data.attachmentName):this.setAttachment(t,o,this.attachmentNames[P.search1(this.frames,s)]):n==p.setup&&this.setAttachment(t,o,o.data.attachmentName))}setAttachment(t,e,s){e.setAttachment(s?t.getAttachment(this.slotIndex,s):null)}}class st extends D{constructor(t,e,s,i){super(t,e,[k+"|"+s+"|"+i.id]),this.slotIndex=0,this.slotIndex=s,this.attachment=i,this.vertices=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e,s){this.frames[t]=e,this.vertices[t]=s}setBezier(t,e,s,i,r,n,a,o,h,l,c){let u=this.curves,d=this.getFrameCount()+18*t;0==s&&(u[e]=2+d);let f=.03*(i-2*n+o),p=.03*h-.06*a,m=.006*(3*(n-o)-i+l),g=.018*(a-h+.33333333),x=2*f+m,w=2*p+g,b=.3*(n-i)+f+.16666667*m,v=.3*a+p+.16666667*g,y=i+b,E=v;for(let t=d+18;d<t;d+=2)u[d]=y,u[d+1]=E,b+=x,v+=w,x+=m,w+=g,y+=b,E+=v}getCurvePercent(t,e){let s=this.curves,i=s[e];switch(i){case 0:let s=this.frames[e];return(t-s)/(this.frames[e+this.getFrameEntries()]-s);case 1:return 0}if(i-=2,s[i]>t){let r=this.frames[e];return s[i+1]*(t-r)/(s[i]-r)}let r=i+18;for(i+=2;i<r;i+=2)if(s[i]>=t){let e=s[i-2],r=s[i-1];return r+(t-e)/(s[i]-e)*(s[i+1]-r)}let n=s[r-2],a=s[r-1];return a+(1-a)*(t-n)/(this.frames[e+this.getFrameEntries()]-n)}apply(t,e,s,i,r,n,o){let h=t.slots[this.slotIndex];if(!h.bone.active)return;let l=h.getAttachment();if(!l)return;if(!(l instanceof c)||l.timelineAttachment!=this.attachment)return;let u=h.deform;0==u.length&&(n=p.setup);let d=this.vertices,f=d[0].length,m=this.frames;if(s<m[0]){switch(n){case p.setup:return void(u.length=0);case p.first:if(1==r)return void(u.length=0);u.length=f;let t=l;if(t.bones){r=1-r;for(g=0;g<f;g++)u[g]*=r}else{let e=t.vertices;for(var g=0;g<f;g++)u[g]+=(e[g]-u[g])*r}}return}if(u.length=f,s>=m[m.length-1]){let t=d[m.length-1];if(1==r)if(n==p.add){let e=l;if(e.bones)for(let e=0;e<f;e++)u[e]+=t[e];else{let s=e.vertices;for(let e=0;e<f;e++)u[e]+=t[e]-s[e]}}else a.arrayCopy(t,0,u,0,f);else switch(n){case p.setup:{let e=l;if(e.bones)for(let e=0;e<f;e++)u[e]=t[e]*r;else{let s=e.vertices;for(let e=0;e<f;e++){let i=s[e];u[e]=i+(t[e]-i)*r}}break}case p.first:case p.replace:for(let e=0;e<f;e++)u[e]+=(t[e]-u[e])*r;break;case p.add:let e=l;if(e.bones)for(let e=0;e<f;e++)u[e]+=t[e]*r;else{let s=e.vertices;for(let e=0;e<f;e++)u[e]+=(t[e]-s[e])*r}}return}let x=P.search1(m,s),w=this.getCurvePercent(s,x),b=d[x],v=d[x+1];if(1==r)if(n==p.add){let t=l;if(t.bones)for(let t=0;t<f;t++){let e=b[t];u[t]+=e+(v[t]-e)*w}else{let e=t.vertices;for(let t=0;t<f;t++){let s=b[t];u[t]+=s+(v[t]-s)*w-e[t]}}}else for(let t=0;t<f;t++){let e=b[t];u[t]=e+(v[t]-e)*w}else switch(n){case p.setup:{let t=l;if(t.bones)for(let t=0;t<f;t++){let e=b[t];u[t]=(e+(v[t]-e)*w)*r}else{let e=t.vertices;for(let t=0;t<f;t++){let s=b[t],i=e[t];u[t]=i+(s+(v[t]-s)*w-i)*r}}break}case p.first:case p.replace:for(let t=0;t<f;t++){let e=b[t];u[t]+=(e+(v[t]-e)*w-u[t])*r}break;case p.add:let t=l;if(t.bones)for(let t=0;t<f;t++){let e=b[t];u[t]+=(e+(v[t]-e)*w)*r}else{let e=t.vertices;for(let t=0;t<f;t++){let s=b[t];u[t]+=(s+(v[t]-s)*w-e[t])*r}}}}}class it extends P{constructor(t){super(t,it.propertyIds),this.events=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e){this.frames[t]=e.time,this.events[t]=e}apply(t,e,s,i,r,n,a){if(!i)return;let o=this.frames,h=this.frames.length;if(e>s)this.apply(t,e,Number.MAX_VALUE,i,r,n,a),e=-1;else if(e>=o[h-1])return;if(s<o[0])return;let l=0;if(e<o[0])l=0;else{l=P.search1(o,e)+1;let t=o[l];for(;l>0&&o[l-1]==t;)l--}for(;l<h&&s>=o[l];l++)i.push(this.events[l])}}it.propertyIds=[""+C];class rt extends P{constructor(t){super(t,rt.propertyIds),this.drawOrders=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e,s){this.frames[t]=e,this.drawOrders[t]=s}apply(t,e,s,i,r,n,o){if(o==m.mixOut)return void(n==p.setup&&a.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length));if(s<this.frames[0])return void(n!=p.setup&&n!=p.first||a.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length));let h=P.search1(this.frames,s),l=this.drawOrders[h];if(l){let e=t.drawOrder,s=t.slots;for(let t=0,i=l.length;t<i;t++)e[t]=s[l[t]]}else a.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length)}}rt.propertyIds=[""+T];class nt extends D{constructor(t,e,s){super(t,e,[M+"|"+s]),this.ikConstraintIndex=0,this.ikConstraintIndex=s}getFrameEntries(){return 6}setFrame(t,e,s,i,r,n,a){t*=6,this.frames[t]=e,this.frames[t+1]=s,this.frames[t+2]=i,this.frames[t+3]=r,this.frames[t+4]=n?1:0,this.frames[t+5]=a?1:0}apply(t,e,s,i,r,n,a){let o=t.ikConstraints[this.ikConstraintIndex];if(!o.active)return;let h=this.frames;if(s<h[0]){switch(n){case p.setup:return o.mix=o.data.mix,o.softness=o.data.softness,o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,void(o.stretch=o.data.stretch);case p.first:o.mix+=(o.data.mix-o.mix)*r,o.softness+=(o.data.softness-o.softness)*r,o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,o.stretch=o.data.stretch}return}let l=0,c=0,u=P.search(h,s,6),d=this.curves[u/6];switch(d){case 0:let t=h[u];l=h[u+1],c=h[u+2];let e=(s-t)/(h[u+6]-t);l+=(h[u+6+1]-l)*e,c+=(h[u+6+2]-c)*e;break;case 1:l=h[u+1],c=h[u+2];break;default:l=this.getBezierValue(s,u,1,d-2),c=this.getBezierValue(s,u,2,d+18-2)}n==p.setup?(o.mix=o.data.mix+(l-o.data.mix)*r,o.softness=o.data.softness+(c-o.data.softness)*r,a==m.mixOut?(o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,o.stretch=o.data.stretch):(o.bendDirection=h[u+3],o.compress=0!=h[u+4],o.stretch=0!=h[u+5])):(o.mix+=(l-o.mix)*r,o.softness+=(c-o.softness)*r,a==m.mixIn&&(o.bendDirection=h[u+3],o.compress=0!=h[u+4],o.stretch=0!=h[u+5]))}}class at extends D{constructor(t,e,s){super(t,e,[Y+"|"+s]),this.transformConstraintIndex=0,this.transformConstraintIndex=s}getFrameEntries(){return 7}setFrame(t,e,s,i,r,n,a,o){let h=this.frames;h[t*=7]=e,h[t+1]=s,h[t+2]=i,h[t+3]=r,h[t+4]=n,h[t+5]=a,h[t+6]=o}apply(t,e,s,i,r,n,a){let o=t.transformConstraints[this.transformConstraintIndex];if(!o.active)return;let h,l,c,u,d,f,m=this.frames;if(s<m[0]){let t=o.data;switch(n){case p.setup:return o.mixRotate=t.mixRotate,o.mixX=t.mixX,o.mixY=t.mixY,o.mixScaleX=t.mixScaleX,o.mixScaleY=t.mixScaleY,void(o.mixShearY=t.mixShearY);case p.first:o.mixRotate+=(t.mixRotate-o.mixRotate)*r,o.mixX+=(t.mixX-o.mixX)*r,o.mixY+=(t.mixY-o.mixY)*r,o.mixScaleX+=(t.mixScaleX-o.mixScaleX)*r,o.mixScaleY+=(t.mixScaleY-o.mixScaleY)*r,o.mixShearY+=(t.mixShearY-o.mixShearY)*r}return}let g=P.search(m,s,7),x=this.curves[g/7];switch(x){case 0:let t=m[g];h=m[g+1],l=m[g+2],c=m[g+3],u=m[g+4],d=m[g+5],f=m[g+6];let e=(s-t)/(m[g+7]-t);h+=(m[g+7+1]-h)*e,l+=(m[g+7+2]-l)*e,c+=(m[g+7+3]-c)*e,u+=(m[g+7+4]-u)*e,d+=(m[g+7+5]-d)*e,f+=(m[g+7+6]-f)*e;break;case 1:h=m[g+1],l=m[g+2],c=m[g+3],u=m[g+4],d=m[g+5],f=m[g+6];break;default:h=this.getBezierValue(s,g,1,x-2),l=this.getBezierValue(s,g,2,x+18-2),c=this.getBezierValue(s,g,3,x+36-2),u=this.getBezierValue(s,g,4,x+54-2),d=this.getBezierValue(s,g,5,x+72-2),f=this.getBezierValue(s,g,6,x+90-2)}if(n==p.setup){let t=o.data;o.mixRotate=t.mixRotate+(h-t.mixRotate)*r,o.mixX=t.mixX+(l-t.mixX)*r,o.mixY=t.mixY+(c-t.mixY)*r,o.mixScaleX=t.mixScaleX+(u-t.mixScaleX)*r,o.mixScaleY=t.mixScaleY+(d-t.mixScaleY)*r,o.mixShearY=t.mixShearY+(f-t.mixShearY)*r}else o.mixRotate+=(h-o.mixRotate)*r,o.mixX+=(l-o.mixX)*r,o.mixY+=(c-o.mixY)*r,o.mixScaleX+=(u-o.mixScaleX)*r,o.mixScaleY+=(d-o.mixScaleY)*r,o.mixShearY+=(f-o.mixShearY)*r}}class ot extends O{constructor(t,e,s){super(t,e,X+"|"+s),this.pathConstraintIndex=0,this.pathConstraintIndex=s}apply(t,e,s,i,r,n,a){let o=t.pathConstraints[this.pathConstraintIndex];if(!o.active)return;if(s<this.frames[0]){switch(n){case p.setup:return void(o.position=o.data.position);case p.first:o.position+=(o.data.position-o.position)*r}return}let h=this.getCurveValue(s);n==p.setup?o.position=o.data.position+(h-o.data.position)*r:o.position+=(h-o.position)*r}}class ht extends O{constructor(t,e,s){super(t,e,N+"|"+s),this.pathConstraintIndex=0,this.pathConstraintIndex=s}apply(t,e,s,i,r,n,a){let o=t.pathConstraints[this.pathConstraintIndex];if(!o.active)return;if(s<this.frames[0]){switch(n){case p.setup:return void(o.spacing=o.data.spacing);case p.first:o.spacing+=(o.data.spacing-o.spacing)*r}return}let h=this.getCurveValue(s);n==p.setup?o.spacing=o.data.spacing+(h-o.data.spacing)*r:o.spacing+=(h-o.spacing)*r}}class lt extends D{constructor(t,e,s){super(t,e,[_+"|"+s]),this.pathConstraintIndex=0,this.pathConstraintIndex=s}getFrameEntries(){return 4}setFrame(t,e,s,i,r){let n=this.frames;n[t<<=2]=e,n[t+1]=s,n[t+2]=i,n[t+3]=r}apply(t,e,s,i,r,n,a){let o=t.pathConstraints[this.pathConstraintIndex];if(!o.active)return;let h,l,c,u=this.frames;if(s<u[0]){switch(n){case p.setup:return o.mixRotate=o.data.mixRotate,o.mixX=o.data.mixX,void(o.mixY=o.data.mixY);case p.first:o.mixRotate+=(o.data.mixRotate-o.mixRotate)*r,o.mixX+=(o.data.mixX-o.mixX)*r,o.mixY+=(o.data.mixY-o.mixY)*r}return}let d=P.search(u,s,4),f=this.curves[d>>2];switch(f){case 0:let t=u[d];h=u[d+1],l=u[d+2],c=u[d+3];let e=(s-t)/(u[d+4]-t);h+=(u[d+4+1]-h)*e,l+=(u[d+4+2]-l)*e,c+=(u[d+4+3]-c)*e;break;case 1:h=u[d+1],l=u[d+2],c=u[d+3];break;default:h=this.getBezierValue(s,d,1,f-2),l=this.getBezierValue(s,d,2,f+18-2),c=this.getBezierValue(s,d,3,f+36-2)}if(n==p.setup){let t=o.data;o.mixRotate=t.mixRotate+(h-t.mixRotate)*r,o.mixX=t.mixX+(l-t.mixX)*r,o.mixY=t.mixY+(c-t.mixY)*r}else o.mixRotate+=(h-o.mixRotate)*r,o.mixX+=(l-o.mixX)*r,o.mixY+=(c-o.mixY)*r}}class ct extends P{constructor(t,e,s){super(t,[L+"|"+e+"|"+s.sequence.id]),this.slotIndex=e,this.attachment=s}getFrameEntries(){return ct.ENTRIES}getSlotIndex(){return this.slotIndex}getAttachment(){return this.attachment}setFrame(t,e,s,i,r){let n=this.frames;n[t*=ct.ENTRIES]=e,n[t+ct.MODE]=s|i<<4,n[t+ct.DELAY]=r}apply(t,e,i,r,n,a,o){let h=t.slots[this.slotIndex];if(!h.bone.active)return;let l=h.attachment,u=this.attachment;if(!(l==u||l instanceof c&&l.timelineAttachment==u))return;let f=this.frames;if(i<f[0])return void(a!=p.setup&&a!=p.first||(h.sequenceIndex=-1));let m=P.search(f,i,ct.ENTRIES),g=f[m],x=f[m+ct.MODE],w=f[m+ct.DELAY];if(!this.attachment.sequence)return;let b=x>>4,v=this.attachment.sequence.regions.length,y=d[15&x];if(y!=s.hold)switch(b+=(i-g)/w+1e-5|0,y){case s.once:b=Math.min(v-1,b);break;case s.loop:b%=v;break;case s.pingpong:{let t=(v<<1)-2;b=0==t?0:b%t,b>=v&&(b=t-b);break}case s.onceReverse:b=Math.max(v-1-b,0);break;case s.loopReverse:b=v-1-b%v;break;case s.pingpongReverse:{let t=(v<<1)-2;b=0==t?0:(b+v-1)%t,b>=v&&(b=t-b)}}h.sequenceIndex=b}}ct.ENTRIES=3,ct.MODE=1,ct.DELAY=2;class ut{static emptyAnimation(){return ut._emptyAnimation}constructor(t){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new ft(this),this.propertyIDs=new i,this.animationsChanged=!1,this.trackEntryPool=new o((()=>new dt)),this.data=t}update(t){t*=this.timeScale;let e=this.tracks;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(!i)continue;i.animationLast=i.nextAnimationLast,i.trackLast=i.nextTrackLast;let r=t*i.timeScale;if(i.delay>0){if(i.delay-=r,i.delay>0)continue;r=-i.delay,i.delay=0}let n=i.next;if(n){let e=i.trackLast-n.delay;if(e>=0){for(n.delay=0,n.trackTime+=0==i.timeScale?0:(e/i.timeScale+t)*n.timeScale,i.trackTime+=r,this.setCurrent(s,n,!0);n.mixingFrom;)n.mixTime+=t,n=n.mixingFrom;continue}}else if(i.trackLast>=i.trackEnd&&!i.mixingFrom){e[s]=null,this.queue.end(i),this.clearNext(i);continue}if(i.mixingFrom&&this.updateMixingFrom(i,t)){let t=i.mixingFrom;for(i.mixingFrom=null,t&&(t.mixingTo=null);t;)this.queue.end(t),t=t.mixingFrom}i.trackTime+=r}this.queue.drain()}updateMixingFrom(t,e){let s=t.mixingFrom;if(!s)return!0;let i=this.updateMixingFrom(s,e);return s.animationLast=s.nextAnimationLast,s.trackLast=s.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration?(0!=s.totalAlpha&&0!=t.mixDuration||(t.mixingFrom=s.mixingFrom,s.mixingFrom&&(s.mixingFrom.mixingTo=t),t.interruptAlpha=s.interruptAlpha,this.queue.end(s)),i):(s.trackTime+=e*s.timeScale,t.mixTime+=e,!1)}apply(t){if(!t)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();let e=this.events,s=this.tracks,i=!1;for(let n=0,a=s.length;n<a;n++){let a=s[n];if(!a||a.delay>0)continue;i=!0;let o=0==n?p.first:a.mixBlend,h=a.alpha;a.mixingFrom?h*=this.applyMixingFrom(a,t,o):a.trackTime>=a.trackEnd&&!a.next&&(h=0);let l=a.animationLast,c=a.getAnimationTime(),u=c,d=e;a.reverse&&(u=a.animation.duration-u,d=null);let f=a.animation.timelines,g=f.length;if(0==n&&1==h||o==p.add)for(let e=0;e<g;e++){var r=f[e];r instanceof et?this.applyAttachmentTimeline(r,t,u,o,!0):r.apply(t,l,u,d,h,o,m.mixIn)}else{let e=a.timelineMode,s=a.shortestRotation,i=!s&&a.timelinesRotation.length!=g<<1;i&&(a.timelinesRotation.length=g<<1);for(let r=0;r<g;r++){let n=f[r],c=e[r]==mt?o:p.setup;!s&&n instanceof F?this.applyRotateTimeline(n,t,u,h,c,a.timelinesRotation,r<<1,i):n instanceof et?this.applyAttachmentTimeline(n,t,u,o,!0):n.apply(t,l,u,d,h,c,m.mixIn)}}this.queueEvents(a,c),e.length=0,a.nextAnimationLast=c,a.nextTrackLast=a.trackTime}for(var n=this.unkeyedState+vt,a=t.slots,o=0,h=t.slots.length;o<h;o++){var l=a[o];if(l.attachmentState==n){var c=l.data.attachmentName;l.setAttachment(c?t.getAttachment(l.data.index,c):null)}}return this.unkeyedState+=2,this.queue.drain(),i}applyMixingFrom(t,e,s){let i=t.mixingFrom;i.mixingFrom&&this.applyMixingFrom(i,e,s);let r=0;0==t.mixDuration?(r=1,s==p.first&&(s=p.setup)):(r=t.mixTime/t.mixDuration,r>1&&(r=1),s!=p.first&&(s=i.mixBlend));let n=r<i.attachmentThreshold,a=r<i.drawOrderThreshold,o=i.animation.timelines,h=o.length,l=i.alpha*t.interruptAlpha,c=l*(1-r),u=i.animationLast,d=i.getAnimationTime(),f=d,g=null;if(i.reverse?f=i.animation.duration-f:r<i.eventThreshold&&(g=this.events),s==p.add)for(let t=0;t<h;t++)o[t].apply(e,u,f,g,c,s,m.mixOut);else{let t=i.timelineMode,r=i.timelineHoldMix,d=i.shortestRotation,x=!d&&i.timelinesRotation.length!=h<<1;x&&(i.timelinesRotation.length=h<<1),i.totalAlpha=0;for(let w=0;w<h;w++){let h,b=o[w],v=m.mixOut,y=0;switch(t[w]){case mt:if(!a&&b instanceof rt)continue;h=s,y=c;break;case gt:h=p.setup,y=c;break;case xt:h=s,y=l;break;case wt:h=p.setup,y=l;break;default:h=p.setup;let t=r[w];y=l*Math.max(0,1-t.mixTime/t.mixDuration)}i.totalAlpha+=y,!d&&b instanceof F?this.applyRotateTimeline(b,e,f,y,h,i.timelinesRotation,w<<1,x):b instanceof et?this.applyAttachmentTimeline(b,e,f,h,n):(a&&b instanceof rt&&h==p.setup&&(v=m.mixIn),b.apply(e,u,f,g,y,h,v))}}return t.mixDuration>0&&this.queueEvents(i,d),this.events.length=0,i.nextAnimationLast=d,i.nextTrackLast=i.trackTime,r}applyAttachmentTimeline(t,e,s,i,r){var n=e.slots[t.slotIndex];n.bone.active&&(s<t.frames[0]?i!=p.setup&&i!=p.first||this.setAttachment(e,n,n.data.attachmentName,r):this.setAttachment(e,n,t.attachmentNames[P.search1(t.frames,s)],r),n.attachmentState<=this.unkeyedState&&(n.attachmentState=this.unkeyedState+vt))}setAttachment(t,e,s,i){e.setAttachment(s?t.getAttachment(e.data.index,s):null),i&&(e.attachmentState=this.unkeyedState+yt)}applyRotateTimeline(t,e,s,i,r,a,o,h){if(h&&(a[o]=0),1==i)return void t.apply(e,0,s,null,1,r,m.mixIn);let l=e.bones[t.boneIndex];if(!l.active)return;let c=0,u=0;if(s<t.frames[0])switch(r){case p.setup:l.rotation=l.data.rotation;default:return;case p.first:c=l.rotation,u=l.data.rotation}else c=r==p.setup?l.data.rotation:l.rotation,u=l.data.rotation+t.getCurveValue(s);let d=0,f=u-c;if(f-=360*(16384-(16384.499999999996-f/360|0)),0==f)d=a[o];else{let t=0,e=0;h?(t=0,e=f):(t=a[o],e=a[o+1]);let s=f>0,i=t>=0;n.signum(e)!=n.signum(f)&&Math.abs(e)<=90&&(Math.abs(t)>180&&(t+=360*n.signum(t)),i=s),d=f+t-t%360,i!=s&&(d+=360*n.signum(t)),a[o]=d}a[o+1]=f,l.rotation=c+d*i}queueEvents(t,e){let s=t.animationStart,i=t.animationEnd,r=i-s,n=t.trackLast%r,a=this.events,o=0,h=a.length;for(;o<h;o++){let e=a[o];if(e.time<n)break;e.time>i||this.queue.event(t,e)}let l=!1;for(l=t.loop?0==r||n>t.trackTime%r:e>=i&&t.animationLast<i,l&&this.queue.complete(t);o<h;o++){let e=a[o];e.time<s||this.queue.event(t,e)}}clearTracks(){let t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let t=0,e=this.tracks.length;t<e;t++)this.clearTrack(t);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()}clearTrack(t){if(t>=this.tracks.length)return;let e=this.tracks[t];if(!e)return;this.queue.end(e),this.clearNext(e);let s=e;for(;;){let t=s.mixingFrom;if(!t)break;this.queue.end(t),s.mixingFrom=null,s.mixingTo=null,s=t}this.tracks[e.trackIndex]=null,this.queue.drain()}setCurrent(t,e,s){let i=this.expandToIndex(t);this.tracks[t]=e,e.previous=null,i&&(s&&this.queue.interrupt(i),e.mixingFrom=i,i.mixingTo=e,e.mixTime=0,i.mixingFrom&&i.mixDuration>0&&(e.interruptAlpha*=Math.min(1,i.mixTime/i.mixDuration)),i.timelinesRotation.length=0),this.queue.start(e)}setAnimation(t,e,s=!1){let i=this.data.skeletonData.findAnimation(e);if(!i)throw new Error("Animation not found: "+e);return this.setAnimationWith(t,i,s)}setAnimationWith(t,e,s=!1){if(!e)throw new Error("animation cannot be null.");let i=!0,r=this.expandToIndex(t);r&&(-1==r.nextTrackLast?(this.tracks[t]=r.mixingFrom,this.queue.interrupt(r),this.queue.end(r),this.clearNext(r),r=r.mixingFrom,i=!1):this.clearNext(r));let n=this.trackEntry(t,e,s,r);return this.setCurrent(t,n,i),this.queue.drain(),n}addAnimation(t,e,s=!1,i=0){let r=this.data.skeletonData.findAnimation(e);if(!r)throw new Error("Animation not found: "+e);return this.addAnimationWith(t,r,s,i)}addAnimationWith(t,e,s=!1,i=0){if(!e)throw new Error("animation cannot be null.");let r=this.expandToIndex(t);if(r)for(;r.next;)r=r.next;let n=this.trackEntry(t,e,s,r);return r?(r.next=n,n.previous=r,i<=0&&(i+=r.getTrackComplete()-n.mixDuration)):(this.setCurrent(t,n,!0),this.queue.drain()),n.delay=i,n}setEmptyAnimation(t,e=0){let s=this.setAnimationWith(t,ut.emptyAnimation(),!1);return s.mixDuration=e,s.trackEnd=e,s}addEmptyAnimation(t,e=0,s=0){let i=this.addAnimationWith(t,ut.emptyAnimation(),!1,s);return s<=0&&(i.delay+=i.mixDuration-e),i.mixDuration=e,i.trackEnd=e,i}setEmptyAnimations(t=0){let e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let e=0,s=this.tracks.length;e<s;e++){let s=this.tracks[e];s&&this.setEmptyAnimation(s.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()}expandToIndex(t){return t<this.tracks.length?this.tracks[t]:(a.ensureArrayCapacity(this.tracks,t+1,null),this.tracks.length=t+1,null)}trackEntry(t,e,s,i){let r=this.trackEntryPool.obtain();return r.reset(),r.trackIndex=t,r.animation=e,r.loop=s,r.holdPrevious=!1,r.reverse=!1,r.shortestRotation=!1,r.eventThreshold=0,r.attachmentThreshold=0,r.drawOrderThreshold=0,r.animationStart=0,r.animationEnd=e.duration,r.animationLast=-1,r.nextAnimationLast=-1,r.delay=0,r.trackTime=0,r.trackLast=-1,r.nextTrackLast=-1,r.trackEnd=Number.MAX_VALUE,r.timeScale=1,r.alpha=1,r.mixTime=0,r.mixDuration=i?this.data.getMix(i.animation,e):0,r.interruptAlpha=1,r.totalAlpha=0,r.mixBlend=p.replace,r}clearNext(t){let e=t.next;for(;e;)this.queue.dispose(e),e=e.next;t.next=null}_animationsChanged(){this.animationsChanged=!1,this.propertyIDs.clear();let t=this.tracks;for(let e=0,s=t.length;e<s;e++){let s=t[e];if(s){for(;s.mixingFrom;)s=s.mixingFrom;do{s.mixingTo&&s.mixBlend==p.add||this.computeHold(s),s=s.mixingTo}while(s)}}}computeHold(t){let e=t.mixingTo,s=t.animation.timelines,i=t.animation.timelines.length,r=t.timelineMode;r.length=i;let n=t.timelineHoldMix;n.length=0;let a=this.propertyIDs;if(e&&e.holdPrevious)for(let t=0;t<i;t++)r[t]=a.addAll(s[t].getPropertyIds())?wt:xt;else t:for(let o=0;o<i;o++){let i=s[o],h=i.getPropertyIds();if(a.addAll(h))if(!e||i instanceof et||i instanceof rt||i instanceof it||!e.animation.hasTimeline(h))r[o]=gt;else{for(let s=e.mixingTo;s;s=s.mixingTo)if(!s.animation.hasTimeline(h)){if(t.mixDuration>0){r[o]=bt,n[o]=s;continue t}break}r[o]=wt}else r[o]=mt}}getCurrent(t){return t>=this.tracks.length?null:this.tracks[t]}addListener(t){if(!t)throw new Error("listener cannot be null.");this.listeners.push(t)}removeListener(t){let e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)}clearListeners(){this.listeners.length=0}clearListenerNotifications(){this.queue.clear()}}ut._emptyAnimation=new f("<empty>",[],0);class dt{constructor(){this.animation=null,this.previous=null,this.next=null,this.mixingFrom=null,this.mixingTo=null,this.listener=null,this.trackIndex=0,this.loop=!1,this.holdPrevious=!1,this.reverse=!1,this.shortestRotation=!1,this.eventThreshold=0,this.attachmentThreshold=0,this.drawOrderThreshold=0,this.animationStart=0,this.animationEnd=0,this.animationLast=0,this.nextAnimationLast=0,this.delay=0,this.trackTime=0,this.trackLast=0,this.nextTrackLast=0,this.trackEnd=0,this.timeScale=0,this.alpha=0,this.mixTime=0,this.mixDuration=0,this.interruptAlpha=0,this.totalAlpha=0,this.mixBlend=p.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}reset(){this.next=null,this.previous=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0}getAnimationTime(){if(this.loop){let t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)}setAnimationLast(t){this.animationLast=t,this.nextAnimationLast=t}isComplete(){return this.trackTime>=this.animationEnd-this.animationStart}resetRotationDirections(){this.timelinesRotation.length=0}getTrackComplete(){let t=this.animationEnd-this.animationStart;if(0!=t){if(this.loop)return t*(1+(this.trackTime/t|0));if(this.trackTime<t)return t}return this.trackTime}}class ft{constructor(t){this.objects=[],this.drainDisabled=!1,this.animState=t}start(t){this.objects.push(pt.start),this.objects.push(t),this.animState.animationsChanged=!0}interrupt(t){this.objects.push(pt.interrupt),this.objects.push(t)}end(t){this.objects.push(pt.end),this.objects.push(t),this.animState.animationsChanged=!0}dispose(t){this.objects.push(pt.dispose),this.objects.push(t)}complete(t){this.objects.push(pt.complete),this.objects.push(t)}event(t,e){this.objects.push(pt.event),this.objects.push(t),this.objects.push(e)}drain(){if(this.drainDisabled)return;this.drainDisabled=!0;let t=this.objects,e=this.animState.listeners;for(let s=0;s<t.length;s+=2){let i=t[s],r=t[s+1];switch(i){case pt.start:r.listener&&r.listener.start&&r.listener.start(r);for(let t=0;t<e.length;t++){let s=e[t];s.start&&s.start(r)}break;case pt.interrupt:r.listener&&r.listener.interrupt&&r.listener.interrupt(r);for(let t=0;t<e.length;t++){let s=e[t];s.interrupt&&s.interrupt(r)}break;case pt.end:r.listener&&r.listener.end&&r.listener.end(r);for(let t=0;t<e.length;t++){let s=e[t];s.end&&s.end(r)}case pt.dispose:r.listener&&r.listener.dispose&&r.listener.dispose(r);for(let t=0;t<e.length;t++){let s=e[t];s.dispose&&s.dispose(r)}this.animState.trackEntryPool.free(r);break;case pt.complete:r.listener&&r.listener.complete&&r.listener.complete(r);for(let t=0;t<e.length;t++){let s=e[t];s.complete&&s.complete(r)}break;case pt.event:let i=t[2+s++];r.listener&&r.listener.event&&r.listener.event(r,i);for(let t=0;t<e.length;t++){let s=e[t];s.event&&s.event(r,i)}}}this.clear(),this.drainDisabled=!1}clear(){this.objects.length=0}}var pt;!function(t){t[t.start=0]="start",t[t.interrupt=1]="interrupt",t[t.end=2]="end",t[t.dispose=3]="dispose",t[t.complete=4]="complete",t[t.event=5]="event"}(pt||(pt={}));const mt=0,gt=1,xt=2,wt=3,bt=4,vt=1,yt=2;class Et{constructor(t){if(this.animationToMixTime={},this.defaultMix=0,!t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}setMix(t,e,s){let i=this.skeletonData.findAnimation(t);if(!i)throw new Error("Animation not found: "+t);let r=this.skeletonData.findAnimation(e);if(!r)throw new Error("Animation not found: "+e);this.setMixWith(i,r,s)}setMixWith(t,e,s){if(!t)throw new Error("from cannot be null.");if(!e)throw new Error("to cannot be null.");let i=t.name+"."+e.name;this.animationToMixTime[i]=s}getMix(t,e){let s=t.name+"."+e.name,i=this.animationToMixTime[s];return void 0===i?this.defaultMix:i}}class At extends c{constructor(t){super(t),this.color=new r(1,1,1,1)}copy(){let t=new At(this.name);return this.copyTo(t),t.color.setFromColor(this.color),t}}class It extends c{constructor(t){super(t),this.endSlot=null,this.color=new r(.2275,.2275,.8078,1)}copy(){let t=new It(this.name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t}}var St,Rt,kt,Ct,Tt,Mt,Yt,Xt,Nt;!function(t){t[t.Nearest=9728]="Nearest",t[t.Linear=9729]="Linear",t[t.MipMap=9987]="MipMap",t[t.MipMapNearestNearest=9984]="MipMapNearestNearest",t[t.MipMapLinearNearest=9985]="MipMapLinearNearest",t[t.MipMapNearestLinear=9986]="MipMapNearestLinear",t[t.MipMapLinearLinear=9987]="MipMapLinearLinear"}(St||(St={})),function(t){t[t.MirroredRepeat=33648]="MirroredRepeat",t[t.ClampToEdge=33071]="ClampToEdge",t[t.Repeat=10497]="Repeat"}(Rt||(Rt={}));class _t{constructor(){this.u=0,this.v=0,this.u2=0,this.v2=0,this.width=0,this.height=0,this.degrees=0,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0}}class Lt{constructor(t){this.pages=new Array,this.regions=new Array;let e=new Pt(t),s=new Array(4),i={size:t=>{t.width=parseInt(s[1]),t.height=parseInt(s[2])},format:()=>{},filter:t=>{t.minFilter=a.enumValue(St,s[1]),t.magFilter=a.enumValue(St,s[2])},repeat:t=>{-1!=s[1].indexOf("x")&&(t.uWrap=Rt.Repeat),-1!=s[1].indexOf("y")&&(t.vWrap=Rt.Repeat)},pma:t=>{t.pma="true"==s[1]}};var r={xy:t=>{t.x=parseInt(s[1]),t.y=parseInt(s[2])},size:t=>{t.width=parseInt(s[1]),t.height=parseInt(s[2])},bounds:t=>{t.x=parseInt(s[1]),t.y=parseInt(s[2]),t.width=parseInt(s[3]),t.height=parseInt(s[4])},offset:t=>{t.offsetX=parseInt(s[1]),t.offsetY=parseInt(s[2])},orig:t=>{t.originalWidth=parseInt(s[1]),t.originalHeight=parseInt(s[2])},offsets:t=>{t.offsetX=parseInt(s[1]),t.offsetY=parseInt(s[2]),t.originalWidth=parseInt(s[3]),t.originalHeight=parseInt(s[4])},rotate:t=>{let e=s[1];"true"==e?t.degrees=90:"false"!=e&&(t.degrees=parseInt(e))},index:t=>{t.index=parseInt(s[1])}};let n=e.readLine();for(;n&&0==n.trim().length;)n=e.readLine();for(;n&&0!=n.trim().length&&0!=e.readEntry(s,n);)n=e.readLine();let o=null,h=null,l=null;for(;null!==n;)if(0==n.trim().length)o=null,n=e.readLine();else if(o){let t=new Ot(o,n);for(;;){let i=e.readEntry(s,n=e.readLine());if(0==i)break;let a=r[s[0]];if(a)a(t);else{h||(h=[]),l||(l=[]),h.push(s[0]);let t=[];for(let e=0;e<i;e++)t.push(parseInt(s[e+1]));l.push(t)}}0==t.originalWidth&&0==t.originalHeight&&(t.originalWidth=t.width,t.originalHeight=t.height),h&&h.length>0&&l&&l.length>0&&(t.names=h,t.values=l,h=null,l=null),t.u=t.x/o.width,t.v=t.y/o.height,90==t.degrees?(t.u2=(t.x+t.height)/o.width,t.v2=(t.y+t.width)/o.height):(t.u2=(t.x+t.width)/o.width,t.v2=(t.y+t.height)/o.height),this.regions.push(t)}else{for(o=new Dt(n.trim());0!=e.readEntry(s,n=e.readLine());){let t=i[s[0]];t&&t(o)}this.pages.push(o)}}findRegion(t){for(let e=0;e<this.regions.length;e++)if(this.regions[e].name==t)return this.regions[e];return null}setTextures(t,e=""){for(let s of this.pages)s.setTexture(t.get(e+s.name))}dispose(){var t;for(let e=0;e<this.pages.length;e++)null===(t=this.pages[e].texture)||void 0===t||t.dispose()}}class Pt{constructor(t){this.index=0,this.lines=t.split(/\r\n|\r|\n/)}readLine(){return this.index>=this.lines.length?null:this.lines[this.index++]}readEntry(t,e){if(!e)return 0;if(0==(e=e.trim()).length)return 0;let s=e.indexOf(":");if(-1==s)return 0;t[0]=e.substr(0,s).trim();for(let i=1,r=s+1;;i++){let s=e.indexOf(",",r);if(-1==s)return t[i]=e.substr(r).trim(),i;if(t[i]=e.substr(r,s-r).trim(),r=s+1,4==i)return 4}}}class Dt{constructor(t){this.minFilter=St.Nearest,this.magFilter=St.Nearest,this.uWrap=Rt.ClampToEdge,this.vWrap=Rt.ClampToEdge,this.texture=null,this.width=0,this.height=0,this.pma=!1,this.regions=new Array,this.name=t}setTexture(t){this.texture=t,t.setFilters(this.minFilter,this.magFilter),t.setWraps(this.uWrap,this.vWrap);for(let e of this.regions)e.texture=t}}class Ot extends _t{constructor(t,e){super(),this.x=0,this.y=0,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0,this.index=0,this.degrees=0,this.names=null,this.values=null,this.page=t,this.name=e,t.regions.push(this)}}class $t extends c{constructor(t,e){super(t),this.region=null,this.regionUVs=[],this.uvs=[],this.triangles=[],this.color=new r(1,1,1,1),this.width=0,this.height=0,this.hullLength=0,this.edges=[],this.parentMesh=null,this.sequence=null,this.tempColor=new r(0,0,0,0),this.path=e}updateRegion(){if(!this.region)throw new Error("Region not set.");let t=this.regionUVs;this.uvs&&this.uvs.length==t.length||(this.uvs=a.newFloatArray(t.length));let e=this.uvs,s=this.uvs.length,i=this.region.u,r=this.region.v,n=0,o=0;if(this.region instanceof Ot){let a=this.region,h=a.page.texture.getImage(),l=h.width,c=h.height;switch(a.degrees){case 90:i-=(a.originalHeight-a.offsetY-a.height)/l,r-=(a.originalWidth-a.offsetX-a.width)/c,n=a.originalHeight/l,o=a.originalWidth/c;for(let a=0;a<s;a+=2)e[a]=i+t[a+1]*n,e[a+1]=r+(1-t[a])*o;return;case 180:i-=(a.originalWidth-a.offsetX-a.width)/l,r-=a.offsetY/c,n=a.originalWidth/l,o=a.originalHeight/c;for(let a=0;a<s;a+=2)e[a]=i+(1-t[a])*n,e[a+1]=r+(1-t[a+1])*o;return;case 270:i-=a.offsetY/l,r-=a.offsetX/c,n=a.originalHeight/l,o=a.originalWidth/c;for(let a=0;a<s;a+=2)e[a]=i+(1-t[a+1])*n,e[a+1]=r+t[a]*o;return}i-=a.offsetX/l,r-=(a.originalHeight-a.offsetY-a.height)/c,n=a.originalWidth/l,o=a.originalHeight/c}else this.region?(n=this.region.u2-i,o=this.region.v2-r):(i=r=0,n=o=1);for(let a=0;a<s;a+=2)e[a]=i+t[a]*n,e[a+1]=r+t[a+1]*o}getParentMesh(){return this.parentMesh}setParentMesh(t){this.parentMesh=t,t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)}copy(){if(this.parentMesh)return this.newLinkedMesh();let t=new $t(this.name,this.path);return t.region=this.region,t.color.setFromColor(this.color),this.copyTo(t),t.regionUVs=new Array(this.regionUVs.length),a.arrayCopy(this.regionUVs,0,t.regionUVs,0,this.regionUVs.length),t.uvs=new Array(this.uvs.length),a.arrayCopy(this.uvs,0,t.uvs,0,this.uvs.length),t.triangles=new Array(this.triangles.length),a.arrayCopy(this.triangles,0,t.triangles,0,this.triangles.length),t.hullLength=this.hullLength,t.sequence=null!=this.sequence?this.sequence.copy():null,this.edges&&(t.edges=new Array(this.edges.length),a.arrayCopy(this.edges,0,t.edges,0,this.edges.length)),t.width=this.width,t.height=this.height,t}computeWorldVertices(t,e,s,i,r,n){null!=this.sequence&&this.sequence.apply(t,this),super.computeWorldVertices(t,e,s,i,r,n)}newLinkedMesh(){let t=new $t(this.name,this.path);return t.region=this.region,t.color.setFromColor(this.color),t.timelineAttachment=this.timelineAttachment,t.setParentMesh(this.parentMesh?this.parentMesh:this),null!=t.region&&t.updateRegion(),t}}class Ft extends c{constructor(t){super(t),this.lengths=[],this.closed=!1,this.constantSpeed=!1,this.color=new r(1,1,1,1)}copy(){let t=new Ft(this.name);return this.copyTo(t),t.lengths=new Array(this.lengths.length),a.arrayCopy(this.lengths,0,t.lengths,0,this.lengths.length),t.closed=closed,t.constantSpeed=this.constantSpeed,t.color.setFromColor(this.color),t}}class Vt extends c{constructor(t){super(t),this.x=0,this.y=0,this.rotation=0,this.color=new r(.38,.94,0,1)}computeWorldPosition(t,e){return e.x=this.x*t.a+this.y*t.b+t.worldX,e.y=this.x*t.c+this.y*t.d+t.worldY,e}computeWorldRotation(t){let e=n.cosDeg(this.rotation),s=n.sinDeg(this.rotation),i=e*t.a+s*t.b,r=e*t.c+s*t.d;return Math.atan2(r,i)*n.radDeg}copy(){let t=new Vt(this.name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t}}class Bt extends l{constructor(t,e){super(t),this.x=0,this.y=0,this.scaleX=1,this.scaleY=1,this.rotation=0,this.width=0,this.height=0,this.color=new r(1,1,1,1),this.region=null,this.sequence=null,this.offset=a.newFloatArray(8),this.uvs=a.newFloatArray(8),this.tempColor=new r(1,1,1,1),this.path=e}updateRegion(){if(!this.region)throw new Error("Region not set.");let t=this.region,e=this.uvs;if(null==t)return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=1,e[5]=1,e[6]=1,void(e[7]=0);let s=this.width/this.region.originalWidth*this.scaleX,i=this.height/this.region.originalHeight*this.scaleY,r=-this.width/2*this.scaleX+this.region.offsetX*s,n=-this.height/2*this.scaleY+this.region.offsetY*i,a=r+this.region.width*s,o=n+this.region.height*i,h=this.rotation*Math.PI/180,l=Math.cos(h),c=Math.sin(h),u=this.x,d=this.y,f=r*l+u,p=r*c,m=n*l+d,g=n*c,x=a*l+u,w=a*c,b=o*l+d,v=o*c,y=this.offset;y[0]=f-g,y[1]=m+p,y[2]=f-v,y[3]=b+p,y[4]=x-v,y[5]=b+w,y[6]=x-g,y[7]=m+w,90==t.degrees?(e[0]=t.u2,e[1]=t.v2,e[2]=t.u,e[3]=t.v2,e[4]=t.u,e[5]=t.v,e[6]=t.u2,e[7]=t.v):(e[0]=t.u,e[1]=t.v2,e[2]=t.u,e[3]=t.v,e[4]=t.u2,e[5]=t.v,e[6]=t.u2,e[7]=t.v2)}computeWorldVertices(t,e,s,i){null!=this.sequence&&this.sequence.apply(t,this);let r=t.bone,n=this.offset,a=r.worldX,o=r.worldY,h=r.a,l=r.b,c=r.c,u=r.d,d=0,f=0;d=n[0],f=n[1],e[s]=d*h+f*l+a,e[s+1]=d*c+f*u+o,s+=i,d=n[2],f=n[3],e[s]=d*h+f*l+a,e[s+1]=d*c+f*u+o,s+=i,d=n[4],f=n[5],e[s]=d*h+f*l+a,e[s+1]=d*c+f*u+o,s+=i,d=n[6],f=n[7],e[s]=d*h+f*l+a,e[s+1]=d*c+f*u+o}copy(){let t=new Bt(this.name,this.path);return t.region=this.region,t.x=this.x,t.y=this.y,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.rotation=this.rotation,t.width=this.width,t.height=this.height,a.arrayCopy(this.uvs,0,t.uvs,0,8),a.arrayCopy(this.offset,0,t.offset,0,8),t.color.setFromColor(this.color),t.sequence=null!=this.sequence?this.sequence.copy():null,t}}Bt.X1=0,Bt.Y1=1,Bt.C1R=2,Bt.C1G=3,Bt.C1B=4,Bt.C1A=5,Bt.U1=6,Bt.V1=7,Bt.X2=8,Bt.Y2=9,Bt.C2R=10,Bt.C2G=11,Bt.C2B=12,Bt.C2A=13,Bt.U2=14,Bt.V2=15,Bt.X3=16,Bt.Y3=17,Bt.C3R=18,Bt.C3G=19,Bt.C3B=20,Bt.C3A=21,Bt.U3=22,Bt.V3=23,Bt.X4=24,Bt.Y4=25,Bt.C4R=26,Bt.C4G=27,Bt.C4B=28,Bt.C4A=29,Bt.U4=30,Bt.V4=31;class qt{constructor(t){this.atlas=t}loadSequence(t,e,s){let i=s.regions;for(let r=0,n=i.length;r<n;r++){let n=s.getPath(e,r),a=this.atlas.findRegion(n);if(null==a)throw new Error("Region not found in atlas: "+n+" (sequence: "+t+")");i[r]=a}}newRegionAttachment(t,e,s,i){let r=new Bt(e,s);if(null!=i)this.loadSequence(e,s,i);else{let t=this.atlas.findRegion(s);if(!t)throw new Error("Region not found in atlas: "+s+" (region attachment: "+e+")");r.region=t}return r}newMeshAttachment(t,e,s,i){let r=new $t(e,s);if(null!=i)this.loadSequence(e,s,i);else{let t=this.atlas.findRegion(s);if(!t)throw new Error("Region not found in atlas: "+s+" (mesh attachment: "+e+")");r.region=t}return r}newBoundingBoxAttachment(t,e){return new At(e)}newPathAttachment(t,e){return new Ft(e)}newPointAttachment(t,e){return new Vt(e)}newClippingAttachment(t,e){return new It(e)}}class Wt{constructor(t,e,s){if(this.index=0,this.parent=null,this.length=0,this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=kt.Normal,this.skinRequired=!1,this.color=new r,t<0)throw new Error("index must be >= 0.");if(!e)throw new Error("name cannot be null.");this.index=t,this.name=e,this.parent=s}}!function(t){t[t.Normal=0]="Normal",t[t.OnlyTranslation=1]="OnlyTranslation",t[t.NoRotationOrReflection=2]="NoRotationOrReflection",t[t.NoScale=3]="NoScale",t[t.NoScaleOrReflection=4]="NoScaleOrReflection"}(kt||(kt={}));class zt{constructor(t,e,s){if(this.parent=null,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.a=0,this.b=0,this.c=0,this.d=0,this.worldY=0,this.worldX=0,this.sorted=!1,this.active=!1,!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=s,this.setToSetupPose()}isActive(){return this.active}update(){this.updateWorldTransformWith(this.ax,this.ay,this.arotation,this.ascaleX,this.ascaleY,this.ashearX,this.ashearY)}updateWorldTransform(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)}updateWorldTransformWith(t,e,s,i,r,a,o){this.ax=t,this.ay=e,this.arotation=s,this.ascaleX=i,this.ascaleY=r,this.ashearX=a,this.ashearY=o;let h=this.parent;if(!h){let h=this.skeleton,l=s+90+o,c=h.scaleX,u=h.scaleY;return this.a=n.cosDeg(s+a)*i*c,this.b=n.cosDeg(l)*r*c,this.c=n.sinDeg(s+a)*i*u,this.d=n.sinDeg(l)*r*u,this.worldX=t*c+h.x,void(this.worldY=e*u+h.y)}let l=h.a,c=h.b,u=h.c,d=h.d;switch(this.worldX=l*t+c*e+h.worldX,this.worldY=u*t+d*e+h.worldY,this.data.transformMode){case kt.Normal:{let t=s+90+o,e=n.cosDeg(s+a)*i,h=n.cosDeg(t)*r,f=n.sinDeg(s+a)*i,p=n.sinDeg(t)*r;return this.a=l*e+c*f,this.b=l*h+c*p,this.c=u*e+d*f,void(this.d=u*h+d*p)}case kt.OnlyTranslation:{let t=s+90+o;this.a=n.cosDeg(s+a)*i,this.b=n.cosDeg(t)*r,this.c=n.sinDeg(s+a)*i,this.d=n.sinDeg(t)*r;break}case kt.NoRotationOrReflection:{let t=l*l+u*u,e=0;t>1e-4?(t=Math.abs(l*d-c*u)/t,l/=this.skeleton.scaleX,u/=this.skeleton.scaleY,c=u*t,d=l*t,e=Math.atan2(u,l)*n.radDeg):(l=0,u=0,e=90-Math.atan2(d,c)*n.radDeg);let h=s+a-e,f=s+o-e+90,p=n.cosDeg(h)*i,m=n.cosDeg(f)*r,g=n.sinDeg(h)*i,x=n.sinDeg(f)*r;this.a=l*p-c*g,this.b=l*m-c*x,this.c=u*p+d*g,this.d=u*m+d*x;break}case kt.NoScale:case kt.NoScaleOrReflection:{let t=n.cosDeg(s),e=n.sinDeg(s),h=(l*t+c*e)/this.skeleton.scaleX,f=(u*t+d*e)/this.skeleton.scaleY,p=Math.sqrt(h*h+f*f);p>1e-5&&(p=1/p),h*=p,f*=p,p=Math.sqrt(h*h+f*f),this.data.transformMode==kt.NoScale&&l*d-c*u<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(p=-p);let m=Math.PI/2+Math.atan2(f,h),g=Math.cos(m)*p,x=Math.sin(m)*p,w=n.cosDeg(a)*i,b=n.cosDeg(90+o)*r,v=n.sinDeg(a)*i,y=n.sinDeg(90+o)*r;this.a=h*w+g*v,this.b=h*b+g*y,this.c=f*w+x*v,this.d=f*b+x*y;break}}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY}setToSetupPose(){let t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY}getWorldRotationX(){return Math.atan2(this.c,this.a)*n.radDeg}getWorldRotationY(){return Math.atan2(this.d,this.b)*n.radDeg}getWorldScaleX(){return Math.sqrt(this.a*this.a+this.c*this.c)}getWorldScaleY(){return Math.sqrt(this.b*this.b+this.d*this.d)}updateAppliedTransform(){let t=this.parent;if(!t)return this.ax=this.worldX-this.skeleton.x,this.ay=this.worldY-this.skeleton.y,this.arotation=Math.atan2(this.c,this.a)*n.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,void(this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*n.radDeg);let e=t.a,s=t.b,i=t.c,r=t.d,a=1/(e*r-s*i),o=this.worldX-t.worldX,h=this.worldY-t.worldY;this.ax=o*r*a-h*s*a,this.ay=h*e*a-o*i*a;let l=a*r,c=a*e,u=a*s,d=a*i,f=l*this.a-u*this.c,p=l*this.b-u*this.d,m=c*this.c-d*this.a,g=c*this.d-d*this.b;if(this.ashearX=0,this.ascaleX=Math.sqrt(f*f+m*m),this.ascaleX>1e-4){let t=f*g-p*m;this.ascaleY=t/this.ascaleX,this.ashearY=Math.atan2(f*p+m*g,t)*n.radDeg,this.arotation=Math.atan2(m,f)*n.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(p*p+g*g),this.ashearY=0,this.arotation=90-Math.atan2(g,p)*n.radDeg}worldToLocal(t){let e=1/(this.a*this.d-this.b*this.c),s=t.x-this.worldX,i=t.y-this.worldY;return t.x=s*this.d*e-i*this.b*e,t.y=i*this.a*e-s*this.c*e,t}localToWorld(t){let e=t.x,s=t.y;return t.x=e*this.a+s*this.b+this.worldX,t.y=e*this.c+s*this.d+this.worldY,t}worldToLocalRotation(t){let e=n.sinDeg(t),s=n.cosDeg(t);return Math.atan2(this.a*e-this.c*s,this.d*s-this.b*e)*n.radDeg+this.rotation-this.shearX}localToWorldRotation(t){t-=this.rotation-this.shearX;let e=n.sinDeg(t),s=n.cosDeg(t);return Math.atan2(s*this.c+e*this.d,s*this.a+e*this.b)*n.radDeg}rotateWorld(t){let e=this.a,s=this.b,i=this.c,r=this.d,a=n.cosDeg(t),o=n.sinDeg(t);this.a=a*e-o*i,this.b=a*s-o*r,this.c=o*e+a*i,this.d=o*s+a*r}}class Gt{constructor(t,e,s){this.name=t,this.order=e,this.skinRequired=s}}class Ut{constructor(t,e){if(this.intValue=0,this.floatValue=0,this.stringValue=null,this.time=0,this.volume=0,this.balance=0,!e)throw new Error("data cannot be null.");this.time=t,this.data=e}}class jt{constructor(t){this.intValue=0,this.floatValue=0,this.stringValue=null,this.audioPath=null,this.volume=0,this.balance=0,this.name=t}}class Ht{constructor(t,e){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(let s=0;s<t.bones.length;s++){let i=e.findBone(t.bones[s].name);if(!i)throw new Error(`Couldn't find bone ${t.bones[s].name}`);this.bones.push(i)}let s=e.findBone(t.target.name);if(!s)throw new Error(`Couldn't find bone ${t.target.name}`);this.target=s}isActive(){return this.active}update(){if(0==this.mix)return;let t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.data.uniform,this.softness,this.mix)}}apply1(t,e,s,i,r,a,o){let h=t.parent;if(!h)throw new Error("IK bone must have parent.");let l=h.a,c=h.b,u=h.c,d=h.d,f=-t.ashearX-t.arotation,p=0,m=0;switch(t.data.transformMode){case kt.OnlyTranslation:p=e-t.worldX,m=s-t.worldY;break;case kt.NoRotationOrReflection:let i=Math.abs(l*d-c*u)/Math.max(1e-4,l*l+u*u),r=l/t.skeleton.scaleX,a=u/t.skeleton.scaleY;c=-a*i*t.skeleton.scaleX,d=r*i*t.skeleton.scaleY,f+=Math.atan2(a,r)*n.radDeg;default:let o=e-h.worldX,g=s-h.worldY,x=l*d-c*u;Math.abs(x)<=1e-4?(p=0,m=0):(p=(o*d-g*c)/x-t.ax,m=(g*l-o*u)/x-t.ay)}f+=Math.atan2(m,p)*n.radDeg,t.ascaleX<0&&(f+=180),f>180?f-=360:f<-180&&(f+=360);let g=t.ascaleX,x=t.ascaleY;if(i||r){switch(t.data.transformMode){case kt.NoScale:case kt.NoScaleOrReflection:p=e-t.worldX,m=s-t.worldY}let n=t.data.length*g,h=Math.sqrt(p*p+m*m);if(i&&h<n||r&&h>n&&n>1e-4){let t=(h/n-1)*o+1;g*=t,a&&(x*=t)}}t.updateWorldTransformWith(t.ax,t.ay,t.arotation+f*o,g,x,t.ashearX,t.ashearY)}apply2(t,e,s,i,r,a,o,h,l){let c=t.ax,u=t.ay,d=t.ascaleX,f=t.ascaleY,p=d,m=f,g=e.ascaleX,x=0,w=0,b=0;d<0?(d=-d,x=180,b=-1):(x=0,b=1),f<0&&(f=-f,b=-b),g<0?(g=-g,w=180):w=0;let v=e.ax,y=0,E=0,A=0,I=t.a,S=t.b,R=t.c,k=t.d,C=Math.abs(d-f)<=1e-4;!C||a?(y=0,E=I*v+t.worldX,A=R*v+t.worldY):(y=e.ay,E=I*v+S*y+t.worldX,A=R*v+k*y+t.worldY);let T=t.parent;if(!T)throw new Error("IK parent must itself have a parent.");I=T.a,S=T.b,R=T.c,k=T.d;let M=I*k-S*R,Y=E-T.worldX,X=A-T.worldY;M=Math.abs(M)<=1e-4?0:1/M;let N,_,L=(Y*k-X*S)*M-c,P=(X*I-Y*R)*M-u,D=Math.sqrt(L*L+P*P),O=e.data.length*g;if(D<1e-4)return this.apply1(t,s,i,!1,a,!1,l),void e.updateWorldTransformWith(v,y,0,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY);Y=s-T.worldX,X=i-T.worldY;let $=(Y*k-X*S)*M-c,F=(X*I-Y*R)*M-u,V=$*$+F*F;if(0!=h){h*=d*(g+1)*.5;let t=Math.sqrt(V),e=t-D-O*d+h;if(e>0){let s=Math.min(1,e/(2*h))-1;s=(e-h*(1-s*s))/t,$-=s*$,F-=s*F,V=$*$+F*F}}t:if(C){O*=d;let t=(V-D*D-O*O)/(2*D*O);t<-1?(t=-1,_=Math.PI*r):t>1?(t=1,_=0,a&&(I=(Math.sqrt(V)/(D+O)-1)*l+1,p*=I,o&&(m*=I))):_=Math.acos(t)*r,I=D+O*t,S=O*Math.sin(_),N=Math.atan2(F*I-$*S,$*I+F*S)}else{I=d*O,S=f*O;let t=I*I,e=S*S,s=Math.atan2(F,$);R=e*D*D+t*V-t*e;let i=-2*e*D,a=e-t;if(k=i*i-4*a*R,k>=0){let t=Math.sqrt(k);i<0&&(t=-t),t=.5*-(i+t);let e=t/a,n=R/t,o=Math.abs(e)<Math.abs(n)?e:n;if(o*o<=V){X=Math.sqrt(V-o*o)*r,N=s-Math.atan2(X,o),_=Math.atan2(X/f,(o-D)/d);break t}}let o=n.PI,h=D-I,l=h*h,c=0,u=0,p=D+I,m=p*p,g=0;R=-I*D/(t-e),R>=-1&&R<=1&&(R=Math.acos(R),Y=I*Math.cos(R)+D,X=S*Math.sin(R),k=Y*Y+X*X,k<l&&(o=R,l=k,h=Y,c=X),k>m&&(u=R,m=k,p=Y,g=X)),V<=.5*(l+m)?(N=s-Math.atan2(c*r,h),_=o*r):(N=s-Math.atan2(g*r,p),_=u*r)}let B=Math.atan2(y,v)*b,q=t.arotation;N=(N-B)*n.radDeg+x-q,N>180?N-=360:N<-180&&(N+=360),t.updateWorldTransformWith(c,u,q+N*l,p,m,0,0),q=e.arotation,_=((_+B)*n.radDeg-e.ashearX)*b+w-q,_>180?_-=360:_<-180&&(_+=360),e.updateWorldTransformWith(v,y,q+_*l,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)}}class Kt extends Gt{set target(t){this._target=t}get target(){if(this._target)return this._target;throw new Error("BoneData not set.")}constructor(t){super(t,0,!1),this.bones=new Array,this._target=null,this.bendDirection=1,this.compress=!1,this.stretch=!1,this.uniform=!1,this.mix=1,this.softness=0}}class Zt extends Gt{set target(t){this._target=t}get target(){if(this._target)return this._target;throw new Error("SlotData not set.")}constructor(t){super(t,0,!1),this.bones=new Array,this._target=null,this.positionMode=Ct.Fixed,this.spacingMode=Tt.Fixed,this.rotateMode=Mt.Chain,this.offsetRotation=0,this.position=0,this.spacing=0,this.mixRotate=0,this.mixX=0,this.mixY=0}}!function(t){t[t.Fixed=0]="Fixed",t[t.Percent=1]="Percent"}(Ct||(Ct={})),function(t){t[t.Length=0]="Length",t[t.Fixed=1]="Fixed",t[t.Percent=2]="Percent",t[t.Proportional=3]="Proportional"}(Tt||(Tt={})),function(t){t[t.Tangent=0]="Tangent",t[t.Chain=1]="Chain",t[t.ChainScale=2]="ChainScale"}(Mt||(Mt={}));class Jt{constructor(t,e){if(this.position=0,this.spacing=0,this.mixRotate=0,this.mixX=0,this.mixY=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(let s=0,i=t.bones.length;s<i;s++){let i=e.findBone(t.bones[s].name);if(!i)throw new Error(`Couldn't find bone ${t.bones[s].name}.`);this.bones.push(i)}let s=e.findSlot(t.target.name);if(!s)throw new Error(`Couldn't find target bone ${t.target.name}`);this.target=s,this.position=t.position,this.spacing=t.spacing,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY}isActive(){return this.active}update(){let t=this.target.getAttachment();if(!(t instanceof Ft))return;let e=this.mixRotate,s=this.mixX,i=this.mixY;if(0==e&&0==s&&0==i)return;let r=this.data,o=r.rotateMode==Mt.Tangent,h=r.rotateMode==Mt.ChainScale,l=this.bones,c=l.length,u=o?c:c+1,d=a.setArraySize(this.spaces,u),f=h?this.lengths=a.setArraySize(this.lengths,c):[],p=this.spacing;switch(r.spacingMode){case Tt.Percent:if(h)for(let t=0,e=u-1;t<e;t++){let e=l[t],s=e.data.length;if(s<Jt.epsilon)f[t]=0;else{let i=s*e.a,r=s*e.c;f[t]=Math.sqrt(i*i+r*r)}}a.arrayFill(d,1,u,p);break;case Tt.Proportional:let t=0;for(let e=0,s=u-1;e<s;){let s=l[e],i=s.data.length;if(i<Jt.epsilon)h&&(f[e]=0),d[++e]=p;else{let r=i*s.a,n=i*s.c,a=Math.sqrt(r*r+n*n);h&&(f[e]=a),d[++e]=a,t+=a}}if(t>0){t=u/t*p;for(let e=1;e<u;e++)d[e]*=t}break;default:let e=r.spacingMode==Tt.Length;for(let t=0,s=u-1;t<s;){let s=l[t],i=s.data.length;if(i<Jt.epsilon)h&&(f[t]=0),d[++t]=p;else{let r=i*s.a,n=i*s.c,a=Math.sqrt(r*r+n*n);h&&(f[t]=a),d[++t]=(e?i+p:p)*a/i}}}let m=this.computeWorldPositions(t,u,o),g=m[0],x=m[1],w=r.offsetRotation,b=!1;if(0==w)b=r.rotateMode==Mt.Chain;else{b=!1;let t=this.target.bone;w*=t.a*t.d-t.b*t.c>0?n.degRad:-n.degRad}for(let t=0,r=3;t<c;t++,r+=3){let a=l[t];a.worldX+=(g-a.worldX)*s,a.worldY+=(x-a.worldY)*i;let c=m[r],u=m[r+1],p=c-g,v=u-x;if(h){let s=f[t];if(0!=s){let t=(Math.sqrt(p*p+v*v)/s-1)*e+1;a.a*=t,a.c*=t}}if(g=c,x=u,e>0){let s=a.a,i=a.b,h=a.c,l=a.d,c=0,u=0,f=0;if(c=o?m[r-1]:0==d[t+1]?m[r+2]:Math.atan2(v,p),c-=Math.atan2(h,s),b){u=Math.cos(c),f=Math.sin(c);let t=a.data.length;g+=(t*(u*s-f*h)-p)*e,x+=(t*(f*s+u*h)-v)*e}else c+=w;c>n.PI?c-=n.PI2:c<-n.PI&&(c+=n.PI2),c*=e,u=Math.cos(c),f=Math.sin(c),a.a=u*s-f*h,a.b=u*i-f*l,a.c=f*s+u*h,a.d=f*i+u*l}a.updateAppliedTransform()}}computeWorldPositions(t,e,s){let i=this.target,r=this.position,n=this.spaces,o=a.setArraySize(this.positions,3*e+2),h=this.world,l=t.closed,c=t.worldVerticesLength,u=c/6,d=Jt.NONE;if(!t.constantSpeed){let f=t.lengths;u-=l?1:2;let p,m=f[u];switch(this.data.positionMode==Ct.Percent&&(r*=m),this.data.spacingMode){case Tt.Percent:p=m;break;case Tt.Proportional:p=m/e;break;default:p=1}h=a.setArraySize(this.world,8);for(let a=0,g=0,x=0;a<e;a++,g+=3){let e=n[a]*p;r+=e;let w=r;if(l)w%=m,w<0&&(w+=m),x=0;else{if(w<0){d!=Jt.BEFORE&&(d=Jt.BEFORE,t.computeWorldVertices(i,2,4,h,0,2)),this.addBeforePosition(w,h,0,o,g);continue}if(w>m){d!=Jt.AFTER&&(d=Jt.AFTER,t.computeWorldVertices(i,c-6,4,h,0,2)),this.addAfterPosition(w-m,h,0,o,g);continue}}for(;;x++){let t=f[x];if(!(w>t)){if(0==x)w/=t;else{let e=f[x-1];w=(w-e)/(t-e)}break}}x!=d&&(d=x,l&&x==u?(t.computeWorldVertices(i,c-4,4,h,0,2),t.computeWorldVertices(i,0,4,h,4,2)):t.computeWorldVertices(i,6*x+2,8,h,0,2)),this.addCurvePosition(w,h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],o,g,s||a>0&&0==e)}return o}l?(c+=2,h=a.setArraySize(this.world,c),t.computeWorldVertices(i,2,c-4,h,0,2),t.computeWorldVertices(i,0,2,h,c-4,2),h[c-2]=h[0],h[c-1]=h[1]):(u--,c-=4,h=a.setArraySize(this.world,c),t.computeWorldVertices(i,2,c,h,0,2));let f,p=a.setArraySize(this.curves,u),m=0,g=h[0],x=h[1],w=0,b=0,v=0,y=0,E=0,A=0,I=0,S=0,R=0,k=0,C=0,T=0,M=0,Y=0;for(let t=0,e=2;t<u;t++,e+=6)w=h[e],b=h[e+1],v=h[e+2],y=h[e+3],E=h[e+4],A=h[e+5],I=.1875*(g-2*w+v),S=.1875*(x-2*b+y),R=.09375*(3*(w-v)-g+E),k=.09375*(3*(b-y)-x+A),C=2*I+R,T=2*S+k,M=.75*(w-g)+I+.16666667*R,Y=.75*(b-x)+S+.16666667*k,m+=Math.sqrt(M*M+Y*Y),M+=C,Y+=T,C+=R,T+=k,m+=Math.sqrt(M*M+Y*Y),M+=C,Y+=T,m+=Math.sqrt(M*M+Y*Y),M+=C+R,Y+=T+k,m+=Math.sqrt(M*M+Y*Y),p[t]=m,g=E,x=A;switch(this.data.positionMode==Ct.Percent&&(r*=m),this.data.spacingMode){case Tt.Percent:f=m;break;case Tt.Proportional:f=m/e;break;default:f=1}let X=this.segments,N=0;for(let t=0,i=0,a=0,u=0;t<e;t++,i+=3){let e=n[t]*f;r+=e;let _=r;if(l)_%=m,_<0&&(_+=m),a=0;else{if(_<0){this.addBeforePosition(_,h,0,o,i);continue}if(_>m){this.addAfterPosition(_-m,h,c-4,o,i);continue}}for(;;a++){let t=p[a];if(!(_>t)){if(0==a)_/=t;else{let e=p[a-1];_=(_-e)/(t-e)}break}}if(a!=d){d=a;let t=6*a;for(g=h[t],x=h[t+1],w=h[t+2],b=h[t+3],v=h[t+4],y=h[t+5],E=h[t+6],A=h[t+7],I=.03*(g-2*w+v),S=.03*(x-2*b+y),R=.006*(3*(w-v)-g+E),k=.006*(3*(b-y)-x+A),C=2*I+R,T=2*S+k,M=.3*(w-g)+I+.16666667*R,Y=.3*(b-x)+S+.16666667*k,N=Math.sqrt(M*M+Y*Y),X[0]=N,t=1;t<8;t++)M+=C,Y+=T,C+=R,T+=k,N+=Math.sqrt(M*M+Y*Y),X[t]=N;M+=C,Y+=T,N+=Math.sqrt(M*M+Y*Y),X[8]=N,M+=C+R,Y+=T+k,N+=Math.sqrt(M*M+Y*Y),X[9]=N,u=0}for(_*=N;;u++){let t=X[u];if(!(_>t)){if(0==u)_/=t;else{let e=X[u-1];_=u+(_-e)/(t-e)}break}}this.addCurvePosition(.1*_,g,x,w,b,v,y,E,A,o,i,s||t>0&&0==e)}return o}addBeforePosition(t,e,s,i,r){let n=e[s],a=e[s+1],o=e[s+2]-n,h=e[s+3]-a,l=Math.atan2(h,o);i[r]=n+t*Math.cos(l),i[r+1]=a+t*Math.sin(l),i[r+2]=l}addAfterPosition(t,e,s,i,r){let n=e[s+2],a=e[s+3],o=n-e[s],h=a-e[s+1],l=Math.atan2(h,o);i[r]=n+t*Math.cos(l),i[r+1]=a+t*Math.sin(l),i[r+2]=l}addCurvePosition(t,e,s,i,r,n,a,o,h,l,c,u){if(0==t||isNaN(t))return l[c]=e,l[c+1]=s,void(l[c+2]=Math.atan2(r-s,i-e));let d=t*t,f=d*t,p=1-t,m=p*p,g=m*p,x=p*t,w=3*x,b=p*w,v=w*t,y=e*g+i*b+n*v+o*f,E=s*g+r*b+a*v+h*f;l[c]=y,l[c+1]=E,u&&(l[c+2]=t<.001?Math.atan2(r-s,i-e):Math.atan2(E-(s*m+r*x*2+a*d),y-(e*m+i*x*2+n*d)))}}Jt.NONE=-1,Jt.BEFORE=-2,Jt.AFTER=-3,Jt.epsilon=1e-5;class Qt{constructor(t,e){if(this.darkColor=null,this.attachment=null,this.attachmentState=0,this.sequenceIndex=-1,this.deform=new Array,!t)throw new Error("data cannot be null.");if(!e)throw new Error("bone cannot be null.");this.data=t,this.bone=e,this.color=new r,this.darkColor=t.darkColor?new r:null,this.setToSetupPose()}getSkeleton(){return this.bone.skeleton}getAttachment(){return this.attachment}setAttachment(t){this.attachment!=t&&(t instanceof c&&this.attachment instanceof c&&t.timelineAttachment==this.attachment.timelineAttachment||(this.deform.length=0),this.attachment=t,this.sequenceIndex=-1)}setToSetupPose(){this.color.setFromColor(this.data.color),this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName?(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName))):this.attachment=null}}class te{constructor(t,e){if(this.mixRotate=0,this.mixX=0,this.mixY=0,this.mixScaleX=0,this.mixScaleY=0,this.mixShearY=0,this.temp=new h,this.active=!1,!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY,this.mixScaleX=t.mixScaleX,this.mixScaleY=t.mixScaleY,this.mixShearY=t.mixShearY,this.bones=new Array;for(let s=0;s<t.bones.length;s++){let i=e.findBone(t.bones[s].name);if(!i)throw new Error(`Couldn't find bone ${t.bones[s].name}.`);this.bones.push(i)}let s=e.findBone(t.target.name);if(!s)throw new Error(`Couldn't find target bone ${t.target.name}.`);this.target=s}isActive(){return this.active}update(){0==this.mixRotate&&0==this.mixX&&0==this.mixY&&0==this.mixScaleX&&0==this.mixScaleY&&0==this.mixShearY||(this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld())}applyAbsoluteWorld(){let t=this.mixRotate,e=this.mixX,s=this.mixY,i=this.mixScaleX,r=this.mixScaleY,a=this.mixShearY,o=0!=e||0!=s,h=this.target,l=h.a,c=h.b,u=h.c,d=h.d,f=l*d-c*u>0?n.degRad:-n.degRad,p=this.data.offsetRotation*f,m=this.data.offsetShearY*f,g=this.bones;for(let f=0,x=g.length;f<x;f++){let x=g[f];if(0!=t){let e=x.a,s=x.b,i=x.c,r=x.d,a=Math.atan2(u,l)-Math.atan2(i,e)+p;a>n.PI?a-=n.PI2:a<-n.PI&&(a+=n.PI2),a*=t;let o=Math.cos(a),h=Math.sin(a);x.a=o*e-h*i,x.b=o*s-h*r,x.c=h*e+o*i,x.d=h*s+o*r}if(o){let t=this.temp;h.localToWorld(t.set(this.data.offsetX,this.data.offsetY)),x.worldX+=(t.x-x.worldX)*e,x.worldY+=(t.y-x.worldY)*s}if(0!=i){let t=Math.sqrt(x.a*x.a+x.c*x.c);0!=t&&(t=(t+(Math.sqrt(l*l+u*u)-t+this.data.offsetScaleX)*i)/t),x.a*=t,x.c*=t}if(0!=r){let t=Math.sqrt(x.b*x.b+x.d*x.d);0!=t&&(t=(t+(Math.sqrt(c*c+d*d)-t+this.data.offsetScaleY)*r)/t),x.b*=t,x.d*=t}if(a>0){let t=x.b,e=x.d,s=Math.atan2(e,t),i=Math.atan2(d,c)-Math.atan2(u,l)-(s-Math.atan2(x.c,x.a));i>n.PI?i-=n.PI2:i<-n.PI&&(i+=n.PI2),i=s+(i+m)*a;let r=Math.sqrt(t*t+e*e);x.b=Math.cos(i)*r,x.d=Math.sin(i)*r}x.updateAppliedTransform()}}applyRelativeWorld(){let t=this.mixRotate,e=this.mixX,s=this.mixY,i=this.mixScaleX,r=this.mixScaleY,a=this.mixShearY,o=0!=e||0!=s,h=this.target,l=h.a,c=h.b,u=h.c,d=h.d,f=l*d-c*u>0?n.degRad:-n.degRad,p=this.data.offsetRotation*f,m=this.data.offsetShearY*f,g=this.bones;for(let f=0,x=g.length;f<x;f++){let x=g[f];if(0!=t){let e=x.a,s=x.b,i=x.c,r=x.d,a=Math.atan2(u,l)+p;a>n.PI?a-=n.PI2:a<-n.PI&&(a+=n.PI2),a*=t;let o=Math.cos(a),h=Math.sin(a);x.a=o*e-h*i,x.b=o*s-h*r,x.c=h*e+o*i,x.d=h*s+o*r}if(o){let t=this.temp;h.localToWorld(t.set(this.data.offsetX,this.data.offsetY)),x.worldX+=t.x*e,x.worldY+=t.y*s}if(0!=i){let t=(Math.sqrt(l*l+u*u)-1+this.data.offsetScaleX)*i+1;x.a*=t,x.c*=t}if(0!=r){let t=(Math.sqrt(c*c+d*d)-1+this.data.offsetScaleY)*r+1;x.b*=t,x.d*=t}if(a>0){let t=Math.atan2(d,c)-Math.atan2(u,l);t>n.PI?t-=n.PI2:t<-n.PI&&(t+=n.PI2);let e=x.b,s=x.d;t=Math.atan2(s,e)+(t-n.PI/2+m)*a;let i=Math.sqrt(e*e+s*s);x.b=Math.cos(t)*i,x.d=Math.sin(t)*i}x.updateAppliedTransform()}}applyAbsoluteLocal(){let t=this.mixRotate,e=this.mixX,s=this.mixY,i=this.mixScaleX,r=this.mixScaleY,n=this.mixShearY,a=this.target,o=this.bones;for(let h=0,l=o.length;h<l;h++){let l=o[h],c=l.arotation;if(0!=t){let e=a.arotation-c+this.data.offsetRotation;e-=360*(16384-(16384.499999999996-e/360|0)),c+=e*t}let u=l.ax,d=l.ay;u+=(a.ax-u+this.data.offsetX)*e,d+=(a.ay-d+this.data.offsetY)*s;let f=l.ascaleX,p=l.ascaleY;0!=i&&0!=f&&(f=(f+(a.ascaleX-f+this.data.offsetScaleX)*i)/f),0!=r&&0!=p&&(p=(p+(a.ascaleY-p+this.data.offsetScaleY)*r)/p);let m=l.ashearY;if(0!=n){let t=a.ashearY-m+this.data.offsetShearY;t-=360*(16384-(16384.499999999996-t/360|0)),m+=t*n}l.updateWorldTransformWith(u,d,c,f,p,l.ashearX,m)}}applyRelativeLocal(){let t=this.mixRotate,e=this.mixX,s=this.mixY,i=this.mixScaleX,r=this.mixScaleY,n=this.mixShearY,a=this.target,o=this.bones;for(let h=0,l=o.length;h<l;h++){let l=o[h],c=l.arotation+(a.arotation+this.data.offsetRotation)*t,u=l.ax+(a.ax+this.data.offsetX)*e,d=l.ay+(a.ay+this.data.offsetY)*s,f=l.ascaleX*((a.ascaleX-1+this.data.offsetScaleX)*i+1),p=l.ascaleY*((a.ascaleY-1+this.data.offsetScaleY)*r+1),m=l.ashearY+(a.ashearY+this.data.offsetShearY)*n;l.updateWorldTransformWith(u,d,c,f,p,l.ashearX,m)}}}class ee{get scaleY(){return ee.yDown?-this._scaleY:this._scaleY}set scaleY(t){this._scaleY=t}constructor(t){if(this._updateCache=new Array,this.skin=null,this.scaleX=1,this._scaleY=1,this.x=0,this.y=0,!t)throw new Error("data cannot be null.");this.data=t,this.bones=new Array;for(let e=0;e<t.bones.length;e++){let s,i=t.bones[e];if(i.parent){let t=this.bones[i.parent.index];s=new zt(i,this,t),t.children.push(s)}else s=new zt(i,this,null);this.bones.push(s)}this.slots=new Array,this.drawOrder=new Array;for(let e=0;e<t.slots.length;e++){let s=t.slots[e],i=this.bones[s.boneData.index],r=new Qt(s,i);this.slots.push(r),this.drawOrder.push(r)}this.ikConstraints=new Array;for(let e=0;e<t.ikConstraints.length;e++){let s=t.ikConstraints[e];this.ikConstraints.push(new Ht(s,this))}this.transformConstraints=new Array;for(let e=0;e<t.transformConstraints.length;e++){let s=t.transformConstraints[e];this.transformConstraints.push(new te(s,this))}this.pathConstraints=new Array;for(let e=0;e<t.pathConstraints.length;e++){let s=t.pathConstraints[e];this.pathConstraints.push(new Jt(s,this))}this.color=new r(1,1,1,1),this.updateCache()}updateCache(){this._updateCache.length=0;let t=this.bones;for(let e=0,s=t.length;e<s;e++){let s=t[e];s.sorted=s.data.skinRequired,s.active=!s.sorted}if(this.skin){let t=this.skin.bones;for(let e=0,s=this.skin.bones.length;e<s;e++){let s=this.bones[t[e].index];do{s.sorted=!1,s.active=!0,s=s.parent}while(s)}}let e=this.ikConstraints,s=this.transformConstraints,i=this.pathConstraints,r=e.length,n=s.length,a=i.length,o=r+n+a;t:for(let t=0;t<o;t++){for(let s=0;s<r;s++){let i=e[s];if(i.data.order==t){this.sortIkConstraint(i);continue t}}for(let e=0;e<n;e++){let i=s[e];if(i.data.order==t){this.sortTransformConstraint(i);continue t}}for(let e=0;e<a;e++){let s=i[e];if(s.data.order==t){this.sortPathConstraint(s);continue t}}}for(let e=0,s=t.length;e<s;e++)this.sortBone(t[e])}sortIkConstraint(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&a.contains(this.skin.constraints,t.data,!0)),!t.active)return;let e=t.target;this.sortBone(e);let s=t.bones,i=s[0];if(this.sortBone(i),1==s.length)this._updateCache.push(t),this.sortReset(i.children);else{let e=s[s.length-1];this.sortBone(e),this._updateCache.push(t),this.sortReset(i.children),e.sorted=!0}}sortPathConstraint(t){if(t.active=t.target.bone.isActive()&&(!t.data.skinRequired||this.skin&&a.contains(this.skin.constraints,t.data,!0)),!t.active)return;let e=t.target,s=e.data.index,i=e.bone;this.skin&&this.sortPathConstraintAttachment(this.skin,s,i),this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,s,i);for(let t=0,e=this.data.skins.length;t<e;t++)this.sortPathConstraintAttachment(this.data.skins[t],s,i);let r=e.getAttachment();r instanceof Ft&&this.sortPathConstraintAttachmentWith(r,i);let n=t.bones,o=n.length;for(let t=0;t<o;t++)this.sortBone(n[t]);this._updateCache.push(t);for(let t=0;t<o;t++)this.sortReset(n[t].children);for(let t=0;t<o;t++)n[t].sorted=!0}sortTransformConstraint(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&a.contains(this.skin.constraints,t.data,!0)),!t.active)return;this.sortBone(t.target);let e=t.bones,s=e.length;if(t.data.local)for(let t=0;t<s;t++){let s=e[t];this.sortBone(s.parent),this.sortBone(s)}else for(let t=0;t<s;t++)this.sortBone(e[t]);this._updateCache.push(t);for(let t=0;t<s;t++)this.sortReset(e[t].children);for(let t=0;t<s;t++)e[t].sorted=!0}sortPathConstraintAttachment(t,e,s){let i=t.attachments[e];if(i)for(let t in i)this.sortPathConstraintAttachmentWith(i[t],s)}sortPathConstraintAttachmentWith(t,e){if(!(t instanceof Ft))return;let s=t.bones;if(s){let t=this.bones;for(let e=0,i=s.length;e<i;){let i=s[e++];for(i+=e;e<i;)this.sortBone(t[s[e++]])}}else this.sortBone(e)}sortBone(t){if(!t)return;if(t.sorted)return;let e=t.parent;e&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}sortReset(t){for(let e=0,s=t.length;e<s;e++){let s=t[e];s.active&&(s.sorted&&this.sortReset(s.children),s.sorted=!1)}}updateWorldTransform(){let t=this.bones;for(let e=0,s=t.length;e<s;e++){let s=t[e];s.ax=s.x,s.ay=s.y,s.arotation=s.rotation,s.ascaleX=s.scaleX,s.ascaleY=s.scaleY,s.ashearX=s.shearX,s.ashearY=s.shearY}let e=this._updateCache;for(let t=0,s=e.length;t<s;t++)e[t].update()}updateWorldTransformWith(t){let e=this.getRootBone();if(!e)throw new Error("Root bone must not be null.");let s=t.a,i=t.b,r=t.c,a=t.d;e.worldX=s*this.x+i*this.y+t.worldX,e.worldY=r*this.x+a*this.y+t.worldY;let o=e.rotation+90+e.shearY,h=n.cosDeg(e.rotation+e.shearX)*e.scaleX,l=n.cosDeg(o)*e.scaleY,c=n.sinDeg(e.rotation+e.shearX)*e.scaleX,u=n.sinDeg(o)*e.scaleY;e.a=(s*h+i*c)*this.scaleX,e.b=(s*l+i*u)*this.scaleX,e.c=(r*h+a*c)*this.scaleY,e.d=(r*l+a*u)*this.scaleY;let d=this._updateCache;for(let t=0,s=d.length;t<s;t++){let s=d[t];s!=e&&s.update()}}setToSetupPose(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()}setBonesToSetupPose(){let t=this.bones;for(let e=0,s=t.length;e<s;e++)t[e].setToSetupPose();let e=this.ikConstraints;for(let t=0,s=e.length;t<s;t++){let s=e[t];s.mix=s.data.mix,s.softness=s.data.softness,s.bendDirection=s.data.bendDirection,s.compress=s.data.compress,s.stretch=s.data.stretch}let s=this.transformConstraints;for(let t=0,e=s.length;t<e;t++){let e=s[t],i=e.data;e.mixRotate=i.mixRotate,e.mixX=i.mixX,e.mixY=i.mixY,e.mixScaleX=i.mixScaleX,e.mixScaleY=i.mixScaleY,e.mixShearY=i.mixShearY}let i=this.pathConstraints;for(let t=0,e=i.length;t<e;t++){let e=i[t],s=e.data;e.position=s.position,e.spacing=s.spacing,e.mixRotate=s.mixRotate,e.mixX=s.mixX,e.mixY=s.mixY}}setSlotsToSetupPose(){let t=this.slots;a.arrayCopy(t,0,this.drawOrder,0,t.length);for(let e=0,s=t.length;e<s;e++)t[e].setToSetupPose()}getRootBone(){return 0==this.bones.length?null:this.bones[0]}findBone(t){if(!t)throw new Error("boneName cannot be null.");let e=this.bones;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(i.data.name==t)return i}return null}findSlot(t){if(!t)throw new Error("slotName cannot be null.");let e=this.slots;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(i.data.name==t)return i}return null}setSkinByName(t){let e=this.data.findSkin(t);if(!e)throw new Error("Skin not found: "+t);this.setSkin(e)}setSkin(t){if(t!=this.skin){if(t)if(this.skin)t.attachAll(this,this.skin);else{let e=this.slots;for(let s=0,i=e.length;s<i;s++){let i=e[s],r=i.data.attachmentName;if(r){let e=t.getAttachment(s,r);e&&i.setAttachment(e)}}}this.skin=t,this.updateCache()}}getAttachmentByName(t,e){let s=this.data.findSlot(t);if(!s)throw new Error(`Can't find slot with name ${t}`);return this.getAttachment(s.index,e)}getAttachment(t,e){if(!e)throw new Error("attachmentName cannot be null.");if(this.skin){let s=this.skin.getAttachment(t,e);if(s)return s}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null}setAttachment(t,e){if(!t)throw new Error("slotName cannot be null.");let s=this.slots;for(let i=0,r=s.length;i<r;i++){let r=s[i];if(r.data.name==t){let s=null;if(e&&(s=this.getAttachment(i,e),!s))throw new Error("Attachment not found: "+e+", for slot: "+t);return void r.setAttachment(s)}}throw new Error("Slot not found: "+t)}findIkConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let e=this.ikConstraints;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(i.data.name==t)return i}return null}findTransformConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let e=this.transformConstraints;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(i.data.name==t)return i}return null}findPathConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let e=this.pathConstraints;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(i.data.name==t)return i}return null}getBoundsRect(){let t=new h,e=new h;return this.getBounds(t,e),{x:t.x,y:t.y,width:e.x,height:e.y}}getBounds(t,e,s=new Array(2)){if(!t)throw new Error("offset cannot be null.");if(!e)throw new Error("size cannot be null.");let i=this.drawOrder,r=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,h=Number.NEGATIVE_INFINITY;for(let t=0,e=i.length;t<e;t++){let e=i[t];if(!e.bone.active)continue;let l=0,c=null,u=e.getAttachment();if(u instanceof Bt)l=8,c=a.setArraySize(s,l,0),u.computeWorldVertices(e,c,0,2);else if(u instanceof $t){let t=u;l=t.worldVerticesLength,c=a.setArraySize(s,l,0),t.computeWorldVertices(e,0,l,c,0,2)}if(c)for(let t=0,e=c.length;t<e;t+=2){let e=c[t],s=c[t+1];r=Math.min(r,e),n=Math.min(n,s),o=Math.max(o,e),h=Math.max(h,s)}}t.set(r,n),e.set(o-r,h-n)}}ee.yDown=!1;class se{constructor(){this.name=null,this.bones=new Array,this.slots=new Array,this.skins=new Array,this.defaultSkin=null,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.x=0,this.y=0,this.width=0,this.height=0,this.version=null,this.hash=null,this.fps=0,this.imagesPath=null,this.audioPath=null}findBone(t){if(!t)throw new Error("boneName cannot be null.");let e=this.bones;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(i.name==t)return i}return null}findSlot(t){if(!t)throw new Error("slotName cannot be null.");let e=this.slots;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(i.name==t)return i}return null}findSkin(t){if(!t)throw new Error("skinName cannot be null.");let e=this.skins;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(i.name==t)return i}return null}findEvent(t){if(!t)throw new Error("eventDataName cannot be null.");let e=this.events;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(i.name==t)return i}return null}findAnimation(t){if(!t)throw new Error("animationName cannot be null.");let e=this.animations;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(i.name==t)return i}return null}findIkConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let e=this.ikConstraints;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(i.name==t)return i}return null}findTransformConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let e=this.transformConstraints;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(i.name==t)return i}return null}findPathConstraint(t){if(!t)throw new Error("constraintName cannot be null.");let e=this.pathConstraints;for(let s=0,i=e.length;s<i;s++){let i=e[s];if(i.name==t)return i}return null}}class ie{constructor(t=0,e,s){this.slotIndex=t,this.name=e,this.attachment=s}}class re{constructor(t){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,!t)throw new Error("name cannot be null.");this.name=t}setAttachment(t,e,s){if(!s)throw new Error("attachment cannot be null.");let i=this.attachments;t>=i.length&&(i.length=t+1),i[t]||(i[t]={}),i[t][e]=s}addSkin(t){for(let e=0;e<t.bones.length;e++){let s=t.bones[e],i=!1;for(let t=0;t<this.bones.length;t++)if(this.bones[t]==s){i=!0;break}i||this.bones.push(s)}for(let e=0;e<t.constraints.length;e++){let s=t.constraints[e],i=!1;for(let t=0;t<this.constraints.length;t++)if(this.constraints[t]==s){i=!0;break}i||this.constraints.push(s)}let e=t.getAttachments();for(let t=0;t<e.length;t++){var s=e[t];this.setAttachment(s.slotIndex,s.name,s.attachment)}}copySkin(t){for(let e=0;e<t.bones.length;e++){let s=t.bones[e],i=!1;for(let t=0;t<this.bones.length;t++)if(this.bones[t]==s){i=!0;break}i||this.bones.push(s)}for(let e=0;e<t.constraints.length;e++){let s=t.constraints[e],i=!1;for(let t=0;t<this.constraints.length;t++)if(this.constraints[t]==s){i=!0;break}i||this.constraints.push(s)}let e=t.getAttachments();for(let t=0;t<e.length;t++){var s=e[t];s.attachment&&(s.attachment instanceof $t?(s.attachment=s.attachment.newLinkedMesh(),this.setAttachment(s.slotIndex,s.name,s.attachment)):(s.attachment=s.attachment.copy(),this.setAttachment(s.slotIndex,s.name,s.attachment)))}}getAttachment(t,e){let s=this.attachments[t];return s?s[e]:null}removeAttachment(t,e){let s=this.attachments[t];s&&delete s[e]}getAttachments(){let t=new Array;for(var e=0;e<this.attachments.length;e++){let s=this.attachments[e];if(s)for(let i in s){let r=s[i];r&&t.push(new ie(e,i,r))}}return t}getAttachmentsForSlot(t,e){let s=this.attachments[t];if(s)for(let i in s){let r=s[i];r&&e.push(new ie(t,i,r))}}clear(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0}attachAll(t,e){let s=0;for(let i=0;i<t.slots.length;i++){let r=t.slots[i],n=r.getAttachment();if(n&&s<e.attachments.length){let t=e.attachments[s];for(let e in t){if(n==t[e]){let t=this.getAttachment(s,e);t&&r.setAttachment(t);break}}}s++}}}class ne{constructor(t,e,s){if(this.index=0,this.color=new r(1,1,1,1),this.darkColor=null,this.attachmentName=null,this.blendMode=Yt.Normal,t<0)throw new Error("index must be >= 0.");if(!e)throw new Error("name cannot be null.");if(!s)throw new Error("boneData cannot be null.");this.index=t,this.name=e,this.boneData=s}}!function(t){t[t.Normal=0]="Normal",t[t.Additive=1]="Additive",t[t.Multiply=2]="Multiply",t[t.Screen=3]="Screen"}(Yt||(Yt={}));class ae extends Gt{set target(t){this._target=t}get target(){if(this._target)return this._target;throw new Error("BoneData not set.")}constructor(t){super(t,0,!1),this.bones=new Array,this._target=null,this.mixRotate=0,this.mixX=0,this.mixY=0,this.mixScaleX=0,this.mixScaleY=0,this.mixShearY=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,this.relative=!1,this.local=!1}}!function(t){t[t.Region=0]="Region",t[t.BoundingBox=1]="BoundingBox",t[t.Mesh=2]="Mesh",t[t.LinkedMesh=3]="LinkedMesh",t[t.Path=4]="Path",t[t.Point=5]="Point",t[t.Clipping=6]="Clipping"}(Xt||(Xt={}));class oe{constructor(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new o((()=>new Array)),this.polygonIndicesPool=new o((()=>new Array))}triangulate(t){let e=t,s=t.length>>1,i=this.indicesArray;i.length=0;for(let t=0;t<s;t++)i[t]=t;let r=this.isConcaveArray;r.length=0;for(let t=0,n=s;t<n;++t)r[t]=oe.isConcave(t,s,e,i);let n=this.triangles;for(n.length=0;s>3;){let t=s-1,a=0,o=1;for(;;){t:if(!r[a]){let n=i[t]<<1,h=i[a]<<1,l=i[o]<<1,c=e[n],u=e[n+1],d=e[h],f=e[h+1],p=e[l],m=e[l+1];for(let n=(o+1)%s;n!=t;n=(n+1)%s){if(!r[n])continue;let t=i[n]<<1,s=e[t],a=e[t+1];if(oe.positiveArea(p,m,c,u,s,a)&&oe.positiveArea(c,u,d,f,s,a)&&oe.positiveArea(d,f,p,m,s,a))break t}break}if(0==o){do{if(!r[a])break;a--}while(a>0);break}t=a,a=o,o=(o+1)%s}n.push(i[(s+a-1)%s]),n.push(i[a]),n.push(i[(a+1)%s]),i.splice(a,1),r.splice(a,1),s--;let h=(s+a-1)%s,l=a==s?0:a;r[h]=oe.isConcave(h,s,e,i),r[l]=oe.isConcave(l,s,e,i)}return 3==s&&(n.push(i[2]),n.push(i[0]),n.push(i[1])),n}decompose(t,e){let s=t,i=this.convexPolygons;this.polygonPool.freeAll(i),i.length=0;let r=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(r),r.length=0;let n=this.polygonIndicesPool.obtain();n.length=0;let a=this.polygonPool.obtain();a.length=0;let o=-1,h=0;for(let t=0,l=e.length;t<l;t+=3){let l=e[t]<<1,c=e[t+1]<<1,u=e[t+2]<<1,d=s[l],f=s[l+1],p=s[c],m=s[c+1],g=s[u],x=s[u+1],w=!1;if(o==l){let t=a.length-4,e=oe.winding(a[t],a[t+1],a[t+2],a[t+3],g,x),s=oe.winding(g,x,a[0],a[1],a[2],a[3]);e==h&&s==h&&(a.push(g),a.push(x),n.push(u),w=!0)}w||(a.length>0?(i.push(a),r.push(n)):(this.polygonPool.free(a),this.polygonIndicesPool.free(n)),a=this.polygonPool.obtain(),a.length=0,a.push(d),a.push(f),a.push(p),a.push(m),a.push(g),a.push(x),n=this.polygonIndicesPool.obtain(),n.length=0,n.push(l),n.push(c),n.push(u),h=oe.winding(d,f,p,m,g,x),o=l)}a.length>0&&(i.push(a),r.push(n));for(let t=0,e=i.length;t<e;t++){if(n=r[t],0==n.length)continue;let s=n[0],o=n[n.length-1];a=i[t];let h=a.length-4,l=a[h],c=a[h+1],u=a[h+2],d=a[h+3],f=a[0],p=a[1],m=a[2],g=a[3],x=oe.winding(l,c,u,d,f,p);for(let h=0;h<e;h++){if(h==t)continue;let e=r[h];if(3!=e.length)continue;let w=e[0],b=e[1],v=e[2],y=i[h],E=y[y.length-2],A=y[y.length-1];if(w!=s||b!=o)continue;let I=oe.winding(l,c,u,d,E,A),S=oe.winding(E,A,f,p,m,g);I==x&&S==x&&(y.length=0,e.length=0,a.push(E),a.push(A),n.push(v),l=u,c=d,u=E,d=A,h=0)}}for(let t=i.length-1;t>=0;t--)a=i[t],0==a.length&&(i.splice(t,1),this.polygonPool.free(a),n=r[t],r.splice(t,1),this.polygonIndicesPool.free(n));return i}static isConcave(t,e,s,i){let r=i[(e+t-1)%e]<<1,n=i[t]<<1,a=i[(t+1)%e]<<1;return!this.positiveArea(s[r],s[r+1],s[n],s[n+1],s[a],s[a+1])}static positiveArea(t,e,s,i,r,n){return t*(n-i)+s*(e-n)+r*(i-e)>=0}static winding(t,e,s,i,r,n){let a=s-t,o=i-e;return r*o-n*a+a*e-t*o>=0?1:-1}}class he{constructor(){this.triangulator=new oe,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array,this.clipAttachment=null,this.clippingPolygons=null}clipStart(t,e){if(this.clipAttachment)return 0;this.clipAttachment=e;let s=e.worldVerticesLength,i=a.setArraySize(this.clippingPolygon,s);e.computeWorldVertices(t,0,s,i,0,2);let r=this.clippingPolygon;he.makeClockwise(r);let n=this.clippingPolygons=this.triangulator.decompose(r,this.triangulator.triangulate(r));for(let t=0,e=n.length;t<e;t++){let e=n[t];he.makeClockwise(e),e.push(e[0]),e.push(e[1])}return n.length}clipEndWithSlot(t){this.clipAttachment&&this.clipAttachment.endSlot==t.data&&this.clipEnd()}clipEnd(){this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)}isClipping(){return null!=this.clipAttachment}clipTriangles(t,e,s,i,r,n,o,h){let l=this.clipOutput,c=this.clippedVertices,u=this.clippedTriangles,d=this.clippingPolygons,f=d.length,p=h?12:8,m=0;c.length=0,u.length=0;t:for(let e=0;e<i;e+=3){let i=s[e]<<1,g=t[i],x=t[i+1],w=r[i],b=r[i+1];i=s[e+1]<<1;let v=t[i],y=t[i+1],E=r[i],A=r[i+1];i=s[e+2]<<1;let I=t[i],S=t[i+1],R=r[i],k=r[i+1];for(let t=0;t<f;t++){let e=c.length;if(!this.clip(g,x,v,y,I,S,d[t],l)){let t=a.setArraySize(c,e+3*p);t[e]=g,t[e+1]=x,t[e+2]=n.r,t[e+3]=n.g,t[e+4]=n.b,t[e+5]=n.a,h?(t[e+6]=w,t[e+7]=b,t[e+8]=o.r,t[e+9]=o.g,t[e+10]=o.b,t[e+11]=o.a,t[e+12]=v,t[e+13]=y,t[e+14]=n.r,t[e+15]=n.g,t[e+16]=n.b,t[e+17]=n.a,t[e+18]=E,t[e+19]=A,t[e+20]=o.r,t[e+21]=o.g,t[e+22]=o.b,t[e+23]=o.a,t[e+24]=I,t[e+25]=S,t[e+26]=n.r,t[e+27]=n.g,t[e+28]=n.b,t[e+29]=n.a,t[e+30]=R,t[e+31]=k,t[e+32]=o.r,t[e+33]=o.g,t[e+34]=o.b,t[e+35]=o.a):(t[e+6]=w,t[e+7]=b,t[e+8]=v,t[e+9]=y,t[e+10]=n.r,t[e+11]=n.g,t[e+12]=n.b,t[e+13]=n.a,t[e+14]=E,t[e+15]=A,t[e+16]=I,t[e+17]=S,t[e+18]=n.r,t[e+19]=n.g,t[e+20]=n.b,t[e+21]=n.a,t[e+22]=R,t[e+23]=k),e=u.length;let s=a.setArraySize(u,e+3);s[e]=m,s[e+1]=m+1,s[e+2]=m+2,m+=3;continue t}{let t=l.length;if(0==t)continue;let s=y-S,i=I-v,r=g-I,d=S-x,f=1/(s*r+i*(x-S)),C=t>>1,T=this.clipOutput,M=a.setArraySize(c,e+C*p);for(let a=0;a<t;a+=2){let t=T[a],l=T[a+1];M[e]=t,M[e+1]=l,M[e+2]=n.r,M[e+3]=n.g,M[e+4]=n.b,M[e+5]=n.a;let c=t-I,u=l-S,m=(s*c+i*u)*f,g=(d*c+r*u)*f,x=1-m-g;M[e+6]=w*m+E*g+R*x,M[e+7]=b*m+A*g+k*x,h&&(M[e+8]=o.r,M[e+9]=o.g,M[e+10]=o.b,M[e+11]=o.a),e+=p}e=u.length;let Y=a.setArraySize(u,e+3*(C-2));C--;for(let t=1;t<C;t++)Y[e]=m,Y[e+1]=m+t,Y[e+2]=m+t+1,e+=3;m+=C+1}}}}clip(t,e,s,i,r,n,a,o){let h,l=o,c=!1;a.length%4>=2?(h=o,o=this.scratch):h=this.scratch,h.length=0,h.push(t),h.push(e),h.push(s),h.push(i),h.push(r),h.push(n),h.push(t),h.push(e),o.length=0;let u=a,d=a.length-4;for(let t=0;;t+=2){let e=u[t],s=u[t+1],i=u[t+2],r=u[t+3],n=e-i,a=s-r,f=h,p=h.length-2,m=o.length;for(let t=0;t<p;t+=2){let h=f[t],l=f[t+1],u=f[t+2],d=f[t+3],p=n*(d-r)-a*(u-i)>0;if(n*(l-r)-a*(h-i)>0){if(p){o.push(u),o.push(d);continue}let t=d-l,n=u-h,a=t*(i-e)-n*(r-s);if(Math.abs(a)>1e-6){let c=(n*(s-l)-t*(e-h))/a;o.push(e+(i-e)*c),o.push(s+(r-s)*c)}else o.push(e),o.push(s)}else if(p){let t=d-l,n=u-h,a=t*(i-e)-n*(r-s);if(Math.abs(a)>1e-6){let c=(n*(s-l)-t*(e-h))/a;o.push(e+(i-e)*c),o.push(s+(r-s)*c)}else o.push(e),o.push(s);o.push(u),o.push(d)}c=!0}if(m==o.length)return l.length=0,!0;if(o.push(o[0]),o.push(o[1]),t==d)break;let g=o;(o=h).length=0,h=g}if(l!=o){l.length=0;for(let t=0,e=o.length-2;t<e;t++)l[t]=o[t]}else l.length=l.length-2;return c}static makeClockwise(t){let e=t,s=t.length,i=e[s-2]*e[1]-e[0]*e[s-1],r=0,n=0,a=0,o=0;for(let t=0,h=s-3;t<h;t+=2)r=e[t],n=e[t+1],a=e[t+2],o=e[t+3],i+=r*o-a*n;if(!(i<0))for(let t=0,i=s-2,r=s>>1;t<r;t+=2){let s=e[t],r=e[t+1],n=i-t;e[t]=e[n],e[t+1]=e[n+1],e[n]=s,e[n+1]=r}}}class le{constructor(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}readSkeletonData(t){let e=this.scale,s=new se,i="string"==typeof t?JSON.parse(t):t,n=i.skeleton;if(n&&(s.hash=n.hash,s.version=n.spine,s.x=n.x,s.y=n.y,s.width=n.width,s.height=n.height,s.fps=n.fps,s.imagesPath=n.images),i.bones)for(let t=0;t<i.bones.length;t++){let r=i.bones[t],n=null,o=pe(r,"parent",null);o&&(n=s.findBone(o));let h=new Wt(s.bones.length,r.name,n);h.length=pe(r,"length",0)*e,h.x=pe(r,"x",0)*e,h.y=pe(r,"y",0)*e,h.rotation=pe(r,"rotation",0),h.scaleX=pe(r,"scaleX",1),h.scaleY=pe(r,"scaleY",1),h.shearX=pe(r,"shearX",0),h.shearY=pe(r,"shearY",0),h.transformMode=a.enumValue(kt,pe(r,"transform","Normal")),h.skinRequired=pe(r,"skin",!1);let l=pe(r,"color",null);l&&h.color.setFromString(l),s.bones.push(h)}if(i.slots)for(let t=0;t<i.slots.length;t++){let e=i.slots[t],n=s.findBone(e.bone);if(!n)throw new Error(`Couldn't find bone ${e.bone} for slot ${e.name}`);let o=new ne(s.slots.length,e.name,n),h=pe(e,"color",null);h&&o.color.setFromString(h);let l=pe(e,"dark",null);l&&(o.darkColor=r.fromString(l)),o.attachmentName=pe(e,"attachment",null),o.blendMode=a.enumValue(Yt,pe(e,"blend","normal")),s.slots.push(o)}if(i.ik)for(let t=0;t<i.ik.length;t++){let r=i.ik[t],n=new Kt(r.name);n.order=pe(r,"order",0),n.skinRequired=pe(r,"skin",!1);for(let t=0;t<r.bones.length;t++){let e=s.findBone(r.bones[t]);if(!e)throw new Error(`Couldn't find bone ${r.bones[t]} for IK constraint ${r.name}.`);n.bones.push(e)}let a=s.findBone(r.target);if(!a)throw new Error(`Couldn't find target bone ${r.target} for IK constraint ${r.name}.`);n.target=a,n.mix=pe(r,"mix",1),n.softness=pe(r,"softness",0)*e,n.bendDirection=pe(r,"bendPositive",!0)?1:-1,n.compress=pe(r,"compress",!1),n.stretch=pe(r,"stretch",!1),n.uniform=pe(r,"uniform",!1),s.ikConstraints.push(n)}if(i.transform)for(let t=0;t<i.transform.length;t++){let r=i.transform[t],n=new ae(r.name);n.order=pe(r,"order",0),n.skinRequired=pe(r,"skin",!1);for(let t=0;t<r.bones.length;t++){let e=r.bones[t],i=s.findBone(e);if(!i)throw new Error(`Couldn't find bone ${e} for transform constraint ${r.name}.`);n.bones.push(i)}let a=r.target,o=s.findBone(a);if(!o)throw new Error(`Couldn't find target bone ${a} for transform constraint ${r.name}.`);n.target=o,n.local=pe(r,"local",!1),n.relative=pe(r,"relative",!1),n.offsetRotation=pe(r,"rotation",0),n.offsetX=pe(r,"x",0)*e,n.offsetY=pe(r,"y",0)*e,n.offsetScaleX=pe(r,"scaleX",0),n.offsetScaleY=pe(r,"scaleY",0),n.offsetShearY=pe(r,"shearY",0),n.mixRotate=pe(r,"mixRotate",1),n.mixX=pe(r,"mixX",1),n.mixY=pe(r,"mixY",n.mixX),n.mixScaleX=pe(r,"mixScaleX",1),n.mixScaleY=pe(r,"mixScaleY",n.mixScaleX),n.mixShearY=pe(r,"mixShearY",1),s.transformConstraints.push(n)}if(i.path)for(let t=0;t<i.path.length;t++){let r=i.path[t],n=new Zt(r.name);n.order=pe(r,"order",0),n.skinRequired=pe(r,"skin",!1);for(let t=0;t<r.bones.length;t++){let e=r.bones[t],i=s.findBone(e);if(!i)throw new Error(`Couldn't find bone ${e} for path constraint ${r.name}.`);n.bones.push(i)}let o=r.target,h=s.findSlot(o);if(!h)throw new Error(`Couldn't find target slot ${o} for path constraint ${r.name}.`);n.target=h,n.positionMode=a.enumValue(Ct,pe(r,"positionMode","Percent")),n.spacingMode=a.enumValue(Tt,pe(r,"spacingMode","Length")),n.rotateMode=a.enumValue(Mt,pe(r,"rotateMode","Tangent")),n.offsetRotation=pe(r,"rotation",0),n.position=pe(r,"position",0),n.positionMode==Ct.Fixed&&(n.position*=e),n.spacing=pe(r,"spacing",0),n.spacingMode!=Tt.Length&&n.spacingMode!=Tt.Fixed||(n.spacing*=e),n.mixRotate=pe(r,"mixRotate",1),n.mixX=pe(r,"mixX",1),n.mixY=pe(r,"mixY",n.mixX),s.pathConstraints.push(n)}if(i.skins)for(let t=0;t<i.skins.length;t++){let e=i.skins[t],r=new re(e.name);if(e.bones)for(let t=0;t<e.bones.length;t++){let i=e.bones[t],n=s.findBone(i);if(!n)throw new Error(`Couldn't find bone ${i} for skin ${e.name}.`);r.bones.push(n)}if(e.ik)for(let t=0;t<e.ik.length;t++){let i=e.ik[t],n=s.findIkConstraint(i);if(!n)throw new Error(`Couldn't find IK constraint ${i} for skin ${e.name}.`);r.constraints.push(n)}if(e.transform)for(let t=0;t<e.transform.length;t++){let i=e.transform[t],n=s.findTransformConstraint(i);if(!n)throw new Error(`Couldn't find transform constraint ${i} for skin ${e.name}.`);r.constraints.push(n)}if(e.path)for(let t=0;t<e.path.length;t++){let i=e.path[t],n=s.findPathConstraint(i);if(!n)throw new Error(`Couldn't find path constraint ${i} for skin ${e.name}.`);r.constraints.push(n)}for(let t in e.attachments){let i=s.findSlot(t);if(!i)throw new Error(`Couldn't find slot ${t} for skin ${e.name}.`);let n=e.attachments[t];for(let t in n){let e=this.readAttachment(n[t],r,i.index,t,s);e&&r.setAttachment(i.index,t,e)}}s.skins.push(r),"default"==r.name&&(s.defaultSkin=r)}for(let t=0,e=this.linkedMeshes.length;t<e;t++){let e=this.linkedMeshes[t],i=e.skin?s.findSkin(e.skin):s.defaultSkin;if(!i)throw new Error(`Skin not found: ${e.skin}`);let r=i.getAttachment(e.slotIndex,e.parent);if(!r)throw new Error(`Parent mesh not found: ${e.parent}`);e.mesh.timelineAttachment=e.inheritTimeline?r:e.mesh,e.mesh.setParentMesh(r),null!=e.mesh.region&&e.mesh.updateRegion()}if(this.linkedMeshes.length=0,i.events)for(let t in i.events){let e=i.events[t],r=new jt(t);r.intValue=pe(e,"int",0),r.floatValue=pe(e,"float",0),r.stringValue=pe(e,"string",""),r.audioPath=pe(e,"audio",null),r.audioPath&&(r.volume=pe(e,"volume",1),r.balance=pe(e,"balance",0)),s.events.push(r)}if(i.animations)for(let t in i.animations){let e=i.animations[t];this.readAnimation(e,t,s)}return s}readAttachment(t,e,s,i,r){let n=this.scale;switch(i=pe(t,"name",i),pe(t,"type","region")){case"region":{let s=pe(t,"path",i),r=this.readSequence(pe(t,"sequence",null)),a=this.attachmentLoader.newRegionAttachment(e,i,s,r);if(!a)return null;a.path=s,a.x=pe(t,"x",0)*n,a.y=pe(t,"y",0)*n,a.scaleX=pe(t,"scaleX",1),a.scaleY=pe(t,"scaleY",1),a.rotation=pe(t,"rotation",0),a.width=t.width*n,a.height=t.height*n,a.sequence=r;let o=pe(t,"color",null);return o&&a.color.setFromString(o),null!=a.region&&a.updateRegion(),a}case"boundingbox":{let s=this.attachmentLoader.newBoundingBoxAttachment(e,i);if(!s)return null;this.readVertices(t,s,t.vertexCount<<1);let r=pe(t,"color",null);return r&&s.color.setFromString(r),s}case"mesh":case"linkedmesh":{let r=pe(t,"path",i),a=this.readSequence(pe(t,"sequence",null)),o=this.attachmentLoader.newMeshAttachment(e,i,r,a);if(!o)return null;o.path=r;let h=pe(t,"color",null);h&&o.color.setFromString(h),o.width=pe(t,"width",0)*n,o.height=pe(t,"height",0)*n,o.sequence=a;let l=pe(t,"parent",null);if(l)return this.linkedMeshes.push(new ce(o,pe(t,"skin",null),s,l,pe(t,"timelines",!0))),o;let c=t.uvs;return this.readVertices(t,o,c.length),o.triangles=t.triangles,o.regionUVs=c,null!=o.region&&o.updateRegion(),o.edges=pe(t,"edges",null),o.hullLength=2*pe(t,"hull",0),o}case"path":{let s=this.attachmentLoader.newPathAttachment(e,i);if(!s)return null;s.closed=pe(t,"closed",!1),s.constantSpeed=pe(t,"constantSpeed",!0);let r=t.vertexCount;this.readVertices(t,s,r<<1);let o=a.newArray(r/3,0);for(let e=0;e<t.lengths.length;e++)o[e]=t.lengths[e]*n;s.lengths=o;let h=pe(t,"color",null);return h&&s.color.setFromString(h),s}case"point":{let s=this.attachmentLoader.newPointAttachment(e,i);if(!s)return null;s.x=pe(t,"x",0)*n,s.y=pe(t,"y",0)*n,s.rotation=pe(t,"rotation",0);let r=pe(t,"color",null);return r&&s.color.setFromString(r),s}case"clipping":{let s=this.attachmentLoader.newClippingAttachment(e,i);if(!s)return null;let n=pe(t,"end",null);n&&(s.endSlot=r.findSlot(n));let a=t.vertexCount;this.readVertices(t,s,a<<1);let o=pe(t,"color",null);return o&&s.color.setFromString(o),s}}return null}readSequence(t){if(null==t)return null;let e=new u(pe(t,"count",0));return e.start=pe(t,"start",1),e.digits=pe(t,"digits",0),e.setupIndex=pe(t,"setup",0),e}readVertices(t,e,s){let i=this.scale;e.worldVerticesLength=s;let r=t.vertices;if(s==r.length){let t=a.toFloatArray(r);if(1!=i)for(let e=0,s=r.length;e<s;e++)t[e]*=i;return void(e.vertices=t)}let n=new Array,o=new Array;for(let t=0,e=r.length;t<e;){let e=r[t++];o.push(e);for(let s=t+4*e;t<s;t+=4)o.push(r[t]),n.push(r[t+1]*i),n.push(r[t+2]*i),n.push(r[t+3])}e.bones=o,e.vertices=a.toFloatArray(n)}readAnimation(t,e,i){let n=this.scale,o=new Array;if(t.slots)for(let e in t.slots){let s=t.slots[e],n=i.findSlot(e);if(!n)throw new Error("Slot not found: "+e);let a=n.index;for(let t in s){let e=s[t];if(!e)continue;let i=e.length;if("attachment"==t){let t=new et(i,a);for(let s=0;s<i;s++){let i=e[s];t.setFrame(s,pe(i,"time",0),pe(i,"name",null))}o.push(t)}else if("rgba"==t){let t=new K(i,i<<2,a),s=e[0],n=pe(s,"time",0),h=r.fromString(s.color);for(let i=0,a=0;;i++){t.setFrame(i,n,h.r,h.g,h.b,h.a);let o=e[i+1];if(!o){t.shrink(a);break}let l=pe(o,"time",0),c=r.fromString(o.color),u=s.curve;u&&(a=fe(u,t,a,i,0,n,l,h.r,c.r,1),a=fe(u,t,a,i,1,n,l,h.g,c.g,1),a=fe(u,t,a,i,2,n,l,h.b,c.b,1),a=fe(u,t,a,i,3,n,l,h.a,c.a,1)),n=l,h=c,s=o}o.push(t)}else if("rgb"==t){let t=new Z(i,3*i,a),s=e[0],n=pe(s,"time",0),h=r.fromString(s.color);for(let i=0,a=0;;i++){t.setFrame(i,n,h.r,h.g,h.b);let o=e[i+1];if(!o){t.shrink(a);break}let l=pe(o,"time",0),c=r.fromString(o.color),u=s.curve;u&&(a=fe(u,t,a,i,0,n,l,h.r,c.r,1),a=fe(u,t,a,i,1,n,l,h.g,c.g,1),a=fe(u,t,a,i,2,n,l,h.b,c.b,1)),n=l,h=c,s=o}o.push(t)}else if("alpha"==t)o.push(ue(e,new J(i,i,a),0,1));else if("rgba2"==t){let t=new Q(i,7*i,a),s=e[0],n=pe(s,"time",0),h=r.fromString(s.light),l=r.fromString(s.dark);for(let i=0,a=0;;i++){t.setFrame(i,n,h.r,h.g,h.b,h.a,l.r,l.g,l.b);let o=e[i+1];if(!o){t.shrink(a);break}let c=pe(o,"time",0),u=r.fromString(o.light),d=r.fromString(o.dark),f=s.curve;f&&(a=fe(f,t,a,i,0,n,c,h.r,u.r,1),a=fe(f,t,a,i,1,n,c,h.g,u.g,1),a=fe(f,t,a,i,2,n,c,h.b,u.b,1),a=fe(f,t,a,i,3,n,c,h.a,u.a,1),a=fe(f,t,a,i,4,n,c,l.r,d.r,1),a=fe(f,t,a,i,5,n,c,l.g,d.g,1),a=fe(f,t,a,i,6,n,c,l.b,d.b,1)),n=c,h=u,l=d,s=o}o.push(t)}else if("rgb2"==t){let t=new tt(i,6*i,a),s=e[0],n=pe(s,"time",0),h=r.fromString(s.light),l=r.fromString(s.dark);for(let i=0,a=0;;i++){t.setFrame(i,n,h.r,h.g,h.b,l.r,l.g,l.b);let o=e[i+1];if(!o){t.shrink(a);break}let c=pe(o,"time",0),u=r.fromString(o.light),d=r.fromString(o.dark),f=s.curve;f&&(a=fe(f,t,a,i,0,n,c,h.r,u.r,1),a=fe(f,t,a,i,1,n,c,h.g,u.g,1),a=fe(f,t,a,i,2,n,c,h.b,u.b,1),a=fe(f,t,a,i,3,n,c,l.r,d.r,1),a=fe(f,t,a,i,4,n,c,l.g,d.g,1),a=fe(f,t,a,i,5,n,c,l.b,d.b,1)),n=c,h=u,l=d,s=o}o.push(t)}}}if(t.bones)for(let e in t.bones){let s=t.bones[e],r=i.findBone(e);if(!r)throw new Error("Bone not found: "+e);let a=r.index;for(let t in s){let e=s[t],i=e.length;if(0!=i)if("rotate"===t)o.push(ue(e,new F(i,i,a),0,1));else if("translate"===t){let t=new V(i,i<<1,a);o.push(de(e,t,"x","y",0,n))}else if("translatex"===t){let t=new B(i,i,a);o.push(ue(e,t,0,n))}else if("translatey"===t){let t=new q(i,i,a);o.push(ue(e,t,0,n))}else if("scale"===t){let t=new W(i,i<<1,a);o.push(de(e,t,"x","y",1,1))}else if("scalex"===t){let t=new z(i,i,a);o.push(ue(e,t,1,1))}else if("scaley"===t){let t=new G(i,i,a);o.push(ue(e,t,1,1))}else if("shear"===t){let t=new U(i,i<<1,a);o.push(de(e,t,"x","y",0,1))}else if("shearx"===t){let t=new j(i,i,a);o.push(ue(e,t,0,1))}else if("sheary"===t){let t=new H(i,i,a);o.push(ue(e,t,0,1))}}}if(t.ik)for(let e in t.ik){let s=t.ik[e],r=s[0];if(!r)continue;let a=i.findIkConstraint(e);if(!a)throw new Error("IK Constraint not found: "+e);let h=i.ikConstraints.indexOf(a),l=new nt(s.length,s.length<<1,h),c=pe(r,"time",0),u=pe(r,"mix",1),d=pe(r,"softness",0)*n;for(let t=0,e=0;;t++){l.setFrame(t,c,u,d,pe(r,"bendPositive",!0)?1:-1,pe(r,"compress",!1),pe(r,"stretch",!1));let i=s[t+1];if(!i){l.shrink(e);break}let a=pe(i,"time",0),o=pe(i,"mix",1),h=pe(i,"softness",0)*n,f=r.curve;f&&(e=fe(f,l,e,t,0,c,a,u,o,1),e=fe(f,l,e,t,1,c,a,d,h,n)),c=a,u=o,d=h,r=i}o.push(l)}if(t.transform)for(let e in t.transform){let s=t.transform[e],r=s[0];if(!r)continue;let n=i.findTransformConstraint(e);if(!n)throw new Error("Transform constraint not found: "+e);let a=i.transformConstraints.indexOf(n),h=new at(s.length,6*s.length,a),l=pe(r,"time",0),c=pe(r,"mixRotate",1),u=pe(r,"mixX",1),d=pe(r,"mixY",u),f=pe(r,"mixScaleX",1),p=pe(r,"mixScaleY",f),m=pe(r,"mixShearY",1);for(let t=0,e=0;;t++){h.setFrame(t,l,c,u,d,f,p,m);let i=s[t+1];if(!i){h.shrink(e);break}let n=pe(i,"time",0),a=pe(i,"mixRotate",1),o=pe(i,"mixX",1),g=pe(i,"mixY",o),x=pe(i,"mixScaleX",1),w=pe(i,"mixScaleY",x),b=pe(i,"mixShearY",1),v=r.curve;v&&(e=fe(v,h,e,t,0,l,n,c,a,1),e=fe(v,h,e,t,1,l,n,u,o,1),e=fe(v,h,e,t,2,l,n,d,g,1),e=fe(v,h,e,t,3,l,n,f,x,1),e=fe(v,h,e,t,4,l,n,p,w,1),e=fe(v,h,e,t,5,l,n,m,b,1)),l=n,c=a,u=o,d=g,f=x,p=w,f=x,r=i}o.push(h)}if(t.path)for(let e in t.path){let s=t.path[e],r=i.findPathConstraint(e);if(!r)throw new Error("Path constraint not found: "+e);let a=i.pathConstraints.indexOf(r);for(let t in s){let e=s[t],i=e[0];if(!i)continue;let h=e.length;if("position"===t){let t=new ot(h,h,a);o.push(ue(e,t,0,r.positionMode==Ct.Fixed?n:1))}else if("spacing"===t){let t=new ht(h,h,a);o.push(ue(e,t,0,r.spacingMode==Tt.Length||r.spacingMode==Tt.Fixed?n:1))}else if("mix"===t){let t=new lt(h,3*h,a),s=pe(i,"time",0),r=pe(i,"mixRotate",1),n=pe(i,"mixX",1),l=pe(i,"mixY",n);for(let a=0,o=0;;a++){t.setFrame(a,s,r,n,l);let h=e[a+1];if(!h){t.shrink(o);break}let c=pe(h,"time",0),u=pe(h,"mixRotate",1),d=pe(h,"mixX",1),f=pe(h,"mixY",d),p=i.curve;p&&(o=fe(p,t,o,a,0,s,c,r,u,1),o=fe(p,t,o,a,1,s,c,n,d,1),o=fe(p,t,o,a,2,s,c,l,f,1)),s=c,r=u,n=d,l=f,i=h}o.push(t)}}}if(t.attachments)for(let e in t.attachments){let r=t.attachments[e],h=i.findSkin(e);if(!h)throw new Error("Skin not found: "+e);for(let t in r){let e=r[t],l=i.findSlot(t);if(!l)throw new Error("Slot not found: "+t);let c=l.index;for(let t in e){let i=e[t],r=h.getAttachment(c,t);for(let t in i){let e=i[t],h=e[0];if(h)if("deform"==t){let t=r.bones,s=r.vertices,i=t?s.length/3*2:s.length,l=new st(e.length,e.length,c,r),u=pe(h,"time",0);for(let r=0,o=0;;r++){let c,d=pe(h,"vertices",null);if(d){c=a.newFloatArray(i);let e=pe(h,"offset",0);if(a.arrayCopy(d,0,c,e,d.length),1!=n)for(let t=e,s=t+d.length;t<s;t++)c[t]*=n;if(!t)for(let t=0;t<i;t++)c[t]+=s[t]}else c=t?a.newFloatArray(i):s;l.setFrame(r,u,c);let f=e[r+1];if(!f){l.shrink(o);break}let p=pe(f,"time",0),m=h.curve;m&&(o=fe(m,l,o,r,0,u,p,0,1,1)),u=p,h=f}o.push(l)}else if("sequence"==t){let t=new ct(e.length,c,r),i=0;for(let r=0;r<e.length;r++){let n=pe(h,"delay",i),a=pe(h,"time",0),o=s[pe(h,"mode","hold")],l=pe(h,"index",0);t.setFrame(r,a,o,l,n),i=n,h=e[r+1]}o.push(t)}}}}}if(t.drawOrder){let e=new rt(t.drawOrder.length),s=i.slots.length,r=0;for(let n=0;n<t.drawOrder.length;n++,r++){let o=t.drawOrder[n],h=null,l=pe(o,"offsets",null);if(l){h=a.newArray(s,-1);let t=a.newArray(s-l.length,0),e=0,r=0;for(let s=0;s<l.length;s++){let n=l[s],a=i.findSlot(n.slot);if(!a)throw new Error("Slot not found: "+a);let o=a.index;for(;e!=o;)t[r++]=e++;h[e+n.offset]=e++}for(;e<s;)t[r++]=e++;for(let e=s-1;e>=0;e--)-1==h[e]&&(h[e]=t[--r])}e.setFrame(r,pe(o,"time",0),h)}o.push(e)}if(t.events){let e=new it(t.events.length),s=0;for(let r=0;r<t.events.length;r++,s++){let n=t.events[r],o=i.findEvent(n.name);if(!o)throw new Error("Event not found: "+n.name);let h=new Ut(a.toSinglePrecision(pe(n,"time",0)),o);h.intValue=pe(n,"int",o.intValue),h.floatValue=pe(n,"float",o.floatValue),h.stringValue=pe(n,"string",o.stringValue),h.data.audioPath&&(h.volume=pe(n,"volume",1),h.balance=pe(n,"balance",0)),e.setFrame(s,h)}o.push(e)}let h=0;for(let t=0,e=o.length;t<e;t++)h=Math.max(h,o[t].getDuration());i.animations.push(new f(e,o,h))}}class ce{constructor(t,e,s,i,r){this.mesh=t,this.skin=e,this.slotIndex=s,this.parent=i,this.inheritTimeline=r}}function ue(t,e,s,i){let r=t[0],n=pe(r,"time",0),a=pe(r,"value",s)*i,o=0;for(let h=0;;h++){e.setFrame(h,n,a);let l=t[h+1];if(!l)return e.shrink(o),e;let c=pe(l,"time",0),u=pe(l,"value",s)*i;r.curve&&(o=fe(r.curve,e,o,h,0,n,c,a,u,i)),n=c,a=u,r=l}}function de(t,e,s,i,r,n){let a=t[0],o=pe(a,"time",0),h=pe(a,s,r)*n,l=pe(a,i,r)*n,c=0;for(let u=0;;u++){e.setFrame(u,o,h,l);let d=t[u+1];if(!d)return e.shrink(c),e;let f=pe(d,"time",0),p=pe(d,s,r)*n,m=pe(d,i,r)*n,g=a.curve;g&&(c=fe(g,e,c,u,0,o,f,h,p,n),c=fe(g,e,c,u,1,o,f,l,m,n)),o=f,h=p,l=m,a=d}}function fe(t,e,s,i,r,n,a,o,h,l){if("stepped"==t)return e.setStepped(i),s;let c=r<<2,u=t[c],d=t[c+1]*l,f=t[c+2],p=t[c+3]*l;return e.setBezier(s,i,r,n,o,u,d,f,p,a,h),s+1}function pe(t,e,s){return void 0!==t[e]?t[e]:s}void 0===Math.fround&&(Math.fround=(Nt=new Float32Array(1),function(t){return Nt[0]=t,Nt[0]}));var me={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};var ge="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{},xe={exports:{}};!function(t,e){const{MAX_SAFE_COMPONENT_LENGTH:s,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:r}=me,n=ge,a=(e=t.exports={}).re=[],o=e.safeRe=[],h=e.src=[],l=e.t={};let c=0;const u="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",r],[u,i]],f=(t,e,s)=>{const i=(t=>{for(const[e,s]of d)t=t.split(`${e}*`).join(`${e}{0,${s}}`).split(`${e}+`).join(`${e}{1,${s}}`);return t})(e),r=c++;n(t,r,e),l[t]=r,h[r]=e,a[r]=new RegExp(e,s?"g":void 0),o[r]=new RegExp(i,s?"g":void 0)};f("NUMERICIDENTIFIER","0|[1-9]\\d*"),f("NUMERICIDENTIFIERLOOSE","\\d+"),f("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${u}*`),f("MAINVERSION",`(${h[l.NUMERICIDENTIFIER]})\\.(${h[l.NUMERICIDENTIFIER]})\\.(${h[l.NUMERICIDENTIFIER]})`),f("MAINVERSIONLOOSE",`(${h[l.NUMERICIDENTIFIERLOOSE]})\\.(${h[l.NUMERICIDENTIFIERLOOSE]})\\.(${h[l.NUMERICIDENTIFIERLOOSE]})`),f("PRERELEASEIDENTIFIER",`(?:${h[l.NUMERICIDENTIFIER]}|${h[l.NONNUMERICIDENTIFIER]})`),f("PRERELEASEIDENTIFIERLOOSE",`(?:${h[l.NUMERICIDENTIFIERLOOSE]}|${h[l.NONNUMERICIDENTIFIER]})`),f("PRERELEASE",`(?:-(${h[l.PRERELEASEIDENTIFIER]}(?:\\.${h[l.PRERELEASEIDENTIFIER]})*))`),f("PRERELEASELOOSE",`(?:-?(${h[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${h[l.PRERELEASEIDENTIFIERLOOSE]})*))`),f("BUILDIDENTIFIER",`${u}+`),f("BUILD",`(?:\\+(${h[l.BUILDIDENTIFIER]}(?:\\.${h[l.BUILDIDENTIFIER]})*))`),f("FULLPLAIN",`v?${h[l.MAINVERSION]}${h[l.PRERELEASE]}?${h[l.BUILD]}?`),f("FULL",`^${h[l.FULLPLAIN]}$`),f("LOOSEPLAIN",`[v=\\s]*${h[l.MAINVERSIONLOOSE]}${h[l.PRERELEASELOOSE]}?${h[l.BUILD]}?`),f("LOOSE",`^${h[l.LOOSEPLAIN]}$`),f("GTLT","((?:<|>)?=?)"),f("XRANGEIDENTIFIERLOOSE",`${h[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),f("XRANGEIDENTIFIER",`${h[l.NUMERICIDENTIFIER]}|x|X|\\*`),f("XRANGEPLAIN",`[v=\\s]*(${h[l.XRANGEIDENTIFIER]})(?:\\.(${h[l.XRANGEIDENTIFIER]})(?:\\.(${h[l.XRANGEIDENTIFIER]})(?:${h[l.PRERELEASE]})?${h[l.BUILD]}?)?)?`),f("XRANGEPLAINLOOSE",`[v=\\s]*(${h[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${h[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${h[l.XRANGEIDENTIFIERLOOSE]})(?:${h[l.PRERELEASELOOSE]})?${h[l.BUILD]}?)?)?`),f("XRANGE",`^${h[l.GTLT]}\\s*${h[l.XRANGEPLAIN]}$`),f("XRANGELOOSE",`^${h[l.GTLT]}\\s*${h[l.XRANGEPLAINLOOSE]}$`),f("COERCE",`(^|[^\\d])(\\d{1,${s}})(?:\\.(\\d{1,${s}}))?(?:\\.(\\d{1,${s}}))?(?:$|[^\\d])`),f("COERCERTL",h[l.COERCE],!0),f("LONETILDE","(?:~>?)"),f("TILDETRIM",`(\\s*)${h[l.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",f("TILDE",`^${h[l.LONETILDE]}${h[l.XRANGEPLAIN]}$`),f("TILDELOOSE",`^${h[l.LONETILDE]}${h[l.XRANGEPLAINLOOSE]}$`),f("LONECARET","(?:\\^)"),f("CARETTRIM",`(\\s*)${h[l.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",f("CARET",`^${h[l.LONECARET]}${h[l.XRANGEPLAIN]}$`),f("CARETLOOSE",`^${h[l.LONECARET]}${h[l.XRANGEPLAINLOOSE]}$`),f("COMPARATORLOOSE",`^${h[l.GTLT]}\\s*(${h[l.LOOSEPLAIN]})$|^$`),f("COMPARATOR",`^${h[l.GTLT]}\\s*(${h[l.FULLPLAIN]})$|^$`),f("COMPARATORTRIM",`(\\s*)${h[l.GTLT]}\\s*(${h[l.LOOSEPLAIN]}|${h[l.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",f("HYPHENRANGE",`^\\s*(${h[l.XRANGEPLAIN]})\\s+-\\s+(${h[l.XRANGEPLAIN]})\\s*$`),f("HYPHENRANGELOOSE",`^\\s*(${h[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${h[l.XRANGEPLAINLOOSE]})\\s*$`),f("STAR","(<|>)?=?\\s*\\*"),f("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),f("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(xe,xe.exports);var we=xe.exports;const be=Object.freeze({loose:!0}),ve=Object.freeze({});var ye=t=>t?"object"!=typeof t?be:t:ve;const Ee=/^[0-9]+$/,Ae=(t,e)=>{const s=Ee.test(t),i=Ee.test(e);return s&&i&&(t=+t,e=+e),t===e?0:s&&!i?-1:i&&!s?1:t<e?-1:1};var Ie={compareIdentifiers:Ae,rcompareIdentifiers:(t,e)=>Ae(e,t)};const Se=ge,{MAX_LENGTH:Re,MAX_SAFE_INTEGER:ke}=me,{safeRe:Ce,t:Te}=we,Me=ye,{compareIdentifiers:Ye}=Ie;var Xe=class t{constructor(e,s){if(s=Me(s),e instanceof t){if(e.loose===!!s.loose&&e.includePrerelease===!!s.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>Re)throw new TypeError(`version is longer than ${Re} characters`);Se("SemVer",e,s),this.options=s,this.loose=!!s.loose,this.includePrerelease=!!s.includePrerelease;const i=e.trim().match(s.loose?Ce[Te.LOOSE]:Ce[Te.FULL]);if(!i)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>ke||this.major<0)throw new TypeError("Invalid major version");if(this.minor>ke||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>ke||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map((t=>{if(/^[0-9]+$/.test(t)){const e=+t;if(e>=0&&e<ke)return e}return t})):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Se("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if("string"==typeof e&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),Ye(this.major,e.major)||Ye(this.minor,e.minor)||Ye(this.patch,e.patch)}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let s=0;do{const t=this.prerelease[s],i=e.prerelease[s];if(Se("prerelease compare",s,t,i),void 0===t&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===t)return-1;if(t!==i)return Ye(t,i)}while(++s)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let s=0;do{const t=this.build[s],i=e.build[s];if(Se("prerelease compare",s,t,i),void 0===t&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===t)return-1;if(t!==i)return Ye(t,i)}while(++s)}inc(t,e,s){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e,s);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e,s);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e,s),this.inc("pre",e,s);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",e,s),this.inc("pre",e,s);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const t=Number(s)?1:0;if(!e&&!1===s)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[t];else{let i=this.prerelease.length;for(;--i>=0;)"number"==typeof this.prerelease[i]&&(this.prerelease[i]++,i=-2);if(-1===i){if(e===this.prerelease.join(".")&&!1===s)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(t)}}if(e){let i=[e,t];!1===s&&(i=[e]),0===Ye(this.prerelease[0],e)?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};const Ne=Xe;var _e=(t,e,s=!1)=>{if(t instanceof Ne)return t;try{return new Ne(t,e)}catch(t){if(!s)return null;throw t}};const Le=_e;var Pe=(t,e)=>{const s=Le(t,e);return s?s.version:null};const De=Xe,Oe=_e,{safeRe:$e,t:Fe}=we;var Ve,Be,qe=(t,e)=>{if(t instanceof De)return t;if("number"==typeof t&&(t=String(t)),"string"!=typeof t)return null;let s=null;if((e=e||{}).rtl){let e;for(;(e=$e[Fe.COERCERTL].exec(t))&&(!s||s.index+s[0].length!==t.length);)s&&e.index+e[0].length===s.index+s[0].length||(s=e),$e[Fe.COERCERTL].lastIndex=e.index+e[1].length+e[2].length;$e[Fe.COERCERTL].lastIndex=-1}else s=t.match($e[Fe.COERCE]);return null===s?null:Oe(`${s[2]}.${s[3]||"0"}.${s[4]||"0"}`,e)};var We=ze;function ze(t){var e=this;if(e instanceof ze||(e=new ze),e.tail=null,e.head=null,e.length=0,t&&"function"==typeof t.forEach)t.forEach((function(t){e.push(t)}));else if(arguments.length>0)for(var s=0,i=arguments.length;s<i;s++)e.push(arguments[s]);return e}function Ge(t,e,s){var i=e===t.head?new He(s,null,e,t):new He(s,e,e.next,t);return null===i.next&&(t.tail=i),null===i.prev&&(t.head=i),t.length++,i}function Ue(t,e){t.tail=new He(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function je(t,e){t.head=new He(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function He(t,e,s,i){if(!(this instanceof He))return new He(t,e,s,i);this.list=i,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,s?(s.prev=this,this.next=s):this.next=null}ze.Node=He,ze.create=ze,ze.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,s=t.prev;return e&&(e.prev=s),s&&(s.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=s),t.list.length--,t.next=null,t.prev=null,t.list=null,e},ze.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}},ze.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}},ze.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)Ue(this,arguments[t]);return this.length},ze.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)je(this,arguments[t]);return this.length},ze.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}},ze.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}},ze.prototype.forEach=function(t,e){e=e||this;for(var s=this.head,i=0;null!==s;i++)t.call(e,s.value,i,this),s=s.next},ze.prototype.forEachReverse=function(t,e){e=e||this;for(var s=this.tail,i=this.length-1;null!==s;i--)t.call(e,s.value,i,this),s=s.prev},ze.prototype.get=function(t){for(var e=0,s=this.head;null!==s&&e<t;e++)s=s.next;if(e===t&&null!==s)return s.value},ze.prototype.getReverse=function(t){for(var e=0,s=this.tail;null!==s&&e<t;e++)s=s.prev;if(e===t&&null!==s)return s.value},ze.prototype.map=function(t,e){e=e||this;for(var s=new ze,i=this.head;null!==i;)s.push(t.call(e,i.value,this)),i=i.next;return s},ze.prototype.mapReverse=function(t,e){e=e||this;for(var s=new ze,i=this.tail;null!==i;)s.push(t.call(e,i.value,this)),i=i.prev;return s},ze.prototype.reduce=function(t,e){var s,i=this.head;if(arguments.length>1)s=e;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");i=this.head.next,s=this.head.value}for(var r=0;null!==i;r++)s=t(s,i.value,r),i=i.next;return s},ze.prototype.reduceReverse=function(t,e){var s,i=this.tail;if(arguments.length>1)s=e;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");i=this.tail.prev,s=this.tail.value}for(var r=this.length-1;null!==i;r--)s=t(s,i.value,r),i=i.prev;return s},ze.prototype.toArray=function(){for(var t=new Array(this.length),e=0,s=this.head;null!==s;e++)t[e]=s.value,s=s.next;return t},ze.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,s=this.tail;null!==s;e++)t[e]=s.value,s=s.prev;return t},ze.prototype.slice=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var s=new ze;if(e<t||e<0)return s;t<0&&(t=0),e>this.length&&(e=this.length);for(var i=0,r=this.head;null!==r&&i<t;i++)r=r.next;for(;null!==r&&i<e;i++,r=r.next)s.push(r.value);return s},ze.prototype.sliceReverse=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var s=new ze;if(e<t||e<0)return s;t<0&&(t=0),e>this.length&&(e=this.length);for(var i=this.length,r=this.tail;null!==r&&i>e;i--)r=r.prev;for(;null!==r&&i>t;i--,r=r.prev)s.push(r.value);return s},ze.prototype.splice=function(t,e,...s){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var i=0,r=this.head;null!==r&&i<t;i++)r=r.next;var n=[];for(i=0;r&&i<e;i++)n.push(r.value),r=this.removeNode(r);null===r&&(r=this.tail),r!==this.head&&r!==this.tail&&(r=r.prev);for(i=0;i<s.length;i++)r=Ge(this,r,s[i]);return n},ze.prototype.reverse=function(){for(var t=this.head,e=this.tail,s=t;null!==s;s=s.prev){var i=s.prev;s.prev=s.next,s.next=i}return this.head=e,this.tail=t,this};try{(Be||(Be=1,Ve=function(t){t.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),Ve)(ze)}catch(t){}const Ke=We,Ze=Symbol("max"),Je=Symbol("length"),Qe=Symbol("lengthCalculator"),ts=Symbol("allowStale"),es=Symbol("maxAge"),ss=Symbol("dispose"),is=Symbol("noDisposeOnSet"),rs=Symbol("lruList"),ns=Symbol("cache"),as=Symbol("updateAgeOnGet"),os=()=>1;const hs=(t,e,s)=>{const i=t[ns].get(e);if(i){const e=i.value;if(ls(t,e)){if(us(t,i),!t[ts])return}else s&&(t[as]&&(i.value.now=Date.now()),t[rs].unshiftNode(i));return e.value}},ls=(t,e)=>{if(!e||!e.maxAge&&!t[es])return!1;const s=Date.now()-e.now;return e.maxAge?s>e.maxAge:t[es]&&s>t[es]},cs=t=>{if(t[Je]>t[Ze])for(let e=t[rs].tail;t[Je]>t[Ze]&&null!==e;){const s=e.prev;us(t,e),e=s}},us=(t,e)=>{if(e){const s=e.value;t[ss]&&t[ss](s.key,s.value),t[Je]-=s.length,t[ns].delete(s.key),t[rs].removeNode(e)}};class ds{constructor(t,e,s,i,r){this.key=t,this.value=e,this.length=s,this.now=i,this.maxAge=r||0}}const fs=(t,e,s,i)=>{let r=s.value;ls(t,r)&&(us(t,s),t[ts]||(r=void 0)),r&&e.call(i,r.value,r.key,t)};var ps=class{constructor(t){if("number"==typeof t&&(t={max:t}),t||(t={}),t.max&&("number"!=typeof t.max||t.max<0))throw new TypeError("max must be a non-negative number");this[Ze]=t.max||1/0;const e=t.length||os;if(this[Qe]="function"!=typeof e?os:e,this[ts]=t.stale||!1,t.maxAge&&"number"!=typeof t.maxAge)throw new TypeError("maxAge must be a number");this[es]=t.maxAge||0,this[ss]=t.dispose,this[is]=t.noDisposeOnSet||!1,this[as]=t.updateAgeOnGet||!1,this.reset()}set max(t){if("number"!=typeof t||t<0)throw new TypeError("max must be a non-negative number");this[Ze]=t||1/0,cs(this)}get max(){return this[Ze]}set allowStale(t){this[ts]=!!t}get allowStale(){return this[ts]}set maxAge(t){if("number"!=typeof t)throw new TypeError("maxAge must be a non-negative number");this[es]=t,cs(this)}get maxAge(){return this[es]}set lengthCalculator(t){"function"!=typeof t&&(t=os),t!==this[Qe]&&(this[Qe]=t,this[Je]=0,this[rs].forEach((t=>{t.length=this[Qe](t.value,t.key),this[Je]+=t.length}))),cs(this)}get lengthCalculator(){return this[Qe]}get length(){return this[Je]}get itemCount(){return this[rs].length}rforEach(t,e){e=e||this;for(let s=this[rs].tail;null!==s;){const i=s.prev;fs(this,t,s,e),s=i}}forEach(t,e){e=e||this;for(let s=this[rs].head;null!==s;){const i=s.next;fs(this,t,s,e),s=i}}keys(){return this[rs].toArray().map((t=>t.key))}values(){return this[rs].toArray().map((t=>t.value))}reset(){this[ss]&&this[rs]&&this[rs].length&&this[rs].forEach((t=>this[ss](t.key,t.value))),this[ns]=new Map,this[rs]=new Ke,this[Je]=0}dump(){return this[rs].map((t=>!ls(this,t)&&{k:t.key,v:t.value,e:t.now+(t.maxAge||0)})).toArray().filter((t=>t))}dumpLru(){return this[rs]}set(t,e,s){if((s=s||this[es])&&"number"!=typeof s)throw new TypeError("maxAge must be a number");const i=s?Date.now():0,r=this[Qe](e,t);if(this[ns].has(t)){if(r>this[Ze])return us(this,this[ns].get(t)),!1;const n=this[ns].get(t).value;return this[ss]&&(this[is]||this[ss](t,n.value)),n.now=i,n.maxAge=s,n.value=e,this[Je]+=r-n.length,n.length=r,this.get(t),cs(this),!0}const n=new ds(t,e,r,i,s);return n.length>this[Ze]?(this[ss]&&this[ss](t,e),!1):(this[Je]+=n.length,this[rs].unshift(n),this[ns].set(t,this[rs].head),cs(this),!0)}has(t){if(!this[ns].has(t))return!1;const e=this[ns].get(t).value;return!ls(this,e)}get(t){return hs(this,t,!0)}peek(t){return hs(this,t,!1)}pop(){const t=this[rs].tail;return t?(us(this,t),t.value):null}del(t){us(this,this[ns].get(t))}load(t){this.reset();const e=Date.now();for(let s=t.length-1;s>=0;s--){const i=t[s],r=i.e||0;if(0===r)this.set(i.k,i.v);else{const t=r-e;t>0&&this.set(i.k,i.v,t)}}}prune(){this[ns].forEach(((t,e)=>hs(this,e,!1)))}};const ms=Xe;var gs=(t,e,s)=>new ms(t,s).compare(new ms(e,s));const xs=gs;const ws=gs;const bs=gs;const vs=gs;const ys=gs;const Es=gs;const As=(t,e,s)=>0===xs(t,e,s),Is=(t,e,s)=>0!==ws(t,e,s),Ss=(t,e,s)=>bs(t,e,s)>0,Rs=(t,e,s)=>vs(t,e,s)>=0,ks=(t,e,s)=>ys(t,e,s)<0,Cs=(t,e,s)=>Es(t,e,s)<=0;var Ts,Ms,Ys,Xs,Ns=(t,e,s,i)=>{switch(e){case"===":return"object"==typeof t&&(t=t.version),"object"==typeof s&&(s=s.version),t===s;case"!==":return"object"==typeof t&&(t=t.version),"object"==typeof s&&(s=s.version),t!==s;case"":case"=":case"==":return As(t,s,i);case"!=":return Is(t,s,i);case">":return Ss(t,s,i);case">=":return Rs(t,s,i);case"<":return ks(t,s,i);case"<=":return Cs(t,s,i);default:throw new TypeError(`Invalid operator: ${e}`)}};function _s(){if(Xs)return Ys;Xs=1;class t{constructor(e,r){if(r=s(r),e instanceof t)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new t(e.raw,r);if(e instanceof i)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map((t=>this.parseRange(t.trim()))).filter((t=>t.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const t=this.set[0];if(this.set=this.set.filter((t=>!f(t[0]))),0===this.set.length)this.set=[t];else if(this.set.length>1)for(const t of this.set)if(1===t.length&&p(t[0])){this.set=[t];break}}this.format()}format(){return this.range=this.set.map((t=>t.join(" ").trim())).join("||").trim(),this.range}toString(){return this.range}parseRange(t){const s=((this.options.includePrerelease&&u)|(this.options.loose&&d))+":"+t,n=e.get(s);if(n)return n;const p=this.options.loose,m=p?a[o.HYPHENRANGELOOSE]:a[o.HYPHENRANGE];t=t.replace(m,R(this.options.includePrerelease)),r("hyphen replace",t),t=t.replace(a[o.COMPARATORTRIM],h),r("comparator trim",t),t=t.replace(a[o.TILDETRIM],l),r("tilde trim",t),t=t.replace(a[o.CARETTRIM],c),r("caret trim",t);let x=t.split(" ").map((t=>g(t,this.options))).join(" ").split(/\s+/).map((t=>S(t,this.options)));p&&(x=x.filter((t=>(r("loose invalid filter",t,this.options),!!t.match(a[o.COMPARATORLOOSE]))))),r("range list",x);const w=new Map,b=x.map((t=>new i(t,this.options)));for(const t of b){if(f(t))return[t];w.set(t.value,t)}w.size>1&&w.has("")&&w.delete("");const v=[...w.values()];return e.set(s,v),v}intersects(e,s){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some((t=>m(t,s)&&e.set.some((e=>m(e,s)&&t.every((t=>e.every((e=>t.intersects(e,s)))))))))}test(t){if(!t)return!1;if("string"==typeof t)try{t=new n(t,this.options)}catch(t){return!1}for(let e=0;e<this.set.length;e++)if(k(this.set[e],t,this.options))return!0;return!1}}Ys=t;const e=new ps({max:1e3}),s=ye,i=function(){if(Ms)return Ts;Ms=1;const t=Symbol("SemVer ANY");class e{static get ANY(){return t}constructor(i,r){if(r=s(r),i instanceof e){if(i.loose===!!r.loose)return i;i=i.value}i=i.trim().split(/\s+/).join(" "),a("comparator",i,r),this.options=r,this.loose=!!r.loose,this.parse(i),this.semver===t?this.value="":this.value=this.operator+this.semver.version,a("comp",this)}parse(e){const s=this.options.loose?i[r.COMPARATORLOOSE]:i[r.COMPARATOR],n=e.match(s);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==n[1]?n[1]:"","="===this.operator&&(this.operator=""),n[2]?this.semver=new o(n[2],this.options.loose):this.semver=t}toString(){return this.value}test(e){if(a("Comparator.test",e,this.options.loose),this.semver===t||e===t)return!0;if("string"==typeof e)try{e=new o(e,this.options)}catch(t){return!1}return n(e,this.operator,this.semver,this.options)}intersects(t,i){if(!(t instanceof e))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new h(t.value,i).test(this.value):""===t.operator?""===t.value||new h(this.value,i).test(t.semver):!((i=s(i)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===t.value)||!i.includePrerelease&&(this.value.startsWith("<0.0.0")||t.value.startsWith("<0.0.0"))||(!this.operator.startsWith(">")||!t.operator.startsWith(">"))&&(!this.operator.startsWith("<")||!t.operator.startsWith("<"))&&(this.semver.version!==t.semver.version||!this.operator.includes("=")||!t.operator.includes("="))&&!(n(this.semver,"<",t.semver,i)&&this.operator.startsWith(">")&&t.operator.startsWith("<"))&&!(n(this.semver,">",t.semver,i)&&this.operator.startsWith("<")&&t.operator.startsWith(">")))}}Ts=e;const s=ye,{safeRe:i,t:r}=we,n=Ns,a=ge,o=Xe,h=_s();return Ts}(),r=ge,n=Xe,{safeRe:a,t:o,comparatorTrimReplace:h,tildeTrimReplace:l,caretTrimReplace:c}=we,{FLAG_INCLUDE_PRERELEASE:u,FLAG_LOOSE:d}=me,f=t=>"<0.0.0-0"===t.value,p=t=>""===t.value,m=(t,e)=>{let s=!0;const i=t.slice();let r=i.pop();for(;s&&i.length;)s=i.every((t=>r.intersects(t,e))),r=i.pop();return s},g=(t,e)=>(r("comp",t,e),t=v(t,e),r("caret",t),t=w(t,e),r("tildes",t),t=E(t,e),r("xrange",t),t=I(t,e),r("stars",t),t),x=t=>!t||"x"===t.toLowerCase()||"*"===t,w=(t,e)=>t.trim().split(/\s+/).map((t=>b(t,e))).join(" "),b=(t,e)=>{const s=e.loose?a[o.TILDELOOSE]:a[o.TILDE];return t.replace(s,((e,s,i,n,a)=>{let o;return r("tilde",t,e,s,i,n,a),x(s)?o="":x(i)?o=`>=${s}.0.0 <${+s+1}.0.0-0`:x(n)?o=`>=${s}.${i}.0 <${s}.${+i+1}.0-0`:a?(r("replaceTilde pr",a),o=`>=${s}.${i}.${n}-${a} <${s}.${+i+1}.0-0`):o=`>=${s}.${i}.${n} <${s}.${+i+1}.0-0`,r("tilde return",o),o}))},v=(t,e)=>t.trim().split(/\s+/).map((t=>y(t,e))).join(" "),y=(t,e)=>{r("caret",t,e);const s=e.loose?a[o.CARETLOOSE]:a[o.CARET],i=e.includePrerelease?"-0":"";return t.replace(s,((e,s,n,a,o)=>{let h;return r("caret",t,e,s,n,a,o),x(s)?h="":x(n)?h=`>=${s}.0.0${i} <${+s+1}.0.0-0`:x(a)?h="0"===s?`>=${s}.${n}.0${i} <${s}.${+n+1}.0-0`:`>=${s}.${n}.0${i} <${+s+1}.0.0-0`:o?(r("replaceCaret pr",o),h="0"===s?"0"===n?`>=${s}.${n}.${a}-${o} <${s}.${n}.${+a+1}-0`:`>=${s}.${n}.${a}-${o} <${s}.${+n+1}.0-0`:`>=${s}.${n}.${a}-${o} <${+s+1}.0.0-0`):(r("no pr"),h="0"===s?"0"===n?`>=${s}.${n}.${a}${i} <${s}.${n}.${+a+1}-0`:`>=${s}.${n}.${a}${i} <${s}.${+n+1}.0-0`:`>=${s}.${n}.${a} <${+s+1}.0.0-0`),r("caret return",h),h}))},E=(t,e)=>(r("replaceXRanges",t,e),t.split(/\s+/).map((t=>A(t,e))).join(" ")),A=(t,e)=>{t=t.trim();const s=e.loose?a[o.XRANGELOOSE]:a[o.XRANGE];return t.replace(s,((s,i,n,a,o,h)=>{r("xRange",t,s,i,n,a,o,h);const l=x(n),c=l||x(a),u=c||x(o),d=u;return"="===i&&d&&(i=""),h=e.includePrerelease?"-0":"",l?s=">"===i||"<"===i?"<0.0.0-0":"*":i&&d?(c&&(a=0),o=0,">"===i?(i=">=",c?(n=+n+1,a=0,o=0):(a=+a+1,o=0)):"<="===i&&(i="<",c?n=+n+1:a=+a+1),"<"===i&&(h="-0"),s=`${i+n}.${a}.${o}${h}`):c?s=`>=${n}.0.0${h} <${+n+1}.0.0-0`:u&&(s=`>=${n}.${a}.0${h} <${n}.${+a+1}.0-0`),r("xRange return",s),s}))},I=(t,e)=>(r("replaceStars",t,e),t.trim().replace(a[o.STAR],"")),S=(t,e)=>(r("replaceGTE0",t,e),t.trim().replace(a[e.includePrerelease?o.GTE0PRE:o.GTE0],"")),R=t=>(e,s,i,r,n,a,o,h,l,c,u,d,f)=>`${s=x(i)?"":x(r)?`>=${i}.0.0${t?"-0":""}`:x(n)?`>=${i}.${r}.0${t?"-0":""}`:a?`>=${s}`:`>=${s}${t?"-0":""}`} ${h=x(l)?"":x(c)?`<${+l+1}.0.0-0`:x(u)?`<${l}.${+c+1}.0-0`:d?`<=${l}.${c}.${u}-${d}`:t?`<${l}.${c}.${+u+1}-0`:`<=${h}`}`.trim(),k=(t,e,s)=>{for(let s=0;s<t.length;s++)if(!t[s].test(e))return!1;if(e.prerelease.length&&!s.includePrerelease){for(let s=0;s<t.length;s++)if(r(t[s].semver),t[s].semver!==i.ANY&&t[s].semver.prerelease.length>0){const i=t[s].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0};return Ys}const Ls=_s();var Ps=(t,e,s)=>{try{e=new Ls(e,s)}catch(t){return!1}return e.test(t)};var Ds={valid:Pe,coerce:qe,satisfies:Ps,SEMVER_SPEC_VERSION:me.SEMVER_SPEC_VERSION};pc.extend(pc,function(){var t=0,e=1,s=2,i={9728:pc.FILTER_NEAREST,9729:pc.FILTER_LINEAR,9984:pc.FILTER_NEAREST_MIPMAP_NEAREST,9985:pc.FILTER_LINEAR_MIPMAP_NEAREST,9986:pc.FILTER_NEAREST_MIPMAP_LINEAR,9987:pc.FILTER_LINEAR_MIPMAP_LINEAR},n={33648:pc.ADDRESS_MIRRORED_REPEAT,33071:pc.ADDRESS_CLAMP_TO_EDGE,10487:pc.ADDRESS_REPEAT},a=[0,1,2,2,3,0],o=function(t){this._image={width:t.width,height:t.height},this.pcTexture=t};o.prototype={setFilters:function(t,e){this.pcTexture.minFilter=i[t],this.pcTexture.magFilter=i[e]},setWraps:function(t,e){this.pcTexture.addressU=n[t],this.pcTexture.addressV=n[e]},getImage:function(){return this._image},dispose:function(){this.pcTexture.destroy()}};var h=function(t,e,s,i){var r;if(this._app=t,this._position=new pc.Vec3,1===Lt.length){r=new Lt(e);for(const t of r.pages)t.setTexture(new o(i[t.name]))}else r=new Lt(e,(function(t){return new o(i[t])}));var n=new le(new qt(r));n.scale*=.01;var a=n.readSkeletonData(s);this.skeletonVersion=Ds.valid(Ds.coerce(a.version)),this._spine_3_6_0=Ds.satisfies(this.skeletonVersion,"<=3.6.0"),this._spine_3_7_99=Ds.satisfies(this.skeletonVersion,"<=3.7.99"),this._spine_4_1_X=Ds.satisfies(this.skeletonVersion,"~4.1.23"),this.skeleton=new ee(a),this.skeleton.updateWorldTransform(),this.stateData=new Et(this.skeleton.data),this.states=[new ut(this.stateData)],this.clipper=new he,this._node=new pc.GraphNode,this._meshes=[],this._meshInstances=[],this._materials={},this._tint={},this._aabb=new pc.BoundingBox,this._aabbTempArray=[],this._aabbTempOffset=new pc.Vec2,this._aabbTempSize=new pc.Vec2,this._renderCounts={vertexCount:0,indexCount:0},this._vertexFormat=null,this._vertexBuffer=null,this._indexBuffer=null,this._priority=0,this._timeScale=1,this._layers=[pc.LAYERID_UI],this.init(),this.autoUpdate=!0,this._hidden=!1};return h.prototype.destroy=function(){this.removeFromLayers();for(var t=0;t<this._meshInstances.length;t++)this._meshInstances[t].mesh.vertexBuffer=null,this._meshInstances[t].mesh.indexBuffer.length=0,this._meshInstances[t].material=null;this._vertexBuffer&&(this._vertexBuffer.destroy(),this._vertexBuffer=null),this._indexBuffer&&(this._indexBuffer.destroy(),this._indexBuffer=null),this._meshInstances=[],this.skeleton=null,this.stateData=null,this._materials={},this._node=null},h.prototype.hide=function(){if(!this._hidden){for(var t=0,e=this._meshInstances.length;t<e;t++)this._meshInstances[t].visible=!1;this._hidden=!0}},h.prototype.show=function(){if(this._hidden){for(var t=0,e=this._meshInstances.length;t<e;t++)this._meshInstances[t].visible=!0;this._hidden=!1}},h.prototype.init=function(){this._vertexFormat=new pc.VertexFormat(this._app.graphicsDevice,[{semantic:pc.SEMANTIC_POSITION,components:2,type:pc.TYPE_FLOAT32},{semantic:pc.SEMANTIC_NORMAL,components:4,type:pc.TYPE_UINT8,normalize:!0},{semantic:pc.SEMANTIC_TEXCOORD0,components:2,type:pc.TYPE_FLOAT32},{semantic:pc.SEMANTIC_COLOR,components:4,type:pc.TYPE_UINT8,normalize:!0}]);for(var t=this.skeleton.drawOrder,e=0,s=t.length;e<s;e++)this.initSlot(t[e])},h.prototype.initSlot=function(e){e.positions=[],e.uvs=[],e.indices=[],e.vertexColor={},e._active={name:"",type:t},this.initAttachment(e)},h.prototype.createMaterial=function(t){var e=new pc.StandardMaterial;if(e.shadingModel=pc.SPECULAR_BLINN,e.diffuse=new pc.Color(1,1,1),e.emissiveMap=t,e.emissiveMapChannel="rgb",e.emissiveVertexColor=!0,e.emissiveVertexColorChannel="rgb",e.opacityMap=t,e.opacityMapChannel="a",e.opacityVertexColor=!0,e.opacityVertexColorChannel="a",e.depthWrite=!1,e.cull=pc.CULLFACE_NONE,e.blendType=pc.BLEND_PREMULTIPLIED,this._spine_3_6_0){var s=["gl_FragColor.rgb *= vVertexColor.a;","gl_FragColor.a = dAlpha;"].join("\n");e.chunks.outputAlphaPremulPS=s}return e.update(),e},h.prototype.initAttachment=function(t){var i=t.attachment;if(i&&(t._active.name=i.name,i instanceof Bt?t._active.type=s:i instanceof $t&&(t._active.type=e),i.region&&i.region.texture)){var r=i.region.texture.pcTexture;if(r)if(r instanceof pc.StandardMaterial)this._materials[r.name]=r,t.material=r.name;else{var n=null;if(r.name?n=r.name:r.getSource()instanceof Image&&(n=r.getSource().getAttribute("src")),n){if(void 0===this._materials[n]){var a=this.createMaterial(r);this._materials[n]=a}t.material=n}}}},h.prototype.updateSlot=function(i,n){var o=i.attachment,h=o.name,l=o instanceof Bt?s:o instanceof $t?e:t;i._active.name===h&&i._active.type===l||this.initAttachment(i),i.positions.length=0,o instanceof Bt?this._spine_4_1_X?o.computeWorldVertices(i,i.positions,0,2):o.computeWorldVertices(i.bone,i.positions,0,2):o instanceof $t&&o.computeWorldVertices(i,0,o.worldVerticesLength,i.positions,0,2);var c=this._tint[h];i.vertexColor={r:Math.round(255*i.color.r*(c?c.r:1)),g:Math.round(255*i.color.g*(c?c.g:1)),b:Math.round(255*i.color.b*(c?c.b:1)),a:Math.round(255*i.color.a*(c?c.a:1))};var u,d,f=o.triangles||a;if(n.isClipping()){n.clipTriangles(i.positions,0,f,f.length,o.uvs,r.WHITE,r.WHITE,false),i.positions.length=0,i.uvs.length=0;for(d=n.clippedVertices.length,u=0;u<d;u+=8)i.positions.push(n.clippedVertices[u],n.clippedVertices[u+1]),i.uvs.push(n.clippedVertices[u+6],1-n.clippedVertices[u+7]);i.indices=n.clippedTriangles.slice()}else{for(i.uvs.length=0,d=i.positions.length,u=0;u<d;u+=2)i.uvs.push(o.uvs[u],1-o.uvs[u+1]);i.indices=f}this._renderCounts.vertexCount+=i.positions.length/2,this._renderCounts.indexCount+=i.indices.length},h.prototype.updateSkeleton=function(t){this._renderCounts.vertexCount=0,this._renderCounts.indexCount=0;var e=this.clipper;for(var s=this.skeleton.drawOrder,i=s.length,r=0;r<i;r++){var n=s[r];if(this._spine_3_7_99||n.bone.active){0;var a=n.getAttachment();a instanceof It?e.clipStart(n,a):a instanceof Bt||a instanceof $t?this.updateSlot(n,e):this._spine_3_7_99||e.clipEndWithSlot(n)}else e.clipEndWithSlot(n)}},h.prototype.render=function(){if(this._meshInstances.forEach((function(t){t.material=null})),this.removeFromLayers(),this._meshes=[],this._meshInstances.length=0,this._renderCounts.indexCount>0&&this._renderCounts.vertexCount>0){this.skeleton.getBounds(this._aabbTempOffset,this._aabbTempSize,this._aabbTempArray),this._aabb.center=new pc.Vec3(this._aabbTempOffset.x,this._aabbTempOffset.y,0),this._aabb.halfExtents=new pc.Vec3(.5*this._aabbTempSize.x,.5*this._aabbTempSize.y,0),(!this._vertexBuffer||this._vertexBuffer.getNumVertices()<this._renderCounts.vertexCount)&&(this._vertexBuffer&&this._vertexBuffer.destroy(),this._vertexBuffer=new pc.VertexBuffer(this._app.graphicsDevice,this._vertexFormat,this._renderCounts.vertexCount)),(!this._indexBuffer||this._indexBuffer.getNumIndices()<this._renderCounts.indexCount)&&(this._indexBuffer&&this._indexBuffer.destroy(),this._indexBuffer=new pc.IndexBuffer(this._app.graphicsDevice,pc.INDEXFORMAT_UINT16,this._renderCounts.indexCount));for(var t=null,e=0,s=0,i=new pc.VertexIterator(this._vertexBuffer),r=new Uint16Array(this._indexBuffer.lock()),n=0,a=0,o=this.skeleton.drawOrder,h=o.length,l=0;l<h;l++){var c=o[l];if(c.attachment&&c.material&&c.positions.length>0&&c.indices.length>0){t&&t!==c.material&&(this.SubmitBatch(e,s,t),t=c.material,e=n,s=0),t=c.material;var u,d=c.positions,f=c.vertexColor.r,p=c.vertexColor.g,m=c.vertexColor.b,g=c.vertexColor.a,x=c.uvs,w=d.length/2;for(u=0;u<w;u++)i.element[pc.SEMANTIC_POSITION].set(d[2*u],d[2*u+1]),i.element[pc.SEMANTIC_NORMAL].set(0,255,0,0),i.element[pc.SEMANTIC_COLOR].set(f,p,m,g),i.element[pc.SEMANTIC_TEXCOORD0].set(x[2*u],1-x[2*u+1]),i.next();var b=c.indices,v=b.length;for(u=0;u<v;u++)r[n+u]=b[u]+a;s+=v,n+=v,a+=w}}i.end(),this._indexBuffer.unlock(),this.SubmitBatch(e,s,t)}this.addToLayers()},h.prototype.SubmitBatch=function(t,e,s){if(e>0){var i=new pc.Mesh(this._app.graphicsDevice);i.vertexBuffer=this._vertexBuffer,i.indexBuffer[0]=this._indexBuffer,i.primitive[0].type=pc.PRIMITIVE_TRIANGLES,i.primitive[0].base=t,i.primitive[0].count=e,i.primitive[0].indexed=!0,i.aabb=this._aabb,this._meshes.push(i);var r=new pc.MeshInstance(this._node,i,this._materials[s]);r.drawOrder=this.priority+this._meshInstances.length,r.visible=!this._hidden,this._meshInstances.push(r)}},h.prototype.update=function(t){if(!this._hidden){t*=this._timeScale;var e,s=this.states.length;for(e=0;e<s;e++)this.states[e].update(t);for(e=0;e<s;e++)this.states[e].apply(this.skeleton);this.autoUpdate&&this.skeleton.updateWorldTransform(),this.updateSkeleton(),this.render()}},h.prototype.setPosition=function(t){this._position.copy(t)},h.prototype.setTint=function(t,e){this._tint[t]=e},h.prototype.removeFromLayers=function(){if(this._meshInstances.length)for(var t=0;t<this._layers.length;t++){var e=this._app.scene.layers.getLayerById(this._layers[t]);e&&e.removeMeshInstances(this._meshInstances)}},h.prototype.addToLayers=function(){if(this._meshInstances.length)for(var t=0;t<this._layers.length;t++){var e=this._app.scene.layers.getLayerById(this._layers[t]);e&&e.addMeshInstances(this._meshInstances)}},Object.defineProperty(h.prototype,"state",{get:function(){return this.states[0]}}),Object.defineProperty(h.prototype,"priority",{get:function(){return this._priority},set:function(t){this._priority=t}}),Object.defineProperty(h.prototype,"timeScale",{get:function(){return this._timeScale},set:function(t){this._timeScale=t}}),Object.defineProperty(h.prototype,"layers",{get:function(){return this._layers},set:function(t){this.removeFromLayers(),this._layers=t||[],this.addToLayers()}}),{Spine:h}}());
