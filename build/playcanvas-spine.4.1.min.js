var spine=function(t){"use strict";function e(t){var e=Object.create(null);return t&&Object.keys(t).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}})),e.default=t,Object.freeze(e)}var n=e(t);function r(){r=function(){return e};var t,e={},n=Object.prototype,a=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",h=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var a=e&&e.prototype instanceof y?e:y,s=Object.create(a.prototype),o=new F(r||[]);return i(s,"_invoke",{value:T(t,n,o)}),s}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var d="suspendedStart",v="suspendedYield",m="executing",p="completed",g={};function y(){}function w(){}function k(){}var b={};u(b,o,(function(){return this}));var x=Object.getPrototypeOf,E=x&&x(x(Y([])));E&&E!==n&&a.call(E,o)&&(b=E);var I=k.prototype=y.prototype=Object.create(b);function A(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(r,i,s,o){var h=f(t[r],t,i);if("throw"!==h.type){var l=h.arg,u=l.value;return u&&"object"==typeof u&&a.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,s,o)}),(function(t){n("throw",t,s,o)})):e.resolve(u).then((function(t){l.value=t,s(l)}),(function(t){return n("throw",t,s,o)}))}o(h.arg)}var r;i(this,"_invoke",{value:function(t,a){function i(){return new e((function(e,r){n(t,a,e,r)}))}return r=r?r.then(i,i):i()}})}function T(e,n,r){var a=d;return function(i,s){if(a===m)throw new Error("Generator is already running");if(a===p){if("throw"===i)throw s;return{value:t,done:!0}}for(r.method=i,r.arg=s;;){var o=r.delegate;if(o){var h=R(o,r);if(h){if(h===g)continue;return h}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=m;var l=f(e,n,r);if("normal"===l.type){if(a=r.done?p:v,l.arg===g)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(a=p,r.method="throw",r.arg=l.arg)}}}function R(e,n){var r=n.method,a=e.iterator[r];if(a===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,R(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var i=f(a,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var s=i.arg;return s?s.done?(n[e.resultName]=s.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function F(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function Y(e){if(e||""===e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function n(){for(;++r<e.length;)if(a.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(typeof e+" is not iterable")}return w.prototype=k,i(I,"constructor",{value:k,configurable:!0}),i(k,"constructor",{value:w,configurable:!0}),w.displayName=u(k,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,k):(t.__proto__=k,u(t,l,"GeneratorFunction")),t.prototype=Object.create(I),t},e.awrap=function(t){return{__await:t}},A(S.prototype),u(S.prototype,h,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var s=new S(c(t,n,r,a),i);return e.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},A(I),u(I,l,"Generator"),u(I,o,(function(){return this})),u(I,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=Y,F.prototype={constructor:F,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(M),!e)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,a){return o.type="throw",o.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],o=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var h=a.call(s,"catchLoc"),l=a.call(s,"finallyLoc");if(h&&l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=t,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),M(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;M(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:Y(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,k(r.key),r)}}function o(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function h(t,e,n){return(e=k(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}function u(t){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},u(t)}function c(t,e){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},c(t,e)}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=u(t);if(e){var a=u(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return f(t)}(this,n)}}function v(){return v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(r){var a=Object.getOwnPropertyDescriptor(r,e);return a.get?a.get.call(arguments.length<3?t:n):a.value}},v.apply(this,arguments)}function m(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,i,s,o=[],h=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=i.call(n)).done)&&(o.push(r.value),o.length!==e);h=!0);}catch(t){l=!0,a=t}finally{try{if(!h&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw a}}return o}}(t,e)||g(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t){return function(t){if(Array.isArray(t))return y(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||g(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){if(t){if("string"==typeof t)return y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(t,e):void 0}}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function w(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=g(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,i=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw i}}}}function k(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}var b=function(){function t(){i(this,t),this.array=new Array}return o(t,[{key:"add",value:function(t){var e=this.contains(t);return this.array[0|t]=0|t,!e}},{key:"contains",value:function(t){return null!=this.array[0|t]}},{key:"remove",value:function(t){this.array[0|t]=void 0}},{key:"clear",value:function(){this.array.length=0}}]),t}(),x=function(){function t(){i(this,t),this.entries={},this.size=0}return o(t,[{key:"add",value:function(t){var e=this.entries[t];return this.entries[t]=!0,!e&&(this.size++,!0)}},{key:"addAll",value:function(t){for(var e=this.size,n=0,r=t.length;n<r;n++)this.add(t[n]);return e!=this.size}},{key:"contains",value:function(t){return this.entries[t]}},{key:"clear",value:function(){this.entries={},this.size=0}}]),t}(),E=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;i(this,t),this.r=e,this.g=n,this.b=r,this.a=a}return o(t,[{key:"set",value:function(t,e,n,r){return this.r=t,this.g=e,this.b=n,this.a=r,this.clamp()}},{key:"setFromColor",value:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this}},{key:"setFromString",value:function(t){return t="#"==t.charAt(0)?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=8!=t.length?1:parseInt(t.substr(6,2),16)/255,this}},{key:"add",value:function(t,e,n,r){return this.r+=t,this.g+=e,this.b+=n,this.a+=r,this.clamp()}},{key:"clamp",value:function(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this}}],[{key:"rgba8888ToColor",value:function(t,e){t.r=((4278190080&e)>>>24)/255,t.g=((16711680&e)>>>16)/255,t.b=((65280&e)>>>8)/255,t.a=(255&e)/255}},{key:"rgb888ToColor",value:function(t,e){t.r=((16711680&e)>>>16)/255,t.g=((65280&e)>>>8)/255,t.b=(255&e)/255}},{key:"fromString",value:function(e){return(new t).setFromString(e)}}]),t}();E.WHITE=new E(1,1,1,1),E.RED=new E(1,0,0,1),E.GREEN=new E(0,1,0,1),E.BLUE=new E(0,0,1,1),E.MAGENTA=new E(1,0,1,1);var I=function(){function t(){i(this,t)}return o(t,null,[{key:"clamp",value:function(t,e,n){return t<e?e:t>n?n:t}},{key:"cosDeg",value:function(e){return Math.cos(e*t.degRad)}},{key:"sinDeg",value:function(e){return Math.sin(e*t.degRad)}},{key:"signum",value:function(t){return t>0?1:t<0?-1:0}},{key:"toInt",value:function(t){return t>0?Math.floor(t):Math.ceil(t)}},{key:"cbrt",value:function(t){var e=Math.pow(Math.abs(t),1/3);return t<0?-e:e}},{key:"randomTriangular",value:function(e,n){return t.randomTriangularWith(e,n,.5*(e+n))}},{key:"randomTriangularWith",value:function(t,e,n){var r=Math.random(),a=e-t;return r<=(n-t)/a?t+Math.sqrt(r*a*(n-t)):e-Math.sqrt((1-r)*a*(e-n))}},{key:"isPowerOfTwo",value:function(t){return t&&0==(t&t-1)}}]),t}();I.PI=3.1415927,I.PI2=2*I.PI,I.radiansToDegrees=180/I.PI,I.radDeg=I.radiansToDegrees,I.degreesToRadians=I.PI/180,I.degRad=I.degreesToRadians;var A=function(){function t(){i(this,t)}return o(t,[{key:"apply",value:function(t,e,n){return t+(e-t)*this.applyInternal(n)}}]),t}(),S=function(t){l(n,t);var e=d(n);function n(t){var r;return i(this,n),(r=e.call(this)).power=2,r.power=t,r}return o(n,[{key:"applyInternal",value:function(t){return t<=.5?Math.pow(2*t,this.power)/2:Math.pow(2*(t-1),this.power)/(this.power%2==0?-2:2)+1}}]),n}(A),T=function(t){l(n,t);var e=d(n);function n(t){return i(this,n),e.call(this,t)}return o(n,[{key:"applyInternal",value:function(t){return Math.pow(t-1,this.power)*(this.power%2==0?-1:1)+1}}]),n}(S),R=function(){function t(){i(this,t)}return o(t,null,[{key:"arrayCopy",value:function(t,e,n,r,a){for(var i=e,s=r;i<e+a;i++,s++)n[s]=t[i]}},{key:"arrayFill",value:function(t,e,n,r){for(var a=e;a<n;a++)t[a]=r}},{key:"setArraySize",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=t.length;if(r==e)return t;if(t.length=e,r<e)for(var a=r;a<e;a++)t[a]=n;return t}},{key:"ensureArrayCapacity",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e.length>=n?e:t.setArraySize(e,n,r)}},{key:"newArray",value:function(t,e){for(var n=new Array(t),r=0;r<t;r++)n[r]=e;return n}},{key:"newFloatArray",value:function(e){if(t.SUPPORTS_TYPED_ARRAYS)return new Float32Array(e);for(var n=new Array(e),r=0;r<n.length;r++)n[r]=0;return n}},{key:"newShortArray",value:function(e){if(t.SUPPORTS_TYPED_ARRAYS)return new Int16Array(e);for(var n=new Array(e),r=0;r<n.length;r++)n[r]=0;return n}},{key:"toFloatArray",value:function(e){return t.SUPPORTS_TYPED_ARRAYS?new Float32Array(e):e}},{key:"toSinglePrecision",value:function(e){return t.SUPPORTS_TYPED_ARRAYS?Math.fround(e):e}},{key:"webkit602BugfixHelper",value:function(t,e){}},{key:"contains",value:function(t,e){for(var n=0;n<t.length;n++)if(t[n]==e)return!0;return!1}},{key:"enumValue",value:function(t,e){return t[e[0].toUpperCase()+e.slice(1)]}}]),t}();R.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array;var C=function(){function t(){i(this,t)}return o(t,null,[{key:"logBones",value:function(t){for(var e=0;e<t.bones.length;e++){var n=t.bones[e];console.log(n.data.name+", "+n.a+", "+n.b+", "+n.c+", "+n.d+", "+n.worldX+", "+n.worldY)}}}]),t}(),M=function(){function t(e){i(this,t),this.items=new Array,this.instantiator=e}return o(t,[{key:"obtain",value:function(){return this.items.length>0?this.items.pop():this.instantiator()}},{key:"free",value:function(t){t.reset&&t.reset(),this.items.push(t)}},{key:"freeAll",value:function(t){for(var e=0;e<t.length;e++)this.free(t[e])}},{key:"clear",value:function(){this.items.length=0}}]),t}(),F=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;i(this,t),this.x=e,this.y=n}return o(t,[{key:"set",value:function(t,e){return this.x=t,this.y=e,this}},{key:"length",value:function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)}},{key:"normalize",value:function(){var t=this.length();return 0!=t&&(this.x/=t,this.y/=t),this}}]),t}(),Y=function(){function t(){i(this,t),this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}return o(t,[{key:"update",value:function(){var t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)}}]),t}(),L=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;i(this,t),this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(e)}return o(t,[{key:"hasEnoughData",value:function(){return this.addedValues>=this.values.length}},{key:"addValue",value:function(t){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=t,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0}},{key:"getMean",value:function(){if(this.hasEnoughData()){if(this.dirty){for(var t=0,e=0;e<this.values.length;e++)t+=this.values[e];this.mean=t/this.values.length,this.dirty=!1}return this.mean}return 0}}]),t}(),X=o((function t(e){if(i(this,t),!e)throw new Error("name cannot be null.");this.name=e})),N=function(t){l(n,t);var e=d(n);function n(t){var r;return i(this,n),(r=e.call(this,t)).id=n.nextID++,r.bones=null,r.vertices=[],r.worldVerticesLength=0,r.timelineAttachment=f(r),r}return o(n,[{key:"computeWorldVertices",value:function(t,e,n,r,a,i){n=a+(n>>1)*i;var s=t.bone.skeleton,o=t.deform,h=this.vertices,l=this.bones;if(l){for(var u=0,c=0,f=0;f<e;f+=2){var d=l[u];u+=d+1,c+=d}var v=s.bones;if(0==o.length)for(var m=a,p=3*c;m<n;m+=i){var g=0,y=0,w=l[u++];for(w+=u;u<w;u++,p+=3){var k=v[l[u]],b=h[p],x=h[p+1],E=h[p+2];g+=(b*k.a+x*k.b+k.worldX)*E,y+=(b*k.c+x*k.d+k.worldY)*E}r[m]=g,r[m+1]=y}else for(var I=o,A=a,S=3*c,T=c<<1;A<n;A+=i){var R=0,C=0,M=l[u++];for(M+=u;u<M;u++,S+=3,T+=2){var F=v[l[u]],Y=h[S]+I[T],L=h[S+1]+I[T+1],X=h[S+2];R+=(Y*F.a+L*F.b+F.worldX)*X,C+=(Y*F.c+L*F.d+F.worldY)*X}r[A]=R,r[A+1]=C}}else{o.length>0&&(h=o);for(var N=t.bone,P=N.worldX,_=N.worldY,O=N.a,B=N.b,D=N.c,V=N.d,U=e,q=a;q<n;U+=2,q+=i){var W=h[U],j=h[U+1];r[q]=W*O+j*B+P,r[q+1]=W*D+j*V+_}}}},{key:"copyTo",value:function(t){this.bones?(t.bones=new Array(this.bones.length),R.arrayCopy(this.bones,0,t.bones,0,this.bones.length)):t.bones=null,this.vertices&&(t.vertices=R.newFloatArray(this.vertices.length),R.arrayCopy(this.vertices,0,t.vertices,0,this.vertices.length)),t.worldVerticesLength=this.worldVerticesLength,t.timelineAttachment=this.timelineAttachment}}]),n}(X);N.nextID=0;var P,_=function(){function t(e){i(this,t),this.id=t.nextID(),this.start=0,this.digits=0,this.setupIndex=0,this.regions=new Array(e)}return o(t,[{key:"copy",value:function(){var e=new t(this.regions.length);return R.arrayCopy(this.regions,0,e.regions,0,this.regions.length),e.start=this.start,e.digits=this.digits,e.setupIndex=this.setupIndex,e}},{key:"apply",value:function(t,e){var n=t.sequenceIndex;-1==n&&(n=this.setupIndex),n>=this.regions.length&&(n=this.regions.length-1);var r=this.regions[n];e.region!=r&&(e.region=r,e.updateRegion())}},{key:"getPath",value:function(t,e){for(var n=t,r=(this.start+e).toString(),a=this.digits-r.length;a>0;a--)n+="0";return n+=r}}],[{key:"nextID",value:function(){return t._nextID++}}]),t}();_._nextID=0,function(t){t[t.hold=0]="hold",t[t.once=1]="once",t[t.loop=2]="loop",t[t.pingpong=3]="pingpong",t[t.onceReverse=4]="onceReverse",t[t.loopReverse=5]="loopReverse",t[t.pingpongReverse=6]="pingpongReverse"}(P||(P={}));var O,B,D=[P.hold,P.once,P.loop,P.pingpong,P.onceReverse,P.loopReverse,P.pingpongReverse],V=function(){function t(e,n,r){if(i(this,t),this.timelines=[],this.timelineIds=new x,!e)throw new Error("name cannot be null.");this.name=e,this.setTimelines(n),this.duration=r}return o(t,[{key:"setTimelines",value:function(t){if(!t)throw new Error("timelines cannot be null.");this.timelines=t,this.timelineIds.clear();for(var e=0;e<t.length;e++)this.timelineIds.addAll(t[e].getPropertyIds())}},{key:"hasTimeline",value:function(t){for(var e=0;e<t.length;e++)if(this.timelineIds.contains(t[e]))return!0;return!1}},{key:"apply",value:function(t,e,n,r,a,i,s,o){if(!t)throw new Error("skeleton cannot be null.");r&&0!=this.duration&&(n%=this.duration,e>0&&(e%=this.duration));for(var h=this.timelines,l=0,u=h.length;l<u;l++)h[l].apply(t,e,n,a,i,s,o)}}]),t}();!function(t){t[t.setup=0]="setup",t[t.first=1]="first",t[t.replace=2]="replace",t[t.add=3]="add"}(O||(O={})),function(t){t[t.mixIn=0]="mixIn",t[t.mixOut=1]="mixOut"}(B||(B={}));var U=0,q=1,W=2,j=3,G=4,z=5,H=6,$=7,J=8,K=9,Q=10,Z=11,tt=12,et=13,nt=14,rt=15,at=16,it=17,st=18,ot=19,ht=function(){function t(e,n){i(this,t),this.propertyIds=n,this.frames=R.newFloatArray(e*this.getFrameEntries())}return o(t,[{key:"getPropertyIds",value:function(){return this.propertyIds}},{key:"getFrameEntries",value:function(){return 1}},{key:"getFrameCount",value:function(){return this.frames.length/this.getFrameEntries()}},{key:"getDuration",value:function(){return this.frames[this.frames.length-this.getFrameEntries()]}}],[{key:"search1",value:function(t,e){for(var n=t.length,r=1;r<n;r++)if(t[r]>e)return r-1;return n-1}},{key:"search",value:function(t,e,n){for(var r=t.length,a=n;a<r;a+=n)if(t[a]>e)return a-n;return r-n}}]),t}(),lt=function(t){l(n,t);var e=d(n);function n(t,r,a){var s;return i(this,n),(s=e.call(this,t,a)).curves=R.newFloatArray(t+18*r),s.curves[t-1]=1,s}return o(n,[{key:"setLinear",value:function(t){this.curves[t]=0}},{key:"setStepped",value:function(t){this.curves[t]=1}},{key:"shrink",value:function(t){var e=this.getFrameCount()+18*t;if(this.curves.length>e){var n=R.newFloatArray(e);R.arrayCopy(this.curves,0,n,0,e),this.curves=n}}},{key:"setBezier",value:function(t,e,n,r,a,i,s,o,h,l,u){var c=this.curves,f=this.getFrameCount()+18*t;0==n&&(c[e]=2+f);for(var d=.03*(r-2*i+o),v=.03*(a-2*s+h),m=.006*(3*(i-o)-r+l),p=.006*(3*(s-h)-a+u),g=2*d+m,y=2*v+p,w=.3*(i-r)+d+.16666667*m,k=.3*(s-a)+v+.16666667*p,b=r+w,x=a+k,E=f+18;f<E;f+=2)c[f]=b,c[f+1]=x,w+=g,k+=y,g+=m,y+=p,b+=w,x+=k}},{key:"getBezierValue",value:function(t,e,n,r){var a=this.curves;if(a[r]>t){var i=this.frames[e],s=this.frames[e+n];return s+(t-i)/(a[r]-i)*(a[r+1]-s)}var o=r+18;for(r+=2;r<o;r+=2)if(a[r]>=t){var h=a[r-2],l=a[r-1];return l+(t-h)/(a[r]-h)*(a[r+1]-l)}e+=this.getFrameEntries();var u=a[o-2],c=a[o-1];return c+(t-u)/(this.frames[e]-u)*(this.frames[e+n]-c)}}]),n}(ht),ut=function(t){l(n,t);var e=d(n);function n(t,r,a){return i(this,n),e.call(this,t,r,[a])}return o(n,[{key:"getFrameEntries",value:function(){return 2}},{key:"setFrame",value:function(t,e,n){t<<=1,this.frames[t]=e,this.frames[t+1]=n}},{key:"getCurveValue",value:function(t){for(var e=this.frames,n=e.length-2,r=2;r<=n;r+=2)if(e[r]>t){n=r-2;break}var a=this.curves[n>>1];switch(a){case 0:var i=e[n],s=e[n+1];return s+(t-i)/(e[n+2]-i)*(e[n+2+1]-s);case 1:return e[n+1]}return this.getBezierValue(t,n,1,a-2)}}]),n}(lt),ct=function(t){l(n,t);var e=d(n);function n(t,r,a,s){return i(this,n),e.call(this,t,r,[a,s])}return o(n,[{key:"getFrameEntries",value:function(){return 3}},{key:"setFrame",value:function(t,e,n,r){t*=3,this.frames[t]=e,this.frames[t+1]=n,this.frames[t+2]=r}}]),n}(lt),ft=function(t){l(n,t);var e=d(n);function n(t,r,a){var s;return i(this,n),(s=e.call(this,t,r,U+"|"+a)).boneIndex=0,s.boneIndex=a,s}return o(n,[{key:"apply",value:function(t,e,n,r,a,i,s){var o=t.bones[this.boneIndex];if(o.active)if(n<this.frames[0])switch(i){case O.setup:return void(o.rotation=o.data.rotation);case O.first:o.rotation+=(o.data.rotation-o.rotation)*a}else{var h=this.getCurveValue(n);switch(i){case O.setup:o.rotation=o.data.rotation+h*a;break;case O.first:case O.replace:h+=o.data.rotation-o.rotation;case O.add:o.rotation+=h*a}}}}]),n}(ut),dt=function(t){l(n,t);var e=d(n);function n(t,r,a){var s;return i(this,n),(s=e.call(this,t,r,q+"|"+a,W+"|"+a)).boneIndex=0,s.boneIndex=a,s}return o(n,[{key:"apply",value:function(t,e,n,r,a,i,s){var o=t.bones[this.boneIndex];if(o.active){var h=this.frames;if(n<h[0])switch(i){case O.setup:return o.x=o.data.x,void(o.y=o.data.y);case O.first:o.x+=(o.data.x-o.x)*a,o.y+=(o.data.y-o.y)*a}else{var l=0,u=0,c=ht.search(h,n,3),f=this.curves[c/3];switch(f){case 0:var d=h[c];l=h[c+1],u=h[c+2];var v=(n-d)/(h[c+3]-d);l+=(h[c+3+1]-l)*v,u+=(h[c+3+2]-u)*v;break;case 1:l=h[c+1],u=h[c+2];break;default:l=this.getBezierValue(n,c,1,f-2),u=this.getBezierValue(n,c,2,f+18-2)}switch(i){case O.setup:o.x=o.data.x+l*a,o.y=o.data.y+u*a;break;case O.first:case O.replace:o.x+=(o.data.x+l-o.x)*a,o.y+=(o.data.y+u-o.y)*a;break;case O.add:o.x+=l*a,o.y+=u*a}}}}}]),n}(ct),vt=function(t){l(n,t);var e=d(n);function n(t,r,a){var s;return i(this,n),(s=e.call(this,t,r,q+"|"+a)).boneIndex=0,s.boneIndex=a,s}return o(n,[{key:"apply",value:function(t,e,n,r,a,i,s){var o=t.bones[this.boneIndex];if(o.active)if(n<this.frames[0])switch(i){case O.setup:return void(o.x=o.data.x);case O.first:o.x+=(o.data.x-o.x)*a}else{var h=this.getCurveValue(n);switch(i){case O.setup:o.x=o.data.x+h*a;break;case O.first:case O.replace:o.x+=(o.data.x+h-o.x)*a;break;case O.add:o.x+=h*a}}}}]),n}(ut),mt=function(t){l(n,t);var e=d(n);function n(t,r,a){var s;return i(this,n),(s=e.call(this,t,r,W+"|"+a)).boneIndex=0,s.boneIndex=a,s}return o(n,[{key:"apply",value:function(t,e,n,r,a,i,s){var o=t.bones[this.boneIndex];if(o.active)if(n<this.frames[0])switch(i){case O.setup:return void(o.y=o.data.y);case O.first:o.y+=(o.data.y-o.y)*a}else{var h=this.getCurveValue(n);switch(i){case O.setup:o.y=o.data.y+h*a;break;case O.first:case O.replace:o.y+=(o.data.y+h-o.y)*a;break;case O.add:o.y+=h*a}}}}]),n}(ut),pt=function(t){l(n,t);var e=d(n);function n(t,r,a){var s;return i(this,n),(s=e.call(this,t,r,j+"|"+a,G+"|"+a)).boneIndex=0,s.boneIndex=a,s}return o(n,[{key:"apply",value:function(t,e,n,r,a,i,s){var o=t.bones[this.boneIndex];if(o.active){var h=this.frames;if(n<h[0])switch(i){case O.setup:return o.scaleX=o.data.scaleX,void(o.scaleY=o.data.scaleY);case O.first:o.scaleX+=(o.data.scaleX-o.scaleX)*a,o.scaleY+=(o.data.scaleY-o.scaleY)*a}else{var l,u,c=ht.search(h,n,3),f=this.curves[c/3];switch(f){case 0:var d=h[c];l=h[c+1],u=h[c+2];var v=(n-d)/(h[c+3]-d);l+=(h[c+3+1]-l)*v,u+=(h[c+3+2]-u)*v;break;case 1:l=h[c+1],u=h[c+2];break;default:l=this.getBezierValue(n,c,1,f-2),u=this.getBezierValue(n,c,2,f+18-2)}if(l*=o.data.scaleX,u*=o.data.scaleY,1==a)i==O.add?(o.scaleX+=l-o.data.scaleX,o.scaleY+=u-o.data.scaleY):(o.scaleX=l,o.scaleY=u);else{var m=0,p=0;if(s==B.mixOut)switch(i){case O.setup:m=o.data.scaleX,p=o.data.scaleY,o.scaleX=m+(Math.abs(l)*I.signum(m)-m)*a,o.scaleY=p+(Math.abs(u)*I.signum(p)-p)*a;break;case O.first:case O.replace:m=o.scaleX,p=o.scaleY,o.scaleX=m+(Math.abs(l)*I.signum(m)-m)*a,o.scaleY=p+(Math.abs(u)*I.signum(p)-p)*a;break;case O.add:o.scaleX+=(l-o.data.scaleX)*a,o.scaleY+=(u-o.data.scaleY)*a}else switch(i){case O.setup:m=Math.abs(o.data.scaleX)*I.signum(l),p=Math.abs(o.data.scaleY)*I.signum(u),o.scaleX=m+(l-m)*a,o.scaleY=p+(u-p)*a;break;case O.first:case O.replace:m=Math.abs(o.scaleX)*I.signum(l),p=Math.abs(o.scaleY)*I.signum(u),o.scaleX=m+(l-m)*a,o.scaleY=p+(u-p)*a;break;case O.add:o.scaleX+=(l-o.data.scaleX)*a,o.scaleY+=(u-o.data.scaleY)*a}}}}}}]),n}(ct),gt=function(t){l(n,t);var e=d(n);function n(t,r,a){var s;return i(this,n),(s=e.call(this,t,r,j+"|"+a)).boneIndex=0,s.boneIndex=a,s}return o(n,[{key:"apply",value:function(t,e,n,r,a,i,s){var o=t.bones[this.boneIndex];if(o.active)if(n<this.frames[0])switch(i){case O.setup:return void(o.scaleX=o.data.scaleX);case O.first:o.scaleX+=(o.data.scaleX-o.scaleX)*a}else{var h=this.getCurveValue(n)*o.data.scaleX;if(1==a)i==O.add?o.scaleX+=h-o.data.scaleX:o.scaleX=h;else{var l=0;if(s==B.mixOut)switch(i){case O.setup:l=o.data.scaleX,o.scaleX=l+(Math.abs(h)*I.signum(l)-l)*a;break;case O.first:case O.replace:l=o.scaleX,o.scaleX=l+(Math.abs(h)*I.signum(l)-l)*a;break;case O.add:o.scaleX+=(h-o.data.scaleX)*a}else switch(i){case O.setup:l=Math.abs(o.data.scaleX)*I.signum(h),o.scaleX=l+(h-l)*a;break;case O.first:case O.replace:l=Math.abs(o.scaleX)*I.signum(h),o.scaleX=l+(h-l)*a;break;case O.add:o.scaleX+=(h-o.data.scaleX)*a}}}}}]),n}(ut),yt=function(t){l(n,t);var e=d(n);function n(t,r,a){var s;return i(this,n),(s=e.call(this,t,r,G+"|"+a)).boneIndex=0,s.boneIndex=a,s}return o(n,[{key:"apply",value:function(t,e,n,r,a,i,s){var o=t.bones[this.boneIndex];if(o.active)if(n<this.frames[0])switch(i){case O.setup:return void(o.scaleY=o.data.scaleY);case O.first:o.scaleY+=(o.data.scaleY-o.scaleY)*a}else{var h=this.getCurveValue(n)*o.data.scaleY;if(1==a)i==O.add?o.scaleY+=h-o.data.scaleY:o.scaleY=h;else{var l=0;if(s==B.mixOut)switch(i){case O.setup:l=o.data.scaleY,o.scaleY=l+(Math.abs(h)*I.signum(l)-l)*a;break;case O.first:case O.replace:l=o.scaleY,o.scaleY=l+(Math.abs(h)*I.signum(l)-l)*a;break;case O.add:o.scaleY+=(h-o.data.scaleY)*a}else switch(i){case O.setup:l=Math.abs(o.data.scaleY)*I.signum(h),o.scaleY=l+(h-l)*a;break;case O.first:case O.replace:l=Math.abs(o.scaleY)*I.signum(h),o.scaleY=l+(h-l)*a;break;case O.add:o.scaleY+=(h-o.data.scaleY)*a}}}}}]),n}(ut),wt=function(t){l(n,t);var e=d(n);function n(t,r,a){var s;return i(this,n),(s=e.call(this,t,r,z+"|"+a,H+"|"+a)).boneIndex=0,s.boneIndex=a,s}return o(n,[{key:"apply",value:function(t,e,n,r,a,i,s){var o=t.bones[this.boneIndex];if(o.active){var h=this.frames;if(n<h[0])switch(i){case O.setup:return o.shearX=o.data.shearX,void(o.shearY=o.data.shearY);case O.first:o.shearX+=(o.data.shearX-o.shearX)*a,o.shearY+=(o.data.shearY-o.shearY)*a}else{var l=0,u=0,c=ht.search(h,n,3),f=this.curves[c/3];switch(f){case 0:var d=h[c];l=h[c+1],u=h[c+2];var v=(n-d)/(h[c+3]-d);l+=(h[c+3+1]-l)*v,u+=(h[c+3+2]-u)*v;break;case 1:l=h[c+1],u=h[c+2];break;default:l=this.getBezierValue(n,c,1,f-2),u=this.getBezierValue(n,c,2,f+18-2)}switch(i){case O.setup:o.shearX=o.data.shearX+l*a,o.shearY=o.data.shearY+u*a;break;case O.first:case O.replace:o.shearX+=(o.data.shearX+l-o.shearX)*a,o.shearY+=(o.data.shearY+u-o.shearY)*a;break;case O.add:o.shearX+=l*a,o.shearY+=u*a}}}}}]),n}(ct),kt=function(t){l(n,t);var e=d(n);function n(t,r,a){var s;return i(this,n),(s=e.call(this,t,r,z+"|"+a)).boneIndex=0,s.boneIndex=a,s}return o(n,[{key:"apply",value:function(t,e,n,r,a,i,s){var o=t.bones[this.boneIndex];if(o.active)if(n<this.frames[0])switch(i){case O.setup:return void(o.shearX=o.data.shearX);case O.first:o.shearX+=(o.data.shearX-o.shearX)*a}else{var h=this.getCurveValue(n);switch(i){case O.setup:o.shearX=o.data.shearX+h*a;break;case O.first:case O.replace:o.shearX+=(o.data.shearX+h-o.shearX)*a;break;case O.add:o.shearX+=h*a}}}}]),n}(ut),bt=function(t){l(n,t);var e=d(n);function n(t,r,a){var s;return i(this,n),(s=e.call(this,t,r,H+"|"+a)).boneIndex=0,s.boneIndex=a,s}return o(n,[{key:"apply",value:function(t,e,n,r,a,i,s){var o=t.bones[this.boneIndex];if(o.active)if(n<this.frames[0])switch(i){case O.setup:return void(o.shearY=o.data.shearY);case O.first:o.shearY+=(o.data.shearY-o.shearY)*a}else{var h=this.getCurveValue(n);switch(i){case O.setup:o.shearY=o.data.shearY+h*a;break;case O.first:case O.replace:o.shearY+=(o.data.shearY+h-o.shearY)*a;break;case O.add:o.shearY+=h*a}}}}]),n}(ut),xt=function(t){l(n,t);var e=d(n);function n(t,r,a){var s;return i(this,n),(s=e.call(this,t,r,[$+"|"+a,J+"|"+a])).slotIndex=0,s.slotIndex=a,s}return o(n,[{key:"getFrameEntries",value:function(){return 5}},{key:"setFrame",value:function(t,e,n,r,a,i){t*=5,this.frames[t]=e,this.frames[t+1]=n,this.frames[t+2]=r,this.frames[t+3]=a,this.frames[t+4]=i}},{key:"apply",value:function(t,e,n,r,a,i,s){var o=t.slots[this.slotIndex];if(o.bone.active){var h=this.frames,l=o.color;if(n<h[0]){var u=o.data.color;switch(i){case O.setup:return void l.setFromColor(u);case O.first:l.add((u.r-l.r)*a,(u.g-l.g)*a,(u.b-l.b)*a,(u.a-l.a)*a)}}else{var c=0,f=0,d=0,v=0,m=ht.search(h,n,5),p=this.curves[m/5];switch(p){case 0:var g=h[m];c=h[m+1],f=h[m+2],d=h[m+3],v=h[m+4];var y=(n-g)/(h[m+5]-g);c+=(h[m+5+1]-c)*y,f+=(h[m+5+2]-f)*y,d+=(h[m+5+3]-d)*y,v+=(h[m+5+4]-v)*y;break;case 1:c=h[m+1],f=h[m+2],d=h[m+3],v=h[m+4];break;default:c=this.getBezierValue(n,m,1,p-2),f=this.getBezierValue(n,m,2,p+18-2),d=this.getBezierValue(n,m,3,p+36-2),v=this.getBezierValue(n,m,4,p+54-2)}1==a?l.set(c,f,d,v):(i==O.setup&&l.setFromColor(o.data.color),l.add((c-l.r)*a,(f-l.g)*a,(d-l.b)*a,(v-l.a)*a))}}}}]),n}(lt),Et=function(t){l(n,t);var e=d(n);function n(t,r,a){var s;return i(this,n),(s=e.call(this,t,r,[$+"|"+a])).slotIndex=0,s.slotIndex=a,s}return o(n,[{key:"getFrameEntries",value:function(){return 4}},{key:"setFrame",value:function(t,e,n,r,a){t<<=2,this.frames[t]=e,this.frames[t+1]=n,this.frames[t+2]=r,this.frames[t+3]=a}},{key:"apply",value:function(t,e,n,r,a,i,s){var o=t.slots[this.slotIndex];if(o.bone.active){var h=this.frames,l=o.color;if(n<h[0]){var u=o.data.color;switch(i){case O.setup:return l.r=u.r,l.g=u.g,void(l.b=u.b);case O.first:l.r+=(u.r-l.r)*a,l.g+=(u.g-l.g)*a,l.b+=(u.b-l.b)*a}}else{var c=0,f=0,d=0,v=ht.search(h,n,4),m=this.curves[v>>2];switch(m){case 0:var p=h[v];c=h[v+1],f=h[v+2],d=h[v+3];var g=(n-p)/(h[v+4]-p);c+=(h[v+4+1]-c)*g,f+=(h[v+4+2]-f)*g,d+=(h[v+4+3]-d)*g;break;case 1:c=h[v+1],f=h[v+2],d=h[v+3];break;default:c=this.getBezierValue(n,v,1,m-2),f=this.getBezierValue(n,v,2,m+18-2),d=this.getBezierValue(n,v,3,m+36-2)}if(1==a)l.r=c,l.g=f,l.b=d;else{if(i==O.setup){var y=o.data.color;l.r=y.r,l.g=y.g,l.b=y.b}l.r+=(c-l.r)*a,l.g+=(f-l.g)*a,l.b+=(d-l.b)*a}}}}}]),n}(lt),It=function(t){l(n,t);var e=d(n);function n(t,r,a){var s;return i(this,n),(s=e.call(this,t,r,J+"|"+a)).slotIndex=0,s.slotIndex=a,s}return o(n,[{key:"apply",value:function(t,e,n,r,a,i,s){var o=t.slots[this.slotIndex];if(o.bone.active){var h=o.color;if(n<this.frames[0]){var l=o.data.color;switch(i){case O.setup:return void(h.a=l.a);case O.first:h.a+=(l.a-h.a)*a}}else{var u=this.getCurveValue(n);1==a?h.a=u:(i==O.setup&&(h.a=o.data.color.a),h.a+=(u-h.a)*a)}}}}]),n}(ut),At=function(t){l(n,t);var e=d(n);function n(t,r,a){var s;return i(this,n),(s=e.call(this,t,r,[$+"|"+a,J+"|"+a,K+"|"+a])).slotIndex=0,s.slotIndex=a,s}return o(n,[{key:"getFrameEntries",value:function(){return 8}},{key:"setFrame",value:function(t,e,n,r,a,i,s,o,h){t<<=3,this.frames[t]=e,this.frames[t+1]=n,this.frames[t+2]=r,this.frames[t+3]=a,this.frames[t+4]=i,this.frames[t+5]=s,this.frames[t+6]=o,this.frames[t+7]=h}},{key:"apply",value:function(t,e,n,r,a,i,s){var o=t.slots[this.slotIndex];if(o.bone.active){var h=this.frames,l=o.color,u=o.darkColor;if(n<h[0]){var c=o.data.color,f=o.data.darkColor;switch(i){case O.setup:return l.setFromColor(c),u.r=f.r,u.g=f.g,void(u.b=f.b);case O.first:l.add((c.r-l.r)*a,(c.g-l.g)*a,(c.b-l.b)*a,(c.a-l.a)*a),u.r+=(f.r-u.r)*a,u.g+=(f.g-u.g)*a,u.b+=(f.b-u.b)*a}}else{var d=0,v=0,m=0,p=0,g=0,y=0,w=0,k=ht.search(h,n,8),b=this.curves[k>>3];switch(b){case 0:var x=h[k];d=h[k+1],v=h[k+2],m=h[k+3],p=h[k+4],g=h[k+5],y=h[k+6],w=h[k+7];var E=(n-x)/(h[k+8]-x);d+=(h[k+8+1]-d)*E,v+=(h[k+8+2]-v)*E,m+=(h[k+8+3]-m)*E,p+=(h[k+8+4]-p)*E,g+=(h[k+8+5]-g)*E,y+=(h[k+8+6]-y)*E,w+=(h[k+8+7]-w)*E;break;case 1:d=h[k+1],v=h[k+2],m=h[k+3],p=h[k+4],g=h[k+5],y=h[k+6],w=h[k+7];break;default:d=this.getBezierValue(n,k,1,b-2),v=this.getBezierValue(n,k,2,b+18-2),m=this.getBezierValue(n,k,3,b+36-2),p=this.getBezierValue(n,k,4,b+54-2),g=this.getBezierValue(n,k,5,b+72-2),y=this.getBezierValue(n,k,6,b+90-2),w=this.getBezierValue(n,k,7,b+108-2)}if(1==a)l.set(d,v,m,p),u.r=g,u.g=y,u.b=w;else{if(i==O.setup){l.setFromColor(o.data.color);var I=o.data.darkColor;u.r=I.r,u.g=I.g,u.b=I.b}l.add((d-l.r)*a,(v-l.g)*a,(m-l.b)*a,(p-l.a)*a),u.r+=(g-u.r)*a,u.g+=(y-u.g)*a,u.b+=(w-u.b)*a}}}}}]),n}(lt),St=function(t){l(n,t);var e=d(n);function n(t,r,a){var s;return i(this,n),(s=e.call(this,t,r,[$+"|"+a,K+"|"+a])).slotIndex=0,s.slotIndex=a,s}return o(n,[{key:"getFrameEntries",value:function(){return 7}},{key:"setFrame",value:function(t,e,n,r,a,i,s,o){t*=7,this.frames[t]=e,this.frames[t+1]=n,this.frames[t+2]=r,this.frames[t+3]=a,this.frames[t+4]=i,this.frames[t+5]=s,this.frames[t+6]=o}},{key:"apply",value:function(t,e,n,r,a,i,s){var o=t.slots[this.slotIndex];if(o.bone.active){var h=this.frames,l=o.color,u=o.darkColor;if(n<h[0]){var c=o.data.color,f=o.data.darkColor;switch(i){case O.setup:return l.r=c.r,l.g=c.g,l.b=c.b,u.r=f.r,u.g=f.g,void(u.b=f.b);case O.first:l.r+=(c.r-l.r)*a,l.g+=(c.g-l.g)*a,l.b+=(c.b-l.b)*a,u.r+=(f.r-u.r)*a,u.g+=(f.g-u.g)*a,u.b+=(f.b-u.b)*a}}else{var d=0,v=0,m=0,p=0,g=0,y=0,w=ht.search(h,n,7),k=this.curves[w/7];switch(k){case 0:var b=h[w];d=h[w+1],v=h[w+2],m=h[w+3],p=h[w+4],g=h[w+5],y=h[w+6];var x=(n-b)/(h[w+7]-b);d+=(h[w+7+1]-d)*x,v+=(h[w+7+2]-v)*x,m+=(h[w+7+3]-m)*x,p+=(h[w+7+4]-p)*x,g+=(h[w+7+5]-g)*x,y+=(h[w+7+6]-y)*x;break;case 1:d=h[w+1],v=h[w+2],m=h[w+3],p=h[w+4],g=h[w+5],y=h[w+6];break;default:d=this.getBezierValue(n,w,1,k-2),v=this.getBezierValue(n,w,2,k+18-2),m=this.getBezierValue(n,w,3,k+36-2),p=this.getBezierValue(n,w,4,k+54-2),g=this.getBezierValue(n,w,5,k+72-2),y=this.getBezierValue(n,w,6,k+90-2)}if(1==a)l.r=d,l.g=v,l.b=m,u.r=p,u.g=g,u.b=y;else{if(i==O.setup){var E=o.data.color,I=o.data.darkColor;l.r=E.r,l.g=E.g,l.b=E.b,u.r=I.r,u.g=I.g,u.b=I.b}l.r+=(d-l.r)*a,l.g+=(v-l.g)*a,l.b+=(m-l.b)*a,u.r+=(p-u.r)*a,u.g+=(g-u.g)*a,u.b+=(y-u.b)*a}}}}}]),n}(lt),Tt=function(t){l(n,t);var e=d(n);function n(t,r){var a;return i(this,n),(a=e.call(this,t,[Q+"|"+r])).slotIndex=0,a.slotIndex=r,a.attachmentNames=new Array(t),a}return o(n,[{key:"getFrameCount",value:function(){return this.frames.length}},{key:"setFrame",value:function(t,e,n){this.frames[t]=e,this.attachmentNames[t]=n}},{key:"apply",value:function(t,e,n,r,a,i,s){var o=t.slots[this.slotIndex];o.bone.active&&(s!=B.mixOut?n<this.frames[0]?i!=O.setup&&i!=O.first||this.setAttachment(t,o,o.data.attachmentName):this.setAttachment(t,o,this.attachmentNames[ht.search1(this.frames,n)]):i==O.setup&&this.setAttachment(t,o,o.data.attachmentName))}},{key:"setAttachment",value:function(t,e,n){e.setAttachment(n?t.getAttachment(this.slotIndex,n):null)}}]),n}(ht),Rt=function(t){l(n,t);var e=d(n);function n(t,r,a,s){var o;return i(this,n),(o=e.call(this,t,r,[Z+"|"+a+"|"+s.id])).slotIndex=0,o.slotIndex=a,o.attachment=s,o.vertices=new Array(t),o}return o(n,[{key:"getFrameCount",value:function(){return this.frames.length}},{key:"setFrame",value:function(t,e,n){this.frames[t]=e,this.vertices[t]=n}},{key:"setBezier",value:function(t,e,n,r,a,i,s,o,h,l,u){var c=this.curves,f=this.getFrameCount()+18*t;0==n&&(c[e]=2+f);for(var d=.03*(r-2*i+o),v=.03*h-.06*s,m=.006*(3*(i-o)-r+l),p=.018*(s-h+.33333333),g=2*d+m,y=2*v+p,w=.3*(i-r)+d+.16666667*m,k=.3*s+v+.16666667*p,b=r+w,x=k,E=f+18;f<E;f+=2)c[f]=b,c[f+1]=x,w+=g,k+=y,g+=m,y+=p,b+=w,x+=k}},{key:"getCurvePercent",value:function(t,e){var n=this.curves,r=n[e];switch(r){case 0:var a=this.frames[e];return(t-a)/(this.frames[e+this.getFrameEntries()]-a);case 1:return 0}if(n[r-=2]>t){var i=this.frames[e];return n[r+1]*(t-i)/(n[r]-i)}var s=r+18;for(r+=2;r<s;r+=2)if(n[r]>=t){var o=n[r-2],h=n[r-1];return h+(t-o)/(n[r]-o)*(n[r+1]-h)}var l=n[s-2],u=n[s-1];return u+(1-u)*(t-l)/(this.frames[e+this.getFrameEntries()]-l)}},{key:"apply",value:function(t,e,n,r,a,i,s){var o=t.slots[this.slotIndex];if(o.bone.active){var h=o.getAttachment();if(h&&h instanceof N&&h.timelineAttachment==this.attachment){var l=o.deform;0==l.length&&(i=O.setup);var u=this.vertices,c=u[0].length,f=this.frames;if(n<f[0])switch(i){case O.setup:return void(l.length=0);case O.first:if(1==a)return void(l.length=0);l.length=c;var d=h;if(d.bones){a=1-a;for(m=0;m<c;m++)l[m]*=a}else for(var v=d.vertices,m=0;m<c;m++)l[m]+=(v[m]-l[m])*a}else if(l.length=c,n>=f[f.length-1]){var p=u[f.length-1];if(1==a)if(i==O.add){var g=h;if(g.bones)for(var y=0;y<c;y++)l[y]+=p[y];else for(var w=g.vertices,k=0;k<c;k++)l[k]+=p[k]-w[k]}else R.arrayCopy(p,0,l,0,c);else switch(i){case O.setup:var b=h;if(b.bones)for(var x=0;x<c;x++)l[x]=p[x]*a;else for(var E=b.vertices,I=0;I<c;I++){var A=E[I];l[I]=A+(p[I]-A)*a}break;case O.first:case O.replace:for(var S=0;S<c;S++)l[S]+=(p[S]-l[S])*a;break;case O.add:var T=h;if(T.bones)for(var C=0;C<c;C++)l[C]+=p[C]*a;else for(var M=T.vertices,F=0;F<c;F++)l[F]+=(p[F]-M[F])*a}}else{var Y=ht.search1(f,n),L=this.getCurvePercent(n,Y),X=u[Y],P=u[Y+1];if(1==a)if(i==O.add){var _=h;if(_.bones)for(var B=0;B<c;B++){var D=X[B];l[B]+=D+(P[B]-D)*L}else for(var V=_.vertices,U=0;U<c;U++){var q=X[U];l[U]+=q+(P[U]-q)*L-V[U]}}else for(var W=0;W<c;W++){var j=X[W];l[W]=j+(P[W]-j)*L}else switch(i){case O.setup:var G=h;if(G.bones)for(var z=0;z<c;z++){var H=X[z];l[z]=(H+(P[z]-H)*L)*a}else for(var $=G.vertices,J=0;J<c;J++){var K=X[J],Q=$[J];l[J]=Q+(K+(P[J]-K)*L-Q)*a}break;case O.first:case O.replace:for(var Z=0;Z<c;Z++){var tt=X[Z];l[Z]+=(tt+(P[Z]-tt)*L-l[Z])*a}break;case O.add:var et=h;if(et.bones)for(var nt=0;nt<c;nt++){var rt=X[nt];l[nt]+=(rt+(P[nt]-rt)*L)*a}else for(var at=et.vertices,it=0;it<c;it++){var st=X[it];l[it]+=(st+(P[it]-st)*L-at[it])*a}}}}}}}]),n}(lt),Ct=function(t){l(n,t);var e=d(n);function n(t){var r;return i(this,n),(r=e.call(this,t,n.propertyIds)).events=new Array(t),r}return o(n,[{key:"getFrameCount",value:function(){return this.frames.length}},{key:"setFrame",value:function(t,e){this.frames[t]=e.time,this.events[t]=e}},{key:"apply",value:function(t,e,n,r,a,i,s){if(r){var o=this.frames,h=this.frames.length;if(e>n)this.apply(t,e,Number.MAX_VALUE,r,a,i,s),e=-1;else if(e>=o[h-1])return;if(!(n<o[0])){var l=0;if(e<o[0])l=0;else for(var u=o[l=ht.search1(o,e)+1];l>0&&o[l-1]==u;)l--;for(;l<h&&n>=o[l];l++)r.push(this.events[l])}}}}]),n}(ht);Ct.propertyIds=[""+tt];var Mt=function(t){l(n,t);var e=d(n);function n(t){var r;return i(this,n),(r=e.call(this,t,n.propertyIds)).drawOrders=new Array(t),r}return o(n,[{key:"getFrameCount",value:function(){return this.frames.length}},{key:"setFrame",value:function(t,e,n){this.frames[t]=e,this.drawOrders[t]=n}},{key:"apply",value:function(t,e,n,r,a,i,s){if(s!=B.mixOut)if(n<this.frames[0])i!=O.setup&&i!=O.first||R.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);else{var o=ht.search1(this.frames,n),h=this.drawOrders[o];if(h)for(var l=t.drawOrder,u=t.slots,c=0,f=h.length;c<f;c++)l[c]=u[h[c]];else R.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length)}else i==O.setup&&R.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length)}}]),n}(ht);Mt.propertyIds=[""+et];var Ft=function(t){l(n,t);var e=d(n);function n(t,r,a){var s;return i(this,n),(s=e.call(this,t,r,[nt+"|"+a])).ikConstraintIndex=0,s.ikConstraintIndex=a,s}return o(n,[{key:"getFrameEntries",value:function(){return 6}},{key:"setFrame",value:function(t,e,n,r,a,i,s){t*=6,this.frames[t]=e,this.frames[t+1]=n,this.frames[t+2]=r,this.frames[t+3]=a,this.frames[t+4]=i?1:0,this.frames[t+5]=s?1:0}},{key:"apply",value:function(t,e,n,r,a,i,s){var o=t.ikConstraints[this.ikConstraintIndex];if(o.active){var h=this.frames;if(n<h[0])switch(i){case O.setup:return o.mix=o.data.mix,o.softness=o.data.softness,o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,void(o.stretch=o.data.stretch);case O.first:o.mix+=(o.data.mix-o.mix)*a,o.softness+=(o.data.softness-o.softness)*a,o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,o.stretch=o.data.stretch}else{var l=0,u=0,c=ht.search(h,n,6),f=this.curves[c/6];switch(f){case 0:var d=h[c];l=h[c+1],u=h[c+2];var v=(n-d)/(h[c+6]-d);l+=(h[c+6+1]-l)*v,u+=(h[c+6+2]-u)*v;break;case 1:l=h[c+1],u=h[c+2];break;default:l=this.getBezierValue(n,c,1,f-2),u=this.getBezierValue(n,c,2,f+18-2)}i==O.setup?(o.mix=o.data.mix+(l-o.data.mix)*a,o.softness=o.data.softness+(u-o.data.softness)*a,s==B.mixOut?(o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,o.stretch=o.data.stretch):(o.bendDirection=h[c+3],o.compress=0!=h[c+4],o.stretch=0!=h[c+5])):(o.mix+=(l-o.mix)*a,o.softness+=(u-o.softness)*a,s==B.mixIn&&(o.bendDirection=h[c+3],o.compress=0!=h[c+4],o.stretch=0!=h[c+5]))}}}}]),n}(lt),Yt=function(t){l(n,t);var e=d(n);function n(t,r,a){var s;return i(this,n),(s=e.call(this,t,r,[rt+"|"+a])).transformConstraintIndex=0,s.transformConstraintIndex=a,s}return o(n,[{key:"getFrameEntries",value:function(){return 7}},{key:"setFrame",value:function(t,e,n,r,a,i,s,o){var h=this.frames;h[t*=7]=e,h[t+1]=n,h[t+2]=r,h[t+3]=a,h[t+4]=i,h[t+5]=s,h[t+6]=o}},{key:"apply",value:function(t,e,n,r,a,i,s){var o=t.transformConstraints[this.transformConstraintIndex];if(o.active){var h=this.frames;if(n<h[0]){var l=o.data;switch(i){case O.setup:return o.mixRotate=l.mixRotate,o.mixX=l.mixX,o.mixY=l.mixY,o.mixScaleX=l.mixScaleX,o.mixScaleY=l.mixScaleY,void(o.mixShearY=l.mixShearY);case O.first:o.mixRotate+=(l.mixRotate-o.mixRotate)*a,o.mixX+=(l.mixX-o.mixX)*a,o.mixY+=(l.mixY-o.mixY)*a,o.mixScaleX+=(l.mixScaleX-o.mixScaleX)*a,o.mixScaleY+=(l.mixScaleY-o.mixScaleY)*a,o.mixShearY+=(l.mixShearY-o.mixShearY)*a}}else{var u,c,f,d,v,m,p=ht.search(h,n,7),g=this.curves[p/7];switch(g){case 0:var y=h[p];u=h[p+1],c=h[p+2],f=h[p+3],d=h[p+4],v=h[p+5],m=h[p+6];var w=(n-y)/(h[p+7]-y);u+=(h[p+7+1]-u)*w,c+=(h[p+7+2]-c)*w,f+=(h[p+7+3]-f)*w,d+=(h[p+7+4]-d)*w,v+=(h[p+7+5]-v)*w,m+=(h[p+7+6]-m)*w;break;case 1:u=h[p+1],c=h[p+2],f=h[p+3],d=h[p+4],v=h[p+5],m=h[p+6];break;default:u=this.getBezierValue(n,p,1,g-2),c=this.getBezierValue(n,p,2,g+18-2),f=this.getBezierValue(n,p,3,g+36-2),d=this.getBezierValue(n,p,4,g+54-2),v=this.getBezierValue(n,p,5,g+72-2),m=this.getBezierValue(n,p,6,g+90-2)}if(i==O.setup){var k=o.data;o.mixRotate=k.mixRotate+(u-k.mixRotate)*a,o.mixX=k.mixX+(c-k.mixX)*a,o.mixY=k.mixY+(f-k.mixY)*a,o.mixScaleX=k.mixScaleX+(d-k.mixScaleX)*a,o.mixScaleY=k.mixScaleY+(v-k.mixScaleY)*a,o.mixShearY=k.mixShearY+(m-k.mixShearY)*a}else o.mixRotate+=(u-o.mixRotate)*a,o.mixX+=(c-o.mixX)*a,o.mixY+=(f-o.mixY)*a,o.mixScaleX+=(d-o.mixScaleX)*a,o.mixScaleY+=(v-o.mixScaleY)*a,o.mixShearY+=(m-o.mixShearY)*a}}}}]),n}(lt),Lt=function(t){l(n,t);var e=d(n);function n(t,r,a){var s;return i(this,n),(s=e.call(this,t,r,at+"|"+a)).pathConstraintIndex=0,s.pathConstraintIndex=a,s}return o(n,[{key:"apply",value:function(t,e,n,r,a,i,s){var o=t.pathConstraints[this.pathConstraintIndex];if(o.active)if(n<this.frames[0])switch(i){case O.setup:return void(o.position=o.data.position);case O.first:o.position+=(o.data.position-o.position)*a}else{var h=this.getCurveValue(n);i==O.setup?o.position=o.data.position+(h-o.data.position)*a:o.position+=(h-o.position)*a}}}]),n}(ut),Xt=function(t){l(n,t);var e=d(n);function n(t,r,a){var s;return i(this,n),(s=e.call(this,t,r,it+"|"+a)).pathConstraintIndex=0,s.pathConstraintIndex=a,s}return o(n,[{key:"apply",value:function(t,e,n,r,a,i,s){var o=t.pathConstraints[this.pathConstraintIndex];if(o.active)if(n<this.frames[0])switch(i){case O.setup:return void(o.spacing=o.data.spacing);case O.first:o.spacing+=(o.data.spacing-o.spacing)*a}else{var h=this.getCurveValue(n);i==O.setup?o.spacing=o.data.spacing+(h-o.data.spacing)*a:o.spacing+=(h-o.spacing)*a}}}]),n}(ut),Nt=function(t){l(n,t);var e=d(n);function n(t,r,a){var s;return i(this,n),(s=e.call(this,t,r,[st+"|"+a])).pathConstraintIndex=0,s.pathConstraintIndex=a,s}return o(n,[{key:"getFrameEntries",value:function(){return 4}},{key:"setFrame",value:function(t,e,n,r,a){var i=this.frames;i[t<<=2]=e,i[t+1]=n,i[t+2]=r,i[t+3]=a}},{key:"apply",value:function(t,e,n,r,a,i,s){var o=t.pathConstraints[this.pathConstraintIndex];if(o.active){var h=this.frames;if(n<h[0])switch(i){case O.setup:return o.mixRotate=o.data.mixRotate,o.mixX=o.data.mixX,void(o.mixY=o.data.mixY);case O.first:o.mixRotate+=(o.data.mixRotate-o.mixRotate)*a,o.mixX+=(o.data.mixX-o.mixX)*a,o.mixY+=(o.data.mixY-o.mixY)*a}else{var l,u,c,f=ht.search(h,n,4),d=this.curves[f>>2];switch(d){case 0:var v=h[f];l=h[f+1],u=h[f+2],c=h[f+3];var m=(n-v)/(h[f+4]-v);l+=(h[f+4+1]-l)*m,u+=(h[f+4+2]-u)*m,c+=(h[f+4+3]-c)*m;break;case 1:l=h[f+1],u=h[f+2],c=h[f+3];break;default:l=this.getBezierValue(n,f,1,d-2),u=this.getBezierValue(n,f,2,d+18-2),c=this.getBezierValue(n,f,3,d+36-2)}if(i==O.setup){var p=o.data;o.mixRotate=p.mixRotate+(l-p.mixRotate)*a,o.mixX=p.mixX+(u-p.mixX)*a,o.mixY=p.mixY+(c-p.mixY)*a}else o.mixRotate+=(l-o.mixRotate)*a,o.mixX+=(u-o.mixX)*a,o.mixY+=(c-o.mixY)*a}}}}]),n}(lt),Pt=function(t){l(n,t);var e=d(n);function n(t,r,a){var s;return i(this,n),(s=e.call(this,t,[ot+"|"+r+"|"+a.sequence.id])).slotIndex=r,s.attachment=a,s}return o(n,[{key:"getFrameEntries",value:function(){return n.ENTRIES}},{key:"getSlotIndex",value:function(){return this.slotIndex}},{key:"getAttachment",value:function(){return this.attachment}},{key:"setFrame",value:function(t,e,r,a,i){var s=this.frames;s[t*=n.ENTRIES]=e,s[t+n.MODE]=r|a<<4,s[t+n.DELAY]=i}},{key:"apply",value:function(t,e,r,a,i,s,o){var h=t.slots[this.slotIndex];if(h.bone.active){var l=h.attachment,u=this.attachment;if(l==u||l instanceof N&&l.timelineAttachment==u){var c=this.frames;if(r<c[0])s!=O.setup&&s!=O.first||(h.sequenceIndex=-1);else{var f=ht.search(c,r,n.ENTRIES),d=c[f],v=c[f+n.MODE],m=c[f+n.DELAY];if(this.attachment.sequence){var p=v>>4,g=this.attachment.sequence.regions.length,y=D[15&v];if(y!=P.hold)switch(p+=(r-d)/m+1e-5|0,y){case P.once:p=Math.min(g-1,p);break;case P.loop:p%=g;break;case P.pingpong:var w=(g<<1)-2;(p=0==w?0:p%w)>=g&&(p=w-p);break;case P.onceReverse:p=Math.max(g-1-p,0);break;case P.loopReverse:p=g-1-p%g;break;case P.pingpongReverse:var k=(g<<1)-2;(p=0==k?0:(p+g-1)%k)>=g&&(p=k-p)}h.sequenceIndex=p}}}}}}]),n}(ht);Pt.ENTRIES=3,Pt.MODE=1,Pt.DELAY=2;var _t=function(){function t(e){i(this,t),this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new Dt(this),this.propertyIDs=new x,this.animationsChanged=!1,this.trackEntryPool=new M((function(){return new Bt})),this.data=e}return o(t,[{key:"update",value:function(t){t*=this.timeScale;for(var e=this.tracks,n=0,r=e.length;n<r;n++){var a=e[n];if(a){a.animationLast=a.nextAnimationLast,a.trackLast=a.nextTrackLast;var i=t*a.timeScale;if(a.delay>0){if(a.delay-=i,a.delay>0)continue;i=-a.delay,a.delay=0}var s=a.next;if(s){var o=a.trackLast-s.delay;if(o>=0){for(s.delay=0,s.trackTime+=0==a.timeScale?0:(o/a.timeScale+t)*s.timeScale,a.trackTime+=i,this.setCurrent(n,s,!0);s.mixingFrom;)s.mixTime+=t,s=s.mixingFrom;continue}}else if(a.trackLast>=a.trackEnd&&!a.mixingFrom){e[n]=null,this.queue.end(a),this.clearNext(a);continue}if(a.mixingFrom&&this.updateMixingFrom(a,t)){var h=a.mixingFrom;for(a.mixingFrom=null,h&&(h.mixingTo=null);h;)this.queue.end(h),h=h.mixingFrom}a.trackTime+=i}}this.queue.drain()}},{key:"updateMixingFrom",value:function(t,e){var n=t.mixingFrom;if(!n)return!0;var r=this.updateMixingFrom(n,e);return n.animationLast=n.nextAnimationLast,n.trackLast=n.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration?(0!=n.totalAlpha&&0!=t.mixDuration||(t.mixingFrom=n.mixingFrom,n.mixingFrom&&(n.mixingFrom.mixingTo=t),t.interruptAlpha=n.interruptAlpha,this.queue.end(n)),r):(n.trackTime+=e*n.timeScale,t.mixTime+=e,!1)}},{key:"apply",value:function(t){if(!t)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var e=this.events,n=this.tracks,r=!1,a=0,i=n.length;a<i;a++){var s=n[a];if(s&&!(s.delay>0)){r=!0;var o=0==a?O.first:s.mixBlend,h=s.alpha;s.mixingFrom?h*=this.applyMixingFrom(s,t,o):s.trackTime>=s.trackEnd&&!s.next&&(h=0);var l=s.animationLast,u=s.getAnimationTime(),c=u,f=e;s.reverse&&(c=s.animation.duration-c,f=null);var d=s.animation.timelines,v=d.length;if(0==a&&1==h||o==O.add)for(var m=0;m<v;m++){R.webkit602BugfixHelper(h,o);var p=d[m];p instanceof Tt?this.applyAttachmentTimeline(p,t,c,o,!0):p.apply(t,l,c,f,h,o,B.mixIn)}else{var g=s.timelineMode,y=s.shortestRotation,w=!y&&s.timelinesRotation.length!=v<<1;w&&(s.timelinesRotation.length=v<<1);for(var k=0;k<v;k++){var b=d[k],x=g[k]==Wt?o:O.setup;!y&&b instanceof ft?this.applyRotateTimeline(b,t,c,h,x,s.timelinesRotation,k<<1,w):b instanceof Tt?this.applyAttachmentTimeline(b,t,c,o,!0):(R.webkit602BugfixHelper(h,o),b.apply(t,l,c,f,h,x,B.mixIn))}}this.queueEvents(s,u),e.length=0,s.nextAnimationLast=u,s.nextTrackLast=s.trackTime}}for(var E=this.unkeyedState+$t,I=t.slots,A=0,S=t.slots.length;A<S;A++){var T=I[A];if(T.attachmentState==E){var C=T.data.attachmentName;T.setAttachment(C?t.getAttachment(T.data.index,C):null)}}return this.unkeyedState+=2,this.queue.drain(),r}},{key:"applyMixingFrom",value:function(t,e,n){var r=t.mixingFrom;r.mixingFrom&&this.applyMixingFrom(r,e,n);var a=0;0==t.mixDuration?(a=1,n==O.first&&(n=O.setup)):((a=t.mixTime/t.mixDuration)>1&&(a=1),n!=O.first&&(n=r.mixBlend));var i=a<r.attachmentThreshold,s=a<r.drawOrderThreshold,o=r.animation.timelines,h=o.length,l=r.alpha*t.interruptAlpha,u=l*(1-a),c=r.animationLast,f=r.getAnimationTime(),d=f,v=null;if(r.reverse?d=r.animation.duration-d:a<r.eventThreshold&&(v=this.events),n==O.add)for(var m=0;m<h;m++)o[m].apply(e,c,d,v,u,n,B.mixOut);else{var p=r.timelineMode,g=r.timelineHoldMix,y=r.shortestRotation,w=!y&&r.timelinesRotation.length!=h<<1;w&&(r.timelinesRotation.length=h<<1),r.totalAlpha=0;for(var k=0;k<h;k++){var b=o[k],x=B.mixOut,E=void 0,I=0;switch(p[k]){case Wt:if(!s&&b instanceof Mt)continue;E=n,I=u;break;case jt:E=O.setup,I=u;break;case Gt:E=n,I=l;break;case zt:E=O.setup,I=l;break;default:E=O.setup;var A=g[k];I=l*Math.max(0,1-A.mixTime/A.mixDuration)}r.totalAlpha+=I,!y&&b instanceof ft?this.applyRotateTimeline(b,e,d,I,E,r.timelinesRotation,k<<1,w):b instanceof Tt?this.applyAttachmentTimeline(b,e,d,E,i):(R.webkit602BugfixHelper(I,n),s&&b instanceof Mt&&E==O.setup&&(x=B.mixIn),b.apply(e,c,d,v,I,E,x))}}return t.mixDuration>0&&this.queueEvents(r,f),this.events.length=0,r.nextAnimationLast=f,r.nextTrackLast=r.trackTime,a}},{key:"applyAttachmentTimeline",value:function(t,e,n,r,a){var i=e.slots[t.slotIndex];i.bone.active&&(n<t.frames[0]?r!=O.setup&&r!=O.first||this.setAttachment(e,i,i.data.attachmentName,a):this.setAttachment(e,i,t.attachmentNames[ht.search1(t.frames,n)],a),i.attachmentState<=this.unkeyedState&&(i.attachmentState=this.unkeyedState+$t))}},{key:"setAttachment",value:function(t,e,n,r){e.setAttachment(n?t.getAttachment(e.data.index,n):null),r&&(e.attachmentState=this.unkeyedState+Jt)}},{key:"applyRotateTimeline",value:function(t,e,n,r,a,i,s,o){if(o&&(i[s]=0),1!=r){var h=e.bones[t.boneIndex];if(h.active){var l=0,u=0;if(n<t.frames[0])switch(a){case O.setup:h.rotation=h.data.rotation;default:return;case O.first:l=h.rotation,u=h.data.rotation}else l=a==O.setup?h.data.rotation:h.rotation,u=h.data.rotation+t.getCurveValue(n);var c=0,f=u-l;if(0==(f-=360*(16384-(16384.499999999996-f/360|0))))c=i[s];else{var d=0,v=0;o?(d=0,v=f):(d=i[s],v=i[s+1]);var m=f>0,p=d>=0;I.signum(v)!=I.signum(f)&&Math.abs(v)<=90&&(Math.abs(d)>180&&(d+=360*I.signum(d)),p=m),c=f+d-d%360,p!=m&&(c+=360*I.signum(d)),i[s]=c}i[s+1]=f,h.rotation=l+c*r}}else t.apply(e,0,n,null,1,a,B.mixIn)}},{key:"queueEvents",value:function(t,e){for(var n=t.animationStart,r=t.animationEnd,a=r-n,i=t.trackLast%a,s=this.events,o=0,h=s.length;o<h;o++){var l=s[o];if(l.time<i)break;l.time>r||this.queue.event(t,l)}for((t.loop?0==a||i>t.trackTime%a:e>=r&&t.animationLast<r)&&this.queue.complete(t);o<h;o++){var u=s[o];u.time<n||this.queue.event(t,u)}}},{key:"clearTracks",value:function(){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var e=0,n=this.tracks.length;e<n;e++)this.clearTrack(e);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()}},{key:"clearTrack",value:function(t){if(!(t>=this.tracks.length)){var e=this.tracks[t];if(e){this.queue.end(e),this.clearNext(e);for(var n=e;;){var r=n.mixingFrom;if(!r)break;this.queue.end(r),n.mixingFrom=null,n.mixingTo=null,n=r}this.tracks[e.trackIndex]=null,this.queue.drain()}}}},{key:"setCurrent",value:function(t,e,n){var r=this.expandToIndex(t);this.tracks[t]=e,e.previous=null,r&&(n&&this.queue.interrupt(r),e.mixingFrom=r,r.mixingTo=e,e.mixTime=0,r.mixingFrom&&r.mixDuration>0&&(e.interruptAlpha*=Math.min(1,r.mixTime/r.mixDuration)),r.timelinesRotation.length=0),this.queue.start(e)}},{key:"setAnimation",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this.data.skeletonData.findAnimation(e);if(!r)throw new Error("Animation not found: "+e);return this.setAnimationWith(t,r,n)}},{key:"setAnimationWith",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)throw new Error("animation cannot be null.");var r=!0,a=this.expandToIndex(t);a&&(-1==a.nextTrackLast?(this.tracks[t]=a.mixingFrom,this.queue.interrupt(a),this.queue.end(a),this.clearNext(a),a=a.mixingFrom,r=!1):this.clearNext(a));var i=this.trackEntry(t,e,n,a);return this.setCurrent(t,i,r),this.queue.drain(),i}},{key:"addAnimation",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=this.data.skeletonData.findAnimation(e);if(!a)throw new Error("Animation not found: "+e);return this.addAnimationWith(t,a,n,r)}},{key:"addAnimationWith",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!e)throw new Error("animation cannot be null.");var a=this.expandToIndex(t);if(a)for(;a.next;)a=a.next;var i=this.trackEntry(t,e,n,a);return a?(a.next=i,i.previous=a,r<=0&&(r+=a.getTrackComplete()-i.mixDuration)):(this.setCurrent(t,i,!0),this.queue.drain()),i.delay=r,i}},{key:"setEmptyAnimation",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this.setAnimationWith(e,t.emptyAnimation(),!1);return r.mixDuration=n,r.trackEnd=n,r}},{key:"addEmptyAnimation",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=this.addAnimationWith(e,t.emptyAnimation(),!1,r);return r<=0&&(a.delay+=a.mixDuration-n),a.mixDuration=n,a.trackEnd=n,a}},{key:"setEmptyAnimations",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var n=0,r=this.tracks.length;n<r;n++){var a=this.tracks[n];a&&this.setEmptyAnimation(a.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()}},{key:"expandToIndex",value:function(t){return t<this.tracks.length?this.tracks[t]:(R.ensureArrayCapacity(this.tracks,t+1,null),this.tracks.length=t+1,null)}},{key:"trackEntry",value:function(t,e,n,r){var a=this.trackEntryPool.obtain();return a.reset(),a.trackIndex=t,a.animation=e,a.loop=n,a.holdPrevious=!1,a.reverse=!1,a.shortestRotation=!1,a.eventThreshold=0,a.attachmentThreshold=0,a.drawOrderThreshold=0,a.animationStart=0,a.animationEnd=e.duration,a.animationLast=-1,a.nextAnimationLast=-1,a.delay=0,a.trackTime=0,a.trackLast=-1,a.nextTrackLast=-1,a.trackEnd=Number.MAX_VALUE,a.timeScale=1,a.alpha=1,a.mixTime=0,a.mixDuration=r?this.data.getMix(r.animation,e):0,a.interruptAlpha=1,a.totalAlpha=0,a.mixBlend=O.replace,a}},{key:"clearNext",value:function(t){for(var e=t.next;e;)this.queue.dispose(e),e=e.next;t.next=null}},{key:"_animationsChanged",value:function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var t=this.tracks,e=0,n=t.length;e<n;e++){var r=t[e];if(r){for(;r.mixingFrom;)r=r.mixingFrom;do{r.mixingTo&&r.mixBlend==O.add||this.computeHold(r),r=r.mixingTo}while(r)}}}},{key:"computeHold",value:function(t){var e=t.mixingTo,n=t.animation.timelines,r=t.animation.timelines.length,a=t.timelineMode;a.length=r;var i=t.timelineHoldMix;i.length=0;var s=this.propertyIDs;if(e&&e.holdPrevious)for(var o=0;o<r;o++)a[o]=s.addAll(n[o].getPropertyIds())?zt:Gt;else t:for(var h=0;h<r;h++){var l=n[h],u=l.getPropertyIds();if(s.addAll(u))if(!e||l instanceof Tt||l instanceof Mt||l instanceof Ct||!e.animation.hasTimeline(u))a[h]=jt;else{for(var c=e.mixingTo;c;c=c.mixingTo)if(!c.animation.hasTimeline(u)){if(t.mixDuration>0){a[h]=Ht,i[h]=c;continue t}break}a[h]=zt}else a[h]=Wt}}},{key:"getCurrent",value:function(t){return t>=this.tracks.length?null:this.tracks[t]}},{key:"addListener",value:function(t){if(!t)throw new Error("listener cannot be null.");this.listeners.push(t)}},{key:"removeListener",value:function(t){var e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)}},{key:"clearListeners",value:function(){this.listeners.length=0}},{key:"clearListenerNotifications",value:function(){this.queue.clear()}}],[{key:"emptyAnimation",value:function(){return t._emptyAnimation}}]),t}();_t._emptyAnimation=new V("<empty>",[],0);var Ot,Bt=function(){function t(){i(this,t),this.animation=null,this.previous=null,this.next=null,this.mixingFrom=null,this.mixingTo=null,this.listener=null,this.trackIndex=0,this.loop=!1,this.holdPrevious=!1,this.reverse=!1,this.shortestRotation=!1,this.eventThreshold=0,this.attachmentThreshold=0,this.drawOrderThreshold=0,this.animationStart=0,this.animationEnd=0,this.animationLast=0,this.nextAnimationLast=0,this.delay=0,this.trackTime=0,this.trackLast=0,this.nextTrackLast=0,this.trackEnd=0,this.timeScale=0,this.alpha=0,this.mixTime=0,this.mixDuration=0,this.interruptAlpha=0,this.totalAlpha=0,this.mixBlend=O.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}return o(t,[{key:"reset",value:function(){this.next=null,this.previous=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0}},{key:"getAnimationTime",value:function(){if(this.loop){var t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)}},{key:"setAnimationLast",value:function(t){this.animationLast=t,this.nextAnimationLast=t}},{key:"isComplete",value:function(){return this.trackTime>=this.animationEnd-this.animationStart}},{key:"resetRotationDirections",value:function(){this.timelinesRotation.length=0}},{key:"getTrackComplete",value:function(){var t=this.animationEnd-this.animationStart;if(0!=t){if(this.loop)return t*(1+(this.trackTime/t|0));if(this.trackTime<t)return t}return this.trackTime}}]),t}(),Dt=function(){function t(e){i(this,t),this.objects=[],this.drainDisabled=!1,this.animState=e}return o(t,[{key:"start",value:function(t){this.objects.push(Ot.start),this.objects.push(t),this.animState.animationsChanged=!0}},{key:"interrupt",value:function(t){this.objects.push(Ot.interrupt),this.objects.push(t)}},{key:"end",value:function(t){this.objects.push(Ot.end),this.objects.push(t),this.animState.animationsChanged=!0}},{key:"dispose",value:function(t){this.objects.push(Ot.dispose),this.objects.push(t)}},{key:"complete",value:function(t){this.objects.push(Ot.complete),this.objects.push(t)}},{key:"event",value:function(t,e){this.objects.push(Ot.event),this.objects.push(t),this.objects.push(e)}},{key:"drain",value:function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var t=this.objects,e=this.animState.listeners,n=0;n<t.length;n+=2){var r=t[n],a=t[n+1];switch(r){case Ot.start:a.listener&&a.listener.start&&a.listener.start(a);for(var i=0;i<e.length;i++){var s=e[i];s.start&&s.start(a)}break;case Ot.interrupt:a.listener&&a.listener.interrupt&&a.listener.interrupt(a);for(var o=0;o<e.length;o++){var h=e[o];h.interrupt&&h.interrupt(a)}break;case Ot.end:a.listener&&a.listener.end&&a.listener.end(a);for(var l=0;l<e.length;l++){var u=e[l];u.end&&u.end(a)}case Ot.dispose:a.listener&&a.listener.dispose&&a.listener.dispose(a);for(var c=0;c<e.length;c++){var f=e[c];f.dispose&&f.dispose(a)}this.animState.trackEntryPool.free(a);break;case Ot.complete:a.listener&&a.listener.complete&&a.listener.complete(a);for(var d=0;d<e.length;d++){var v=e[d];v.complete&&v.complete(a)}break;case Ot.event:var m=t[2+n++];a.listener&&a.listener.event&&a.listener.event(a,m);for(var p=0;p<e.length;p++){var g=e[p];g.event&&g.event(a,m)}}}this.clear(),this.drainDisabled=!1}}},{key:"clear",value:function(){this.objects.length=0}}]),t}();!function(t){t[t.start=0]="start",t[t.interrupt=1]="interrupt",t[t.end=2]="end",t[t.dispose=3]="dispose",t[t.complete=4]="complete",t[t.event=5]="event"}(Ot||(Ot={}));var Vt,Ut,qt=function(){function t(){i(this,t)}return o(t,[{key:"start",value:function(t){}},{key:"interrupt",value:function(t){}},{key:"end",value:function(t){}},{key:"dispose",value:function(t){}},{key:"complete",value:function(t){}},{key:"event",value:function(t,e){}}]),t}(),Wt=0,jt=1,Gt=2,zt=3,Ht=4,$t=1,Jt=2,Kt=function(){function t(e){if(i(this,t),this.animationToMixTime={},this.defaultMix=0,!e)throw new Error("skeletonData cannot be null.");this.skeletonData=e}return o(t,[{key:"setMix",value:function(t,e,n){var r=this.skeletonData.findAnimation(t);if(!r)throw new Error("Animation not found: "+t);var a=this.skeletonData.findAnimation(e);if(!a)throw new Error("Animation not found: "+e);this.setMixWith(r,a,n)}},{key:"setMixWith",value:function(t,e,n){if(!t)throw new Error("from cannot be null.");if(!e)throw new Error("to cannot be null.");var r=t.name+"."+e.name;this.animationToMixTime[r]=n}},{key:"getMix",value:function(t,e){var n=t.name+"."+e.name,r=this.animationToMixTime[n];return void 0===r?this.defaultMix:r}}]),t}(),Qt=function(t){l(n,t);var e=d(n);function n(t){var r;return i(this,n),(r=e.call(this,t)).color=new E(1,1,1,1),r}return o(n,[{key:"copy",value:function(){var t=new n(this.name);return this.copyTo(t),t.color.setFromColor(this.color),t}}]),n}(N),Zt=function(t){l(n,t);var e=d(n);function n(t){var r;return i(this,n),(r=e.call(this,t)).endSlot=null,r.color=new E(.2275,.2275,.8078,1),r}return o(n,[{key:"copy",value:function(){var t=new n(this.name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t}}]),n}(N),te=function(){function t(e){i(this,t),this._image=e}return o(t,[{key:"getImage",value:function(){return this._image}}]),t}();!function(t){t[t.Nearest=9728]="Nearest",t[t.Linear=9729]="Linear",t[t.MipMap=9987]="MipMap",t[t.MipMapNearestNearest=9984]="MipMapNearestNearest",t[t.MipMapLinearNearest=9985]="MipMapLinearNearest",t[t.MipMapNearestLinear=9986]="MipMapNearestLinear",t[t.MipMapLinearLinear=9987]="MipMapLinearLinear"}(Vt||(Vt={})),function(t){t[t.MirroredRepeat=33648]="MirroredRepeat",t[t.ClampToEdge=33071]="ClampToEdge",t[t.Repeat=10497]="Repeat"}(Ut||(Ut={}));var ee=o((function t(){i(this,t),this.u=0,this.v=0,this.u2=0,this.v2=0,this.width=0,this.height=0,this.degrees=0,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0})),ne=function(t){l(n,t);var e=d(n);function n(){return i(this,n),e.apply(this,arguments)}return o(n,[{key:"setFilters",value:function(t,e){}},{key:"setWraps",value:function(t,e){}},{key:"dispose",value:function(){}}]),n}(te),re=function(){function t(e){i(this,t),this.pages=new Array,this.regions=new Array;for(var n=new ae(e),r=new Array(4),a={size:function(t){t.width=parseInt(r[1]),t.height=parseInt(r[2])},format:function(){},filter:function(t){t.minFilter=R.enumValue(Vt,r[1]),t.magFilter=R.enumValue(Vt,r[2])},repeat:function(t){-1!=r[1].indexOf("x")&&(t.uWrap=Ut.Repeat),-1!=r[1].indexOf("y")&&(t.vWrap=Ut.Repeat)},pma:function(t){t.pma="true"==r[1]}},s={xy:function(t){t.x=parseInt(r[1]),t.y=parseInt(r[2])},size:function(t){t.width=parseInt(r[1]),t.height=parseInt(r[2])},bounds:function(t){t.x=parseInt(r[1]),t.y=parseInt(r[2]),t.width=parseInt(r[3]),t.height=parseInt(r[4])},offset:function(t){t.offsetX=parseInt(r[1]),t.offsetY=parseInt(r[2])},orig:function(t){t.originalWidth=parseInt(r[1]),t.originalHeight=parseInt(r[2])},offsets:function(t){t.offsetX=parseInt(r[1]),t.offsetY=parseInt(r[2]),t.originalWidth=parseInt(r[3]),t.originalHeight=parseInt(r[4])},rotate:function(t){var e=r[1];"true"==e?t.degrees=90:"false"!=e&&(t.degrees=parseInt(e))},index:function(t){t.index=parseInt(r[1])}},o=n.readLine();o&&0==o.trim().length;)o=n.readLine();for(;o&&0!=o.trim().length&&0!=n.readEntry(r,o);)o=n.readLine();for(var h=null,l=null,u=null;null!==o;)if(0==o.trim().length)h=null,o=n.readLine();else if(h){for(var c=new se(h,o);;){var f=n.readEntry(r,o=n.readLine());if(0==f)break;var d=s[r[0]];if(d)d(c);else{l||(l=[]),u||(u=[]),l.push(r[0]);for(var v=[],m=0;m<f;m++)v.push(parseInt(r[m+1]));u.push(v)}}0==c.originalWidth&&0==c.originalHeight&&(c.originalWidth=c.width,c.originalHeight=c.height),l&&l.length>0&&u&&u.length>0&&(c.names=l,c.values=u,l=null,u=null),c.u=c.x/h.width,c.v=c.y/h.height,90==c.degrees?(c.u2=(c.x+c.height)/h.width,c.v2=(c.y+c.width)/h.height):(c.u2=(c.x+c.width)/h.width,c.v2=(c.y+c.height)/h.height),this.regions.push(c)}else{for(h=new ie(o.trim());0!=n.readEntry(r,o=n.readLine());){var p=a[r[0]];p&&p(h)}this.pages.push(h)}}return o(t,[{key:"findRegion",value:function(t){for(var e=0;e<this.regions.length;e++)if(this.regions[e].name==t)return this.regions[e];return null}},{key:"setTextures",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=w(this.pages);try{for(r.s();!(e=r.n()).done;){var a=e.value;a.setTexture(t.get(n+a.name))}}catch(t){r.e(t)}finally{r.f()}}},{key:"dispose",value:function(){for(var t,e=0;e<this.pages.length;e++)null===(t=this.pages[e].texture)||void 0===t||t.dispose()}}]),t}(),ae=function(){function t(e){i(this,t),this.index=0,this.lines=e.split(/\r\n|\r|\n/)}return o(t,[{key:"readLine",value:function(){return this.index>=this.lines.length?null:this.lines[this.index++]}},{key:"readEntry",value:function(t,e){if(!e)return 0;if(0==(e=e.trim()).length)return 0;var n=e.indexOf(":");if(-1==n)return 0;t[0]=e.substr(0,n).trim();for(var r=1,a=n+1;;r++){var i=e.indexOf(",",a);if(-1==i)return t[r]=e.substr(a).trim(),r;if(t[r]=e.substr(a,i-a).trim(),a=i+1,4==r)return 4}}}]),t}(),ie=function(){function t(e){i(this,t),this.minFilter=Vt.Nearest,this.magFilter=Vt.Nearest,this.uWrap=Ut.ClampToEdge,this.vWrap=Ut.ClampToEdge,this.texture=null,this.width=0,this.height=0,this.pma=!1,this.regions=new Array,this.name=e}return o(t,[{key:"setTexture",value:function(t){this.texture=t,t.setFilters(this.minFilter,this.magFilter),t.setWraps(this.uWrap,this.vWrap);var e,n=w(this.regions);try{for(n.s();!(e=n.n()).done;){e.value.texture=t}}catch(t){n.e(t)}finally{n.f()}}}]),t}(),se=function(t){l(n,t);var e=d(n);function n(t,r){var a;return i(this,n),(a=e.call(this)).x=0,a.y=0,a.offsetX=0,a.offsetY=0,a.originalWidth=0,a.originalHeight=0,a.index=0,a.degrees=0,a.names=null,a.values=null,a.page=t,a.name=r,t.regions.push(f(a)),a}return o(n)}(ee),oe=function(t){l(n,t);var e=d(n);function n(t,r){var a;return i(this,n),(a=e.call(this,t)).region=null,a.regionUVs=[],a.uvs=[],a.triangles=[],a.color=new E(1,1,1,1),a.width=0,a.height=0,a.hullLength=0,a.edges=[],a.parentMesh=null,a.sequence=null,a.tempColor=new E(0,0,0,0),a.path=r,a}return o(n,[{key:"updateRegion",value:function(){if(!this.region)throw new Error("Region not set.");var t=this.regionUVs;this.uvs&&this.uvs.length==t.length||(this.uvs=R.newFloatArray(t.length));var e=this.uvs,n=this.uvs.length,r=this.region.u,a=this.region.v,i=0,s=0;if(this.region instanceof se){var o=this.region,h=o.page.texture.getImage(),l=h.width,u=h.height;switch(o.degrees){case 90:r-=(o.originalHeight-o.offsetY-o.height)/l,a-=(o.originalWidth-o.offsetX-o.width)/u,i=o.originalHeight/l,s=o.originalWidth/u;for(var c=0;c<n;c+=2)e[c]=r+t[c+1]*i,e[c+1]=a+(1-t[c])*s;return;case 180:r-=(o.originalWidth-o.offsetX-o.width)/l,a-=o.offsetY/u,i=o.originalWidth/l,s=o.originalHeight/u;for(var f=0;f<n;f+=2)e[f]=r+(1-t[f])*i,e[f+1]=a+(1-t[f+1])*s;return;case 270:r-=o.offsetY/l,a-=o.offsetX/u,i=o.originalHeight/l,s=o.originalWidth/u;for(var d=0;d<n;d+=2)e[d]=r+(1-t[d+1])*i,e[d+1]=a+t[d]*s;return}r-=o.offsetX/l,a-=(o.originalHeight-o.offsetY-o.height)/u,i=o.originalWidth/l,s=o.originalHeight/u}else this.region?(i=this.region.u2-r,s=this.region.v2-a):(r=a=0,i=s=1);for(var v=0;v<n;v+=2)e[v]=r+t[v]*i,e[v+1]=a+t[v+1]*s}},{key:"getParentMesh",value:function(){return this.parentMesh}},{key:"setParentMesh",value:function(t){this.parentMesh=t,t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)}},{key:"copy",value:function(){if(this.parentMesh)return this.newLinkedMesh();var t=new n(this.name,this.path);return t.region=this.region,t.color.setFromColor(this.color),this.copyTo(t),t.regionUVs=new Array(this.regionUVs.length),R.arrayCopy(this.regionUVs,0,t.regionUVs,0,this.regionUVs.length),t.uvs=new Array(this.uvs.length),R.arrayCopy(this.uvs,0,t.uvs,0,this.uvs.length),t.triangles=new Array(this.triangles.length),R.arrayCopy(this.triangles,0,t.triangles,0,this.triangles.length),t.hullLength=this.hullLength,t.sequence=null!=this.sequence?this.sequence.copy():null,this.edges&&(t.edges=new Array(this.edges.length),R.arrayCopy(this.edges,0,t.edges,0,this.edges.length)),t.width=this.width,t.height=this.height,t}},{key:"computeWorldVertices",value:function(t,e,r,a,i,s){null!=this.sequence&&this.sequence.apply(t,this),v(u(n.prototype),"computeWorldVertices",this).call(this,t,e,r,a,i,s)}},{key:"newLinkedMesh",value:function(){var t=new n(this.name,this.path);return t.region=this.region,t.color.setFromColor(this.color),t.timelineAttachment=this.timelineAttachment,t.setParentMesh(this.parentMesh?this.parentMesh:this),null!=t.region&&t.updateRegion(),t}}]),n}(N),he=function(t){l(n,t);var e=d(n);function n(t){var r;return i(this,n),(r=e.call(this,t)).lengths=[],r.closed=!1,r.constantSpeed=!1,r.color=new E(1,1,1,1),r}return o(n,[{key:"copy",value:function(){var t=new n(this.name);return this.copyTo(t),t.lengths=new Array(this.lengths.length),R.arrayCopy(this.lengths,0,t.lengths,0,this.lengths.length),t.closed=closed,t.constantSpeed=this.constantSpeed,t.color.setFromColor(this.color),t}}]),n}(N),le=function(t){l(n,t);var e=d(n);function n(t){var r;return i(this,n),(r=e.call(this,t)).x=0,r.y=0,r.rotation=0,r.color=new E(.38,.94,0,1),r}return o(n,[{key:"computeWorldPosition",value:function(t,e){return e.x=this.x*t.a+this.y*t.b+t.worldX,e.y=this.x*t.c+this.y*t.d+t.worldY,e}},{key:"computeWorldRotation",value:function(t){var e=I.cosDeg(this.rotation),n=I.sinDeg(this.rotation),r=e*t.a+n*t.b,a=e*t.c+n*t.d;return Math.atan2(a,r)*I.radDeg}},{key:"copy",value:function(){var t=new n(this.name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t}}]),n}(N),ue=function(t){l(n,t);var e=d(n);function n(t,r){var a;return i(this,n),(a=e.call(this,t)).x=0,a.y=0,a.scaleX=1,a.scaleY=1,a.rotation=0,a.width=0,a.height=0,a.color=new E(1,1,1,1),a.region=null,a.sequence=null,a.offset=R.newFloatArray(8),a.uvs=R.newFloatArray(8),a.tempColor=new E(1,1,1,1),a.path=r,a}return o(n,[{key:"updateRegion",value:function(){if(!this.region)throw new Error("Region not set.");var t=this.region,e=this.uvs;if(null==t)return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=1,e[5]=1,e[6]=1,void(e[7]=0);var n=this.width/this.region.originalWidth*this.scaleX,r=this.height/this.region.originalHeight*this.scaleY,a=-this.width/2*this.scaleX+this.region.offsetX*n,i=-this.height/2*this.scaleY+this.region.offsetY*r,s=a+this.region.width*n,o=i+this.region.height*r,h=this.rotation*Math.PI/180,l=Math.cos(h),u=Math.sin(h),c=this.x,f=this.y,d=a*l+c,v=a*u,m=i*l+f,p=i*u,g=s*l+c,y=s*u,w=o*l+f,k=o*u,b=this.offset;b[0]=d-p,b[1]=m+v,b[2]=d-k,b[3]=w+v,b[4]=g-k,b[5]=w+y,b[6]=g-p,b[7]=m+y,90==t.degrees?(e[0]=t.u2,e[1]=t.v2,e[2]=t.u,e[3]=t.v2,e[4]=t.u,e[5]=t.v,e[6]=t.u2,e[7]=t.v):(e[0]=t.u,e[1]=t.v2,e[2]=t.u,e[3]=t.v,e[4]=t.u2,e[5]=t.v,e[6]=t.u2,e[7]=t.v2)}},{key:"computeWorldVertices",value:function(t,e,n,r){null!=this.sequence&&this.sequence.apply(t,this);var a=t.bone,i=this.offset,s=a.worldX,o=a.worldY,h=a.a,l=a.b,u=a.c,c=a.d,f=0,d=0;f=i[0],d=i[1],e[n]=f*h+d*l+s,e[n+1]=f*u+d*c+o,n+=r,f=i[2],d=i[3],e[n]=f*h+d*l+s,e[n+1]=f*u+d*c+o,n+=r,f=i[4],d=i[5],e[n]=f*h+d*l+s,e[n+1]=f*u+d*c+o,n+=r,f=i[6],d=i[7],e[n]=f*h+d*l+s,e[n+1]=f*u+d*c+o}},{key:"copy",value:function(){var t=new n(this.name,this.path);return t.region=this.region,t.x=this.x,t.y=this.y,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.rotation=this.rotation,t.width=this.width,t.height=this.height,R.arrayCopy(this.uvs,0,t.uvs,0,8),R.arrayCopy(this.offset,0,t.offset,0,8),t.color.setFromColor(this.color),t.sequence=null!=this.sequence?this.sequence.copy():null,t}}]),n}(X);ue.X1=0,ue.Y1=1,ue.C1R=2,ue.C1G=3,ue.C1B=4,ue.C1A=5,ue.U1=6,ue.V1=7,ue.X2=8,ue.Y2=9,ue.C2R=10,ue.C2G=11,ue.C2B=12,ue.C2A=13,ue.U2=14,ue.V2=15,ue.X3=16,ue.Y3=17,ue.C3R=18,ue.C3G=19,ue.C3B=20,ue.C3A=21,ue.U3=22,ue.V3=23,ue.X4=24,ue.Y4=25,ue.C4R=26,ue.C4G=27,ue.C4B=28,ue.C4A=29,ue.U4=30,ue.V4=31;var ce,fe=function(){function t(e){i(this,t),this.atlas=e}return o(t,[{key:"loadSequence",value:function(t,e,n){for(var r=n.regions,a=0,i=r.length;a<i;a++){var s=n.getPath(e,a),o=this.atlas.findRegion(s);if(null==o)throw new Error("Region not found in atlas: "+s+" (sequence: "+t+")");r[a]=o}}},{key:"newRegionAttachment",value:function(t,e,n,r){var a=new ue(e,n);if(null!=r)this.loadSequence(e,n,r);else{var i=this.atlas.findRegion(n);if(!i)throw new Error("Region not found in atlas: "+n+" (region attachment: "+e+")");a.region=i}return a}},{key:"newMeshAttachment",value:function(t,e,n,r){var a=new oe(e,n);if(null!=r)this.loadSequence(e,n,r);else{var i=this.atlas.findRegion(n);if(!i)throw new Error("Region not found in atlas: "+n+" (mesh attachment: "+e+")");a.region=i}return a}},{key:"newBoundingBoxAttachment",value:function(t,e){return new Qt(e)}},{key:"newPathAttachment",value:function(t,e){return new he(e)}},{key:"newPointAttachment",value:function(t,e){return new le(e)}},{key:"newClippingAttachment",value:function(t,e){return new Zt(e)}}]),t}(),de=o((function t(e,n,r){if(i(this,t),this.index=0,this.parent=null,this.length=0,this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=ce.Normal,this.skinRequired=!1,this.color=new E,e<0)throw new Error("index must be >= 0.");if(!n)throw new Error("name cannot be null.");this.index=e,this.name=n,this.parent=r}));!function(t){t[t.Normal=0]="Normal",t[t.OnlyTranslation=1]="OnlyTranslation",t[t.NoRotationOrReflection=2]="NoRotationOrReflection",t[t.NoScale=3]="NoScale",t[t.NoScaleOrReflection=4]="NoScaleOrReflection"}(ce||(ce={}));var ve,me,pe,ge=function(){function t(e,n,r){if(i(this,t),this.parent=null,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.a=0,this.b=0,this.c=0,this.d=0,this.worldY=0,this.worldX=0,this.sorted=!1,this.active=!1,!e)throw new Error("data cannot be null.");if(!n)throw new Error("skeleton cannot be null.");this.data=e,this.skeleton=n,this.parent=r,this.setToSetupPose()}return o(t,[{key:"isActive",value:function(){return this.active}},{key:"update",value:function(){this.updateWorldTransformWith(this.ax,this.ay,this.arotation,this.ascaleX,this.ascaleY,this.ashearX,this.ashearY)}},{key:"updateWorldTransform",value:function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)}},{key:"updateWorldTransformWith",value:function(t,e,n,r,a,i,s){this.ax=t,this.ay=e,this.arotation=n,this.ascaleX=r,this.ascaleY=a,this.ashearX=i,this.ashearY=s;var o=this.parent;if(!o){var h=this.skeleton,l=n+90+s,u=h.scaleX,c=h.scaleY;return this.a=I.cosDeg(n+i)*r*u,this.b=I.cosDeg(l)*a*u,this.c=I.sinDeg(n+i)*r*c,this.d=I.sinDeg(l)*a*c,this.worldX=t*u+h.x,void(this.worldY=e*c+h.y)}var f=o.a,d=o.b,v=o.c,m=o.d;switch(this.worldX=f*t+d*e+o.worldX,this.worldY=v*t+m*e+o.worldY,this.data.transformMode){case ce.Normal:var p=n+90+s,g=I.cosDeg(n+i)*r,y=I.cosDeg(p)*a,w=I.sinDeg(n+i)*r,k=I.sinDeg(p)*a;return this.a=f*g+d*w,this.b=f*y+d*k,this.c=v*g+m*w,void(this.d=v*y+m*k);case ce.OnlyTranslation:var b=n+90+s;this.a=I.cosDeg(n+i)*r,this.b=I.cosDeg(b)*a,this.c=I.sinDeg(n+i)*r,this.d=I.sinDeg(b)*a;break;case ce.NoRotationOrReflection:var x=f*f+v*v,E=0;x>1e-4?(x=Math.abs(f*m-d*v)/x,f/=this.skeleton.scaleX,d=(v/=this.skeleton.scaleY)*x,m=f*x,E=Math.atan2(v,f)*I.radDeg):(f=0,v=0,E=90-Math.atan2(m,d)*I.radDeg);var A=n+i-E,S=n+s-E+90,T=I.cosDeg(A)*r,R=I.cosDeg(S)*a,C=I.sinDeg(A)*r,M=I.sinDeg(S)*a;this.a=f*T-d*C,this.b=f*R-d*M,this.c=v*T+m*C,this.d=v*R+m*M;break;case ce.NoScale:case ce.NoScaleOrReflection:var F=I.cosDeg(n),Y=I.sinDeg(n),L=(f*F+d*Y)/this.skeleton.scaleX,X=(v*F+m*Y)/this.skeleton.scaleY,N=Math.sqrt(L*L+X*X);N>1e-5&&(N=1/N),L*=N,X*=N,N=Math.sqrt(L*L+X*X),this.data.transformMode==ce.NoScale&&f*m-d*v<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(N=-N);var P=Math.PI/2+Math.atan2(X,L),_=Math.cos(P)*N,O=Math.sin(P)*N,B=I.cosDeg(i)*r,D=I.cosDeg(90+s)*a,V=I.sinDeg(i)*r,U=I.sinDeg(90+s)*a;this.a=L*B+_*V,this.b=L*D+_*U,this.c=X*B+O*V,this.d=X*D+O*U}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY}},{key:"setToSetupPose",value:function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY}},{key:"getWorldRotationX",value:function(){return Math.atan2(this.c,this.a)*I.radDeg}},{key:"getWorldRotationY",value:function(){return Math.atan2(this.d,this.b)*I.radDeg}},{key:"getWorldScaleX",value:function(){return Math.sqrt(this.a*this.a+this.c*this.c)}},{key:"getWorldScaleY",value:function(){return Math.sqrt(this.b*this.b+this.d*this.d)}},{key:"updateAppliedTransform",value:function(){var t=this.parent;if(!t)return this.ax=this.worldX-this.skeleton.x,this.ay=this.worldY-this.skeleton.y,this.arotation=Math.atan2(this.c,this.a)*I.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,void(this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*I.radDeg);var e=t.a,n=t.b,r=t.c,a=t.d,i=1/(e*a-n*r),s=this.worldX-t.worldX,o=this.worldY-t.worldY;this.ax=s*a*i-o*n*i,this.ay=o*e*i-s*r*i;var h=i*a,l=i*e,u=i*n,c=i*r,f=h*this.a-u*this.c,d=h*this.b-u*this.d,v=l*this.c-c*this.a,m=l*this.d-c*this.b;if(this.ashearX=0,this.ascaleX=Math.sqrt(f*f+v*v),this.ascaleX>1e-4){var p=f*m-d*v;this.ascaleY=p/this.ascaleX,this.ashearY=Math.atan2(f*d+v*m,p)*I.radDeg,this.arotation=Math.atan2(v,f)*I.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(d*d+m*m),this.ashearY=0,this.arotation=90-Math.atan2(m,d)*I.radDeg}},{key:"worldToLocal",value:function(t){var e=1/(this.a*this.d-this.b*this.c),n=t.x-this.worldX,r=t.y-this.worldY;return t.x=n*this.d*e-r*this.b*e,t.y=r*this.a*e-n*this.c*e,t}},{key:"localToWorld",value:function(t){var e=t.x,n=t.y;return t.x=e*this.a+n*this.b+this.worldX,t.y=e*this.c+n*this.d+this.worldY,t}},{key:"worldToLocalRotation",value:function(t){var e=I.sinDeg(t),n=I.cosDeg(t);return Math.atan2(this.a*e-this.c*n,this.d*n-this.b*e)*I.radDeg+this.rotation-this.shearX}},{key:"localToWorldRotation",value:function(t){t-=this.rotation-this.shearX;var e=I.sinDeg(t),n=I.cosDeg(t);return Math.atan2(n*this.c+e*this.d,n*this.a+e*this.b)*I.radDeg}},{key:"rotateWorld",value:function(t){var e=this.a,n=this.b,r=this.c,a=this.d,i=I.cosDeg(t),s=I.sinDeg(t);this.a=i*e-s*r,this.b=i*n-s*a,this.c=s*e+i*r,this.d=s*n+i*a}}]),t}(),ye=o((function t(e,n,r){i(this,t),this.name=e,this.order=n,this.skinRequired=r})),we=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new ke;i(this,t),this.pathPrefix="",this.assets={},this.errors={},this.toLoad=0,this.loaded=0,this.textureLoader=e,this.pathPrefix=n,this.downloader=r}return o(t,[{key:"start",value:function(t){return this.toLoad++,this.pathPrefix+t}},{key:"success",value:function(t,e,n){this.toLoad--,this.loaded++,this.assets[e]=n,t&&t(e,n)}},{key:"error",value:function(t,e,n){this.toLoad--,this.loaded++,this.errors[e]=n,t&&t(e,n)}},{key:"loadAll",value:function(){var t=this;return new Promise((function(e,n){requestAnimationFrame((function r(){t.isLoadingComplete()?t.hasErrors()?n(t.errors):e(t):requestAnimationFrame(r)}))}))}},{key:"setRawDataURI",value:function(t,e){this.downloader.rawDataUris[this.pathPrefix+t]=e}},{key:"loadBinary",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};t=this.start(t),this.downloader.downloadBinary(t,(function(r){e.success(n,t,r)}),(function(n,a){e.error(r,t,"Couldn't load binary ".concat(t,": status ").concat(n,", ").concat(a))}))}},{key:"loadText",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};t=this.start(t),this.downloader.downloadText(t,(function(r){e.success(n,t,r)}),(function(n,a){e.error(r,t,"Couldn't load text ".concat(t,": status ").concat(n,", ").concat(a))}))}},{key:"loadJson",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};t=this.start(t),this.downloader.downloadJson(t,(function(r){e.success(n,t,r)}),(function(n,a){e.error(r,t,"Couldn't load JSON ".concat(t,": status ").concat(n,", ").concat(a))}))}},{key:"loadTexture",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(t=this.start(t),!!("undefined"==typeof window||"undefined"==typeof navigator||!window.document))fetch(t,{mode:"cors"}).then((function(n){return n.ok?n.blob():(e.error(r,t,"Couldn't load image: ".concat(t)),null)})).then((function(t){return t?createImageBitmap(t,{premultiplyAlpha:"none",colorSpaceConversion:"none"}):null})).then((function(r){r&&e.success(n,t,e.textureLoader(r))}));else{var a=new Image;a.crossOrigin="anonymous",a.onload=function(){e.success(n,t,e.textureLoader(a))},a.onerror=function(){e.error(r,t,"Couldn't load image: ".concat(t))},this.downloader.rawDataUris[t]&&(t=this.downloader.rawDataUris[t]),a.src=t}}},{key:"loadTextureAtlas",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},a=arguments.length>3?arguments[3]:void 0,i=t.lastIndexOf("/"),s=i>=0?t.substring(0,i+1):"";t=this.start(t),this.downloader.downloadText(t,(function(i){try{var o,h=new re(i),l=h.pages.length,u=!1,c=w(h.pages);try{var f=function(){var i=o.value;e.loadTexture(a?a[i.name]:s+i.name,(function(r,a){u||(i.setTexture(a),0==--l&&e.success(n,t,h))}),(function(n,a){u||e.error(r,t,"Couldn't load texture atlas ".concat(t," page image: ").concat(n)),u=!0}))};for(c.s();!(o=c.n()).done;)f()}catch(t){c.e(t)}finally{c.f()}}catch(n){e.error(r,t,"Couldn't parse texture atlas ".concat(t,": ").concat(n.message))}}),(function(n,a){e.error(r,t,"Couldn't load texture atlas ".concat(t,": status ").concat(n,", ").concat(a))}))}},{key:"get",value:function(t){return this.assets[this.pathPrefix+t]}},{key:"require",value:function(t){t=this.pathPrefix+t;var e=this.assets[t];if(e)return e;var n=this.errors[t];throw Error("Asset not found: "+t+(n?"\n"+n:""))}},{key:"remove",value:function(t){t=this.pathPrefix+t;var e=this.assets[t];return e.dispose&&e.dispose(),delete this.assets[t],e}},{key:"removeAll",value:function(){for(var t in this.assets){var e=this.assets[t];e.dispose&&e.dispose()}this.assets={}}},{key:"isLoadingComplete",value:function(){return 0==this.toLoad}},{key:"getToLoad",value:function(){return this.toLoad}},{key:"getLoaded",value:function(){return this.loaded}},{key:"dispose",value:function(){this.removeAll()}},{key:"hasErrors",value:function(){return Object.keys(this.errors).length>0}},{key:"getErrors",value:function(){return this.errors}}]),t}(),ke=function(){function t(){i(this,t),this.callbacks={},this.rawDataUris={}}return o(t,[{key:"dataUriToString",value:function(t){if(!t.startsWith("data:"))throw new Error("Not a data URI.");var e=t.indexOf("base64,");return-1!=e?(e+=7,atob(t.substr(e))):t.substr(t.indexOf(",")+1)}},{key:"base64ToUint8Array",value:function(t){for(var e=window.atob(t),n=e.length,r=new Uint8Array(n),a=0;a<n;a++)r[a]=e.charCodeAt(a);return r}},{key:"dataUriToUint8Array",value:function(t){if(!t.startsWith("data:"))throw new Error("Not a data URI.");var e=t.indexOf("base64,");if(-1==e)throw new Error("Not a binary data URI.");return e+=7,this.base64ToUint8Array(t.substr(e))}},{key:"downloadText",value:function(t,e,n){var r=this;if(!this.start(t,e,n))if(this.rawDataUris[t])try{var a=this.rawDataUris[t];this.finish(t,200,this.dataUriToString(a))}catch(e){this.finish(t,400,JSON.stringify(e))}else{var i=new XMLHttpRequest;i.overrideMimeType("text/html"),i.open("GET",t,!0);var s=function(){r.finish(t,i.status,i.responseText)};i.onload=s,i.onerror=s,i.send()}}},{key:"downloadJson",value:function(t,e,n){this.downloadText(t,(function(t){e(JSON.parse(t))}),n)}},{key:"downloadBinary",value:function(t,e,n){var r=this;if(!this.start(t,e,n))if(this.rawDataUris[t])try{var a=this.rawDataUris[t];this.finish(t,200,this.dataUriToUint8Array(a))}catch(e){this.finish(t,400,JSON.stringify(e))}else{var i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="arraybuffer";var s=function(){r.finish(t,i.status,i.response)};i.onload=function(){200==i.status||0==i.status?r.finish(t,200,new Uint8Array(i.response)):s()},i.onerror=s,i.send()}}},{key:"start",value:function(t,e,n){var r=this.callbacks[t];try{if(r)return!0;this.callbacks[t]=r=[]}finally{r.push(e,n)}}},{key:"finish",value:function(t,e,n){var r=this.callbacks[t];delete this.callbacks[t];for(var a=200==e||0==e?[n]:[e,n],i=a.length-1,s=r.length;i<s;i+=2)r[i].apply(null,a)}}]),t}(),be=o((function t(e,n){if(i(this,t),this.intValue=0,this.floatValue=0,this.stringValue=null,this.time=0,this.volume=0,this.balance=0,!n)throw new Error("data cannot be null.");this.time=e,this.data=n})),xe=o((function t(e){i(this,t),this.intValue=0,this.floatValue=0,this.stringValue=null,this.audioPath=null,this.volume=0,this.balance=0,this.name=e})),Ee=function(){function t(e,n){if(i(this,t),this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,!e)throw new Error("data cannot be null.");if(!n)throw new Error("skeleton cannot be null.");this.data=e,this.mix=e.mix,this.softness=e.softness,this.bendDirection=e.bendDirection,this.compress=e.compress,this.stretch=e.stretch,this.bones=new Array;for(var r=0;r<e.bones.length;r++){var a=n.findBone(e.bones[r].name);if(!a)throw new Error("Couldn't find bone ".concat(e.bones[r].name));this.bones.push(a)}var s=n.findBone(e.target.name);if(!s)throw new Error("Couldn't find bone ".concat(e.target.name));this.target=s}return o(t,[{key:"isActive",value:function(){return this.active}},{key:"update",value:function(){if(0!=this.mix){var t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.data.uniform,this.softness,this.mix)}}}},{key:"apply1",value:function(t,e,n,r,a,i,s){var o=t.parent;if(!o)throw new Error("IK bone must have parent.");var h=o.a,l=o.b,u=o.c,c=o.d,f=-t.ashearX-t.arotation,d=0,v=0;switch(t.data.transformMode){case ce.OnlyTranslation:d=e-t.worldX,v=n-t.worldY;break;case ce.NoRotationOrReflection:var m=Math.abs(h*c-l*u)/Math.max(1e-4,h*h+u*u),p=h/t.skeleton.scaleX,g=u/t.skeleton.scaleY;l=-g*m*t.skeleton.scaleX,c=p*m*t.skeleton.scaleY,f+=Math.atan2(g,p)*I.radDeg;default:var y=e-o.worldX,w=n-o.worldY,k=h*c-l*u;Math.abs(k)<=1e-4?(d=0,v=0):(d=(y*c-w*l)/k-t.ax,v=(w*h-y*u)/k-t.ay)}f+=Math.atan2(v,d)*I.radDeg,t.ascaleX<0&&(f+=180),f>180?f-=360:f<-180&&(f+=360);var b=t.ascaleX,x=t.ascaleY;if(r||a){switch(t.data.transformMode){case ce.NoScale:case ce.NoScaleOrReflection:d=e-t.worldX,v=n-t.worldY}var E=t.data.length*b,A=Math.sqrt(d*d+v*v);if(r&&A<E||a&&A>E&&E>1e-4){var S=(A/E-1)*s+1;b*=S,i&&(x*=S)}}t.updateWorldTransformWith(t.ax,t.ay,t.arotation+f*s,b,x,t.ashearX,t.ashearY)}},{key:"apply2",value:function(t,e,n,r,a,i,s,o,h){var l=t.ax,u=t.ay,c=t.ascaleX,f=t.ascaleY,d=c,v=f,m=e.ascaleX,p=0,g=0,y=0;c<0?(c=-c,p=180,y=-1):(p=0,y=1),f<0&&(f=-f,y=-y),m<0?(m=-m,g=180):g=0;var w=e.ax,k=0,b=0,x=0,E=t.a,A=t.b,S=t.c,T=t.d,R=Math.abs(c-f)<=1e-4;!R||i?(k=0,b=E*w+t.worldX,x=S*w+t.worldY):(b=E*w+A*(k=e.ay)+t.worldX,x=S*w+T*k+t.worldY);var C=t.parent;if(!C)throw new Error("IK parent must itself have a parent.");E=C.a,A=C.b,S=C.c;var M,F,Y=E*(T=C.d)-A*S,L=b-C.worldX,X=x-C.worldY,N=(L*T-X*A)*(Y=Math.abs(Y)<=1e-4?0:1/Y)-l,P=(X*E-L*S)*Y-u,_=Math.sqrt(N*N+P*P),O=e.data.length*m;if(_<1e-4)return this.apply1(t,n,r,!1,i,!1,h),void e.updateWorldTransformWith(w,k,0,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY);var B=((L=n-C.worldX)*T-(X=r-C.worldY)*A)*Y-l,D=(X*E-L*S)*Y-u,V=B*B+D*D;if(0!=o){o*=c*(m+1)*.5;var U=Math.sqrt(V),q=U-_-O*c+o;if(q>0){var W=Math.min(1,q/(2*o))-1;V=(B-=(W=(q-o*(1-W*W))/U)*B)*B+(D-=W*D)*D}}t:if(R){var j=(V-_*_-(O*=c)*O)/(2*_*O);j<-1?(j=-1,F=Math.PI*a):j>1?(j=1,F=0,i&&(d*=E=(Math.sqrt(V)/(_+O)-1)*h+1,s&&(v*=E))):F=Math.acos(j)*a,E=_+O*j,A=O*Math.sin(F),M=Math.atan2(D*E-B*A,B*E+D*A)}else{var G=(E=c*O)*E,z=(A=f*O)*A,H=Math.atan2(D,B),$=-2*z*_,J=z-G;if((T=$*$-4*J*(S=z*_*_+G*V-G*z))>=0){var K=Math.sqrt(T);$<0&&(K=-K);var Q=(K=.5*-($+K))/J,Z=S/K,tt=Math.abs(Q)<Math.abs(Z)?Q:Z;if(tt*tt<=V){X=Math.sqrt(V-tt*tt)*a,M=H-Math.atan2(X,tt),F=Math.atan2(X/f,(tt-_)/c);break t}}var et=I.PI,nt=_-E,rt=nt*nt,at=0,it=0,st=_+E,ot=st*st,ht=0;(S=-E*_/(G-z))>=-1&&S<=1&&(S=Math.acos(S),(T=(L=E*Math.cos(S)+_)*L+(X=A*Math.sin(S))*X)<rt&&(et=S,rt=T,nt=L,at=X),T>ot&&(it=S,ot=T,st=L,ht=X)),V<=.5*(rt+ot)?(M=H-Math.atan2(at*a,nt),F=et*a):(M=H-Math.atan2(ht*a,st),F=it*a)}var lt=Math.atan2(k,w)*y,ut=t.arotation;(M=(M-lt)*I.radDeg+p-ut)>180?M-=360:M<-180&&(M+=360),t.updateWorldTransformWith(l,u,ut+M*h,d,v,0,0),ut=e.arotation,(F=((F+lt)*I.radDeg-e.ashearX)*y+g-ut)>180?F-=360:F<-180&&(F+=360),e.updateWorldTransformWith(w,k,ut+F*h,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)}}]),t}(),Ie=function(t){l(n,t);var e=d(n);function n(t){var r;return i(this,n),(r=e.call(this,t,0,!1)).bones=new Array,r._target=null,r.bendDirection=1,r.compress=!1,r.stretch=!1,r.uniform=!1,r.mix=1,r.softness=0,r}return o(n,[{key:"target",get:function(){if(this._target)return this._target;throw new Error("BoneData not set.")},set:function(t){this._target=t}}]),n}(ye),Ae=function(t){l(n,t);var e=d(n);function n(t){var r;return i(this,n),(r=e.call(this,t,0,!1)).bones=new Array,r._target=null,r.positionMode=ve.Fixed,r.spacingMode=me.Fixed,r.rotateMode=pe.Chain,r.offsetRotation=0,r.position=0,r.spacing=0,r.mixRotate=0,r.mixX=0,r.mixY=0,r}return o(n,[{key:"target",get:function(){if(this._target)return this._target;throw new Error("SlotData not set.")},set:function(t){this._target=t}}]),n}(ye);!function(t){t[t.Fixed=0]="Fixed",t[t.Percent=1]="Percent"}(ve||(ve={})),function(t){t[t.Length=0]="Length",t[t.Fixed=1]="Fixed",t[t.Percent=2]="Percent",t[t.Proportional=3]="Proportional"}(me||(me={})),function(t){t[t.Tangent=0]="Tangent",t[t.Chain=1]="Chain",t[t.ChainScale=2]="ChainScale"}(pe||(pe={}));var Se=function(){function t(e,n){if(i(this,t),this.position=0,this.spacing=0,this.mixRotate=0,this.mixX=0,this.mixY=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,!e)throw new Error("data cannot be null.");if(!n)throw new Error("skeleton cannot be null.");this.data=e,this.bones=new Array;for(var r=0,a=e.bones.length;r<a;r++){var s=n.findBone(e.bones[r].name);if(!s)throw new Error("Couldn't find bone ".concat(e.bones[r].name,"."));this.bones.push(s)}var o=n.findSlot(e.target.name);if(!o)throw new Error("Couldn't find target bone ".concat(e.target.name));this.target=o,this.position=e.position,this.spacing=e.spacing,this.mixRotate=e.mixRotate,this.mixX=e.mixX,this.mixY=e.mixY}return o(t,[{key:"isActive",value:function(){return this.active}},{key:"update",value:function(){var e=this.target.getAttachment();if(e instanceof he){var n=this.mixRotate,r=this.mixX,a=this.mixY;if(0!=n||0!=r||0!=a){var i=this.data,s=i.rotateMode==pe.Tangent,o=i.rotateMode==pe.ChainScale,h=this.bones,l=h.length,u=s?l:l+1,c=R.setArraySize(this.spaces,u),f=o?this.lengths=R.setArraySize(this.lengths,l):[],d=this.spacing;switch(i.spacingMode){case me.Percent:if(o)for(var v=0,m=u-1;v<m;v++){var p=h[v],g=p.data.length;if(g<t.epsilon)f[v]=0;else{var y=g*p.a,w=g*p.c;f[v]=Math.sqrt(y*y+w*w)}}R.arrayFill(c,1,u,d);break;case me.Proportional:for(var k=0,b=0,x=u-1;b<x;){var E=h[b],A=E.data.length;if(A<t.epsilon)o&&(f[b]=0),c[++b]=d;else{var S=A*E.a,T=A*E.c,C=Math.sqrt(S*S+T*T);o&&(f[b]=C),c[++b]=C,k+=C}}if(k>0){k=u/k*d;for(var M=1;M<u;M++)c[M]*=k}break;default:for(var F=i.spacingMode==me.Length,Y=0,L=u-1;Y<L;){var X=h[Y],N=X.data.length;if(N<t.epsilon)o&&(f[Y]=0),c[++Y]=d;else{var P=N*X.a,_=N*X.c,O=Math.sqrt(P*P+_*_);o&&(f[Y]=O),c[++Y]=(F?N+d:d)*O/N}}}var B=this.computeWorldPositions(e,u,s),D=B[0],V=B[1],U=i.offsetRotation,q=!1;if(0==U)q=i.rotateMode==pe.Chain;else{q=!1;var W=this.target.bone;U*=W.a*W.d-W.b*W.c>0?I.degRad:-I.degRad}for(var j=0,G=3;j<l;j++,G+=3){var z=h[j];z.worldX+=(D-z.worldX)*r,z.worldY+=(V-z.worldY)*a;var H=B[G],$=B[G+1],J=H-D,K=$-V;if(o){var Q=f[j];if(0!=Q){var Z=(Math.sqrt(J*J+K*K)/Q-1)*n+1;z.a*=Z,z.c*=Z}}if(D=H,V=$,n>0){var tt=z.a,et=z.b,nt=z.c,rt=z.d,at=0,it=0,st=0;if(at=s?B[G-1]:0==c[j+1]?B[G+2]:Math.atan2(K,J),at-=Math.atan2(nt,tt),q){it=Math.cos(at),st=Math.sin(at);var ot=z.data.length;D+=(ot*(it*tt-st*nt)-J)*n,V+=(ot*(st*tt+it*nt)-K)*n}else at+=U;at>I.PI?at-=I.PI2:at<-I.PI&&(at+=I.PI2),at*=n,it=Math.cos(at),st=Math.sin(at),z.a=it*tt-st*nt,z.b=it*et-st*rt,z.c=st*tt+it*nt,z.d=st*et+it*rt}z.updateAppliedTransform()}}}}},{key:"computeWorldPositions",value:function(e,n,r){var a=this.target,i=this.position,s=this.spaces,o=R.setArraySize(this.positions,3*n+2),h=this.world,l=e.closed,u=e.worldVerticesLength,c=u/6,f=t.NONE;if(!e.constantSpeed){var d,v=e.lengths,m=v[c-=l?1:2];switch(this.data.positionMode==ve.Percent&&(i*=m),this.data.spacingMode){case me.Percent:d=m;break;case me.Proportional:d=m/n;break;default:d=1}h=R.setArraySize(this.world,8);for(var p=0,g=0,y=0;p<n;p++,g+=3){var w=s[p]*d,k=i+=w;if(l)(k%=m)<0&&(k+=m),y=0;else{if(k<0){f!=t.BEFORE&&(f=t.BEFORE,e.computeWorldVertices(a,2,4,h,0,2)),this.addBeforePosition(k,h,0,o,g);continue}if(k>m){f!=t.AFTER&&(f=t.AFTER,e.computeWorldVertices(a,u-6,4,h,0,2)),this.addAfterPosition(k-m,h,0,o,g);continue}}for(;;y++){var b=v[y];if(!(k>b)){if(0==y)k/=b;else{var x=v[y-1];k=(k-x)/(b-x)}break}}y!=f&&(f=y,l&&y==c?(e.computeWorldVertices(a,u-4,4,h,0,2),e.computeWorldVertices(a,0,4,h,4,2)):e.computeWorldVertices(a,6*y+2,8,h,0,2)),this.addCurvePosition(k,h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],o,g,r||p>0&&0==w)}return o}l?(u+=2,h=R.setArraySize(this.world,u),e.computeWorldVertices(a,2,u-4,h,0,2),e.computeWorldVertices(a,0,2,h,u-4,2),h[u-2]=h[0],h[u-1]=h[1]):(c--,u-=4,h=R.setArraySize(this.world,u),e.computeWorldVertices(a,2,u,h,0,2));for(var E,I=R.setArraySize(this.curves,c),A=0,S=h[0],T=h[1],C=0,M=0,F=0,Y=0,L=0,X=0,N=0,P=0,_=0,O=0,B=0,D=0,V=0,U=0,q=0,W=2;q<c;q++,W+=6)C=h[W],M=h[W+1],F=h[W+2],Y=h[W+3],B=2*(N=.1875*(S-2*C+F))+(_=.09375*(3*(C-F)-S+(L=h[W+4]))),D=2*(P=.1875*(T-2*M+Y))+(O=.09375*(3*(M-Y)-T+(X=h[W+5]))),V=.75*(C-S)+N+.16666667*_,U=.75*(M-T)+P+.16666667*O,A+=Math.sqrt(V*V+U*U),V+=B,U+=D,B+=_,D+=O,A+=Math.sqrt(V*V+U*U),V+=B,U+=D,A+=Math.sqrt(V*V+U*U),V+=B+_,U+=D+O,A+=Math.sqrt(V*V+U*U),I[q]=A,S=L,T=X;switch(this.data.positionMode==ve.Percent&&(i*=A),this.data.spacingMode){case me.Percent:E=A;break;case me.Proportional:E=A/n;break;default:E=1}for(var j=this.segments,G=0,z=0,H=0,$=0,J=0;z<n;z++,H+=3){var K=s[z]*E,Q=i+=K;if(l)(Q%=A)<0&&(Q+=A),$=0;else{if(Q<0){this.addBeforePosition(Q,h,0,o,H);continue}if(Q>A){this.addAfterPosition(Q-A,h,u-4,o,H);continue}}for(;;$++){var Z=I[$];if(!(Q>Z)){if(0==$)Q/=Z;else{var tt=I[$-1];Q=(Q-tt)/(Z-tt)}break}}if($!=f){f=$;var et=6*$;for(S=h[et],T=h[et+1],C=h[et+2],M=h[et+3],F=h[et+4],Y=h[et+5],B=2*(N=.03*(S-2*C+F))+(_=.006*(3*(C-F)-S+(L=h[et+6]))),D=2*(P=.03*(T-2*M+Y))+(O=.006*(3*(M-Y)-T+(X=h[et+7]))),V=.3*(C-S)+N+.16666667*_,U=.3*(M-T)+P+.16666667*O,G=Math.sqrt(V*V+U*U),j[0]=G,et=1;et<8;et++)V+=B,U+=D,B+=_,D+=O,G+=Math.sqrt(V*V+U*U),j[et]=G;V+=B,U+=D,G+=Math.sqrt(V*V+U*U),j[8]=G,V+=B+_,U+=D+O,G+=Math.sqrt(V*V+U*U),j[9]=G,J=0}for(Q*=G;;J++){var nt=j[J];if(!(Q>nt)){if(0==J)Q/=nt;else{var rt=j[J-1];Q=J+(Q-rt)/(nt-rt)}break}}this.addCurvePosition(.1*Q,S,T,C,M,F,Y,L,X,o,H,r||z>0&&0==K)}return o}},{key:"addBeforePosition",value:function(t,e,n,r,a){var i=e[n],s=e[n+1],o=e[n+2]-i,h=e[n+3]-s,l=Math.atan2(h,o);r[a]=i+t*Math.cos(l),r[a+1]=s+t*Math.sin(l),r[a+2]=l}},{key:"addAfterPosition",value:function(t,e,n,r,a){var i=e[n+2],s=e[n+3],o=i-e[n],h=s-e[n+1],l=Math.atan2(h,o);r[a]=i+t*Math.cos(l),r[a+1]=s+t*Math.sin(l),r[a+2]=l}},{key:"addCurvePosition",value:function(t,e,n,r,a,i,s,o,h,l,u,c){if(0==t||isNaN(t))return l[u]=e,l[u+1]=n,void(l[u+2]=Math.atan2(a-n,r-e));var f=t*t,d=f*t,v=1-t,m=v*v,p=m*v,g=v*t,y=3*g,w=v*y,k=y*t,b=e*p+r*w+i*k+o*d,x=n*p+a*w+s*k+h*d;l[u]=b,l[u+1]=x,c&&(l[u+2]=t<.001?Math.atan2(a-n,r-e):Math.atan2(x-(n*m+a*g*2+s*f),b-(e*m+r*g*2+i*f)))}}]),t}();Se.NONE=-1,Se.BEFORE=-2,Se.AFTER=-3,Se.epsilon=1e-5;var Te=function(){function t(e,n){if(i(this,t),this.darkColor=null,this.attachment=null,this.attachmentState=0,this.sequenceIndex=-1,this.deform=new Array,!e)throw new Error("data cannot be null.");if(!n)throw new Error("bone cannot be null.");this.data=e,this.bone=n,this.color=new E,this.darkColor=e.darkColor?new E:null,this.setToSetupPose()}return o(t,[{key:"getSkeleton",value:function(){return this.bone.skeleton}},{key:"getAttachment",value:function(){return this.attachment}},{key:"setAttachment",value:function(t){this.attachment!=t&&(t instanceof N&&this.attachment instanceof N&&t.timelineAttachment==this.attachment.timelineAttachment||(this.deform.length=0),this.attachment=t,this.sequenceIndex=-1)}},{key:"setToSetupPose",value:function(){this.color.setFromColor(this.data.color),this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName?(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName))):this.attachment=null}}]),t}(),Re=function(){function t(e,n){if(i(this,t),this.mixRotate=0,this.mixX=0,this.mixY=0,this.mixScaleX=0,this.mixScaleY=0,this.mixShearY=0,this.temp=new F,this.active=!1,!e)throw new Error("data cannot be null.");if(!n)throw new Error("skeleton cannot be null.");this.data=e,this.mixRotate=e.mixRotate,this.mixX=e.mixX,this.mixY=e.mixY,this.mixScaleX=e.mixScaleX,this.mixScaleY=e.mixScaleY,this.mixShearY=e.mixShearY,this.bones=new Array;for(var r=0;r<e.bones.length;r++){var a=n.findBone(e.bones[r].name);if(!a)throw new Error("Couldn't find bone ".concat(e.bones[r].name,"."));this.bones.push(a)}var s=n.findBone(e.target.name);if(!s)throw new Error("Couldn't find target bone ".concat(e.target.name,"."));this.target=s}return o(t,[{key:"isActive",value:function(){return this.active}},{key:"update",value:function(){0==this.mixRotate&&0==this.mixX&&0==this.mixY&&0==this.mixScaleX&&0==this.mixScaleY&&0==this.mixShearY||(this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld())}},{key:"applyAbsoluteWorld",value:function(){for(var t=this.mixRotate,e=this.mixX,n=this.mixY,r=this.mixScaleX,a=this.mixScaleY,i=this.mixShearY,s=0!=e||0!=n,o=this.target,h=o.a,l=o.b,u=o.c,c=o.d,f=h*c-l*u>0?I.degRad:-I.degRad,d=this.data.offsetRotation*f,v=this.data.offsetShearY*f,m=this.bones,p=0,g=m.length;p<g;p++){var y=m[p];if(0!=t){var w=y.a,k=y.b,b=y.c,x=y.d,E=Math.atan2(u,h)-Math.atan2(b,w)+d;E>I.PI?E-=I.PI2:E<-I.PI&&(E+=I.PI2),E*=t;var A=Math.cos(E),S=Math.sin(E);y.a=A*w-S*b,y.b=A*k-S*x,y.c=S*w+A*b,y.d=S*k+A*x}if(s){var T=this.temp;o.localToWorld(T.set(this.data.offsetX,this.data.offsetY)),y.worldX+=(T.x-y.worldX)*e,y.worldY+=(T.y-y.worldY)*n}if(0!=r){var R=Math.sqrt(y.a*y.a+y.c*y.c);0!=R&&(R=(R+(Math.sqrt(h*h+u*u)-R+this.data.offsetScaleX)*r)/R),y.a*=R,y.c*=R}if(0!=a){var C=Math.sqrt(y.b*y.b+y.d*y.d);0!=C&&(C=(C+(Math.sqrt(l*l+c*c)-C+this.data.offsetScaleY)*a)/C),y.b*=C,y.d*=C}if(i>0){var M=y.b,F=y.d,Y=Math.atan2(F,M),L=Math.atan2(c,l)-Math.atan2(u,h)-(Y-Math.atan2(y.c,y.a));L>I.PI?L-=I.PI2:L<-I.PI&&(L+=I.PI2),L=Y+(L+v)*i;var X=Math.sqrt(M*M+F*F);y.b=Math.cos(L)*X,y.d=Math.sin(L)*X}y.updateAppliedTransform()}}},{key:"applyRelativeWorld",value:function(){for(var t=this.mixRotate,e=this.mixX,n=this.mixY,r=this.mixScaleX,a=this.mixScaleY,i=this.mixShearY,s=0!=e||0!=n,o=this.target,h=o.a,l=o.b,u=o.c,c=o.d,f=h*c-l*u>0?I.degRad:-I.degRad,d=this.data.offsetRotation*f,v=this.data.offsetShearY*f,m=this.bones,p=0,g=m.length;p<g;p++){var y=m[p];if(0!=t){var w=y.a,k=y.b,b=y.c,x=y.d,E=Math.atan2(u,h)+d;E>I.PI?E-=I.PI2:E<-I.PI&&(E+=I.PI2),E*=t;var A=Math.cos(E),S=Math.sin(E);y.a=A*w-S*b,y.b=A*k-S*x,y.c=S*w+A*b,y.d=S*k+A*x}if(s){var T=this.temp;o.localToWorld(T.set(this.data.offsetX,this.data.offsetY)),y.worldX+=T.x*e,y.worldY+=T.y*n}if(0!=r){var R=(Math.sqrt(h*h+u*u)-1+this.data.offsetScaleX)*r+1;y.a*=R,y.c*=R}if(0!=a){var C=(Math.sqrt(l*l+c*c)-1+this.data.offsetScaleY)*a+1;y.b*=C,y.d*=C}if(i>0){var M=Math.atan2(c,l)-Math.atan2(u,h);M>I.PI?M-=I.PI2:M<-I.PI&&(M+=I.PI2);var F=y.b,Y=y.d;M=Math.atan2(Y,F)+(M-I.PI/2+v)*i;var L=Math.sqrt(F*F+Y*Y);y.b=Math.cos(M)*L,y.d=Math.sin(M)*L}y.updateAppliedTransform()}}},{key:"applyAbsoluteLocal",value:function(){for(var t=this.mixRotate,e=this.mixX,n=this.mixY,r=this.mixScaleX,a=this.mixScaleY,i=this.mixShearY,s=this.target,o=this.bones,h=0,l=o.length;h<l;h++){var u=o[h],c=u.arotation;if(0!=t){var f=s.arotation-c+this.data.offsetRotation;c+=(f-=360*(16384-(16384.499999999996-f/360|0)))*t}var d=u.ax,v=u.ay;d+=(s.ax-d+this.data.offsetX)*e,v+=(s.ay-v+this.data.offsetY)*n;var m=u.ascaleX,p=u.ascaleY;0!=r&&0!=m&&(m=(m+(s.ascaleX-m+this.data.offsetScaleX)*r)/m),0!=a&&0!=p&&(p=(p+(s.ascaleY-p+this.data.offsetScaleY)*a)/p);var g=u.ashearY;if(0!=i){var y=s.ashearY-g+this.data.offsetShearY;g+=(y-=360*(16384-(16384.499999999996-y/360|0)))*i}u.updateWorldTransformWith(d,v,c,m,p,u.ashearX,g)}}},{key:"applyRelativeLocal",value:function(){for(var t=this.mixRotate,e=this.mixX,n=this.mixY,r=this.mixScaleX,a=this.mixScaleY,i=this.mixShearY,s=this.target,o=this.bones,h=0,l=o.length;h<l;h++){var u=o[h],c=u.arotation+(s.arotation+this.data.offsetRotation)*t,f=u.ax+(s.ax+this.data.offsetX)*e,d=u.ay+(s.ay+this.data.offsetY)*n,v=u.ascaleX*((s.ascaleX-1+this.data.offsetScaleX)*r+1),m=u.ascaleY*((s.ascaleY-1+this.data.offsetScaleY)*a+1),p=u.ashearY+(s.ashearY+this.data.offsetShearY)*i;u.updateWorldTransformWith(f,d,c,v,m,u.ashearX,p)}}}]),t}(),Ce=function(){function t(e){if(i(this,t),this._updateCache=new Array,this.skin=null,this.scaleX=1,this._scaleY=1,this.x=0,this.y=0,!e)throw new Error("data cannot be null.");this.data=e,this.bones=new Array;for(var n=0;n<e.bones.length;n++){var r=e.bones[n],a=void 0;if(r.parent){var s=this.bones[r.parent.index];a=new ge(r,this,s),s.children.push(a)}else a=new ge(r,this,null);this.bones.push(a)}this.slots=new Array,this.drawOrder=new Array;for(var o=0;o<e.slots.length;o++){var h=e.slots[o],l=this.bones[h.boneData.index],u=new Te(h,l);this.slots.push(u),this.drawOrder.push(u)}this.ikConstraints=new Array;for(var c=0;c<e.ikConstraints.length;c++){var f=e.ikConstraints[c];this.ikConstraints.push(new Ee(f,this))}this.transformConstraints=new Array;for(var d=0;d<e.transformConstraints.length;d++){var v=e.transformConstraints[d];this.transformConstraints.push(new Re(v,this))}this.pathConstraints=new Array;for(var m=0;m<e.pathConstraints.length;m++){var p=e.pathConstraints[m];this.pathConstraints.push(new Se(p,this))}this.color=new E(1,1,1,1),this.updateCache()}return o(t,[{key:"scaleY",get:function(){return t.yDown?-this._scaleY:this._scaleY},set:function(t){this._scaleY=t}},{key:"updateCache",value:function(){var t=this._updateCache;t.length=0;for(var e=this.bones,n=0,r=e.length;n<r;n++){var a=e[n];a.sorted=a.data.skinRequired,a.active=!a.sorted}if(this.skin)for(var i=this.skin.bones,s=0,o=this.skin.bones.length;s<o;s++){var h=this.bones[i[s].index];do{h.sorted=!1,h.active=!0,h=h.parent}while(h)}var l=this.ikConstraints,u=this.transformConstraints,c=this.pathConstraints,f=l.length,d=u.length,v=c.length,m=f+d+v;t:for(var p=0;p<m;p++){for(var g=0;g<f;g++){var y=l[g];if(y.data.order==p){this.sortIkConstraint(y);continue t}}for(var w=0;w<d;w++){var k=u[w];if(k.data.order==p){this.sortTransformConstraint(k);continue t}}for(var b=0;b<v;b++){var x=c[b];if(x.data.order==p){this.sortPathConstraint(x);continue t}}}for(var E=0,I=e.length;E<I;E++)this.sortBone(e[E])}},{key:"sortIkConstraint",value:function(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&R.contains(this.skin.constraints,t.data,!0)),t.active){var e=t.target;this.sortBone(e);var n=t.bones,r=n[0];if(this.sortBone(r),1==n.length)this._updateCache.push(t),this.sortReset(r.children);else{var a=n[n.length-1];this.sortBone(a),this._updateCache.push(t),this.sortReset(r.children),a.sorted=!0}}}},{key:"sortPathConstraint",value:function(t){if(t.active=t.target.bone.isActive()&&(!t.data.skinRequired||this.skin&&R.contains(this.skin.constraints,t.data,!0)),t.active){var e=t.target,n=e.data.index,r=e.bone;this.skin&&this.sortPathConstraintAttachment(this.skin,n,r),this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,n,r);for(var a=0,i=this.data.skins.length;a<i;a++)this.sortPathConstraintAttachment(this.data.skins[a],n,r);var s=e.getAttachment();s instanceof he&&this.sortPathConstraintAttachmentWith(s,r);for(var o=t.bones,h=o.length,l=0;l<h;l++)this.sortBone(o[l]);this._updateCache.push(t);for(var u=0;u<h;u++)this.sortReset(o[u].children);for(var c=0;c<h;c++)o[c].sorted=!0}}},{key:"sortTransformConstraint",value:function(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&R.contains(this.skin.constraints,t.data,!0)),t.active){this.sortBone(t.target);var e=t.bones,n=e.length;if(t.data.local)for(var r=0;r<n;r++){var a=e[r];this.sortBone(a.parent),this.sortBone(a)}else for(var i=0;i<n;i++)this.sortBone(e[i]);this._updateCache.push(t);for(var s=0;s<n;s++)this.sortReset(e[s].children);for(var o=0;o<n;o++)e[o].sorted=!0}}},{key:"sortPathConstraintAttachment",value:function(t,e,n){var r=t.attachments[e];if(r)for(var a in r)this.sortPathConstraintAttachmentWith(r[a],n)}},{key:"sortPathConstraintAttachmentWith",value:function(t,e){if(t instanceof he){var n=t.bones;if(n)for(var r=this.bones,a=0,i=n.length;a<i;){var s=n[a++];for(s+=a;a<s;)this.sortBone(r[n[a++]])}else this.sortBone(e)}}},{key:"sortBone",value:function(t){if(t&&!t.sorted){var e=t.parent;e&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}}},{key:"sortReset",value:function(t){for(var e=0,n=t.length;e<n;e++){var r=t[e];r.active&&(r.sorted&&this.sortReset(r.children),r.sorted=!1)}}},{key:"updateWorldTransform",value:function(){for(var t=this.bones,e=0,n=t.length;e<n;e++){var r=t[e];r.ax=r.x,r.ay=r.y,r.arotation=r.rotation,r.ascaleX=r.scaleX,r.ascaleY=r.scaleY,r.ashearX=r.shearX,r.ashearY=r.shearY}for(var a=this._updateCache,i=0,s=a.length;i<s;i++)a[i].update()}},{key:"updateWorldTransformWith",value:function(t){var e=this.getRootBone();if(!e)throw new Error("Root bone must not be null.");var n=t.a,r=t.b,a=t.c,i=t.d;e.worldX=n*this.x+r*this.y+t.worldX,e.worldY=a*this.x+i*this.y+t.worldY;var s=e.rotation+90+e.shearY,o=I.cosDeg(e.rotation+e.shearX)*e.scaleX,h=I.cosDeg(s)*e.scaleY,l=I.sinDeg(e.rotation+e.shearX)*e.scaleX,u=I.sinDeg(s)*e.scaleY;e.a=(n*o+r*l)*this.scaleX,e.b=(n*h+r*u)*this.scaleX,e.c=(a*o+i*l)*this.scaleY,e.d=(a*h+i*u)*this.scaleY;for(var c=this._updateCache,f=0,d=c.length;f<d;f++){var v=c[f];v!=e&&v.update()}}},{key:"setToSetupPose",value:function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()}},{key:"setBonesToSetupPose",value:function(){for(var t=this.bones,e=0,n=t.length;e<n;e++)t[e].setToSetupPose();for(var r=this.ikConstraints,a=0,i=r.length;a<i;a++){var s=r[a];s.mix=s.data.mix,s.softness=s.data.softness,s.bendDirection=s.data.bendDirection,s.compress=s.data.compress,s.stretch=s.data.stretch}for(var o=this.transformConstraints,h=0,l=o.length;h<l;h++){var u=o[h],c=u.data;u.mixRotate=c.mixRotate,u.mixX=c.mixX,u.mixY=c.mixY,u.mixScaleX=c.mixScaleX,u.mixScaleY=c.mixScaleY,u.mixShearY=c.mixShearY}for(var f=this.pathConstraints,d=0,v=f.length;d<v;d++){var m=f[d],p=m.data;m.position=p.position,m.spacing=p.spacing,m.mixRotate=p.mixRotate,m.mixX=p.mixX,m.mixY=p.mixY}}},{key:"setSlotsToSetupPose",value:function(){var t=this.slots;R.arrayCopy(t,0,this.drawOrder,0,t.length);for(var e=0,n=t.length;e<n;e++)t[e].setToSetupPose()}},{key:"getRootBone",value:function(){return 0==this.bones.length?null:this.bones[0]}},{key:"findBone",value:function(t){if(!t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,r=e.length;n<r;n++){var a=e[n];if(a.data.name==t)return a}return null}},{key:"findSlot",value:function(t){if(!t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,r=e.length;n<r;n++){var a=e[n];if(a.data.name==t)return a}return null}},{key:"setSkinByName",value:function(t){var e=this.data.findSkin(t);if(!e)throw new Error("Skin not found: "+t);this.setSkin(e)}},{key:"setSkin",value:function(t){if(t!=this.skin){if(t)if(this.skin)t.attachAll(this,this.skin);else for(var e=this.slots,n=0,r=e.length;n<r;n++){var a=e[n],i=a.data.attachmentName;if(i){var s=t.getAttachment(n,i);s&&a.setAttachment(s)}}this.skin=t,this.updateCache()}}},{key:"getAttachmentByName",value:function(t,e){var n=this.data.findSlot(t);if(!n)throw new Error("Can't find slot with name ".concat(t));return this.getAttachment(n.index,e)}},{key:"getAttachment",value:function(t,e){if(!e)throw new Error("attachmentName cannot be null.");if(this.skin){var n=this.skin.getAttachment(t,e);if(n)return n}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null}},{key:"setAttachment",value:function(t,e){if(!t)throw new Error("slotName cannot be null.");for(var n=this.slots,r=0,a=n.length;r<a;r++){var i=n[r];if(i.data.name==t){var s=null;if(e&&!(s=this.getAttachment(r,e)))throw new Error("Attachment not found: "+e+", for slot: "+t);return void i.setAttachment(s)}}throw new Error("Slot not found: "+t)}},{key:"findIkConstraint",value:function(t){if(!t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,n=0,r=e.length;n<r;n++){var a=e[n];if(a.data.name==t)return a}return null}},{key:"findTransformConstraint",value:function(t){if(!t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,n=0,r=e.length;n<r;n++){var a=e[n];if(a.data.name==t)return a}return null}},{key:"findPathConstraint",value:function(t){if(!t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,n=0,r=e.length;n<r;n++){var a=e[n];if(a.data.name==t)return a}return null}},{key:"getBoundsRect",value:function(){var t=new F,e=new F;return this.getBounds(t,e),{x:t.x,y:t.y,width:e.x,height:e.y}}},{key:"getBounds",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Array(2);if(!t)throw new Error("offset cannot be null.");if(!e)throw new Error("size cannot be null.");for(var r=this.drawOrder,a=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY,h=0,l=r.length;h<l;h++){var u=r[h];if(u.bone.active){var c=0,f=null,d=u.getAttachment();if(d instanceof ue)c=8,f=R.setArraySize(n,c,0),d.computeWorldVertices(u,f,0,2);else if(d instanceof oe){var v=d;c=v.worldVerticesLength,f=R.setArraySize(n,c,0),v.computeWorldVertices(u,0,c,f,0,2)}if(f)for(var m=0,p=f.length;m<p;m+=2){var g=f[m],y=f[m+1];a=Math.min(a,g),i=Math.min(i,y),s=Math.max(s,g),o=Math.max(o,y)}}}t.set(a,i),e.set(s-a,o-i)}}]),t}();Ce.yDown=!1;var Me,Fe=function(){function t(){i(this,t),this.name=null,this.bones=new Array,this.slots=new Array,this.skins=new Array,this.defaultSkin=null,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.x=0,this.y=0,this.width=0,this.height=0,this.version=null,this.hash=null,this.fps=0,this.imagesPath=null,this.audioPath=null}return o(t,[{key:"findBone",value:function(t){if(!t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,r=e.length;n<r;n++){var a=e[n];if(a.name==t)return a}return null}},{key:"findSlot",value:function(t){if(!t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,r=e.length;n<r;n++){var a=e[n];if(a.name==t)return a}return null}},{key:"findSkin",value:function(t){if(!t)throw new Error("skinName cannot be null.");for(var e=this.skins,n=0,r=e.length;n<r;n++){var a=e[n];if(a.name==t)return a}return null}},{key:"findEvent",value:function(t){if(!t)throw new Error("eventDataName cannot be null.");for(var e=this.events,n=0,r=e.length;n<r;n++){var a=e[n];if(a.name==t)return a}return null}},{key:"findAnimation",value:function(t){if(!t)throw new Error("animationName cannot be null.");for(var e=this.animations,n=0,r=e.length;n<r;n++){var a=e[n];if(a.name==t)return a}return null}},{key:"findIkConstraint",value:function(t){if(!t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,n=0,r=e.length;n<r;n++){var a=e[n];if(a.name==t)return a}return null}},{key:"findTransformConstraint",value:function(t){if(!t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,n=0,r=e.length;n<r;n++){var a=e[n];if(a.name==t)return a}return null}},{key:"findPathConstraint",value:function(t){if(!t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,n=0,r=e.length;n<r;n++){var a=e[n];if(a.name==t)return a}return null}}]),t}(),Ye=o((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;i(this,t),this.slotIndex=e,this.name=n,this.attachment=r})),Le=function(){function t(e){if(i(this,t),this.attachments=new Array,this.bones=Array(),this.constraints=new Array,!e)throw new Error("name cannot be null.");this.name=e}return o(t,[{key:"setAttachment",value:function(t,e,n){if(!n)throw new Error("attachment cannot be null.");var r=this.attachments;t>=r.length&&(r.length=t+1),r[t]||(r[t]={}),r[t][e]=n}},{key:"addSkin",value:function(t){for(var e=0;e<t.bones.length;e++){for(var n=t.bones[e],r=!1,a=0;a<this.bones.length;a++)if(this.bones[a]==n){r=!0;break}r||this.bones.push(n)}for(var i=0;i<t.constraints.length;i++){for(var s=t.constraints[i],o=!1,h=0;h<this.constraints.length;h++)if(this.constraints[h]==s){o=!0;break}o||this.constraints.push(s)}for(var l=t.getAttachments(),u=0;u<l.length;u++){var c=l[u];this.setAttachment(c.slotIndex,c.name,c.attachment)}}},{key:"copySkin",value:function(t){for(var e=0;e<t.bones.length;e++){for(var n=t.bones[e],r=!1,a=0;a<this.bones.length;a++)if(this.bones[a]==n){r=!0;break}r||this.bones.push(n)}for(var i=0;i<t.constraints.length;i++){for(var s=t.constraints[i],o=!1,h=0;h<this.constraints.length;h++)if(this.constraints[h]==s){o=!0;break}o||this.constraints.push(s)}for(var l=t.getAttachments(),u=0;u<l.length;u++){var c=l[u];c.attachment&&(c.attachment instanceof oe?(c.attachment=c.attachment.newLinkedMesh(),this.setAttachment(c.slotIndex,c.name,c.attachment)):(c.attachment=c.attachment.copy(),this.setAttachment(c.slotIndex,c.name,c.attachment)))}}},{key:"getAttachment",value:function(t,e){var n=this.attachments[t];return n?n[e]:null}},{key:"removeAttachment",value:function(t,e){var n=this.attachments[t];n&&delete n[e]}},{key:"getAttachments",value:function(){for(var t=new Array,e=0;e<this.attachments.length;e++){var n=this.attachments[e];if(n)for(var r in n){var a=n[r];a&&t.push(new Ye(e,r,a))}}return t}},{key:"getAttachmentsForSlot",value:function(t,e){var n=this.attachments[t];if(n)for(var r in n){var a=n[r];a&&e.push(new Ye(t,r,a))}}},{key:"clear",value:function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0}},{key:"attachAll",value:function(t,e){for(var n=0,r=0;r<t.slots.length;r++){var a=t.slots[r],i=a.getAttachment();if(i&&n<e.attachments.length){var s=e.attachments[n];for(var o in s){if(i==s[o]){var h=this.getAttachment(n,o);h&&a.setAttachment(h);break}}}n++}}}]),t}(),Xe=o((function t(e,n,r){if(i(this,t),this.index=0,this.color=new E(1,1,1,1),this.darkColor=null,this.attachmentName=null,this.blendMode=Me.Normal,e<0)throw new Error("index must be >= 0.");if(!n)throw new Error("name cannot be null.");if(!r)throw new Error("boneData cannot be null.");this.index=e,this.name=n,this.boneData=r}));!function(t){t[t.Normal=0]="Normal",t[t.Additive=1]="Additive",t[t.Multiply=2]="Multiply",t[t.Screen=3]="Screen"}(Me||(Me={}));var Ne,Pe=function(t){l(n,t);var e=d(n);function n(t){var r;return i(this,n),(r=e.call(this,t,0,!1)).bones=new Array,r._target=null,r.mixRotate=0,r.mixX=0,r.mixY=0,r.mixScaleX=0,r.mixScaleY=0,r.mixShearY=0,r.offsetRotation=0,r.offsetX=0,r.offsetY=0,r.offsetScaleX=0,r.offsetScaleY=0,r.offsetShearY=0,r.relative=!1,r.local=!1,r}return o(n,[{key:"target",get:function(){if(this._target)return this._target;throw new Error("BoneData not set.")},set:function(t){this._target=t}}]),n}(ye),_e=function(){function t(e){i(this,t),this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=e}return o(t,[{key:"readSkeletonData",value:function(t){var e=this.scale,n=new Fe;n.name="";var r=new Oe(t),a=r.readInt32(),i=r.readInt32();n.hash=0==i&&0==a?null:i.toString(16)+a.toString(16),n.version=r.readString(),n.x=r.readFloat(),n.y=r.readFloat(),n.width=r.readFloat(),n.height=r.readFloat();var s=r.readBoolean();s&&(n.fps=r.readFloat(),n.imagesPath=r.readString(),n.audioPath=r.readString());var o=0;o=r.readInt(!0);for(var h=0;h<o;h++){var l=r.readString();if(!l)throw new Error("String in string table must not be null.");r.strings.push(l)}o=r.readInt(!0);for(var u=0;u<o;u++){var c=r.readString();if(!c)throw new Error("Bone name must not be null.");var f=0==u?null:n.bones[r.readInt(!0)],d=new de(u,c,f);d.rotation=r.readFloat(),d.x=r.readFloat()*e,d.y=r.readFloat()*e,d.scaleX=r.readFloat(),d.scaleY=r.readFloat(),d.shearX=r.readFloat(),d.shearY=r.readFloat(),d.length=r.readFloat()*e,d.transformMode=r.readInt(!0),d.skinRequired=r.readBoolean(),s&&E.rgba8888ToColor(d.color,r.readInt32()),n.bones.push(d)}o=r.readInt(!0);for(var v=0;v<o;v++){var m=r.readString();if(!m)throw new Error("Slot name must not be null.");var p=n.bones[r.readInt(!0)],g=new Xe(v,m,p);E.rgba8888ToColor(g.color,r.readInt32());var y=r.readInt32();-1!=y&&E.rgb888ToColor(g.darkColor=new E,y),g.attachmentName=r.readStringRef(),g.blendMode=r.readInt(!0),n.slots.push(g)}o=r.readInt(!0);for(var w,k=0;k<o;k++){var b=r.readString();if(!b)throw new Error("IK constraint data name must not be null.");var x=new Ie(b);x.order=r.readInt(!0),x.skinRequired=r.readBoolean(),w=r.readInt(!0);for(var I=0;I<w;I++)x.bones.push(n.bones[r.readInt(!0)]);x.target=n.bones[r.readInt(!0)],x.mix=r.readFloat(),x.softness=r.readFloat()*e,x.bendDirection=r.readByte(),x.compress=r.readBoolean(),x.stretch=r.readBoolean(),x.uniform=r.readBoolean(),n.ikConstraints.push(x)}o=r.readInt(!0);for(var A,S=0;S<o;S++){var T=r.readString();if(!T)throw new Error("Transform constraint data name must not be null.");var C=new Pe(T);C.order=r.readInt(!0),C.skinRequired=r.readBoolean(),A=r.readInt(!0);for(var M=0;M<A;M++)C.bones.push(n.bones[r.readInt(!0)]);C.target=n.bones[r.readInt(!0)],C.local=r.readBoolean(),C.relative=r.readBoolean(),C.offsetRotation=r.readFloat(),C.offsetX=r.readFloat()*e,C.offsetY=r.readFloat()*e,C.offsetScaleX=r.readFloat(),C.offsetScaleY=r.readFloat(),C.offsetShearY=r.readFloat(),C.mixRotate=r.readFloat(),C.mixX=r.readFloat(),C.mixY=r.readFloat(),C.mixScaleX=r.readFloat(),C.mixScaleY=r.readFloat(),C.mixShearY=r.readFloat(),n.transformConstraints.push(C)}o=r.readInt(!0);for(var F,Y=0;Y<o;Y++){var L=r.readString();if(!L)throw new Error("Path constraint data name must not be null.");var X=new Ae(L);X.order=r.readInt(!0),X.skinRequired=r.readBoolean(),F=r.readInt(!0);for(var N=0;N<F;N++)X.bones.push(n.bones[r.readInt(!0)]);X.target=n.slots[r.readInt(!0)],X.positionMode=r.readInt(!0),X.spacingMode=r.readInt(!0),X.rotateMode=r.readInt(!0),X.offsetRotation=r.readFloat(),X.position=r.readFloat(),X.positionMode==ve.Fixed&&(X.position*=e),X.spacing=r.readFloat(),X.spacingMode!=me.Length&&X.spacingMode!=me.Fixed||(X.spacing*=e),X.mixRotate=r.readFloat(),X.mixX=r.readFloat(),X.mixY=r.readFloat(),n.pathConstraints.push(X)}var P=this.readSkin(r,n,!0,s);P&&(n.defaultSkin=P,n.skins.push(P));var _=n.skins.length;for(R.setArraySize(n.skins,o=_+r.readInt(!0));_<o;_++){var O=this.readSkin(r,n,!1,s);if(!O)throw new Error("readSkin() should not have returned null.");n.skins[_]=O}o=this.linkedMeshes.length;for(var B=0;B<o;B++){var D=this.linkedMeshes[B],V=D.skin?n.findSkin(D.skin):n.defaultSkin;if(!V)throw new Error("Not skin found for linked mesh.");if(!D.parent)throw new Error("Linked mesh parent must not be null");var U=V.getAttachment(D.slotIndex,D.parent);if(!U)throw new Error("Parent mesh not found: ".concat(D.parent));D.mesh.timelineAttachment=D.inheritTimeline?U:D.mesh,D.mesh.setParentMesh(U),null!=D.mesh.region&&D.mesh.updateRegion()}this.linkedMeshes.length=0,o=r.readInt(!0);for(var q=0;q<o;q++){var W=r.readStringRef();if(!W)throw new Error;var j=new xe(W);j.intValue=r.readInt(!1),j.floatValue=r.readFloat(),j.stringValue=r.readString(),j.audioPath=r.readString(),j.audioPath&&(j.volume=r.readFloat(),j.balance=r.readFloat()),n.events.push(j)}o=r.readInt(!0);for(var G=0;G<o;G++){var z=r.readString();if(!z)throw new Error("Animatio name must not be null.");n.animations.push(this.readAnimation(r,z,n))}return n}},{key:"readSkin",value:function(t,e,n,r){var a=null,i=0;if(n){if(0==(i=t.readInt(!0)))return null;a=new Le("default")}else{var s=t.readStringRef();if(!s)throw new Error("Skin name must not be null.");(a=new Le(s)).bones.length=t.readInt(!0);for(var o=0,h=a.bones.length;o<h;o++)a.bones[o]=e.bones[t.readInt(!0)];for(var l=0,u=t.readInt(!0);l<u;l++)a.constraints.push(e.ikConstraints[t.readInt(!0)]);for(var c=0,f=t.readInt(!0);c<f;c++)a.constraints.push(e.transformConstraints[t.readInt(!0)]);for(var d=0,v=t.readInt(!0);d<v;d++)a.constraints.push(e.pathConstraints[t.readInt(!0)]);i=t.readInt(!0)}for(var m=0;m<i;m++)for(var p=t.readInt(!0),g=0,y=t.readInt(!0);g<y;g++){var w=t.readStringRef();if(!w)throw new Error("Attachment name must not be null");var k=this.readAttachment(t,e,a,p,w,r);k&&a.setAttachment(p,w,k)}return a}},{key:"readAttachment",value:function(t,e,n,r,a,i){var s=this.scale,o=t.readStringRef();switch(o||(o=a),t.readByte()){case Ne.Region:var h=t.readStringRef(),l=t.readFloat(),u=t.readFloat(),c=t.readFloat(),f=t.readFloat(),d=t.readFloat(),v=t.readFloat(),m=t.readFloat(),p=t.readInt32(),g=this.readSequence(t);h||(h=o);var y=this.attachmentLoader.newRegionAttachment(n,o,h,g);return y?(y.path=h,y.x=u*s,y.y=c*s,y.scaleX=f,y.scaleY=d,y.rotation=l,y.width=v*s,y.height=m*s,E.rgba8888ToColor(y.color,p),y.sequence=g,null==g&&y.updateRegion(),y):null;case Ne.BoundingBox:var w=t.readInt(!0),k=this.readVertices(t,w),b=i?t.readInt32():0,x=this.attachmentLoader.newBoundingBoxAttachment(n,o);return x?(x.worldVerticesLength=w<<1,x.vertices=k.vertices,x.bones=k.bones,i&&E.rgba8888ToColor(x.color,b),x):null;case Ne.Mesh:var I=t.readStringRef(),A=t.readInt32(),S=t.readInt(!0),T=this.readFloatArray(t,S<<1,1),C=this.readShortArray(t),M=this.readVertices(t,S),F=t.readInt(!0),Y=this.readSequence(t),L=[],X=0,N=0;i&&(L=this.readShortArray(t),X=t.readFloat(),N=t.readFloat()),I||(I=o);var P=this.attachmentLoader.newMeshAttachment(n,o,I,Y);return P?(P.path=I,E.rgba8888ToColor(P.color,A),P.bones=M.bones,P.vertices=M.vertices,P.worldVerticesLength=S<<1,P.triangles=C,P.regionUVs=T,null==Y&&P.updateRegion(),P.hullLength=F<<1,P.sequence=Y,i&&(P.edges=L,P.width=X*s,P.height=N*s),P):null;case Ne.LinkedMesh:var _=t.readStringRef(),O=t.readInt32(),B=t.readStringRef(),D=t.readStringRef(),V=t.readBoolean(),U=this.readSequence(t),q=0,W=0;i&&(q=t.readFloat(),W=t.readFloat()),_||(_=o);var j=this.attachmentLoader.newMeshAttachment(n,o,_,U);return j?(j.path=_,E.rgba8888ToColor(j.color,O),j.sequence=U,i&&(j.width=q*s,j.height=W*s),this.linkedMeshes.push(new Be(j,B,r,D,V)),j):null;case Ne.Path:for(var G=t.readBoolean(),z=t.readBoolean(),H=t.readInt(!0),$=this.readVertices(t,H),J=R.newArray(H/3,0),K=0,Q=J.length;K<Q;K++)J[K]=t.readFloat()*s;var Z=i?t.readInt32():0,tt=this.attachmentLoader.newPathAttachment(n,o);return tt?(tt.closed=G,tt.constantSpeed=z,tt.worldVerticesLength=H<<1,tt.vertices=$.vertices,tt.bones=$.bones,tt.lengths=J,i&&E.rgba8888ToColor(tt.color,Z),tt):null;case Ne.Point:var et=t.readFloat(),nt=t.readFloat(),rt=t.readFloat(),at=i?t.readInt32():0,it=this.attachmentLoader.newPointAttachment(n,o);return it?(it.x=nt*s,it.y=rt*s,it.rotation=et,i&&E.rgba8888ToColor(it.color,at),it):null;case Ne.Clipping:var st=t.readInt(!0),ot=t.readInt(!0),ht=this.readVertices(t,ot),lt=i?t.readInt32():0,ut=this.attachmentLoader.newClippingAttachment(n,o);return ut?(ut.endSlot=e.slots[st],ut.worldVerticesLength=ot<<1,ut.vertices=ht.vertices,ut.bones=ht.bones,i&&E.rgba8888ToColor(ut.color,lt),ut):null}return null}},{key:"readSequence",value:function(t){if(!t.readBoolean())return null;var e=new _(t.readInt(!0));return e.start=t.readInt(!0),e.digits=t.readInt(!0),e.setupIndex=t.readInt(!0),e}},{key:"readVertices",value:function(t,e){var n=this.scale,r=e<<1,a=new De;if(!t.readBoolean())return a.vertices=this.readFloatArray(t,r,n),a;for(var i=new Array,s=new Array,o=0;o<e;o++){var h=t.readInt(!0);s.push(h);for(var l=0;l<h;l++)s.push(t.readInt(!0)),i.push(t.readFloat()*n),i.push(t.readFloat()*n),i.push(t.readFloat())}return a.vertices=R.toFloatArray(i),a.bones=s,a}},{key:"readFloatArray",value:function(t,e,n){var r=new Array(e);if(1==n)for(var a=0;a<e;a++)r[a]=t.readFloat();else for(var i=0;i<e;i++)r[i]=t.readFloat()*n;return r}},{key:"readShortArray",value:function(t){for(var e=t.readInt(!0),n=new Array(e),r=0;r<e;r++)n[r]=t.readShort();return n}},{key:"readAnimation",value:function(t,e,n){t.readInt(!0);var r=new Array,a=this.scale;new E,new E;for(var i=0,s=t.readInt(!0);i<s;i++)for(var o=t.readInt(!0),h=0,l=t.readInt(!0);h<l;h++){var u=t.readByte(),c=t.readInt(!0),f=c-1;switch(u){case en:for(var d=new Tt(c,o),v=0;v<c;v++)d.setFrame(v,t.readFloat(),t.readStringRef());r.push(d);break;case nn:for(var m=t.readInt(!0),p=new xt(c,m,o),g=t.readFloat(),y=t.readUnsignedByte()/255,w=t.readUnsignedByte()/255,k=t.readUnsignedByte()/255,b=t.readUnsignedByte()/255,x=0,I=0;p.setFrame(x,g,y,w,k,b),x!=f;x++){var A=t.readFloat(),S=t.readUnsignedByte()/255,T=t.readUnsignedByte()/255,C=t.readUnsignedByte()/255,M=t.readUnsignedByte()/255;switch(t.readByte()){case dn:p.setStepped(x);break;case vn:qe(t,p,I++,x,0,g,A,y,S,1),qe(t,p,I++,x,1,g,A,w,T,1),qe(t,p,I++,x,2,g,A,k,C,1),qe(t,p,I++,x,3,g,A,b,M,1)}g=A,y=S,w=T,k=C,b=M}r.push(p);break;case rn:for(var F=t.readInt(!0),Y=new Et(c,F,o),L=t.readFloat(),X=t.readUnsignedByte()/255,N=t.readUnsignedByte()/255,P=t.readUnsignedByte()/255,_=0,O=0;Y.setFrame(_,L,X,N,P),_!=f;_++){var B=t.readFloat(),U=t.readUnsignedByte()/255,q=t.readUnsignedByte()/255,W=t.readUnsignedByte()/255;switch(t.readByte()){case dn:Y.setStepped(_);break;case vn:qe(t,Y,O++,_,0,L,B,X,U,1),qe(t,Y,O++,_,1,L,B,N,q,1),qe(t,Y,O++,_,2,L,B,P,W,1)}L=B,X=U,N=q,P=W}r.push(Y);break;case an:for(var j=t.readInt(!0),G=new At(c,j,o),z=t.readFloat(),H=t.readUnsignedByte()/255,$=t.readUnsignedByte()/255,J=t.readUnsignedByte()/255,K=t.readUnsignedByte()/255,Q=t.readUnsignedByte()/255,Z=t.readUnsignedByte()/255,tt=t.readUnsignedByte()/255,et=0,nt=0;G.setFrame(et,z,H,$,J,K,Q,Z,tt),et!=f;et++){var rt=t.readFloat(),at=t.readUnsignedByte()/255,it=t.readUnsignedByte()/255,st=t.readUnsignedByte()/255,ot=t.readUnsignedByte()/255,ht=t.readUnsignedByte()/255,lt=t.readUnsignedByte()/255,ut=t.readUnsignedByte()/255;switch(t.readByte()){case dn:G.setStepped(et);break;case vn:qe(t,G,nt++,et,0,z,rt,H,at,1),qe(t,G,nt++,et,1,z,rt,$,it,1),qe(t,G,nt++,et,2,z,rt,J,st,1),qe(t,G,nt++,et,3,z,rt,K,ot,1),qe(t,G,nt++,et,4,z,rt,Q,ht,1),qe(t,G,nt++,et,5,z,rt,Z,lt,1),qe(t,G,nt++,et,6,z,rt,tt,ut,1)}z=rt,H=at,$=it,J=st,K=ot,Q=ht,Z=lt,tt=ut}r.push(G);break;case sn:for(var ct=t.readInt(!0),_t=new St(c,ct,o),Ot=t.readFloat(),Bt=t.readUnsignedByte()/255,Dt=t.readUnsignedByte()/255,Vt=t.readUnsignedByte()/255,Ut=t.readUnsignedByte()/255,qt=t.readUnsignedByte()/255,Wt=t.readUnsignedByte()/255,jt=0,Gt=0;_t.setFrame(jt,Ot,Bt,Dt,Vt,Ut,qt,Wt),jt!=f;jt++){var zt=t.readFloat(),Ht=t.readUnsignedByte()/255,$t=t.readUnsignedByte()/255,Jt=t.readUnsignedByte()/255,Kt=t.readUnsignedByte()/255,Qt=t.readUnsignedByte()/255,Zt=t.readUnsignedByte()/255;switch(t.readByte()){case dn:_t.setStepped(jt);break;case vn:qe(t,_t,Gt++,jt,0,Ot,zt,Bt,Ht,1),qe(t,_t,Gt++,jt,1,Ot,zt,Dt,$t,1),qe(t,_t,Gt++,jt,2,Ot,zt,Vt,Jt,1),qe(t,_t,Gt++,jt,3,Ot,zt,Ut,Kt,1),qe(t,_t,Gt++,jt,4,Ot,zt,qt,Qt,1),qe(t,_t,Gt++,jt,5,Ot,zt,Wt,Zt,1)}Ot=zt,Bt=Ht,Dt=$t,Vt=Jt,Ut=Kt,qt=Qt,Wt=Zt}r.push(_t);break;case on:for(var te=new It(c,t.readInt(!0),o),ee=t.readFloat(),ne=t.readUnsignedByte()/255,re=0,ae=0;te.setFrame(re,ee,ne),re!=f;re++){var ie=t.readFloat(),se=t.readUnsignedByte()/255;switch(t.readByte()){case dn:te.setStepped(re);break;case vn:qe(t,te,ae++,re,0,ee,ie,ne,se,1)}ee=ie,ne=se}r.push(te)}}for(var oe=0,he=t.readInt(!0);oe<he;oe++)for(var le=t.readInt(!0),ue=0,ce=t.readInt(!0);ue<ce;ue++){var fe=t.readByte(),de=t.readInt(!0),pe=t.readInt(!0);switch(fe){case je:r.push(Ve(t,new ft(de,pe,le),1));break;case Ge:r.push(Ue(t,new dt(de,pe,le),a));break;case ze:r.push(Ve(t,new vt(de,pe,le),a));break;case He:r.push(Ve(t,new mt(de,pe,le),a));break;case $e:r.push(Ue(t,new pt(de,pe,le),1));break;case Je:r.push(Ve(t,new gt(de,pe,le),1));break;case Ke:r.push(Ve(t,new yt(de,pe,le),1));break;case Qe:r.push(Ue(t,new wt(de,pe,le),1));break;case Ze:r.push(Ve(t,new kt(de,pe,le),1));break;case tn:r.push(Ve(t,new bt(de,pe,le),1))}}for(var ge=0,ye=t.readInt(!0);ge<ye;ge++){for(var we=t.readInt(!0),ke=t.readInt(!0),xe=ke-1,Ee=new Ft(ke,t.readInt(!0),we),Ie=t.readFloat(),Ae=t.readFloat(),Se=t.readFloat()*a,Te=0,Re=0;Ee.setFrame(Te,Ie,Ae,Se,t.readByte(),t.readBoolean(),t.readBoolean()),Te!=xe;Te++){var Ce=t.readFloat(),Me=t.readFloat(),Fe=t.readFloat()*a;switch(t.readByte()){case dn:Ee.setStepped(Te);break;case vn:qe(t,Ee,Re++,Te,0,Ie,Ce,Ae,Me,1),qe(t,Ee,Re++,Te,1,Ie,Ce,Se,Fe,a)}Ie=Ce,Ae=Me,Se=Fe}r.push(Ee)}for(var Ye=0,Le=t.readInt(!0);Ye<Le;Ye++){for(var Xe=t.readInt(!0),Ne=t.readInt(!0),Pe=Ne-1,_e=new Yt(Ne,t.readInt(!0),Xe),Oe=t.readFloat(),Be=t.readFloat(),De=t.readFloat(),We=t.readFloat(),mn=t.readFloat(),pn=t.readFloat(),gn=t.readFloat(),yn=0,wn=0;_e.setFrame(yn,Oe,Be,De,We,mn,pn,gn),yn!=Pe;yn++){var kn=t.readFloat(),bn=t.readFloat(),xn=t.readFloat(),En=t.readFloat(),In=t.readFloat(),An=t.readFloat(),Sn=t.readFloat();switch(t.readByte()){case dn:_e.setStepped(yn);break;case vn:qe(t,_e,wn++,yn,0,Oe,kn,Be,bn,1),qe(t,_e,wn++,yn,1,Oe,kn,De,xn,1),qe(t,_e,wn++,yn,2,Oe,kn,We,En,1),qe(t,_e,wn++,yn,3,Oe,kn,mn,In,1),qe(t,_e,wn++,yn,4,Oe,kn,pn,An,1),qe(t,_e,wn++,yn,5,Oe,kn,gn,Sn,1)}Oe=kn,Be=bn,De=xn,We=En,mn=In,pn=An,gn=Sn}r.push(_e)}for(var Tn=0,Rn=t.readInt(!0);Tn<Rn;Tn++)for(var Cn=t.readInt(!0),Mn=n.pathConstraints[Cn],Fn=0,Yn=t.readInt(!0);Fn<Yn;Fn++)switch(t.readByte()){case un:r.push(Ve(t,new Lt(t.readInt(!0),t.readInt(!0),Cn),Mn.positionMode==ve.Fixed?a:1));break;case cn:r.push(Ve(t,new Xt(t.readInt(!0),t.readInt(!0),Cn),Mn.spacingMode==me.Length||Mn.spacingMode==me.Fixed?a:1));break;case fn:for(var Ln=new Nt(t.readInt(!0),t.readInt(!0),Cn),Xn=t.readFloat(),Nn=t.readFloat(),Pn=t.readFloat(),_n=t.readFloat(),On=0,Bn=0,Dn=Ln.getFrameCount()-1;Ln.setFrame(On,Xn,Nn,Pn,_n),On!=Dn;On++){var Vn=t.readFloat(),Un=t.readFloat(),qn=t.readFloat(),Wn=t.readFloat();switch(t.readByte()){case dn:Ln.setStepped(On);break;case vn:qe(t,Ln,Bn++,On,0,Xn,Vn,Nn,Un,1),qe(t,Ln,Bn++,On,1,Xn,Vn,Pn,qn,1),qe(t,Ln,Bn++,On,2,Xn,Vn,_n,Wn,1)}Xn=Vn,Nn=Un,Pn=qn,_n=Wn}r.push(Ln)}for(var jn=0,Gn=t.readInt(!0);jn<Gn;jn++)for(var zn=n.skins[t.readInt(!0)],Hn=0,$n=t.readInt(!0);Hn<$n;Hn++)for(var Jn=t.readInt(!0),Kn=0,Qn=t.readInt(!0);Kn<Qn;Kn++){var Zn=t.readStringRef();if(!Zn)throw new Error("attachmentName must not be null.");var tr=zn.getAttachment(Jn,Zn),er=t.readByte(),nr=t.readInt(!0),rr=nr-1;switch(er){case hn:for(var ar=tr,ir=ar.bones,sr=ar.vertices,or=ir?sr.length/3*2:sr.length,hr=t.readInt(!0),lr=new Rt(nr,hr,Jn,ar),ur=t.readFloat(),cr=0,fr=0;;cr++){var dr=void 0,vr=t.readInt(!0);if(0==vr)dr=ir?R.newFloatArray(or):sr;else{dr=R.newFloatArray(or);var mr=t.readInt(!0);if(vr+=mr,1==a)for(var pr=mr;pr<vr;pr++)dr[pr]=t.readFloat();else for(var gr=mr;gr<vr;gr++)dr[gr]=t.readFloat()*a;if(!ir)for(var yr=0,wr=dr.length;yr<wr;yr++)dr[yr]+=sr[yr]}if(lr.setFrame(cr,ur,dr),cr==rr)break;var kr=t.readFloat();switch(t.readByte()){case dn:lr.setStepped(cr);break;case vn:qe(t,lr,fr++,cr,0,ur,kr,0,1,1)}ur=kr}r.push(lr);break;case ln:for(var br=new Pt(nr,Jn,tr),xr=0;xr<nr;xr++){var Er=t.readFloat(),Ir=t.readInt32();br.setFrame(xr,Er,D[15&Ir],Ir>>4,t.readFloat())}r.push(br)}}var Ar=t.readInt(!0);if(Ar>0){for(var Sr=new Mt(Ar),Tr=n.slots.length,Rr=0;Rr<Ar;Rr++){for(var Cr=t.readFloat(),Mr=t.readInt(!0),Fr=R.newArray(Tr,0),Yr=Tr-1;Yr>=0;Yr--)Fr[Yr]=-1;for(var Lr=R.newArray(Tr-Mr,0),Xr=0,Nr=0,Pr=0;Pr<Mr;Pr++){for(var _r=t.readInt(!0);Xr!=_r;)Lr[Nr++]=Xr++;Fr[Xr+t.readInt(!0)]=Xr++}for(;Xr<Tr;)Lr[Nr++]=Xr++;for(var Or=Tr-1;Or>=0;Or--)-1==Fr[Or]&&(Fr[Or]=Lr[--Nr]);Sr.setFrame(Rr,Cr,Fr)}r.push(Sr)}var Br=t.readInt(!0);if(Br>0){for(var Dr=new Ct(Br),Vr=0;Vr<Br;Vr++){var Ur=t.readFloat(),qr=n.events[t.readInt(!0)],Wr=new be(Ur,qr);Wr.intValue=t.readInt(!1),Wr.floatValue=t.readFloat(),Wr.stringValue=t.readBoolean()?t.readString():qr.stringValue,Wr.data.audioPath&&(Wr.volume=t.readFloat(),Wr.balance=t.readFloat()),Dr.setFrame(Vr,Wr)}r.push(Dr)}for(var jr=0,Gr=0,zr=r.length;Gr<zr;Gr++)jr=Math.max(jr,r[Gr].getDuration());return new V(e,r,jr)}}]),t}(),Oe=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Array,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new DataView(e.buffer);i(this,t),this.strings=n,this.index=r,this.buffer=a}return o(t,[{key:"readByte",value:function(){return this.buffer.getInt8(this.index++)}},{key:"readUnsignedByte",value:function(){return this.buffer.getUint8(this.index++)}},{key:"readShort",value:function(){var t=this.buffer.getInt16(this.index);return this.index+=2,t}},{key:"readInt32",value:function(){var t=this.buffer.getInt32(this.index);return this.index+=4,t}},{key:"readInt",value:function(t){var e=this.readByte(),n=127&e;return 0!=(128&e)&&(n|=(127&(e=this.readByte()))<<7,0!=(128&e)&&(n|=(127&(e=this.readByte()))<<14,0!=(128&e)&&(n|=(127&(e=this.readByte()))<<21,0!=(128&e)&&(n|=(127&(e=this.readByte()))<<28)))),t?n:n>>>1^-(1&n)}},{key:"readStringRef",value:function(){var t=this.readInt(!0);return 0==t?null:this.strings[t-1]}},{key:"readString",value:function(){var t=this.readInt(!0);switch(t){case 0:return null;case 1:return""}t--;for(var e="",n=0;n<t;){var r=this.readUnsignedByte();switch(r>>4){case 12:case 13:e+=String.fromCharCode((31&r)<<6|63&this.readByte()),n+=2;break;case 14:e+=String.fromCharCode((15&r)<<12|(63&this.readByte())<<6|63&this.readByte()),n+=3;break;default:e+=String.fromCharCode(r),n++}}return e}},{key:"readFloat",value:function(){var t=this.buffer.getFloat32(this.index);return this.index+=4,t}},{key:"readBoolean",value:function(){return 0!=this.readByte()}}]),t}(),Be=o((function t(e,n,r,a,s){i(this,t),this.mesh=e,this.skin=n,this.slotIndex=r,this.parent=a,this.inheritTimeline=s})),De=o((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;i(this,t),this.bones=e,this.vertices=n}));function Ve(t,e,n){for(var r=t.readFloat(),a=t.readFloat()*n,i=0,s=0,o=e.getFrameCount()-1;e.setFrame(i,r,a),i!=o;i++){var h=t.readFloat(),l=t.readFloat()*n;switch(t.readByte()){case dn:e.setStepped(i);break;case vn:qe(t,e,s++,i,0,r,h,a,l,n)}r=h,a=l}return e}function Ue(t,e,n){for(var r=t.readFloat(),a=t.readFloat()*n,i=t.readFloat()*n,s=0,o=0,h=e.getFrameCount()-1;e.setFrame(s,r,a,i),s!=h;s++){var l=t.readFloat(),u=t.readFloat()*n,c=t.readFloat()*n;switch(t.readByte()){case dn:e.setStepped(s);break;case vn:qe(t,e,o++,s,0,r,l,a,u,n),qe(t,e,o++,s,1,r,l,i,c,n)}r=l,a=u,i=c}return e}function qe(t,e,n,r,a,i,s,o,h,l){e.setBezier(n,r,a,i,o,t.readFloat(),t.readFloat()*l,t.readFloat(),t.readFloat()*l,s,h)}!function(t){t[t.Region=0]="Region",t[t.BoundingBox=1]="BoundingBox",t[t.Mesh=2]="Mesh",t[t.LinkedMesh=3]="LinkedMesh",t[t.Path=4]="Path",t[t.Point=5]="Point",t[t.Clipping=6]="Clipping"}(Ne||(Ne={}));var We,je=0,Ge=1,ze=2,He=3,$e=4,Je=5,Ke=6,Qe=7,Ze=8,tn=9,en=0,nn=1,rn=2,an=3,sn=4,on=5,hn=0,ln=1,un=0,cn=1,fn=2,dn=1,vn=2,mn=function(){function t(){i(this,t),this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new M((function(){return R.newFloatArray(16)}))}return o(t,[{key:"update",value:function(t,e){if(!t)throw new Error("skeleton cannot be null.");var n=this.boundingBoxes,r=this.polygons,a=this.polygonPool,i=t.slots,s=i.length;n.length=0,a.freeAll(r),r.length=0;for(var o=0;o<s;o++){var h=i[o];if(h.bone.active){var l=h.getAttachment();if(l instanceof Qt){var u=l;n.push(u);var c=a.obtain();c.length!=u.worldVerticesLength&&(c=R.newFloatArray(u.worldVerticesLength)),r.push(c),u.computeWorldVertices(h,0,u.worldVerticesLength,c,0,2)}}}e?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)}},{key:"aabbCompute",value:function(){for(var t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,r=Number.NEGATIVE_INFINITY,a=this.polygons,i=0,s=a.length;i<s;i++)for(var o=a[i],h=o,l=0,u=o.length;l<u;l+=2){var c=h[l],f=h[l+1];t=Math.min(t,c),e=Math.min(e,f),n=Math.max(n,c),r=Math.max(r,f)}this.minX=t,this.minY=e,this.maxX=n,this.maxY=r}},{key:"aabbContainsPoint",value:function(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY}},{key:"aabbIntersectsSegment",value:function(t,e,n,r){var a=this.minX,i=this.minY,s=this.maxX,o=this.maxY;if(t<=a&&n<=a||e<=i&&r<=i||t>=s&&n>=s||e>=o&&r>=o)return!1;var h=(r-e)/(n-t),l=h*(a-t)+e;if(l>i&&l<o)return!0;if((l=h*(s-t)+e)>i&&l<o)return!0;var u=(i-e)/h+t;return u>a&&u<s||(u=(o-e)/h+t)>a&&u<s}},{key:"aabbIntersectsSkeleton",value:function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY}},{key:"containsPoint",value:function(t,e){for(var n=this.polygons,r=0,a=n.length;r<a;r++)if(this.containsPointPolygon(n[r],t,e))return this.boundingBoxes[r];return null}},{key:"containsPointPolygon",value:function(t,e,n){for(var r=t,a=t.length,i=a-2,s=!1,o=0;o<a;o+=2){var h=r[o+1],l=r[i+1];if(h<n&&l>=n||l<n&&h>=n){var u=r[o];u+(n-h)/(l-h)*(r[i]-u)<e&&(s=!s)}i=o}return s}},{key:"intersectsSegment",value:function(t,e,n,r){for(var a=this.polygons,i=0,s=a.length;i<s;i++)if(this.intersectsSegmentPolygon(a[i],t,e,n,r))return this.boundingBoxes[i];return null}},{key:"intersectsSegmentPolygon",value:function(t,e,n,r,a){for(var i=t,s=t.length,o=e-r,h=n-a,l=e*a-n*r,u=i[s-2],c=i[s-1],f=0;f<s;f+=2){var d=i[f],v=i[f+1],m=u*v-c*d,p=u-d,g=c-v,y=o*g-h*p,w=(l*p-o*m)/y;if((w>=u&&w<=d||w>=d&&w<=u)&&(w>=e&&w<=r||w>=r&&w<=e)){var k=(l*g-h*m)/y;if((k>=c&&k<=v||k>=v&&k<=c)&&(k>=n&&k<=a||k>=a&&k<=n))return!0}u=d,c=v}return!1}},{key:"getPolygon",value:function(t){if(!t)throw new Error("boundingBox cannot be null.");var e=this.boundingBoxes.indexOf(t);return-1==e?null:this.polygons[e]}},{key:"getWidth",value:function(){return this.maxX-this.minX}},{key:"getHeight",value:function(){return this.maxY-this.minY}}]),t}(),pn=function(){function t(){i(this,t),this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new M((function(){return new Array})),this.polygonIndicesPool=new M((function(){return new Array}))}return o(t,[{key:"triangulate",value:function(e){var n=e,r=e.length>>1,a=this.indicesArray;a.length=0;for(var i=0;i<r;i++)a[i]=i;var s=this.isConcaveArray;s.length=0;for(var o=0,h=r;o<h;++o)s[o]=t.isConcave(o,r,n,a);var l=this.triangles;for(l.length=0;r>3;){for(var u=r-1,c=0,f=1;;){t:if(!s[c]){for(var d=a[u]<<1,v=a[c]<<1,m=a[f]<<1,p=n[d],g=n[d+1],y=n[v],w=n[v+1],k=n[m],b=n[m+1],x=(f+1)%r;x!=u;x=(x+1)%r)if(s[x]){var E=a[x]<<1,I=n[E],A=n[E+1];if(t.positiveArea(k,b,p,g,I,A)&&t.positiveArea(p,g,y,w,I,A)&&t.positiveArea(y,w,k,b,I,A))break t}break}if(0==f){do{if(!s[c])break;c--}while(c>0);break}u=c,c=f,f=(f+1)%r}l.push(a[(r+c-1)%r]),l.push(a[c]),l.push(a[(c+1)%r]),a.splice(c,1),s.splice(c,1);var S=(--r+c-1)%r,T=c==r?0:c;s[S]=t.isConcave(S,r,n,a),s[T]=t.isConcave(T,r,n,a)}return 3==r&&(l.push(a[2]),l.push(a[0]),l.push(a[1])),l}},{key:"decompose",value:function(e,n){var r=e,a=this.convexPolygons;this.polygonPool.freeAll(a),a.length=0;var i=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(i),i.length=0;var s=this.polygonIndicesPool.obtain();s.length=0;var o=this.polygonPool.obtain();o.length=0;for(var h=-1,l=0,u=0,c=n.length;u<c;u+=3){var f=n[u]<<1,d=n[u+1]<<1,v=n[u+2]<<1,m=r[f],p=r[f+1],g=r[d],y=r[d+1],w=r[v],k=r[v+1],b=!1;if(h==f){var x=o.length-4,E=t.winding(o[x],o[x+1],o[x+2],o[x+3],w,k),I=t.winding(w,k,o[0],o[1],o[2],o[3]);E==l&&I==l&&(o.push(w),o.push(k),s.push(v),b=!0)}b||(o.length>0?(a.push(o),i.push(s)):(this.polygonPool.free(o),this.polygonIndicesPool.free(s)),(o=this.polygonPool.obtain()).length=0,o.push(m),o.push(p),o.push(g),o.push(y),o.push(w),o.push(k),(s=this.polygonIndicesPool.obtain()).length=0,s.push(f),s.push(d),s.push(v),l=t.winding(m,p,g,y,w,k),h=f)}o.length>0&&(a.push(o),i.push(s));for(var A=0,S=a.length;A<S;A++)if(0!=(s=i[A]).length)for(var T=s[0],R=s[s.length-1],C=(o=a[A]).length-4,M=o[C],F=o[C+1],Y=o[C+2],L=o[C+3],X=o[0],N=o[1],P=o[2],_=o[3],O=t.winding(M,F,Y,L,X,N),B=0;B<S;B++)if(B!=A){var D=i[B];if(3==D.length){var V=D[0],U=D[1],q=D[2],W=a[B],j=W[W.length-2],G=W[W.length-1];if(V==T&&U==R){var z=t.winding(M,F,Y,L,j,G),H=t.winding(j,G,X,N,P,_);z==O&&H==O&&(W.length=0,D.length=0,o.push(j),o.push(G),s.push(q),M=Y,F=L,Y=j,L=G,B=0)}}}for(var $=a.length-1;$>=0;$--)0==(o=a[$]).length&&(a.splice($,1),this.polygonPool.free(o),s=i[$],i.splice($,1),this.polygonIndicesPool.free(s));return a}}],[{key:"isConcave",value:function(t,e,n,r){var a=r[(e+t-1)%e]<<1,i=r[t]<<1,s=r[(t+1)%e]<<1;return!this.positiveArea(n[a],n[a+1],n[i],n[i+1],n[s],n[s+1])}},{key:"positiveArea",value:function(t,e,n,r,a,i){return t*(i-r)+n*(e-i)+a*(r-e)>=0}},{key:"winding",value:function(t,e,n,r,a,i){var s=n-t,o=r-e;return a*o-i*s+s*e-t*o>=0?1:-1}}]),t}(),gn=function(){function t(){i(this,t),this.triangulator=new pn,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array,this.clipAttachment=null,this.clippingPolygons=null}return o(t,[{key:"clipStart",value:function(e,n){if(this.clipAttachment)return 0;this.clipAttachment=n;var r=n.worldVerticesLength,a=R.setArraySize(this.clippingPolygon,r);n.computeWorldVertices(e,0,r,a,0,2);var i=this.clippingPolygon;t.makeClockwise(i);for(var s=this.clippingPolygons=this.triangulator.decompose(i,this.triangulator.triangulate(i)),o=0,h=s.length;o<h;o++){var l=s[o];t.makeClockwise(l),l.push(l[0]),l.push(l[1])}return s.length}},{key:"clipEndWithSlot",value:function(t){this.clipAttachment&&this.clipAttachment.endSlot==t.data&&this.clipEnd()}},{key:"clipEnd",value:function(){this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)}},{key:"isClipping",value:function(){return null!=this.clipAttachment}},{key:"clipTriangles",value:function(t,e,n,r,a,i,s,o){var h=this.clipOutput,l=this.clippedVertices,u=this.clippedTriangles,c=this.clippingPolygons,f=c.length,d=o?12:8,v=0;l.length=0,u.length=0;t:for(var m=0;m<r;m+=3)for(var p=n[m]<<1,g=t[p],y=t[p+1],w=a[p],k=a[p+1],b=t[p=n[m+1]<<1],x=t[p+1],E=a[p],I=a[p+1],A=t[p=n[m+2]<<1],S=t[p+1],T=a[p],C=a[p+1],M=0;M<f;M++){var F=l.length;if(!this.clip(g,y,b,x,A,S,c[M],h)){var Y=R.setArraySize(l,F+3*d);Y[F]=g,Y[F+1]=y,Y[F+2]=i.r,Y[F+3]=i.g,Y[F+4]=i.b,Y[F+5]=i.a,o?(Y[F+6]=w,Y[F+7]=k,Y[F+8]=s.r,Y[F+9]=s.g,Y[F+10]=s.b,Y[F+11]=s.a,Y[F+12]=b,Y[F+13]=x,Y[F+14]=i.r,Y[F+15]=i.g,Y[F+16]=i.b,Y[F+17]=i.a,Y[F+18]=E,Y[F+19]=I,Y[F+20]=s.r,Y[F+21]=s.g,Y[F+22]=s.b,Y[F+23]=s.a,Y[F+24]=A,Y[F+25]=S,Y[F+26]=i.r,Y[F+27]=i.g,Y[F+28]=i.b,Y[F+29]=i.a,Y[F+30]=T,Y[F+31]=C,Y[F+32]=s.r,Y[F+33]=s.g,Y[F+34]=s.b,Y[F+35]=s.a):(Y[F+6]=w,Y[F+7]=k,Y[F+8]=b,Y[F+9]=x,Y[F+10]=i.r,Y[F+11]=i.g,Y[F+12]=i.b,Y[F+13]=i.a,Y[F+14]=E,Y[F+15]=I,Y[F+16]=A,Y[F+17]=S,Y[F+18]=i.r,Y[F+19]=i.g,Y[F+20]=i.b,Y[F+21]=i.a,Y[F+22]=T,Y[F+23]=C),F=u.length;var L=R.setArraySize(u,F+3);L[F]=v,L[F+1]=v+1,L[F+2]=v+2,v+=3;continue t}var X=h.length;if(0!=X){for(var N=x-S,P=A-b,_=g-A,O=S-y,B=1/(N*_+P*(y-S)),D=X>>1,V=this.clipOutput,U=R.setArraySize(l,F+D*d),q=0;q<X;q+=2){var W=V[q],j=V[q+1];U[F]=W,U[F+1]=j,U[F+2]=i.r,U[F+3]=i.g,U[F+4]=i.b,U[F+5]=i.a;var G=W-A,z=j-S,H=(N*G+P*z)*B,$=(O*G+_*z)*B,J=1-H-$;U[F+6]=w*H+E*$+T*J,U[F+7]=k*H+I*$+C*J,o&&(U[F+8]=s.r,U[F+9]=s.g,U[F+10]=s.b,U[F+11]=s.a),F+=d}F=u.length;var K=R.setArraySize(u,F+3*(D-2));D--;for(var Q=1;Q<D;Q++)K[F]=v,K[F+1]=v+Q,K[F+2]=v+Q+1,F+=3;v+=D+1}}}},{key:"clip",value:function(t,e,n,r,a,i,s,o){var h,l=o,u=!1;s.length%4>=2?(h=o,o=this.scratch):h=this.scratch,h.length=0,h.push(t),h.push(e),h.push(n),h.push(r),h.push(a),h.push(i),h.push(t),h.push(e),o.length=0;for(var c=s,f=s.length-4,d=0;;d+=2){for(var v=c[d],m=c[d+1],p=c[d+2],g=c[d+3],y=v-p,w=m-g,k=h,b=h.length-2,x=o.length,E=0;E<b;E+=2){var I=k[E],A=k[E+1],S=k[E+2],T=k[E+3],R=y*(T-g)-w*(S-p)>0;if(y*(A-g)-w*(I-p)>0){if(R){o.push(S),o.push(T);continue}var C=T-A,M=S-I,F=C*(p-v)-M*(g-m);if(Math.abs(F)>1e-6){var Y=(M*(m-A)-C*(v-I))/F;o.push(v+(p-v)*Y),o.push(m+(g-m)*Y)}else o.push(v),o.push(m)}else if(R){var L=T-A,X=S-I,N=L*(p-v)-X*(g-m);if(Math.abs(N)>1e-6){var P=(X*(m-A)-L*(v-I))/N;o.push(v+(p-v)*P),o.push(m+(g-m)*P)}else o.push(v),o.push(m);o.push(S),o.push(T)}u=!0}if(x==o.length)return l.length=0,!0;if(o.push(o[0]),o.push(o[1]),d==f)break;var _=o;(o=h).length=0,h=_}if(l!=o){l.length=0;for(var O=0,B=o.length-2;O<B;O++)l[O]=o[O]}else l.length=l.length-2;return u}}],[{key:"makeClockwise",value:function(t){for(var e=t,n=t.length,r=e[n-2]*e[1]-e[0]*e[n-1],a=0,i=0,s=0,o=0,h=n-3;o<h;o+=2)a=e[o],i=e[o+1],s=e[o+2],r+=a*e[o+3]-s*i;if(!(r<0))for(var l=0,u=n-2,c=n>>1;l<c;l+=2){var f=e[l],d=e[l+1],v=u-l;e[l]=e[v],e[l+1]=e[v+1],e[v]=f,e[v+1]=d}}}]),t}(),yn=function(){function t(e){i(this,t),this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=e}return o(t,[{key:"readSkeletonData",value:function(t){var e=this.scale,n=new Fe,r="string"==typeof t?JSON.parse(t):t,a=r.skeleton;if(a&&(n.hash=a.hash,n.version=a.spine,n.x=a.x,n.y=a.y,n.width=a.width,n.height=a.height,n.fps=a.fps,n.imagesPath=a.images),r.bones)for(var i=0;i<r.bones.length;i++){var s=r.bones[i],o=null,h=En(s,"parent",null);h&&(o=n.findBone(h));var l=new de(n.bones.length,s.name,o);l.length=En(s,"length",0)*e,l.x=En(s,"x",0)*e,l.y=En(s,"y",0)*e,l.rotation=En(s,"rotation",0),l.scaleX=En(s,"scaleX",1),l.scaleY=En(s,"scaleY",1),l.shearX=En(s,"shearX",0),l.shearY=En(s,"shearY",0),l.transformMode=R.enumValue(ce,En(s,"transform","Normal")),l.skinRequired=En(s,"skin",!1);var u=En(s,"color",null);u&&l.color.setFromString(u),n.bones.push(l)}if(r.slots)for(var c=0;c<r.slots.length;c++){var f=r.slots[c],d=n.findBone(f.bone);if(!d)throw new Error("Couldn't find bone ".concat(f.bone," for slot ").concat(f.name));var v=new Xe(n.slots.length,f.name,d),m=En(f,"color",null);m&&v.color.setFromString(m);var p=En(f,"dark",null);p&&(v.darkColor=E.fromString(p)),v.attachmentName=En(f,"attachment",null),v.blendMode=R.enumValue(Me,En(f,"blend","normal")),n.slots.push(v)}if(r.ik)for(var g=0;g<r.ik.length;g++){var y=r.ik[g],w=new Ie(y.name);w.order=En(y,"order",0),w.skinRequired=En(y,"skin",!1);for(var k=0;k<y.bones.length;k++){var b=n.findBone(y.bones[k]);if(!b)throw new Error("Couldn't find bone ".concat(y.bones[k]," for IK constraint ").concat(y.name,"."));w.bones.push(b)}var x=n.findBone(y.target);if(!x)throw new Error("Couldn't find target bone ".concat(y.target," for IK constraint ").concat(y.name,"."));w.target=x,w.mix=En(y,"mix",1),w.softness=En(y,"softness",0)*e,w.bendDirection=En(y,"bendPositive",!0)?1:-1,w.compress=En(y,"compress",!1),w.stretch=En(y,"stretch",!1),w.uniform=En(y,"uniform",!1),n.ikConstraints.push(w)}if(r.transform)for(var I=0;I<r.transform.length;I++){var A=r.transform[I],S=new Pe(A.name);S.order=En(A,"order",0),S.skinRequired=En(A,"skin",!1);for(var T=0;T<A.bones.length;T++){var C=A.bones[T],M=n.findBone(C);if(!M)throw new Error("Couldn't find bone ".concat(C," for transform constraint ").concat(A.name,"."));S.bones.push(M)}var F=A.target,Y=n.findBone(F);if(!Y)throw new Error("Couldn't find target bone ".concat(F," for transform constraint ").concat(A.name,"."));S.target=Y,S.local=En(A,"local",!1),S.relative=En(A,"relative",!1),S.offsetRotation=En(A,"rotation",0),S.offsetX=En(A,"x",0)*e,S.offsetY=En(A,"y",0)*e,S.offsetScaleX=En(A,"scaleX",0),S.offsetScaleY=En(A,"scaleY",0),S.offsetShearY=En(A,"shearY",0),S.mixRotate=En(A,"mixRotate",1),S.mixX=En(A,"mixX",1),S.mixY=En(A,"mixY",S.mixX),S.mixScaleX=En(A,"mixScaleX",1),S.mixScaleY=En(A,"mixScaleY",S.mixScaleX),S.mixShearY=En(A,"mixShearY",1),n.transformConstraints.push(S)}if(r.path)for(var L=0;L<r.path.length;L++){var X=r.path[L],N=new Ae(X.name);N.order=En(X,"order",0),N.skinRequired=En(X,"skin",!1);for(var P=0;P<X.bones.length;P++){var _=X.bones[P],O=n.findBone(_);if(!O)throw new Error("Couldn't find bone ".concat(_," for path constraint ").concat(X.name,"."));N.bones.push(O)}var B=X.target,D=n.findSlot(B);if(!D)throw new Error("Couldn't find target slot ".concat(B," for path constraint ").concat(X.name,"."));N.target=D,N.positionMode=R.enumValue(ve,En(X,"positionMode","Percent")),N.spacingMode=R.enumValue(me,En(X,"spacingMode","Length")),N.rotateMode=R.enumValue(pe,En(X,"rotateMode","Tangent")),N.offsetRotation=En(X,"rotation",0),N.position=En(X,"position",0),N.positionMode==ve.Fixed&&(N.position*=e),N.spacing=En(X,"spacing",0),N.spacingMode!=me.Length&&N.spacingMode!=me.Fixed||(N.spacing*=e),N.mixRotate=En(X,"mixRotate",1),N.mixX=En(X,"mixX",1),N.mixY=En(X,"mixY",N.mixX),n.pathConstraints.push(N)}if(r.skins)for(var V=0;V<r.skins.length;V++){var U=r.skins[V],q=new Le(U.name);if(U.bones)for(var W=0;W<U.bones.length;W++){var j=U.bones[W],G=n.findBone(j);if(!G)throw new Error("Couldn't find bone ".concat(j," for skin ").concat(U.name,"."));q.bones.push(G)}if(U.ik)for(var z=0;z<U.ik.length;z++){var H=U.ik[z],$=n.findIkConstraint(H);if(!$)throw new Error("Couldn't find IK constraint ".concat(H," for skin ").concat(U.name,"."));q.constraints.push($)}if(U.transform)for(var J=0;J<U.transform.length;J++){var K=U.transform[J],Q=n.findTransformConstraint(K);if(!Q)throw new Error("Couldn't find transform constraint ".concat(K," for skin ").concat(U.name,"."));q.constraints.push(Q)}if(U.path)for(var Z=0;Z<U.path.length;Z++){var tt=U.path[Z],et=n.findPathConstraint(tt);if(!et)throw new Error("Couldn't find path constraint ".concat(tt," for skin ").concat(U.name,"."));q.constraints.push(et)}for(var nt in U.attachments){var rt=n.findSlot(nt);if(!rt)throw new Error("Couldn't find slot ".concat(nt," for skin ").concat(U.name,"."));var at=U.attachments[nt];for(var it in at){var st=this.readAttachment(at[it],q,rt.index,it,n);st&&q.setAttachment(rt.index,it,st)}}n.skins.push(q),"default"==q.name&&(n.defaultSkin=q)}for(var ot=0,ht=this.linkedMeshes.length;ot<ht;ot++){var lt=this.linkedMeshes[ot],ut=lt.skin?n.findSkin(lt.skin):n.defaultSkin;if(!ut)throw new Error("Skin not found: ".concat(lt.skin));var ct=ut.getAttachment(lt.slotIndex,lt.parent);if(!ct)throw new Error("Parent mesh not found: ".concat(lt.parent));lt.mesh.timelineAttachment=lt.inheritTimeline?ct:lt.mesh,lt.mesh.setParentMesh(ct),null!=lt.mesh.region&&lt.mesh.updateRegion()}if(this.linkedMeshes.length=0,r.events)for(var ft in r.events){var dt=r.events[ft],vt=new xe(ft);vt.intValue=En(dt,"int",0),vt.floatValue=En(dt,"float",0),vt.stringValue=En(dt,"string",""),vt.audioPath=En(dt,"audio",null),vt.audioPath&&(vt.volume=En(dt,"volume",1),vt.balance=En(dt,"balance",0)),n.events.push(vt)}if(r.animations)for(var mt in r.animations){var pt=r.animations[mt];this.readAnimation(pt,mt,n)}return n}},{key:"readAttachment",value:function(t,e,n,r,a){var i=this.scale;switch(r=En(t,"name",r),En(t,"type","region")){case"region":var s=En(t,"path",r),o=this.readSequence(En(t,"sequence",null)),h=this.attachmentLoader.newRegionAttachment(e,r,s,o);if(!h)return null;h.path=s,h.x=En(t,"x",0)*i,h.y=En(t,"y",0)*i,h.scaleX=En(t,"scaleX",1),h.scaleY=En(t,"scaleY",1),h.rotation=En(t,"rotation",0),h.width=t.width*i,h.height=t.height*i,h.sequence=o;var l=En(t,"color",null);return l&&h.color.setFromString(l),null!=h.region&&h.updateRegion(),h;case"boundingbox":var u=this.attachmentLoader.newBoundingBoxAttachment(e,r);if(!u)return null;this.readVertices(t,u,t.vertexCount<<1);var c=En(t,"color",null);return c&&u.color.setFromString(c),u;case"mesh":case"linkedmesh":var f=En(t,"path",r),d=this.readSequence(En(t,"sequence",null)),v=this.attachmentLoader.newMeshAttachment(e,r,f,d);if(!v)return null;v.path=f;var m=En(t,"color",null);m&&v.color.setFromString(m),v.width=En(t,"width",0)*i,v.height=En(t,"height",0)*i,v.sequence=d;var p=En(t,"parent",null);if(p)return this.linkedMeshes.push(new wn(v,En(t,"skin",null),n,p,En(t,"timelines",!0))),v;var g=t.uvs;return this.readVertices(t,v,g.length),v.triangles=t.triangles,v.regionUVs=g,null!=v.region&&v.updateRegion(),v.edges=En(t,"edges",null),v.hullLength=2*En(t,"hull",0),v;case"path":var y=this.attachmentLoader.newPathAttachment(e,r);if(!y)return null;y.closed=En(t,"closed",!1),y.constantSpeed=En(t,"constantSpeed",!0);var w=t.vertexCount;this.readVertices(t,y,w<<1);for(var k=R.newArray(w/3,0),b=0;b<t.lengths.length;b++)k[b]=t.lengths[b]*i;y.lengths=k;var x=En(t,"color",null);return x&&y.color.setFromString(x),y;case"point":var E=this.attachmentLoader.newPointAttachment(e,r);if(!E)return null;E.x=En(t,"x",0)*i,E.y=En(t,"y",0)*i,E.rotation=En(t,"rotation",0);var I=En(t,"color",null);return I&&E.color.setFromString(I),E;case"clipping":var A=this.attachmentLoader.newClippingAttachment(e,r);if(!A)return null;var S=En(t,"end",null);S&&(A.endSlot=a.findSlot(S));var T=t.vertexCount;this.readVertices(t,A,T<<1);var C=En(t,"color",null);return C&&A.color.setFromString(C),A}return null}},{key:"readSequence",value:function(t){if(null==t)return null;var e=new _(En(t,"count",0));return e.start=En(t,"start",1),e.digits=En(t,"digits",0),e.setupIndex=En(t,"setup",0),e}},{key:"readVertices",value:function(t,e,n){var r=this.scale;e.worldVerticesLength=n;var a=t.vertices;if(n!=a.length){for(var i=new Array,s=new Array,o=0,h=a.length;o<h;){var l=a[o++];s.push(l);for(var u=o+4*l;o<u;o+=4)s.push(a[o]),i.push(a[o+1]*r),i.push(a[o+2]*r),i.push(a[o+3])}e.bones=s,e.vertices=R.toFloatArray(i)}else{var c=R.toFloatArray(a);if(1!=r)for(var f=0,d=a.length;f<d;f++)c[f]*=r;e.vertices=c}}},{key:"readAnimation",value:function(t,e,n){var r=this.scale,a=new Array;if(t.slots)for(var i in t.slots){var s=t.slots[i],o=n.findSlot(i);if(!o)throw new Error("Slot not found: "+i);var h=o.index;for(var l in s){var u=s[l];if(u){var c=u.length;if("attachment"==l){for(var f=new Tt(c,h),d=0;d<c;d++){var v=u[d];f.setFrame(d,En(v,"time",0),En(v,"name",null))}a.push(f)}else if("rgba"==l){for(var m=new xt(c,c<<2,h),p=u[0],g=En(p,"time",0),y=E.fromString(p.color),w=0,k=0;;w++){m.setFrame(w,g,y.r,y.g,y.b,y.a);var b=u[w+1];if(!b){m.shrink(k);break}var x=En(b,"time",0),I=E.fromString(b.color),A=p.curve;A&&(k=xn(A,m,k,w,0,g,x,y.r,I.r,1),k=xn(A,m,k,w,1,g,x,y.g,I.g,1),k=xn(A,m,k,w,2,g,x,y.b,I.b,1),k=xn(A,m,k,w,3,g,x,y.a,I.a,1)),g=x,y=I,p=b}a.push(m)}else if("rgb"==l){for(var S=new Et(c,3*c,h),T=u[0],C=En(T,"time",0),M=E.fromString(T.color),F=0,Y=0;;F++){S.setFrame(F,C,M.r,M.g,M.b);var L=u[F+1];if(!L){S.shrink(Y);break}var X=En(L,"time",0),N=E.fromString(L.color),_=T.curve;_&&(Y=xn(_,S,Y,F,0,C,X,M.r,N.r,1),Y=xn(_,S,Y,F,1,C,X,M.g,N.g,1),Y=xn(_,S,Y,F,2,C,X,M.b,N.b,1)),C=X,M=N,T=L}a.push(S)}else if("alpha"==l)a.push(kn(u,new It(c,c,h),0,1));else if("rgba2"==l){for(var O=new At(c,7*c,h),B=u[0],D=En(B,"time",0),U=E.fromString(B.light),q=E.fromString(B.dark),W=0,j=0;;W++){O.setFrame(W,D,U.r,U.g,U.b,U.a,q.r,q.g,q.b);var G=u[W+1];if(!G){O.shrink(j);break}var z=En(G,"time",0),H=E.fromString(G.light),$=E.fromString(G.dark),J=B.curve;J&&(j=xn(J,O,j,W,0,D,z,U.r,H.r,1),j=xn(J,O,j,W,1,D,z,U.g,H.g,1),j=xn(J,O,j,W,2,D,z,U.b,H.b,1),j=xn(J,O,j,W,3,D,z,U.a,H.a,1),j=xn(J,O,j,W,4,D,z,q.r,$.r,1),j=xn(J,O,j,W,5,D,z,q.g,$.g,1),j=xn(J,O,j,W,6,D,z,q.b,$.b,1)),D=z,U=H,q=$,B=G}a.push(O)}else if("rgb2"==l){for(var K=new St(c,6*c,h),Q=u[0],Z=En(Q,"time",0),tt=E.fromString(Q.light),et=E.fromString(Q.dark),nt=0,rt=0;;nt++){K.setFrame(nt,Z,tt.r,tt.g,tt.b,et.r,et.g,et.b);var at=u[nt+1];if(!at){K.shrink(rt);break}var it=En(at,"time",0),st=E.fromString(at.light),ot=E.fromString(at.dark),ht=Q.curve;ht&&(rt=xn(ht,K,rt,nt,0,Z,it,tt.r,st.r,1),rt=xn(ht,K,rt,nt,1,Z,it,tt.g,st.g,1),rt=xn(ht,K,rt,nt,2,Z,it,tt.b,st.b,1),rt=xn(ht,K,rt,nt,3,Z,it,et.r,ot.r,1),rt=xn(ht,K,rt,nt,4,Z,it,et.g,ot.g,1),rt=xn(ht,K,rt,nt,5,Z,it,et.b,ot.b,1)),Z=it,tt=st,et=ot,Q=at}a.push(K)}}}}if(t.bones)for(var lt in t.bones){var ut=t.bones[lt],ct=n.findBone(lt);if(!ct)throw new Error("Bone not found: "+lt);var _t=ct.index;for(var Ot in ut){var Bt=ut[Ot],Dt=Bt.length;if(0!=Dt)if("rotate"===Ot)a.push(kn(Bt,new ft(Dt,Dt,_t),0,1));else if("translate"===Ot){var Vt=new dt(Dt,Dt<<1,_t);a.push(bn(Bt,Vt,"x","y",0,r))}else if("translatex"===Ot){var Ut=new vt(Dt,Dt,_t);a.push(kn(Bt,Ut,0,r))}else if("translatey"===Ot){var qt=new mt(Dt,Dt,_t);a.push(kn(Bt,qt,0,r))}else if("scale"===Ot){var Wt=new pt(Dt,Dt<<1,_t);a.push(bn(Bt,Wt,"x","y",1,1))}else if("scalex"===Ot){var jt=new gt(Dt,Dt,_t);a.push(kn(Bt,jt,1,1))}else if("scaley"===Ot){var Gt=new yt(Dt,Dt,_t);a.push(kn(Bt,Gt,1,1))}else if("shear"===Ot){var zt=new wt(Dt,Dt<<1,_t);a.push(bn(Bt,zt,"x","y",0,1))}else if("shearx"===Ot){var Ht=new kt(Dt,Dt,_t);a.push(kn(Bt,Ht,0,1))}else if("sheary"===Ot){var $t=new bt(Dt,Dt,_t);a.push(kn(Bt,$t,0,1))}}}if(t.ik)for(var Jt in t.ik){var Kt=t.ik[Jt],Qt=Kt[0];if(Qt){var Zt=n.findIkConstraint(Jt);if(!Zt)throw new Error("IK Constraint not found: "+Jt);for(var te=n.ikConstraints.indexOf(Zt),ee=new Ft(Kt.length,Kt.length<<1,te),ne=En(Qt,"time",0),re=En(Qt,"mix",1),ae=En(Qt,"softness",0)*r,ie=0,se=0;;ie++){ee.setFrame(ie,ne,re,ae,En(Qt,"bendPositive",!0)?1:-1,En(Qt,"compress",!1),En(Qt,"stretch",!1));var oe=Kt[ie+1];if(!oe){ee.shrink(se);break}var he=En(oe,"time",0),le=En(oe,"mix",1),ue=En(oe,"softness",0)*r,ce=Qt.curve;ce&&(se=xn(ce,ee,se,ie,0,ne,he,re,le,1),se=xn(ce,ee,se,ie,1,ne,he,ae,ue,r)),ne=he,re=le,ae=ue,Qt=oe}a.push(ee)}}if(t.transform)for(var fe in t.transform){var de=t.transform[fe],pe=de[0];if(pe){var ge=n.findTransformConstraint(fe);if(!ge)throw new Error("Transform constraint not found: "+fe);for(var ye=n.transformConstraints.indexOf(ge),we=new Yt(de.length,6*de.length,ye),ke=En(pe,"time",0),xe=En(pe,"mixRotate",1),Ee=En(pe,"mixX",1),Ie=En(pe,"mixY",Ee),Ae=En(pe,"mixScaleX",1),Se=En(pe,"mixScaleY",Ae),Te=En(pe,"mixShearY",1),Re=0,Ce=0;;Re++){we.setFrame(Re,ke,xe,Ee,Ie,Ae,Se,Te);var Me=de[Re+1];if(!Me){we.shrink(Ce);break}var Fe=En(Me,"time",0),Ye=En(Me,"mixRotate",1),Le=En(Me,"mixX",1),Xe=En(Me,"mixY",Le),Ne=En(Me,"mixScaleX",1),Pe=En(Me,"mixScaleY",Ne),_e=En(Me,"mixShearY",1),Oe=pe.curve;Oe&&(Ce=xn(Oe,we,Ce,Re,0,ke,Fe,xe,Ye,1),Ce=xn(Oe,we,Ce,Re,1,ke,Fe,Ee,Le,1),Ce=xn(Oe,we,Ce,Re,2,ke,Fe,Ie,Xe,1),Ce=xn(Oe,we,Ce,Re,3,ke,Fe,Ae,Ne,1),Ce=xn(Oe,we,Ce,Re,4,ke,Fe,Se,Pe,1),Ce=xn(Oe,we,Ce,Re,5,ke,Fe,Te,_e,1)),ke=Fe,xe=Ye,Ee=Le,Ie=Xe,Ae=Ne,Se=Pe,Ae=Ne,pe=Me}a.push(we)}}if(t.path)for(var Be in t.path){var De=t.path[Be],Ve=n.findPathConstraint(Be);if(!Ve)throw new Error("Path constraint not found: "+Be);var Ue=n.pathConstraints.indexOf(Ve);for(var qe in De){var We=De[qe],je=We[0];if(je){var Ge=We.length;if("position"===qe){var ze=new Lt(Ge,Ge,Ue);a.push(kn(We,ze,0,Ve.positionMode==ve.Fixed?r:1))}else if("spacing"===qe){var He=new Xt(Ge,Ge,Ue);a.push(kn(We,He,0,Ve.spacingMode==me.Length||Ve.spacingMode==me.Fixed?r:1))}else if("mix"===qe){for(var $e=new Nt(Ge,3*Ge,Ue),Je=En(je,"time",0),Ke=En(je,"mixRotate",1),Qe=En(je,"mixX",1),Ze=En(je,"mixY",Qe),tn=0,en=0;;tn++){$e.setFrame(tn,Je,Ke,Qe,Ze);var nn=We[tn+1];if(!nn){$e.shrink(en);break}var rn=En(nn,"time",0),an=En(nn,"mixRotate",1),sn=En(nn,"mixX",1),on=En(nn,"mixY",sn),hn=je.curve;hn&&(en=xn(hn,$e,en,tn,0,Je,rn,Ke,an,1),en=xn(hn,$e,en,tn,1,Je,rn,Qe,sn,1),en=xn(hn,$e,en,tn,2,Je,rn,Ze,on,1)),Je=rn,Ke=an,Qe=sn,Ze=on,je=nn}a.push($e)}}}}if(t.attachments)for(var ln in t.attachments){var un=t.attachments[ln],cn=n.findSkin(ln);if(!cn)throw new Error("Skin not found: "+ln);for(var fn in un){var dn=un[fn],vn=n.findSlot(fn);if(!vn)throw new Error("Slot not found: "+fn);var mn=vn.index;for(var pn in dn){var gn=dn[pn],yn=cn.getAttachment(mn,pn);for(var wn in gn){var In=gn[wn],An=In[0];if(An)if("deform"==wn){for(var Sn=yn.bones,Tn=yn.vertices,Rn=Sn?Tn.length/3*2:Tn.length,Cn=new Rt(In.length,In.length,mn,yn),Mn=En(An,"time",0),Fn=0,Yn=0;;Fn++){var Ln=void 0,Xn=En(An,"vertices",null);if(Xn){Ln=R.newFloatArray(Rn);var Nn=En(An,"offset",0);if(R.arrayCopy(Xn,0,Ln,Nn,Xn.length),1!=r)for(var Pn=Nn,_n=Pn+Xn.length;Pn<_n;Pn++)Ln[Pn]*=r;if(!Sn)for(var On=0;On<Rn;On++)Ln[On]+=Tn[On]}else Ln=Sn?R.newFloatArray(Rn):Tn;Cn.setFrame(Fn,Mn,Ln);var Bn=In[Fn+1];if(!Bn){Cn.shrink(Yn);break}var Dn=En(Bn,"time",0),Vn=An.curve;Vn&&(Yn=xn(Vn,Cn,Yn,Fn,0,Mn,Dn,0,1,1)),Mn=Dn,An=Bn}a.push(Cn)}else if("sequence"==wn){for(var Un=new Pt(In.length,mn,yn),qn=0,Wn=0;Wn<In.length;Wn++){var jn=En(An,"delay",qn),Gn=En(An,"time",0),zn=P[En(An,"mode","hold")],Hn=En(An,"index",0);Un.setFrame(Wn,Gn,zn,Hn,jn),qn=jn,An=In[Wn+1]}a.push(Un)}}}}}if(t.drawOrder){for(var $n=new Mt(t.drawOrder.length),Jn=n.slots.length,Kn=0,Qn=0;Qn<t.drawOrder.length;Qn++,Kn++){var Zn=t.drawOrder[Qn],tr=null,er=En(Zn,"offsets",null);if(er){tr=R.newArray(Jn,-1);for(var nr=R.newArray(Jn-er.length,0),rr=0,ar=0,ir=0;ir<er.length;ir++){var sr=er[ir],or=n.findSlot(sr.slot);if(!or)throw new Error("Slot not found: "+or);for(var hr=or.index;rr!=hr;)nr[ar++]=rr++;tr[rr+sr.offset]=rr++}for(;rr<Jn;)nr[ar++]=rr++;for(var lr=Jn-1;lr>=0;lr--)-1==tr[lr]&&(tr[lr]=nr[--ar])}$n.setFrame(Kn,En(Zn,"time",0),tr)}a.push($n)}if(t.events){for(var ur=new Ct(t.events.length),cr=0,fr=0;fr<t.events.length;fr++,cr++){var dr=t.events[fr],vr=n.findEvent(dr.name);if(!vr)throw new Error("Event not found: "+dr.name);var mr=new be(R.toSinglePrecision(En(dr,"time",0)),vr);mr.intValue=En(dr,"int",vr.intValue),mr.floatValue=En(dr,"float",vr.floatValue),mr.stringValue=En(dr,"string",vr.stringValue),mr.data.audioPath&&(mr.volume=En(dr,"volume",1),mr.balance=En(dr,"balance",0)),ur.setFrame(cr,mr)}a.push(ur)}for(var pr=0,gr=0,yr=a.length;gr<yr;gr++)pr=Math.max(pr,a[gr].getDuration());n.animations.push(new V(e,a,pr))}}]),t}(),wn=o((function t(e,n,r,a,s){i(this,t),this.mesh=e,this.skin=n,this.slotIndex=r,this.parent=a,this.inheritTimeline=s}));function kn(t,e,n,r){for(var a=t[0],i=En(a,"time",0),s=En(a,"value",n)*r,o=0,h=0;;h++){e.setFrame(h,i,s);var l=t[h+1];if(!l)return e.shrink(o),e;var u=En(l,"time",0),c=En(l,"value",n)*r;a.curve&&(o=xn(a.curve,e,o,h,0,i,u,s,c,r)),i=u,s=c,a=l}}function bn(t,e,n,r,a,i){for(var s=t[0],o=En(s,"time",0),h=En(s,n,a)*i,l=En(s,r,a)*i,u=0,c=0;;c++){e.setFrame(c,o,h,l);var f=t[c+1];if(!f)return e.shrink(u),e;var d=En(f,"time",0),v=En(f,n,a)*i,m=En(f,r,a)*i,p=s.curve;p&&(u=xn(p,e,u,c,0,o,d,h,v,i),u=xn(p,e,u,c,1,o,d,l,m,i)),o=d,h=v,l=m,s=f}}function xn(t,e,n,r,a,i,s,o,h,l){if("stepped"==t)return e.setStepped(r),n;var u=a<<2,c=t[u],f=t[u+1]*l,d=t[u+2],v=t[u+3]*l;return e.setBezier(n,r,a,i,o,c,f,d,v,s,h),n+1}function En(t,e,n){return void 0!==t[e]?t[e]:n}void 0===Math.fround&&(Math.fround=(We=new Float32Array(1),function(t){return We[0]=t,We[0]}));var In=Object.freeze({__proto__:null,AlphaTimeline:It,Animation:V,AnimationState:_t,AnimationStateAdapter:qt,AnimationStateData:Kt,AssetManagerBase:we,AtlasAttachmentLoader:fe,Attachment:X,AttachmentTimeline:Tt,BinaryInput:Oe,get BlendMode(){return Me},Bone:ge,BoneData:de,BoundingBoxAttachment:Qt,CURRENT:Jt,ClippingAttachment:Zt,Color:E,ConstraintData:ye,CurveTimeline:lt,CurveTimeline1:ut,CurveTimeline2:ct,DebugUtils:C,DeformTimeline:Rt,Downloader:ke,DrawOrderTimeline:Mt,Event:be,EventData:xe,EventQueue:Dt,EventTimeline:Ct,get EventType(){return Ot},FIRST:jt,FakeTexture:ne,HOLD_FIRST:zt,HOLD_MIX:Ht,HOLD_SUBSEQUENT:Gt,IkConstraint:Ee,IkConstraintData:Ie,IkConstraintTimeline:Ft,IntSet:b,Interpolation:A,MathUtils:I,MeshAttachment:oe,get MixBlend(){return O},get MixDirection(){return B},PathAttachment:he,PathConstraint:Se,PathConstraintData:Ae,PathConstraintMixTimeline:Nt,PathConstraintPositionTimeline:Lt,PathConstraintSpacingTimeline:Xt,PointAttachment:le,Pool:M,get PositionMode(){return ve},Pow:S,PowOut:T,RGB2Timeline:St,RGBA2Timeline:At,RGBATimeline:xt,RGBTimeline:Et,RegionAttachment:ue,get RotateMode(){return pe},RotateTimeline:ft,SETUP:$t,SUBSEQUENT:Wt,ScaleTimeline:pt,ScaleXTimeline:gt,ScaleYTimeline:yt,SequenceTimeline:Pt,ShearTimeline:wt,ShearXTimeline:kt,ShearYTimeline:bt,Skeleton:Ce,SkeletonBinary:_e,SkeletonBounds:mn,SkeletonClipping:gn,SkeletonData:Fe,SkeletonJson:yn,Skin:Le,SkinEntry:Ye,Slot:Te,SlotData:Xe,get SpacingMode(){return me},StringSet:x,Texture:te,TextureAtlas:re,TextureAtlasPage:ie,TextureAtlasRegion:se,get TextureFilter(){return Vt},TextureRegion:ee,get TextureWrap(){return Ut},TimeKeeper:Y,Timeline:ht,TrackEntry:Bt,TransformConstraint:Re,TransformConstraintData:Pe,TransformConstraintTimeline:Yt,get TransformMode(){return ce},TranslateTimeline:dt,TranslateXTimeline:vt,TranslateYTimeline:mt,Triangulator:pn,Utils:R,Vector2:F,VertexAttachment:N,WindowedMean:L}),An={9728:t.FILTER_NEAREST,9729:t.FILTER_LINEAR,9984:t.FILTER_NEAREST_MIPMAP_NEAREST,9985:t.FILTER_LINEAR_MIPMAP_NEAREST,9986:t.FILTER_NEAREST_MIPMAP_LINEAR,9987:t.FILTER_LINEAR_MIPMAP_LINEAR},Sn={33648:t.ADDRESS_MIRRORED_REPEAT,33071:t.ADDRESS_CLAMP_TO_EDGE,10487:t.ADDRESS_REPEAT},Tn=function(){function t(e){i(this,t),this._image={width:e.width,height:e.height},this.pcTexture=e}return o(t,[{key:"setFilters",value:function(t,e){this.pcTexture.minFilter=An[t],this.pcTexture.magFilter=An[e]}},{key:"setWraps",value:function(t,e){this.pcTexture.addressU=Sn[t],this.pcTexture.addressV=Sn[e]}},{key:"getImage",value:function(){return this._image}},{key:"dispose",value:function(){this.pcTexture.destroy()}}]),t}();function Rn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Cn={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},Mn=Rn(Cn),Fn="object"===("undefined"==typeof process?"undefined":a(process))&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=console).error.apply(t,["SEMVER"].concat(n))}:function(){},Yn=Fn;Rn(Yn);var Ln={exports:{}};!function(t,e){var n=Cn.MAX_SAFE_COMPONENT_LENGTH,r=Cn.MAX_SAFE_BUILD_LENGTH,a=Cn.MAX_LENGTH,i=Yn,s=(e=t.exports={}).re=[],o=e.safeRe=[],h=e.src=[],l=e.t={},u=0,c="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",a],[c,r]],d=function(t,e,n){var r=function(t){for(var e=0,n=f;e<n.length;e++){var r=m(n[e],2),a=r[0],i=r[1];t=t.split("".concat(a,"*")).join("".concat(a,"{0,").concat(i,"}")).split("".concat(a,"+")).join("".concat(a,"{1,").concat(i,"}"))}return t}(e),a=u++;i(t,a,e),l[t]=a,h[a]=e,s[a]=new RegExp(e,n?"g":void 0),o[a]=new RegExp(r,n?"g":void 0)};d("NUMERICIDENTIFIER","0|[1-9]\\d*"),d("NUMERICIDENTIFIERLOOSE","\\d+"),d("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-]".concat(c,"*")),d("MAINVERSION","(".concat(h[l.NUMERICIDENTIFIER],")\\.")+"(".concat(h[l.NUMERICIDENTIFIER],")\\.")+"(".concat(h[l.NUMERICIDENTIFIER],")")),d("MAINVERSIONLOOSE","(".concat(h[l.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(h[l.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(h[l.NUMERICIDENTIFIERLOOSE],")")),d("PRERELEASEIDENTIFIER","(?:".concat(h[l.NUMERICIDENTIFIER],"|").concat(h[l.NONNUMERICIDENTIFIER],")")),d("PRERELEASEIDENTIFIERLOOSE","(?:".concat(h[l.NUMERICIDENTIFIERLOOSE],"|").concat(h[l.NONNUMERICIDENTIFIER],")")),d("PRERELEASE","(?:-(".concat(h[l.PRERELEASEIDENTIFIER],"(?:\\.").concat(h[l.PRERELEASEIDENTIFIER],")*))")),d("PRERELEASELOOSE","(?:-?(".concat(h[l.PRERELEASEIDENTIFIERLOOSE],"(?:\\.").concat(h[l.PRERELEASEIDENTIFIERLOOSE],")*))")),d("BUILDIDENTIFIER","".concat(c,"+")),d("BUILD","(?:\\+(".concat(h[l.BUILDIDENTIFIER],"(?:\\.").concat(h[l.BUILDIDENTIFIER],")*))")),d("FULLPLAIN","v?".concat(h[l.MAINVERSION]).concat(h[l.PRERELEASE],"?").concat(h[l.BUILD],"?")),d("FULL","^".concat(h[l.FULLPLAIN],"$")),d("LOOSEPLAIN","[v=\\s]*".concat(h[l.MAINVERSIONLOOSE]).concat(h[l.PRERELEASELOOSE],"?").concat(h[l.BUILD],"?")),d("LOOSE","^".concat(h[l.LOOSEPLAIN],"$")),d("GTLT","((?:<|>)?=?)"),d("XRANGEIDENTIFIERLOOSE","".concat(h[l.NUMERICIDENTIFIERLOOSE],"|x|X|\\*")),d("XRANGEIDENTIFIER","".concat(h[l.NUMERICIDENTIFIER],"|x|X|\\*")),d("XRANGEPLAIN","[v=\\s]*(".concat(h[l.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(h[l.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(h[l.XRANGEIDENTIFIER],")")+"(?:".concat(h[l.PRERELEASE],")?").concat(h[l.BUILD],"?")+")?)?"),d("XRANGEPLAINLOOSE","[v=\\s]*(".concat(h[l.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(h[l.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(h[l.XRANGEIDENTIFIERLOOSE],")")+"(?:".concat(h[l.PRERELEASELOOSE],")?").concat(h[l.BUILD],"?")+")?)?"),d("XRANGE","^".concat(h[l.GTLT],"\\s*").concat(h[l.XRANGEPLAIN],"$")),d("XRANGELOOSE","^".concat(h[l.GTLT],"\\s*").concat(h[l.XRANGEPLAINLOOSE],"$")),d("COERCE","".concat("(^|[^\\d])(\\d{1,").concat(n,"})")+"(?:\\.(\\d{1,".concat(n,"}))?")+"(?:\\.(\\d{1,".concat(n,"}))?")+"(?:$|[^\\d])"),d("COERCERTL",h[l.COERCE],!0),d("LONETILDE","(?:~>?)"),d("TILDETRIM","(\\s*)".concat(h[l.LONETILDE],"\\s+"),!0),e.tildeTrimReplace="$1~",d("TILDE","^".concat(h[l.LONETILDE]).concat(h[l.XRANGEPLAIN],"$")),d("TILDELOOSE","^".concat(h[l.LONETILDE]).concat(h[l.XRANGEPLAINLOOSE],"$")),d("LONECARET","(?:\\^)"),d("CARETTRIM","(\\s*)".concat(h[l.LONECARET],"\\s+"),!0),e.caretTrimReplace="$1^",d("CARET","^".concat(h[l.LONECARET]).concat(h[l.XRANGEPLAIN],"$")),d("CARETLOOSE","^".concat(h[l.LONECARET]).concat(h[l.XRANGEPLAINLOOSE],"$")),d("COMPARATORLOOSE","^".concat(h[l.GTLT],"\\s*(").concat(h[l.LOOSEPLAIN],")$|^$")),d("COMPARATOR","^".concat(h[l.GTLT],"\\s*(").concat(h[l.FULLPLAIN],")$|^$")),d("COMPARATORTRIM","(\\s*)".concat(h[l.GTLT],"\\s*(").concat(h[l.LOOSEPLAIN],"|").concat(h[l.XRANGEPLAIN],")"),!0),e.comparatorTrimReplace="$1$2$3",d("HYPHENRANGE","^\\s*(".concat(h[l.XRANGEPLAIN],")")+"\\s+-\\s+"+"(".concat(h[l.XRANGEPLAIN],")")+"\\s*$"),d("HYPHENRANGELOOSE","^\\s*(".concat(h[l.XRANGEPLAINLOOSE],")")+"\\s+-\\s+"+"(".concat(h[l.XRANGEPLAINLOOSE],")")+"\\s*$"),d("STAR","(<|>)?=?\\s*\\*"),d("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),d("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(Ln,Ln.exports);var Xn=Ln.exports;Rn(Xn);var Nn=Object.freeze({loose:!0}),Pn=Object.freeze({}),_n=function(t){return t?"object"!==a(t)?Nn:t:Pn};Rn(_n);var On=/^[0-9]+$/,Bn=function(t,e){var n=On.test(t),r=On.test(e);return n&&r&&(t=+t,e=+e),t===e?0:n&&!r?-1:r&&!n?1:t<e?-1:1},Dn={compareIdentifiers:Bn,rcompareIdentifiers:function(t,e){return Bn(e,t)}};Rn(Dn);var Vn=Yn,Un=Cn.MAX_LENGTH,qn=Cn.MAX_SAFE_INTEGER,Wn=Xn.safeRe,jn=Xn.t,Gn=_n,zn=Dn.compareIdentifiers,Hn=function(){function t(e,n){if(i(this,t),n=Gn(n),e instanceof t){if(e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError('Invalid version. Must be a string. Got type "'.concat(a(e),'".'));if(e.length>Un)throw new TypeError("version is longer than ".concat(Un," characters"));Vn("SemVer",e,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;var r=e.trim().match(n.loose?Wn[jn.LOOSE]:Wn[jn.FULL]);if(!r)throw new TypeError("Invalid Version: ".concat(e));if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>qn||this.major<0)throw new TypeError("Invalid major version");if(this.minor>qn||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>qn||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map((function(t){if(/^[0-9]+$/.test(t)){var e=+t;if(e>=0&&e<qn)return e}return t})):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}return o(t,[{key:"format",value:function(){return this.version="".concat(this.major,".").concat(this.minor,".").concat(this.patch),this.prerelease.length&&(this.version+="-".concat(this.prerelease.join("."))),this.version}},{key:"toString",value:function(){return this.version}},{key:"compare",value:function(e){if(Vn("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if("string"==typeof e&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}},{key:"compareMain",value:function(e){return e instanceof t||(e=new t(e,this.options)),zn(this.major,e.major)||zn(this.minor,e.minor)||zn(this.patch,e.patch)}},{key:"comparePre",value:function(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var n=0;do{var r=this.prerelease[n],a=e.prerelease[n];if(Vn("prerelease compare",n,r,a),void 0===r&&void 0===a)return 0;if(void 0===a)return 1;if(void 0===r)return-1;if(r!==a)return zn(r,a)}while(++n)}},{key:"compareBuild",value:function(e){e instanceof t||(e=new t(e,this.options));var n=0;do{var r=this.build[n],a=e.build[n];if(Vn("prerelease compare",n,r,a),void 0===r&&void 0===a)return 0;if(void 0===a)return 1;if(void 0===r)return-1;if(r!==a)return zn(r,a)}while(++n)}},{key:"inc",value:function(t,e,n){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e,n),this.inc("pre",e,n);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",e,n),this.inc("pre",e,n);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":var r=Number(n)?1:0;if(!e&&!1===n)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[r];else{for(var a=this.prerelease.length;--a>=0;)"number"==typeof this.prerelease[a]&&(this.prerelease[a]++,a=-2);if(-1===a){if(e===this.prerelease.join(".")&&!1===n)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(r)}}if(e){var i=[e,r];!1===n&&(i=[e]),0===zn(this.prerelease[0],e)?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break;default:throw new Error("invalid increment argument: ".concat(t))}return this.raw=this.format(),this.build.length&&(this.raw+="+".concat(this.build.join("."))),this}}]),t}(),$n=Hn;Rn($n);var Jn=$n,Kn=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t instanceof Jn)return t;try{return new Jn(t,e)}catch(t){if(!n)return null;throw t}};Rn(Kn);var Qn,Zn,tr=Kn,er=Rn((function(t,e){var n=tr(t,e);return n?n.version:null})),nr=$n,rr=Kn,ar=Xn.safeRe,ir=Xn.t,sr=Rn((function(t,e){if(t instanceof nr)return t;if("number"==typeof t&&(t=String(t)),"string"!=typeof t)return null;var n=null;if((e=e||{}).rtl){for(var r;(r=ar[ir.COERCERTL].exec(t))&&(!n||n.index+n[0].length!==t.length);)n&&r.index+r[0].length===n.index+n[0].length||(n=r),ar[ir.COERCERTL].lastIndex=r.index+r[1].length+r[2].length;ar[ir.COERCERTL].lastIndex=-1}else n=t.match(ar[ir.COERCE]);return null===n?null:rr("".concat(n[2],".").concat(n[3]||"0",".").concat(n[4]||"0"),e)}));var or=hr;function hr(t){var e=this;if(e instanceof hr||(e=new hr),e.tail=null,e.head=null,e.length=0,t&&"function"==typeof t.forEach)t.forEach((function(t){e.push(t)}));else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)e.push(arguments[n]);return e}function lr(t,e,n){var r=e===t.head?new fr(n,null,e,t):new fr(n,e,e.next,t);return null===r.next&&(t.tail=r),null===r.prev&&(t.head=r),t.length++,r}function ur(t,e){t.tail=new fr(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function cr(t,e){t.head=new fr(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function fr(t,e,n,r){if(!(this instanceof fr))return new fr(t,e,n,r);this.list=r,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}hr.Node=fr,hr.create=hr,hr.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,n=t.prev;return e&&(e.prev=n),n&&(n.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=n),t.list.length--,t.next=null,t.prev=null,t.list=null,e},hr.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}},hr.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}},hr.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)ur(this,arguments[t]);return this.length},hr.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)cr(this,arguments[t]);return this.length},hr.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}},hr.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}},hr.prototype.forEach=function(t,e){e=e||this;for(var n=this.head,r=0;null!==n;r++)t.call(e,n.value,r,this),n=n.next},hr.prototype.forEachReverse=function(t,e){e=e||this;for(var n=this.tail,r=this.length-1;null!==n;r--)t.call(e,n.value,r,this),n=n.prev},hr.prototype.get=function(t){for(var e=0,n=this.head;null!==n&&e<t;e++)n=n.next;if(e===t&&null!==n)return n.value},hr.prototype.getReverse=function(t){for(var e=0,n=this.tail;null!==n&&e<t;e++)n=n.prev;if(e===t&&null!==n)return n.value},hr.prototype.map=function(t,e){e=e||this;for(var n=new hr,r=this.head;null!==r;)n.push(t.call(e,r.value,this)),r=r.next;return n},hr.prototype.mapReverse=function(t,e){e=e||this;for(var n=new hr,r=this.tail;null!==r;)n.push(t.call(e,r.value,this)),r=r.prev;return n},hr.prototype.reduce=function(t,e){var n,r=this.head;if(arguments.length>1)n=e;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");r=this.head.next,n=this.head.value}for(var a=0;null!==r;a++)n=t(n,r.value,a),r=r.next;return n},hr.prototype.reduceReverse=function(t,e){var n,r=this.tail;if(arguments.length>1)n=e;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");r=this.tail.prev,n=this.tail.value}for(var a=this.length-1;null!==r;a--)n=t(n,r.value,a),r=r.prev;return n},hr.prototype.toArray=function(){for(var t=new Array(this.length),e=0,n=this.head;null!==n;e++)t[e]=n.value,n=n.next;return t},hr.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,n=this.tail;null!==n;e++)t[e]=n.value,n=n.prev;return t},hr.prototype.slice=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var n=new hr;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=0,a=this.head;null!==a&&r<t;r++)a=a.next;for(;null!==a&&r<e;r++,a=a.next)n.push(a.value);return n},hr.prototype.sliceReverse=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var n=new hr;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=this.length,a=this.tail;null!==a&&r>e;r--)a=a.prev;for(;null!==a&&r>t;r--,a=a.prev)n.push(a.value);return n},hr.prototype.splice=function(t,e){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var n=0,r=this.head;null!==r&&n<t;n++)r=r.next;var a=[];for(n=0;r&&n<e;n++)a.push(r.value),r=this.removeNode(r);null===r&&(r=this.tail),r!==this.head&&r!==this.tail&&(r=r.prev);for(n=0;n<(arguments.length<=2?0:arguments.length-2);n++)r=lr(this,r,n+2<2||arguments.length<=n+2?void 0:arguments[n+2]);return a},hr.prototype.reverse=function(){for(var t=this.head,e=this.tail,n=t;null!==n;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=e,this.tail=t,this};try{(Zn||(Zn=1,Qn=function(t){t.prototype[Symbol.iterator]=r().mark((function t(){var e;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this.head;case 1:if(!e){t.next=7;break}return t.next=4,e.value;case 4:e=e.next,t.next=1;break;case 7:case"end":return t.stop()}}),t,this)}))}),Qn)(hr)}catch(t){}Rn(or);var dr=or,vr=Symbol("max"),mr=Symbol("length"),pr=Symbol("lengthCalculator"),gr=Symbol("allowStale"),yr=Symbol("maxAge"),wr=Symbol("dispose"),kr=Symbol("noDisposeOnSet"),br=Symbol("lruList"),xr=Symbol("cache"),Er=Symbol("updateAgeOnGet"),Ir=function(){return 1},Ar=function(){function t(e){if(i(this,t),"number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[vr]=e.max||1/0;var n=e.length||Ir;if(this[pr]="function"!=typeof n?Ir:n,this[gr]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[yr]=e.maxAge||0,this[wr]=e.dispose,this[kr]=e.noDisposeOnSet||!1,this[Er]=e.updateAgeOnGet||!1,this.reset()}return o(t,[{key:"max",get:function(){return this[vr]},set:function(t){if("number"!=typeof t||t<0)throw new TypeError("max must be a non-negative number");this[vr]=t||1/0,Rr(this)}},{key:"allowStale",get:function(){return this[gr]},set:function(t){this[gr]=!!t}},{key:"maxAge",get:function(){return this[yr]},set:function(t){if("number"!=typeof t)throw new TypeError("maxAge must be a non-negative number");this[yr]=t,Rr(this)}},{key:"lengthCalculator",get:function(){return this[pr]},set:function(t){var e=this;"function"!=typeof t&&(t=Ir),t!==this[pr]&&(this[pr]=t,this[mr]=0,this[br].forEach((function(t){t.length=e[pr](t.value,t.key),e[mr]+=t.length}))),Rr(this)}},{key:"length",get:function(){return this[mr]}},{key:"itemCount",get:function(){return this[br].length}},{key:"rforEach",value:function(t,e){e=e||this;for(var n=this[br].tail;null!==n;){var r=n.prev;Fr(this,t,n,e),n=r}}},{key:"forEach",value:function(t,e){e=e||this;for(var n=this[br].head;null!==n;){var r=n.next;Fr(this,t,n,e),n=r}}},{key:"keys",value:function(){return this[br].toArray().map((function(t){return t.key}))}},{key:"values",value:function(){return this[br].toArray().map((function(t){return t.value}))}},{key:"reset",value:function(){var t=this;this[wr]&&this[br]&&this[br].length&&this[br].forEach((function(e){return t[wr](e.key,e.value)})),this[xr]=new Map,this[br]=new dr,this[mr]=0}},{key:"dump",value:function(){var t=this;return this[br].map((function(e){return!Tr(t,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}})).toArray().filter((function(t){return t}))}},{key:"dumpLru",value:function(){return this[br]}},{key:"set",value:function(t,e,n){if((n=n||this[yr])&&"number"!=typeof n)throw new TypeError("maxAge must be a number");var r=n?Date.now():0,a=this[pr](e,t);if(this[xr].has(t)){if(a>this[vr])return Cr(this,this[xr].get(t)),!1;var i=this[xr].get(t).value;return this[wr]&&(this[kr]||this[wr](t,i.value)),i.now=r,i.maxAge=n,i.value=e,this[mr]+=a-i.length,i.length=a,this.get(t),Rr(this),!0}var s=new Mr(t,e,a,r,n);return s.length>this[vr]?(this[wr]&&this[wr](t,e),!1):(this[mr]+=s.length,this[br].unshift(s),this[xr].set(t,this[br].head),Rr(this),!0)}},{key:"has",value:function(t){if(!this[xr].has(t))return!1;var e=this[xr].get(t).value;return!Tr(this,e)}},{key:"get",value:function(t){return Sr(this,t,!0)}},{key:"peek",value:function(t){return Sr(this,t,!1)}},{key:"pop",value:function(){var t=this[br].tail;return t?(Cr(this,t),t.value):null}},{key:"del",value:function(t){Cr(this,this[xr].get(t))}},{key:"load",value:function(t){this.reset();for(var e=Date.now(),n=t.length-1;n>=0;n--){var r=t[n],a=r.e||0;if(0===a)this.set(r.k,r.v);else{var i=a-e;i>0&&this.set(r.k,r.v,i)}}}},{key:"prune",value:function(){var t=this;this[xr].forEach((function(e,n){return Sr(t,n,!1)}))}}]),t}(),Sr=function(t,e,n){var r=t[xr].get(e);if(r){var a=r.value;if(Tr(t,a)){if(Cr(t,r),!t[gr])return}else n&&(t[Er]&&(r.value.now=Date.now()),t[br].unshiftNode(r));return a.value}},Tr=function(t,e){if(!e||!e.maxAge&&!t[yr])return!1;var n=Date.now()-e.now;return e.maxAge?n>e.maxAge:t[yr]&&n>t[yr]},Rr=function(t){if(t[mr]>t[vr])for(var e=t[br].tail;t[mr]>t[vr]&&null!==e;){var n=e.prev;Cr(t,e),e=n}},Cr=function(t,e){if(e){var n=e.value;t[wr]&&t[wr](n.key,n.value),t[mr]-=n.length,t[xr].delete(n.key),t[br].removeNode(e)}},Mr=o((function t(e,n,r,a,s){i(this,t),this.key=e,this.value=n,this.length=r,this.now=a,this.maxAge=s||0})),Fr=function(t,e,n,r){var a=n.value;Tr(t,a)&&(Cr(t,n),t[gr]||(a=void 0)),a&&e.call(r,a.value,a.key,t)},Yr=Ar;Rn(Yr);var Lr=$n,Xr=function(t,e,n){return new Lr(t,n).compare(new Lr(e,n))};Rn(Xr);var Nr=Xr,Pr=function(t,e,n){return 0===Nr(t,e,n)};Rn(Pr);var _r=Xr,Or=function(t,e,n){return 0!==_r(t,e,n)};Rn(Or);var Br=Xr,Dr=function(t,e,n){return Br(t,e,n)>0};Rn(Dr);var Vr=Xr,Ur=function(t,e,n){return Vr(t,e,n)>=0};Rn(Ur);var qr=Xr,Wr=function(t,e,n){return qr(t,e,n)<0};Rn(Wr);var jr=Xr,Gr=function(t,e,n){return jr(t,e,n)<=0};Rn(Gr);var zr,Hr,$r,Jr,Kr=Pr,Qr=Or,Zr=Dr,ta=Ur,ea=Wr,na=Gr,ra=function(t,e,n,r){switch(e){case"===":return"object"===a(t)&&(t=t.version),"object"===a(n)&&(n=n.version),t===n;case"!==":return"object"===a(t)&&(t=t.version),"object"===a(n)&&(n=n.version),t!==n;case"":case"=":case"==":return Kr(t,n,r);case"!=":return Qr(t,n,r);case">":return Zr(t,n,r);case">=":return ta(t,n,r);case"<":return ea(t,n,r);case"<=":return na(t,n,r);default:throw new TypeError("Invalid operator: ".concat(e))}};function aa(){if(Jr)return $r;Jr=1;var t=function(){function t(e,a){var s=this;if(i(this,t),a=n(a),e instanceof t)return e.loose===!!a.loose&&e.includePrerelease===!!a.includePrerelease?e:new t(e.raw,a);if(e instanceof r)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=a,this.loose=!!a.loose,this.includePrerelease=!!a.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map((function(t){return s.parseRange(t.trim())})).filter((function(t){return t.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: ".concat(this.raw));if(this.set.length>1){var o=this.set[0];if(this.set=this.set.filter((function(t){return!m(t[0])})),0===this.set.length)this.set=[o];else if(this.set.length>1){var h,l=w(this.set);try{for(l.s();!(h=l.n()).done;){var u=h.value;if(1===u.length&&g(u[0])){this.set=[u];break}}}catch(t){l.e(t)}finally{l.f()}}}this.format()}return o(t,[{key:"format",value:function(){return this.range=this.set.map((function(t){return t.join(" ").trim()})).join("||").trim(),this.range}},{key:"toString",value:function(){return this.range}},{key:"parseRange",value:function(t){var n=this,i=((this.options.includePrerelease&&d)|(this.options.loose&&v))+":"+t,s=e.get(i);if(s)return s;var o=this.options.loose,g=o?h[l.HYPHENRANGELOOSE]:h[l.HYPHENRANGE];t=t.replace(g,M(this.options.includePrerelease)),a("hyphen replace",t),t=t.replace(h[l.COMPARATORTRIM],u),a("comparator trim",t),t=t.replace(h[l.TILDETRIM],c),a("tilde trim",t),t=t.replace(h[l.CARETTRIM],f),a("caret trim",t);var y=t.split(" ").map((function(t){return k(t,n.options)})).join(" ").split(/\s+/).map((function(t){return C(t,n.options)}));o&&(y=y.filter((function(t){return a("loose invalid filter",t,n.options),!!t.match(h[l.COMPARATORLOOSE])}))),a("range list",y);var b,x=new Map,E=y.map((function(t){return new r(t,n.options)})),I=w(E);try{for(I.s();!(b=I.n()).done;){var A=b.value;if(m(A))return[A];x.set(A.value,A)}}catch(t){I.e(t)}finally{I.f()}x.size>1&&x.has("")&&x.delete("");var S=p(x.values());return e.set(i,S),S}},{key:"intersects",value:function(e,n){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some((function(t){return y(t,n)&&e.set.some((function(e){return y(e,n)&&t.every((function(t){return e.every((function(e){return t.intersects(e,n)}))}))}))}))}},{key:"test",value:function(t){if(!t)return!1;if("string"==typeof t)try{t=new s(t,this.options)}catch(t){return!1}for(var e=0;e<this.set.length;e++)if(F(this.set[e],t,this.options))return!0;return!1}}]),t}();$r=t;var e=new Yr({max:1e3}),n=_n,r=function(){if(Hr)return zr;Hr=1;var t=Symbol("SemVer ANY"),e=function(){function e(r,a){if(i(this,e),a=n(a),r instanceof e){if(r.loose===!!a.loose)return r;r=r.value}r=r.trim().split(/\s+/).join(" "),h("comparator",r,a),this.options=a,this.loose=!!a.loose,this.parse(r),this.semver===t?this.value="":this.value=this.operator+this.semver.version,h("comp",this)}return o(e,[{key:"parse",value:function(e){var n=this.options.loose?r[a.COMPARATORLOOSE]:r[a.COMPARATOR],i=e.match(n);if(!i)throw new TypeError("Invalid comparator: ".concat(e));this.operator=void 0!==i[1]?i[1]:"","="===this.operator&&(this.operator=""),i[2]?this.semver=new l(i[2],this.options.loose):this.semver=t}},{key:"toString",value:function(){return this.value}},{key:"test",value:function(e){if(h("Comparator.test",e,this.options.loose),this.semver===t||e===t)return!0;if("string"==typeof e)try{e=new l(e,this.options)}catch(t){return!1}return s(e,this.operator,this.semver,this.options)}},{key:"intersects",value:function(t,r){if(!(t instanceof e))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new u(t.value,r).test(this.value):""===t.operator?""===t.value||new u(this.value,r).test(t.semver):!((r=n(r)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===t.value)||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||t.value.startsWith("<0.0.0"))||(!this.operator.startsWith(">")||!t.operator.startsWith(">"))&&(!this.operator.startsWith("<")||!t.operator.startsWith("<"))&&(this.semver.version!==t.semver.version||!this.operator.includes("=")||!t.operator.includes("="))&&!(s(this.semver,"<",t.semver,r)&&this.operator.startsWith(">")&&t.operator.startsWith("<"))&&!(s(this.semver,">",t.semver,r)&&this.operator.startsWith("<")&&t.operator.startsWith(">")))}}],[{key:"ANY",get:function(){return t}}]),e}();zr=e;var n=_n,r=Xn.safeRe,a=Xn.t,s=ra,h=Yn,l=$n,u=aa();return zr}(),a=Yn,s=$n,h=Xn.safeRe,l=Xn.t,u=Xn.comparatorTrimReplace,c=Xn.tildeTrimReplace,f=Xn.caretTrimReplace,d=Cn.FLAG_INCLUDE_PRERELEASE,v=Cn.FLAG_LOOSE,m=function(t){return"<0.0.0-0"===t.value},g=function(t){return""===t.value},y=function(t,e){for(var n=!0,r=t.slice(),a=r.pop();n&&r.length;)n=r.every((function(t){return a.intersects(t,e)})),a=r.pop();return n},k=function(t,e){return a("comp",t,e),t=I(t,e),a("caret",t),t=x(t,e),a("tildes",t),t=S(t,e),a("xrange",t),t=R(t,e),a("stars",t),t},b=function(t){return!t||"x"===t.toLowerCase()||"*"===t},x=function(t,e){return t.trim().split(/\s+/).map((function(t){return E(t,e)})).join(" ")},E=function(t,e){var n=e.loose?h[l.TILDELOOSE]:h[l.TILDE];return t.replace(n,(function(e,n,r,i,s){var o;return a("tilde",t,e,n,r,i,s),b(n)?o="":b(r)?o=">=".concat(n,".0.0 <").concat(+n+1,".0.0-0"):b(i)?o=">=".concat(n,".").concat(r,".0 <").concat(n,".").concat(+r+1,".0-0"):s?(a("replaceTilde pr",s),o=">=".concat(n,".").concat(r,".").concat(i,"-").concat(s," <").concat(n,".").concat(+r+1,".0-0")):o=">=".concat(n,".").concat(r,".").concat(i," <").concat(n,".").concat(+r+1,".0-0"),a("tilde return",o),o}))},I=function(t,e){return t.trim().split(/\s+/).map((function(t){return A(t,e)})).join(" ")},A=function(t,e){a("caret",t,e);var n=e.loose?h[l.CARETLOOSE]:h[l.CARET],r=e.includePrerelease?"-0":"";return t.replace(n,(function(e,n,i,s,o){var h;return a("caret",t,e,n,i,s,o),b(n)?h="":b(i)?h=">=".concat(n,".0.0").concat(r," <").concat(+n+1,".0.0-0"):b(s)?h="0"===n?">=".concat(n,".").concat(i,".0").concat(r," <").concat(n,".").concat(+i+1,".0-0"):">=".concat(n,".").concat(i,".0").concat(r," <").concat(+n+1,".0.0-0"):o?(a("replaceCaret pr",o),h="0"===n?"0"===i?">=".concat(n,".").concat(i,".").concat(s,"-").concat(o," <").concat(n,".").concat(i,".").concat(+s+1,"-0"):">=".concat(n,".").concat(i,".").concat(s,"-").concat(o," <").concat(n,".").concat(+i+1,".0-0"):">=".concat(n,".").concat(i,".").concat(s,"-").concat(o," <").concat(+n+1,".0.0-0")):(a("no pr"),h="0"===n?"0"===i?">=".concat(n,".").concat(i,".").concat(s).concat(r," <").concat(n,".").concat(i,".").concat(+s+1,"-0"):">=".concat(n,".").concat(i,".").concat(s).concat(r," <").concat(n,".").concat(+i+1,".0-0"):">=".concat(n,".").concat(i,".").concat(s," <").concat(+n+1,".0.0-0")),a("caret return",h),h}))},S=function(t,e){return a("replaceXRanges",t,e),t.split(/\s+/).map((function(t){return T(t,e)})).join(" ")},T=function(t,e){t=t.trim();var n=e.loose?h[l.XRANGELOOSE]:h[l.XRANGE];return t.replace(n,(function(n,r,i,s,o,h){a("xRange",t,n,r,i,s,o,h);var l=b(i),u=l||b(s),c=u||b(o),f=c;return"="===r&&f&&(r=""),h=e.includePrerelease?"-0":"",l?n=">"===r||"<"===r?"<0.0.0-0":"*":r&&f?(u&&(s=0),o=0,">"===r?(r=">=",u?(i=+i+1,s=0,o=0):(s=+s+1,o=0)):"<="===r&&(r="<",u?i=+i+1:s=+s+1),"<"===r&&(h="-0"),n="".concat(r+i,".").concat(s,".").concat(o).concat(h)):u?n=">=".concat(i,".0.0").concat(h," <").concat(+i+1,".0.0-0"):c&&(n=">=".concat(i,".").concat(s,".0").concat(h," <").concat(i,".").concat(+s+1,".0-0")),a("xRange return",n),n}))},R=function(t,e){return a("replaceStars",t,e),t.trim().replace(h[l.STAR],"")},C=function(t,e){return a("replaceGTE0",t,e),t.trim().replace(h[e.includePrerelease?l.GTE0PRE:l.GTE0],"")},M=function(t){return function(e,n,r,a,i,s,o,h,l,u,c,f,d){return n=b(r)?"":b(a)?">=".concat(r,".0.0").concat(t?"-0":""):b(i)?">=".concat(r,".").concat(a,".0").concat(t?"-0":""):s?">=".concat(n):">=".concat(n).concat(t?"-0":""),h=b(l)?"":b(u)?"<".concat(+l+1,".0.0-0"):b(c)?"<".concat(l,".").concat(+u+1,".0-0"):f?"<=".concat(l,".").concat(u,".").concat(c,"-").concat(f):t?"<".concat(l,".").concat(u,".").concat(+c+1,"-0"):"<=".concat(h),"".concat(n," ").concat(h).trim()}},F=function(t,e,n){for(var i=0;i<t.length;i++)if(!t[i].test(e))return!1;if(e.prerelease.length&&!n.includePrerelease){for(var s=0;s<t.length;s++)if(a(t[s].semver),t[s].semver!==r.ANY&&t[s].semver.prerelease.length>0){var o=t[s].semver;if(o.major===e.major&&o.minor===e.minor&&o.patch===e.patch)return!0}return!1}return!0};return $r}Rn(ra);var ia,sa,oa=aa(),ha=function(t,e,n){try{e=new oa(e,n)}catch(t){return!1}return e.test(t)},la={valid:er,coerce:sr,satisfies:Rn(ha),SEMVER_SPEC_VERSION:Mn.SEMVER_SPEC_VERSION},ua=0,ca=1,fa=2,da=[0,1,2,2,3,0],va=function(){function t(e,r,a,s){var o;if(i(this,t),h(this,"autoUpdate",!0),h(this,"skeleton",void 0),h(this,"states",void 0),this._app=e,this._position=new n.Vec3,1===re.length){var l,u=w((o=new re(r)).pages);try{for(u.s();!(l=u.n()).done;){var c=l.value;c.setTexture(new Tn(s[c.name]))}}catch(t){u.e(t)}finally{u.f()}}else o=new re(r,(function(t){return new Tn(s[t])}));var f=new yn(new fe(o));f.scale*=.01;var d=f.readSkeletonData(a);this.skeletonVersion=la.valid(la.coerce(d.version)),this._spine_3_6_0=la.satisfies(this.skeletonVersion,"<=3.6.0"),this._spine_3_7_99=la.satisfies(this.skeletonVersion,"<=3.7.99"),this._spine_4_0_X=la.satisfies(this.skeletonVersion,"~4.0.0"),this._spine_4_1_X=la.satisfies(this.skeletonVersion,"~4.1.23"),this.skeleton=new Ce(d),this.skeleton.updateWorldTransform(),this.stateData=new Kt(this.skeleton.data),this.states=[new _t(this.stateData)],this.clipper=new gn,this._node=new n.GraphNode,this._meshes=[],this._meshInstances=[],this._materials={},this._tint={},this._aabb=new n.BoundingBox,this._aabbTempArray=[],this._aabbTempOffset=new n.Vec2,this._aabbTempSize=new n.Vec2,this._renderCounts={vertexCount:0,indexCount:0},this._vertexFormat=null,this._vertexBuffer=null,this._indexBuffer=null,this._priority=0,this._timeScale=1,this._layers=[n.LAYERID_UI],this.init(),this._hidden=!1}return o(t,[{key:"destroy",value:function(){this.removeFromLayers();for(var t=0;t<this._meshInstances.length;t++)this._meshInstances[t].mesh.vertexBuffer=null,this._meshInstances[t].mesh.indexBuffer.length=0,this._meshInstances[t].material=null;this._vertexBuffer&&(this._vertexBuffer.destroy(),this._vertexBuffer=null),this._indexBuffer&&(this._indexBuffer.destroy(),this._indexBuffer=null),this._meshInstances=[],this.skeleton=null,this.stateData=null,this._materials={},this._node=null}},{key:"hide",value:function(){if(!this._hidden){for(var t=0,e=this._meshInstances.length;t<e;t++)this._meshInstances[t].visible=!1;this._hidden=!0}}},{key:"show",value:function(){if(this._hidden){for(var t=0,e=this._meshInstances.length;t<e;t++)this._meshInstances[t].visible=!0;this._hidden=!1}}},{key:"init",value:function(){this._vertexFormat=new n.VertexFormat(this._app.graphicsDevice,[{semantic:n.SEMANTIC_POSITION,components:2,type:n.TYPE_FLOAT32},{semantic:n.SEMANTIC_NORMAL,components:4,type:n.TYPE_UINT8,normalize:!0},{semantic:n.SEMANTIC_TEXCOORD0,components:2,type:n.TYPE_FLOAT32},{semantic:n.SEMANTIC_COLOR,components:4,type:n.TYPE_UINT8,normalize:!0}]);for(var t=this.skeleton.drawOrder,e=0,r=t.length;e<r;e++)this.initSlot(t[e])}},{key:"initSlot",value:function(t){t.positions=[],t.uvs=[],t.indices=[],t.vertexColor={},t._active={name:"",type:ua},this.initAttachment(t)}},{key:"createMaterial",value:function(t){var e=new n.StandardMaterial;if(e.emissiveMap=t,e.emissiveVertexColor=!0,e.opacityMap=t,e.opacityVertexColor=!0,e.depthWrite=!1,e.cull=n.CULLFACE_NONE,e.blendType=n.BLEND_PREMULTIPLIED,this._spine_3_6_0){var r=["gl_FragColor.rgb *= vVertexColor.a;","gl_FragColor.a = dAlpha;"].join("\n");e.chunks.outputAlphaPremulPS=r}return e.update(),e}},{key:"initAttachment",value:function(t){var e=t.attachment;if(e){t._active.name=e.name,e instanceof ue?t._active.type=fa:e instanceof oe&&(t._active.type=ca);var r=null;if(e.region&&(e.region.texture&&(r=e.region.texture.pcTexture),e.region.page&&e.region.page.texture&&(r=e.region.page.texture.pcTexture)),r)if(r instanceof n.StandardMaterial)this._materials[r.name]=r,t.material=r.name;else{var a=null;if(r.name?a=r.name:r.getSource()instanceof Image&&(a=r.getSource().getAttribute("src")),a){if(void 0===this._materials[a]){var i=this.createMaterial(r);this._materials[a]=i}t.material=a}}}}},{key:"updateSlot",value:function(t,e){var n=t.attachment,r=n.name,a=n instanceof ue?fa:n instanceof oe?ca:ua;t._active.name===r&&t._active.type===a||this.initAttachment(t),t.positions.length=0,n instanceof ue?this._spine_4_1_X?n.computeWorldVertices(t,t.positions,0,2):n.computeWorldVertices(t.bone,t.positions,0,2):n instanceof oe&&n.computeWorldVertices(t,0,n.worldVerticesLength,t.positions,0,2);var i=this._tint[r];t.vertexColor={r:Math.round(255*t.color.r*(i?i.r:1)),g:Math.round(255*t.color.g*(i?i.g:1)),b:Math.round(255*t.color.b*(i?i.b:1)),a:Math.round(255*t.color.a*(i?i.a:1))};var s,o,h=n.triangles||da;if(e.isClipping()){e.clipTriangles(t.positions,0,h,h.length,n.uvs,E.WHITE,E.WHITE,false),t.positions.length=0,t.uvs.length=0;for(o=e.clippedVertices.length,s=0;s<o;s+=8)t.positions.push(e.clippedVertices[s],e.clippedVertices[s+1]),t.uvs.push(e.clippedVertices[s+6],1-e.clippedVertices[s+7]);t.indices=e.clippedTriangles.slice()}else{for(t.uvs.length=0,o=t.positions.length,s=0;s<o;s+=2)t.uvs.push(n.uvs[s],1-n.uvs[s+1]);t.indices=h}this._renderCounts.vertexCount+=t.positions.length/2,this._renderCounts.indexCount+=t.indices.length}},{key:"updateSkeleton",value:function(t){this._renderCounts.vertexCount=0,this._renderCounts.indexCount=0;var e=this.clipper;for(var n=this.skeleton.drawOrder,r=n.length,a=0;a<r;a++){var i=n[a];if(this._spine_3_7_99||i.bone.active){0;var s=i.getAttachment();s instanceof Zt?e.clipStart(i,s):s instanceof ue||s instanceof oe?this.updateSlot(i,e):this._spine_3_7_99||e.clipEndWithSlot(i)}else e.clipEndWithSlot(i)}}},{key:"render",value:function(){if(this._meshInstances.forEach((function(t){t.material=null})),this.removeFromLayers(),this._meshes=[],this._meshInstances.length=0,this._renderCounts.indexCount>0&&this._renderCounts.vertexCount>0){this.skeleton.getBounds(this._aabbTempOffset,this._aabbTempSize,this._aabbTempArray),this._aabb.center=new n.Vec3(this._aabbTempOffset.x,this._aabbTempOffset.y,0),this._aabb.halfExtents=new n.Vec3(.5*this._aabbTempSize.x,.5*this._aabbTempSize.y,0),(!this._vertexBuffer||this._vertexBuffer.getNumVertices()<this._renderCounts.vertexCount)&&(this._vertexBuffer&&this._vertexBuffer.destroy(),this._vertexBuffer=new n.VertexBuffer(this._app.graphicsDevice,this._vertexFormat,this._renderCounts.vertexCount)),(!this._indexBuffer||this._indexBuffer.getNumIndices()<this._renderCounts.indexCount)&&(this._indexBuffer&&this._indexBuffer.destroy(),this._indexBuffer=new n.IndexBuffer(this._app.graphicsDevice,n.INDEXFORMAT_UINT16,this._renderCounts.indexCount));for(var t=null,e=0,r=0,a=new n.VertexIterator(this._vertexBuffer),i=new Uint16Array(this._indexBuffer.lock()),s=0,o=0,h=this.skeleton.drawOrder,l=h.length,u=0;u<l;u++){var c=h[u];if(c.attachment&&c.material&&c.positions.length>0&&c.indices.length>0){t&&t!==c.material&&(this.SubmitBatch(e,r,t),t=c.material,e=s,r=0),t=c.material;var f=c.positions,d=c.vertexColor.r,v=c.vertexColor.g,m=c.vertexColor.b,p=c.vertexColor.a,g=c.uvs,y=void 0,w=f.length/2;for(y=0;y<w;y++)a.element[n.SEMANTIC_POSITION].set(f[2*y],f[2*y+1]),a.element[n.SEMANTIC_NORMAL].set(0,255,0,0),a.element[n.SEMANTIC_COLOR].set(d,v,m,p),a.element[n.SEMANTIC_TEXCOORD0].set(g[2*y],1-g[2*y+1]),a.next();var k=c.indices,b=k.length;for(y=0;y<b;y++)i[s+y]=k[y]+o;r+=b,s+=b,o+=w}}a.end(),this._indexBuffer.unlock(),this.SubmitBatch(e,r,t)}this.addToLayers()}},{key:"SubmitBatch",value:function(t,e,r){if(e>0){var a=new n.Mesh(this._app.graphicsDevice);a.vertexBuffer=this._vertexBuffer,a.indexBuffer[0]=this._indexBuffer,a.primitive[0].type=n.PRIMITIVE_TRIANGLES,a.primitive[0].base=t,a.primitive[0].count=e,a.primitive[0].indexed=!0,a.aabb=this._aabb,this._meshes.push(a);var i=new n.MeshInstance(a,this._materials[r],this._node);i.drawOrder=this.priority+this._meshInstances.length,i.visible=!this._hidden,this._meshInstances.push(i)}}},{key:"update",value:function(t){if(!this._hidden){var e;t*=this._timeScale;var n=this.states.length;for(e=0;e<n;e++)this.states[e].update(t);for(e=0;e<n;e++)this.states[e].apply(this.skeleton);this.autoUpdate&&this.skeleton.updateWorldTransform(),this.updateSkeleton(),this.render()}}},{key:"setPosition",value:function(t){this._position.copy(t)}},{key:"setTint",value:function(t,e){this._tint[t]=e}},{key:"removeFromLayers",value:function(){if(this._meshInstances.length)for(var t=0;t<this._layers.length;t++){var e=this._app.scene.layers.getLayerById(this._layers[t]);e&&e.removeMeshInstances(this._meshInstances)}}},{key:"addToLayers",value:function(){if(this._meshInstances.length)for(var t=0;t<this._layers.length;t++){var e=this._app.scene.layers.getLayerById(this._layers[t]);e&&e.addMeshInstances(this._meshInstances)}}},{key:"state",get:function(){return this.states[0]}},{key:"priority",get:function(){return this._priority},set:function(t){this._priority=t}},{key:"timeScale",get:function(){return this._timeScale},set:function(t){this._timeScale=t}},{key:"layers",get:function(){return this._layers},set:function(t){this.removeFromLayers(),this._layers=t||[],this.addToLayers()}}]),t}(),ma=function(e){l(r,e);var n=d(r);function r(t,e){var a;return i(this,r),(a=n.call(this,t,e)).on("set_atlasAsset",a.onSetAsset,f(a)),a.on("set_textureAssets",a.onSetAssets,f(a)),a.on("set_skeletonAsset",a.onSetAsset,f(a)),a.on("set_atlasData",a.onSetResource,f(a)),a.on("set_textures",a.onSetResource,f(a)),a.on("set_skeletonData",a.onSetResource,f(a)),a}return o(r,[{key:"_createSpine",value:function(){this.data.spine&&(this.data.spine.destroy(),this.data.spine=null);for(var e={},n=0,r=this.textureAssets.length;n<r;n++){var a=this.system.app.assets.get(this.textureAssets[n]),i=a.name?a.name:a.file?a.file.filename:null;i||(i=t.path.getBasename(a.file.url));var s=i.indexOf("?");-1!==s&&(i=i.substring(0,s)),e[i]=a.resource}this.data.spine=new va(this.system.app,this.atlasData,this.skeletonData,e),this.state=this.data.spine.state,this.states=this.data.spine.states,this.skeleton=this.data.spine.skeleton,this.entity.addChild(this.data.spine._node)}},{key:"_onAssetReady",value:function(t){var e=t.type,n=t.resource;"texture"===e&&this.textures.push(n),"json"===e&&(this.skeletonData=n),"text"===e&&(this.atlasData=n)}},{key:"_onAssetAdd",value:function(t){t.off("change",this.onAssetChanged,this),t.on("change",this.onAssetChanged,this),t.off("remove",this.onAssetRemoved,this),t.on("remove",this.onAssetRemoved,this),t.ready(this._onAssetReady,this),this.system.app.assets.load(t)}},{key:"onSetResource",value:function(){this.data.atlasData&&this.data.textures.length&&this.data.skeletonData&&this._createSpine()}},{key:"onSetAsset",value:function(e,n,r){var a=this.system.app.assets,i=null;if(n&&(i=a.get(n))&&(i.off("change",this.onAssetChanged),i.off("remove",this.onAssetRemoved)),r){var s=r;r instanceof t.Asset&&(s=r.id,this.data[e]=s),(i=a.get(s))?this._onAssetAdd(i):a.on("add:".concat(s))}}},{key:"onSetAssets",value:function(e,n,r){var a,i,s=this.system.app.assets,o=null;if(n.length)for(a=0,i=n.length;a<i;a++)(o=s.get(n[a]))&&(o.off("change",this.onAssetChanged),o.off("remove",this.onAssetRemoved));if(r&&r.length){var h=r.map((function(e){return e instanceof t.Asset?e.id:e}));for(a=0,i=r.length;a<i;a++)(o=s.get(h[a]))?this._onAssetAdd(o):s.on("add:".concat(h[a]))}}},{key:"onAssetChanged",value:function(t,e,n,r){}},{key:"onAssetRemoved",value:function(t){}},{key:"onEnable",value:function(){t.Component.prototype.onEnable.call(this);var e=this.data.spine;e&&e.addToLayers()}},{key:"onDisable",value:function(){t.Component.prototype.onDisable.call(this);var e=this.data.spine;e&&e.removeFromLayers()}},{key:"hide",value:function(){this.data.spine&&this.data.spine.hide()}},{key:"show",value:function(){this.data.spine&&this.data.spine.show()}},{key:"removeComponent",value:function(){var t;if(this.atlasAsset&&(t=this.system.app.assets.get(this.atlasAsset))&&(t.off("change",this.onAssetChanged),t.off("remove",this.onAssetRemoved)),this.skeletonAsset&&(t=this.system.app.assets.get(this.skeletonAsset))&&(t.off("change",this.onAssetChanged),t.off("remove",this.onAssetRemoved)),this.textureAssets&&this.textureAssets.length)for(var e=0;e<this.textureAssets.length;e++)(t=this.system.app.assets.get(this.textureAssets[e]))&&(t.off("change",this.onAssetChanged),t.off("remove",this.onAssetRemoved))}}]),r}(t.Component),pa=o((function t(){i(this,t),this.enabled=!0,this.atlasAsset=null,this.textureAssets=[],this.skeletonAsset=null,this.speed=1,this.spine=null,this.atlasData=null,this.textures=[],this.skeletonData=null})),ga=function(t){l(n,t);var e=d(n);function n(t){var r;return i(this,n),(r=e.call(this,t)).id="spine",r.ComponentType=ma,r.DataType=pa,r.schema=["enabled","atlasAsset","textureAssets","skeletonAsset","atlasData","textures","skeletonData","speed","spine"],r.on("beforeremove",r.onBeforeRemove,f(r)),r.app.systems.on("update",r.onUpdate,f(r)),r}return o(n,[{key:"initializeComponentData",value:function(t,e,r){r=["enabled","atlasAsset","textureAssets","skeletonAsset","atlasData","textures","skeletonData","spine"],v(u(n.prototype),"initializeComponentData",this).call(this,t,e,r)}},{key:"onBeforeRemove",value:function(t,e){var n=t.spine.data;n.spine&&n.spine.destroy(),t.spine.removeComponent()}},{key:"onUpdate",value:function(t){var e=this.store;for(var n in e)if(e.hasOwnProperty(n)){var r=e[n],a=r.data;a.enabled&&r.entity.enabled&&a.spine&&(a.spine.setPosition(r.entity.getPosition()),a.spine.update(a.speed*t))}}}]),n}(t.ComponentSystem);return ia=n.Application.getApplication(),sa=new ga(ia),ia.systems.add(sa),In}(pc);
