/* Copyright 2015-2020 PlayCanvas Ltd */

var spine,__extends=this&&this.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();!function(V){var N,c,t,k=(e.prototype.apply=function(t,e,n,i,r,a,s,o){if(null==t)throw new Error("skeleton cannot be null.");i&&0!=this.duration&&(n%=this.duration,0<e&&(e%=this.duration));for(var h=this.timelines,l=0,u=h.length;l<u;l++)h[l].apply(t,e,n,r,a,s,o)},e.binarySearch=function(t,e,n){void 0===n&&(n=1);var i=0,r=t.length/n-2;if(0==r)return n;for(var a=r>>>1;;){if(t[(a+1)*n]<=e?i=a+1:r=a,i==r)return(i+1)*n;a=i+r>>>1}},e.linearSearch=function(t,e,n){for(var i=0,r=t.length-n;i<=r;i+=n)if(t[i]>e)return i;return-1},e);function e(t,e,n){if(null==t)throw new Error("name cannot be null.");if(null==e)throw new Error("timelines cannot be null.");this.name=t,this.timelines=e,this.duration=n}V.Animation=k,(n=N=V.MixPose||(V.MixPose={}))[n.setup=0]="setup",n[n.current=1]="current",n[n.currentLayered=2]="currentLayered",(r=c=V.MixDirection||(V.MixDirection={}))[r.in=0]="in",r[r.out=1]="out",(s=t=V.TimelineType||(V.TimelineType={}))[s.rotate=0]="rotate",s[s.translate=1]="translate",s[s.scale=2]="scale",s[s.shear=3]="shear",s[s.attachment=4]="attachment",s[s.color=5]="color",s[s.deform=6]="deform",s[s.event=7]="event",s[s.drawOrder=8]="drawOrder",s[s.ikConstraint=9]="ikConstraint",s[s.transformConstraint=10]="transformConstraint",s[s.pathConstraintPosition=11]="pathConstraintPosition",s[s.pathConstraintSpacing=12]="pathConstraintSpacing",s[s.pathConstraintMix=13]="pathConstraintMix",s[s.twoColor=14]="twoColor";var n=(y.prototype.getFrameCount=function(){return this.curves.length/y.BEZIER_SIZE+1},y.prototype.setLinear=function(t){this.curves[t*y.BEZIER_SIZE]=y.LINEAR},y.prototype.setStepped=function(t){this.curves[t*y.BEZIER_SIZE]=y.STEPPED},y.prototype.getCurveType=function(t){t*=y.BEZIER_SIZE;if(t==this.curves.length)return y.LINEAR;t=this.curves[t];return t==y.LINEAR?y.LINEAR:t==y.STEPPED?y.STEPPED:y.BEZIER},y.prototype.setCurve=function(t,e,n,i,r){var a=.03*(2*-e+i),s=.03*(2*-n+r),o=.006*(3*(e-i)+1),h=.006*(3*(n-r)+1),l=2*a+o,u=2*s+h,p=.3*e+a+.16666667*o,c=.3*n+s+.16666667*h,d=t*y.BEZIER_SIZE,f=this.curves;f[d++]=y.BEZIER;for(var m=p,g=c,v=d+y.BEZIER_SIZE-1;d<v;d+=2)f[d]=m,f[d+1]=g,p+=l,c+=u,l+=o,u+=h,m+=p,g+=c},y.prototype.getCurvePercent=function(t,e){e=V.MathUtils.clamp(e,0,1);var n=this.curves,i=t*y.BEZIER_SIZE,t=n[i];if(t==y.LINEAR)return e;if(t==y.STEPPED)return 0;for(var r=0,a=++i,s=i+y.BEZIER_SIZE-1;i<s;i+=2)if(e<=(r=n[i])){var o=void 0,h=void 0;return(h=i==a?o=0:(o=n[i-2],n[i-1]))+(n[i+1]-h)*(e-o)/(r-o)}t=n[i-1];return t+(1-t)*(e-r)/(1-r)},y.LINEAR=0,y.STEPPED=1,y.BEZIER=2,y.BEZIER_SIZE=19,y);function y(t){if(t<=0)throw new Error("frameCount must be > 0: "+t);this.curves=V.Utils.newFloatArray((t-1)*y.BEZIER_SIZE)}V.CurveTimeline=n;var i,r=(__extends(d,i=n),d.prototype.getPropertyId=function(){return(t.rotate<<24)+this.boneIndex},d.prototype.setFrame=function(t,e,n){t<<=1,this.frames[t]=e,this.frames[t+d.ROTATION]=n},d.prototype.apply=function(t,e,n,i,r,a,s){var o,h,l=this.frames,u=t.bones[this.boneIndex];if(n<l[0])switch(a){case N.setup:return void(u.rotation=u.data.rotation);case N.current:var p=u.data.rotation-u.rotation;p-=360*(16384-(16384.499999999996-p/360|0)),u.rotation+=p*r}else n>=l[l.length-d.ENTRIES]?a==N.setup?u.rotation=u.data.rotation+l[l.length+d.PREV_ROTATION]*r:(o=u.data.rotation+l[l.length+d.PREV_ROTATION]-u.rotation,o-=360*(16384-(16384.499999999996-o/360|0)),u.rotation+=o*r):(t=l[(h=k.binarySearch(l,n,d.ENTRIES))+d.PREV_ROTATION],o=l[h],o=this.getCurvePercent((h>>1)-1,1-(n-o)/(l[h+d.PREV_TIME]-o)),h=l[h+d.ROTATION]-t,h=t+(h-=360*(16384-(16384.499999999996-h/360|0)))*o,a==N.setup?(h-=360*(16384-(16384.499999999996-h/360|0)),u.rotation=u.data.rotation+h*r):(h=u.data.rotation+h-u.rotation,h-=360*(16384-(16384.499999999996-h/360|0)),u.rotation+=h*r))},d.ENTRIES=2,d.PREV_TIME=-2,d.PREV_ROTATION=-1,d.ROTATION=1,d);function d(t){var e=i.call(this,t)||this;return e.frames=V.Utils.newFloatArray(t<<1),e}V.RotateTimeline=r;var a,s=(__extends(f,a=n),f.prototype.getPropertyId=function(){return(t.translate<<24)+this.boneIndex},f.prototype.setFrame=function(t,e,n,i){t*=f.ENTRIES,this.frames[t]=e,this.frames[t+f.X]=n,this.frames[t+f.Y]=i},f.prototype.apply=function(t,e,n,i,r,a,s){var o=this.frames,h=t.bones[this.boneIndex];if(n<o[0])switch(a){case N.setup:return h.x=h.data.x,void(h.y=h.data.y);case N.current:h.x+=(h.data.x-h.x)*r,h.y+=(h.data.y-h.y)*r}else{var l,u=0,p=0;n>=o[o.length-f.ENTRIES]?(u=o[o.length+f.PREV_X],p=o[o.length+f.PREV_Y]):(u=o[(l=k.binarySearch(o,n,f.ENTRIES))+f.PREV_X],p=o[l+f.PREV_Y],t=o[l],t=this.getCurvePercent(l/f.ENTRIES-1,1-(n-t)/(o[l+f.PREV_TIME]-t)),u+=(o[l+f.X]-u)*t,p+=(o[l+f.Y]-p)*t),a==N.setup?(h.x=h.data.x+u*r,h.y=h.data.y+p*r):(h.x+=(h.data.x+u-h.x)*r,h.y+=(h.data.y+p-h.y)*r)}},f.ENTRIES=3,f.PREV_TIME=-3,f.PREV_X=-2,f.PREV_Y=-1,f.X=1,f.Y=2,f);function f(t){var e=a.call(this,t)||this;return e.frames=V.Utils.newFloatArray(t*f.ENTRIES),e}V.TranslateTimeline=s;var o,r=(__extends(m,o=s),m.prototype.getPropertyId=function(){return(t.scale<<24)+this.boneIndex},m.prototype.apply=function(t,e,n,i,r,a,s){var o=this.frames,h=t.bones[this.boneIndex];if(n<o[0])switch(a){case N.setup:return h.scaleX=h.data.scaleX,void(h.scaleY=h.data.scaleY);case N.current:h.scaleX+=(h.data.scaleX-h.scaleX)*r,h.scaleY+=(h.data.scaleY-h.scaleY)*r}else{var l,u,p=0,t=0;t=n>=o[o.length-m.ENTRIES]?(p=o[o.length+m.PREV_X]*h.data.scaleX,o[o.length+m.PREV_Y]*h.data.scaleY):(p=o[(l=k.binarySearch(o,n,m.ENTRIES))+m.PREV_X],t=o[l+m.PREV_Y],u=o[l],u=this.getCurvePercent(l/m.ENTRIES-1,1-(n-u)/(o[l+m.PREV_TIME]-u)),p=(p+(o[l+m.X]-p)*u)*h.data.scaleX,(t+(o[l+m.Y]-t)*u)*h.data.scaleY),1==r?(h.scaleX=p,h.scaleY=t):(u=l=0,u=a==N.setup?(l=h.data.scaleX,h.data.scaleY):(l=h.scaleX,h.scaleY),s==c.out?(p=Math.abs(p)*V.MathUtils.signum(l),t=Math.abs(t)*V.MathUtils.signum(u)):(l=Math.abs(l)*V.MathUtils.signum(p),u=Math.abs(u)*V.MathUtils.signum(t)),h.scaleX=l+(p-l)*r,h.scaleY=u+(t-u)*r)}},m);function m(t){return o.call(this,t)||this}V.ScaleTimeline=r;var h,s=(__extends(g,h=s),g.prototype.getPropertyId=function(){return(t.shear<<24)+this.boneIndex},g.prototype.apply=function(t,e,n,i,r,a,s){var o=this.frames,h=t.bones[this.boneIndex];if(n<o[0])switch(a){case N.setup:return h.shearX=h.data.shearX,void(h.shearY=h.data.shearY);case N.current:h.shearX+=(h.data.shearX-h.shearX)*r,h.shearY+=(h.data.shearY-h.shearY)*r}else{var l,u=0,p=0;n>=o[o.length-g.ENTRIES]?(u=o[o.length+g.PREV_X],p=o[o.length+g.PREV_Y]):(u=o[(l=k.binarySearch(o,n,g.ENTRIES))+g.PREV_X],p=o[l+g.PREV_Y],t=o[l],t=this.getCurvePercent(l/g.ENTRIES-1,1-(n-t)/(o[l+g.PREV_TIME]-t)),u+=(o[l+g.X]-u)*t,p+=(o[l+g.Y]-p)*t),a==N.setup?(h.shearX=h.data.shearX+u*r,h.shearY=h.data.shearY+p*r):(h.shearX+=(h.data.shearX+u-h.shearX)*r,h.shearY+=(h.data.shearY+p-h.shearY)*r)}},g);function g(t){return h.call(this,t)||this}V.ShearTimeline=s;var l,s=(__extends(v,l=n),v.prototype.getPropertyId=function(){return(t.color<<24)+this.slotIndex},v.prototype.setFrame=function(t,e,n,i,r,a){t*=v.ENTRIES,this.frames[t]=e,this.frames[t+v.R]=n,this.frames[t+v.G]=i,this.frames[t+v.B]=r,this.frames[t+v.A]=a},v.prototype.apply=function(t,e,n,i,r,a,s){var o=t.slots[this.slotIndex],h=this.frames;if(n<h[0])switch(a){case N.setup:return void o.color.setFromColor(o.data.color);case N.current:var l=o.color,u=o.data.color;l.add((u.r-l.r)*r,(u.g-l.g)*r,(u.b-l.b)*r,(u.a-l.a)*r)}else{var p,c=0,d=0,f=0,m=0;n>=h[h.length-v.ENTRIES]?(c=h[(p=h.length)+v.PREV_R],d=h[p+v.PREV_G],f=h[p+v.PREV_B],m=h[p+v.PREV_A]):(c=h[(t=k.binarySearch(h,n,v.ENTRIES))+v.PREV_R],d=h[t+v.PREV_G],f=h[t+v.PREV_B],m=h[t+v.PREV_A],p=h[t],p=this.getCurvePercent(t/v.ENTRIES-1,1-(n-p)/(h[t+v.PREV_TIME]-p)),c+=(h[t+v.R]-c)*p,d+=(h[t+v.G]-d)*p,f+=(h[t+v.B]-f)*p,m+=(h[t+v.A]-m)*p),1==r?o.color.set(c,d,f,m):(l=o.color,a==N.setup&&l.setFromColor(o.data.color),l.add((c-l.r)*r,(d-l.g)*r,(f-l.b)*r,(m-l.a)*r))}},v.ENTRIES=5,v.PREV_TIME=-5,v.PREV_R=-4,v.PREV_G=-3,v.PREV_B=-2,v.PREV_A=-1,v.R=1,v.G=2,v.B=3,v.A=4,v);function v(t){var e=l.call(this,t)||this;return e.frames=V.Utils.newFloatArray(t*v.ENTRIES),e}V.ColorTimeline=s;var u,s=(__extends(w,u=n),w.prototype.getPropertyId=function(){return(t.twoColor<<24)+this.slotIndex},w.prototype.setFrame=function(t,e,n,i,r,a,s,o,h){t*=w.ENTRIES,this.frames[t]=e,this.frames[t+w.R]=n,this.frames[t+w.G]=i,this.frames[t+w.B]=r,this.frames[t+w.A]=a,this.frames[t+w.R2]=s,this.frames[t+w.G2]=o,this.frames[t+w.B2]=h},w.prototype.apply=function(t,e,n,i,r,a,s){var o=t.slots[this.slotIndex],h=this.frames;if(n<h[0])switch(a){case N.setup:return o.color.setFromColor(o.data.color),void o.darkColor.setFromColor(o.data.darkColor);case N.current:var l=o.color,u=o.darkColor,p=o.data.color,c=o.data.darkColor;l.add((p.r-l.r)*r,(p.g-l.g)*r,(p.b-l.b)*r,(p.a-l.a)*r),u.add((c.r-u.r)*r,(c.g-u.g)*r,(c.b-u.b)*r,0)}else{var d,f=0,m=0,g=0,v=0,y=0,x=0,E=0;n>=h[h.length-w.ENTRIES]?(f=h[(d=h.length)+w.PREV_R],m=h[d+w.PREV_G],g=h[d+w.PREV_B],v=h[d+w.PREV_A],y=h[d+w.PREV_R2],x=h[d+w.PREV_G2],E=h[d+w.PREV_B2]):(f=h[(t=k.binarySearch(h,n,w.ENTRIES))+w.PREV_R],m=h[t+w.PREV_G],g=h[t+w.PREV_B],v=h[t+w.PREV_A],y=h[t+w.PREV_R2],x=h[t+w.PREV_G2],E=h[t+w.PREV_B2],d=h[t],d=this.getCurvePercent(t/w.ENTRIES-1,1-(n-d)/(h[t+w.PREV_TIME]-d)),f+=(h[t+w.R]-f)*d,m+=(h[t+w.G]-m)*d,g+=(h[t+w.B]-g)*d,v+=(h[t+w.A]-v)*d,y+=(h[t+w.R2]-y)*d,x+=(h[t+w.G2]-x)*d,E+=(h[t+w.B2]-E)*d),1==r?(o.color.set(f,m,g,v),o.darkColor.set(y,x,E,1)):(l=o.color,u=o.darkColor,a==N.setup&&(l.setFromColor(o.data.color),u.setFromColor(o.data.darkColor)),l.add((f-l.r)*r,(m-l.g)*r,(g-l.b)*r,(v-l.a)*r),u.add((y-u.r)*r,(x-u.g)*r,(E-u.b)*r,0))}},w.ENTRIES=8,w.PREV_TIME=-8,w.PREV_R=-7,w.PREV_G=-6,w.PREV_B=-5,w.PREV_A=-4,w.PREV_R2=-3,w.PREV_G2=-2,w.PREV_B2=-1,w.R=1,w.G=2,w.B=3,w.A=4,w.R2=5,w.G2=6,w.B2=7,w);function w(t){var e=u.call(this,t)||this;return e.frames=V.Utils.newFloatArray(t*w.ENTRIES),e}function p(t){this.frames=V.Utils.newFloatArray(t),this.attachmentNames=new Array(t)}V.TwoColorTimeline=s,p.prototype.getPropertyId=function(){return(t.attachment<<24)+this.slotIndex},p.prototype.getFrameCount=function(){return this.frames.length},p.prototype.setFrame=function(t,e,n){this.frames[t]=e,this.attachmentNames[t]=n},p.prototype.apply=function(t,e,n,i,r,a,s){var o,h=t.slots[this.slotIndex];s!=c.out||a!=N.setup?n<(s=this.frames)[0]?a==N.setup&&(a=h.data.attachmentName,h.setAttachment(null==a?null:t.getAttachment(this.slotIndex,a))):(o=0,o=n>=s[s.length-1]?s.length-1:k.binarySearch(s,n,1)-1,o=this.attachmentNames[o],t.slots[this.slotIndex].setAttachment(null==o?null:t.getAttachment(this.slotIndex,o))):(o=h.data.attachmentName,h.setAttachment(null==o?null:t.getAttachment(this.slotIndex,o)))},s=p,V.AttachmentTimeline=s;var x,E=null,s=(__extends(M,x=n),M.prototype.getPropertyId=function(){return(t.deform<<27)+ +this.attachment.id+this.slotIndex},M.prototype.setFrame=function(t,e,n){this.frames[t]=e,this.frameVertices[t]=n},M.prototype.apply=function(t,e,n,i,r,a,s){var o=t.slots[this.slotIndex],h=o.getAttachment();if(h instanceof V.VertexAttachment&&h.applyDeform(this.attachment)){var l=o.attachmentVertices;0==l.length&&(r=1);var u=this.frameVertices,p=u[0].length,t=this.frames;if(n<t[0]){var c=h;switch(a){case N.setup:return void(l.length=0);case N.current:if(1==r){l.length=0;break}var d=V.Utils.setArraySize(l,p);if(null==c.bones)for(var f=c.vertices,m=0;m<p;m++)d[m]+=(f[m]-d[m])*r;else{r=1-r;for(m=0;m<p;m++)d[m]*=r}}}else{var g=V.Utils.setArraySize(l,p);if(n>=t[t.length-1]){var v=u[t.length-1];if(1==r)V.Utils.arrayCopy(v,0,g,0,p);else if(a==N.setup)if(null==(c=h).bones)for(var y=c.vertices,x=0;x<p;x++){var E=y[x];g[x]=E+(v[x]-E)*r}else for(var w=0;w<p;w++)g[w]=v[w]*r;else for(var M=0;M<p;M++)g[M]+=(v[M]-g[M])*r}else{var o=k.binarySearch(t,n),A=u[o-1],T=u[o],u=t[o],b=this.getCurvePercent(o-1,1-(n-u)/(t[o-1]-u));if(1==r)for(var R=0;R<p;R++){var I=A[R];g[R]=I+(T[R]-I)*b}else if(a==N.setup)if(null==(c=h).bones)for(var S=c.vertices,C=0;C<p;C++){I=A[C],E=S[C];g[C]=E+(I+(T[C]-I)*b-E)*r}else for(var _=0;_<p;_++){I=A[_];g[_]=(I+(T[_]-I)*b)*r}else for(var P=0;P<p;P++){I=A[P];g[P]+=(I+(T[P]-I)*b-g[P])*r}}}}},M);function M(t){var e=x.call(this,t)||this;return e.frames=V.Utils.newFloatArray(t),e.frameVertices=new Array(t),null==E&&(E=V.Utils.newFloatArray(64)),e}function A(t){this.frames=V.Utils.newFloatArray(t),this.events=new Array(t)}function T(t){this.frames=V.Utils.newFloatArray(t),this.drawOrders=new Array(t)}V.DeformTimeline=s,A.prototype.getPropertyId=function(){return t.event<<24},A.prototype.getFrameCount=function(){return this.frames.length},A.prototype.setFrame=function(t,e){this.frames[t]=e.time,this.events[t]=e},A.prototype.apply=function(t,e,n,i,r,a,s){if(null!=i){var o=this.frames,h=this.frames.length;if(n<e)this.apply(t,e,Number.MAX_VALUE,i,r,a,s),e=-1;else if(e>=o[h-1])return;if(!(n<o[0])){var l=0;if(e<o[0])l=0;else for(var u=o[l=k.binarySearch(o,e)];0<l&&o[l-1]==u;)l--;for(;l<h&&n>=o[l];l++)i.push(this.events[l])}}},s=A,V.EventTimeline=s,T.prototype.getPropertyId=function(){return t.drawOrder<<24},T.prototype.getFrameCount=function(){return this.frames.length},T.prototype.setFrame=function(t,e,n){this.frames[t]=e,this.drawOrders[t]=n},T.prototype.apply=function(t,e,n,i,r,a,s){var o=t.drawOrder,h=t.slots;if(s!=c.out||a!=N.setup){s=this.frames;if(n<s[0])a==N.setup&&V.Utils.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);else{var a=0,a=n>=s[s.length-1]?s.length-1:k.binarySearch(s,n)-1,l=this.drawOrders[a];if(null==l)V.Utils.arrayCopy(h,0,o,0,h.length);else for(var u=0,p=l.length;u<p;u++)o[u]=h[l[u]]}}else V.Utils.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length)},s=T,V.DrawOrderTimeline=s;var b,s=(__extends(R,b=n),R.prototype.getPropertyId=function(){return(t.ikConstraint<<24)+this.ikConstraintIndex},R.prototype.setFrame=function(t,e,n,i){t*=R.ENTRIES,this.frames[t]=e,this.frames[t+R.MIX]=n,this.frames[t+R.BEND_DIRECTION]=i},R.prototype.apply=function(t,e,n,i,r,a,s){var o,h,l=this.frames,u=t.ikConstraints[this.ikConstraintIndex];if(n<l[0])switch(a){case N.setup:return u.mix=u.data.mix,void(u.bendDirection=u.data.bendDirection);case N.current:u.mix+=(u.data.mix-u.mix)*r,u.bendDirection=u.data.bendDirection}else n>=l[l.length-R.ENTRIES]?a==N.setup?(u.mix=u.data.mix+(l[l.length+R.PREV_MIX]-u.data.mix)*r,u.bendDirection=s==c.out?u.data.bendDirection:l[l.length+R.PREV_BEND_DIRECTION]):(u.mix+=(l[l.length+R.PREV_MIX]-u.mix)*r,s==c.in&&(u.bendDirection=l[l.length+R.PREV_BEND_DIRECTION])):(h=l[(o=k.binarySearch(l,n,R.ENTRIES))+R.PREV_MIX],t=l[o],t=this.getCurvePercent(o/R.ENTRIES-1,1-(n-t)/(l[o+R.PREV_TIME]-t)),a==N.setup?(u.mix=u.data.mix+(h+(l[o+R.MIX]-h)*t-u.data.mix)*r,u.bendDirection=s==c.out?u.data.bendDirection:l[o+R.PREV_BEND_DIRECTION]):(u.mix+=(h+(l[o+R.MIX]-h)*t-u.mix)*r,s==c.in&&(u.bendDirection=l[o+R.PREV_BEND_DIRECTION])))},R.ENTRIES=3,R.PREV_TIME=-3,R.PREV_MIX=-2,R.PREV_BEND_DIRECTION=-1,R.MIX=1,R.BEND_DIRECTION=2,R);function R(t){var e=b.call(this,t)||this;return e.frames=V.Utils.newFloatArray(t*R.ENTRIES),e}V.IkConstraintTimeline=s;var I,s=(__extends(S,I=n),S.prototype.getPropertyId=function(){return(t.transformConstraint<<24)+this.transformConstraintIndex},S.prototype.setFrame=function(t,e,n,i,r,a){t*=S.ENTRIES,this.frames[t]=e,this.frames[t+S.ROTATE]=n,this.frames[t+S.TRANSLATE]=i,this.frames[t+S.SCALE]=r,this.frames[t+S.SHEAR]=a},S.prototype.apply=function(t,e,n,i,r,a,s){var o=this.frames,h=t.transformConstraints[this.transformConstraintIndex];if(n<o[0]){var l=h.data;switch(a){case N.setup:return h.rotateMix=l.rotateMix,h.translateMix=l.translateMix,h.scaleMix=l.scaleMix,void(h.shearMix=l.shearMix);case N.current:h.rotateMix+=(l.rotateMix-h.rotateMix)*r,h.translateMix+=(l.translateMix-h.translateMix)*r,h.scaleMix+=(l.scaleMix-h.scaleMix)*r,h.shearMix+=(l.shearMix-h.shearMix)*r}}else{var u,p=0,c=0,d=0,f=0;n>=o[o.length-S.ENTRIES]?(p=o[(u=o.length)+S.PREV_ROTATE],c=o[u+S.PREV_TRANSLATE],d=o[u+S.PREV_SCALE],f=o[u+S.PREV_SHEAR]):(p=o[(t=k.binarySearch(o,n,S.ENTRIES))+S.PREV_ROTATE],c=o[t+S.PREV_TRANSLATE],d=o[t+S.PREV_SCALE],f=o[t+S.PREV_SHEAR],u=o[t],u=this.getCurvePercent(t/S.ENTRIES-1,1-(n-u)/(o[t+S.PREV_TIME]-u)),p+=(o[t+S.ROTATE]-p)*u,c+=(o[t+S.TRANSLATE]-c)*u,d+=(o[t+S.SCALE]-d)*u,f+=(o[t+S.SHEAR]-f)*u),a==N.setup?(l=h.data,h.rotateMix=l.rotateMix+(p-l.rotateMix)*r,h.translateMix=l.translateMix+(c-l.translateMix)*r,h.scaleMix=l.scaleMix+(d-l.scaleMix)*r,h.shearMix=l.shearMix+(f-l.shearMix)*r):(h.rotateMix+=(p-h.rotateMix)*r,h.translateMix+=(c-h.translateMix)*r,h.scaleMix+=(d-h.scaleMix)*r,h.shearMix+=(f-h.shearMix)*r)}},S.ENTRIES=5,S.PREV_TIME=-5,S.PREV_ROTATE=-4,S.PREV_TRANSLATE=-3,S.PREV_SCALE=-2,S.PREV_SHEAR=-1,S.ROTATE=1,S.TRANSLATE=2,S.SCALE=3,S.SHEAR=4,S);function S(t){var e=I.call(this,t)||this;return e.frames=V.Utils.newFloatArray(t*S.ENTRIES),e}V.TransformConstraintTimeline=s;var C,s=(__extends(_,C=n),_.prototype.getPropertyId=function(){return(t.pathConstraintPosition<<24)+this.pathConstraintIndex},_.prototype.setFrame=function(t,e,n){t*=_.ENTRIES,this.frames[t]=e,this.frames[t+_.VALUE]=n},_.prototype.apply=function(t,e,n,i,r,a,s){var o=this.frames,h=t.pathConstraints[this.pathConstraintIndex];if(n<o[0])switch(a){case N.setup:return void(h.position=h.data.position);case N.current:h.position+=(h.data.position-h.position)*r}else{var l,u=0;n>=o[o.length-_.ENTRIES]?u=o[o.length+_.PREV_VALUE]:(u=o[(l=k.binarySearch(o,n,_.ENTRIES))+_.PREV_VALUE],t=o[l],t=this.getCurvePercent(l/_.ENTRIES-1,1-(n-t)/(o[l+_.PREV_TIME]-t)),u+=(o[l+_.VALUE]-u)*t),a==N.setup?h.position=h.data.position+(u-h.data.position)*r:h.position+=(u-h.position)*r}},_.ENTRIES=2,_.PREV_TIME=-2,_.PREV_VALUE=-1,_.VALUE=1,_);function _(t){var e=C.call(this,t)||this;return e.frames=V.Utils.newFloatArray(t*_.ENTRIES),e}V.PathConstraintPositionTimeline=s;var P,s=(__extends(D,P=s),D.prototype.getPropertyId=function(){return(t.pathConstraintSpacing<<24)+this.pathConstraintIndex},D.prototype.apply=function(t,e,n,i,r,a,s){var o=this.frames,h=t.pathConstraints[this.pathConstraintIndex];if(n<o[0])switch(a){case N.setup:return void(h.spacing=h.data.spacing);case N.current:h.spacing+=(h.data.spacing-h.spacing)*r}else{var l,u=0;n>=o[o.length-D.ENTRIES]?u=o[o.length+D.PREV_VALUE]:(u=o[(l=k.binarySearch(o,n,D.ENTRIES))+D.PREV_VALUE],t=o[l],t=this.getCurvePercent(l/D.ENTRIES-1,1-(n-t)/(o[l+D.PREV_TIME]-t)),u+=(o[l+D.VALUE]-u)*t),a==N.setup?h.spacing=h.data.spacing+(u-h.data.spacing)*r:h.spacing+=(u-h.spacing)*r}},D);function D(t){return P.call(this,t)||this}V.PathConstraintSpacingTimeline=s;var L,n=(__extends(Y,L=n),Y.prototype.getPropertyId=function(){return(t.pathConstraintMix<<24)+this.pathConstraintIndex},Y.prototype.setFrame=function(t,e,n,i){t*=Y.ENTRIES,this.frames[t]=e,this.frames[t+Y.ROTATE]=n,this.frames[t+Y.TRANSLATE]=i},Y.prototype.apply=function(t,e,n,i,r,a,s){var o=this.frames,h=t.pathConstraints[this.pathConstraintIndex];if(n<o[0])switch(a){case N.setup:return h.rotateMix=h.data.rotateMix,void(h.translateMix=h.data.translateMix);case N.current:h.rotateMix+=(h.data.rotateMix-h.rotateMix)*r,h.translateMix+=(h.data.translateMix-h.translateMix)*r}else{var l,u=0,p=0;n>=o[o.length-Y.ENTRIES]?(u=o[o.length+Y.PREV_ROTATE],p=o[o.length+Y.PREV_TRANSLATE]):(u=o[(l=k.binarySearch(o,n,Y.ENTRIES))+Y.PREV_ROTATE],p=o[l+Y.PREV_TRANSLATE],t=o[l],t=this.getCurvePercent(l/Y.ENTRIES-1,1-(n-t)/(o[l+Y.PREV_TIME]-t)),u+=(o[l+Y.ROTATE]-u)*t,p+=(o[l+Y.TRANSLATE]-p)*t),a==N.setup?(h.rotateMix=h.data.rotateMix+(u-h.data.rotateMix)*r,h.translateMix=h.data.translateMix+(p-h.data.translateMix)*r):(h.rotateMix+=(u-h.rotateMix)*r,h.translateMix+=(p-h.translateMix)*r)}},Y.ENTRIES=3,Y.PREV_TIME=-3,Y.PREV_ROTATE=-2,Y.PREV_TRANSLATE=-1,Y.ROTATE=1,Y.TRANSLATE=2,Y);function Y(t){var e=L.call(this,t)||this;return e.frames=V.Utils.newFloatArray(t*Y.ENTRIES),e}V.PathConstraintMixTimeline=n}(spine=spine||{}),function(A){var f=(T.prototype.update=function(t){t*=this.timeScale;for(var e=this.tracks,n=0,i=e.length;n<i;n++){var r=e[n];if(null!=r){r.animationLast=r.nextAnimationLast,r.trackLast=r.nextTrackLast;var a=t*r.timeScale;if(0<r.delay){if(r.delay-=a,0<r.delay)continue;a=-r.delay,r.delay=0}var s=r.next;if(null!=s){var o=r.trackLast-s.delay;if(0<=o){for(s.delay=0,s.trackTime=o+t*s.timeScale,r.trackTime+=a,this.setCurrent(n,s,!0);null!=s.mixingFrom;)s.mixTime+=a,s=s.mixingFrom;continue}}else if(r.trackLast>=r.trackEnd&&null==r.mixingFrom){e[n]=null,this.queue.end(r),this.disposeNext(r);continue}if(null!=r.mixingFrom&&this.updateMixingFrom(r,t)){var h=r.mixingFrom;for(r.mixingFrom=null;null!=h;)this.queue.end(h),h=h.mixingFrom}r.trackTime+=a}}this.queue.drain()},T.prototype.updateMixingFrom=function(t,e){var n=t.mixingFrom;if(null==n)return!0;var i=this.updateMixingFrom(n,e);return n.animationLast=n.nextAnimationLast,n.trackLast=n.nextTrackLast,0<t.mixTime&&(t.mixTime>=t.mixDuration||0==t.timeScale)?(0!=n.totalAlpha&&0!=t.mixDuration||(t.mixingFrom=n.mixingFrom,t.interruptAlpha=n.interruptAlpha,this.queue.end(n)),i):(n.trackTime+=e*n.timeScale,t.mixTime+=e*t.timeScale,!1)},T.prototype.apply=function(t){if(null==t)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var e=this.events,n=this.tracks,i=!1,r=0,a=n.length;r<a;r++){var s=n[r];if(!(null==s||0<s.delay)){i=!0;var o=0==r?A.MixPose.current:A.MixPose.currentLayered,h=s.alpha;null!=s.mixingFrom?h*=this.applyMixingFrom(s,t,o):s.trackTime>=s.trackEnd&&null==s.next&&(h=0);var l=s.animationLast,u=s.getAnimationTime(),p=s.animation.timelines.length,c=s.animation.timelines;if(1==h)for(var d=0;d<p;d++)c[d].apply(t,l,u,e,1,A.MixPose.setup,A.MixDirection.in);else{var f=s.timelineData,m=0==s.timelinesRotation.length;m&&A.Utils.setArraySize(s.timelinesRotation,p<<1,null);for(var g=s.timelinesRotation,d=0;d<p;d++){var v=c[d],y=f[d]>=T.FIRST?A.MixPose.setup:o;v instanceof A.RotateTimeline?this.applyRotateTimeline(v,t,u,h,y,g,d<<1,m):(A.Utils.webkit602BugfixHelper(h,y),v.apply(t,l,u,e,h,y,A.MixDirection.in))}}this.queueEvents(s,u),e.length=0,s.nextAnimationLast=u,s.nextTrackLast=s.trackTime}}return this.queue.drain(),i},T.prototype.applyMixingFrom=function(t,e,n){var i=t.mixingFrom;null!=i.mixingFrom&&this.applyMixingFrom(i,e,n);var r=0;0==t.mixDuration?(r=1,n=A.MixPose.setup):1<(r=t.mixTime/t.mixDuration)&&(r=1);var a=r<i.eventThreshold?this.events:null,s=r<i.attachmentThreshold,o=r<i.drawOrderThreshold,h=i.animationLast,l=i.getAnimationTime(),u=i.animation.timelines.length,p=i.animation.timelines,c=i.timelineData,d=i.timelineDipMix,f=0==i.timelinesRotation.length;f&&A.Utils.setArraySize(i.timelinesRotation,u<<1,null);for(var m,g=i.timelinesRotation,v=i.alpha*t.interruptAlpha,y=v*(1-r),x=0,E=i.totalAlpha=0;E<u;E++){var w=p[E];switch(c[E]){case T.SUBSEQUENT:if(!s&&w instanceof A.AttachmentTimeline)continue;if(!o&&w instanceof A.DrawOrderTimeline)continue;m=n,x=y;break;case T.FIRST:m=A.MixPose.setup,x=y;break;case T.DIP:m=A.MixPose.setup,x=v;break;default:m=A.MixPose.setup,x=v;var M=d[E];x*=Math.max(0,1-M.mixTime/M.mixDuration)}i.totalAlpha+=x,w instanceof A.RotateTimeline?this.applyRotateTimeline(w,e,l,x,m,g,E<<1,f):(A.Utils.webkit602BugfixHelper(x,m),w.apply(e,h,l,a,x,m,A.MixDirection.out))}return 0<t.mixDuration&&this.queueEvents(i,l),this.events.length=0,i.nextAnimationLast=l,i.nextTrackLast=i.trackTime,r},T.prototype.applyRotateTimeline=function(t,e,n,i,r,a,s,o){var h,l,u,p,c,d,f,m;o&&(a[s]=0),1!=i?(u=(h=t).frames,l=e.bones[h.boneIndex],n<u[0]?r==A.MixPose.setup&&(l.rotation=l.data.rotation):(m=0,n>=u[u.length-A.RotateTimeline.ENTRIES]?m=l.data.rotation+u[u.length+A.RotateTimeline.PREV_ROTATION]:(d=u[(c=A.Animation.binarySearch(u,n,A.RotateTimeline.ENTRIES))+A.RotateTimeline.PREV_ROTATION],p=u[c],f=h.getCurvePercent((c>>1)-1,1-(n-p)/(u[c+A.RotateTimeline.PREV_TIME]-p)),m=u[c+A.RotateTimeline.ROTATION]-d,m=d+(m-=360*(16384-(16384.499999999996-m/360|0)))*f+l.data.rotation,m-=360*(16384-(16384.499999999996-m/360|0))),(p=0)==(c=m-(u=(r==A.MixPose.setup?l.data:l).rotation))?p=a[s]:(c-=360*(16384-(16384.499999999996-c/360|0)),f=d=0,f=o?(d=0,c):(d=a[s],a[s+1]),m=0<c,o=0<=d,A.MathUtils.signum(f)!=A.MathUtils.signum(c)&&Math.abs(f)<=90&&(180<Math.abs(d)&&(d+=360*A.MathUtils.signum(d)),o=m),p=c+d-d%360,o!=m&&(p+=360*A.MathUtils.signum(d)),a[s]=p),a[s+1]=c,u+=p*i,l.rotation=u-360*(16384-(16384.499999999996-u/360|0)))):t.apply(e,0,n,null,1,r,A.MixDirection.in)},T.prototype.queueEvents=function(t,e){for(var n=t.animationStart,i=t.animationEnd,r=i-n,a=t.trackLast%r,s=this.events,o=0,h=s.length;o<h;o++){var l=s[o];if(l.time<a)break;l.time>i||this.queue.event(t,l)}for((t.loop?0==r||a>t.trackTime%r:i<=e&&t.animationLast<i)&&this.queue.complete(t);o<h;o++)s[o].time<n||this.queue.event(t,s[o])},T.prototype.clearTracks=function(){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var e=0,n=this.tracks.length;e<n;e++)this.clearTrack(e);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()},T.prototype.clearTrack=function(t){if(!(t>=this.tracks.length)){t=this.tracks[t];if(null!=t){this.queue.end(t),this.disposeNext(t);for(var e=t;;){var n=e.mixingFrom;if(null==n)break;this.queue.end(n),e.mixingFrom=null,e=n}this.tracks[t.trackIndex]=null,this.queue.drain()}}},T.prototype.setCurrent=function(t,e,n){var i=this.expandToIndex(t);this.tracks[t]=e,null!=i&&(n&&this.queue.interrupt(i),e.mixingFrom=i,e.mixTime=0,null!=i.mixingFrom&&0<i.mixDuration&&(e.interruptAlpha*=Math.min(1,i.mixTime/i.mixDuration)),i.timelinesRotation.length=0),this.queue.start(e)},T.prototype.setAnimation=function(t,e,n){var i=this.data.skeletonData.findAnimation(e);if(null==i)throw new Error("Animation not found: "+e);return this.setAnimationWith(t,i,n)},T.prototype.setAnimationWith=function(t,e,n){if(null==e)throw new Error("animation cannot be null.");var i=!0,r=this.expandToIndex(t);null!=r&&(-1==r.nextTrackLast?(this.tracks[t]=r.mixingFrom,this.queue.interrupt(r),this.queue.end(r),this.disposeNext(r),r=r.mixingFrom,i=!1):this.disposeNext(r));r=this.trackEntry(t,e,n,r);return this.setCurrent(t,r,i),this.queue.drain(),r},T.prototype.addAnimation=function(t,e,n,i){var r=this.data.skeletonData.findAnimation(e);if(null==r)throw new Error("Animation not found: "+e);return this.addAnimationWith(t,r,n,i)},T.prototype.addAnimationWith=function(t,e,n,i){if(null==e)throw new Error("animation cannot be null.");var r=this.expandToIndex(t);if(null!=r)for(;null!=r.next;)r=r.next;n=this.trackEntry(t,e,n,r);return null==r?(this.setCurrent(t,n,!0),this.queue.drain()):(r.next=n,i<=0&&(0!=(t=r.animationEnd-r.animationStart)?(r.loop?i+=t*(1+(r.trackTime/t|0)):i+=t,i-=this.data.getMix(r.animation,e)):i=0)),n.delay=i,n},T.prototype.setEmptyAnimation=function(t,e){t=this.setAnimationWith(t,T.emptyAnimation,!1);return t.mixDuration=e,t.trackEnd=e,t},T.prototype.addEmptyAnimation=function(t,e,n){n<=0&&(n-=e);n=this.addAnimationWith(t,T.emptyAnimation,!1,n);return n.mixDuration=e,n.trackEnd=e,n},T.prototype.setEmptyAnimations=function(t){var e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var n=0,i=this.tracks.length;n<i;n++){var r=this.tracks[n];null!=r&&this.setEmptyAnimation(r.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()},T.prototype.expandToIndex=function(t){return t<this.tracks.length?this.tracks[t]:(A.Utils.ensureArrayCapacity(this.tracks,t-this.tracks.length+1,null),this.tracks.length=t+1,null)},T.prototype.trackEntry=function(t,e,n,i){var r=this.trackEntryPool.obtain();return r.trackIndex=t,r.animation=e,r.loop=n,r.eventThreshold=0,r.attachmentThreshold=0,r.drawOrderThreshold=0,r.animationStart=0,r.animationEnd=e.duration,r.animationLast=-1,r.nextAnimationLast=-1,r.delay=0,r.trackTime=0,r.trackLast=-1,r.nextTrackLast=-1,r.trackEnd=Number.MAX_VALUE,r.timeScale=1,r.alpha=1,r.interruptAlpha=1,r.mixTime=0,r.mixDuration=null==i?0:this.data.getMix(i.animation,e),r},T.prototype.disposeNext=function(t){for(var e=t.next;null!=e;)this.queue.dispose(e),e=e.next;t.next=null},T.prototype._animationsChanged=function(){this.animationsChanged=!1;var t=this.propertyIDs;t.clear();for(var e=this.mixingTo,n=0,i=this.tracks.length;n<i;n++){var r=this.tracks[n];null!=r&&r.setTimelineData(null,e,t)}},T.prototype.getCurrent=function(t){return t>=this.tracks.length?null:this.tracks[t]},T.prototype.addListener=function(t){if(null==t)throw new Error("listener cannot be null.");this.listeners.push(t)},T.prototype.removeListener=function(t){t=this.listeners.indexOf(t);0<=t&&this.listeners.splice(t,1)},T.prototype.clearListeners=function(){this.listeners.length=0},T.prototype.clearListenerNotifications=function(){this.queue.clear()},T.emptyAnimation=new A.Animation("<empty>",[],0),T.SUBSEQUENT=0,T.FIRST=1,T.DIP=2,T.DIP_MIX=3,T);function T(t){this.tracks=new Array,this.events=new Array,this.listeners=new Array,this.queue=new n(this),this.propertyIDs=new A.IntSet,this.mixingTo=new Array,this.animationsChanged=!1,this.timeScale=1,this.trackEntryPool=new A.Pool(function(){return new e}),this.data=t}A.AnimationState=f;var e=(t.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.animation=null,this.listener=null,this.timelineData.length=0,this.timelineDipMix.length=0,this.timelinesRotation.length=0},t.prototype.setTimelineData=function(t,e,n){null!=t&&e.push(t);var i=null!=this.mixingFrom?this.mixingFrom.setTimelineData(this,e,n):this;null!=t&&e.pop();var r=e,a=e.length-1,s=this.animation.timelines,o=this.animation.timelines.length,h=A.Utils.setArraySize(this.timelineData,o);this.timelineDipMix.length=0;var l=A.Utils.setArraySize(this.timelineDipMix,o);t:for(var u=0;u<o;u++){var p=s[u].getPropertyId();if(n.add(p))if(null!=t&&t.hasTimeline(p)){for(var c=a;0<=c;c--){var d=r[c];if(!d.hasTimeline(p)&&0<d.mixDuration){h[u]=f.DIP_MIX,l[u]=d;continue t}}h[u]=f.DIP}else h[u]=f.FIRST;else h[u]=f.SUBSEQUENT}return i},t.prototype.hasTimeline=function(t){for(var e=this.animation.timelines,n=0,i=e.length;n<i;n++)if(e[n].getPropertyId()==t)return!0;return!1},t.prototype.getAnimationTime=function(){if(this.loop){var t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},t.prototype.setAnimationLast=function(t){this.animationLast=t,this.nextAnimationLast=t},t.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},t.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},t);function t(){this.timelineData=new Array,this.timelineDipMix=new Array,this.timelinesRotation=new Array}A.TrackEntry=e;var o,n=(i.prototype.start=function(t){this.objects.push(o.start),this.objects.push(t),this.animState.animationsChanged=!0},i.prototype.interrupt=function(t){this.objects.push(o.interrupt),this.objects.push(t)},i.prototype.end=function(t){this.objects.push(o.end),this.objects.push(t),this.animState.animationsChanged=!0},i.prototype.dispose=function(t){this.objects.push(o.dispose),this.objects.push(t)},i.prototype.complete=function(t){this.objects.push(o.complete),this.objects.push(t)},i.prototype.event=function(t,e){this.objects.push(o.event),this.objects.push(t),this.objects.push(e)},i.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var t=this.objects,e=this.animState.listeners,n=0;n<t.length;n+=2){var i=t[n],r=t[n+1];switch(i){case o.start:null!=r.listener&&r.listener.start&&r.listener.start(r);for(var a=0;a<e.length;a++)e[a].start&&e[a].start(r);break;case o.interrupt:null!=r.listener&&r.listener.interrupt&&r.listener.interrupt(r);for(a=0;a<e.length;a++)e[a].interrupt&&e[a].interrupt(r);break;case o.end:null!=r.listener&&r.listener.end&&r.listener.end(r);for(a=0;a<e.length;a++)e[a].end&&e[a].end(r);case o.dispose:null!=r.listener&&r.listener.dispose&&r.listener.dispose(r);for(a=0;a<e.length;a++)e[a].dispose&&e[a].dispose(r);this.animState.trackEntryPool.free(r);break;case o.complete:null!=r.listener&&r.listener.complete&&r.listener.complete(r);for(a=0;a<e.length;a++)e[a].complete&&e[a].complete(r);break;case o.event:var s=t[2+n++];null!=r.listener&&r.listener.event&&r.listener.event(r,s);for(a=0;a<e.length;a++)e[a].event&&e[a].event(r,s)}}this.clear(),this.drainDisabled=!1}},i.prototype.clear=function(){this.objects.length=0},i);function i(t){this.objects=[],this.drainDisabled=!1,this.animState=t}A.EventQueue=n,(r=o=A.EventType||(A.EventType={}))[r.start=0]="start",r[r.interrupt=1]="interrupt",r[r.end=2]="end",r[r.dispose=3]="dispose",r[r.complete=4]="complete",r[r.event=5]="event";var r=(a.prototype.start=function(t){},a.prototype.interrupt=function(t){},a.prototype.end=function(t){},a.prototype.dispose=function(t){},a.prototype.complete=function(t){},a.prototype.event=function(t,e){},a);function a(){}A.AnimationStateAdapter2=r}(spine=spine||{}),function(t){var e=(n.prototype.setMix=function(t,e,n){var i=this.skeletonData.findAnimation(t);if(null==i)throw new Error("Animation not found: "+t);t=this.skeletonData.findAnimation(e);if(null==t)throw new Error("Animation not found: "+e);this.setMixWith(i,t,n)},n.prototype.setMixWith=function(t,e,n){if(null==t)throw new Error("from cannot be null.");if(null==e)throw new Error("to cannot be null.");e=t.name+"."+e.name;this.animationToMixTime[e]=n},n.prototype.getMix=function(t,e){e=t.name+"."+e.name,e=this.animationToMixTime[e];return void 0===e?this.defaultMix:e},n);function n(t){if(this.animationToMixTime={},this.defaultMix=0,null==t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}t.AnimationStateData=e}(spine=spine||{}),function(d){var t=(a.downloadText=function(t,e,n){var i=new XMLHttpRequest;i.open("GET",t,!0),i.onload=function(){200==i.status?e(i.responseText):n(i.status,i.responseText)},i.onerror=function(){n(i.status,i.responseText)},i.send()},a.downloadBinary=function(t,e,n){var i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="arraybuffer",i.onload=function(){200==i.status?e(new Uint8Array(i.response)):n(i.status,i.responseText)},i.onerror=function(){n(i.status,i.responseText)},i.send()},a.prototype.loadText=function(n,e,i){var r=this;void 0===e&&(e=null),void 0===i&&(i=null),n=this.pathPrefix+n,this.toLoad++,a.downloadText(n,function(t){r.assets[n]=t,e&&e(n,t),r.toLoad--,r.loaded++},function(t,e){r.errors[n]="Couldn't load text "+n+": status "+status+", "+e,i&&i(n,"Couldn't load text "+n+": status "+status+", "+e),r.toLoad--,r.loaded++})},a.prototype.loadTexture=function(n,i,e){var r=this;void 0===i&&(i=null),void 0===e&&(e=null),n=this.pathPrefix+n,this.toLoad++;var a=new Image;a.crossOrigin="anonymous",a.onload=function(t){var e=r.textureLoader(a);r.assets[n]=e,r.toLoad--,r.loaded++,i&&i(n,a)},a.onerror=function(t){r.errors[n]="Couldn't load image "+n,r.toLoad--,r.loaded++,e&&e(n,"Couldn't load image "+n)},a.src=n},a.prototype.loadTextureData=function(n,t,i,e){var r=this;void 0===i&&(i=null),void 0===e&&(e=null),n=this.pathPrefix+n,this.toLoad++;var a=new Image;a.onload=function(t){var e=r.textureLoader(a);r.assets[n]=e,r.toLoad--,r.loaded++,i&&i(n,a)},a.onerror=function(t){r.errors[n]="Couldn't load image "+n,r.toLoad--,r.loaded++,e&&e(n,"Couldn't load image "+n)},a.src=t},a.prototype.loadTextureAtlas=function(h,l,u){var p=this;void 0===l&&(l=null),void 0===u&&(u=null);var c=0<=h.lastIndexOf("/")?h.substring(0,h.lastIndexOf("/")):"";h=this.pathPrefix+h,this.toLoad++,a.downloadText(h,function(r){var a={count:0},s=new Array;try{new d.TextureAtlas(r,function(t){s.push(c+"/"+t);t=document.createElement("img");return t.width=16,t.height=16,new d.FakeTexture(t)})}catch(t){var e=t;return p.errors[h]="Couldn't load texture atlas "+h+": "+e.message,u&&u(h,"Couldn't load texture atlas "+h+": "+e.message),p.toLoad--,void p.loaded++}for(var t=0,n=s;t<n.length;t++){var o=n[t];!function(){var i=!1;p.loadTexture(o,function(e,t){if(a.count++,a.count==s.length)if(i)p.errors[h]="Couldn't load texture atlas page "+e+"} of atlas "+h,u&&u(h,"Couldn't load texture atlas page "+e+" of atlas "+h),p.toLoad--,p.loaded++;else try{var n=new d.TextureAtlas(r,function(t){return p.get(c+"/"+t)});p.assets[h]=n,l&&l(h,n),p.toLoad--,p.loaded++}catch(t){e=t;p.errors[h]="Couldn't load texture atlas "+h+": "+e.message,u&&u(h,"Couldn't load texture atlas "+h+": "+e.message),p.toLoad--,p.loaded++}},function(t,e){i=!0,a.count++,a.count==s.length&&(p.errors[h]="Couldn't load texture atlas page "+t+"} of atlas "+h,u&&u(h,"Couldn't load texture atlas page "+t+" of atlas "+h),p.toLoad--,p.loaded++)})}()}},function(t,e){p.errors[h]="Couldn't load texture atlas "+h+": status "+status+", "+e,u&&u(h,"Couldn't load texture atlas "+h+": status "+status+", "+e),p.toLoad--,p.loaded++})},a.prototype.get=function(t){return t=this.pathPrefix+t,this.assets[t]},a.prototype.remove=function(t){t=this.pathPrefix+t;var e=this.assets[t];e.dispose&&e.dispose(),this.assets[t]=null},a.prototype.removeAll=function(){for(var t in this.assets){var e=this.assets[t];e.dispose&&e.dispose()}this.assets={}},a.prototype.isLoadingComplete=function(){return 0==this.toLoad},a.prototype.getToLoad=function(){return this.toLoad},a.prototype.getLoaded=function(){return this.loaded},a.prototype.dispose=function(){this.removeAll()},a.prototype.hasErrors=function(){return 0<Object.keys(this.errors).length},a.prototype.getErrors=function(){return this.errors},a);function a(t,e){void 0===e&&(e=""),this.assets={},this.errors={},this.toLoad=0,this.loaded=0,this.textureLoader=t,this.pathPrefix=e}d.AssetManager=t}(spine=spine||{}),function(r){var t=(e.prototype.newRegionAttachment=function(t,e,n){var i=this.atlas.findRegion(n);if(null==i)throw new Error("Region not found in atlas: "+n+" (region attachment: "+e+")");i.renderObject=i;e=new r.RegionAttachment(e);return e.setRegion(i),e},e.prototype.newMeshAttachment=function(t,e,n){var i=this.atlas.findRegion(n);if(null==i)throw new Error("Region not found in atlas: "+n+" (mesh attachment: "+e+")");i.renderObject=i;e=new r.MeshAttachment(e);return e.region=i,e},e.prototype.newBoundingBoxAttachment=function(t,e){return new r.BoundingBoxAttachment(e)},e.prototype.newPathAttachment=function(t,e){return new r.PathAttachment(e)},e.prototype.newPointAttachment=function(t,e){return new r.PointAttachment(e)},e.prototype.newClippingAttachment=function(t,e){return new r.ClippingAttachment(e)},e);function e(t){this.atlas=t}r.AtlasAttachmentLoader=t}(spine=spine||{}),function(t){(t=t.BlendMode||(t.BlendMode={}))[t.Normal=0]="Normal",t[t.Additive=1]="Additive",t[t.Multiply=2]="Multiply",t[t.Screen=3]="Screen"}(spine=spine||{}),function(A){var t=(e.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},e.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},e.prototype.updateWorldTransformWith=function(t,e,n,i,r,a,s){this.ax=t,this.ay=e,this.arotation=n,this.ascaleX=i,this.ascaleY=r,this.ashearX=a,this.ashearY=s,this.appliedValid=!0;var o=this.parent;if(null==o){var h=n+90+s,l=A.MathUtils.cosDeg(n+a)*i,u=A.MathUtils.cosDeg(h)*r,p=A.MathUtils.sinDeg(n+a)*i,c=A.MathUtils.sinDeg(h)*r,d=this.skeleton;return d.flipX&&(t=-t,l=-l,u=-u),d.flipY&&(e=-e,p=-p,c=-c),this.a=l,this.b=u,this.c=p,this.d=c,this.worldX=t+d.x,void(this.worldY=e+d.y)}var f=o.a,m=o.b,g=o.c,v=o.d;switch(this.worldX=f*t+m*e+o.worldX,this.worldY=g*t+v*e+o.worldY,this.data.transformMode){case A.TransformMode.Normal:h=n+90+s,l=A.MathUtils.cosDeg(n+a)*i,u=A.MathUtils.cosDeg(h)*r,p=A.MathUtils.sinDeg(n+a)*i,c=A.MathUtils.sinDeg(h)*r;return this.a=f*l+m*p,this.b=f*u+m*c,this.c=g*l+v*p,void(this.d=g*u+v*c);case A.TransformMode.OnlyTranslation:h=n+90+s;this.a=A.MathUtils.cosDeg(n+a)*i,this.b=A.MathUtils.cosDeg(h)*r,this.c=A.MathUtils.sinDeg(n+a)*i,this.d=A.MathUtils.sinDeg(h)*r;break;case A.TransformMode.NoRotationOrReflection:var y=0,x=n+a-(y=1e-4<(M=f*f+g*g)?(m=g*(M=Math.abs(f*v-m*g)/M),v=f*M,Math.atan2(g,f)*A.MathUtils.radDeg):(g=f=0,90-Math.atan2(v,m)*A.MathUtils.radDeg)),E=n+s-y+90,l=A.MathUtils.cosDeg(x)*i,u=A.MathUtils.cosDeg(E)*r,p=A.MathUtils.sinDeg(x)*i,c=A.MathUtils.sinDeg(E)*r;this.a=f*l-m*p,this.b=f*u-m*c,this.c=g*l+v*p,this.d=g*u+v*c;break;case A.TransformMode.NoScale:case A.TransformMode.NoScaleOrReflection:var w=A.MathUtils.cosDeg(n),y=A.MathUtils.sinDeg(n),x=f*w+m*y,E=g*w+v*y;1e-5<(M=Math.sqrt(x*x+E*E))&&(M=1/M),x*=M,E*=M,M=Math.sqrt(x*x+E*E);var w=Math.PI/2+Math.atan2(E,x),y=Math.cos(w)*M,M=Math.sin(w)*M,l=A.MathUtils.cosDeg(a)*i,u=A.MathUtils.cosDeg(90+s)*r,p=A.MathUtils.sinDeg(a)*i,c=A.MathUtils.sinDeg(90+s)*r;return(this.data.transformMode!=A.TransformMode.NoScaleOrReflection?f*v-m*g<0:this.skeleton.flipX!=this.skeleton.flipY)&&(y=-y,M=-M),this.a=x*l+y*p,this.b=x*u+y*c,this.c=E*l+M*p,void(this.d=E*u+M*c)}this.skeleton.flipX&&(this.a=-this.a,this.b=-this.b),this.skeleton.flipY&&(this.c=-this.c,this.d=-this.d)},e.prototype.setToSetupPose=function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY},e.prototype.getWorldRotationX=function(){return Math.atan2(this.c,this.a)*A.MathUtils.radDeg},e.prototype.getWorldRotationY=function(){return Math.atan2(this.d,this.b)*A.MathUtils.radDeg},e.prototype.getWorldScaleX=function(){return Math.sqrt(this.a*this.a+this.c*this.c)},e.prototype.getWorldScaleY=function(){return Math.sqrt(this.b*this.b+this.d*this.d)},e.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var t=this.parent;if(null==t)return this.ax=this.worldX,this.ay=this.worldY,this.arotation=Math.atan2(this.c,this.a)*A.MathUtils.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,void(this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*A.MathUtils.radDeg);var e=t.a,n=t.b,i=t.c,r=t.d,a=1/(e*r-n*i),s=this.worldX-t.worldX,t=this.worldY-t.worldY;this.ax=s*r*a-t*n*a,this.ay=t*e*a-s*i*a;r*=a,e*=a,n*=a,a*=i,i=r*this.a-n*this.c,r=r*this.b-n*this.d,n=e*this.c-a*this.a,e=e*this.d-a*this.b;this.ashearX=0,this.ascaleX=Math.sqrt(i*i+n*n),1e-4<this.ascaleX?(a=i*e-r*n,this.ascaleY=a/this.ascaleX,this.ashearY=Math.atan2(i*r+n*e,a)*A.MathUtils.radDeg,this.arotation=Math.atan2(n,i)*A.MathUtils.radDeg):(this.ascaleX=0,this.ascaleY=Math.sqrt(r*r+e*e),this.ashearY=0,this.arotation=90-Math.atan2(e,r)*A.MathUtils.radDeg)},e.prototype.worldToLocal=function(t){var e=this.a,n=this.b,i=this.c,r=this.d,a=1/(e*r-n*i),s=t.x-this.worldX,o=t.y-this.worldY;return t.x=s*r*a-o*n*a,t.y=o*e*a-s*i*a,t},e.prototype.localToWorld=function(t){var e=t.x,n=t.y;return t.x=e*this.a+n*this.b+this.worldX,t.y=e*this.c+n*this.d+this.worldY,t},e.prototype.worldToLocalRotation=function(t){var e=A.MathUtils.sinDeg(t),t=A.MathUtils.cosDeg(t);return Math.atan2(this.a*e-this.c*t,this.d*t-this.b*e)*A.MathUtils.radDeg},e.prototype.localToWorldRotation=function(t){var e=A.MathUtils.sinDeg(t),t=A.MathUtils.cosDeg(t);return Math.atan2(t*this.c+e*this.d,t*this.a+e*this.b)*A.MathUtils.radDeg},e.prototype.rotateWorld=function(t){var e=this.a,n=this.b,i=this.c,r=this.d,a=A.MathUtils.cosDeg(t),t=A.MathUtils.sinDeg(t);this.a=a*e-t*i,this.b=a*n-t*r,this.c=t*e+a*i,this.d=t*n+a*r,this.appliedValid=!1},e);function e(t,e,n){if(this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.a=0,this.b=0,this.worldX=0,this.c=0,this.d=0,this.worldY=0,this.sorted=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=n,this.setToSetupPose()}A.Bone=t}(spine=spine||{}),function(t){function e(t,e,n){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=i.Normal,t<0)throw new Error("index must be >= 0.");if(null==e)throw new Error("name cannot be null.");this.index=t,this.name=e,this.parent=n}var i;t.BoneData=e,(t=i=t.TransformMode||(t.TransformMode={}))[t.Normal=0]="Normal",t[t.OnlyTranslation=1]="OnlyTranslation",t[t.NoRotationOrReflection=2]="NoRotationOrReflection",t[t.NoScale=3]="NoScale",t[t.NoScaleOrReflection=4]="NoScaleOrReflection"}(spine=spine||{}),(spine||(spine={})).Event=function(t,e){if(null==e)throw new Error("data cannot be null.");this.time=t,this.data=e},(spine||(spine={})).EventData=function(t){this.name=t},function(j){var t=(e.prototype.getOrder=function(){return this.data.order},e.prototype.apply=function(){this.update()},e.prototype.update=function(){var t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.mix)}},e.prototype.apply1=function(t,e,n,i){t.appliedValid||t.updateAppliedTransform();var r=t.parent,a=1/(r.a*r.d-r.b*r.c),s=e-r.worldX,e=n-r.worldY,n=(s*r.d-e*r.b)*a-t.ax,a=(e*r.a-s*r.c)*a-t.ay,n=Math.atan2(a,n)*j.MathUtils.radDeg-t.ashearX-t.arotation;t.ascaleX<0&&(n+=180),180<n?n-=360:n<-180&&(n+=360),t.updateWorldTransformWith(t.ax,t.ay,t.arotation+n*i,t.ascaleX,t.ascaleY,t.ashearX,t.ashearY)},e.prototype.apply2=function(t,e,n,i,r,a){if(0!=a){t.appliedValid||t.updateAppliedTransform(),e.appliedValid||e.updateAppliedTransform();var s=t.ax,o=t.ay,h=t.ascaleX,l=t.ascaleY,u=e.ascaleX,p=0,c=0,d=0,d=h<0?(h=-h,p=180,-1):(p=0,1);l<0&&(l=-l,d=-d),c=u<0?(u=-u,180):0;var f=e.ax,m=0,g=0,v=0,y=t.a,x=t.b,E=t.c,w=t.d,M=Math.abs(h-l)<=1e-4,v=M?(g=y*f+x*(m=e.ay)+t.worldX,E*f+w*m+t.worldY):(m=0,g=y*f+t.worldX,E*f+t.worldY),A=t.parent,y=A.a,x=A.b;E=A.c;var T=1/(y*(w=A.d)-x*E),b=n-A.worldX,R=i-A.worldY,I=(b*w-R*x)*T-s,S=(R*y-b*E)*T-o,A=((b=g-A.worldX)*w-(R=v-A.worldY)*x)*T-s,T=(R*y-b*E)*T-o,C=Math.sqrt(A*A+T*T),_=e.data.length*u,P=0,V=0;t:if(M){var N=(I*I+S*S-C*C-(_*=h)*_)/(2*C*_);N<-1?N=-1:1<N&&(N=1),V=Math.acos(N)*r,y=C+_*N,x=_*Math.sin(V),P=Math.atan2(S*y-I*x,I*y+S*x)}else{var k=(y=h*_)*y,D=(x=l*_)*x,L=I*I+S*S,Y=Math.atan2(S,I),U=-2*D*C,F=D-k;if(0<=(w=U*U-4*F*(E=D*C*C+k*L-k*D))){var X=Math.sqrt(w);U<0&&(X=-X);var O=(X=-(U+X)/2)/F,B=E/X,W=Math.abs(O)<Math.abs(B)?O:B;if(W*W<=L){R=Math.sqrt(L-W*W)*r,P=Y-Math.atan2(R,W),V=Math.atan2(R/l,(W-C)/h);break t}}var q=j.MathUtils.PI,N=C-y,U=N*N,F=0,X=0,O=C+y,B=O*O,W=0;-1<=(E=-y*C/(k-D))&&E<=1&&(E=Math.acos(E),(w=(b=y*Math.cos(E)+C)*b+(R=x*Math.sin(E))*R)<U&&(q=E,U=w,N=b,F=R),B<w&&(X=E,B=w,O=b,W=R)),V=L<=(U+B)/2?(P=Y-Math.atan2(F*r,N),q*r):(P=Y-Math.atan2(W*r,O),X*r)}T=Math.atan2(m,f)*d,u=t.arotation;180<(P=(P-T)*j.MathUtils.radDeg+p-u)?P-=360:P<-180&&(P+=360),t.updateWorldTransformWith(s,o,u+P*a,t.ascaleX,t.ascaleY,0,0),u=e.arotation,180<(V=((V+T)*j.MathUtils.radDeg-e.ashearX)*d+c-u)?V-=360:V<-180&&(V+=360),e.updateWorldTransformWith(f,m,u+V*a,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)}else e.updateWorldTransform()},e);function e(t,e){if(this.mix=1,this.bendDirection=0,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.bendDirection=t.bendDirection,this.bones=new Array;for(var n=0;n<t.bones.length;n++)this.bones.push(e.findBone(t.bones[n].name));this.target=e.findBone(t.target.name)}j.IkConstraint=t}(spine=spine||{}),(spine||(spine={})).IkConstraintData=function(t){this.order=0,this.bones=new Array,this.bendDirection=1,this.mix=1,this.name=t},function(Z){var t=(H.prototype.apply=function(){this.update()},H.prototype.update=function(){var t=this.target.getAttachment();if(t instanceof Z.PathAttachment){var e=this.rotateMix,n=this.translateMix,i=0<e;if(0<n||i){var r=this.data,a=r.spacingMode,s=a==Z.SpacingMode.Length,o=r.rotateMode,h=o==Z.RotateMode.Tangent,l=o==Z.RotateMode.ChainScale,u=this.bones.length,p=h?u:u+1,c=this.bones,d=Z.Utils.setArraySize(this.spaces,p),f=null,m=this.spacing;if(l||s){l&&(f=Z.Utils.setArraySize(this.lengths,u));for(var g=0,v=p-1;g<v;){var y,x=(b=c[g]).data.length;x<H.epsilon?(l&&(f[g]=0),d[++g]=0):(I=x*b.a,S=x*b.c,y=Math.sqrt(I*I+S*S),l&&(f[g]=y),d[++g]=(s?x+m:m)*y/x)}}else for(g=1;g<p;g++)d[g]=m;var E=this.computeWorldPositions(t,p,h,r.positionMode==Z.PositionMode.Percent,a==Z.SpacingMode.Percent),w=E[0],M=E[1],A=r.offsetRotation,T=!1;0==A?T=o==Z.RotateMode.Chain:(T=!1,A*=0<(R=this.target.bone).a*R.d-R.b*R.c?Z.MathUtils.degRad:-Z.MathUtils.degRad);for(var b,g=0,R=3;g<u;g++,R+=3){(b=c[g]).worldX+=(w-b.worldX)*n,b.worldY+=(M-b.worldY)*n;var I,S,C,_,P,V,N,k,D,L,Y=(I=E[R])-w,U=(S=E[R+1])-M;!l||0!=(k=f[g])&&(D=(Math.sqrt(Y*Y+U*U)/k-1)*e+1,b.a*=D,b.c*=D),w=I,M=S,i&&(C=b.a,_=b.b,P=b.c,V=b.d,k=N=L=0,L=h?E[R-1]:0==d[g+1]?E[R+2]:Math.atan2(U,Y),L-=Math.atan2(P,C),T?(N=Math.cos(L),k=Math.sin(L),w+=((D=b.data.length)*(N*C-k*P)-Y)*e,M+=(D*(k*C+N*P)-U)*e):L+=A,L>Z.MathUtils.PI?L-=Z.MathUtils.PI2:L<-Z.MathUtils.PI&&(L+=Z.MathUtils.PI2),L*=e,N=Math.cos(L),k=Math.sin(L),b.a=N*C-k*P,b.b=N*_-k*V,b.c=k*C+N*P,b.d=k*_+N*V),b.appliedValid=!1}}}},H.prototype.computeWorldPositions=function(t,e,n,i,r){var a=this.target,s=this.position,o=this.spaces,h=Z.Utils.setArraySize(this.positions,3*e+2),l=null,u=t.closed,p=t.worldVerticesLength,c=p/6,d=H.NONE;if(!t.constantSpeed){var f=t.lengths,m=f[c-=u?1:2];if(i&&(s*=m),r)for(var g=0;g<e;g++)o[g]*=m;l=Z.Utils.setArraySize(this.world,8);for(var g=0,v=0,y=0;g<e;g++,v+=3){var x=s+=W=o[g];if(u)(x%=m)<0&&(x+=m),y=0;else{if(x<0){d!=H.BEFORE&&(d=H.BEFORE,t.computeWorldVertices(a,2,4,l,0,2)),this.addBeforePosition(x,l,0,h,v);continue}if(m<x){d!=H.AFTER&&(d=H.AFTER,t.computeWorldVertices(a,p-6,4,l,0,2)),this.addAfterPosition(x-m,l,0,h,v);continue}}for(;;y++){var E=f[y];if(!(E<x)){0==y?x/=E:x=(x-(G=f[y-1]))/(E-G);break}}y!=d&&(d=y,u&&y==c?(t.computeWorldVertices(a,p-4,4,l,0,2),t.computeWorldVertices(a,0,4,l,4,2)):t.computeWorldVertices(a,6*y+2,8,l,0,2)),this.addCurvePosition(x,l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],h,v,n||0<g&&0==W)}return h}u?(p+=2,l=Z.Utils.setArraySize(this.world,p),t.computeWorldVertices(a,2,p-4,l,0,2),t.computeWorldVertices(a,0,2,l,p-4,2),l[p-2]=l[0],l[p-1]=l[1]):(c--,p-=4,l=Z.Utils.setArraySize(this.world,p),t.computeWorldVertices(a,2,p,l,0,2));for(var w=Z.Utils.setArraySize(this.curves,c),M=0,A=l[0],T=l[1],b=0,R=0,I=0,S=0,C=0,_=0,P=0,V=0,N=0,k=0,D=0,L=0,Y=0,U=0,g=0,F=2;g<c;g++,F+=6)b=l[F],R=l[F+1],I=l[F+2],S=l[F+3],D=2*(P=.1875*(A-2*b+I))+(N=.09375*(3*(b-I)-A+(C=l[F+4]))),L=2*(V=.1875*(T-2*R+S))+(k=.09375*(3*(R-S)-T+(_=l[F+5]))),Y=.75*(b-A)+P+.16666667*N,U=.75*(R-T)+V+.16666667*k,M+=Math.sqrt(Y*Y+U*U),Y+=D,U+=L,D+=N,L+=k,M+=Math.sqrt(Y*Y+U*U),Y+=D,U+=L,M+=Math.sqrt(Y*Y+U*U),Y+=D+N,U+=L+k,M+=Math.sqrt(Y*Y+U*U),w[g]=M,A=C,T=_;if(i&&(s*=M),r)for(g=0;g<e;g++)o[g]*=M;for(var X=this.segments,O=0,g=0,v=0,y=0,B=0;g<e;g++,v+=3){var W,x=s+=W=o[g];if(u)(x%=M)<0&&(x+=M),y=0;else{if(x<0){this.addBeforePosition(x,l,0,h,v);continue}if(M<x){this.addAfterPosition(x-M,l,p-4,h,v);continue}}for(;;y++){var q=w[y];if(!(q<x)){0==y?x/=q:x=(x-(G=w[y-1]))/(q-G);break}}if(y!=d){var j=6*(d=y),A=l[j],T=l[j+1],b=l[j+2],R=l[j+3],I=l[j+4],S=l[j+5],D=2*(P=.03*(A-2*b+I))+(N=.006*(3*(b-I)-A+(C=l[j+6]))),L=2*(V=.03*(T-2*R+S))+(k=.006*(3*(R-S)-T+(_=l[j+7]))),Y=.3*(b-A)+P+.16666667*N,U=.3*(R-T)+V+.16666667*k,O=Math.sqrt(Y*Y+U*U);for(X[0]=O,j=1;j<8;j++)Y+=D,U+=L,D+=N,L+=k,O+=Math.sqrt(Y*Y+U*U),X[j]=O;Y+=D,U+=L,O+=Math.sqrt(Y*Y+U*U),X[8]=O,Y+=D+N,U+=L+k,O+=Math.sqrt(Y*Y+U*U),X[9]=O,B=0}for(x*=O;;B++){var G,z=X[B];if(!(z<x)){0==B?x/=z:x=B+(x-(G=X[B-1]))/(z-G);break}}this.addCurvePosition(.1*x,A,T,b,R,I,S,C,_,h,v,n||0<g&&0==W)}return h},H.prototype.addBeforePosition=function(t,e,n,i,r){var a=e[n],s=e[n+1],o=e[n+2]-a,n=e[n+3]-s,o=Math.atan2(n,o);i[r]=a+t*Math.cos(o),i[r+1]=s+t*Math.sin(o),i[r+2]=o},H.prototype.addAfterPosition=function(t,e,n,i,r){var a=e[n+2],s=e[n+3],o=a-e[n],n=s-e[n+1],o=Math.atan2(n,o);i[r]=a+t*Math.cos(o),i[r+1]=s+t*Math.sin(o),i[r+2]=o},H.prototype.addCurvePosition=function(t,e,n,i,r,a,s,o,h,l,u,p){0!=t&&!isNaN(t)||(t=1e-4);var c=t*t,d=c*t,f=1-t,m=f*f,g=m*f,v=f*t,y=3*v,f=f*y,t=y*t,o=e*g+i*f+a*t+o*d,d=n*g+r*f+s*t+h*d;l[u]=o,l[u+1]=d,p&&(l[u+2]=Math.atan2(d-(n*m+r*v*2+s*c),o-(e*m+i*v*2+a*c)))},H.prototype.getOrder=function(){return this.data.order},H.NONE=-1,H.BEFORE=-2,H.AFTER=-3,H.epsilon=1e-5,H);function H(t,e){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(var n=0,i=t.bones.length;n<i;n++)this.bones.push(e.findBone(t.bones[n].name));this.target=e.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix}Z.PathConstraint=t}(spine=spine||{}),function(t){var e=function(t){this.order=0,this.bones=new Array,this.name=t};t.PathConstraintData=e,(e=t.PositionMode||(t.PositionMode={}))[e.Fixed=0]="Fixed",e[e.Percent=1]="Percent",(e=t.SpacingMode||(t.SpacingMode={}))[e.Length=0]="Length",e[e.Fixed=1]="Fixed",e[e.Percent=2]="Percent",(t=t.RotateMode||(t.RotateMode={}))[t.Tangent=0]="Tangent",t[t.Chain=1]="Chain",t[t.ChainScale=2]="ChainScale"}(spine=spine||{}),function(t){var r=(e.prototype.loaded=function(){var t,e=0;for(t in this.assets)e++;return e},e);function e(t){this.toLoad=new Array,this.assets={},this.clientId=t}var n=(i.prototype.queueAsset=function(t,e,n){var i=this.clientAssets[t];return null==i&&(i=new r(t),this.clientAssets[t]=i),null!==e&&(i.textureLoader=e),i.toLoad.push(n),this.queuedAssets[n]!==n&&(this.queuedAssets[n]=n,!0)},i.prototype.loadText=function(t,e){var n,i=this;e=this.pathPrefix+e,this.queueAsset(t,null,e)&&((n=new XMLHttpRequest).onreadystatechange=function(){n.readyState==XMLHttpRequest.DONE&&(200<=n.status&&n.status<300?i.rawAssets[e]=n.responseText:i.errors[e]="Couldn't load text "+e+": status "+n.status+", "+n.responseText)},n.open("GET",e,!0),n.send())},i.prototype.loadJson=function(t,e){var n,i=this;e=this.pathPrefix+e,this.queueAsset(t,null,e)&&((n=new XMLHttpRequest).onreadystatechange=function(){n.readyState==XMLHttpRequest.DONE&&(200<=n.status&&n.status<300?i.rawAssets[e]=JSON.parse(n.responseText):i.errors[e]="Couldn't load text "+e+": status "+n.status+", "+n.responseText)},n.open("GET",e,!0),n.send())},i.prototype.loadTexture=function(t,e,n){var i,r=this;n=this.pathPrefix+n,this.queueAsset(t,e,n)&&((i=new Image).src=n,i.crossOrigin="anonymous",i.onload=function(t){r.rawAssets[n]=i},i.onerror=function(t){r.errors[n]="Couldn't load image "+n})},i.prototype.get=function(t,e){e=this.pathPrefix+e;t=this.clientAssets[t];return null==t||t.assets[e]},i.prototype.updateClientAssets=function(t){for(var e=0;e<t.toLoad.length;e++){var n=t.toLoad[e],i=t.assets[n];null!=i||null!=(i=this.rawAssets[n])&&(i instanceof HTMLImageElement?t.assets[n]=t.textureLoader(i):t.assets[n]=i)}},i.prototype.isLoadingComplete=function(t){t=this.clientAssets[t];return null==t||(this.updateClientAssets(t),t.toLoad.length==t.loaded())},i.prototype.dispose=function(){},i.prototype.hasErrors=function(){return 0<Object.keys(this.errors).length},i.prototype.getErrors=function(){return this.errors},i);function i(t){void 0===t&&(t=""),this.clientAssets={},this.queuedAssets={},this.rawAssets={},this.errors={},this.pathPrefix=t}t.SharedAssetManager=n}(spine=spine||{}),function(y){var t=(e.prototype.updateCache=function(){this._updateCache.length=0,this.updateCacheReset.length=0;for(var t=this.bones,e=0,n=t.length;e<n;e++)t[e].sorted=!1;var i=this.ikConstraints,r=this.transformConstraints,a=this.pathConstraints,s=i.length,o=r.length,h=a.length,l=s+o+h;t:for(e=0;e<l;e++){for(var u=0;u<s;u++)if((p=i[u]).data.order==e){this.sortIkConstraint(p);continue t}for(u=0;u<o;u++)if((p=r[u]).data.order==e){this.sortTransformConstraint(p);continue t}for(var p,u=0;u<h;u++)if((p=a[u]).data.order==e){this.sortPathConstraint(p);continue t}}for(e=0,n=t.length;e<n;e++)this.sortBone(t[e])},e.prototype.sortIkConstraint=function(t){var e=t.target;this.sortBone(e);var n=t.bones,i=n[0];this.sortBone(i),1<n.length&&(e=n[n.length-1],-1<this._updateCache.indexOf(e)||this.updateCacheReset.push(e)),this._updateCache.push(t),this.sortReset(i.children),n[n.length-1].sorted=!0},e.prototype.sortPathConstraint=function(t){var e=t.target,n=e.data.index,i=e.bone;null!=this.skin&&this.sortPathConstraintAttachment(this.skin,n,i),null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,n,i);for(var r=0,a=this.data.skins.length;r<a;r++)this.sortPathConstraintAttachment(this.data.skins[r],n,i);e=e.getAttachment();e instanceof y.PathAttachment&&this.sortPathConstraintAttachmentWith(e,i);for(var s=t.bones,o=s.length,r=0;r<o;r++)this.sortBone(s[r]);this._updateCache.push(t);for(r=0;r<o;r++)this.sortReset(s[r].children);for(r=0;r<o;r++)s[r].sorted=!0},e.prototype.sortTransformConstraint=function(t){this.sortBone(t.target);var e=t.bones,n=e.length;if(t.data.local)for(var i=0;i<n;i++){var r=e[i];this.sortBone(r.parent),-1<this._updateCache.indexOf(r)||this.updateCacheReset.push(r)}else for(i=0;i<n;i++)this.sortBone(e[i]);this._updateCache.push(t);for(var a=0;a<n;a++)this.sortReset(e[a].children);for(a=0;a<n;a++)e[a].sorted=!0},e.prototype.sortPathConstraintAttachment=function(t,e,n){var i=t.attachments[e];if(i)for(var r in i)this.sortPathConstraintAttachmentWith(i[r],n)},e.prototype.sortPathConstraintAttachmentWith=function(t,e){if(t instanceof y.PathAttachment){var n=t.bones;if(null==n)this.sortBone(e);else for(var i=this.bones,r=0;r<n.length;)for(var a=n[r++],s=r+a;r<s;r++){var o=n[r];this.sortBone(i[o])}}},e.prototype.sortBone=function(t){var e;t.sorted||(null!=(e=t.parent)&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t))},e.prototype.sortReset=function(t){for(var e=0,n=t.length;e<n;e++){var i=t[e];i.sorted&&this.sortReset(i.children),i.sorted=!1}},e.prototype.updateWorldTransform=function(){for(var t=this.updateCacheReset,e=0,n=t.length;e<n;e++){var i=t[e];i.ax=i.x,i.ay=i.y,i.arotation=i.rotation,i.ascaleX=i.scaleX,i.ascaleY=i.scaleY,i.ashearX=i.shearX,i.ashearY=i.shearY,i.appliedValid=!0}for(var r=this._updateCache,e=0,n=r.length;e<n;e++)r[e].update()},e.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},e.prototype.setBonesToSetupPose=function(){for(var t=this.bones,e=0,n=t.length;e<n;e++)t[e].setToSetupPose();for(var i=this.ikConstraints,e=0,n=i.length;e<n;e++)(o=i[e]).bendDirection=o.data.bendDirection,o.mix=o.data.mix;for(var r=this.transformConstraints,e=0,n=r.length;e<n;e++){var a=(o=r[e]).data;o.rotateMix=a.rotateMix,o.translateMix=a.translateMix,o.scaleMix=a.scaleMix,o.shearMix=a.shearMix}for(var s=this.pathConstraints,e=0,n=s.length;e<n;e++){var o,a=(o=s[e]).data;o.position=a.position,o.spacing=a.spacing,o.rotateMix=a.rotateMix,o.translateMix=a.translateMix}},e.prototype.setSlotsToSetupPose=function(){var t=this.slots;y.Utils.arrayCopy(t,0,this.drawOrder,0,t.length);for(var e=0,n=t.length;e<n;e++)t[e].setToSetupPose()},e.prototype.getRootBone=function(){return 0==this.bones.length?null:this.bones[0]},e.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,i=e.length;n<i;n++){var r=e[n];if(r.data.name==t)return r}return null},e.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,i=e.length;n<i;n++)if(e[n].data.name==t)return n;return-1},e.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,i=e.length;n<i;n++){var r=e[n];if(r.data.name==t)return r}return null},e.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,i=e.length;n<i;n++)if(e[n].data.name==t)return n;return-1},e.prototype.setSkinByName=function(t){var e=this.data.findSkin(t);if(null==e)throw new Error("Skin not found: "+t);this.setSkin(e)},e.prototype.setSkin=function(t){if(null!=t)if(null!=this.skin)t.attachAll(this,this.skin);else for(var e=this.slots,n=0,i=e.length;n<i;n++){var r=e[n],a=r.data.attachmentName;null==a||null!=(a=t.getAttachment(n,a))&&r.setAttachment(a)}this.skin=t},e.prototype.getAttachmentByName=function(t,e){return this.getAttachment(this.data.findSlotIndex(t),e)},e.prototype.getAttachment=function(t,e){if(null==e)throw new Error("attachmentName cannot be null.");if(null!=this.skin){var n=this.skin.getAttachment(t,e);if(null!=n)return n}return null!=this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null},e.prototype.setAttachment=function(t,e){if(null==t)throw new Error("slotName cannot be null.");for(var n=this.slots,i=0,r=n.length;i<r;i++){var a=n[i];if(a.data.name==t){var s=null;if(null!=e&&null==(s=this.getAttachment(i,e)))throw new Error("Attachment not found: "+e+", for slot: "+t);return void a.setAttachment(s)}}throw new Error("Slot not found: "+t)},e.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,n=0,i=e.length;n<i;n++){var r=e[n];if(r.data.name==t)return r}return null},e.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,n=0,i=e.length;n<i;n++){var r=e[n];if(r.data.name==t)return r}return null},e.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,n=0,i=e.length;n<i;n++){var r=e[n];if(r.data.name==t)return r}return null},e.prototype.getBounds=function(t,e,n){if(null==t)throw new Error("offset cannot be null.");if(null==e)throw new Error("size cannot be null.");for(var i=this.drawOrder,r=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY,h=0,l=i.length;h<l;h++){var u=i[h],p=0,c=null,d=u.getAttachment();if(d instanceof y.RegionAttachment?(p=8,c=y.Utils.setArraySize(n,p,0),d.computeWorldVertices(u.bone,c,0,2)):d instanceof y.MeshAttachment&&(p=(d=d).worldVerticesLength,c=y.Utils.setArraySize(n,p,0),d.computeWorldVertices(u,0,p,c,0,2)),null!=c)for(var f=0,m=c.length;f<m;f+=2)var g=c[f],v=c[f+1],r=Math.min(r,g),a=Math.min(a,v),s=Math.max(s,g),o=Math.max(o,v)}t.set(r,a),e.set(s-r,o-a)},e.prototype.update=function(t){this.time+=t},e);function e(t){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.flipX=!1,this.flipY=!1,this.x=0,this.y=0,null==t)throw new Error("data cannot be null.");this.data=t,this.bones=new Array;for(var e=0;e<t.bones.length;e++){var n,i=t.bones[e],r=void 0;null==i.parent?r=new y.Bone(i,this,null):(n=this.bones[i.parent.index],r=new y.Bone(i,this,n),n.children.push(r)),this.bones.push(r)}this.slots=new Array,this.drawOrder=new Array;for(e=0;e<t.slots.length;e++){var a=t.slots[e],r=this.bones[a.boneData.index],a=new y.Slot(a,r);this.slots.push(a),this.drawOrder.push(a)}this.ikConstraints=new Array;for(e=0;e<t.ikConstraints.length;e++){var s=t.ikConstraints[e];this.ikConstraints.push(new y.IkConstraint(s,this))}this.transformConstraints=new Array;for(e=0;e<t.transformConstraints.length;e++){var o=t.transformConstraints[e];this.transformConstraints.push(new y.TransformConstraint(o,this))}this.pathConstraints=new Array;for(e=0;e<t.pathConstraints.length;e++){var h=t.pathConstraints[e];this.pathConstraints.push(new y.PathConstraint(h,this))}this.color=new y.Color(1,1,1,1),this.updateCache()}y.Skeleton=t}(spine=spine||{}),function(p){var t=(e.prototype.update=function(t,e){if(null==t)throw new Error("skeleton cannot be null.");var n=this.boundingBoxes,i=this.polygons,r=this.polygonPool,a=t.slots,s=a.length;n.length=0,r.freeAll(i);for(var o=i.length=0;o<s;o++){var h,l=a[o],u=l.getAttachment();u instanceof p.BoundingBoxAttachment&&(h=u,n.push(h),(u=r.obtain()).length!=h.worldVerticesLength&&(u=p.Utils.newFloatArray(h.worldVerticesLength)),i.push(u),h.computeWorldVertices(l,0,h.worldVerticesLength,u,0,2))}e?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},e.prototype.aabbCompute=function(){for(var t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,i=Number.NEGATIVE_INFINITY,r=this.polygons,a=0,s=r.length;a<s;a++)for(var o=r[a],h=o,l=0,u=o.length;l<u;l+=2)var p=h[l],c=h[l+1],t=Math.min(t,p),e=Math.min(e,c),n=Math.max(n,p),i=Math.max(i,c);this.minX=t,this.minY=e,this.maxX=n,this.maxY=i},e.prototype.aabbContainsPoint=function(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY},e.prototype.aabbIntersectsSegment=function(t,e,n,i){var r=this.minX,a=this.minY,s=this.maxX,o=this.maxY;if(t<=r&&n<=r||e<=a&&i<=a||s<=t&&s<=n||o<=e&&o<=i)return!1;i=(i-e)/(n-t),n=i*(r-t)+e;if(a<n&&n<o)return!0;if(a<(n=i*(s-t)+e)&&n<o)return!0;a=(a-e)/i+t;return r<a&&a<s||r<(a=(o-e)/i+t)&&a<s},e.prototype.aabbIntersectsSkeleton=function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},e.prototype.containsPoint=function(t,e){for(var n=this.polygons,i=0,r=n.length;i<r;i++)if(this.containsPointPolygon(n[i],t,e))return this.boundingBoxes[i];return null},e.prototype.containsPointPolygon=function(t,e,n){for(var i=t,r=t.length,a=r-2,s=!1,o=0;o<r;o+=2){var h,l=i[o+1],u=i[a+1];!(l<n&&n<=u||u<n&&n<=l)||(h=i[o])+(n-l)/(u-l)*(i[a]-h)<e&&(s=!s),a=o}return s},e.prototype.intersectsSegment=function(t,e,n,i){for(var r=this.polygons,a=0,s=r.length;a<s;a++)if(this.intersectsSegmentPolygon(r[a],t,e,n,i))return this.boundingBoxes[a];return null},e.prototype.intersectsSegmentPolygon=function(t,e,n,i,r){for(var a=t,s=t.length,o=e-i,h=n-r,l=e*r-n*i,u=a[s-2],p=a[s-1],c=0;c<s;c+=2){var d=a[c],f=a[c+1],m=u*f-p*d,g=u-d,v=p-f,y=o*v-h*g,g=(l*g-o*m)/y;if((u<=g&&g<=d||d<=g&&g<=u)&&(e<=g&&g<=i||i<=g&&g<=e)){y=(l*v-h*m)/y;if((p<=y&&y<=f||f<=y&&y<=p)&&(n<=y&&y<=r||r<=y&&y<=n))return!0}u=d,p=f}return!1},e.prototype.getPolygon=function(t){if(null==t)throw new Error("boundingBox cannot be null.");t=this.boundingBoxes.indexOf(t);return-1==t?null:this.polygons[t]},e.prototype.getWidth=function(){return this.maxX-this.minX},e.prototype.getHeight=function(){return this.maxY-this.minY},e);function e(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new p.Pool(function(){return p.Utils.newFloatArray(16)})}p.SkeletonBounds=t}(spine=spine||{}),function(j){var t=(h.prototype.clipStart=function(t,e){if(null!=this.clipAttachment)return 0;var n=(this.clipAttachment=e).worldVerticesLength,i=j.Utils.setArraySize(this.clippingPolygon,n);e.computeWorldVertices(t,0,n,i,0,2);i=this.clippingPolygon;h.makeClockwise(i);for(var r=this.clippingPolygons=this.triangulator.decompose(i,this.triangulator.triangulate(i)),a=0,s=r.length;a<s;a++){var o=r[a];h.makeClockwise(o),o.push(o[0]),o.push(o[1])}return r.length},h.prototype.clipEndWithSlot=function(t){null!=this.clipAttachment&&this.clipAttachment.endSlot==t.data&&this.clipEnd()},h.prototype.clipEnd=function(){null!=this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)},h.prototype.isClipping=function(){return null!=this.clipAttachment},h.prototype.clipTriangles=function(t,e,n,i,r,a,s,o){var h=this.clipOutput,l=this.clippedVertices,u=this.clippedTriangles,p=this.clippingPolygons,c=this.clippingPolygons.length,d=o?12:8,f=0;l.length=0;t:for(var m=u.length=0;m<i;m+=3)for(var g=n[m]<<1,v=t[g],y=t[1+g],x=r[g],E=r[1+g],w=t[g=n[m+1]<<1],M=t[1+g],A=r[g],T=r[1+g],b=t[g=n[m+2]<<1],R=t[1+g],I=r[g],S=r[1+g],C=0;C<c;C++){var _=l.length;if(!this.clip(v,y,w,M,b,R,p[C],h)){(F=j.Utils.setArraySize(l,_+3*d))[_]=v,F[_+1]=y,F[_+2]=a.r,F[_+3]=a.g,F[_+4]=a.b,F[_+5]=a.a,o?(F[_+6]=x,F[_+7]=E,F[_+8]=s.r,F[_+9]=s.g,F[_+10]=s.b,F[_+11]=s.a,F[_+12]=w,F[_+13]=M,F[_+14]=a.r,F[_+15]=a.g,F[_+16]=a.b,F[_+17]=a.a,F[_+18]=A,F[_+19]=T,F[_+20]=s.r,F[_+21]=s.g,F[_+22]=s.b,F[_+23]=s.a,F[_+24]=b,F[_+25]=R,F[_+26]=a.r,F[_+27]=a.g,F[_+28]=a.b,F[_+29]=a.a,F[_+30]=I,F[_+31]=S,F[_+32]=s.r,F[_+33]=s.g,F[_+34]=s.b,F[_+35]=s.a):(F[_+6]=x,F[_+7]=E,F[_+8]=w,F[_+9]=M,F[_+10]=a.r,F[_+11]=a.g,F[_+12]=a.b,F[_+13]=a.a,F[_+14]=A,F[_+15]=T,F[_+16]=b,F[_+17]=R,F[_+18]=a.r,F[_+19]=a.g,F[_+20]=a.b,F[_+21]=a.a,F[_+22]=I,F[_+23]=S),_=u.length,(q=j.Utils.setArraySize(u,_+3))[_]=f,q[_+1]=f+1,q[_+2]=f+2,f+=3;continue t}var P=h.length;if(0!=P){for(var V=M-R,N=b-w,k=v-b,D=R-y,L=1/(V*k+N*(y-R)),Y=P>>1,U=this.clipOutput,F=j.Utils.setArraySize(l,_+Y*d),X=0;X<P;X+=2){var O=U[X],B=U[X+1];F[_]=O,F[_+1]=B,F[_+2]=a.r,F[_+3]=a.g,F[_+4]=a.b,F[_+5]=a.a;var W=O-b,O=B-R,B=(V*W+N*O)*L,W=(D*W+k*O)*L,O=1-B-W;F[_+6]=x*B+A*W+I*O,F[_+7]=E*B+T*W+S*O,o&&(F[_+8]=s.r,F[_+9]=s.g,F[_+10]=s.b,F[_+11]=s.a),_+=d}_=u.length;var q=j.Utils.setArraySize(u,_+3*(Y-2));Y--;for(X=1;X<Y;X++)q[_]=f,q[_+1]=f+X,q[_+2]=f+X+1,_+=3;f+=1+Y}}},h.prototype.clip=function(t,e,n,i,r,a,s,o){var h=o,l=!1,u=null;2<=s.length%4?(u=o,o=this.scratch):u=this.scratch,u.length=0,u.push(t),u.push(e),u.push(n),u.push(i),u.push(r),u.push(a),u.push(t),u.push(e),o.length=0;for(var p=s,c=s.length-4,d=0;;d+=2){for(var f=p[d],m=p[d+1],g=p[d+2],v=p[d+3],y=f-g,x=m-v,E=u,w=u.length-2,M=o.length,A=0;A<w;A+=2){var T=E[A],b=E[A+1],R=E[A+2],I=E[A+3],S=0<y*(I-v)-x*(R-g);if(0<y*(b-v)-x*(T-g)){if(S){o.push(R),o.push(I);continue}var C,_,P=((_=R-T)*(m-b)-(C=I-b)*(f-T))/(C*(g-f)-_*(v-m));o.push(f+(g-f)*P),o.push(m+(v-m)*P)}else S&&(P=((_=R-T)*(m-b)-(C=I-b)*(f-T))/(C*(g-f)-_*(v-m)),o.push(f+(g-f)*P),o.push(m+(v-m)*P),o.push(R),o.push(I));l=!0}if(M==o.length)return!(h.length=0);if(o.push(o[0]),o.push(o[1]),d==c)break;M=o;(o=u).length=0,u=M}if(h!=o)for(var d=h.length=0,V=o.length-2;d<V;d++)h[d]=o[d];else h.length=h.length-2;return l},h.makeClockwise=function(t){for(var e,n,i,r=t,t=t.length,a=r[t-2]*r[1]-r[0]*r[t-1],s=0,o=t-3;s<o;s+=2)e=r[s],n=r[s+1],i=r[s+2],a+=e*r[s+3]-i*n;if(!(a<0))for(var s=0,h=t-2,o=t>>1;s<o;s+=2){var l=r[s],u=r[s+1],p=h-s;r[s]=r[p],r[s+1]=r[1+p],r[p]=l,r[1+p]=u}},h);function h(){this.triangulator=new j.Triangulator,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array}j.SkeletonClipping=t}(spine=spine||{}),function(t){var e=(n.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,i=e.length;n<i;n++){var r=e[n];if(r.name==t)return r}return null},n.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,i=e.length;n<i;n++)if(e[n].name==t)return n;return-1},n.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,i=e.length;n<i;n++){var r=e[n];if(r.name==t)return r}return null},n.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,i=e.length;n<i;n++)if(e[n].name==t)return n;return-1},n.prototype.findSkin=function(t){if(null==t)throw new Error("skinName cannot be null.");for(var e=this.skins,n=0,i=e.length;n<i;n++){var r=e[n];if(r.name==t)return r}return null},n.prototype.findEvent=function(t){if(null==t)throw new Error("eventDataName cannot be null.");for(var e=this.events,n=0,i=e.length;n<i;n++){var r=e[n];if(r.name==t)return r}return null},n.prototype.findAnimation=function(t){if(null==t)throw new Error("animationName cannot be null.");for(var e=this.animations,n=0,i=e.length;n<i;n++){var r=e[n];if(r.name==t)return r}return null},n.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,n=0,i=e.length;n<i;n++){var r=e[n];if(r.name==t)return r}return null},n.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,n=0,i=e.length;n<i;n++){var r=e[n];if(r.name==t)return r}return null},n.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,n=0,i=e.length;n<i;n++){var r=e[n];if(r.name==t)return r}return null},n.prototype.findPathConstraintIndex=function(t){if(null==t)throw new Error("pathConstraintName cannot be null.");for(var e=this.pathConstraints,n=0,i=e.length;n<i;n++)if(e[n].name==t)return n;return-1},n);function n(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}t.SkeletonData=e}(spine=spine||{}),function($){var t=(_.prototype.readSkeletonData=function(t){var e=this.scale,n=new $.SkeletonData,i="string"==typeof t?JSON.parse(t):t,t=i.skeleton;if(null!=t&&(n.hash=t.hash,n.version=t.spine,n.width=t.width,n.height=t.height,n.fps=t.fps,n.imagesPath=t.images),i.bones)for(var r=0;r<i.bones.length;r++){var a=i.bones[r],s=null,o=this.getValue(a,"parent",null);if(null!=o&&null==(s=n.findBone(o)))throw new Error("Parent bone not found: "+o);(p=new $.BoneData(n.bones.length,a.name,s)).length=this.getValue(a,"length",0)*e,p.x=this.getValue(a,"x",0)*e,p.y=this.getValue(a,"y",0)*e,p.rotation=this.getValue(a,"rotation",0),p.scaleX=this.getValue(a,"scaleX",1),p.scaleY=this.getValue(a,"scaleY",1),p.shearX=this.getValue(a,"shearX",0),p.shearY=this.getValue(a,"shearY",0),p.transformMode=_.transformModeFromString(this.getValue(a,"transform","normal")),n.bones.push(p)}if(i.slots)for(r=0;r<i.slots.length;r++){var h=(x=i.slots[r]).name,l=x.bone,u=n.findBone(l);if(null==u)throw new Error("Slot bone not found: "+l);var p=new $.SlotData(n.slots.length,h,u),u=this.getValue(x,"color",null);null!=u&&p.color.setFromString(u);u=this.getValue(x,"dark",null);null!=u&&(p.darkColor=new $.Color(1,1,1,1),p.darkColor.setFromString(u)),p.attachmentName=this.getValue(x,"attachment",null),p.blendMode=_.blendModeFromString(this.getValue(x,"blend","normal")),n.slots.push(p)}if(i.ik)for(r=0;r<i.ik.length;r++){var c=i.ik[r];(p=new $.IkConstraintData(c.name)).order=this.getValue(c,"order",0);for(var d=0;d<c.bones.length;d++){l=c.bones[d];if(null==(m=n.findBone(l)))throw new Error("IK bone not found: "+l);p.bones.push(m)}var f=c.target;if(p.target=n.findBone(f),null==p.target)throw new Error("IK target bone not found: "+f);p.bendDirection=this.getValue(c,"bendPositive",!0)?1:-1,p.mix=this.getValue(c,"mix",1),n.ikConstraints.push(p)}if(i.transform)for(r=0;r<i.transform.length;r++){c=i.transform[r];(p=new $.TransformConstraintData(c.name)).order=this.getValue(c,"order",0);for(d=0;d<c.bones.length;d++){l=c.bones[d];if(null==(m=n.findBone(l)))throw new Error("Transform constraint bone not found: "+l);p.bones.push(m)}f=c.target;if(p.target=n.findBone(f),null==p.target)throw new Error("Transform constraint target bone not found: "+f);p.local=this.getValue(c,"local",!1),p.relative=this.getValue(c,"relative",!1),p.offsetRotation=this.getValue(c,"rotation",0),p.offsetX=this.getValue(c,"x",0)*e,p.offsetY=this.getValue(c,"y",0)*e,p.offsetScaleX=this.getValue(c,"scaleX",0),p.offsetScaleY=this.getValue(c,"scaleY",0),p.offsetShearY=this.getValue(c,"shearY",0),p.rotateMix=this.getValue(c,"rotateMix",1),p.translateMix=this.getValue(c,"translateMix",1),p.scaleMix=this.getValue(c,"scaleMix",1),p.shearMix=this.getValue(c,"shearMix",1),n.transformConstraints.push(p)}if(i.path)for(r=0;r<i.path.length;r++){c=i.path[r];(p=new $.PathConstraintData(c.name)).order=this.getValue(c,"order",0);for(d=0;d<c.bones.length;d++){var m,l=c.bones[d];if(null==(m=n.findBone(l)))throw new Error("Transform constraint bone not found: "+l);p.bones.push(m)}f=c.target;if(p.target=n.findSlot(f),null==p.target)throw new Error("Path target slot not found: "+f);p.positionMode=_.positionModeFromString(this.getValue(c,"positionMode","percent")),p.spacingMode=_.spacingModeFromString(this.getValue(c,"spacingMode","length")),p.rotateMode=_.rotateModeFromString(this.getValue(c,"rotateMode","tangent")),p.offsetRotation=this.getValue(c,"rotation",0),p.position=this.getValue(c,"position",0),p.positionMode==$.PositionMode.Fixed&&(p.position*=e),p.spacing=this.getValue(c,"spacing",0),p.spacingMode!=$.SpacingMode.Length&&p.spacingMode!=$.SpacingMode.Fixed||(p.spacing*=e),p.rotateMix=this.getValue(c,"rotateMix",1),p.translateMix=this.getValue(c,"translateMix",1),n.pathConstraints.push(p)}if(i.skins)for(var g in i.skins){var v=i.skins[g],y=new $.Skin(g);for(h in v){var x,E,w=n.findSlotIndex(h);if(-1==w)throw new Error("Slot not found: "+h);for(E in x=v[h]){var M=this.readAttachment(x[E],y,w,E,n);null!=M&&y.addAttachment(w,E,M)}}n.skins.push(y),"default"==y.name&&(n.defaultSkin=y)}for(var r=0,A=this.linkedMeshes.length;r<A;r++){var T=this.linkedMeshes[r];if(null==(y=null==T.skin?n.defaultSkin:n.findSkin(T.skin)))throw new Error("Skin not found: "+T.skin);var b=y.getAttachment(T.slotIndex,T.parent);if(null==b)throw new Error("Parent mesh not found: "+T.parent);T.mesh.setParentMesh(b),T.mesh.updateUVs()}if(this.linkedMeshes.length=0,i.events)for(var R in i.events){var I=i.events[R];(p=new $.EventData(R)).intValue=this.getValue(I,"int",0),p.floatValue=this.getValue(I,"float",0),p.stringValue=this.getValue(I,"string",""),n.events.push(p)}if(i.animations)for(var S in i.animations){var C=i.animations[S];this.readAnimation(C,S,n)}return n},_.prototype.readAttachment=function(t,e,n,i,r){var a=this.scale;switch(i=this.getValue(t,"name",i),this.getValue(t,"type","region")){case"region":var s=this.getValue(t,"path",i),o=this.attachmentLoader.newRegionAttachment(e,i,s);return null==o?null:(o.path=s,o.x=this.getValue(t,"x",0)*a,o.y=this.getValue(t,"y",0)*a,o.scaleX=this.getValue(t,"scaleX",1),o.scaleY=this.getValue(t,"scaleY",1),o.rotation=this.getValue(t,"rotation",0),o.width=t.width*a,o.height=t.height*a,null!=(f=this.getValue(t,"color",null))&&o.color.setFromString(f),o.updateOffset(),o);case"boundingbox":var h=this.attachmentLoader.newBoundingBoxAttachment(e,i);return null==h?null:(this.readVertices(t,h,t.vertexCount<<1),null!=(f=this.getValue(t,"color",null))&&h.color.setFromString(f),h);case"mesh":case"linkedmesh":var s=this.getValue(t,"path",i),l=this.attachmentLoader.newMeshAttachment(e,i,s);if(null==l)return null;l.path=s,null!=(f=this.getValue(t,"color",null))&&l.color.setFromString(f);h=this.getValue(t,"parent",null);if(null!=h)return l.inheritDeform=this.getValue(t,"deform",!0),this.linkedMeshes.push(new m(l,this.getValue(t,"skin",null),n,h)),l;h=t.uvs;return this.readVertices(t,l,h.length),l.triangles=t.triangles,l.regionUVs=h,l.updateUVs(),l.hullLength=2*this.getValue(t,"hull",0),l;case"path":if(null==(s=this.attachmentLoader.newPathAttachment(e,i)))return null;s.closed=this.getValue(t,"closed",!1),s.constantSpeed=this.getValue(t,"constantSpeed",!0);var u=t.vertexCount;this.readVertices(t,s,u<<1);for(var p=$.Utils.newArray(u/3,0),c=0;c<t.lengths.length;c++)p[c]=t.lengths[c]*a;return s.lengths=p,null!=(f=this.getValue(t,"color",null))&&s.color.setFromString(f),s;case"point":var d=this.attachmentLoader.newPointAttachment(e,i);return null==d?null:(d.x=this.getValue(t,"x",0)*a,d.y=this.getValue(t,"y",0)*a,d.rotation=this.getValue(t,"rotation",0),null!=(f=this.getValue(t,"color",null))&&d.color.setFromString(f),d);case"clipping":l=this.attachmentLoader.newClippingAttachment(e,i);if(null==l)return null;s=this.getValue(t,"end",null);if(null!=s){d=r.findSlot(s);if(null==d)throw new Error("Clipping end slot not found: "+s);l.endSlot=d}var f,u=t.vertexCount;return this.readVertices(t,l,u<<1),null!=(f=this.getValue(t,"color",null))&&l.color.setFromString(f),l}return null},_.prototype.readVertices=function(t,e,n){var i=this.scale;e.worldVerticesLength=n;var r=t.vertices;if(n!=r.length){for(var a=new Array,s=new Array,o=0,h=r.length;o<h;){var l=r[o++];s.push(l);for(var u=o+4*l;o<u;o+=4)s.push(r[o]),a.push(r[o+1]*i),a.push(r[o+2]*i),a.push(r[o+3])}e.bones=s,e.vertices=$.Utils.toFloatArray(a)}else{var p=$.Utils.toFloatArray(r);if(1!=i)for(var o=0,h=r.length;o<h;o++)p[o]*=i;e.vertices=p}},_.prototype.readAnimation=function(t,e,n){var i=this.scale,r=new Array,a=0;if(t.slots)for(var s in t.slots){var o=t.slots[s];if(-1==(Z=n.findSlotIndex(s)))throw new Error("Slot not found: "+s);for(_ in o){var h=o[_];if("attachment"==_){(y=new $.AttachmentTimeline(h.length)).slotIndex=Z;for(var l=0,u=0;u<h.length;u++){var p=h[u];y.setFrame(l++,p.time,p.name)}r.push(y),a=Math.max(a,y.frames[y.getFrameCount()-1])}else if("color"==_){(y=new $.ColorTimeline(h.length)).slotIndex=Z;for(l=0,u=0;u<h.length;u++){var p=h[u],c=new $.Color;c.setFromString(p.color),y.setFrame(l,p.time,c.r,c.g,c.b,c.a),this.readCurve(p,y,l),l++}r.push(y),a=Math.max(a,y.frames[(y.getFrameCount()-1)*$.ColorTimeline.ENTRIES])}else{if("twoColor"!=_)throw new Error("Invalid timeline type for a slot: "+_+" ("+s+")");(y=new $.TwoColorTimeline(h.length)).slotIndex=Z;for(l=0,u=0;u<h.length;u++){var p=h[u],d=new $.Color,f=new $.Color;d.setFromString(p.light),f.setFromString(p.dark),y.setFrame(l,p.time,d.r,d.g,d.b,d.a,f.r,f.g,f.b),this.readCurve(p,y,l),l++}r.push(y),a=Math.max(a,y.frames[(y.getFrameCount()-1)*$.TwoColorTimeline.ENTRIES])}}}if(t.bones)for(var m in t.bones){var g=t.bones[m],v=n.findBoneIndex(m);if(-1==v)throw new Error("Bone not found: "+m);for(_ in g){h=g[_];if("rotate"===_){(y=new $.RotateTimeline(h.length)).boneIndex=v;for(l=0,u=0;u<h.length;u++){p=h[u];y.setFrame(l,p.time,p.angle),this.readCurve(p,y,l),l++}r.push(y),a=Math.max(a,y.frames[(y.getFrameCount()-1)*$.RotateTimeline.ENTRIES])}else{if("translate"!==_&&"scale"!==_&&"shear"!==_)throw new Error("Invalid timeline type for a bone: "+_+" ("+m+")");var y=null,x=1;"scale"===_?y=new $.ScaleTimeline(h.length):"shear"===_?y=new $.ShearTimeline(h.length):(y=new $.TranslateTimeline(h.length),x=i),y.boneIndex=v;for(l=0,u=0;u<h.length;u++){var p=h[u],E=this.getValue(p,"x",0),w=this.getValue(p,"y",0);y.setFrame(l,p.time,E*x,w*x),this.readCurve(p,y,l),l++}r.push(y),a=Math.max(a,y.frames[(y.getFrameCount()-1)*$.TranslateTimeline.ENTRIES])}}}if(t.ik)for(var M in t.ik){var A=t.ik[M],T=n.findIkConstraint(M);(y=new $.IkConstraintTimeline(A.length)).ikConstraintIndex=n.ikConstraints.indexOf(T);for(l=0,u=0;u<A.length;u++){p=A[u];y.setFrame(l,p.time,this.getValue(p,"mix",1),this.getValue(p,"bendPositive",!0)?1:-1),this.readCurve(p,y,l),l++}r.push(y),a=Math.max(a,y.frames[(y.getFrameCount()-1)*$.IkConstraintTimeline.ENTRIES])}if(t.transform)for(var M in t.transform){A=t.transform[M],T=n.findTransformConstraint(M);(y=new $.TransformConstraintTimeline(A.length)).transformConstraintIndex=n.transformConstraints.indexOf(T);for(l=0,u=0;u<A.length;u++){p=A[u];y.setFrame(l,p.time,this.getValue(p,"rotateMix",1),this.getValue(p,"translateMix",1),this.getValue(p,"scaleMix",1),this.getValue(p,"shearMix",1)),this.readCurve(p,y,l),l++}r.push(y),a=Math.max(a,y.frames[(y.getFrameCount()-1)*$.TransformConstraintTimeline.ENTRIES])}if(t.paths)for(var M in t.paths){var A=t.paths[M],b=n.findPathConstraintIndex(M);if(-1==b)throw new Error("Path constraint not found: "+M);var R=n.pathConstraints[b];for(_ in A){h=A[_];if("position"===_||"spacing"===_){var y=null,x=1;"spacing"===_?(y=new $.PathConstraintSpacingTimeline(h.length),R.spacingMode!=$.SpacingMode.Length&&R.spacingMode!=$.SpacingMode.Fixed||(x=i)):(y=new $.PathConstraintPositionTimeline(h.length),R.positionMode==$.PositionMode.Fixed&&(x=i)),y.pathConstraintIndex=b;for(l=0,u=0;u<h.length;u++){p=h[u];y.setFrame(l,p.time,this.getValue(p,_,0)*x),this.readCurve(p,y,l),l++}r.push(y),a=Math.max(a,y.frames[(y.getFrameCount()-1)*$.PathConstraintPositionTimeline.ENTRIES])}else if("mix"===_){(y=new $.PathConstraintMixTimeline(h.length)).pathConstraintIndex=b;for(l=0,u=0;u<h.length;u++){p=h[u];y.setFrame(l,p.time,this.getValue(p,"rotateMix",1),this.getValue(p,"translateMix",1)),this.readCurve(p,y,l),l++}r.push(y),a=Math.max(a,y.frames[(y.getFrameCount()-1)*$.PathConstraintMixTimeline.ENTRIES])}}}if(t.deform)for(var I in t.deform){var S=t.deform[I],C=n.findSkin(I);if(null==C)throw new Error("Skin not found: "+I);for(s in S){var _,o=S[s];if(-1==(Z=n.findSlotIndex(s)))throw new Error("Slot not found: "+o.name);for(_ in o){var h=o[_],P=C.getAttachment(Z,_);if(null==P)throw new Error("Deform attachment not found: "+h.name);var V=null!=P.bones,N=P.vertices,k=V?N.length/3*2:N.length;(y=new $.DeformTimeline(h.length)).slotIndex=Z,y.attachment=P;for(var l=0,D=0;D<h.length;D++){var p=h[D],L=void 0,Y=this.getValue(p,"vertices",null);if(null==Y)L=V?$.Utils.newFloatArray(k):N;else{L=$.Utils.newFloatArray(k);var U=this.getValue(p,"offset",0);if($.Utils.arrayCopy(Y,0,L,U,Y.length),1!=i)for(var F=(u=U)+Y.length;u<F;u++)L[u]*=i;if(!V)for(u=0;u<k;u++)L[u]+=N[u]}y.setFrame(l,p.time,L),this.readCurve(p,y,l),l++}r.push(y),a=Math.max(a,y.frames[y.getFrameCount()-1])}}}var X=t.drawOrder;if(null==X&&(X=t.draworder),null!=X){for(var y=new $.DrawOrderTimeline(X.length),O=n.slots.length,l=0,D=0;D<X.length;D++){var B=X[D],W=null,q=this.getValue(B,"offsets",null);if(null!=q){W=$.Utils.newArray(O,-1);for(var j=$.Utils.newArray(O-q.length,0),G=0,z=0,u=0;u<q.length;u++){var Z,H=q[u];if(-1==(Z=n.findSlotIndex(H.slot)))throw new Error("Slot not found: "+H.slot);for(;G!=Z;)j[z++]=G++;W[G+H.offset]=G++}for(;G<O;)j[z++]=G++;for(u=O-1;0<=u;u--)-1==W[u]&&(W[u]=j[--z])}y.setFrame(l++,B.time,W)}r.push(y),a=Math.max(a,y.frames[y.getFrameCount()-1])}if(t.events){for(y=new $.EventTimeline(t.events.length),l=0,u=0;u<t.events.length;u++){var J=t.events[u],Q=n.findEvent(J.name);if(null==Q)throw new Error("Event not found: "+J.name);var K=new $.Event($.Utils.toSinglePrecision(J.time),Q);K.intValue=this.getValue(J,"int",Q.intValue),K.floatValue=this.getValue(J,"float",Q.floatValue),K.stringValue=this.getValue(J,"string",Q.stringValue),y.setFrame(l++,K)}r.push(y),a=Math.max(a,y.frames[y.getFrameCount()-1])}if(isNaN(a))throw new Error("Error while parsing animation, duration is NaN");n.animations.push(new $.Animation(e,r,a))},_.prototype.readCurve=function(t,e,n){t.curve&&("stepped"===t.curve?e.setStepped(n):"[object Array]"===Object.prototype.toString.call(t.curve)&&(t=t.curve,e.setCurve(n,t[0],t[1],t[2],t[3])))},_.prototype.getValue=function(t,e,n){return void 0!==t[e]?t[e]:n},_.blendModeFromString=function(t){if("normal"==(t=t.toLowerCase()))return $.BlendMode.Normal;if("additive"==t)return $.BlendMode.Additive;if("multiply"==t)return $.BlendMode.Multiply;if("screen"==t)return $.BlendMode.Screen;throw new Error("Unknown blend mode: "+t)},_.positionModeFromString=function(t){if("fixed"==(t=t.toLowerCase()))return $.PositionMode.Fixed;if("percent"==t)return $.PositionMode.Percent;throw new Error("Unknown position mode: "+t)},_.spacingModeFromString=function(t){if("length"==(t=t.toLowerCase()))return $.SpacingMode.Length;if("fixed"==t)return $.SpacingMode.Fixed;if("percent"==t)return $.SpacingMode.Percent;throw new Error("Unknown position mode: "+t)},_.rotateModeFromString=function(t){if("tangent"==(t=t.toLowerCase()))return $.RotateMode.Tangent;if("chain"==t)return $.RotateMode.Chain;if("chainscale"==t)return $.RotateMode.ChainScale;throw new Error("Unknown rotate mode: "+t)},_.transformModeFromString=function(t){if("normal"==(t=t.toLowerCase()))return $.TransformMode.Normal;if("onlytranslation"==t)return $.TransformMode.OnlyTranslation;if("norotationorreflection"==t)return $.TransformMode.NoRotationOrReflection;if("noscale"==t)return $.TransformMode.NoScale;if("noscaleorreflection"==t)return $.TransformMode.NoScaleOrReflection;throw new Error("Unknown transform mode: "+t)},_);function _(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}$.SkeletonJson=t;var m=function(t,e,n,i){this.mesh=t,this.skin=e,this.slotIndex=n,this.parent=i}}(spine=spine||{}),function(t){var e=(n.prototype.addAttachment=function(t,e,n){if(null==n)throw new Error("attachment cannot be null.");var i=this.attachments;t>=i.length&&(i.length=t+1),i[t]||(i[t]={}),i[t][e]=n},n.prototype.getAttachment=function(t,e){t=this.attachments[t];return t?t[e]:null},n.prototype.attachAll=function(t,e){for(var n=0,i=0;i<t.slots.length;i++){var r=t.slots[i],a=r.getAttachment();if(a&&n<e.attachments.length){var s,o=e.attachments[n];for(s in o)if(a==o[s]){var h=this.getAttachment(n,s);null!=h&&r.setAttachment(h);break}}n++}},n);function n(t){if(this.attachments=new Array,null==t)throw new Error("name cannot be null.");this.name=t}t.Skin=e}(spine=spine||{}),function(n){var t=(e.prototype.getAttachment=function(){return this.attachment},e.prototype.setAttachment=function(t){this.attachment!=t&&(this.attachment=t,this.attachmentTime=this.bone.skeleton.time,this.attachmentVertices.length=0)},e.prototype.setAttachmentTime=function(t){this.attachmentTime=this.bone.skeleton.time-t},e.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},e.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),null!=this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},e);function e(t,e){if(this.attachmentVertices=new Array,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("bone cannot be null.");this.data=t,this.bone=e,this.color=new n.Color,this.darkColor=null==t.darkColor?null:new n.Color,this.setToSetupPose()}n.Slot=t}(spine=spine||{}),function(i){function t(t,e,n){if(this.color=new i.Color(1,1,1,1),t<0)throw new Error("index must be >= 0.");if(null==e)throw new Error("name cannot be null.");if(null==n)throw new Error("boneData cannot be null.");this.index=t,this.name=e,this.boneData=n}i.SlotData=t}(spine=spine||{}),function(t){var e,n,i=(r.prototype.getImage=function(){return this._image},r.filterFromString=function(t){switch(t.toLowerCase()){case"nearest":return e.Nearest;case"linear":return e.Linear;case"mipmap":return e.MipMap;case"mipmapnearestnearest":return e.MipMapNearestNearest;case"mipmaplinearnearest":return e.MipMapLinearNearest;case"mipmapnearestlinear":return e.MipMapNearestLinear;case"mipmaplinearlinear":return e.MipMapLinearLinear;default:throw new Error("Unknown texture filter "+t)}},r.wrapFromString=function(t){switch(t.toLowerCase()){case"mirroredtepeat":return n.MirroredRepeat;case"clamptoedge":return n.ClampToEdge;case"repeat":return n.Repeat;default:throw new Error("Unknown texture wrap "+t)}},r);function r(t){this._image=t}t.Texture=i,(i=e=t.TextureFilter||(t.TextureFilter={}))[i.Nearest=9728]="Nearest",i[i.Linear=9729]="Linear",i[i.MipMap=9987]="MipMap",i[i.MipMapNearestNearest=9984]="MipMapNearestNearest",i[i.MipMapLinearNearest=9985]="MipMapLinearNearest",i[i.MipMapNearestLinear=9986]="MipMapNearestLinear",i[i.MipMapLinearLinear=9987]="MipMapLinearLinear",(i=n=t.TextureWrap||(t.TextureWrap={}))[i.MirroredRepeat=33648]="MirroredRepeat",i[i.ClampToEdge=33071]="ClampToEdge",i[i.Repeat=10497]="Repeat",i=function(){this.u=0,this.v=0,this.u2=0,this.v2=0,this.width=0,this.height=0,this.rotate=!1,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0},t.TextureRegion=i;var a,i=(a=t.Texture,__extends(s,a),s.prototype.setFilters=function(t,e){},s.prototype.setWraps=function(t,e){},s.prototype.dispose=function(){},s);function s(){return null!==a&&a.apply(this,arguments)||this}t.FakeTexture=i}(spine=spine||{}),function(p){var t=(e.prototype.load=function(t,e){if(null==e)throw new Error("textureLoader cannot be null.");for(var n=new c(t),i=new Array(4),r=null;;){var a,s,o,h,l,u=n.readLine();if(null==u)break;0==(u=u.trim()).length?r=null:r?((l=new f).name=u,l.page=r,l.rotate="true"==n.readValue(),n.readTuple(i),a=parseInt(i[0]),s=parseInt(i[1]),n.readTuple(i),o=parseInt(i[0]),h=parseInt(i[1]),l.u=a/r.width,l.v=s/r.height,l.rotate?(l.u2=(a+h)/r.width,l.v2=(s+o)/r.height):(l.u2=(a+o)/r.width,l.v2=(s+h)/r.height),l.x=a,l.y=s,l.width=Math.abs(o),l.height=Math.abs(h),4==n.readTuple(i)&&4==n.readTuple(i)&&n.readTuple(i),l.originalWidth=parseInt(i[0]),l.originalHeight=parseInt(i[1]),n.readTuple(i),l.offsetX=parseInt(i[0]),l.offsetY=parseInt(i[1]),l.index=parseInt(n.readValue()),l.texture=r.texture,this.regions.push(l)):((r=new d).name=u,2==n.readTuple(i)&&(r.width=parseInt(i[0]),r.height=parseInt(i[1]),n.readTuple(i)),n.readTuple(i),r.minFilter=p.Texture.filterFromString(i[0]),r.magFilter=p.Texture.filterFromString(i[1]),l=n.readValue(),r.uWrap=p.TextureWrap.ClampToEdge,r.vWrap=p.TextureWrap.ClampToEdge,"x"==l?r.uWrap=p.TextureWrap.Repeat:"y"==l?r.vWrap=p.TextureWrap.Repeat:"xy"==l&&(r.uWrap=r.vWrap=p.TextureWrap.Repeat),r.texture=e(u),r.texture.setFilters(r.minFilter,r.magFilter),r.texture.setWraps(r.uWrap,r.vWrap),r.width=r.texture.getImage().width,r.height=r.texture.getImage().height,this.pages.push(r))}},e.prototype.findRegion=function(t){for(var e=0;e<this.regions.length;e++)if(this.regions[e].name==t)return this.regions[e];return null},e.prototype.dispose=function(){for(var t=0;t<this.pages.length;t++)this.pages[t].texture.dispose()},e);function e(t,e){this.pages=new Array,this.regions=new Array,this.load(t,e)}p.TextureAtlas=t;var c=(n.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},n.prototype.readValue=function(){var t=this.readLine(),e=t.indexOf(":");if(-1==e)throw new Error("Invalid line: "+t);return t.substring(e+1).trim()},n.prototype.readTuple=function(t){var e=this.readLine(),n=e.indexOf(":");if(-1==n)throw new Error("Invalid line: "+e);for(var i=0,r=n+1;i<3;i++){var a=e.indexOf(",",r);if(-1==a)break;t[i]=e.substr(r,a-r).trim(),r=a+1}return t[i]=e.substring(r).trim(),i+1},n);function n(t){this.index=0,this.lines=t.split(/\r\n|\r|\n/)}var d=function(){};p.TextureAtlasPage=d;var i,f=(i=p.TextureRegion,__extends(r,i),r);function r(){return null!==i&&i.apply(this,arguments)||this}p.TextureAtlasRegion=f}(spine=spine||{}),function(R){var t=(e.prototype.apply=function(){this.update()},e.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},e.prototype.applyAbsoluteWorld=function(){for(var t=this.rotateMix,e=this.translateMix,n=this.scaleMix,i=this.shearMix,r=this.target,a=r.a,s=r.b,o=r.c,h=r.d,l=0<a*h-s*o?R.MathUtils.degRad:-R.MathUtils.degRad,u=this.data.offsetRotation*l,p=this.data.offsetShearY*l,c=this.bones,d=0,f=c.length;d<f;d++){var m,g,v,y,x,E,w,M,A,T=c[d],b=!1;0!=t&&(m=T.a,x=T.b,g=T.c,E=T.d,(M=Math.atan2(o,a)-Math.atan2(g,m)+u)>R.MathUtils.PI?M-=R.MathUtils.PI2:M<-R.MathUtils.PI&&(M+=R.MathUtils.PI2),M*=t,y=Math.cos(M),v=Math.sin(M),T.a=y*m-v*g,T.b=y*x-v*E,T.c=v*m+y*g,T.d=v*x+y*E,b=!0),0!=e&&(y=this.temp,r.localToWorld(y.set(this.data.offsetX,this.data.offsetY)),T.worldX+=(y.x-T.worldX)*e,T.worldY+=(y.y-T.worldY)*e,b=!0),0<n&&(A=Math.sqrt(T.a*T.a+T.c*T.c),w=Math.sqrt(a*a+o*o),1e-5<A&&(A=(A+(w-A+this.data.offsetScaleX)*n)/A),T.a*=A,T.c*=A,A=Math.sqrt(T.b*T.b+T.d*T.d),w=Math.sqrt(s*s+h*h),1e-5<A&&(A=(A+(w-A+this.data.offsetScaleY)*n)/A),T.b*=A,T.d*=A,b=!0),0<i&&(x=T.b,E=T.d,w=Math.atan2(E,x),(M=Math.atan2(h,s)-Math.atan2(o,a)-(w-Math.atan2(T.c,T.a)))>R.MathUtils.PI?M-=R.MathUtils.PI2:M<-R.MathUtils.PI&&(M+=R.MathUtils.PI2),M=w+(M+p)*i,A=Math.sqrt(x*x+E*E),T.b=Math.cos(M)*A,T.d=Math.sin(M)*A,b=!0),b&&(T.appliedValid=!1)}},e.prototype.applyRelativeWorld=function(){for(var t=this.rotateMix,e=this.translateMix,n=this.scaleMix,i=this.shearMix,r=this.target,a=r.a,s=r.b,o=r.c,h=r.d,l=0<a*h-s*o?R.MathUtils.degRad:-R.MathUtils.degRad,u=this.data.offsetRotation*l,p=this.data.offsetShearY*l,c=this.bones,d=0,f=c.length;d<f;d++){var m,g,v,y,x,E,w,M,A=c[d],T=!1;0!=t&&(m=A.a,E=A.b,g=A.c,w=A.d,(x=Math.atan2(o,a)+u)>R.MathUtils.PI?x-=R.MathUtils.PI2:x<-R.MathUtils.PI&&(x+=R.MathUtils.PI2),x*=t,y=Math.cos(x),v=Math.sin(x),A.a=y*m-v*g,A.b=y*E-v*w,A.c=v*m+y*g,A.d=v*E+y*w,T=!0),0!=e&&(y=this.temp,r.localToWorld(y.set(this.data.offsetX,this.data.offsetY)),A.worldX+=y.x*e,A.worldY+=y.y*e,T=!0),0<n&&(M=(Math.sqrt(a*a+o*o)-1+this.data.offsetScaleX)*n+1,A.a*=M,A.c*=M,M=(Math.sqrt(s*s+h*h)-1+this.data.offsetScaleY)*n+1,A.b*=M,A.d*=M,T=!0),0<i&&((x=Math.atan2(h,s)-Math.atan2(o,a))>R.MathUtils.PI?x-=R.MathUtils.PI2:x<-R.MathUtils.PI&&(x+=R.MathUtils.PI2),E=A.b,w=A.d,x=Math.atan2(w,E)+(x-R.MathUtils.PI/2+p)*i,M=Math.sqrt(E*E+w*w),A.b=Math.cos(x)*M,A.d=Math.sin(x)*M,T=!0),T&&(A.appliedValid=!1)}},e.prototype.applyAbsoluteLocal=function(){var t=this.rotateMix,e=this.translateMix,n=this.scaleMix,i=this.shearMix,r=this.target;r.appliedValid||r.updateAppliedTransform();for(var a=this.bones,s=0,o=a.length;s<o;s++){var h=a[s];h.appliedValid||h.updateAppliedTransform();var l=h.arotation;0!=t&&(f=r.arotation-l+this.data.offsetRotation,l+=(f-=360*(16384-(16384.499999999996-f/360|0)))*t);var u=h.ax,p=h.ay;0!=e&&(u+=(r.ax-u+this.data.offsetX)*e,p+=(r.ay-p+this.data.offsetY)*e);var c=h.ascaleX,d=h.ascaleY;0<n&&(1e-5<c&&(c=(c+(r.ascaleX-c+this.data.offsetScaleX)*n)/c),1e-5<d&&(d=(d+(r.ascaleY-d+this.data.offsetScaleY)*n)/d));var f,m=h.ashearY;0<i&&(f=r.ashearY-m+this.data.offsetShearY,f-=360*(16384-(16384.499999999996-f/360|0)),h.shearY+=f*i),h.updateWorldTransformWith(u,p,l,c,d,h.ashearX,m)}},e.prototype.applyRelativeLocal=function(){var t=this.rotateMix,e=this.translateMix,n=this.scaleMix,i=this.shearMix,r=this.target;r.appliedValid||r.updateAppliedTransform();for(var a=this.bones,s=0,o=a.length;s<o;s++){var h=a[s];h.appliedValid||h.updateAppliedTransform();var l=h.arotation;0!=t&&(l+=(r.arotation+this.data.offsetRotation)*t);var u=h.ax,p=h.ay;0!=e&&(u+=(r.ax+this.data.offsetX)*e,p+=(r.ay+this.data.offsetY)*e);var c=h.ascaleX,d=h.ascaleY;0<n&&(1e-5<c&&(c*=(r.ascaleX-1+this.data.offsetScaleX)*n+1),1e-5<d&&(d*=(r.ascaleY-1+this.data.offsetScaleY)*n+1));var f=h.ashearY;0<i&&(f+=(r.ashearY+this.data.offsetShearY)*i),h.updateWorldTransformWith(u,p,l,c,d,h.ashearX,f)}},e.prototype.getOrder=function(){return this.data.order},e);function e(t,e){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new R.Vector2,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix,this.scaleMix=t.scaleMix,this.shearMix=t.shearMix,this.bones=new Array;for(var n=0;n<t.bones.length;n++)this.bones.push(e.findBone(t.bones[n].name));this.target=e.findBone(t.target.name)}R.TransformConstraint=t}(spine=spine||{}),(spine||(spine={})).TransformConstraintData=function(t){if(this.order=0,this.bones=new Array,this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,this.relative=!1,this.local=!1,null==t)throw new Error("name cannot be null.");this.name=t},function(t){var e=(O.prototype.triangulate=function(t){for(var e=t,n=t.length>>1,i=this.indicesArray,r=i.length=0;r<n;r++)i[r]=r;for(var a=this.isConcaveArray,r=a.length=0,s=n;r<s;++r)a[r]=O.isConcave(r,n,e,i);var o=this.triangles;for(o.length=0;3<n;){for(var h=n-1,r=0,l=1;;){t:if(!a[r]){for(var u=i[h]<<1,p=i[r]<<1,c=i[l]<<1,d=e[u],f=e[1+u],m=e[p],g=e[1+p],v=e[c],y=e[1+c],x=(l+1)%n;x!=h;x=(x+1)%n)if(a[x]){var E=i[x]<<1,w=e[E],E=e[1+E];if(O.positiveArea(v,y,d,f,w,E)&&O.positiveArea(d,f,m,g,w,E)&&O.positiveArea(m,g,v,y,w,E))break t}break}if(0==l){for(;a[r]&&0<--r;);break}h=r,l=((r=l)+1)%n}o.push(i[(n+r-1)%n]),o.push(i[r]),o.push(i[(r+1)%n]),i.splice(r,1),a.splice(r,1);var M=(--n+r-1)%n,A=r==n?0:r;a[M]=O.isConcave(M,n,e,i),a[A]=O.isConcave(A,n,e,i)}return 3==n&&(o.push(i[2]),o.push(i[0]),o.push(i[1])),o},O.prototype.decompose=function(t,e){var n=t,i=this.convexPolygons;this.polygonPool.freeAll(i),i.length=0;var r=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(r),r.length=0;var a=this.polygonIndicesPool.obtain();a.length=0;for(var s=this.polygonPool.obtain(),o=-1,h=s.length=0,l=0,u=e.length;l<u;l+=3){var p=e[l]<<1,c=e[l+1]<<1,d=e[l+2]<<1,f=n[p],m=n[1+p],g=n[c],v=n[1+c],y=n[d],x=n[1+d],E=!1;o==p&&(w=s.length-4,I=O.winding(s[w],s[w+1],s[w+2],s[w+3],y,x),S=O.winding(y,x,s[0],s[1],s[2],s[3]),I==h&&S==h&&(s.push(y),s.push(x),a.push(d),E=!0)),E||(0<s.length?(i.push(s),r.push(a)):(this.polygonPool.free(s),this.polygonIndicesPool.free(a)),(s=this.polygonPool.obtain()).length=0,s.push(f),s.push(m),s.push(g),s.push(v),s.push(y),s.push(x),(a=this.polygonIndicesPool.obtain()).length=0,a.push(p),a.push(c),a.push(d),h=O.winding(f,m,g,v,y,x),o=p)}0<s.length&&(i.push(s),r.push(a));for(l=0,u=i.length;l<u;l++)if(0!=(a=r[l]).length)for(var w,M,A,T,b,R,I,S,C=a[0],_=a[a.length-1],P=(s=i[l])[w=s.length-4],V=s[w+1],N=s[w+2],k=s[w+3],D=s[0],L=s[1],Y=s[2],U=s[3],F=O.winding(P,V,N,k,D,L),X=0;X<u;X++)X!=l&&(3==(M=r[X]).length&&(A=M[0],T=M[1],b=M[2],y=(R=i[X])[R.length-2],x=R[R.length-1],A==C&&T==_&&(I=O.winding(P,V,N,k,y,x),S=O.winding(y,x,D,L,Y,U),I==F&&S==F&&(R.length=0,M.length=0,s.push(y),s.push(x),a.push(b),P=N,V=k,N=y,k=x,X=0))));for(l=i.length-1;0<=l;l--)0==(s=i[l]).length&&(i.splice(l,1),this.polygonPool.free(s),a=r[l],r.splice(l,1),this.polygonIndicesPool.free(a));return i},O.isConcave=function(t,e,n,i){var r=i[(e+t-1)%e]<<1,a=i[t]<<1,e=i[(t+1)%e]<<1;return!this.positiveArea(n[r],n[1+r],n[a],n[1+a],n[e],n[1+e])},O.positiveArea=function(t,e,n,i,r,a){return 0<=t*(a-i)+n*(e-a)+r*(i-e)},O.winding=function(t,e,n,i,r,a){n-=t,i-=e;return 0<=r*i-a*n+n*e-t*i?1:-1},O);function O(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new t.Pool(function(){return new Array}),this.polygonIndicesPool=new t.Pool(function(){return new Array})}t.Triangulator=e}(spine=spine||{}),function(t){var e=(n.prototype.add=function(t){var e=this.contains(t);return this.array[0|t]=0|t,!e},n.prototype.contains=function(t){return null!=this.array[0|t]},n.prototype.remove=function(t){this.array[0|t]=void 0},n.prototype.clear=function(){this.array.length=0},n);function n(){this.array=new Array}function i(t,e,n,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),this.r=t,this.g=e,this.b=n,this.a=i}function r(){}function a(){}t.IntSet=e,i.prototype.set=function(t,e,n,i){return this.r=t,this.g=e,this.b=n,this.a=i,this.clamp(),this},i.prototype.setFromColor=function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this},i.prototype.setFromString=function(t){return t="#"==t.charAt(0)?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=(8!=t.length?255:parseInt(t.substr(6,2),16))/255,this},i.prototype.add=function(t,e,n,i){return this.r+=t,this.g+=e,this.b+=n,this.a+=i,this.clamp(),this},i.prototype.clamp=function(){return this.r<0?this.r=0:1<this.r&&(this.r=1),this.g<0?this.g=0:1<this.g&&(this.g=1),this.b<0?this.b=0:1<this.b&&(this.b=1),this.a<0?this.a=0:1<this.a&&(this.a=1),this},i.WHITE=new i(1,1,1,1),i.RED=new i(1,0,0,1),i.GREEN=new i(0,1,0,1),i.BLUE=new i(0,0,1,1),i.MAGENTA=new i(1,0,1,1),e=i,t.Color=e,r.clamp=function(t,e,n){return t<e?e:n<t?n:t},r.cosDeg=function(t){return Math.cos(t*r.degRad)},r.sinDeg=function(t){return Math.sin(t*r.degRad)},r.signum=function(t){return 0<t?1:t<0?-1:0},r.toInt=function(t){return 0<t?Math.floor(t):Math.ceil(t)},r.cbrt=function(t){var e=Math.pow(Math.abs(t),1/3);return t<0?-e:e},r.randomTriangular=function(t,e){return r.randomTriangularWith(t,e,.5*(t+e))},r.randomTriangularWith=function(t,e,n){var i=Math.random(),r=e-t;return i<=(n-t)/r?t+Math.sqrt(i*r*(n-t)):e-Math.sqrt((1-i)*r*(e-n))},r.PI2=2*(r.PI=3.1415927),r.radDeg=r.radiansToDegrees=180/r.PI,r.degRad=r.degreesToRadians=r.PI/180,e=r,t.MathUtils=e,a.prototype.apply=function(t,e,n){return t+(e-t)*this.applyInternal(n)},e=a,t.Interpolation=e;var s,e=(__extends(o,s=e),o.prototype.applyInternal=function(t){return t<=.5?Math.pow(2*t,this.power)/2:Math.pow(2*(t-1),this.power)/(this.power%2==0?-2:2)+1},o);function o(t){var e=s.call(this)||this;return e.power=2,e.power=t,e}t.Pow=e;var h,e=(__extends(l,h=e),l.prototype.applyInternal=function(t){return Math.pow(t-1,this.power)*(this.power%2==0?-1:1)+1},l);function l(t){return h.call(this,t)||this}function u(){}function p(){}function c(t){this.items=new Array,this.instantiator=t}function d(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}function f(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}function m(t){void 0===t&&(t=32),this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(t)}t.PowOut=e,u.arrayCopy=function(t,e,n,i,r){for(var a=e,s=i;a<e+r;a++,s++)n[s]=t[a]},u.setArraySize=function(t,e,n){void 0===n&&(n=0);var i=t.length;if(i==e)return t;if(i<(t.length=e))for(var r=i;r<e;r++)t[r]=n;return t},u.ensureArrayCapacity=function(t,e,n){return void 0===n&&(n=0),t.length>=e?t:u.setArraySize(t,e,n)},u.newArray=function(t,e){for(var n=new Array(t),i=0;i<t;i++)n[i]=e;return n},u.newFloatArray=function(t){if(u.SUPPORTS_TYPED_ARRAYS)return new Float32Array(t);for(var e=new Array(t),n=0;n<e.length;n++)e[n]=0;return e},u.newShortArray=function(t){if(u.SUPPORTS_TYPED_ARRAYS)return new Int16Array(t);for(var e=new Array(t),n=0;n<e.length;n++)e[n]=0;return e},u.toFloatArray=function(t){return u.SUPPORTS_TYPED_ARRAYS?new Float32Array(t):t},u.toSinglePrecision=function(t){return u.SUPPORTS_TYPED_ARRAYS?Math.fround(t):t},u.webkit602BugfixHelper=function(t,e){},u.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array,e=u,t.Utils=e,p.logBones=function(t){for(var e=0;e<t.bones.length;e++){var n=t.bones[e];console.log(n.data.name+", "+n.a+", "+n.b+", "+n.c+", "+n.d+", "+n.worldX+", "+n.worldY)}},e=p,t.DebugUtils=e,c.prototype.obtain=function(){return 0<this.items.length?this.items.pop():this.instantiator()},c.prototype.free=function(t){t.reset&&t.reset(),this.items.push(t)},c.prototype.freeAll=function(t){for(var e=0;e<t.length;e++)t[e].reset&&t[e].reset(),this.items[e]=t[e]},c.prototype.clear=function(){this.items.length=0},e=c,t.Pool=e,d.prototype.set=function(t,e){return this.x=t,this.y=e,this},d.prototype.length=function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},d.prototype.normalize=function(){var t=this.length();return 0!=t&&(this.x/=t,this.y/=t),this},e=d,t.Vector2=e,f.prototype.update=function(){var t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,1<this.frameTime&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)},e=f,t.TimeKeeper=e,m.prototype.hasEnoughData=function(){return this.addedValues>=this.values.length},m.prototype.addValue=function(t){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=t,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0},m.prototype.getMean=function(){if(this.hasEnoughData()){if(this.dirty){for(var t=0,e=0;e<this.values.length;e++)t+=this.values[e];this.mean=t/this.values.length,this.dirty=!1}return this.mean}return 0},e=m,t.WindowedMean=e}(spine=spine||{}),function(){var e;Math.fround||(Math.fround=(e=new Float32Array(1),function(t){return e[0]=t,e[0]}))}(),function(t){var e=function(t){if(null==t)throw new Error("name cannot be null.");this.name=t};t.Attachment=e;var n,e=(__extends(i,n=e),i.prototype.computeWorldVertices=function(t,e,n,i,r,a){n=r+(n>>1)*a;var s=t.bone.skeleton,o=t.attachmentVertices,h=this.vertices,l=this.bones;if(null!=l){for(var u=0,p=0,c=0;c<e;c+=2)u+=(g=l[u])+1,p+=g;var d=s.bones;if(0==o.length)for(M=r,A=3*p;M<n;M+=a){var f=0,m=0,g=l[u++];for(g+=u;u<g;u++,A+=3){var v=d[l[u]],y=h[A],x=h[A+1],E=h[A+2];f+=(y*v.a+x*v.b+v.worldX)*E,m+=(y*v.c+x*v.d+v.worldY)*E}i[M]=f,i[M+1]=m}else for(var w=o,M=r,A=3*p,T=p<<1;M<n;M+=a){f=0,m=0,g=l[u++];for(g+=u;u<g;u++,A+=3,T+=2){v=d[l[u]],y=h[A]+w[T],x=h[A+1]+w[T+1],E=h[A+2];f+=(y*v.a+x*v.b+v.worldX)*E,m+=(y*v.c+x*v.d+v.worldY)*E}i[M]=f,i[M+1]=m}}else{0<o.length&&(h=o);for(var v,b=(v=t.bone).worldX,R=v.worldY,I=v.a,A=v.b,S=v.c,C=v.d,_=e,M=r;M<n;_+=2,M+=a){var y=h[_],x=h[_+1];i[M]=y*I+x*A+b,i[M+1]=y*S+x*C+R}}},i.prototype.applyDeform=function(t){return this==t},i.nextID=0,i);function i(t){t=n.call(this,t)||this;return t.id=(65535&i.nextID++)<<11,t.worldVerticesLength=0,t}t.VertexAttachment=e}(spine=spine||{}),function(t){(t=t.AttachmentType||(t.AttachmentType={}))[t.Region=0]="Region",t[t.BoundingBox=1]="BoundingBox",t[t.Mesh=2]="Mesh",t[t.LinkedMesh=3]="LinkedMesh",t[t.Path=4]="Path",t[t.Point=5]="Point"}(spine=spine||{}),function(e){var n,t=(n=e.VertexAttachment,__extends(i,n),i);function i(t){t=n.call(this,t)||this;return t.color=new e.Color(1,1,1,1),t}e.BoundingBoxAttachment=t}(spine=spine||{}),function(e){var n,t=(n=e.VertexAttachment,__extends(i,n),i);function i(t){t=n.call(this,t)||this;return t.color=new e.Color(.2275,.2275,.8078,1),t}e.ClippingAttachment=t}(spine=spine||{}),function(h){var e,t=(e=h.VertexAttachment,__extends(n,e),n.prototype.updateUVs=function(){var t=0,e=0,n=0,i=0;null==this.region?(t=e=0,n=i=1):(t=this.region.u,e=this.region.v,n=this.region.u2-t,i=this.region.v2-e);var r=this.regionUVs;null!=this.uvs&&this.uvs.length==r.length||(this.uvs=h.Utils.newFloatArray(r.length));var a=this.uvs;if(this.region.rotate)for(var s=0,o=a.length;s<o;s+=2)a[s]=t+r[s+1]*n,a[s+1]=e+i-r[s]*i;else for(s=0,o=a.length;s<o;s+=2)a[s]=t+r[s]*n,a[s+1]=e+r[s+1]*i},n.prototype.applyDeform=function(t){return this==t||this.inheritDeform&&this.parentMesh==t},n.prototype.getParentMesh=function(){return this.parentMesh},n.prototype.setParentMesh=function(t){null!=(this.parentMesh=t)&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)},n);function n(t){t=e.call(this,t)||this;return t.color=new h.Color(1,1,1,1),t.inheritDeform=!1,t.tempColor=new h.Color(0,0,0,0),t}h.MeshAttachment=t}(spine=spine||{}),function(e){var n,t=(n=e.VertexAttachment,__extends(i,n),i);function i(t){t=n.call(this,t)||this;return t.closed=!1,t.constantSpeed=!1,t.color=new e.Color(1,1,1,1),t}e.PathAttachment=t}(spine=spine||{}),function(r){var e,t=(e=r.VertexAttachment,__extends(n,e),n.prototype.computeWorldPosition=function(t,e){return e.x=this.x*t.a+this.y*t.b+t.worldX,e.y=this.x*t.c+this.y*t.d+t.worldY,e},n.prototype.computeWorldRotation=function(t){var e=r.MathUtils.cosDeg(this.rotation),n=r.MathUtils.sinDeg(this.rotation),i=e*t.a+n*t.b,t=e*t.c+n*t.d;return Math.atan2(t,i)*r.MathUtils.radDeg},n);function n(t){t=e.call(this,t)||this;return t.color=new r.Color(.38,.94,0,1),t}r.PointAttachment=t}(spine=spine||{}),function(e){var n,t=(n=e.Attachment,__extends(c,n),c.prototype.updateOffset=function(){var t=this.width/this.region.originalWidth*this.scaleX,e=this.height/this.region.originalHeight*this.scaleY,n=-this.width/2*this.scaleX+this.region.offsetX*t,i=-this.height/2*this.scaleY+this.region.offsetY*e,r=n+this.region.width*t,a=i+this.region.height*e,s=this.rotation*Math.PI/180,o=Math.cos(s),h=Math.sin(s),t=n*o+this.x,e=n*h,s=i*o+this.y,n=i*h,i=r*o+this.x,r=r*h,o=a*o+this.y,a=a*h,h=this.offset;h[c.OX1]=t-n,h[c.OY1]=s+e,h[c.OX2]=t-a,h[c.OY2]=o+e,h[c.OX3]=i-a,h[c.OY3]=o+r,h[c.OX4]=i-n,h[c.OY4]=s+r},c.prototype.setRegion=function(t){this.region=t;var e=this.uvs;t.rotate?(e[2]=t.u,e[3]=t.v2,e[4]=t.u,e[5]=t.v,e[6]=t.u2,e[7]=t.v,e[0]=t.u2,e[1]=t.v2):(e[0]=t.u,e[1]=t.v2,e[2]=t.u,e[3]=t.v,e[4]=t.u2,e[5]=t.v,e[6]=t.u2,e[7]=t.v2)},c.prototype.computeWorldVertices=function(t,e,n,i){var r=this.offset,a=t.worldX,s=t.worldY,o=t.a,h=t.b,l=t.c,u=t.d,t=0,p=r[c.OX1],t=r[c.OY1];e[n]=p*o+t*h+a,e[n+1]=p*l+t*u+s,n+=i,p=r[c.OX2],t=r[c.OY2],e[n]=p*o+t*h+a,e[n+1]=p*l+t*u+s,n+=i,p=r[c.OX3],t=r[c.OY3],e[n]=p*o+t*h+a,e[n+1]=p*l+t*u+s,n+=i,p=r[c.OX4],t=r[c.OY4],e[n]=p*o+t*h+a,e[n+1]=p*l+t*u+s},c.OX1=0,c.OY1=1,c.OX2=2,c.OY2=3,c.OX3=4,c.OY3=5,c.OX4=6,c.OY4=7,c.X1=0,c.Y1=1,c.C1R=2,c.C1G=3,c.C1B=4,c.C1A=5,c.U1=6,c.V1=7,c.X2=8,c.Y2=9,c.C2R=10,c.C2G=11,c.C2B=12,c.C2A=13,c.U2=14,c.V2=15,c.X3=16,c.Y3=17,c.C3R=18,c.C3G=19,c.C3B=20,c.C3A=21,c.U3=22,c.V3=23,c.X4=24,c.Y4=25,c.C4R=26,c.C4G=27,c.C4B=28,c.C4A=29,c.U4=30,c.V4=31,c);function c(t){t=n.call(this,t)||this;return t.x=0,t.y=0,t.scaleX=1,t.scaleY=1,t.rotation=0,t.width=0,t.height=0,t.color=new e.Color(1,1,1,1),t.offset=e.Utils.newFloatArray(8),t.uvs=e.Utils.newFloatArray(8),t.tempColor=new e.Color(1,1,1,1),t}e.RegionAttachment=t}(spine=spine||{}),function(r){var t=(e.prototype.begin=function(t){},e.prototype.transform=function(t,e,n,i){t.x+=r.MathUtils.randomTriangular(-this.jitterX,this.jitterY),t.y+=r.MathUtils.randomTriangular(-this.jitterX,this.jitterY)},e.prototype.end=function(){},e);function e(t,e){this.jitterX=0,this.jitterY=0,this.jitterX=t,this.jitterY=e}r.JitterEffect=t}(spine=spine||{}),function(h){var t=(l.prototype.begin=function(t){this.worldX=t.x+this.centerX,this.worldY=t.y+this.centerY},l.prototype.transform=function(t,e,n,i){var r=this.angle*h.MathUtils.degreesToRadians,a=t.x-this.worldX,s=t.y-this.worldY,o=Math.sqrt(a*a+s*s);o<this.radius&&(r=l.interpolation.apply(0,r,(this.radius-o)/this.radius),o=Math.cos(r),r=Math.sin(r),t.x=o*a-r*s+this.worldX,t.y=r*a+o*s+this.worldY)},l.prototype.end=function(){},l.interpolation=new h.PowOut(2),l);function l(t){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=t}h.SwirlEffect=t}(spine=spine||{}),pc.extend(pc,function(){function r(t,e,n){var i=n&&n.lexicographical,n=n&&n.zeroExtend,r=t.split("."),a=e.split(".");function s(t){return(i?/^\d+[A-Za-z]*$/:/^\d+$/).test(t)}if(!r.every(s)||!a.every(s))return NaN;if(n){for(;r.length<a.length;)r.push("0");for(;a.length<r.length;)a.push("0")}i||(r=r.map(Number),a=a.map(Number));for(var o=0;o<r.length;++o){if(a.length==o)return 1;if(r[o]!=a[o])return r[o]>a[o]?1:-1}return r.length!=a.length?-1:0}function a(t){this._image={width:t.width,height:t.height},this.pcTexture=t}var o=0,h=1,l=2,n={9728:pc.FILTER_NEAREST,9729:pc.FILTER_LINEAR,9984:pc.FILTER_NEAREST_MIPMAP_NEAREST,9985:pc.FILTER_LINEAR_MIPMAP_NEAREST,9986:pc.FILTER_NEAREST_MIPMAP_LINEAR,9987:pc.FILTER_LINEAR_MIPMAP_LINEAR},i={33648:pc.ADDRESS_MIRRORED_REPEAT,33071:pc.ADDRESS_CLAMP_TO_EDGE,10487:pc.ADDRESS_REPEAT},u=[0,1,2,2,3,0];a.prototype={setFilters:function(t,e){this.pcTexture.minFilter=n[t],this.pcTexture.magFilter=n[e]},setWraps:function(t,e){this.pcTexture.addressU=i[t],this.pcTexture.addressV=i[e]},getImage:function(){return this._image}};function t(t,e,n,i){this._app=t,this._position=new pc.Vec3,e=new spine.TextureAtlas(e,function(t){return new a(i[t])}),(e=new spine.SkeletonJson(new spine.AtlasAttachmentLoader(e))).scale*=.01,n=e.readSkeletonData(n),this.skeletonVersion=n.version,this._spine_3_6_0=r(this.skeletonVersion,"3.6.0")<=0,this._spine_3_7_99=r(this.skeletonVersion,"3.7.99")<=0,this.skeleton=new spine.Skeleton(n),this.skeleton.updateWorldTransform(),this.stateData=new spine.AnimationStateData(this.skeleton.data),this.states=[new spine.AnimationState(this.stateData)],this.clipper=new spine.SkeletonClipping,this._node=new pc.GraphNode,this._meshes=[],this._meshInstances=[],this._materials={},this._tint={},this._aabb=new pc.BoundingBox,this._aabbTempArray=[],this._aabbTempOffset=new pc.Vec2,this._aabbTempSize=new pc.Vec2,this._renderCounts={vertexCount:0,indexCount:0},this._vertexFormat=null,this._vertexBuffer=null,this._indexBuffer=null,this._priority=0,this._timeScale=1,this._layers=[pc.LAYERID_UI],this.init(),this.autoUpdate=!0,this._model=new pc.Model,this._model.graph=this._node,this._model.meshInstances=this._meshInstances,this._hidden=!1}return t.prototype.destroy=function(){this._model&&this.removeFromLayers();for(var t=0;t<this._meshInstances.length;t++)this._meshInstances[t].mesh.vertexBuffer=null,this._meshInstances[t].mesh.indexBuffer.length=0,this._meshInstances[t].material=null;this._vertexBuffer&&(this._vertexBuffer.destroy(),this._vertexBuffer=null),this._indexBuffer&&(this._indexBuffer.destroy(),this._indexBuffer=null),this._model=null,this._meshInstances=[],this.skeleton=null,this.stateData=null,this.state=null,this._materials={},this._node=null},t.prototype.hide=function(){if(!this._hidden){for(var t=0,e=this._meshInstances.length;t<e;t++)this._meshInstances[t].visible=!1;this._hidden=!0}},t.prototype.show=function(){if(this._hidden){for(var t=0,e=this._meshInstances.length;t<e;t++)this._meshInstances[t].visible=!0;this._hidden=!1}},t.prototype.init=function(){this._vertexFormat=new pc.VertexFormat(this._app.graphicsDevice,[{semantic:pc.SEMANTIC_POSITION,components:2,type:pc.TYPE_FLOAT32},{semantic:pc.SEMANTIC_NORMAL,components:4,type:pc.TYPE_UINT8,normalize:!0},{semantic:pc.SEMANTIC_TEXCOORD0,components:2,type:pc.TYPE_FLOAT32},{semantic:pc.SEMANTIC_COLOR,components:4,type:pc.TYPE_UINT8,normalize:!0}]);for(var t=this.skeleton.drawOrder,e=0,n=t.length;e<n;e++)this.initSlot(t[e])},t.prototype.initSlot=function(t){t.positions=[],t.uvs=[],t.indices=[],t.vertexColor={},t._active={name:"",type:o},this.initAttachment(t)},t.prototype.createMaterial=function(t){var e=new pc.StandardMaterial;return e.shadingModel=pc.SPECULAR_BLINN,e.diffuse=new pc.Color(1,1,1),e.emissiveMap=t,e.emissiveMapChannel="rgb",e.emissiveVertexColor=!0,e.emissiveVertexColorChannel="rgb",e.opacityMap=t,e.opacityMapChannel="a",e.opacityVertexColor=!0,e.opacityVertexColorChannel="a",e.depthWrite=!1,e.cull=pc.CULLFACE_NONE,e.blendType=pc.BLEND_PREMULTIPLIED,this._spine_3_6_0&&(t=["gl_FragColor.rgb *= vVertexColor.a;","gl_FragColor.a = dAlpha;"].join("\n"),e.chunks.outputAlphaPremulPS=t),e.update(),e},t.prototype.initAttachment=function(t){var e,n=t.attachment;n&&(t._active.name=n.name,n instanceof spine.RegionAttachment?t._active.type=l:n instanceof spine.MeshAttachment&&(t._active.type=h),n.region&&n.region.texture&&((e=n.region.texture.pcTexture)&&(e instanceof pc.StandardMaterial?(this._materials[e.name]=e,t.material=e.name):(n=null,e.name?n=e.name:e.getSource()instanceof Image&&(n=e.getSource().getAttribute("src")),n&&(void 0===this._materials[n]&&(e=this.createMaterial(e),this._materials[n]=e),t.material=n)))))},t.prototype.updateSlot=function(t,e){var n=t.attachment,i=n.name,r=n instanceof spine.RegionAttachment?l:n instanceof spine.MeshAttachment?h:o;t._active.name===i&&t._active.type==r||this.initAttachment(t),t.positions.length=0,n instanceof spine.RegionAttachment?n.computeWorldVertices(t.bone,t.positions,0,2):n instanceof spine.MeshAttachment&&n.computeWorldVertices(t,0,n.worldVerticesLength,t.positions,0,2);i=this._tint[i];t.vertexColor={r:Math.round(255*t.color.r*(i?i.r:1)),g:Math.round(255*t.color.g*(i?i.g:1)),b:Math.round(255*t.color.b*(i?i.b:1)),a:Math.round(255*t.color.a*(i?i.a:1))};i=n.triangles||u;if(e.isClipping()){e.clipTriangles(t.positions,0,i,i.length,n.uvs,spine.Color.WHITE,spine.Color.WHITE,!1),t.positions.length=0,t.uvs.length=0;for(var a=e.clippedVertices.length,s=0;s<a;s+=8)t.positions.push(e.clippedVertices[s],e.clippedVertices[s+1]),t.uvs.push(e.clippedVertices[s+6],1-e.clippedVertices[s+7]);t.indices=e.clippedTriangles.slice()}else{for(t.uvs.length=0,a=t.positions.length,s=0;s<a;s+=2)t.uvs.push(n.uvs[s],1-n.uvs[s+1]);t.indices=i}this._renderCounts.vertexCount+=t.positions.length/2,this._renderCounts.indexCount+=t.indices.length},t.prototype.updateSkeleton=function(t){this._renderCounts.vertexCount=0,this._renderCounts.indexCount=0;for(var e=this.clipper,n=!1,n=!0,i=this.skeleton.drawOrder,r=i.length,a=0;a<r;a++){var s,o=i[a];this._spine_3_7_99||o.bone.active?n?(s=o.getAttachment())instanceof spine.ClippingAttachment?e.clipStart(o,s):s instanceof spine.RegionAttachment||s instanceof spine.MeshAttachment?this.updateSlot(o,e):this._spine_3_7_99||e.clipEndWithSlot(o):e.clipEndWithSlot(o):e.clipEndWithSlot(o)}},t.prototype.render=function(){if(this._meshInstances.forEach(function(t){t.material=null}),this.removeFromLayers(),this._meshes=[],(this._meshInstances.length=0)<this._renderCounts.indexCount&&0<this._renderCounts.vertexCount){this.skeleton.getBounds(this._aabbTempOffset,this._aabbTempSize,this._aabbTempArray),this._aabb.center=new pc.Vec3(this._aabbTempOffset.x,this._aabbTempOffset.y,0),this._aabb.halfExtents=new pc.Vec3(.5*this._aabbTempSize.x,.5*this._aabbTempSize.y,0),(!this._vertexBuffer||this._vertexBuffer.getNumVertices()<this._renderCounts.vertexCount)&&(this._vertexBuffer&&this._vertexBuffer.destroy(),this._vertexBuffer=new pc.VertexBuffer(this._app.graphicsDevice,this._vertexFormat,this._renderCounts.vertexCount)),(!this._indexBuffer||this._indexBuffer.getNumIndices()<this._renderCounts.indexCount)&&(this._indexBuffer&&this._indexBuffer.destroy(),this._indexBuffer=new pc.IndexBuffer(this._app.graphicsDevice,pc.INDEXFORMAT_UINT16,this._renderCounts.indexCount));for(var t=null,e=0,n=0,i=new pc.VertexIterator(this._vertexBuffer),r=new Uint16Array(this._indexBuffer.lock()),a=0,s=0,o=this.skeleton.drawOrder,h=o.length,l=0;l<h;l++){var u=o[l];if(u.attachment&&u.material&&0<u.positions.length&&0<u.indices.length){t&&t!==u.material&&(this.SubmitBatch(e,n,t),t=u.material,e=a,n=0),t=u.material;for(var p=u.positions,c=u.vertexColor.r,d=u.vertexColor.g,f=u.vertexColor.b,m=u.vertexColor.a,g=u.uvs,v=p.length/2,y=0;y<v;y++)i.element[pc.SEMANTIC_POSITION].set(p[2*y],p[2*y+1]),i.element[pc.SEMANTIC_NORMAL].set(0,255,0,0),i.element[pc.SEMANTIC_COLOR].set(c,d,f,m),i.element[pc.SEMANTIC_TEXCOORD0].set(g[2*y],g[2*y+1]),i.next();var x=u.indices,E=x.length;for(y=0;y<E;y++)r[a+y]=x[y]+s;n+=E,a+=E,s+=v}}i.end(),this._indexBuffer.unlock(),this.SubmitBatch(e,n,t)}this.addToLayers()},t.prototype.SubmitBatch=function(t,e,n){var i;0<e&&((i=new pc.Mesh).vertexBuffer=this._vertexBuffer,i.indexBuffer[0]=this._indexBuffer,i.primitive[0].type=pc.PRIMITIVE_TRIANGLES,i.primitive[0].base=t,i.primitive[0].count=e,i.primitive[0].indexed=!0,i.aabb=this._aabb,this._meshes.push(i),(n=new pc.MeshInstance(this._node,i,this._materials[n])).drawOrder=this.priority+this._meshInstances.length,n.visible=!this._hidden,this._meshInstances.push(n))},t.prototype.update=function(t){if(!this._hidden){t*=this._timeScale;for(var e=this.states.length,n=0;n<e;n++)this.states[n].update(t);for(n=0;n<e;n++)this.states[n].apply(this.skeleton);this.autoUpdate&&this.skeleton.updateWorldTransform(),this.updateSkeleton(),this.render()}},t.prototype.setPosition=function(t){this._position.copy(t)},t.prototype.setTint=function(t,e){this._tint[t]=e},t.prototype.removeFromLayers=function(){if(this._model)for(var t=0;t<this._layers.length;t++){var e=this._app.scene.layers.getLayerById(this._layers[t]);e&&e.removeMeshInstances(this._model.meshInstances)}},t.prototype.addToLayers=function(){if(this._model)for(var t=0;t<this._layers.length;t++){var e=this._app.scene.layers.getLayerById(this._layers[t]);e&&e.addMeshInstances(this._model.meshInstances)}},Object.defineProperty(t.prototype,"state",{get:function(){return this.states[0]}}),Object.defineProperty(t.prototype,"priority",{get:function(){return this._priority},set:function(t){this._priority=t}}),Object.defineProperty(t.prototype,"timeScale",{get:function(){return this._timeScale},set:function(t){this._timeScale=t}}),Object.defineProperty(t.prototype,"layers",{get:function(){return this._layers},set:function(t){this._model&&this.removeFromLayers(),this._layers=t||[],this._model&&this.addToLayers()}}),{Spine:t}}()),pc.extend(pc,function(){function t(t){pc.ComponentSystem.call(this,t),this.id="spine",this.ComponentType=pc.SpineComponent,this.DataType=pc.SpineComponentData,this.schema=["enabled","atlasAsset","textureAssets","skeletonAsset","atlasData","textures","skeletonData","speed","spine"],pc.ComponentSystem.bind("update",this.onUpdate,this)}return(t.prototype=Object.create(pc.ComponentSystem.prototype)).constructor=t,Object.assign(t.prototype,{initializeComponentData:function(t,e,n){n=["enabled","atlasAsset","textureAssets","skeletonAsset","atlasData","textures","skeletonData","spine"],pc.ComponentSystem.prototype.initializeComponentData.call(this.system,t,e,n)},removeComponent:function(t){var e=t.spine.data;e.spine&&e.spine.destroy(),t.spine.removeComponent()},onUpdate:function(t){var e,n,i,r=this.store;for(e in r)!r.hasOwnProperty(e)||(i=(n=r[e]).data).enabled&&n.entity.enabled&&i.spine&&(i.spine.setPosition(n.entity.getPosition()),i.spine.update(i.speed*t))}}),{SpineComponentSystem:t}}()),pc.extend(pc,function(){function t(t,e){pc.Component.call(this,t,e),this.on("set_atlasAsset",this.onSetAsset,this),this.on("set_textureAssets",this.onSetAssets,this),this.on("set_skeletonAsset",this.onSetAsset,this),this.on("set_atlasData",this.onSetResource,this),this.on("set_textures",this.onSetResource,this),this.on("set_skeletonData",this.onSetResource,this)}return(t.prototype=Object.create(pc.Component.prototype)).constructor=t,Object.assign(t.prototype,{_createSpine:function(){this.data.spine&&(this.data.spine.destroy(),this.data.spine=null);for(var t={},e=0,n=this.textureAssets.length;e<n;e++){var i=this.system.app.assets.get(this.textureAssets[e]),r=pc.path.getBasename(i.file.url),a=r.indexOf("?");-1!==a&&(r=r.substring(0,a)),t[r]=i.resource}this.data.spine=new pc.Spine(this.system.app,this.atlasData,this.skeletonData,t),this.state=this.data.spine.state,this.states=this.data.spine.states,this.skeleton=this.data.spine.skeleton,this.entity.addChild(this.data.spine._node)},_onAssetReady:function(t){"texture"===t.type&&this.textures.push(t.resource),"json"===t.type&&(this.skeletonData=t.resource),"text"===t.type&&(this.atlasData=t.resource)},_onAssetAdd:function(t){t.off("change",this.onAssetChanged,this),t.on("change",this.onAssetChanged,this),t.off("remove",this.onAssetRemoved,this),t.on("remove",this.onAssetRemoved,this),t.ready(this._onAssetReady,this),this.system.app.assets.load(t)},onSetResource:function(){this.data.atlasData&&this.data.textures.length&&this.data.skeletonData&&this._createSpine()},onSetAsset:function(t,e,n){var i=this.system.app.assets,r=null;e&&(r=i.get(e))&&(r.off("change",this.onAssetChanged),r.off("remove",this.onAssetRemoved)),n&&((e=n)instanceof pc.Asset&&(e=n.id,this.data[t]=e),(r=i.get(e))?this._onAssetAdd(r):i.on("add:"+e))},onSetAssets:function(t,e,n){var i=this.system.app.assets,r=null;if(e.length)for(s=0,o=e.length;s<o;s++)(r=i.get(e[s]))&&(r.off("change",this.onAssetChanged),r.off("remove",this.onAssetRemoved));if(n&&n.length)for(var a=n.map(function(t){return t instanceof pc.Asset?t.id:t}),s=0,o=n.length;s<o;s++)(r=i.get(a[s]))?this._onAssetAdd(r):i.on("add:"+a[s])},onAssetChanged:function(t,e,n,i){},onAssetRemoved:function(t){},onEnable:function(){pc.Component.prototype.onEnable.call(this);var t=this.data.spine;t&&t.addToLayers()},onDisable:function(){pc.Component.prototype.onDisable.call(this);var t=this.data.spine;t&&t.removeFromLayers()},hide:function(){this.data.spine&&this.data.spine.hide()},show:function(){this.data.spine&&this.data.spine.show()},removeComponent:function(){var t;if(this.atlasAsset&&(t=this.system.app.assets.get(this.atlasAsset))&&(t.off("change",this.onAssetChanged),t.off("remove",this.onAssetRemoved)),this.skeletonAsset&&(t=this.system.app.assets.get(this.skeletonAsset))&&(t.off("change",this.onAssetChanged),t.off("remove",this.onAssetRemoved)),this.textureAssets&&this.textureAssets.length)for(var e=0;e<this.textureAssets.length;e++)(t=this.system.app.assets.get(this.textureAssets[e]))&&(t.off("change",this.onAssetChanged),t.off("remove",this.onAssetRemoved))}}),{SpineComponent:t}}()),pc.extend(pc,{SpineComponentData:function(){this.enabled=!0,this.atlasAsset=null,this.textureAssets=[],this.skeletonAsset=null,this.speed=1,this.spine=null,this.atlasData=null,this.textures=[],this.skeletonData=null}}),function(){var t,e;pc.Application.registerPlugin?pc.Application.registerPlugin("spine",function(t){new pc.SpineComponentSystem(t)}):(t=pc.Application.getApplication(),e=new pc.SpineComponentSystem(t),t.systems.add(e))}();